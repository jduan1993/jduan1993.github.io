[{"id":0,"href":"/docs/example/table-of-contents/with-toc/","title":"With ToC","section":"Table of Contents","content":"\rCaput vino delphine in tamen vias\r#\rCognita laeva illo fracta\r#\rLorem markdownum pavent auras, surgit nunc cingentibus libet Laomedonque que est. Pastor An arbor filia foedat, ne fugit aliter, per. Helicona illas et callida neptem est Oresitrophos caput, dentibus est venit. Tenet reddite famuli praesentem fortibus, quaeque vis foret si frondes gelidos gravidae circumtulit inpulit armenta nativum.\nTe at cruciabere vides rubentis manebo Maturuit in praetemptat ruborem ignara postquam habitasse Subitarum supplevit quoque fontesque venabula spretis modo Montis tot est mali quasque gravis Quinquennem domus arsit ipse Pellem turis pugnabant locavit Natus quaerere\r#\rPectora et sine mulcere, coniuge dum tincta incurvae. Quis iam; est dextra Peneosque, metuis a verba, primo. Illa sed colloque suis: magno: gramen, aera excutiunt concipit.\nPhrygiae petendo suisque extimuit, super, pars quod audet! Turba negarem. Fuerat attonitus; et dextra retinet sidera ulnas undas instimulat vacuae generis? Agnus dabat et ignotis dextera, sic tibi pacis feriente at mora euhoeque comites hostem vestras Phineus. Vultuque sanguine dominoque metuit risi fama vergit summaque meus clarissimus artesque tinguebat successor nominis cervice caelicolae.\nLimitibus misere sit\r#\rAurea non fata repertis praerupit feruntur simul, meae hosti lentaque citius levibus, cum sede dixit, Phaethon texta. Albentibus summos multifidasque iungitur loquendi an pectore, mihi ursaque omnia adfata, aeno parvumque in animi perlucentes. Epytus agis ait vixque clamat ornum adversam spondet, quid sceptra ipsum est. Reseret nec; saeva suo passu debentia linguam terga et aures et cervix de ubera. Coercet gelidumque manus, doluit volvitur induta?\nEnim sua\r#\rIuvenilior filia inlustre templa quidem herbis permittat trahens huic. In cruribus proceres sole crescitque fata, quos quos; merui maris se non tamen in, mea.\nGermana aves pignus tecta\r#\rMortalia rudibusque caelum cognosceret tantum aquis redito felicior texit, nec, aris parvo acre. Me parum contulerant multi tenentem, gratissime suis; vultum tu occupat deficeret corpora, sonum. E Actaea inplevit Phinea concepit nomenque potest sanguine captam nulla et, in duxisses campis non; mercede. Dicere cur Leucothoen obitum?\nPostibus mittam est nubibus principium pluma, exsecratur facta et. Iunge Mnemonidas pallamque pars; vere restitit alis flumina quae quoque, est ignara infestus Pyrrha. Di ducis terris maculatum At sede praemia manes nullaque!\n"},{"id":1,"href":"/docs/study/system-design/system-design/","title":"ç³»ç»Ÿè®¾è®¡","section":"ç³»ç»Ÿè®¾è®¡","content":"\rè¦æ±‚\r#\r1. åˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€‚\r#\råˆ†å¸ƒå¼ï¼šå¾®æœåŠ¡ã€å¼‚æ­¥é€šä¿¡ã€åˆ†å¸ƒå¼ç¼“å­˜ã€K8s å¯æ‰©å±•ï¼šHPAã€åˆ†åº“åˆ†è¡¨ã€K8s DNS Serviceã€å¤šAZã€å¤šå›½å®¶ 2. ç”¨æˆ·å¯æœç´¢ã€å¯é¢„çº¦ã€å¯é‡æ–°å®‰æ’ã€å¯å–æ¶ˆï¼ŒåŸºäºåŒ»ç”Ÿçš„ä½ç½®ã€ä¸“ç§‘ã€å¯ç”¨æ—¶é—´ã€‚\r#\ræœç´¢\r#\rCache Asideï¼ŒInvalidate when Booking and Cancellation (TTL ~ minutes) Caffeine å¼‚æ­¥å»¶è¿ŸåŒåˆ  æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âš¡ é«˜åå Redis å‘½ä¸­ç‡é«˜ï¼Œæ”¯æŒ QPS \u0026gt; 1000+ â±ï¸ ä½å»¶è¿Ÿ å•åŒ»ç”ŸæŸ¥è¯¢ latency â‰ˆ å‡  ms âœ… å†™åæ— è¯» Slot æ•°æ®é¢„ç”Ÿæˆã€å†™å…¥ååªè¯»ï¼Œé€‚åˆç¼“å­˜ ğŸ” å¼‚æ­¥æ›´æ–° Cache ç”± Kafka é©±åŠ¨å¼‚æ­¥æ›´æ–°ï¼Œæ— éœ€å¼ºä¸€è‡´æ€§ ç¼ºç‚¹ è¯´æ˜ ğŸ•’ æ•°æ®è½»å¾®ä¸ä¸€è‡´ TTL å¤±æ•ˆæœŸé—´å¯èƒ½å±•ç¤ºå·²è¢«é¢„çº¦çš„ slotï¼ˆåœ¨ Booking é˜¶æ®µå…œåº•ï¼‰ ğŸ§  Cache Invalidate å¤æ‚ å¤šæœåŠ¡å†™å…¥ slot çŠ¶æ€éœ€ä¿è¯æ­£ç¡®æ¸…é™¤ Redis ç¼“å­˜ ğŸ“¦ å¤§é‡ slot Redis å†…å­˜å ç”¨éœ€æ§åˆ¶ï¼ˆå¯åšåˆ†ç‰‡ or ä½¿ç”¨ Redis Clusterï¼‰ é¢„çº¦\r#\rRedlock åŠ é” (TTL ~ seconds) åŠ å…¥ Request ID ä½œä¸ºå”¯ä¸€æ€§çº¦æŸ æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ’å…¥é¢„çº¦ï¼ˆAppointmentï¼‰ å‘å¸ƒ AppointmentCreated åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âœ… é«˜ä¸€è‡´æ€§ä¿éšœ é”+äº‹åŠ¡åŒé‡ä¿è¯ âœ… å¹‚ç­‰è®¾è®¡ é˜²æ­¢é‡å¤é¢„çº¦ âœ… å¯è§‚æµ‹æ€§å¼º Kafka æ¨é€äº‹ä»¶ç”¨äºè¿½è¸ªé“¾è·¯ âœ… å¼‚æ­¥è§£è€¦ éæ ¸å¿ƒé€»è¾‘ï¼ˆé€šçŸ¥ã€ç¼“å­˜ï¼‰ä¸å½±å“ä¸»æµç¨‹æ€§èƒ½ ç¼ºç‚¹ è¯´æ˜ â— Redis ä¸å¯ç”¨ Redlock ä¾èµ– Redisï¼Œå¯å¼•å…¥é™çº§æœºåˆ¶ï¼ˆfallback DB lockï¼‰ â— é«˜å¹¶å‘ä¸‹å»¶è¿Ÿ æ‹¥å¡åœ¨çƒ­ç‚¹ slotï¼ˆæ¯”å¦‚çƒ­é—¨åŒ»ç”Ÿï¼‰å¯ç”¨é˜Ÿåˆ—æ’é˜Ÿç¼“è§£ â— äº‹åŠ¡å¤æ‚æ€§ éœ€ç»†è‡´å¤„ç†é”é‡Šæ”¾å’Œå›æ»šï¼Œé¿å…æ­»é” é‡æ–°å®‰æ’\r#\rRedlockåŠ é” (TTL ~ seconds) æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ ¡éªŒä¿®æ”¹æ—§é¢„çº¦ï¼Œæ’å…¥æ–°é¢„çº¦ å‘å¸ƒ AppointmentRescheduled åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âœ… ä¸€è‡´æ€§ä¿éšœ äº‹åŠ¡æ›´æ–° + å¹‚ç­‰æ§åˆ¶ï¼Œé¿å…é”™çº¦/é‡å¤çº¦ âœ… åŒ slot å®‰å…¨ç®¡ç† æ˜¾å¼é‡Šæ”¾æ—§ slotã€é”å®šæ–° slot âœ… è§£è€¦é€»è¾‘ Kafka ç”¨äºé€šçŸ¥ä¸ç¼“å­˜åˆ·æ–°ï¼Œä¸»æµç¨‹ä¸é˜»å¡ ç¼ºç‚¹ è¯´æ˜ â— æ–°æ—§ slot çŠ¶æ€åˆ‡æ¢é€»è¾‘å¤æ‚ éœ€è¦æ˜ç¡®çŠ¶æ€æµè½¬æ¨¡å‹ â— Redis ä¸å¯ç”¨å½±å“é” é™çº§ fallbackï¼šæ•°æ®åº“æ‚²è§‚é” â— ç”¨æˆ·è¯¯æ“ä½œå¯èƒ½å¯¼è‡´é‡å¤ reschedule éœ€é™åˆ¶é¢‘ç‡ï¼Œå¢å¼ºå¹‚ç­‰æ€§ä¿éšœ å–æ¶ˆ\r#\rRedlockåŠ é” (TTL ~ seconds) æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ ¡éªŒä¿®æ”¹æ—§é¢„çº¦ å‘å¸ƒ AppointmentCanceled åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\r3. æœåŠ¡5000ä¸‡ç”¨æˆ·ï¼Œ50ä¸‡åŒ»ç”Ÿï¼Œæ¯ç§’700æ¬¡æœç´¢ï¼Œæ¯ç§’90æ¬¡é¢„çº¦ã€‚\r#\r4. è½»æ¾æ‹“å±•æ–°åœ°åŒºã€‚\r#\ré…ç½®å±‚é¢éš”ç¦»ï¼ˆSpring Cloud Configï¼‰ æ•°æ®åº“åˆ†åº“ï¼ˆDate Partitioningï¼‰ é€šç”¨æœåŠ¡ï¼ˆCommon Servicesï¼‰å’Œå·®å¼‚åŒ–å®šåˆ¶ï¼ˆCustom Servicesï¼‰ APIè®¾è®¡ï¼ˆ/fr, /deï¼‰ å¤šç§Ÿæˆ·éƒ¨ç½²ï¼ˆnamespaceï¼‰ æ—¥å¿—æ ‡ç­¾ï¼ˆLabelï¼‰ 5. è¦è€ƒè™‘æœåŠ¡ä¹‹é—´çš„æ‰©å±•æ€§ï¼Œå®¹é”™æ€§ï¼Œæ•°æ®ä¸€è‡´æ€§ã€‚\r#\ræ‰©å±•æ€§ï¼šHPAï¼ŒIngress Controllerï¼ŒRedis Cluster Slotï¼ŒKafka Brokers Partition, Database Sharding å®¹é”™æ€§ï¼šService Meshï¼Œå¤šAZï¼ŒRedis Redlockï¼ŒKafka æœ€ç»ˆä¸€è‡´æ€§ï¼šæ•°æ®åº“äº‹åŠ¡ï¼ŒRedis Redlockï¼ŒSAGA Patternï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼ˆAsync Messageï¼‰ï¼Œé‡è¯•ï¼ˆRetryï¼‰ï¼Œæ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼‰ï¼Œç¼“å­˜å¤±æ•ˆï¼ˆCache Invalidationï¼‰ï¼Œäº‹ä»¶ç›‘å¬ï¼ˆEvent-driven Monitoringï¼‰ é—®é¢˜\r#\r1. æœç´¢å‰ï¼ˆSearchï¼‰éœ€è¦ç»è¿‡é‰´æƒï¼ˆAuthorizationï¼‰å—ï¼Ÿ\r#\rå¦‚æœä¸éœ€è¦ï¼š\næŠŠSearch Serviceç½®å‰ è¿™æ ·å¯èƒ½æ›´å¸å¼•ç”¨æˆ· ä½†æ˜¯ä¼šå¢åŠ è®¿é—®é‡ 2. æœç´¢æ—¶éƒ½æœ‰ä»€ä¹ˆç­›é€‰æ¡ä»¶ï¼ˆFilter Conditionï¼‰ï¼Ÿ\r#\rå¦‚æœæ¶‰åŠåˆ°è·ç¦»ï¼Œäº¤é€šå·¥å…·ï¼Œè·¯ç¨‹ç”¨æ—¶ç­‰æ¡ä»¶ï¼š\nå¯ä»¥è®¾è®¡ç¬¬ä¸‰æ–¹ä¾›åº”å•†ï¼ˆ3rd-Party Vendorsï¼‰æä¾›åœ°å›¾ï¼ˆMap APIï¼‰ç­‰æ¥å£ å¦‚æœæ¶‰åŠåˆ°åŒ»ç”Ÿç®€ä»‹ï¼ˆSummaryï¼‰ï¼Œå…¨æ–‡æœç´¢ï¼ˆFull-Text Searchï¼‰:\nå¯ä»¥å¼•å…¥ElasticSearch 3. æˆ‘ä»¬ä¸åŒå›½å®¶çš„å¸‚åœºä½¿ç”¨åŒä¸€ä¸ªåº”ç”¨ï¼ˆThe only one appï¼‰å—ï¼Ÿ\r#\rå¦‚æœæ˜¯ï¼š\nå›½é™…åŒ–ï¼ˆInternationalizationï¼‰ï¼Œæ—¶é—´ã€è¯­è¨€ã€è´§å¸ã€æ—¥æœŸæ ¼å¼ é…ç½®å¼€å…³ï¼ˆFeature Flagï¼‰ æ ¹æ®è®¾å¤‡æœ¬åœ°æ—¶é—´ï¼ˆDevice Timeï¼‰æˆ–è€…å®šä½ï¼ˆLocalizationï¼‰ å¦‚æœä¸æ˜¯ï¼š\néƒ¨ç½²è¿‡ç¨‹è¦è€ƒè™‘æ›´å¤šæ¨¡å— 4. é¢„çº¦ä¼šè·¨å¤©ï¼ˆSpan 2 daysï¼‰å—ï¼Ÿ\r#\rè¦è€ƒè™‘æ•°æ®åº“è¡¨ç»“æ„ï¼ˆDatabase table structure) ä»£ç é€»è¾‘ä¸­è¦è€ƒè™‘ 5. æ¯ç§’700æ¬¡æœç´¢å’Œ90æ¬¡é¢„çº¦æ˜¯æœ€é«˜å³°å€¼ï¼ˆMaximum Peak Valueï¼‰å—ï¼Ÿ\r#\rå½±å“è§„æ¨¡ï¼ˆScaleï¼‰ å¯æ‰©å±•æ€§å’Œå®‰å…¨æ€§\r#\r1. å¯æ‰©å±•æ€§\r#\ræ–¹é¢ å…³é”®å®è·µ æ°´å¹³æ‰©å±•ï¼ˆHorizontal Scalingï¼‰ æ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å¤šä¸ªå‰¯æœ¬ æœåŠ¡è‡ªæ²»ï¼ˆService Autonomyï¼‰ å„æœåŠ¡å¯ç‹¬ç«‹æ‰©ç¼©ï¼Œä¸ä¾èµ–æ•´ä½“ç³»ç»Ÿ å®¹å™¨åŒ–éƒ¨ç½² ä½¿ç”¨ Docker + Kubernetes å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹ è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰ ä½¿ç”¨ API Gateway æˆ– Service Mesh å‡è¡¡æµé‡ å¼‚æ­¥é€šä¿¡ Kafkaã€RabbitMQ ç­‰æé«˜ååé‡å’Œè§£è€¦ ç¼“å­˜ç­–ç•¥ Redisã€æœ¬åœ°ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ› æ•°æ®åº“åˆ†åº“åˆ†è¡¨ æ°´å¹³æ‹†åˆ†æå‡å¹¶å‘èƒ½åŠ› æœåŠ¡ç†”æ–­/é™æµ Sentinelã€Hystrix é˜²æ­¢é›ªå´©æ•ˆåº” 2. å®‰å…¨æ€§\r#\rå®‰å…¨é¢†åŸŸ æŠ€æœ¯æ‰‹æ®µ èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰ OAuth 2.0ã€OIDCã€JWT Token æœåŠ¡æˆæƒï¼ˆAuthorizationï¼‰ RBACã€ABACã€API æƒé™ç½‘å…³ é€šä¿¡åŠ å¯† HTTPS / TLSã€gRPC + mTLS æœåŠ¡é—´è®¤è¯ Service Meshï¼ˆå¦‚ Istioï¼‰æ”¯æŒ mTLS è‡ªåŠ¨åŠ å¯† API ç½‘å…³å®‰å…¨ é™æµã€é˜²æ­¢é‡æ”¾æ”»å‡»ã€è¯·æ±‚ç­¾åéªŒè¯ æ•°æ®å®‰å…¨ æ•°æ®åŠ å¯†ï¼ˆä¼ è¾“ + å­˜å‚¨ï¼‰ã€è„±æ•ã€è®¿é—®å®¡è®¡ å®¹å™¨å®‰å…¨ é•œåƒæ‰«æã€Kubernetes å®‰å…¨ç­–ç•¥ï¼ˆPodSecurityPolicyï¼‰ æ—¥å¿—å®¡è®¡ å®¡è®¡ç”¨æˆ·è¡Œä¸ºã€å¼‚å¸¸è®¿é—®è®°å½• é˜²æ”»å‡» é˜²æ­¢ XSS / CSRF / SQL æ³¨å…¥ï¼Œä½¿ç”¨ WAFã€é˜²ç«å¢™ç­‰ ä¼˜åŒ–\r#\ræœåŠ¡é—´é€šä¿¡åŒå‘TLSï¼ˆMutual TLS between servicesï¼‰ ç”¨Service Meshç»Ÿä¸€åšç†”æ–­ã€é™æµã€é‡è¯•ï¼ˆCentralized resiliency by service meshï¼‰ å¤šAZéƒ¨ç½²ï¼ŒåŒ…æ‹¬Servicesï¼ŒRedis Clusterç­‰ï¼ˆMulti-AZï¼‰ äºŒçº§ç¼“å­˜ï¼Œä¸€çº§Caffeineï¼ˆLocalï¼‰ï¼ŒäºŒçº§Redisï¼ˆDistributedï¼‰ æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼ˆRead-Write Separationï¼‰ï¼Œåˆ†åº“åˆ†è¡¨ï¼ˆShardingï¼‰ å…¨é“¾è·¯Traceï¼ˆTelemetryï¼Œend-to-end tracingï¼‰ å›ºå®šæ—¶é—´æ‰¹å¤„ç†çƒ­ç‚¹æ—¶é—´å¤šï¼ˆScheduled batch to store hot time slotsï¼‰ "},{"id":2,"href":"/docs/example/table-of-contents/without-toc/","title":"Without ToC","section":"Table of Contents","content":"\rAt me ipso nepotibus nunc celebratior genus\r#\rTanto oblite\r#\rLorem markdownum pectora novis patenti igne sua opus aurae feras materiaque illic demersit imago et aristas questaque posset. Vomit quoque suo inhaesuro clara. Esse cumque, per referri triste. Ut exponit solisque communis in tendens vincetis agisque iamque huic bene ante vetat omina Thebae rates. Aeacus servat admonitu concidit, ad resimas vultus et rugas vultu dignamque Siphnon.\nQuam iugulum regia simulacra, plus meruit humo pecorumque haesit, ab discedunt dixit: ritu pharetramque. Exul Laurenti orantem modo, per densum missisque labor manibus non colla unum, obiectat. Tu pervia collo, fessus quae Cretenque Myconon crate! Tegumenque quae invisi sudore per vocari quaque plus ventis fluidos. Nodo perque, fugisse pectora sorores.\nSumme promissa supple vadit lenius\r#\rQuibus largis latebris aethera versato est, ait sentiat faciemque. Aequata alis nec Caeneus exululat inclite corpus est, ire tibi ostendens et tibi. Rigent et vires dique possent lumina; eadem dixit poma funeribus paret et felix reddebant ventis utile lignum.\nRemansit notam Stygia feroxque Et dabit materna Vipereas Phrygiaeque umbram sollicito cruore conlucere suus Quarum Elis corniger Nec ieiunia dixit Vertitur mos ortu ramosam contudit dumque; placabat ac lumen. Coniunx Amoris spatium poenamque cavernis Thebae Pleiadasque ponunt, rapiare cum quae parum nimium rima.\nQuidem resupinus inducto solebat una facinus quae\r#\rCredulitas iniqua praepetibus paruit prospexit, voce poena, sub rupit sinuatur, quin suum ventorumque arcadiae priori. Soporiferam erat formamque, fecit, invergens, nymphae mutat fessas ait finge.\nBaculum mandataque ne addere capiti violentior Altera duas quam hoc ille tenues inquit Sicula sidereus latrantis domoque ratae polluit comites Possit oro clausura namque se nunc iuvenisque Faciem posuit Quodque cum ponunt novercae nata vestrae aratra Ite extrema Phrygiis, patre dentibus, tonso perculit, enim blanda, manibus fide quos caput armis, posse! Nocendo fas Alcyonae lacertis structa ferarum manus fulmen dubius, saxa caelum effuge extremis fixum tumor adfecit bella, potentes? Dum nec insidiosa tempora tegit spirarunt. Per lupi pars foliis, porreximus humum negant sunt subposuere Sidone steterant auro. Memoraverit sine: ferrum idem Orion caelum heres gerebat fixis?\n"},{"id":3,"href":"/docs/study/base/tips/","title":"è¡¥å……","section":"åŸºç¡€","content":"\rç”¨é€”\r#\r1. API Gateway\r#\rèº«ä»½éªŒè¯ï¼ˆAuthentication \u0026amp; Authorizationï¼‰ é€Ÿç‡é™åˆ¶ï¼ˆRate Limitï¼‰ è¯·æ±‚è·Ÿè¸ªï¼ˆRequest Tracingï¼‰ ç†”æ–­ï¼ˆCircuit Breakingï¼‰ 2. Search Service\r#\rRedis + Databaseæœç´¢ 3. Booking Service\r#\rRedis Redlockï¼Œæ—¶æ®µçº§é”å®šï¼ˆSlot-level Lockingï¼‰ï¼Œæ•°æ®åº“äº‹åŠ¡ï¼ˆTransactionï¼‰ Idempotencyï¼ŒRequest ID å‘å¸ƒåˆ°Kafkaè¿›è¡Œç¼“å­˜å¤±æ•ˆå’Œé€šçŸ¥ é¢„çº¦æµç¨‹\r#\rRedlockåŠ é” æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ’å…¥é¢„çº¦ï¼ˆAppointmentï¼‰ï¼ŒåŠ å…¥Request IDä½œä¸ºå”¯ä¸€æ€§çº¦æŸ å‘å¸ƒAppointmentCreatedåˆ°Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ 4. Database\r#\ræ•°æ®åº“åˆ†åŒºï¼ˆPartition by country or Doctorâ€˜s IDï¼‰ æ¶ˆæ¯æ€»çº¿ï¼ˆMessage Busï¼‰ï¼Œç”¨äºè§£è€¦é¢„çº¦å’Œç¼“å­˜å¤±æ•ˆå’Œé€šçŸ¥ 5. Notification Service\r#\rEmail Service or SMS Service ï¼ˆSendgrid \u0026amp; Twilioï¼‰ In-app notification ï¼ˆFirebase etc.) æ‰©å±•\r#\ræ ¹æ®CPUï¼ŒMemoryç­‰è¿›è¡Œæ¨ªå‘æ‹“å±•ï¼ˆHorizontal Pod Autoscalerï¼‰ redisåˆ†ç‰‡ æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼ˆRead-Write Separationï¼‰ æ•°æ®åº“åˆ†åŒºï¼ˆPartitionï¼‰ å®¹é”™\r#\rç†”æ–­ï¼ˆCircuit Breakerï¼Œ Resilience4jï¼‰ å¥åº·æ£€æŸ¥ï¼ˆHealth Checksï¼‰ è‡ªæˆ‘ä¿®å¤ï¼ˆSelf-Healingï¼‰ å‘Šè­¦ï¼ˆAlertï¼‰ å®‰å…¨\r#\rç«¯åˆ°ç«¯TLS OAuth2ç™»å½• Rate Limit Logging é¢è¯•è¡¨è¿°\r#\rè´Ÿè½½å‡è¡¡å’Œç†”æ–­é™æµåœ¨å“ªé‡Œåšï¼Œä¸åœ¨gatewayåšå—ï¼Ÿ\r#\râ€œæˆ‘ä»¬åœ¨ Gateway å±‚åšå¤–éƒ¨é™æµå’Œåˆçº§ç†”æ–­ï¼Œç”¨äº‘å‚å•† LB + Ingress/Gateway æ§åˆ¶è¾¹ç¼˜æµé‡ï¼›åœ¨ æœåŠ¡å†…éƒ¨ï¼Œå®¢æˆ·ç«¯ç”¨ Ribbon æˆ– Envoy åšè°ƒç”¨è´Ÿè½½å‡è¡¡ï¼Œç”¨ Resilience4j åšç†”æ–­å’Œé™æµä¿æŠ¤ä¸‹æ¸¸ï¼›åœ¨ å¹³å°ä¾§ï¼ŒKubernetes Service è´Ÿè´£ Pod çº§åˆ«å‡è¡¡ï¼Œè‹¥å¼•å…¥ Service Meshï¼Œåˆ™ Envoy sidecar å¯åšæ›´ç»†ç²’åº¦çš„ LBã€ç†”æ–­ã€é™æµã€æµé‡é•œåƒç­‰é«˜çº§åŠŸèƒ½ã€‚è¿™æ ·å¤šå±‚ååŒï¼Œæ—¢ä¿æŠ¤äº†ä¸‹æ¸¸æœåŠ¡ï¼Œä¹Ÿä¿è¯äº†å…¨é“¾è·¯çš„é«˜å¯ç”¨å’Œå¯æ§æ€§ã€‚â€ k8sä¸­æ¨èç”¨ä»€ä¹ˆæ–¹å¼åšç”¨æˆ·ä¾§è°ƒç”¨å’ŒæœåŠ¡é—´è°ƒç”¨çš„è´Ÿè½½å‡è¡¡ã€é™æµã€ç†”æ–­ï¼Ÿ\r#\râ€œåœ¨è¾¹ç¼˜æˆ‘ä»¬ç”¨äº‘ç«¯ LB + Ingress æˆ– Envoy-based Gateway åšå¤–éƒ¨è´Ÿè½½å‡è¡¡å’Œé™æµï¼Œå¯é€‰æ€§å¼ºä¸”æ­é…æ’ä»¶åŒ–ç†”æ–­ï¼›åœ¨æœåŠ¡å†…éƒ¨è°ƒç”¨å±‚é¢ï¼Œæ¨èç”¨ Service Meshï¼ˆEnvoy Sidecarï¼‰æ¥é€æ˜åšæœåŠ¡å‘ç°ã€å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€ç½‘ç»œé™æµå’Œç†”æ–­ï¼Œä»£ç å±‚é¢å†ç”¨ Resilience4j å¯¹å…³é”®ä¾èµ–åšäºŒæ¬¡ä¿æŠ¤ã€‚â€ k8séœ€è¦åšæ³¨å†Œä¸­å¿ƒé›†ç¾¤å—ï¼Ÿ\r#\râ€œåœ¨ Kubernetes ä¸­ï¼ŒAPI Server + etcd + kube-proxy æœ¬èº«å°±æ„æˆäº†é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸å‘ç°ä½“ç³»ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»º Service èµ„æºï¼ŒK8s è‡ªåŠ¨ç»´æŠ¤ Endpoints å¹¶åš DNS/è´Ÿè½½å‡è¡¡ã€‚é™¤éæœ‰è·¨é›†ç¾¤æˆ–å¿…é¡»ç”¨ Spring Cloud Netflix ç”Ÿæ€çš„é—ç•™éœ€æ±‚ï¼Œå¦åˆ™ä¸å†é¢å¤–éƒ¨ç½²æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼Œè¿™æ ·èƒ½ç®€åŒ–æ¶æ„å¹¶åˆ©ç”¨ K8s çš„åŸç”Ÿ HA èƒ½åŠ›ã€‚â€ å¾…è§£å†³é—®é¢˜\r#\rå¦‚æœå¿«é€Ÿå°†æœåŠ¡æ‰©å±•åˆ°å…¶ä»–å›½å®¶ï¼Ÿ\r#\r1. ç›®æ ‡æ‹†è§£ï¼šæ”¯æŒå¤šå›½å®¶çš„èƒ½åŠ›éœ€æ±‚\r#\rç»´åº¦ è¦æ±‚è¯´æ˜ ğŸ› æ•°æ®éš”ç¦» æ¯ä¸ªå›½å®¶ä¸šåŠ¡æ•°æ®é€»è¾‘éš”ç¦»ï¼ˆåˆè§„/ç›‘ç®¡è¦æ±‚ï¼‰ ğŸŒ ä¸šåŠ¡é…ç½®å·®å¼‚ å›½å®¶A/B çš„å·¥ä½œæ—¥ã€è´§å¸ã€è¯­è¨€ã€æ—¶é—´ç­‰ä¸åŒ ğŸ§° æœåŠ¡é€»è¾‘å·®å¼‚ éƒ¨åˆ†å¾®æœåŠ¡é€»è¾‘å¯èƒ½ç•¥æœ‰å·®å¼‚ ğŸš€ å¿«é€Ÿéƒ¨ç½² æ–°å›½å®¶ä¸Šçº¿ä¸éœ€å¤§æ”¹åŠ¨ï¼Œæ”¯æŒå¯é…ç½®éƒ¨ç½² ğŸ” åˆè§„å®‰å…¨ æ•°æ®ä¸»æƒï¼ˆData Residencyï¼‰éµå®ˆå„å›½æ³•è§„ 2. é…ç½®é©±åŠ¨çš„å¤šå›½å®¶æ”¯æŒ\r#\ræ–¹æ³• å®ç° é…ç½®ä¸­å¿ƒ æ¯ä¸ªå›½å®¶ä¸€ä»½é…ç½®ï¼Œå¦‚ config_fr.yaml, config_de.yaml é€šè¿‡é…ç½®æ³¨å…¥ æ§åˆ¶ï¼šå¼€æ”¾æ—¶é—´æ®µã€è´§å¸ã€æ”¯æŒè¯­è¨€ã€ç‰¹æ®Šé€»è¾‘å¼€å…³ å¤šç§Ÿæˆ·æ ‡è¯†ï¼ˆTenant IDï¼‰ è¯·æ±‚ä¸­ä¼ å…¥å›½å®¶ ID (X-Country: FR)ï¼Œç»Ÿä¸€è¯†åˆ« "},{"id":4,"href":"/docs/example/table-of-contents/","title":"Table of Contents","section":"Example Site","content":"\rUbi loqui\r#\rMentem genus facietque salire tempus bracchia\r#\rLorem markdownum partu paterno Achillem. Habent amne generosi aderant ad pellem nec erat sustinet merces columque haec et, dixit minus nutrit accipiam subibis subdidit. Temeraria servatum agros qui sed fulva facta. Primum ultima, dedit, suo quisque linguae medentes fixo: tum petis.\nRapit vocant si hunc siste adspice\r#\rOra precari Patraeque Neptunia, dixit Danae Cithaeron armaque maxima in nati Coniugis templis fluidove. Effugit usus nec ingreditur agmen ac manus conlato. Nullis vagis nequiquam vultibus aliquos altera suum venis teneas fretum. Armos remotis hoc sine ferrea iuncta quam!\nLocus fuit caecis\r#\rNefas discordemque domino montes numen tum humili nexilibusque exit, Iove. Quae miror esse, scelerisque Melaneus viribus. Miseri laurus. Hoc est proposita me ante aliquid, aura inponere candidioribus quidque accendit bella, sumpta. Intravit quam erat figentem hunc, motus de fontes parvo tempestate.\niscsi_virus = pitch(json_in_on(eupViral),\rnorthbridge_services_troubleshooting, personal(\rfirmware_rw.trash_rw_crm.device(interactive_gopher_personal,\rsoftware, -1), megabit, ergonomicsSoftware(cmyk_usb_panel,\rmips_whitelist_duplex, cpa)));\rif (5) {\rmanagementNetwork += dma - boolean;\rkilohertz_token = 2;\rhoneypot_affiliate_ergonomics = fiber;\r}\rmouseNorthbridge = byte(nybble_xmp_modem.horse_subnet(\ranalogThroughputService * graphicPoint, drop(daw_bit, dnsIntranet),\rgateway_ospf), repository.domain_key.mouse(serverData(fileNetwork,\rtrim_duplex_file), cellTapeDirect, token_tooltip_mashup(\rripcordingMashup)));\rmodule_it = honeypot_driver(client_cold_dvr(593902, ripping_frequency) +\rcoreLog.joystick(componentUdpLink), windows_expansion_touchscreen);\rbashGigabit.external.reality(2, server_hardware_codec.flops.ebookSampling(\rciscNavigationBacklink, table + cleanDriver), indexProtocolIsp);\rPlacabilis coactis nega ingemuit ignoscat nimia non\r#\rFrontis turba. Oculi gravis est Delphice; inque praedaque sanguine manu non.\nif (ad_api) {\rzif += usb.tiffAvatarRate(subnet, digital_rt) + exploitDrive;\rgigaflops(2 - bluetooth, edi_asp_memory.gopher(queryCursor, laptop),\rpanel_point_firmware);\rspyware_bash.statePopApplet = express_netbios_digital(\rinsertion_troubleshooting.brouter(recordFolderUs), 65);\r}\rrecursionCoreRay = -5;\rif (hub == non) {\rportBoxVirus = soundWeb(recursive_card(rwTechnologyLeopard),\rfont_radcab, guidCmsScalable + reciprocalMatrixPim);\rleft.bug = screenshot;\r} else {\rtooltipOpacity = raw_process_permalink(webcamFontUser, -1);\rexecutable_router += tape;\r}\rif (tft) {\rbandwidthWeb *= social_page;\r} else {\rregular += 611883;\rthumbnail /= system_lag_keyboard;\r}\rCaesorum illa tu sentit micat vestes papyriferi\r#\rInde aderam facti; Theseus vis de tauri illa peream. Oculos uberaque non regisque vobis cursuque, opus venit quam vulnera. Et maiora necemque, lege modo; gestanda nitidi, vero? Dum ne pectoraque testantur.\nVenasque repulsa Samos qui, exspectatum eram animosque hinc, aut manes, Assyrii. Cupiens auctoribus pariter rubet, profana magni super nocens. Vos ius sibilat inpar turba visae iusto! Sedes ante dum superest extrema.\n"},{"id":5,"href":"/docs/example/","title":"Example Site","section":"Docs","content":"\rIntroduction\r#\rFerre hinnitibus erat accipitrem dixi Troiae tollens\r#\rLorem markdownum, a quoque nutu est quodcumque mandasset veluti. Passim inportuna totidemque nympha fert; repetens pendent, poenarum guttura sed vacet non, mortali undas. Omnis pharetramque gramen portentificisque membris servatum novabis fallit de nubibus atque silvas mihi. Dixit repetitaque Quid; verrit longa; sententia mandat quascumque nescio solebat litore; noctes. Hostem haerentem circuit plenaque tamen.\nPedum ne indigenae finire invergens carpebat Velit posses summoque De fumos illa foret Est simul fameque tauri qua ad\r#\rLocum nullus nisi vomentes. Ab Persea sermone vela, miratur aratro; eandem Argolicas gener.\nMe sol\r#\rNec dis certa fuit socer, Nonacria dies manet tacitaque sibi? Sucis est iactata Castrumque iudex, et iactato quoque terraeque es tandem et maternos vittis. Lumina litus bene poenamque animos callem ne tuas in leones illam dea cadunt genus, et pleno nunc in quod. Anumque crescentesque sanguinis progenies nuribus rustica tinguet. Pater omnes liquido creditis noctem.\nif (mirrored(icmp_dvd_pim, 3, smbMirroredHard) != lion(clickImportQueue,\rviralItunesBalancing, bankruptcy_file_pptp)) {\rfile += ip_cybercrime_suffix;\r}\rif (runtimeSmartRom == netMarketingWord) {\rvirusBalancingWin *= scriptPromptBespoke + raster(post_drive,\rwindowsSli);\rcd = address_hertz_trojan;\rsoap_ccd.pcbServerGigahertz(asp_hardware_isa, offlinePeopleware, nui);\r} else {\rmegabyte.api = modem_flowchart - web + syntaxHalftoneAddress;\r}\rif (3 \u0026lt; mebibyteNetworkAnimated) {\rpharming_regular_error *= jsp_ribbon + algorithm * recycleMediaKindle(\rdvrSyntax, cdma);\radf_sla *= hoverCropDrive;\rtemplateNtfs = -1 - vertical;\r} else {\rexpressionCompressionVariable.bootMulti = white_eup_javascript(\rtable_suffix);\rguidPpiPram.tracerouteLinux += rtfTerabyteQuicktime(1,\rmanagementRosetta(webcamActivex), 740874);\r}\rvar virusTweetSsl = nullGigo;\rTrepident sitimque\r#\rSentiet et ferali errorem fessam, coercet superbus, Ascaniumque in pennis mediis; dolor? Vidit imi Aeacon perfida propositos adde, tua Somni Fluctibus errante lustrat non.\nTamen inde, vos videt e flammis Scythica parantem rupisque pectora umbras. Haec ficta canistris repercusso simul ego aris Dixit! Esse Fama trepidare hunc crescendo vigor ululasse vertice exspatiantur celer tepidique petita aversata oculis iussa est me ferro.\n"},{"id":6,"href":"/docs/example/collapsed/3rd-level/4th-level/","title":"4th Level","section":"3rd Level","content":"\r4th Level of Menu\r#\rCaesorum illa tu sentit micat vestes papyriferi\r#\rInde aderam facti; Theseus vis de tauri illa peream. Oculos uberaque non regisque vobis cursuque, opus venit quam vulnera. Et maiora necemque, lege modo; gestanda nitidi, vero? Dum ne pectoraque testantur.\nVenasque repulsa Samos qui, exspectatum eram animosque hinc, aut manes, Assyrii. Cupiens auctoribus pariter rubet, profana magni super nocens. Vos ius sibilat inpar turba visae iusto! Sedes ante dum superest extrema.\n"},{"id":7,"href":"/docs/example/collapsed/3rd-level/","title":"3rd Level","section":"Collapsed","content":"\r3rd Level of Menu\r#\rNefas discordemque domino montes numen tum humili nexilibusque exit, Iove. Quae miror esse, scelerisque Melaneus viribus. Miseri laurus. Hoc est proposita me ante aliquid, aura inponere candidioribus quidque accendit bella, sumpta. Intravit quam erat figentem hunc, motus de fontes parvo tempestate.\niscsi_virus = pitch(json_in_on(eupViral),\rnorthbridge_services_troubleshooting, personal(\rfirmware_rw.trash_rw_crm.device(interactive_gopher_personal,\rsoftware, -1), megabit, ergonomicsSoftware(cmyk_usb_panel,\rmips_whitelist_duplex, cpa)));\rif (5) {\rmanagementNetwork += dma - boolean;\rkilohertz_token = 2;\rhoneypot_affiliate_ergonomics = fiber;\r}\rmouseNorthbridge = byte(nybble_xmp_modem.horse_subnet(\ranalogThroughputService * graphicPoint, drop(daw_bit, dnsIntranet),\rgateway_ospf), repository.domain_key.mouse(serverData(fileNetwork,\rtrim_duplex_file), cellTapeDirect, token_tooltip_mashup(\rripcordingMashup)));\rmodule_it = honeypot_driver(client_cold_dvr(593902, ripping_frequency) +\rcoreLog.joystick(componentUdpLink), windows_expansion_touchscreen);\rbashGigabit.external.reality(2, server_hardware_codec.flops.ebookSampling(\rciscNavigationBacklink, table + cleanDriver), indexProtocolIsp);\r"},{"id":8,"href":"/docs/example/hidden/","title":"Hidden","section":"Example Site","content":"\rThis page is hidden in menu\r#\rQuondam non pater est dignior ille Eurotas\r#\rLatent te facies\r#\rLorem markdownum arma ignoscas vocavit quoque ille texit mandata mentis ultimus, frementes, qui in vel. Hippotades Peleus pennas conscia cuiquam Caeneus quas.\nPater demittere evincitque reddunt Maxime adhuc pressit huc Danaas quid freta Soror ego Luctus linguam saxa ultroque prior Tatiumque inquit Saepe liquitur subita superata dederat Anius sudor Cum honorum Latona\r#\rO fallor in sustinui iussorum equidem. Nymphae operi oris alii fronde parens dumque, in auro ait mox ingenti proxima iamdudum maius?\nreality(burnDocking(apache_nanometer),\rpad.property_data_programming.sectorBrowserPpga(dataMask, 37,\rrecycleRup));\rintellectualVaporwareUser += -5 * 4;\rtraceroute_key_upnp /= lag_optical(android.smb(thyristorTftp));\rsurge_host_golden = mca_compact_device(dual_dpi_opengl, 33,\rcommerce_add_ppc);\rif (lun_ipv) {\rverticalExtranet(1, thumbnail_ttl, 3);\rbar_graphics_jpeg(chipset - sector_xmp_beta);\r}\rFronde cetera dextrae sequens pennis voce muneris\r#\rActa cretus diem restet utque; move integer, oscula non inspirat, noctisque scelus! Nantemque in suas vobis quamvis, et labori!\nvar runtimeDiskCompiler = home - array_ad_software;\rif (internic \u0026gt; disk) {\remoticonLockCron += 37 + bps - 4;\rwan_ansi_honeypot.cardGigaflops = artificialStorageCgi;\rsimplex -= downloadAccess;\r}\rvar volumeHardeningAndroid = pixel + tftp + onProcessorUnmount;\rsector(memory(firewire + interlaced, wired)); "},{"id":9,"href":"/docs/hidden/1/","title":"1st","section":"éšè—","content":"\rList\r#\rå¢åŠ ã€æ’å…¥å…ƒç´ \r#\rlst.append(x)ï¼šåœ¨æœ«å°¾æ·»åŠ å…ƒç´  xã€‚ lst.extend(iterable)ï¼šåœ¨æœ«å°¾ä¸€æ¬¡æ€§è¿½åŠ ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œç›¸å½“äºå¤šæ¬¡ appendã€‚ lst.insert(i, x)ï¼šåœ¨ç´¢å¼• i ä½ç½®æ’å…¥å…ƒç´  xï¼Œåé¢çš„å…ƒç´ å³ç§»ã€‚ åˆ é™¤å…ƒç´ \r#\rlst.pop([i])ï¼šåˆ é™¤å¹¶è¿”å›ç´¢å¼• i å¤„çš„å…ƒç´ ï¼Œè‹¥ä¸ä¼  iï¼Œé»˜è®¤åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚ lst.remove(x)ï¼šåˆ é™¤åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º x çš„å…ƒç´ ï¼›è‹¥ä¸å­˜åœ¨åˆ™æŠ› ValueErrorã€‚ del lst[i] / del lst[i:j]ï¼šé€šè¿‡ del å…³é”®å­—åˆ é™¤ç´¢å¼• i å¤„æˆ–åŒºé—´ [i:j] å†…çš„å…ƒç´ ã€‚ lst.clear()ï¼šæ¸…ç©ºåˆ—è¡¨ï¼Œç­‰ä»·äº del lst[:]ã€‚ æŸ¥æ‰¾ä¸ç»Ÿè®¡\r#\rlst.index(x[, start[, end]])ï¼šè¿”å›åˆ—è¡¨ä¸­å€¼ä¸º x çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œå¯é€‰æŒ‡å®šæŸ¥æ‰¾åŒºé—´ã€‚ lst.count(x)ï¼šç»Ÿè®¡åˆ—è¡¨ä¸­å€¼ä¸º x çš„å‡ºç°æ¬¡æ•°ã€‚ æ’åºå’Œåè½¬\r#\rlst.sort(key=None, reverse=False)ï¼šå°±åœ°ï¼ˆin-placeï¼‰å‡åºæ’åºï¼Œæ”¯æŒ key å‡½æ•°å’Œ reverse=Trueï¼ˆé™åºï¼‰ã€‚ lst.reverse()ï¼šå°±åœ°åè½¬åˆ—è¡¨é¡ºåºã€‚ sorted(lst, key=None, reverse=False)ï¼šå†…å»ºå‡½æ•°ï¼Œè¿”å›æ–°çš„æ’åºååˆ—è¡¨ï¼Œä¸æ”¹å˜åŸåˆ—è¡¨ã€‚ å¤åˆ¶\r#\rlst.copy()ï¼šæµ…æ‹·è´åˆ—è¡¨ï¼Œç›¸å½“äº lst[:]ã€‚ å…¶ä»–å¸¸è§æ“ä½œ\r#\rlen(lst)ï¼šè¿”å›åˆ—è¡¨é•¿åº¦ã€‚ lst[i] / lst[i:j:k]ï¼šç´¢å¼•æˆ–åˆ‡ç‰‡æ“ä½œï¼Œå¯è¯»å¯å†™ï¼ˆåˆ‡ç‰‡èµ‹å€¼æ—¶æ›¿æ¢åŒºé—´ï¼‰ã€‚ i in lstï¼šåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)ã€‚ min(lst)ã€max(lst)ï¼šè¿”å›æœ€å°å€¼/æœ€å¤§å€¼ï¼ˆåˆ—è¡¨å…ƒç´ éœ€å¯æ¯”è¾ƒï¼‰ã€‚ Set\r#\rå¢åŠ ã€åˆ é™¤å…ƒç´ \r#\rs.add(x)ï¼šå°†å…ƒç´  x æ·»åŠ åˆ°é›†åˆä¸­ã€‚ s.update(iterable)ï¼šå°†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ åŠ åˆ°é›†åˆä¸­ã€‚ s.remove(x)ï¼šåˆ é™¤å…ƒç´  xï¼Œè‹¥ä¸å­˜åœ¨åˆ™æŠ› KeyErrorã€‚ s.discard(x)ï¼šåˆ é™¤å…ƒç´  xï¼Œè‹¥ä¸å­˜åœ¨ä¸æŠ›å¼‚å¸¸ã€‚ s.pop()ï¼šéšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ ï¼ˆé›†åˆæ˜¯æ— åºçš„ï¼‰ã€‚ s.clear()ï¼šæ¸…ç©ºé›†åˆã€‚ Dict\r#\rè®¿é—®ã€èµ‹å€¼\r#\rd[key]ï¼šè·å–é”® key å¯¹åº”çš„å€¼ï¼Œè‹¥ key ä¸å­˜åœ¨æŠ› KeyErrorã€‚ d.get(key[, default])ï¼šè·å–é”® key çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› defaultï¼ˆé»˜è®¤ä¸º Noneï¼‰ã€‚ d[key] = valueï¼šæ–°å¢æˆ–ä¿®æ”¹é”®å€¼å¯¹ã€‚ d.setdefault(key[, default])ï¼šè‹¥ key å­˜åœ¨ï¼Œè¿”å›å¯¹åº”å€¼ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™å°† key: default åŠ å…¥å­—å…¸å¹¶è¿”å› defaultã€‚ åˆ é™¤\r#\rd.pop(key[, default])ï¼šåˆ é™¤é”® key å¹¶è¿”å›å¯¹åº”å€¼ï¼›è‹¥ä¸å­˜åœ¨ä¸”æœªç»™ defaultï¼ŒæŠ› KeyErrorï¼›è‹¥æä¾› defaultï¼Œè¿”å› defaultã€‚ d.popitem()ï¼šéšæœºï¼ˆå®é™…æ˜¯ LIFO é¡ºåºï¼‰åˆ é™¤å¹¶è¿”å›ä¸€å¯¹ (key, value)ï¼›Python3.7+ ä¸­ä¸ºåˆ é™¤æœ€åæ’å…¥çš„é”®å€¼å¯¹ã€‚ del d[key]ï¼šåˆ é™¤é”® keyï¼Œè‹¥ä¸å­˜åœ¨æŠ› KeyErrorã€‚ d.clear()ï¼šæ¸…ç©ºæ‰€æœ‰é”®å€¼å¯¹ã€‚ éå†\r#\rfor k in d:ï¼šéå†æ‰€æœ‰é”®ï¼ˆåŒ for k in d.keys():ï¼‰ã€‚ for k, v in d.items():ï¼šåŒæ—¶éå†é”®å’Œå€¼ã€‚ for v in d.values():ï¼šéå†æ‰€æœ‰å€¼ã€‚ æ›´æ–°\r#\rd.update(other_dict_or_iterable)ï¼šç”¨å¦ä¸€ä¸ªå­—å…¸æˆ–é”®å€¼å¯¹å¯è¿­ä»£å¯¹è±¡æ›´æ–° dï¼Œç›¸åŒé”®ä¼šè¢«è¦†ç›–ï¼Œæ–°é”®è¿½åŠ ã€‚ è§†å›¾ï¼ˆviewsï¼‰\r#\rd.keys()ã€d.values()ã€d.items() åˆ†åˆ«è¿”å›å¯è¿­ä»£çš„è§†å›¾å¯¹è±¡ï¼Œå®æ—¶åæ˜ å­—å…¸å˜åŒ–ã€‚ å…¶ä»–å¸¸ç”¨æ“ä½œ\r#\rlen(d)ï¼šé”®å€¼å¯¹æ•°é‡ã€‚ key in dï¼šåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨äºå­—å…¸ä¸­ã€‚ "},{"id":10,"href":"/docs/hidden/Java%E8%B5%84%E6%96%99/","title":"Javaèµ„æ–™","section":"éšè—","content":"\rç›®å½•\r#\ré˜Ÿåˆ— éé˜»å¡é˜Ÿåˆ—ï¼ˆé€‚ç”¨äºå•çº¿ç¨‹æˆ–æ‰‹åŠ¨åŒæ­¥ï¼‰ é˜»å¡é˜Ÿåˆ—ï¼ˆjava.util.concurrent åŒ…ï¼‰ æ— é”/é«˜æ€§èƒ½é˜Ÿåˆ—ï¼ˆéé˜»å¡å¹¶å‘é˜Ÿåˆ—ï¼‰ å¯¹æ¯”æ€»ç»“ å…¸å‹ä½¿ç”¨åœºæ™¯ LinkedList çš„ä¸»è¦ç‰¹æ€§ List æ¥å£çš„æ–¹æ³• Dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ–¹æ³• Queue æ–¹æ³• åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ ç»§æ‰¿ Thread ç±» å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰ Thread å¸¸ç”¨æ–¹æ³•ä¸€è§ˆ é˜Ÿåˆ—\r#\réé˜»å¡é˜Ÿåˆ—ï¼ˆé€‚ç”¨äºå•çº¿ç¨‹æˆ–æ‰‹åŠ¨åŒæ­¥ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ LinkedList å®ç°äº† Deque å’Œ Queueï¼Œå¯ä»¥ä½œä¸ºæ™®é€šé˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—ä½¿ç”¨ PriorityQueue å…ƒç´ æŒ‰ä¼˜å…ˆçº§æ’åˆ—ï¼ˆé FIFOï¼‰ï¼Œä¸æ”¯æŒå¹¶å‘ ArrayDeque é«˜æ€§èƒ½åŒç«¯é˜Ÿåˆ—ï¼Œéçº¿ç¨‹å®‰å…¨ é˜»å¡é˜Ÿåˆ—ï¼ˆjava.util.concurrent åŒ…ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ ArrayBlockingQueue æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œæ•°ç»„å®ç°ï¼Œæ”¯æŒ FIFO LinkedBlockingQueue å¯é€‰å®¹é‡çš„é˜»å¡é˜Ÿåˆ—ï¼Œé“¾è¡¨å®ç°ï¼ŒFIFO PriorityBlockingQueue æ— ç•Œï¼Œå¸¦ä¼˜å…ˆçº§æ’åºï¼Œä¸ä¿è¯ FIFO DelayQueue å…ƒç´ æŒ‰å»¶è¿Ÿæ—¶é—´æ’åºï¼Œä»…åœ¨åˆ°æœŸåæ‰èƒ½å–å‡º SynchronousQueue æ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªå¯¹åº”çš„å–å‡ºæ“ä½œï¼ˆé›¶å®¹é‡ï¼‰ LinkedTransferQueue æ”¯æŒç”Ÿäº§è€…ç­‰å¾…æ¶ˆè´¹è€…ã€å®¹é‡æ— ç•Œ BlockingDeque æ”¯æŒé˜»å¡çš„åŒç«¯é˜Ÿåˆ—æ“ä½œï¼ˆå¦‚ LinkedBlockingDequeï¼‰ æ— é”/é«˜æ€§èƒ½é˜Ÿåˆ—ï¼ˆéé˜»å¡å¹¶å‘é˜Ÿåˆ—ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ ConcurrentLinkedQueue æ— ç•Œã€åŸºäºé“¾è¡¨ã€é€‚ç”¨äºé«˜å¹¶å‘ï¼ˆéé˜»å¡ï¼‰ ConcurrentLinkedDeque åŒç«¯æ— é”é˜Ÿåˆ—ï¼Œé€‚åˆå¹¶å‘ç¯å¢ƒ å¯¹æ¯”æ€»ç»“\r#\ré˜Ÿåˆ—ç±»å‹ æ˜¯å¦é˜»å¡ æ˜¯å¦çº¿ç¨‹å®‰å…¨ æ˜¯å¦æœ‰ç•Œ æ˜¯å¦æ”¯æŒä¼˜å…ˆçº§ LinkedList å¦ å¦ å¦ å¦ PriorityQueue å¦ å¦ å¦ æ˜¯ ArrayBlockingQueue æ˜¯ æ˜¯ æ˜¯ å¦ LinkedBlockingQueue æ˜¯ æ˜¯ å¯é€‰ å¦ PriorityBlockingQueue æ˜¯ æ˜¯ å¦ æ˜¯ DelayQueue æ˜¯ æ˜¯ å¦ æ˜¯ï¼ˆå»¶è¿Ÿæ—¶é—´ï¼‰ SynchronousQueue æ˜¯ æ˜¯ æ˜¯ï¼ˆé›¶å®¹é‡ï¼‰ å¦ ConcurrentLinkedQueue å¦ æ˜¯ å¦ å¦ å…¸å‹ä½¿ç”¨åœºæ™¯\r#\rä»»åŠ¡è°ƒåº¦ / æ¶ˆæ¯ä¸­è½¬ï¼š LinkedBlockingQueue, DelayQueue\né«˜å¹¶å‘æ—¥å¿—é‡‡é›†ï¼š ConcurrentLinkedQueue\nçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—ï¼š ArrayBlockingQueue, SynchronousQueue\nå®šæ—¶/ä¼˜å…ˆçº§ä»»åŠ¡ï¼š PriorityBlockingQueue, DelayQueue\nLinkedList çš„ä¸»è¦ç‰¹æ€§\r#\råŒå‘é“¾è¡¨å®ç°ï¼šæ’å…¥ã€åˆ é™¤å…ƒç´ æ•ˆç‡é«˜ï¼ˆç›¸è¾ƒäº ArrayListï¼‰\nå…ƒç´ å¯é‡å¤ï¼Œå…è®¸ null\néçº¿ç¨‹å®‰å…¨ï¼ˆéœ€è¦æ‰‹åŠ¨åŒæ­¥ï¼‰\nList æ¥å£çš„æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ add(E e) æ·»åŠ å…ƒç´ åˆ°æœ«å°¾ add(int index, E element) æŒ‡å®šä½ç½®æ’å…¥å…ƒç´  remove(int index) ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  remove(Object o) åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´  get(int index) è·å–æŒ‡å®šä½ç½®çš„å…ƒç´  set(int index, E element) è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´  indexOf(Object o) æŸ¥æ‰¾å…ƒç´ é¦–æ¬¡å‡ºç°çš„ä½ç½® lastIndexOf(Object o) æŸ¥æ‰¾å…ƒç´ æœ€åå‡ºç°çš„ä½ç½® clear() æ¸…ç©ºæ‰€æœ‰å…ƒç´  size() è·å–å…ƒç´ æ•°é‡ isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º Dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ addFirst(E e) å¤´éƒ¨æ·»åŠ å…ƒç´  addLast(E e) å°¾éƒ¨æ·»åŠ å…ƒç´  removeFirst() ç§»é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´  removeLast() ç§»é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´  getFirst() è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ getLast() è·å–æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ offerFirst(E e) å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œå¤±è´¥è¿”å› false offerLast(E e) å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¤±è´¥è¿”å› false pollFirst() è·å–å¹¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—ç©ºæ—¶è¿”å› null pollLast() è·å–å¹¶ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—ç©ºæ—¶è¿”å› null peekFirst() æŸ¥çœ‹ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ peekLast() æŸ¥çœ‹æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ Queue æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ offer(E e) æ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾ poll() å–å‡ºå¹¶ç§»é™¤é˜Ÿå¤´å…ƒç´  peek() æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ ä½†ä¸ç§»é™¤ åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼\r#\rç»§æ‰¿ Thread ç±»\r#\rclass MyThread extends Thread { public void run() { System.out.println(\u0026#34;Thread is running\u0026#34;); } } MyThread t = new MyThread(); t.start(); // å¯åŠ¨çº¿ç¨‹ å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰\r#\rclass MyRunnable implements Runnable { public void run() { System.out.println(\u0026#34;Thread is running\u0026#34;); } } Thread t = new Thread(new MyRunnable()); t.start(); Thread å¸¸ç”¨æ–¹æ³•ä¸€è§ˆ\r#\ræ–¹æ³•å è¯´æ˜ start() å¯åŠ¨çº¿ç¨‹ï¼ˆä¼šè°ƒç”¨ run() æ–¹æ³•ï¼‰ run() çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡å†…å®¹ï¼ˆå¯é‡å†™ï¼‰ sleep(long millis) å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ join() ç­‰å¾…æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ interrupt() ä¸­æ–­çº¿ç¨‹ï¼ˆå¹¶ä¸ä¼šå¼ºåˆ¶åœæ­¢ï¼‰ isInterrupted() æ£€æŸ¥çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ setPriority(int newPriority) è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ï¼ˆ1~10ï¼‰ getPriority() è·å–çº¿ç¨‹ä¼˜å…ˆçº§ setName(String name) è®¾ç½®çº¿ç¨‹å getName() è·å–çº¿ç¨‹å setDaemon(boolean on) è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼ˆåœ¨ start() å‰è°ƒç”¨ï¼‰ isDaemon() åˆ¤æ–­æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹ currentThread() è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼ˆé™æ€æ–¹æ³•ï¼‰ yield() å½“å‰çº¿ç¨‹è®©å‡º CPU æ‰§è¡Œæƒï¼ˆä¸ä¸€å®šæˆåŠŸï¼‰ isAlive() åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä»åœ¨è¿è¡Œä¸­ "},{"id":11,"href":"/docs/hidden/SQL%E8%B5%84%E6%96%99/","title":"Sqlèµ„æ–™","section":"éšè—","content":"\rç›®å½•\r#\ræŸ¥è¯¢æ•°æ®ï¼ˆSELECTï¼‰ åŸºæœ¬æŸ¥è¯¢ æŸ¥è¯¢æ‰€æœ‰å­—æ®µ ä½¿ç”¨æ¡ä»¶ï¼ˆWHEREï¼‰ æ’åºï¼ˆORDER BYï¼‰ å»é‡ï¼ˆDISTINCTï¼‰ åˆ†é¡µï¼ˆLIMIT / OFFSETï¼‰ æ’å…¥æ•°æ®ï¼ˆINSERTï¼‰ æ’å…¥å•è¡Œ æ’å…¥å¤šè¡Œ æ›´æ–°æ•°æ®ï¼ˆUPDATEï¼‰ åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰ èšåˆå‡½æ•°ï¼ˆGROUP BY + HAVINGï¼‰ è¿æ¥æŸ¥è¯¢ï¼ˆJOINï¼‰ å­æŸ¥è¯¢ï¼ˆSubqueryï¼‰ CASE è¡¨è¾¾å¼ï¼ˆç±»ä¼¼ IFï¼‰ åˆ›å»ºå’Œç®¡ç†è¡¨ç»“æ„ï¼ˆDDLï¼‰ å¸¸ç”¨è¿ç®—ç¬¦é€ŸæŸ¥ å¸¸è§ç»„åˆä¾‹å­ SQLå¸¸ç”¨è¯­æ³•\r#\rä¸€ã€æŸ¥è¯¢æ•°æ®ï¼ˆSELECTï¼‰\r#\råŸºæœ¬æŸ¥è¯¢\r#\rSELECT column1, column2 FROM table_name; æŸ¥è¯¢æ‰€æœ‰å­—æ®µ\r#\rSELECT * FROM table_name; ä½¿ç”¨æ¡ä»¶ï¼ˆWHEREï¼‰\r#\rSELECT name, age FROM users WHERE age \u0026gt;= 18 AND gender = \u0026#39;F\u0026#39;; æ’åºï¼ˆORDER BYï¼‰\r#\rSELECT name, age FROM users ORDER BY age DESC, name ASC; å»é‡ï¼ˆDISTINCTï¼‰\r#\rSELECT DISTINCT city FROM users; åˆ†é¡µï¼ˆLIMIT / OFFSETï¼‰\r#\r-- MySQL / PostgreSQL SELECT * FROM users LIMIT 10 OFFSET 20; äºŒã€æ’å…¥æ•°æ®ï¼ˆINSERTï¼‰\r#\ræ’å…¥å•è¡Œ\r#\rINSERT INTO users (name, age) VALUES (\u0026#39;Alice\u0026#39;, 25); æ’å…¥å¤šè¡Œ\r#\rINSERT INTO users (name, age) VALUES (\u0026#39;Bob\u0026#39;, 30), (\u0026#39;Carol\u0026#39;, 22); ä¸‰ã€æ›´æ–°æ•°æ®ï¼ˆUPDATEï¼‰\r#\rUPDATE users SET age = 26 WHERE name = \u0026#39;Alice\u0026#39;; å››ã€åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰\r#\rDELETE FROM users WHERE age \u0026lt; 18; äº”ã€èšåˆå‡½æ•°ï¼ˆGROUP BY + HAVINGï¼‰\r#\rSELECT department, COUNT(*) AS total FROM employees GROUP BY department HAVING COUNT(*) \u0026gt; 5; å¸¸è§èšåˆå‡½æ•°ï¼š\nå‡½æ•° ä½œç”¨ COUNT() è®¡æ•° SUM() æ±‚å’Œ AVG() å¹³å‡å€¼ MAX() æœ€å¤§å€¼ MIN() æœ€å°å€¼ å…­ã€è¿æ¥æŸ¥è¯¢ï¼ˆJOINï¼‰\r#\rSELECT u.name, o.order_id FROM users u JOIN orders o ON u.id = o.user_id; ä¸ƒã€å­æŸ¥è¯¢ï¼ˆSubqueryï¼‰\r#\rSELECT name FROM users WHERE id IN ( SELECT user_id FROM orders WHERE amount \u0026gt; 100 ); å…«ã€CASE è¡¨è¾¾å¼ï¼ˆç±»ä¼¼ IFï¼‰\r#\rSELECT name, CASE WHEN age \u0026lt; 18 THEN \u0026#39;minor\u0026#39; WHEN age \u0026lt; 65 THEN \u0026#39;adult\u0026#39; ELSE \u0026#39;senior\u0026#39; END AS age_group FROM users; ä¹ã€åˆ›å»ºå’Œç®¡ç†è¡¨ç»“æ„ï¼ˆDDLï¼‰\r#\r-- åˆ›å»ºè¡¨ CREATE TABLE users ( id INT PRIMARY KEY, name VARCHAR(100), age INT ); -- ä¿®æ”¹è¡¨ ALTER TABLE users ADD email VARCHAR(255); -- åˆ é™¤è¡¨ DROP TABLE users; åã€å¸¸ç”¨è¿ç®—ç¬¦é€ŸæŸ¥\r#\rç±»åˆ« è¿ç®—ç¬¦/å…³é”®å­— æ¯”è¾ƒ =, \u0026lt;\u0026gt;, \u0026gt;, \u0026lt;, \u0026gt;=, \u0026lt;= èŒƒå›´ BETWEEN x AND y é›†åˆ IN (..) æ¨¡ç³ŠåŒ¹é… LIKE '%abc%' ç©ºå€¼æ£€æŸ¥ IS NULL, IS NOT NULL é€»è¾‘è¿ç®— AND, OR, NOT å¸¸è§ç»„åˆä¾‹å­\r#\rSELECT department, AVG(salary) FROM employees WHERE hire_date \u0026gt;= \u0026#39;2022-01-01\u0026#39; GROUP BY department ORDER BY AVG(salary) DESC LIMIT 5; "},{"id":12,"href":"/docs/hidden/System-Design%E8%B5%84%E6%96%99/","title":"System Designèµ„æ–™","section":"éšè—","content":"\ræ‚£è€…é¢„çº¦ç³»ç»Ÿ\r#\råŠŸèƒ½éœ€æ±‚\r#\råŒ»ç”Ÿï¼šè®¾ç½®å¯ç”¨æ—¶é—´æ®µã€‚\næ‚£è€…ï¼šæŸ¥çœ‹å¯ç”¨æ—¶é—´æ®µå¹¶é¢„çº¦ã€‚\nç³»ç»Ÿï¼šè¿”å›åŒ…å«é¢„çº¦æ—¶æ®µçš„å­—å…¸ã€‚\nç³»ç»Ÿæ¶æ„\r#\rç³»ç»Ÿé‡‡ç”¨ç®€åŒ–çš„æ¶æ„ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š\næ•°æ®å­˜å‚¨ï¼šä½¿ç”¨ Map å­˜å‚¨åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µå’Œé¢„çº¦ä¿¡æ¯ã€‚\né¢„çº¦ç®¡ç†ï¼šå¤„ç†é¢„çº¦çš„åˆ›å»ºå’ŒæŸ¥è¯¢ã€‚\nJava å®ç°ç¤ºä¾‹\r#\rimport java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.*; class AppointmentScheduler { private Map\u0026lt;String, List\u0026lt;TimeSlot\u0026gt;\u0026gt; doctorAvailability = new HashMap\u0026lt;\u0026gt;(); private Map\u0026lt;String, List\u0026lt;TimeSlot\u0026gt;\u0026gt; appointments = new HashMap\u0026lt;\u0026gt;(); // æ·»åŠ åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ public void addDoctorAvailability(String doctorId, List\u0026lt;TimeSlot\u0026gt; slots) { doctorAvailability.put(doctorId, slots); } // è·å–åŒ»ç”Ÿçš„å¯ç”¨é¢„çº¦æ—¶é—´æ®µ public List\u0026lt;TimeSlot\u0026gt; getAvailableSlots(String doctorId) { List\u0026lt;TimeSlot\u0026gt; available = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;TimeSlot\u0026gt; allSlots = doctorAvailability.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); List\u0026lt;TimeSlot\u0026gt; bookedSlots = appointments.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); for (TimeSlot slot : allSlots) { if (!bookedSlots.contains(slot)) { available.add(slot); } } return available; } // ä¸ºæ‚£è€…é¢„çº¦æŒ‡å®šçš„æ—¶é—´æ®µ public boolean bookAppointment(String doctorId, String patientId, TimeSlot desiredSlot) { List\u0026lt;TimeSlot\u0026gt; availableSlots = getAvailableSlots(doctorId); if (availableSlots.contains(desiredSlot)) { appointments.computeIfAbsent(doctorId, k -\u0026gt; new ArrayList\u0026lt;\u0026gt;()).add(desiredSlot); System.out.println(\u0026#34;é¢„çº¦æˆåŠŸï¼š\u0026#34; + desiredSlot); return true; } else { System.out.println(\u0026#34;é¢„çº¦å¤±è´¥ï¼Œæ—¶é—´æ®µä¸å¯ç”¨ã€‚\u0026#34;); return false; } } // è·å–åŒ»ç”Ÿçš„æ‰€æœ‰é¢„çº¦ public List\u0026lt;TimeSlot\u0026gt; getAppointments(String doctorId) { return appointments.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); } } class TimeSlot { private LocalDateTime start; private LocalDateTime end; public TimeSlot(LocalDateTime start, LocalDateTime end) { this.start = start; this.end = end; } // é‡å†™ equals å’Œ hashCode æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨åˆ—è¡¨ä¸­æ­£ç¡®æ¯”è¾ƒ TimeSlot å¯¹è±¡ @Override public boolean equals(Object obj) { if (this == obj) return true; if (!(obj instanceof TimeSlot)) return false; TimeSlot other = (TimeSlot) obj; return start.equals(other.start) \u0026amp;\u0026amp; end.equals(other.end); } @Override public int hashCode() { return Objects.hash(start, end); } @Override public String toString() { DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm\u0026#34;); return start.format(formatter) + \u0026#34; - \u0026#34; + end.format(formatter); } } // ç¤ºä¾‹ä½¿ç”¨ public class Main { public static void main(String[] args) { AppointmentScheduler scheduler = new AppointmentScheduler(); String doctorId = \u0026#34;Dr_Smith\u0026#34;; String patientId = \u0026#34;Patient_1\u0026#34;; // åˆ›å»ºåŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ List\u0026lt;TimeSlot\u0026gt; slots = new ArrayList\u0026lt;\u0026gt;(); LocalDateTime startTime = LocalDateTime.of(2025, 5, 14, 9, 0); for (int i = 0; i \u0026lt; 8; i++) { TimeSlot slot = new TimeSlot(startTime.plusMinutes(i * 30), startTime.plusMinutes((i + 1) * 30)); slots.add(slot); } // æ·»åŠ åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ scheduler.addDoctorAvailability(doctorId, slots); // è·å–å¹¶æ˜¾ç¤ºå¯ç”¨æ—¶é—´æ®µ List\u0026lt;TimeSlot\u0026gt; availableSlots = scheduler.getAvailableSlots(doctorId); System.out.println(\u0026#34;å¯ç”¨æ—¶é—´æ®µï¼š\u0026#34;); for (TimeSlot slot : availableSlots) { System.out.println(slot); } // é¢„çº¦ä¸€ä¸ªæ—¶é—´æ®µ TimeSlot desiredSlot = availableSlots.get(0); scheduler.bookAppointment(doctorId, patientId, desiredSlot); // æ˜¾ç¤ºæ‰€æœ‰é¢„çº¦ List\u0026lt;TimeSlot\u0026gt; appointments = scheduler.getAppointments(doctorId); System.out.println(\u0026#34;æ‰€æœ‰é¢„çº¦ï¼š\u0026#34;); for (TimeSlot appointment : appointments) { System.out.println(appointment); } } } è¯´æ˜\r#\råŒ»ç”Ÿå¯ç”¨æ—¶é—´æ®µï¼šé€šè¿‡ addDoctorAvailability æ–¹æ³•æ·»åŠ ï¼Œç³»ç»Ÿä¼šæ ¹æ®æŒ‡å®šçš„æ—¶é—´èŒƒå›´ç”Ÿæˆæ‰€æœ‰å¯ç”¨çš„æ—¶é—´æ®µã€‚\nè·å–å¯ç”¨æ—¶é—´æ®µï¼šgetAvailableSlots æ–¹æ³•è¿”å›åŒ»ç”Ÿå½“å‰æœªè¢«é¢„çº¦çš„æ—¶é—´æ®µã€‚\né¢„çº¦æ—¶é—´æ®µï¼šbookAppointment æ–¹æ³•å…è®¸æ‚£è€…é¢„çº¦ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µï¼Œå¦‚æœè¯¥æ—¶é—´æ®µå¯ç”¨ï¼Œåˆ™é¢„çº¦æˆåŠŸã€‚\næŸ¥çœ‹æ‰€æœ‰é¢„çº¦ï¼šgetAppointments æ–¹æ³•è¿”å›åŒ»ç”Ÿçš„æ‰€æœ‰é¢„çº¦ä¿¡æ¯ã€‚\n"},{"id":13,"href":"/docs/hidden/%E6%9E%B6%E6%9E%84%E8%B5%84%E6%96%99/","title":"æ¶æ„èµ„æ–™","section":"éšè—","content":"Below are 10 Java and 10 Microservices technical questionsâ€”each with concise bilingual answers tailored to your background and the Doctolib Senior Software Engineer role.\nSummary\r#\rç»“åˆæ‚¨åœ¨ç®€å†å’ŒåŠ¨æœºä¿¡ä¸­å¼ºè°ƒçš„ Java å…¨æ ˆã€å¾®æœåŠ¡ å’Œ å¿«é€Ÿå­¦ä¹  èƒ½åŠ›ï¼Œä»¥åŠ Doctolib å¯¹ åç«¯ Javaã€å¯æ‰©å±•æ¶æ„ çš„éœ€æ±‚ï¼Œä¸‹åˆ—é—®é¢˜è¦†ç›–æ ¸å¿ƒæ¦‚å¿µã€å¸¸è§é™·é˜±å’Œå®æˆ˜åº”ç”¨ï¼Œå¸®åŠ©æ‚¨åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºã€‚\nä¸€ã€Java ç›¸å…³é—®é¢˜\r#\r1. ä¸ºä»€ä¹ˆè¯´ Java æ˜¯å¹³å°æ— å…³çš„ï¼Ÿ\r#\rEN: Java bytecode runs on any JVM regardless of underlying OS or hardware, thanks to the â€œwrite once, run anywhereâ€ design. (\rGeeksforGeeks) CNï¼š Java ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç  (.class) å¯ä»¥åœ¨ä»»ä½•å®‰è£…äº† JVM çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€(\rGeeksforGeeks)ã€‚\n2. æŠ½è±¡ç±»å’Œæ¥å£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\r#\rEN: An abstract class can have both method bodies and state (fields), while an interface (preâ€‘JavaÂ 8) only declares methods. A class can extend one abstract class but implement multiple interfaces. (\rReddit) CNï¼š æŠ½è±¡ç±»æ—¢å¯åŒ…å«å…·ä½“æ–¹æ³•ä¹Ÿå¯å­˜å‚¨çŠ¶æ€ï¼Œæ¥å£ï¼ˆJavaÂ 8 å‰ï¼‰åªèƒ½å£°æ˜æ–¹æ³•ï¼›ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå´èƒ½å®ç°å¤šä¸ªæ¥å£ã€‚(\rReddit)\n3. Java çš„åƒåœ¾å›æ”¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\r#\rEN: The JVMâ€™s GC reclaims unreachable objects automatically, typically using generational collectors (young/gen0, old/gen1) to minimize pause times. (\rGeeksforGeeks) CNï¼š JVM åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶ä¸å¯è¾¾å¯¹è±¡ï¼Œå¸¸ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆæ–°ç”Ÿä»£/è€å¹´ä»£ï¼‰ä»¥é™ä½åœé¡¿ã€‚(\rGeeksforGeeks)\n4. ä»€ä¹ˆæ˜¯è£…ç®±å’Œæ‹†ç®±ï¼Ÿ\r#\rEN: Autoboxing converts primitives (e.g., int) into wrappers (Integer) automatically; unboxing does the reverse. (\rReddit) CNï¼š è‡ªåŠ¨è£…ç®±æ˜¯å°†åŸºæœ¬ç±»å‹ï¼ˆå¦‚Â intï¼‰éšå¼è½¬æ¢ä¸ºå…¶åŒ…è£…ç±»ï¼ˆIntegerï¼‰ï¼Œæ‹†ç®±åˆ™ç›¸åã€‚(\rReddit)\n5. HashMap çš„åº•å±‚ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ\r#\rEN: A HashMap uses an array of buckets where each bucket is a linked list or redâ€‘black tree (after threshold), with keysâ€™ hashcodes determining bucket index. (\rGeeksforGeeks) CNï¼š HashMap åº•å±‚ç”¨æ•°ç»„ï¼‹é“¾è¡¨ï¼ˆæˆ–è¶…é˜ˆå€¼åè½¬çº¢é»‘æ ‘ï¼‰å­˜å‚¨é”®å€¼å¯¹ï¼Œå“ˆå¸Œå€¼å†³å®šå…ƒç´ è½åœ¨å“ªä¸ªæ¡¶ã€‚(\rGeeksforGeeks)\n6. å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ï¼Ÿ\r#\rEN: Use a static inner helper class or enum singleton; both are threadâ€‘safe and lazily initialized without explicit synchronization. (\rinterviewbit.com) CNï¼š å¯ä½¿ç”¨é™æ€å†…éƒ¨ç±»æˆ–æšä¸¾å•ä¾‹ï¼Œå®ƒä»¬åœ¨ç±»åŠ è½½æ—¶çº¿ç¨‹å®‰å…¨ä¸”æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨é”ã€‚(\rinterviewbit.com)\n7. æè¿° Java 8 ä¸­çš„ Stream æµæ“ä½œã€‚\r#\rEN: Streams allow declarative, lazy operations (map, filter, reduce) on collections, enabling parallelizable data pipelines. (\rinterviewbit.com) CNï¼š Stream æä¾›å£°æ˜å¼ã€æƒ°æ€§åŠ è½½çš„é“¾å¼æ“ä½œï¼ˆå¦‚Â mapã€filterã€reduceï¼‰ï¼Œå¹¶å¯ç®€å•åœ°å¹¶è¡Œæ‰§è¡Œã€‚(\rinterviewbit.com)\n8. synchronized å’Œ ReentrantLock æœ‰ä½•ä¸åŒï¼Ÿ\r#\rEN: synchronized is builtâ€‘in, blocks on acquisition; ReentrantLock is more flexible (tryLock, timed lock) and supports condition variables. (\rinterviewbit.com) CNï¼š synchronized ä¸º JVM å†…ç½®é”ä¸”é˜»å¡æ€§è·å–ï¼›ReentrantLock åŠŸèƒ½æ›´å¼ºï¼ˆæ”¯æŒ tryLockã€å¯ä¸­æ–­é”ã€æ¡ä»¶å˜é‡ï¼‰ã€‚(\rinterviewbit.com)\n9. ä»€ä¹ˆæ˜¯ Java ä¸­çš„å¼‚å¸¸åˆ†ä¸º Checked å’Œ Uncheckedï¼Ÿ\r#\rEN: Checked exceptions (e.g., IOException) must be declared or caught; unchecked exceptions (subclasses of RuntimeException) need not be. (\rReddit) CNï¼š Checked å¼‚å¸¸ï¼ˆå¦‚Â IOExceptionï¼‰éœ€åœ¨ç­¾åä¸­å£°æ˜æˆ–æ•è·ï¼ŒUnchecked å¼‚å¸¸ï¼ˆRuntimeExceptionÂ å­ç±»ï¼‰åˆ™æ— éœ€ã€‚(\rReddit)\n10. æè¿° JIT ç¼–è¯‘å™¨çš„ä½œç”¨ã€‚\r#\rEN: The JIT (Justâ€‘Inâ€‘Time) compiler in the JVM converts hot bytecode paths into native code at runtime to boost performance. (\rGeeksforGeeks) CNï¼š JVM ä¸­çš„ JIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç ï¼Œä»¥æå‡æ‰§è¡Œæ•ˆç‡ã€‚(\rGeeksforGeeks)\näºŒã€å¾®æœåŠ¡ç›¸å…³é—®é¢˜\r#\r1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿ\r#\rEN: Microservices split applications into small, independent services, each handling a single business capability and communicating over lightweight protocols. (\rMedium) CNï¼š å¾®æœåŠ¡å°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå°å‹ç‹¬ç«‹æœåŠ¡ï¼Œæ¯ä¸ªèšç„¦å•ä¸€ä¸šåŠ¡èƒ½åŠ›ï¼Œé€šè¿‡è½»é‡åè®®äº’ç›¸é€šä¿¡ã€‚(\rMedium)\n2. å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æœ‰ä½•åŒºåˆ«ï¼Ÿ\r#\rEN: Monolith bundles all functions into one deployable unit; microservices decouple features into separately deployable services for independent scaling. (\rTuring) CNï¼š å•ä½“æ¶æ„å°†æ‰€æœ‰åŠŸèƒ½æ‰“åŒ…éƒ¨ç½²ï¼Œå¾®æœåŠ¡åˆ™å°†å…¶æ‹†åˆ†ä¸ºç‹¬ç«‹æœåŠ¡ï¼Œå¯åˆ†åˆ«æ‰©å±•ä¸éƒ¨ç½²ã€‚(\rTuring)\n3. æœåŠ¡å‘ç°æ€ä¹ˆåšï¼Ÿ\r#\rEN: Use a registry (e.g., Eureka, Consul) where services register themselves; clients or gateway query registry to locate service instances. (\rMedium) CNï¼š ä½¿ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚Â Eurekaã€Consulï¼‰ï¼ŒæœåŠ¡å¯åŠ¨æ—¶æ³¨å†Œï¼Œå®¢æˆ·ç«¯æˆ–ç½‘å…³é€šè¿‡å®ƒæŸ¥æ‰¾å¯ç”¨å®ä¾‹ã€‚(\rMedium)\n4. ä»€ä¹ˆæ˜¯ API ç½‘å…³ï¼Ÿ\r#\rEN: An API Gateway routes external requests to appropriate microservices, handles auth, rateâ€‘limiting, and can aggregate responses. (\rMedium) CNï¼š API ç½‘å…³è´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”æœåŠ¡ï¼ŒåŒæ—¶åšé‰´æƒã€é™æµï¼Œå¹¶å¯è¿›è¡Œç»“æœèšåˆã€‚(\rMedium)\n5. å¦‚ä½•ä¿è¯å¾®æœåŠ¡å®‰å…¨ï¼Ÿ\r#\rEN: Use OAuth2/JWT for auth, HTTPS for transport security, and enforce scopes in the gateway or each service. (\rMedium) CNï¼š é‡‡ç”¨ OAuth2/JWT åšè®¤è¯æˆæƒï¼Œå…¨é“¾è·¯ä½¿ç”¨ HTTPSï¼Œå¹¶åœ¨ç½‘å…³æˆ–æœåŠ¡å†…æ ¡éªŒæƒé™ã€‚(\rMedium)\n6. å¾®æœåŠ¡é—´å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Ÿ\r#\rEN: Prefer eventual consistency via eventâ€‘driven patterns (Kafka events) or SAGA orchestration with compensating transactions. (\rMedium) CNï¼š å»ºè®®é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œå¦‚äº‹ä»¶é©±åŠ¨ï¼ˆKafkaï¼‰æˆ– SAGA æ¨¡å¼çš„è¡¥å¿äº‹åŠ¡ã€‚(\rMedium)\n7. ä»€ä¹ˆæ˜¯ç†”æ–­å™¨ï¼ˆCircuit Breakerï¼‰ï¼Ÿ\r#\rEN: A circuit breaker (e.g., via Resilience4j) prevents cascading failures by shortâ€‘circuited calls to unhealthy services and provides fallback. (\rSimplilearn.com) CNï¼š ç†”æ–­å™¨ï¼ˆå¦‚Â Resilience4jï¼‰é€šè¿‡æ‹¦æˆªå¯¹ä¸å¯ç”¨æœåŠ¡çš„è°ƒç”¨å¹¶å¿«é€Ÿå¤±è´¥æˆ–é™çº§ï¼Œé˜²æ­¢æ•…éšœè”“å»¶ã€‚(\rSimplilearn.com)\n8. å¦‚ä½•ç›‘æ§å¾®æœåŠ¡ï¼Ÿ\r#\rEN: Use Prometheus + Grafana for metrics, ELK/EFK for centralized logs, and distributed tracing (Jaeger/Zipkin) for request flows. (\rblog.bytebytego.com) CNï¼š ä½¿ç”¨ Prometheus+Grafana ç›‘æ§æŒ‡æ ‡ï¼ŒELK/EFK é›†ä¸­æ—¥å¿—ï¼ŒJaeger/Zipkin åšåˆ†å¸ƒå¼é“¾è·¯è·Ÿè¸ªã€‚(\rblog.bytebytego.com)\n9. å¦‚ä½•å¤„ç†å¾®æœåŠ¡çš„é…ç½®ç®¡ç†ï¼Ÿ\r#\rEN: Store configs in Spring Cloud Config or Vault; services pull or watch for updates, enabling dynamic reconfiguration. (\rGeeksforGeeks) CNï¼š é…ç½®å­˜æ”¾äº Spring Cloud Config æˆ– Vaultï¼ŒæœåŠ¡å¯åŠ¨æˆ–çƒ­åˆ·æ–°æ—¶æ‹‰å–æ›´æ–°ï¼Œå®ç°åŠ¨æ€é…ç½®ã€‚(\rGeeksforGeeks)\n10. å®¹å™¨åŒ–å’Œç¼–æ’å¯¹å¾®æœåŠ¡çš„å¥½å¤„ï¼Ÿ\r#\rEN: Docker containers package services with dependencies; Kubernetes automates scaling, selfâ€‘healing, rolling updates, and service discovery. (\rç»´åŸºç™¾ç§‘) CNï¼š Docker å°†æœåŠ¡åŠå…¶ä¾èµ–æ‰“åŒ…ï¼›Kubernetes è‡ªåŠ¨æ‰©ç¼©å®¹ã€è‡ªæ„ˆã€æ»šåŠ¨å‡çº§ï¼Œå¹¶æä¾›å†…ç½®æœåŠ¡å‘ç°ã€‚(\rç»´åŸºç™¾ç§‘)\nä»¥ä¸Šé—®é¢˜åŠä¸­è‹±æ–‡å›ç­”ï¼Œæ—¢æ¶µç›– Java æ ¸å¿ƒçŸ¥è¯†ã€å¹¶å‘ã€å®¹å™¨åŒ–ï¼Œä¹Ÿå…¼é¡¾ å¾®æœåŠ¡å®æˆ˜ è¦ç‚¹ï¼Œç»“åˆæ‚¨åœ¨ HSBC å¾®æœåŠ¡é¡¹ç›® å’Œ åŠ¨æœºä¿¡ä¸­æåˆ°çš„æŠ€æœ¯åå¥½ï¼Œå¯åŠ©æ‚¨é«˜æ•ˆå‡†å¤‡ Doctolib é¢è¯•ã€‚ç¥é¢è¯•é¡ºåˆ©ï¼\n"},{"id":14,"href":"/docs/shortcodes/buttons/","title":"Buttons","section":"Shortcodes","content":"\rButtons\r#\rButtons are styled links that can lead to local page or external link.\nExample\r#\r{{\u0026lt; button relref=\u0026#34;/\u0026#34; [class=\u0026#34;...\u0026#34;] \u0026gt;}}Get Home{{\u0026lt; /button \u0026gt;}} {{\u0026lt; button href=\u0026#34;https://github.com/alex-shpak/hugo-book\u0026#34; \u0026gt;}}Contribute{{\u0026lt; /button \u0026gt;}} Get Home\rContribute\r"},{"id":15,"href":"/docs/shortcodes/columns/","title":"Columns","section":"Shortcodes","content":"\rColumns\r#\rColumns help organize shorter pieces of content horizontally for readability.\nExample\r#\r{{% columns [ratio=\u0026#34;1:1\u0026#34;] [class=\u0026#34;...\u0026#34;] %}} \u0026lt;!-- begin columns block --\u0026gt; # Left Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Mid Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Right Content Lorem markdownum insigne... {{% /columns %}} Left Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nMid Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nRight Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nSettings size ratio for columns\r#\r{{% columns ratio=\u0026#34;1:2\u0026#34; %}} \u0026lt;!-- begin columns block --\u0026gt; ## x1 Column Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; ## x2 Column Lorem markdownum insigne... {{% /columns %}} x1 Column\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nx2 Column\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":16,"href":"/docs/shortcodes/details/","title":"Details","section":"Shortcodes","content":"\rDetails\r#\rDetails shortcode is a helper for details html5 element. It is going to replace expand shortcode.\nExample\r#\r{{% details \u0026#34;Title\u0026#34; [open] %}} ## Markdown content Lorem markdownum insigne... {{% /details %}} {{% details title=\u0026#34;Title\u0026#34; open=true %}} ## Markdown content Lorem markdownum insigne... {{% /details %}} Title\rMarkdown content\r#\rLorem markdownum insigne\u0026hellip;\n"},{"id":17,"href":"/docs/shortcodes/hints/","title":"Hints","section":"Shortcodes","content":"\rHints\r#\rHint shortcode can be used as hint/alerts/notification block.\nThere are 3 colors to choose: info, warning and danger.\n{{% hint [info|warning|danger] %}} **Markdown content** Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa {{% /hint %}} Example\r#\rMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\nMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\nMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\n"},{"id":18,"href":"/docs/shortcodes/mermaid/","title":"Mermaid","section":"Shortcodes","content":"\rMermaid Chart\r#\rMermaidJS is library for generating svg charts and diagrams from text.\nOverride Mermaid initialization config\nTo override the initialization config for Mermaid, create a mermaid.json file in your assets folder!\nExample\r#\r{{\u0026lt; mermaid [class=\u0026#34;...\u0026#34;] \u0026gt;}} stateDiagram-v2 State1: The state with a note note right of State1 Important information! You can write notes. end note State1 --\u0026gt; State2 note left of State2 : This is the note to the left. {{\u0026lt; /mermaid \u0026gt;}} stateDiagram-v2\rState1: The state with a note\rnote right of State1\rImportant information! You can write\rnotes.\rend note\rState1 --\u003e State2\rnote left of State2 : This is the note to the left.\r"},{"id":19,"href":"/docs/shortcodes/section/","title":"Section","section":"Shortcodes","content":"\rSection\r#\rSection renders pages in section as definition list, using title and description. Optional param summary can be used to show or hide page summary\nExample\r#\r{{\u0026lt; section [summary] \u0026gt;}} First Page\rFirst page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nSecond Page\rSecond Page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n"},{"id":20,"href":"/docs/shortcodes/section/first-page/","title":"First Page","section":"Section","content":"\rFirst page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":21,"href":"/docs/shortcodes/section/second-page/","title":"Second Page","section":"Section","content":"\rSecond Page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":22,"href":"/docs/shortcodes/tabs/","title":"Tabs","section":"Shortcodes","content":"\rTabs\r#\rTabs let you organize content by context, for example installation instructions for each supported platform.\n{{\u0026lt; tabs \u0026#34;id\u0026#34; \u0026gt;}} {{% tab \u0026#34;MacOS\u0026#34; %}} # MacOS Content {{% /tab %}} {{% tab \u0026#34;Linux\u0026#34; %}} # Linux Content {{% /tab %}} {{% tab \u0026#34;Windows\u0026#34; %}} # Windows Content {{% /tab %}} {{\u0026lt; /tabs \u0026gt;}} Example\r#\rMacOS\rMacOS\r#\rThis is tab MacOS content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nLinux\rLinux\r#\rThis is tab Linux content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nWindows\rWindows\r#\rThis is tab Windows content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":23,"href":"/docs/study/system-design/doctolib-system-design/","title":"Doctolib ç³»ç»Ÿè®¾è®¡","section":"ç³»ç»Ÿè®¾è®¡","content":"ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒã€å¯æ‰©å±•ä¸”é«˜å¯ç”¨çš„å¾®æœåŠ¡æ¶æ„è®¾è®¡æ–¹æ¡ˆï¼Œé‡ç‚¹å…³æ³¨â€œæ‚£è€…æœç´¢ä¸é¢„çº¦â€è¿™ä¸€æ—¥å†ï¼ˆCalendarï¼‰åŠŸèƒ½çš„é‡æ„ã€‚æ–¹æ¡ˆä¼šé’ˆå¯¹å„å­ç³»ç»Ÿåˆ’åˆ†ã€æŠ€æœ¯é€‰å‹ã€å¯æ‰©å±•æ€§ã€å®¹é”™ã€æ•°æ®ä¸€è‡´æ€§ã€å¤šåŒºåŸŸéƒ¨ç½²ç­‰æ–¹é¢è¿›è¡Œè¯´æ˜ï¼Œå¹¶é’ˆå¯¹æ¯ä¸ªç»„ä»¶é€‰ç”¨çš„è¯­è¨€æˆ–æŠ€æœ¯åšå‡ºç†ç”±è¯´æ˜ã€‚\n1. éåŠŸèƒ½éœ€æ±‚ä¸ä¸šåŠ¡è§„æ¨¡\r#\rè§„æ¨¡è¦æ±‚\næ‚£è€…æ•°é‡ï¼š50M ä»ä¸šè€…æ•°é‡ï¼š500K å¹¶å‘æœç´¢ï¼š700 æ¬¡/ç§’ å¹¶å‘é¢„çº¦ï¼ˆbookingï¼‰ï¼š90 æ¬¡/ç§’ å¯æ‰©å±•æ€§\næ”¯æŒå¿«é€Ÿä¸Šçº¿æ–°å›½å®¶/åœ°åŒº æ”¯æŒæ°´å¹³æ‰©å±•ï¼ˆæ°´å¹³æ‰©å®¹å®ä¾‹ï¼‰ é«˜å¯ç”¨ã€å®¹é”™ã€é™çº§\nå•ç‚¹æ•…éšœéœ€é¿å… ä»»ä¸€ç»„ä»¶å‡ºæ•…éšœæ—¶ï¼Œåº”ä¿è¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚æŸ¥è¯¢ç¼“å­˜ã€åªè¯»æœç´¢ï¼‰å°½å¯èƒ½å¯ç”¨ï¼Œå†™æ“ä½œå¯åšé™æµæˆ–é™çº§æç¤º æ•°æ®ä¸€è‡´æ€§\né¢„çº¦ï¼ˆBookingï¼‰æµç¨‹éœ€å¼ºä¸€è‡´æˆ–å¯æ¥å—çš„çº¦æŸä¸‹çš„å¼±ä¸€è‡´ï¼ˆä¾å®è·µè®¾è®¡ï¼‰ï¼Œä½†å†²çªéœ€è¢«æ­£ç¡®æ£€æµ‹å¹¶å¦¥å–„å¤„ç†ã€‚ æœç´¢ç»“æœå¯é‡‡ç”¨è¿‘å®æ—¶ï¼ˆEventual Consistencyï¼‰æ–¹å¼æ›´æ–°ã€‚ å“åº”æ—¶å»¶\næœç´¢å“åº”ï¼šç™¾æ¯«ç§’çº§ é¢„çº¦ç¡®è®¤ï¼šæ¬¡ç§’çº§ä½“éªŒ å®‰å…¨ä¸åˆè§„\næ¶‰åŠåŒ»ç–—æ•°æ®æˆ–ä¸ªäººä¿¡æ¯ï¼Œéœ€ç¬¦åˆç›¸å…³æ³•è§„ï¼ˆå¦‚ GDPRã€HIPAA ç­‰ï¼Œè§†å…·ä½“å›½å®¶è¦æ±‚ï¼‰ ä¼ è¾“åŠ å¯†ï¼ˆTLSï¼‰ï¼Œå­˜å‚¨åŠ å¯†ï¼Œç»†ç²’åº¦æƒé™æ§åˆ¶ å¯è§‚å¯Ÿæ€§\nå…¨é“¾è·¯è¿½è¸ªã€æ—¥å¿—ã€æŒ‡æ ‡ç›‘æ§ã€å‘Šè­¦ è‡ªåŠ¨åŒ–è¿ç»´ / CI/CD\nåŸºäºå®¹å™¨åŒ–ä¸åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ï¼Œå®ç°æµæ°´çº¿è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ»šåŠ¨å‡çº§ã€ç°åº¦å‘å¸ƒ 2. æ€»ä½“æ¶æ„æ¦‚è§ˆ\r#\ré‡‡ç”¨å¾®æœåŠ¡æ¶æ„ + API Gateway + æœåŠ¡ç½‘æ ¼ï¼ˆå¯é€‰ï¼‰ + å¤šåŒºåŸŸéƒ¨ç½² + å¼¹æ€§ä¼¸ç¼©ã€‚æ ¸å¿ƒç»„ä»¶ï¼š\nAPI Gatewayï¼šç»Ÿä¸€å…¥å£ï¼Œåšè®¤è¯é‰´æƒã€é™æµã€è·¯ç”±ã€‚ Auth æœåŠ¡ï¼šå¤„ç†ç™»å½•ã€è®¤è¯ã€æˆæƒï¼ˆOAuth2 / JWTï¼‰ã€‚ User æœåŠ¡ï¼šç®¡ç†æ‚£è€…ä¸ä»ä¸šè€…çš„ Profile ä¿¡æ¯ã€‚ Search æœåŠ¡ï¼šè´Ÿè´£å¤„ç†æŒ‰ä½ç½®ã€ä¸“ç§‘ã€å¯ç”¨æ—¶æ®µç­‰æ¡ä»¶çš„æœç´¢è¯·æ±‚ï¼›ä¾èµ–æœç´¢ç´¢å¼•ï¼ˆElasticsearchï¼‰ã€‚ Availability æœåŠ¡ï¼šç»´æŠ¤å’Œè®¡ç®—ä»ä¸šè€…å¯é¢„çº¦æ—¶æ®µï¼ˆworking hours + ä¾‹å¤–æƒ…å†µ + èŠ‚å‡æ—¥ + å·²æœ‰é¢„çº¦å†²çªï¼‰ã€‚ Booking æœåŠ¡ï¼šå¤„ç†é¢„çº¦åˆ›å»ºã€ä¿®æ”¹ã€å–æ¶ˆäº‹åŠ¡ï¼Œç¡®ä¿å¹¶å‘å®‰å…¨ä¸ä¸€è‡´æ€§ã€‚ Notification æœåŠ¡ï¼šå¼‚æ­¥å‘é€é‚®ä»¶/SMS/Push æ¨é€ï¼ˆé¢„çº¦ç¡®è®¤ã€æé†’ã€å˜æ›´é€šçŸ¥ï¼‰ã€‚ Analytics / Monitoring æœåŠ¡ï¼ˆæˆ–å¤–éƒ¨ï¼‰ï¼šæ”¶é›†æ—¥å¿—ã€æŒ‡æ ‡ï¼Œç”¨äºç›‘æ§ä¸æ•°æ®åˆ†æã€‚ Payment / Billing æœåŠ¡ï¼ˆå¦‚éœ€ä»˜è´¹é¢„çº¦ï¼Œå¯é€‰ï¼‰ã€‚ é…ç½®ä¸ç®¡ç†æœåŠ¡ï¼šç®¡ç†å¤šå›½å®¶/åœ°åŒºé…ç½®ï¼ˆæ—¶åŒºã€èŠ‚å‡æ—¥è§„åˆ™ã€è¯­è¨€ã€åˆè§„è®¾ç½®ç­‰ï¼‰ã€‚ å¼‚æ­¥æ¶ˆæ¯å¹³å°ï¼ˆå¦‚ Kafkaï¼‰ï¼šç”¨äºäº‹ä»¶æµï¼ˆEvent Busï¼‰ï¼Œå®ç°å¾®æœåŠ¡é—´çš„è§£è€¦å¼‚æ­¥é€šä¿¡ï¼Œå¦‚é¢„çº¦äº‹ä»¶ã€ç´¢å¼•æ›´æ–°ã€é€šçŸ¥è§¦å‘ç­‰ã€‚ ç¼“å­˜å±‚ï¼šRedisï¼Œç”¨äºçƒ­ç‚¹æ•°æ®ã€çŸ­æœŸç¼“å­˜ã€åˆ†å¸ƒå¼é”ç­‰ã€‚ æ•°æ®åº“ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ˆPostgreSQL/CockroachDB/Vitess+MySQL/Aurora ç­‰ï¼‰ï¼›å¯æ ¹æ®è·¨åŒºåŸŸéœ€æ±‚é€‰æ‹©åˆ†å¸ƒå¼SQLï¼ˆå¦‚ CockroachDBï¼‰æˆ–å„åŒºåŸŸç‹¬ç«‹æ•°æ®åº“å¹¶åšå¼‚æ­¥å¤åˆ¶ã€‚ æœç´¢å¼•æ“ï¼šElasticsearch æˆ– OpenSearchï¼Œç”¨äºåœ°ç†ä½ç½®ä¸å±æ€§è¿‡æ»¤ã€å¯ç”¨æ€§åˆç­›ç´¢å¼•ç­‰ã€‚ åŸºç¡€è®¾æ–½ä¸éƒ¨ç½²ï¼šå®¹å™¨åŒ–ï¼ˆDockerï¼‰ã€Kubernetesï¼ˆEKS/GKE/AKS æˆ–è‡ªæ‰˜ç®¡ K8sï¼‰ã€Terraform/CloudFormation ç®¡ç†èµ„æºï¼Œå¤šåŒºåŸŸé›†ç¾¤éƒ¨ç½²ã€‚ ä¸‹é¢åˆ†æ¨¡å—è¯¦ç»†é˜è¿°ï¼Œå¹¶è¯´æ˜é€‰å‹ç†ç”±ã€‚\n3. API Gateway ä¸æœåŠ¡é€šä¿¡\r#\rAPI Gatewayï¼šæ¨èä½¿ç”¨ Kongã€Envoy+Istioã€AWS API Gateway ç­‰ã€‚\nèŒè´£ï¼šç»Ÿä¸€å…¥å£ï¼Œåšè®¤è¯é‰´æƒï¼ˆå’Œ Auth æœåŠ¡é…åˆï¼‰ã€æµé‡é™æµã€ç°åº¦å‘å¸ƒè·¯ç”±ã€TLS ç»ˆç«¯ã€æ¥å£ç‰ˆæœ¬ç®¡ç†ã€ç›‘æ§æŒ‡æ ‡é‡‡é›†ã€‚\næŠ€æœ¯é€‰å‹ï¼š\nKong / Envoyï¼šæˆç†Ÿã€ç¤¾åŒºæ´»è·ƒã€æ˜“ä¸æœåŠ¡ç½‘æ ¼é›†æˆï¼› é€šè¿‡ Envoy é…åˆ Istio ç­‰æœåŠ¡ç½‘æ ¼ï¼Œå¯å®ç°æ›´ç»†ç²’åº¦çš„æµé‡ç®¡ç†ã€ç†”æ–­é™æµã€é“¾è·¯è¿½è¸ªæ³¨å…¥ã€‚ é€šä¿¡åè®®ï¼š\nå¾®æœåŠ¡é—´å†…éƒ¨é€šä¿¡å¯ä¼˜å…ˆç”¨ gRPCï¼ˆæ€§èƒ½ã€IDLã€å¼ºç±»å‹å¥‘çº¦ï¼‰ï¼Œä¹Ÿå¯é€‰ REST/JSONï¼ˆå…¼å®¹æ€§å¥½ï¼‰ï¼›è‹¥å·²æœ‰ç”Ÿæ€åå¥½ Java/Kotlin Spring Bootï¼Œå¯ç”¨ gRPC + Protobufï¼Œæˆ– REST+OpenAPIã€‚ å¤–éƒ¨å®¢æˆ·ç«¯ä¸ Gatewayï¼Œä¸€èˆ¬ç”¨ HTTPS/JSON+REST æˆ– GraphQLï¼ˆè‹¥ä¸šåŠ¡éœ€è¦èšåˆå¤šä¸ªæœåŠ¡æ•°æ®ï¼‰ã€‚æœ¬åœºæ™¯æœç´¢ä¸é¢„çº¦æµç¨‹è¾ƒç®€å•ï¼Œç”¨ REST å³å¯ã€‚ 4. èº«ä»½è®¤è¯ä¸æˆæƒ\r#\rAuth æœåŠ¡ï¼š\nåè®®ï¼šOAuth2 / OpenID Connect + JWTã€‚ å­˜å‚¨ï¼šç”¨æˆ·å‡­è¯ä¿¡æ¯ï¼ˆå¦‚æœç”¨ç”¨æˆ·åå¯†ç ï¼‰ã€ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¦‚ SSOï¼‰å‡­è¯ç­‰ã€‚ é€‰å‹ç†ç”±ï¼šä¸šç•Œæ ‡å‡†ï¼ŒJWT å¯åœ¨å¾®æœåŠ¡é—´ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼ˆClaimsï¼‰ï¼Œä¾¿äºé‰´æƒï¼›è‹¥å¯¹å®‰å…¨è¦æ±‚é«˜ï¼Œå¯é‡‡ç”¨åˆ·æ–° token æœºåˆ¶æˆ–çŸ­æœŸ token å¹¶ä½¿ç”¨ Refresh Tokenã€‚ æƒé™æ§åˆ¶ï¼šRBAC/ACL æœºåˆ¶ã€‚é¢„çº¦ç³»ç»Ÿä¸­ï¼Œå¤§å¤šæ•°æ“ä½œç”±æ‚£è€…æˆ–ä»ä¸šè€…è‡ªè¡Œå‘èµ·ï¼Œä»…éœ€ä¿è¯æ‚£è€…åªå¯è®¿é—®è‡ªå·±é¢„çº¦è®°å½•ï¼›ç®¡ç†å‘˜å¯è®¿é—®æ›´å¤šã€‚\nè¯­è¨€/æ¡†æ¶ï¼š\nJava/Kotlin Spring Securityã€Go+Oauth2åº“ï¼Œæˆ– Node.js+Passportï¼Œæ ¹æ®å›¢é˜Ÿç†Ÿæ‚‰é€‰æ‹©ã€‚ æ¨è Golangï¼šäºŒè¿›åˆ¶è½»é‡ã€æ€§èƒ½é«˜ã€å¹¶å‘å¤„ç†ä¼˜ç§€ï¼›æˆ– Kotlin(Spring Boot)ï¼šç”Ÿæ€æˆç†Ÿã€å¼€å‘æ•ˆç‡é«˜ã€‚ 5. æ•°æ®å­˜å‚¨æ–¹æ¡ˆ\r#\r5.1 å…³ç³»å‹æ•°æ®åº“ï¼ˆä¸»æ•°æ®ä¸äº‹åŠ¡ï¼‰\r#\rä¸»è¦ç”¨é€”ï¼šå­˜å‚¨æ‚£è€…ã€ä»ä¸šè€…ã€é¢„çº¦è®°å½•ã€å¯ç”¨æ—¶æ®µæ¨¡æ¿ã€åœ°ç‚¹/è¯Šæ‰€ä¿¡æ¯ã€ä¸“ç§‘åˆ†ç±»ã€å®¡è®¡æ—¥å¿—ç­‰ã€‚\né€‰å‹ï¼š\nPostgreSQLï¼šå¼ºä¸€è‡´ã€å¤æ‚æŸ¥è¯¢èƒ½åŠ›å¥½ã€æ”¯æŒåœ°ç†æ‰©å±• PostGISï¼Œå¯å¤„ç†ä½ç½®æ•°æ®ã€‚ CockroachDB æˆ– Google Spannerï¼ˆè‹¥äº‘ä¸Šéœ€æ±‚ï¼‰ï¼šæä¾›åˆ†å¸ƒå¼ SQLï¼Œæœ¬èº«æ”¯æŒè·¨å¤šåŒºåŸŸéƒ¨ç½²å’Œå¼ºä¸€è‡´äº‹åŠ¡ï¼Œä¾¿äºå…¨çƒéƒ¨ç½²ï¼Œä½†æˆæœ¬è¾ƒé«˜ï¼› Vitess+MySQL / Amazon Aurora MySQL/PostgreSQLï¼šå¯æ°´å¹³åˆ†ç‰‡ï¼›é€‚åˆå·²æœ‰ MySQL ç”Ÿæ€çš„å›¢é˜Ÿã€‚ åˆ†åŒº/åˆ†ç‰‡ç­–ç•¥ï¼š\nå¯æŒ‰å›½å®¶/åœ°åŒºåˆ†åº“ï¼šæ¯ä¸ªå›½å®¶å•ç‹¬æ•°æ®åº“å®ä¾‹/é›†ç¾¤ï¼Œé¿å…è·¨åŒºåŸŸå†™å»¶è¿Ÿï¼ŒåŒæ—¶ä¾¿äºåˆè§„éš”ç¦»ï¼ˆä¾‹å¦‚ GDPR åŒºåŸŸï¼‰ã€‚ åŒä¸€å›½å®¶å†…éƒ¨å¯å¯¹æ‚£è€…æˆ–ä»ä¸šè€…åšåˆ†è¡¨ï¼ˆshardingï¼‰ï¼Œå¦‚æŒ‰ç”¨æˆ·ID hashã€‚ CockroachDB åœºæ™¯ä¸‹å¯åˆ©ç”¨å…¶å¤šåŒºåŸŸåˆ†å¸ƒèƒ½åŠ›ï¼Œæ— éœ€å¤æ‚åˆ†ç‰‡é€»è¾‘ï¼›ä½†éœ€è¯„ä¼°å»¶è¿Ÿä¸æˆæœ¬ã€‚ äº‹åŠ¡å¤„ç†ï¼š\né¢„çº¦åˆ›å»º/å–æ¶ˆéœ€å¼ºä¸€è‡´ï¼šåœ¨å•åº“æˆ–åŒåˆ†åŒºä¸­ç”¨æ•°æ®åº“äº‹åŠ¡ï¼ˆSELECT FOR UPDATEã€ä¹è§‚é”æˆ–æ‚²è§‚é”ï¼‰ç¡®ä¿å¹¶å‘å®‰å…¨ï¼›é¿å…è·¨åˆ†åŒºäº‹åŠ¡ã€‚ è‹¥æŸäº›æ“ä½œéœ€è·¨åº“ï¼ˆå¦‚ Billing åœ¨ä¸åŒæœåŠ¡åº“ï¼‰ï¼Œå¯é‡‡ç”¨ Saga æ¨¡å¼ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ç¼–æ’ï¼Œè¡¥å¿æµç¨‹ç¡®ä¿æœ€ç»ˆä¸€è‡´ã€‚ 5.2 æœç´¢ç´¢å¼•ï¼ˆå…¨æ–‡ä¸å±æ€§æ£€ç´¢ï¼‰\r#\rElasticsearch / OpenSearchï¼š\nç”¨é€”ï¼šåœ°ç†ä½ç½®æœç´¢ï¼ˆGeo distance queriesï¼‰ã€æŒ‰ä¸“ç§‘æ ‡ç­¾è¿‡æ»¤ã€å¯ç”¨æ€§åˆæ­¥ç­›é€‰ï¼ˆå¦‚ä¸‹ä¸€å¯ç”¨æ—¥æœŸ/æ—¶é—´åŒºé—´æ ‡è®°ï¼‰ã€å…¨æ–‡æœç´¢ï¼ˆè¯Šæ‰€æè¿°ã€è¯„è®ºï¼‰ã€‚ éƒ¨ç½²ï¼šå¤šèŠ‚ç‚¹é›†ç¾¤ï¼ŒæŒ‰å›½å®¶/åŒºåŸŸåˆ†é›†ç¾¤æˆ–ç´¢å¼•åˆ†ç‰‡ï¼›è€ƒè™‘è·¨åŒºåŸŸè¯»å‰¯æœ¬ä»¥é™ä½å»¶è¿Ÿã€‚ æ›´æ–°æ–¹å¼ï¼šå¼‚æ­¥äº‹ä»¶é©±åŠ¨æ›´æ–°ï¼šBooking æœåŠ¡æˆ– Availability æœåŠ¡åœ¨é¢„çº¦åˆ›å»º/å–æ¶ˆåå‘äº‹ä»¶ï¼Œç»æ¶ˆæ¯é˜Ÿåˆ— Worker æ›´æ–°ç´¢å¼•ï¼ˆè¿‘å®æ—¶ï¼‰ã€‚éœ€æ³¨æ„â€œæœç´¢ç»“æœå¯èƒ½æœ‰çŸ­æš‚å»¶è¿Ÿâ€ï¼›å¯¹æ­¤åœ¨ UX ä¸Šå¯æç¤ºâ€œå¯ç”¨æ€§å¯èƒ½å®æ—¶æ€§ç•¥æœ‰å»¶è¿Ÿï¼Œè¯·å®æ—¶å°è¯•é¢„çº¦â€ã€‚ é€‰å‹ç†ç”±ï¼šæ”¯æŒä¸°å¯ŒæŸ¥è¯¢ã€æ¨ªå‘æ‰©å±•æˆç†Ÿã€æ”¯æŒåœ°ç†è·ç¦»è®¡ç®—å’Œå¤æ‚è¿‡æ»¤ã€‚ 5.3 ç¼“å­˜å±‚\r#\rRedis / Memcachedï¼š\nç”¨é€”ï¼šçƒ­ç‚¹æœç´¢ç»“æœç¼“å­˜ï¼ˆå¦‚å¸¸è§åŸå¸‚+ä¸“ç§‘æ£€ç´¢ï¼‰ã€ä¼šè¯ä¿¡æ¯ã€é…é¢é™æµè®¡æ•°ã€åˆ†å¸ƒå¼é”ã€‚ é€‰å‹ï¼šRedis æ›´çµæ´»ï¼Œæ”¯æŒæ•°æ®ç»“æ„å’Œåˆ†å¸ƒå¼é”ï¼ˆRedlockï¼‰ï¼Œå»ºè®®é€‰ Redis Cluster éƒ¨ç½²ã€‚ æ³¨æ„ï¼šç¼“å­˜å¤±æ•ˆç­–ç•¥è¦è®¾è®¡åˆç†ï¼›å¯¹æœç´¢ç¼“å­˜å¯ç”¨ TTL ç»“åˆç¼“å­˜å‡»ç©¿é¢„é˜²ï¼ˆå¦‚ä½¿ç”¨çƒ­ç‚¹é¢„çƒ­æˆ–äº’æ–¥é”ï¼‰ã€‚ 5.4 æ¶ˆæ¯ä¸äº‹ä»¶æ€»çº¿\r#\rKafka / Pulsar / RabbitMQï¼š\nç”¨é€”ï¼šå®ç°å¼‚æ­¥ã€è§£è€¦ï¼š\né¢„çº¦åˆ›å»º/å–æ¶ˆäº‹ä»¶å‘å‡ºåï¼Œå¼‚æ­¥è§¦å‘ç´¢å¼•æ›´æ–°ã€é€šçŸ¥å‘é€ã€ç»Ÿè®¡æ›´æ–°ç­‰ï¼› æ—¥å¿—ã€æŒ‡æ ‡äº‹ä»¶æ±‡èšã€‚ é€‰å‹ç†ç”±ï¼šKafka åœ¨é«˜ååã€åˆ†åŒºæ‰©å±•ã€æ¶ˆæ¯æŒä¹…åŒ–æ–¹é¢æˆç†Ÿï¼›Pulsar ä¹Ÿå¯ï¼›RabbitMQ é€‚åˆè¾ƒå°‘æ¶ˆæ¯é‡æˆ–ç®€å•åœºæ™¯ã€‚æ­¤å¤„é«˜å¹¶å‘åœºæ™¯åº”é€‰ Kafkaã€‚\néƒ¨ç½²ï¼šKafka é›†ç¾¤ï¼Œå¤šåˆ†åŒºåˆ†åŒºé”®å¯æŒ‰å›½å®¶æˆ–æœåŠ¡ç±»å‹åŒºåˆ†ï¼Œä¾¿äºæ¶ˆè´¹ä¾§å¹¶è¡Œæ¶ˆè´¹ã€‚\n6. æœç´¢æµç¨‹è®¾è®¡\r#\rç”¨æˆ·è¯·æ±‚ï¼šå‰ç«¯é€šè¿‡ API Gateway å‘æœç´¢è¯·æ±‚ï¼Œå¸¦å…¥ä½ç½®ï¼ˆç»çº¬åº¦æˆ–åŸå¸‚IDï¼‰ã€ä¸“ç§‘ï¼ˆæ ‡ç­¾ï¼‰ã€å¯ç”¨æ—¥æœŸèŒƒå›´ï¼ˆå¦‚â€œæœ¬å‘¨æœ‰ç©ºâ€ï¼‰ã€å…¶ä»–è¿‡æ»¤ï¼ˆè¯­è¨€ã€æ€§åˆ«åå¥½ç­‰ï¼‰ã€‚\nSearch æœåŠ¡\né€»è¾‘ï¼šå…ˆæ ¡éªŒè¯·æ±‚å‚æ•°ï¼›æ„é€  Elasticsearch æŸ¥è¯¢ï¼š\nGeo Distance filterï¼šåŸºäºç”¨æˆ·ä½ç½®å’Œè¯Šæ‰€/ä»ä¸šè€…æ‰€åœ¨è¯Šæ‰€ä½ç½®è®¡ç®—è·ç¦»å¹¶æ’åºï¼ˆå¯åˆ†é¡µï¼‰ã€‚\nä¸“ç§‘ filterï¼šterm filter on specialty fieldã€‚\nå¯ç”¨æ€§ filterï¼šå¦‚æœç´¢å¼•ä¸­æå‰æ ‡æ³¨äº†â€œä¸‹ä¸€å¯ç”¨æ—¥æœŸâ€å­—æ®µï¼Œå¯åšèŒƒå›´è¿‡æ»¤ï¼ˆä¾‹å¦‚ next_available_date \u0026lt;= æœ¬å‘¨æœ«ï¼‰ï¼›è‹¥éœ€è¦æ›´å®æ—¶çš„å¯ç”¨æ—¶æ®µåˆ¤æ–­ï¼Œå¯ï¼š\nåœ¨æœç´¢é˜¶æ®µåªåšç²—ç­›ï¼ˆä¾‹å¦‚åªç­›é€‰æ ‡è®°æœ‰ç©ºé—²çš„ä»ä¸šè€…æˆ–è¯Šæ‰€ï¼‰ï¼ŒçœŸæ­£çš„å¯ç”¨æ—¶æ®µè¯¦æƒ…ç”±å‰ç«¯åœ¨å€™é€‰åˆ—è¡¨ä¸­ç‚¹å‡»åï¼Œå†è°ƒç”¨ Availability æœåŠ¡å®æ—¶è·å–å…·ä½“å¯ç”¨æ—¶æ®µã€‚ ç¼“å­˜ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢ï¼ˆå¦‚å¤§åŸå¸‚å¸¸ç”¨ä¸“ç§‘ï¼‰å¯åœ¨ Redis ç¼“å­˜æœç´¢ç»“æœåˆ—è¡¨IDå’Œç®€å•æ‘˜è¦ï¼ŒTTL 10-30sï¼Œå‡è½» ES å‹åŠ›ã€‚\nåˆ†é¡µä¸æ’åºï¼šæ”¯æŒåˆ†é¡µï¼ˆæ·±åˆ†é¡µéœ€è°¨æ…ï¼Œå¯ç”¨ search_after æˆ–åŸºäºæ¸¸æ ‡åˆ†é¡µï¼‰ï¼Œæ’åºå¯æŒ‰è·ç¦»ã€è¯„åˆ†æˆ–ç»¼åˆå¾—åˆ†ã€‚\nå“åº”ï¼šè¿”å›å€™é€‰åˆ—è¡¨ï¼ˆå¸¦ä»ä¸šè€…IDã€è¯Šæ‰€ä¿¡æ¯åŸºç¡€ã€è¯„åˆ†ã€ä¸‹ä¸€å¯ç”¨æ—¥æœŸç­‰ï¼‰ï¼Œç”±å‰ç«¯å±•ç¤ºï¼›è‹¥ç”¨æˆ·è¿›ä¸€æ­¥è¦æ±‚â€œæŸ¥çœ‹å…·ä½“å¯ç”¨æ—¶æ®µâ€ï¼Œå†è°ƒç”¨ Availability æœåŠ¡ã€‚\næŠ€æœ¯è¯­è¨€ï¼š\nSearch æœåŠ¡æ¨èä½¿ç”¨ Go æˆ– Kotlin/Javaï¼š\nGoï¼šé«˜å¹¶å‘ã€è½»é‡äºŒè¿›åˆ¶ã€å¯åŠ¨å¿«ã€æ˜“éƒ¨ç½²ï¼›Elasticsearch å®¢æˆ·ç«¯æˆç†Ÿï¼Œé€‚åˆé«˜ QPSã€‚ Java/Kotlinï¼šç”Ÿæ€æˆç†Ÿï¼ŒåŸç”Ÿ ES å®¢æˆ·ç«¯æ”¯æŒå¥½ï¼›è‹¥å›¢é˜Ÿå·²æœ‰ Spring Boot ç»éªŒï¼Œå¯å¿«é€Ÿé›†æˆç›‘æ§ã€é…ç½®ä¸­å¿ƒç­‰ã€‚ Node.js ä¹Ÿå¯ï¼Œä½†åœ¨é«˜å¹¶å‘ç½‘ç»œ IO åœºæ™¯ä¸‹ Go æ€§èƒ½æ›´ä¼˜ä¸”èµ„æºå ç”¨æ›´ä½ã€‚\n7. å¯ç”¨æ—¶æ®µï¼ˆAvailabilityï¼‰è®¾è®¡\r#\r7.1 æ¦‚å¿µæ¨¡å‹\r#\rWorking Hours Templateï¼šä»ä¸šè€…åœ¨å„è¯Šæ‰€æˆ–è¿œç¨‹çš„å¸¸è§„å¯ç”¨æ—¶é—´æ®µï¼ˆä¾‹å¦‚å‘¨ä¸€9:00-12:00ï¼Œ14:00-18:00ï¼‰ã€‚ ä¾‹å¤–æƒ…å†µï¼ˆExceptionsï¼‰ï¼šè¯·å‡ã€ä¸´æ—¶å…³é—­ã€å‡æœŸã€ä¸´æ—¶åŠ ç­ã€æ‰‹åŠ¨é˜»å¡æ—¶é—´æ®µç­‰ã€‚ å·²é¢„çº¦æ—¶æ®µï¼ˆExisting Bookingsï¼‰ï¼šå·²è¢«å…¶ä»–æ‚£è€…é¢„è®¢çš„æ—¶æ®µã€‚ ç¼“å†²/å‡†å¤‡æ—¶é—´ï¼šæŸäº›æœåŠ¡éœ€è¦åœ¨é¢„çº¦å‰åç•™å‡ºå‡†å¤‡æˆ–æ¸…æ´æ—¶é—´ã€‚ æ—¶åŒºï¼šä»ä¸šè€…ä¸æ‚£è€…å¯èƒ½è·¨æ—¶åŒºï¼Œå¯¹æœ¬åœ°æ—¶é—´è½¬æ¢éœ€è°¨æ…ï¼Œç»Ÿä¸€ä»¥ UTC å­˜å‚¨ã€‚ 7.2 å­˜å‚¨ä¸è®¡ç®—\r#\rå­˜å‚¨æ–¹æ¡ˆï¼š\nWorking Hours Template \u0026amp; Exceptions å­˜åœ¨å…³ç³»å‹æ•°æ®åº“è¡¨ï¼š\npractitioner_availability_template(practitioner_id, weekday, start_time, end_time, duration_slot, buffer_before, buffer_after) availability_exceptions(practitioner_id, date, start_time, end_time, type) å·²é¢„çº¦è®°å½•å­˜åœ¨ appointments è¡¨ï¼Œå¹¶åœ¨ Booking æ—¶å†™å…¥ã€‚\nè®¡ç®—å®æ—¶å¯ç”¨æ—¶æ®µï¼š\næ–¹æ³• 1ï¼šå®æ—¶è®¡ç®—\nAPI è°ƒç”¨ Availability æœåŠ¡æ—¶ï¼Œæ ¹æ® template + exceptions + existing bookingsï¼Œä»ç›®æ ‡æ—¥æœŸèŒƒå›´å†…ç”Ÿæˆæ‰€æœ‰å€™é€‰æ—¶éš™ï¼Œå¹¶æ’é™¤å†²çªä¸ç¼“å†²åŒºï¼Œè¿”å›å¯é€‰æ—¶æ®µåˆ—è¡¨ã€‚é€‚åˆé’ˆå¯¹å•ä¸ªä»ä¸šè€…æˆ–å°‘é‡å¹¶å‘è¯·æ±‚ã€‚ ä¼˜ç‚¹ï¼šå®æ—¶å‡†ç¡®ï¼Œæ— éœ€é¢„å­˜ï¼›ç¼ºç‚¹ï¼šè‹¥è¯·æ±‚é‡å¤§æˆ–æŸ¥è¯¢èŒƒå›´å¤§ï¼ˆæ¯”å¦‚æ‰¹é‡æŸ¥è¯¢å¤šä½ä»ä¸šè€…å¤šä¸ªæ—¶é—´èŒƒå›´ï¼‰ï¼Œè®¡ç®—å¼€é”€å¯èƒ½é«˜ï¼Œéœ€åšå¥½å¹¶å‘ä¼˜åŒ–ã€‚ æ–¹æ³• 2ï¼šé¢„è®¡ç®— / ç¼“å­˜\nç³»ç»Ÿå®šæœŸï¼ˆå¦‚æ¯å¤©å‡Œæ™¨æˆ–å¢é‡äº‹ä»¶é©±åŠ¨ï¼‰ä¸ºæ¯ä¸ªä»ä¸šè€…ç”Ÿæˆæœªæ¥Nå¤©ï¼ˆå¦‚7å¤©æˆ–14å¤©ï¼‰çš„å¯ç”¨æ—¶æ®µåˆ—è¡¨ï¼Œå­˜äºä¸€ä¸ªå¿«é€ŸæŸ¥è¯¢çš„å­˜å‚¨ï¼ˆå¦‚ Redis æˆ–ä¸“é—¨çš„ NoSQL è¡¨ï¼‰ã€‚Booking æˆ– Search é˜¶æ®µå¯ç›´æ¥æŸ¥è¯¢ç¼“å­˜æ•°æ®ã€‚ å¢é‡æ›´æ–°ï¼šå½“æœ‰é¢„çº¦åˆ›å»º/å–æ¶ˆæˆ– Exceptions å˜æ›´æ—¶ï¼Œé€šè¿‡äº‹ä»¶æµè§¦å‘æ›´æ–°å¯¹åº”ä»ä¸šè€…åœ¨ç¼“å­˜ä¸­çš„å¯ç”¨æ—¶æ®µã€‚ ä¼˜ç‚¹ï¼šæŸ¥è¯¢å¿«é€Ÿï¼Œé€‚åˆæœç´¢å¤§æ‰¹ä»ä¸šè€…æ—¶åˆç­›ï¼›ç¼ºç‚¹ï¼šéœ€è¦è®¾è®¡æ›´æ–°æœºåˆ¶ï¼Œä¿è¯è¿‘å®æ—¶ã€‚ æ¨èï¼šç»“åˆä¸¤è€…ï¼šå¯¹äº Search é˜¶æ®µï¼Œä»…éœ€çŸ¥é“â€œæ˜¯å¦æœ‰å¯ç”¨â€ï¼Œå¯åœ¨é¢„è®¡ç®—ç´¢å¼•ï¼ˆä¾‹å¦‚ Elastic ç´¢å¼•ä¸­çš„ next_available_date å­—æ®µã€æˆ– Redis ä¸­å°ä½“é‡æ ‡è®°ï¼‰ä¸­æ ‡æ³¨ï¼›è‹¥ç”¨æˆ·é€‰å®šæŸä½ä»ä¸šè€…/è¯Šæ‰€å¹¶é€‰æ—¥æœŸï¼Œåˆ™å†è°ƒç”¨å®æ—¶è®¡ç®—ä»¥è·å–å…·ä½“æ—¶éš™ï¼Œæˆ–ä»é¢„è®¡ç®—ç¼“å­˜è¯»å–ï¼ˆè‹¥è¶³å¤Ÿå®æ—¶ï¼‰ã€‚\nè¯­è¨€/æ¡†æ¶ï¼š\nAvailability æœåŠ¡å¯ç”¨ Go å®ç°ï¼Œå…·å¤‡é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ï¼›ä¹Ÿå¯ç”¨ Kotlin/Javaï¼Œè‹¥ä¸ä¸šåŠ¡å›¢é˜Ÿåå¥½ä¸€è‡´ã€‚æ ¸å¿ƒè®¡ç®—é€»è¾‘éœ€é«˜æ•ˆå®ç°ï¼ˆå¦‚æ—¶é—´åŒºé—´è¿ç®—ã€å†²çªæ£€æµ‹ï¼‰ï¼Œå¯å¤ç”¨å·²æœ‰åº“æˆ–è‡ªè¡Œå®ç°ã€‚ å¹¶å‘å¤„ç†ï¼š\nå¯¹å•ä¸ªä»ä¸šè€…çš„ Availability è®¡ç®—è¯·æ±‚ï¼Œç›¸å¯¹ç‹¬ç«‹ï¼›å¯æ°´å¹³æ‰©å±• Availability æœåŠ¡å®ä¾‹ã€‚\né¢„è®¡ç®—ä»»åŠ¡å¯ç”±ä¸“é—¨ Worker é›†ç¾¤ï¼ˆKafka Consumerï¼‰å¤„ç†ï¼Œè¯­è¨€å¯é€‰ Python æˆ– Goï¼š\nPythonï¼šå¼€å‘æ•ˆç‡é«˜ï¼Œå¯ç”¨ Pandas ç­‰åº“åšæ‰¹é‡è®¡ç®—ï¼›ä½†éœ€æ³¨æ„æ€§èƒ½å’Œå¹¶å‘ï¼› Goï¼šè‹¥è¦æ±‚é«˜å¹¶å‘ã€ä½å»¶è¿Ÿï¼Œä¹Ÿå¯ç”¨ Go Workerã€‚ å»ºè®®å®æ—¶åœ¨çº¿è®¡ç®—ç”± Go æœåŠ¡å®Œæˆï¼›æ‰¹é‡é¢„è®¡ç®— Worker å¯æ ¹æ®å›¢é˜ŸæŠ€æœ¯æ ˆåœ¨ Python/Go ä¹‹é—´é€‰æ‹©ã€‚\n8. é¢„çº¦ï¼ˆBookingï¼‰è®¾è®¡\r#\r8.1 ä¸šåŠ¡æµç¨‹\r#\ræ‚£è€…åœ¨æŸæ—¶æ®µç‚¹å‡»â€œé¢„çº¦â€\nBooking æœåŠ¡æ ¡éªŒè¯·æ±‚ï¼š\næ‚£è€…èº«ä»½æœ‰æ•ˆ é¢„çº¦æ—¶æ®µåœ¨å¯ç”¨èŒƒå›´å†…ï¼ˆå†æ¬¡æ£€æŸ¥ï¼Œé˜²æ­¢è„è¯»ç¼“å­˜å¯¼è‡´å†²çªï¼‰ è‹¥éœ€è¦ä»˜è´¹ï¼Œè§¦å‘ Payment æœåŠ¡ï¼ˆå¯å¼‚æ­¥æˆ–åŒæ­¥ï¼Œè§†ä¸šåŠ¡ï¼‰ã€‚ åˆ›å»ºé¢„çº¦è®°å½•ï¼šå†™å…¥å…³ç³»å‹æ•°æ®åº“ï¼›åŒæ—¶å¯èƒ½è¦æ›´æ–°ç¼“å­˜çš„å¯ç”¨æ—¶æ®µã€é€šçŸ¥äº‹ä»¶ã€ç´¢å¼•æ›´æ–°ã€‚\nå‘é€ç¡®è®¤ç»™æ‚£è€…ä¸ä»ä¸šè€…ï¼ˆåŒæ­¥ç­‰å¾…æˆ–å¼‚æ­¥åç»­ï¼‰ã€‚\næ”¯æŒåç»­ä¿®æ”¹/å–æ¶ˆï¼šéœ€å†æ¬¡åšå†²çªæ£€æŸ¥ä¸æ•°æ®åº“æ›´æ–°ï¼Œå¹¶è§¦å‘æ›´æ–°äº‹ä»¶ã€‚\n8.2 å¹¶å‘ä¸ä¸€è‡´æ€§\r#\rå¹¶å‘å†²çªåœºæ™¯ï¼šå¤šä¸ªæ‚£è€…åŒæ—¶è¯·æ±‚åŒä¸€ä»ä¸šè€…åŒä¸€æ—¶æ®µã€‚\nå¤„ç†ç­–ç•¥ï¼š\næ‚²è§‚é”ï¼šåœ¨æ•°æ®åº“å±‚å¯¹è¯¥ä»ä¸šè€…å¯¹åº”çš„å½“å¤©æ—¶æ®µåŠ é”ï¼ˆå¦‚ SELECT \u0026hellip; FOR UPDATE on availability-related rowï¼‰ï¼›ç¼ºç‚¹æ˜¯åœ¨é«˜å¹¶å‘ä¸‹çƒ­ç‚¹é”ç«äº‰ä¸¥é‡ï¼› ä¹è§‚é” / CASï¼šåœ¨é¢„çº¦è¡¨æˆ– availability cache ä¸­ç”¨ç‰ˆæœ¬å·æˆ–æ ‡å¿—ä½åšä¹è§‚å¹¶å‘æ§åˆ¶ï¼›å¯èƒ½éœ€è¦é‡è¯•é€»è¾‘ï¼› åˆ†å¸ƒå¼é”ï¼šåˆ©ç”¨ Redis Redlock æˆ– Zookeeper é’ˆå¯¹å•ä¸ªä»ä¸šè€…è¿›è¡Œé”ï¼Œæ§åˆ¶åŒä¸€æ—¶æ®µåªæœ‰ä¸€ä¸ªè¯·æ±‚è½åœ°ï¼›éœ€æ³¨æ„é”è¶…æ—¶ä¸å¯é æ€§ï¼› åˆ†åŒºè®¾è®¡ï¼šå°†åŒä¸€ä»ä¸šè€…æˆ–è¯Šæ‰€çš„é¢„çº¦è¯·æ±‚éƒ½è·¯ç”±åˆ°åŒä¸€æ•°æ®åº“åˆ†åŒºæˆ–å®ä¾‹ï¼Œé¿å…è·¨åˆ†åŒºäº‹åŠ¡ï¼›ç»“åˆä¸€è‡´æ€§å“ˆå¸Œæˆ–è·¯ç”±è§„åˆ™ã€‚ æ¨èåšæ³•ï¼š\nå°†é¢„çº¦æ•°æ®æŒ‰ä»ä¸šè€…ç»´åº¦åˆ†åŒºï¼ˆåŒä¸€ä»ä¸šè€…çš„é¢„çº¦å†™å…¥åŒä¸€åˆ†åŒº/åº“ï¼‰ï¼Œåœ¨è¯¥åˆ†åŒºå†…ç”¨æ•°æ®åº“äº‹åŠ¡ï¼ˆSELECT FOR UPDATEï¼‰æˆ–ä¹è§‚é”ç¡®ä¿åŒä¸€æ—¶æ®µåªä¼šè¢«ä¸€ä¸ªå†™æˆåŠŸã€‚å¯¹äºé«˜å¹¶å‘çƒ­é—¨åŒ»ç”Ÿï¼Œå¯é¢„ä¼°å¹¶åšé™æµã€‚ Redis åˆ†å¸ƒå¼é”é…åˆæ•°æ®åº“äº‹åŠ¡ï¼šå…ˆåœ¨ Redis ä¸Šå¯¹ key = practitioner_id:date:timeslot åŠ é”ï¼Œè‹¥è·å¾—é”åˆ™è¿›å…¥æ•°æ®åº“äº‹åŠ¡æ£€æŸ¥å¹¶å†™å…¥ï¼›å†™å®Œåé‡Šæ”¾é”ã€‚è¶…æ—¶æ§åˆ¶è¦æ¯”æ•°æ®åº“äº‹åŠ¡è¶…æ—¶æ›´é•¿ï¼Œé¿å…æ­»é”æˆ–æå‰é‡Šæ”¾ã€‚ å¹‚ç­‰æ€§ï¼šå‰ç«¯åœ¨è¯·æ±‚å¤´å¸¦å¹‚ç­‰IDï¼Œé˜²æ­¢é‡å¤æäº¤ã€‚ Saga æ¨¡å¼ï¼šè‹¥æœ‰è·¨æœåŠ¡ä¾èµ–ï¼ˆå¦‚åˆ›å»ºé¢„çº¦åéœ€è°ƒç”¨ Billingã€Notificationã€Analyticsï¼‰ï¼Œåœ¨ä¸»äº‹åŠ¡æäº¤åå‘å¸ƒâ€œé¢„çº¦å·²åˆ›å»ºâ€äº‹ä»¶ï¼›å„æ¶ˆè´¹è€…æŒ‰éœ€å¤„ç†ï¼ˆå¦‚æ‰£æ¬¾ã€å‘é€é‚®ä»¶ï¼‰ã€‚è‹¥ Billing å¤±è´¥ï¼Œå¯é€šè¿‡è¡¥å¿äº‹åŠ¡æˆ–äººå·¥å¹²é¢„å¤„ç†ã€‚\næŠ€æœ¯è¯­è¨€ï¼šBooking æœåŠ¡æ¨èä½¿ç”¨ Go æˆ– Kotlin/Javaã€‚\nGoï¼šè½»é‡é«˜å¹¶å‘ï¼Œæ˜“éƒ¨ç½²ï¼› Kotlin/Javaï¼šäº‹åŠ¡ç®¡ç†ä¸ç”Ÿæ€æˆç†Ÿï¼›Spring Transaction æ”¯æŒå¤šç§æ•°æ®åº“ã€‚ 9. å¼‚æ­¥ä»»åŠ¡ä¸äº‹ä»¶é©±åŠ¨\r#\ræ¶ˆæ¯æ€»çº¿ï¼šKafka\näº‹ä»¶ç±»å‹ï¼š\nAppointmentCreatedã€AppointmentCanceledã€AppointmentRescheduled AvailabilityChangedï¼ˆä»ä¸šè€…ä¿®æ”¹æ¨¡æ¿æˆ–ä¾‹å¤–ï¼‰ UserUpdatedã€PractitionerUpdatedï¼ˆè§¦å‘ç´¢å¼•æ›´æ–°ï¼‰ NotificationEventï¼ˆç”± Booking æˆ–å…¶ä»–æœåŠ¡ç”Ÿäº§ï¼Œå†ç”± Notification æœåŠ¡æ¶ˆè´¹ï¼‰ AnalyticsEventï¼ˆå¦‚æœç´¢è¡Œä¸ºã€é¢„çº¦å®Œæˆã€å–æ¶ˆç‡ç­‰ï¼‰ æ¶ˆè´¹è€… Workerï¼š\nç´¢å¼•æ›´æ–° Workerï¼šæ¶ˆè´¹äº‹ä»¶åæ›´æ–° Elasticsearch ç´¢å¼•ï¼ˆå¦‚æ›´æ–° next_available_dateã€è¯„åˆ†ç­‰ï¼‰ï¼Œä¿æŒæœç´¢ç»“æœè¿‘å®æ—¶ã€‚ Notification Workerï¼šæ¶ˆè´¹é€šçŸ¥äº‹ä»¶ï¼Œé€šè¿‡é‚®ä»¶/SMS/Push æœåŠ¡å‘é€ï¼›å¯ç”¨ Node.jsã€Python å®ç°ï¼Œæ–¹ä¾¿é›†æˆç¬¬ä¸‰æ–¹ SDKã€‚ Analytics Workerï¼šæ¶ˆè´¹è¡Œä¸ºäº‹ä»¶ï¼Œå­˜å…¥æ—¶åº/åˆ†æç³»ç»Ÿï¼ˆå¦‚ ClickHouseã€BigQueryã€InfluxDB ç­‰ï¼‰ï¼Œç”¨äºæŠ¥è¡¨å’Œæœºå™¨å­¦ä¹ ã€‚ Cache æ›´æ–° Workerï¼šå½“é¢„çº¦æˆ–å¯ç”¨æ€§å‘ç”Ÿå˜æ›´ï¼Œæ›´æ–° Redis ç¼“å­˜ä¸­å—å½±å“çš„æ•°æ®ã€‚ é€‰å‹ç†ç”±ï¼šKafka é«˜ååã€åˆ†åŒºæœºåˆ¶ä¾¿äºå¹¶è¡Œã€å¤šæ¶ˆè´¹è€…ç»„éš”ç¦»ã€‚\n10. ç¼“å­˜ä¸é™æµ\r#\rçƒ­ç‚¹ç¼“å­˜ï¼šRedis\næœç´¢ç¼“å­˜ï¼šåŸºäºæŸ¥è¯¢å‚æ•° hash åšçŸ­æœŸç¼“å­˜ï¼› å¯ç”¨æ€§ç¼“å­˜ï¼šé¢„è®¡ç®—åå­˜å‚¨æœªæ¥è‹¥å¹²å¤©çš„å¯ç”¨æ—¶æ®µåˆ—è¡¨ï¼ŒKey = practitioner_id; TTL æˆ–æ‰‹åŠ¨æ›´æ–°ï¼› Session/Token é»‘åå•ï¼šè‹¥éœ€è¦ç™»å‡ºæˆ–æ’¤é”€ tokenï¼› åˆ†å¸ƒå¼é”ï¼šRedis Redlockï¼Œç”¨äºé¢„çº¦å¹¶å‘æ§åˆ¶ï¼ˆå¦‚å‰è¿°ï¼‰ã€‚\né™æµã€ç†”æ–­ï¼š\nåœ¨ API Gateway å±‚é…ç½®è¯·æ±‚é™æµï¼ˆé˜²æ­¢æ´ªæ°´æ”»å‡»æˆ–çˆ¬è™«ï¼‰ï¼› æœåŠ¡å†…éƒ¨å¯ç”¨ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•åšç»†ç²’åº¦é™æµï¼ˆä¾‹å¦‚å¯¹å•ä¸ªä»ä¸šè€…çš„é¢„çº¦è¯·æ±‚åšé€Ÿç‡é™åˆ¶ï¼‰ã€‚ é™çº§ç­–ç•¥ï¼š\nå½“åç«¯æŸæœåŠ¡æ•…éšœæ—¶ï¼Œå¯¹ä½ä¼˜å…ˆçº§åŠŸèƒ½åšé™çº§ï¼ˆå¦‚æœç´¢ç¼“å­˜è¿”å›æ—§ç»“æœï¼Œå¹¶åœ¨ UI ä¸Šæç¤ºâ€œç»“æœå¯èƒ½è¿‡æ—¶ï¼Œè¯·ç¨åé‡è¯•â€ï¼‰ã€‚ 11. å¤šåŒºåŸŸä¸å›½é™…åŒ–\r#\rå¤šå›½å®¶/åœ°åŒºéƒ¨ç½²ï¼š\nç‹¬ç«‹ Region éƒ¨ç½²ï¼šé’ˆå¯¹ä¸åŒå›½å®¶/åœ°åŒºåœ¨å¯¹åº”åŒºåŸŸï¼ˆå¦‚ AWS åŒºåŸŸï¼‰éƒ¨ç½²ç‹¬ç«‹é›†ç¾¤ï¼Œæ•°æ®åº“æœ¬åœ°åŒ–ï¼Œå‡å°‘è·¨æ´‹å»¶è¿Ÿï¼›åˆè§„éš”ç¦»ï¼ˆæ•°æ®é©»ç•™ï¼‰ã€‚ è·¨åŒºåŸŸåŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šè‹¥éœ€è¦å…¨çƒæœç´¢ï¼ˆè·¨å›½æœç´¢ï¼‰ï¼Œéœ€è·¨åŒºåŸŸç´¢å¼•å¤åˆ¶ï¼›æˆ–é›†ä¸­æœç´¢é›†ç¾¤ï¼Œä½†ä¼šæœ‰å»¶è¿Ÿä¸åˆè§„é£é™©ï¼Œä¸€èˆ¬ä¸æ¨èã€‚æ¨èæŒ‰å›½å®¶éš”ç¦»ï¼Œæœªæ¥å¦‚éœ€å…¨çƒå…¥å£å¯åšç‹¬ç«‹æœåŠ¡èšåˆã€‚ é…ç½®ä¸­å¿ƒï¼šé€šè¿‡é…ç½®æœåŠ¡ç®¡ç†å„å›½èŠ‚å‡æ—¥è§„åˆ™ã€æ—¶åŒºã€è¯­è¨€æ–‡æ¡ˆã€ä»·æ ¼ç­–ç•¥ï¼ˆè‹¥ä»˜è´¹ï¼‰ã€æ³•è§„åˆè§„é…ç½®ç­‰ï¼›æœåŠ¡å¯åŠ¨æˆ–è¿è¡Œæ—¶ä»é…ç½®ä¸­å¿ƒè·å–å¯¹åº”å›½å®¶é…ç½®ã€‚ éƒ¨ç½²ä¸ IaCï¼šTerraform + Kubernetes + Helm Charts å®ç°å¯å¤åˆ¶çš„é›†ç¾¤æ¨¡æ¿ï¼Œæ–¹ä¾¿æ–°å›½å®¶å¿«é€Ÿä¸Šçº¿ï¼›CI/CD ç®¡é“æ¥å…¥è‡ªåŠ¨åˆ›å»ºé›†ç¾¤ã€éƒ¨ç½²æœåŠ¡ã€‚ æ—¶åŒºå¤„ç†ï¼š\nå­˜å‚¨ç»Ÿä¸€ç”¨ UTCï¼Œå‰ç«¯æ˜¾ç¤ºæˆ–ç”¨æˆ·è¾“å…¥æ—¶åšæ—¶åŒºè½¬æ¢ï¼›Availability æœåŠ¡åœ¨è®¡ç®—æ—¶è€ƒè™‘ä»ä¸šè€…æœ¬åœ°æ—¶åŒºå’Œæ‚£è€…æœ¬åœ°æ—¶åŒºã€‚ å¤šè¯­è¨€ / æ–‡æ¡ˆï¼š\nå‰ç«¯ä¸åç«¯æ”¯æŒå›½é™…åŒ–ï¼ˆi18nï¼‰ï¼›åç«¯é”™è¯¯/æ¶ˆæ¯ code åŒ–ï¼Œå‰ç«¯æ ¹æ® locale æ¸²æŸ“æ–‡æœ¬ã€‚ è´§å¸ä¸æ”¯ä»˜ï¼šè‹¥æ¶‰åŠä»˜è´¹é¢„çº¦ï¼Œéœ€æ”¯æŒå„åœ°è´§å¸ã€æ”¯ä»˜é€šé“æ¥å…¥ï¼ˆStripeã€PayPalã€æœ¬åœ°æ”¯ä»˜ç½‘å…³ï¼‰ï¼Œå¹¶åšåœ°åŸŸéš”ç¦»ã€‚\n12. å®‰å…¨ä¸åˆè§„\r#\rä¼ è¾“åŠ å¯†ï¼šå…¨é“¾è·¯ TLSã€‚ å­˜å‚¨åŠ å¯†ï¼šæ•°æ®åº“åŠ å¯†ã€S3 ç­‰å­˜å‚¨åŠ å¯†ã€‚ è®¿é—®æ§åˆ¶ï¼šæœ€å°æƒé™åŸåˆ™ï¼Œå¾®æœåŠ¡é—´è°ƒç”¨ç”¨ mTLS æˆ– JWTï¼Œä¸¥æ ¼æ§åˆ¶ IAM æƒé™ã€‚ æ•æ„Ÿæ•°æ®éš”ç¦»ï¼šå¦‚åŒ»ç–—éšç§ã€èº«ä»½è¯å·ç­‰ï¼Œéœ€åšä¸“é—¨åŠ å¯†æˆ–tokenåŒ–å­˜å‚¨ï¼Œå¹¶é™åˆ¶è®¿é—®æ—¥å¿—è®°å½•çº§åˆ«ã€‚ å®¡è®¡æ—¥å¿—ï¼šè®°å½•å…³é”®æ“ä½œï¼ˆé¢„çº¦åˆ›å»º/å–æ¶ˆ/ä¿®æ”¹ã€æƒé™å˜æ›´ç­‰ï¼‰åˆ°ä¸å¯ç¯¡æ”¹å­˜å‚¨ï¼Œç”¨äºå®‰å…¨å®¡è®¡ã€‚ DDoS é˜²æŠ¤ã€WAFï¼šåœ¨è¾¹ç¼˜å±‚é¢æˆ–äº‘æœåŠ¡å•†æä¾›é˜²æŠ¤ã€‚ åˆè§„ï¼šæ ¹æ®å„å›½æ³•è§„ï¼ˆGDPRã€HIPAA ç­‰ï¼‰ï¼Œéƒ¨ç½²å‰åšæ³•å¾‹åˆè§„è¯„ä¼°ã€‚ 13. ç›‘æ§ä¸å¯è§‚å¯Ÿæ€§\r#\rMetricsï¼šPrometheus + Grafanaã€‚\nç›‘æ§ API QPSã€å“åº”æ—¶å»¶ã€é”™è¯¯ç‡ï¼›å„å¾®æœåŠ¡èµ„æºï¼ˆCPU/Mem/Diskï¼‰ï¼›Kafka æ¶ˆè´¹æ»åï¼›æ•°æ®åº“è¿æ¥æ± ã€é”ç­‰å¾…ã€ç£ç›˜ç©ºé—´ç­‰ã€‚ æ—¥å¿—ï¼šç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ï¼Œé›†ä¸­æ”¶é›†ï¼ˆELK/EFKï¼‰ã€‚\nTracingï¼šOpenTelemetry + Jaeger/Zipkinï¼Œé€šè¿‡ API Gateway æ³¨å…¥ trace idï¼Œé“¾è·¯å¯è§†åŒ–ï¼Œå®šä½è·¨æœåŠ¡å»¶è¿Ÿã€‚\nå‘Šè­¦ï¼šè®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼ˆä¾‹å¦‚æœç´¢å»¶è¿Ÿè¶…è¿‡æŸå€¼ã€é¢„çº¦å¤±è´¥ç‡å¼‚å¸¸ä¸Šå‡ã€Kafka æ»åè¿‡é«˜ã€æ•°æ®åº“æ…¢æŸ¥è¯¢æ¿€å¢ç­‰ï¼‰ï¼Œå¹¶é›†æˆ PagerDuty/Slack ç­‰ã€‚\nå¥åº·æ£€æŸ¥ï¼šKubernetes readiness/liveness probeï¼›æœåŠ¡è‡ªå¸¦å¥åº·æ£€æŸ¥æ¥å£ï¼›è‡ªåŠ¨é‡å¯æ•…éšœå®ä¾‹ã€‚\nChaos Testingï¼šå®šæœŸæˆ–åœ¨é¢„ç”Ÿäº§ç¯å¢ƒåšæ•…éšœæ³¨å…¥æµ‹è¯•ï¼ˆæ–­ç½‘ã€å»¶è¿Ÿã€èŠ‚ç‚¹å®•æœºï¼‰ï¼ŒéªŒè¯ç³»ç»Ÿå¼¹æ€§å’Œæ¢å¤èƒ½åŠ›ã€‚\n14. CI/CD ä¸è‡ªåŠ¨åŒ–\r#\rç‰ˆæœ¬æ§åˆ¶ï¼šGit + åˆ†æ”¯ç­–ç•¥ï¼ˆGitFlow/GitHub Flowï¼‰ã€‚ å®¹å™¨åŒ–ï¼šDockerï¼Œé•œåƒæ‰“åŒ…ï¼›å¤šé˜¶æ®µæ„å»ºä»¥å‡å°é•œåƒä½“ç§¯ã€‚ æµæ°´çº¿ï¼šJenkins/GitHub Actions/GitLab CI ç­‰ï¼›åŒ…æ‹¬ä»£ç æ£€æŸ¥ã€å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ„å»ºé•œåƒã€æ‰«æå®‰å…¨æ¼æ´ã€éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¥‘çº¦æµ‹è¯•ã€ç«¯åˆ°ç«¯ï¼‰ã€éƒ¨ç½²åˆ°ç”Ÿäº§ã€‚ åŸºç¡€è®¾æ–½å³ä»£ç ï¼šTerraform/CloudFormation ç®¡ç†äº‘èµ„æºï¼›Helm Charts æˆ– Kustomize ç®¡ç† Kubernetes éƒ¨ç½²æ¸…å•ï¼›ç»“åˆ ArgoCD/Flux å®ç° GitOpsã€‚ è“ç»¿éƒ¨ç½² / é‡‘ä¸é›€å‘å¸ƒï¼šé€æ­¥æµé‡åˆ‡æ¢ï¼Œé™ä½é£é™©ã€‚ å›æ»šæœºåˆ¶ï¼šè‡ªåŠ¨åŒ–å›æ»šè„šæœ¬ï¼Œè‹¥å¥åº·æ£€æŸ¥å¤±è´¥æˆ–ç›‘æ§å‘Šè­¦ï¼Œå¯å¿«é€Ÿå›æ»šåˆ°ç¨³å®šç‰ˆæœ¬ã€‚ 15. æµ‹è¯•ç­–ç•¥\r#\rå•å…ƒæµ‹è¯•ï¼šå„æœåŠ¡å†…æ ¸å¿ƒé€»è¾‘ï¼ˆå¦‚ Availability è®¡ç®—ã€Booking å¹¶å‘å†²çªæ£€æµ‹ï¼‰ã€‚\né›†æˆæµ‹è¯•ï¼šæ¨¡æ‹Ÿå¾®æœåŠ¡é—´è°ƒç”¨ï¼Œå¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­ç”¨ WireMock æˆ–æµ‹è¯•å®¹å™¨ã€‚\nå¥‘çº¦æµ‹è¯•ï¼šç¡®ä¿æœåŠ¡é—´ API å˜æ›´ä¸ä¼šç ´åæ¶ˆè´¹è€…ã€‚\næ€§èƒ½æµ‹è¯•ï¼š\nLoad Testingï¼šç”¨å·¥å…·ï¼ˆLocustã€JMeterï¼‰æ¨¡æ‹Ÿ 700 Search QPSã€90 Booking QPSï¼›ç›‘æ§å„ç»„ä»¶ç“¶é¢ˆå¹¶è¿›è¡Œå®¹é‡è§„åˆ’ã€‚ å‹åŠ›æµ‹è¯•ï¼šè¶…é«˜å¹¶å‘ã€æ•…éšœåœºæ™¯ï¼›æµ‹è¯•ç³»ç»Ÿé™çº§èƒ½åŠ›ã€‚ å®‰å…¨æµ‹è¯•ï¼šæ‰«æä¾èµ–æ¼æ´ï¼ˆSnyk/OWASPï¼‰ã€æ¸—é€æµ‹è¯•ã€‚\nå¯ç”¨æ€§æµ‹è¯•ï¼šChaos Monkey é£æ ¼æ•…éšœæ³¨å…¥ï¼ŒéªŒè¯è‡ªåŠ¨æ¢å¤æœºåˆ¶ã€‚\n16. æŠ€æœ¯é€‰å‹å°ç»“ä¸ç†ç”±\r#\rå¾®æœåŠ¡æ¶æ„ + Kubernetesï¼šé¿å…å•ä½“ï¼Œä¾¿äºç‹¬ç«‹æ‰©å±•ã€éƒ¨ç½²å’Œå›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼›K8s æä¾›è‡ªæ„ˆã€æ»šåŠ¨å‡çº§ã€æ°´å¹³ä¼¸ç¼©èƒ½åŠ›ã€‚\nè¯­è¨€\nGoï¼šé«˜å¹¶å‘ã€äºŒè¿›åˆ¶éƒ¨ç½²ç®€å•ã€æ€§èƒ½ä¼˜è¶Šï¼Œé€‚ç”¨äº Searchã€Availabilityã€Booking ç­‰æ ¸å¿ƒé«˜ QPS æœåŠ¡ã€‚ Kotlin/Javaï¼šè‹¥å·²æœ‰å›¢é˜Ÿç†Ÿæ‚‰ Spring ç”Ÿæ€ï¼Œå¯å¿«é€Ÿå¼€å‘ï¼Œç”Ÿæ€æˆç†Ÿï¼›ä½†ç›¸æ¯” Go å¯åŠ¨æ›´æ…¢ã€èµ„æºæ¶ˆè€—ç•¥é«˜ï¼›é€‚åˆéœ€è¦å¤æ‚äº‹åŠ¡ç®¡ç†æˆ–å·²æœ‰å¤§é‡ Java åº“åœºæ™¯ã€‚ Python/Node.jsï¼šç”¨äºå¼‚æ­¥ Workerï¼ˆNotificationã€Analyticsï¼‰ï¼Œå› é›†æˆç¬¬ä¸‰æ–¹ SDKã€å¼€å‘æ•ˆç‡é«˜ï¼›å¯æ ¹æ®æ€§èƒ½éœ€æ±‚åœ¨é«˜åååœºæ™¯ä¸‹ä¹Ÿå¯é€‰ Goï¼› æ•°æ®åº“\nPostgreSQLï¼šæˆç†Ÿã€ç¨³å®šï¼Œæ”¯æŒå¤æ‚äº‹åŠ¡ä¸åœ°ç†ä½ç½®æ‰©å±•ï¼ˆPostGISï¼‰ï¼›æŒ‰å›½å®¶åˆ†åº“éƒ¨ç½²ã€‚ CockroachDBï¼šè‹¥å¤šåŒºåŸŸä¸€è‡´æ€§è¦æ±‚é«˜ã€å¸Œæœ›ç»Ÿä¸€æ•°æ®åº“å±‚ç®¡ç†ï¼Œå¯è€ƒè™‘ï¼Œä½†éœ€è¯„ä¼°è¿ç»´æˆæœ¬å’Œå»¶è¿Ÿã€‚ æœç´¢ï¼šElasticsearch/OpenSearchï¼Œç”¨äºåœ°ç†è¿‡æ»¤ã€å±æ€§è¿‡æ»¤ç­‰ã€‚\næ¶ˆæ¯é˜Ÿåˆ—ï¼šKafkaï¼Œç”¨äºé«˜ååå¼‚æ­¥äº‹ä»¶ã€‚\nç¼“å­˜/é”ï¼šRedis Clusterï¼Œç”¨äºçƒ­ç‚¹ç¼“å­˜ã€åˆ†å¸ƒå¼é”ã€é™æµã€‚\næœåŠ¡ç½‘æ ¼ï¼šIstio/Linkerdï¼ˆå¯é€‰ï¼‰ï¼Œå¢å¼ºæµé‡ç®¡ç†ã€TLSã€è§‚æµ‹ã€‚\nç›‘æ§/æ—¥å¿—/Tracingï¼šPrometheus+Grafanaã€ELK/EFKã€OpenTelemetry+Jaegerã€‚\nCI/CD \u0026amp; IaCï¼šTerraform + Kubernetes + GitOpsã€‚\nå®¹å™¨è¿è¡Œç¯å¢ƒï¼šDocker + Kubernetesï¼ˆäº‘æ‰˜ç®¡æˆ–è‡ªæ‰˜ç®¡ï¼‰ï¼Œç»“åˆè‡ªåŠ¨æ‰©ç¼©å®¹ï¼ˆHPA/VPAï¼‰ã€‚\nå¤–éƒ¨æ‰˜ç®¡æœåŠ¡ï¼šé‚®ä»¶/SMS æ¨é€ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆSendGrid/Twilio ç­‰ï¼‰ï¼›æ”¯ä»˜é›†æˆ Stripe/PayPal/æœ¬åœ°æ”¯ä»˜ï¼›ç›‘æ§å‘Šè­¦å¯é›†æˆ PagerDutyã€‚\n17. å¤šå›½å®¶ä¸Šçº¿æµç¨‹ç¤ºä¾‹\r#\rå‡†å¤‡é˜¶æ®µ\nåœ¨é…ç½®ä¸­å¿ƒä¸­æ·»åŠ æ–°å›½å®¶é…ç½®ï¼šæ—¶åŒºã€èŠ‚å‡æ—¥è§„åˆ™ã€é»˜è®¤è¯­è¨€ã€åˆè§„è¦æ±‚ã€æ”¯ä»˜æ–¹å¼ç­‰ã€‚ Terraform è„šæœ¬ï¼šæ–°å¢å¯¹åº”åŒºåŸŸçš„ VPCã€Kubernetes é›†ç¾¤èŠ‚ç‚¹ç»„ç­‰èµ„æºå®šä¹‰ã€‚ éƒ¨ç½²åŸºç¡€è®¾æ–½\nä½¿ç”¨ Terraform è‡ªåŠ¨åˆ›å»ºæˆ–æ‰©å®¹é›†ç¾¤ï¼› åœ¨ Kubernetes ä¸­éƒ¨ç½²æ ¸å¿ƒå¾®æœåŠ¡ï¼ˆDeploymentã€StatefulSetã€ConfigMapã€Secret ç­‰ï¼‰ã€‚ åˆå§‹åŒ–æ•°æ®åº“ï¼šæ–°å›½å®¶æ•°æ®åº“å®ä¾‹æˆ–åˆ†åŒºã€‚ åŒæ­¥æ•°æ®ä¸æµ‹è¯•\næ ¹æ®éœ€è¦åŒæ­¥åŸºç¡€å­—å…¸æ•°æ®ï¼ˆå¦‚ä¸“ç§‘ç±»åˆ«ã€è¯Šæ‰€æ³¨å†Œè¡¨æ ¼å­—æ®µç­‰ï¼‰ï¼› åœ¨æµ‹è¯•ç¯å¢ƒè¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼›é¢„çƒ­ç¼“å­˜ï¼›æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼› ç°åº¦å‘å¸ƒï¼šå°†å°‘é‡æµé‡å¯¼å‘æ–°é›†ç¾¤ï¼Œè§‚å¯Ÿç›‘æ§æŒ‡æ ‡ã€‚ æ­£å¼ä¸Šçº¿\nDNS / Gateway é…ç½®ï¼šæ–°å›½å®¶åŸŸåæˆ–è·¯å¾„è·¯ç”±è‡³å¯¹åº”é›†ç¾¤ï¼› å¼€å¯ç›‘æ§å‘Šè­¦ï¼›ä¸å½“åœ°æ”¯æŒå›¢é˜Ÿã€è¿ç»´åä½œï¼› é€æ­¥æ‰©å¤§æµé‡è‡³å…¨é‡ï¼› è¿­ä»£ä¼˜åŒ–\næ ¹æ®ä½¿ç”¨æƒ…å†µä¼˜åŒ–èµ„æºé…ç½®ï¼›è°ƒæ•´é¢„è®¡ç®—çª—å£ï¼›å¢å¼ºç¼“å­˜ï¼› æ”¶é›†å½“åœ°ç”¨æˆ·åé¦ˆï¼ŒæŒç»­æ”¹è¿›ã€‚ 18. å®¹é”™ä¸é™çº§è®¾è®¡\r#\ræœåŠ¡å®ä¾‹å†—ä½™ï¼šå„å¾®æœåŠ¡åœ¨å¤šä¸ªèŠ‚ç‚¹å¤šå‰¯æœ¬éƒ¨ç½²ï¼›K8s è‡ªåŠ¨é‡å¯ã€‚\nè·¨å¯ç”¨åŒºéƒ¨ç½²ï¼šé›†ç¾¤è·¨å¤šä¸ªå¯ç”¨åŒºï¼Œé˜²æ­¢å• AZ æ•…éšœã€‚\nCircuit Breaker / Retryï¼šæœåŠ¡é—´è°ƒç”¨å‡ºç°æ•…éšœæ—¶ï¼Œå¿«é€Ÿå¤±è´¥å¹¶ç†”æ–­ï¼Œä¿æŠ¤ä¸‹æ¸¸ï¼›é‡è¯•æœºåˆ¶å¸¦é€€é¿ç­–ç•¥ã€‚\né™çº§æ–¹æ¡ˆï¼š\næœç´¢æœåŠ¡å¤±æ•ˆæ—¶ï¼Œå¯è¿”å›ç¼“å­˜ç»“æœæˆ–ç®€åŒ–è¿”å›ï¼ˆå¦‚ä»…è¿”å›è¯Šæ‰€åˆ—è¡¨ã€æç¤ºå®æ—¶ä¸å¯ç”¨ï¼‰ï¼› Availability æœåŠ¡æ•…éšœæ—¶ï¼Œå¯æ˜¾ç¤ºè¿‘æœŸç¼“å­˜æ—¶æ®µå¹¶æç¤ºâ€œè¯·åˆ·æ–°ä»¥è·å–å®æ—¶å¯ç”¨â€ï¼› Booking æœåŠ¡è‹¥çŸ­æš‚ä¸å¯ç”¨ï¼Œå‘ŠçŸ¥ç”¨æˆ·ç¨åé‡è¯•æˆ–æ’é˜Ÿï¼›å¯ç»“åˆé˜Ÿåˆ—ç¼“å†²ï¼ˆä½†éœ€è°¨æ…ï¼Œé˜²æ­¢æ’é˜Ÿè¿‡ä¹…å†²çªï¼‰ã€‚ æ•°æ®å¤‡ä»½ä¸æ¢å¤ï¼š\nå®šæœŸå¤‡ä»½æ•°æ®åº“å¿«ç…§ï¼›Elasticsearch å¿«ç…§ï¼›Kafka æ•°æ®ä¿ç•™ï¼› åˆ¶å®šç¾éš¾æ¢å¤ï¼ˆDRï¼‰é¢„æ¡ˆï¼Œä¿è¯åœ¨åŒºåŸŸæ•…éšœæ—¶å¯å¿«é€Ÿæ¢å¤ã€‚ 19. ç›‘æ§æ‰©å®¹è§„åˆ’\r#\rå®¹é‡è§„åˆ’ï¼š\næ ¹æ® Load Testing æ•°æ®ï¼Œé¢„ä¼°æœç´¢èŠ‚ç‚¹ã€ES é›†ç¾¤èŠ‚ç‚¹ã€æ•°æ®åº“å®ä¾‹è§„æ ¼ä¸å‰¯æœ¬æ•°ï¼› è®¾å®š HPAï¼ˆK8s Horizontal Pod Autoscalerï¼‰ç­–ç•¥ï¼šæ ¹æ® CPUã€å†…å­˜æˆ–è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚å»¶è¿Ÿã€é˜Ÿåˆ—é•¿åº¦ï¼‰è‡ªåŠ¨æ‰©å®¹ã€‚ å¼¹æ€§ä¼¸ç¼©ï¼š\nKubernetes Pod ä¼¸ç¼©ï¼› æ•°æ®åº“è¯»å‰¯æœ¬æ‰©å®¹ï¼›Elasticsearch èŠ‚ç‚¹æ‰©å®¹ï¼›Kafka partition æ‰©å®¹ï¼ˆéœ€å¹³è¡¡ rebalancing æ—¶å½±å“ï¼‰ã€‚ æˆæœ¬ä¼˜åŒ–ï¼š\néé«˜å³°æœŸå¯ç¼©å°å®ä¾‹ï¼›åˆ©ç”¨ Spot å®ä¾‹å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼› è¯„ä¼° Managed Serviceï¼ˆRDS/ElastiCache/ES Serviceï¼‰ä¸è‡ªæ‰˜ç®¡æˆæœ¬å¯¹æ¯”ã€‚ 20. ä¸šåŠ¡ç›‘æµ‹ä¸ä¼˜åŒ–\r#\rå…³é”®æŒ‡æ ‡ (KPI)\næœç´¢å“åº”æ—¶å»¶ã€æˆåŠŸç‡ï¼› é¢„çº¦æˆåŠŸç‡ã€å†²çªé‡è¯•ç‡ï¼› é¢„çº¦å–æ¶ˆç‡ã€æ”¹æœŸç‡ï¼› ç³»ç»Ÿå¯ç”¨ç‡ã€é”™è¯¯ç‡ã€ç³»ç»Ÿè´Ÿè½½ï¼› ç”¨æˆ·ç•™å­˜ã€ä½¿ç”¨é¢‘æ¬¡ï¼ˆç»“åˆ Analyticsï¼‰ã€‚ A/B æµ‹è¯•\nå¯¹æœç´¢æ’åºç®—æ³•ï¼ˆå¦‚è·ç¦»ä¼˜å…ˆ vs è¯„åˆ†ä¼˜å…ˆï¼‰ã€æ—¶æ®µæ¨èé€»è¾‘ç­‰è¿›è¡Œå®éªŒï¼Œè¯„ä¼°ç”¨æˆ·è½¬åŒ–ç‡ã€‚ æœºå™¨å­¦ä¹  / æ™ºèƒ½æ¨èï¼ˆå¯é€‰ï¼‰\nåŸºäºç”¨æˆ·å†å²ã€åœ°ç†ä½ç½®ã€è¯„ä»·ç­‰ï¼Œä¸ºç”¨æˆ·æ¨èåˆé€‚ä»ä¸šè€…ï¼› ä½†æ­¤åŠŸèƒ½ä¸åŸºç¡€ç³»ç»Ÿè§£è€¦ï¼Œä½œä¸ºåç»­ä¼˜åŒ–æ¨¡å—ï¼Œé€šè¿‡ç‹¬ç«‹æœåŠ¡è°ƒç”¨æœç´¢ç»“æœã€‚ 21. æ€»ç»“\r#\rå¾®æœåŠ¡æ¶æ„é…åˆKubernetesæä¾›å¼¹æ€§ã€é«˜å¯ç”¨å’Œæ˜“éƒ¨ç½²ï¼› Go æˆ– Kotlin/Java ä½œä¸ºæ ¸å¿ƒæœåŠ¡è¯­è¨€ï¼Œæ»¡è¶³é«˜å¹¶å‘å’Œç”Ÿæ€éœ€æ±‚ï¼› PostgreSQL/CockroachDB ä½œä¸ºå…³ç³»å‹ä¸»åº“ï¼ŒæŒ‰å›½å®¶æˆ–åˆ†åŒºéƒ¨ç½²ï¼Œä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼› Elasticsearch ä½œä¸ºæœç´¢å¼•æ“ï¼Œæ”¯æŒåœ°ç†å’Œå±æ€§è¿‡æ»¤ï¼Œè¿‘å®æ—¶ç´¢å¼•æ›´æ–°ï¼› Redis ä½œä¸ºç¼“å­˜ä¸åˆ†å¸ƒå¼é”ï¼Œæå‡è¯»å–æ€§èƒ½ä¸å¹¶å‘æ§åˆ¶ï¼› Kafka ä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œè§£è€¦å¼‚æ­¥ä»»åŠ¡ï¼ˆç´¢å¼•æ›´æ–°ã€é€šçŸ¥ã€åˆ†æï¼‰ï¼› CI/CD + IaC å®ç°è‡ªåŠ¨åŒ–ã€é«˜æ•ˆä¸Šçº¿ä¸å¯å¤åˆ¶å¤šå›½å®¶éƒ¨ç½²ï¼› ç›‘æ§/Tracing/æ—¥å¿—ç¡®ä¿å¯è§‚å¯Ÿæ€§ä¸æ•…éšœå®šä½ï¼› å®‰å…¨ä¸åˆè§„è´¯ç©¿è®¾è®¡ï¼Œä¿æŠ¤ç”¨æˆ·éšç§å¹¶æ»¡è¶³æ³•è§„è¦æ±‚ï¼› å¯æ‰©å±•æ€§è®¾è®¡ï¼šæŒ‰å›½å®¶åˆ†åº“ã€åˆ†åŒºï¼Œæ°´å¹³æ‰©å®¹æœåŠ¡å®ä¾‹ï¼Œè‡ªåŠ¨ä¼¸ç¼©ï¼› ä¸€è‡´æ€§ç­–ç•¥ï¼šé¢„çº¦é‡‡ç”¨å•åˆ†åŒºäº‹åŠ¡æˆ–åˆ†å¸ƒå¼é”+Sagaï¼Œæœç´¢ç»“æœé‡‡ç”¨è¿‘å®æ—¶å¼±ä¸€è‡´ã€‚ è¯¥æ–¹æ¡ˆé¿å…å•ä½“æ¶æ„ï¼Œå°†åŠŸèƒ½æ‹†åˆ†åˆ°ç‹¬ç«‹å¾®æœåŠ¡ï¼Œä¾¿äºå›¢é˜Ÿå¹¶è¡Œè¿­ä»£ä¸æ‰©å±•ï¼›åŒæ—¶é€šè¿‡å¼‚æ­¥äº‹ä»¶é©±åŠ¨ä¿æŒå„ç»„ä»¶è§£è€¦ã€è¿‘å®æ—¶åŒæ­¥ã€‚å¤šåŒºåŸŸã€å¤šå›½å®¶ä¸Šçº¿é€šè¿‡é…ç½®ä¸­å¿ƒå’Œ IaC è‡ªåŠ¨åŒ–æ”¯æ’‘ï¼Œé™ä½è¿ç»´å¤æ‚åº¦ã€‚æ•´ä½“æŠ€æœ¯æ ˆé€‰å‹ä¸»æµæˆç†Ÿã€ç¤¾åŒºæ´»è·ƒï¼Œä¸”å„ç»„ä»¶ä¹‹é—´å¥‘çº¦æ¸…æ™°ã€æ˜“äºç»´æŠ¤ã€‚é€šè¿‡ä¸¥æ ¼çš„ç›‘æ§ã€æµ‹è¯•å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¿è¯ç”Ÿäº§ç¯å¢ƒä¸­ç³»ç»Ÿçš„ç¨³å®šã€å¯ç”¨å’Œå¯è§‚æµ‹ã€‚\n"},{"id":24,"href":"/docs/study/cache/kafka/exactly-once/","title":"Kafka Exactly-Once","section":"Kafka","content":"ä¸‹é¢åŸºäºä¸Šè¿° Exactly-Once è¯­ä¹‰å®ç°çš„å†…å®¹ï¼Œå¯¹â€œé‡è¦åœºæ™¯â€ä¸â€œå…³é”®è®¾è®¡â€åˆ†åˆ«è¿›è¡Œå½’çº³ä¸è§£é‡Šã€‚\n1. é‡è¦åœºæ™¯åŠ Kafka åœ¨å…¶ä¸­çš„è§’è‰²\r#\rAt-Most-Once / At-Least-Once vs Exactly-Once æµå¤„ç†åœºæ™¯å¯¹æ¯”\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†é€šå¸¸æ¶‰åŠâ€œæ¶ˆè´¹-å¤„ç†-ç”Ÿäº§â€ï¼ˆConsume-Process-Produceï¼‰æµç¨‹ï¼›è‹¥ä»…ç”¨ At-Least-Once è¯­ä¹‰ï¼Œä¼šå› ç½‘ç»œæŠ–åŠ¨æˆ–è¿›ç¨‹å´©æºƒå¯¼è‡´æ¶ˆæ¯é‡å¤å¤„ç†ï¼›è‹¥ At-Most-Onceï¼Œåˆ™å¯èƒ½ä¸¢å¤±æ¶ˆæ¯ã€‚ Kafka è§’è‰²ï¼šæä¾›ç«¯åˆ°ç«¯ Exactly-Once èƒ½åŠ›ï¼ˆåœ¨æ¶ˆè´¹æ¥æºäº Kafkaï¼Œä¸”è¾“å‡ºå†™å› Kafka çš„åœºæ™¯ï¼‰ã€‚é€šè¿‡å¹‚ç­‰ç”Ÿäº§è€…ä¸äº‹åŠ¡æœºåˆ¶ï¼Œé¿å…é‡å¤æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œç¡®ä¿æ¯æ¡è¾“å…¥æ¶ˆæ¯â€œæ°å¥½ä¸€æ¬¡â€è¢«å¤„ç†å¹¶äº§å‡ºæ¶ˆæ¯ï¼ŒåŒæ—¶æäº¤ä½ç‚¹ä¹Ÿè¢«åŸå­åŒ–åœ°ä¸è¾“å‡ºæŒ‚é’©ã€‚ ç½‘ç»œ ACK ä¸¢å¤±å¯¼è‡´é‡è¯•çš„é‡å¤å†™å…¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼ŒBroker å®é™…å·²å†™å…¥ä½† ACK ä¸¢å¤±ï¼Œå®¢æˆ·ç«¯è¯¯ä»¥ä¸ºå¤±è´¥é‡è¯•ï¼Œå¯¼è‡´é‡å¤å†™å…¥ã€‚ Kafka è§’è‰²ï¼šåœ¨å¹‚ç­‰ç”Ÿäº§è€…ä¸­ï¼Œé€šè¿‡ Producer ID + åˆ†åŒºå†…åºåˆ—å·ã€æœåŠ¡ç«¯ç»´æŠ¤æœ€è¿‘ N æ¡æ‰¹æ¬¡ä¿¡æ¯ï¼Œåˆ¤é‡ä¸ä¹±åºæ£€æµ‹ï¼›å†ç»“åˆäº‹åŠ¡å¯ä¿è¯è·¨ä¼šè¯çš„å¹‚ç­‰ï¼Œé¿å…å›  ACK ä¸¢å¤±äº§ç”Ÿé‡å¤ã€‚ æ¶ˆè´¹ç«¯å·²å‘é€è¾“å‡ºä½†å°šæœªæäº¤ä½ç‚¹å‰å´©æºƒå¯¼è‡´é‡è¯»å¹¶é‡å¤å†™å…¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šåœ¨æµå¤„ç†åº”ç”¨ä¸­ï¼Œæ¶ˆæ¯å¤„ç†å®Œå¹¶å‘ç›®æ ‡ Topic å‘é€æˆåŠŸåï¼Œè‹¥åœ¨æäº¤ consumer offset ä¹‹å‰å´©æºƒï¼Œé‡å¯åä¼šå†æ¬¡æ¶ˆè´¹å¹¶é‡å¤å‘é€ã€‚ Kafka è§’è‰²ï¼šé€šè¿‡äº‹åŠ¡ï¼šæŠŠâ€œå‘é€æ¶ˆæ¯åˆ°ç›®æ ‡ Topicâ€ä¸â€œæäº¤æº Topic çš„ä½ç‚¹ï¼ˆ__consumer_offsetsï¼‰â€éƒ½çº³å…¥åŒä¸€äº‹åŠ¡ã€‚è‹¥äº‹åŠ¡æœ€ç»ˆæäº¤ï¼Œåˆ™ä¸¤è€…ä¸€èµ·ç”Ÿæ•ˆï¼›è‹¥ä¸­é€”å¤±è´¥æˆ–å´©æºƒæœªæäº¤ï¼Œåˆ™äº‹åŠ¡å›æ»šï¼Œè¾“å‡ºæ¶ˆæ¯ä¸å¯è§ä¸”ä½ç‚¹ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚ å¤šåˆ†åŒºæˆ–å¤šæ¬¡è¯»å†™æ“ä½œçš„åŸå­æ€§éœ€æ±‚åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†å¯èƒ½å¯¹å¤šä¸ªåˆ†åŒºå†™å…¥ï¼Œæˆ–åŒæ—¶éœ€è¦å‘å¤šä¸ª Topic-Partition å‘é€ç»“æœï¼Œå¹¶æäº¤å¤šä¸ªæ“ä½œï¼ˆå¦‚å†™ç»“æœã€æ›´æ–°çŠ¶æ€ topicã€æäº¤ä½ç‚¹ç­‰ï¼‰ã€‚éœ€è¦ä¿è¯è¿™äº›æ“ä½œè¦ä¹ˆéƒ½ç”Ÿæ•ˆï¼Œè¦ä¹ˆéƒ½ä¸ç”Ÿæ•ˆã€‚ Kafka è§’è‰²ï¼šå¼•å…¥äº‹åŠ¡åè°ƒè€…ï¼ˆTransaction Coordinatorï¼‰ï¼Œåœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­è·Ÿè¸ªæ¶‰åŠçš„æ‰€æœ‰åˆ†åŒºä¿¡æ¯ï¼›æœ€ç»ˆé€šè¿‡æ§åˆ¶æ¶ˆæ¯ï¼ˆWriteTxnMarkerï¼‰é€šçŸ¥å„åˆ†åŒº Leader æäº¤æˆ–å›æ»šï¼Œç¡®ä¿åŸå­æ€§ã€‚ è·¨ä¼šè¯æ¢å¤åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†åº”ç”¨æˆ–ç”Ÿäº§è€…è¿›ç¨‹é‡å¯åï¼Œè‹¥ä½¿ç”¨ç›¸åŒçš„äº‹åŠ¡ IDï¼Œåº”èƒ½è¯†åˆ«å‰ä¸€ä¼šè¯æœªå®Œæˆçš„äº‹åŠ¡å¹¶è¿›è¡Œæ°å½“å›æ»šæˆ–ç»§ç»­ã€‚ Kafka è§’è‰²ï¼šTransactional IDï¼ˆç”¨æˆ·æä¾›ï¼‰+ æœåŠ¡ç«¯åˆ†é…çš„ PID + epoch æœºåˆ¶ã€‚é‡å¯åå®¢æˆ·ç«¯ç”¨ç›¸åŒ Transactional ID æ‰¾åˆ°åè°ƒè€…ï¼Œåè°ƒè€…æ£€æµ‹åˆ°æ—§äº‹åŠ¡æœªå®Œæˆï¼Œä¼šå›æ»šæ—§äº‹åŠ¡ï¼Œç»™æ–°çš„ä¼šè¯åˆ†é…æ–°çš„ epochï¼Œä»è€Œä¿è¯å¹‚ç­‰ä¸æ­£ç¡®æ¢å¤ã€‚ Broker/åè°ƒè€…æ•…éšœæˆ–ç½‘ç»œåˆ†åŒºåœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šäº‹åŠ¡åè°ƒè€…æˆ–åˆ†åŒº Leader å´©æºƒã€åˆ‡æ¢ï¼›ç½‘ç»œæš‚æ—¶ä¸å¯è¾¾ç­‰ã€‚éœ€è¦ç¡®ä¿äº‹åŠ¡èƒ½åœ¨æ•…éšœåç»§ç»­æˆ–å›æ»šï¼Œä¸ä¼šå‡ºç°æ··ä¹±æˆ–æ•°æ®ä¸¢å¤±ã€‚\nKafka è§’è‰²ï¼š\näº‹åŠ¡åè°ƒè€… HAï¼šåè°ƒè€…å…ƒæ•°æ®æŒä¹…åŒ–äºå†…éƒ¨ __transaction_state compacted Topicï¼Œå¤šå‰¯æœ¬å¤åˆ¶ä¿éšœï¼›æ•…éšœåˆ‡æ¢åï¼Œæ–°åè°ƒè€…é€šè¿‡è¯»å–æ—¥å¿—æ¢å¤çŠ¶æ€å¹¶ç»§ç»­å‘é€æ§åˆ¶æ¶ˆæ¯æˆ–å›æ»šã€‚ åˆ†åŒº Leader HAï¼šPID Snapshotã€æ—¥å¿—æ¢å¤æœºåˆ¶ï¼Œè®©æœåŠ¡ç«¯æ¢å¤ Producer State æ˜ å°„ï¼Œç»§ç»­åˆ¤é‡ä¸ä¹±åºæ£€æµ‹ï¼›WriteTxnMarker é‡è¯•æœºåˆ¶ç¡®ä¿æ§åˆ¶æ¶ˆæ¯æœ€ç»ˆå†™å…¥ã€‚ é•¿äº‹åŠ¡ä¸ Last Stable Offset (LSO) ç­–ç•¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæŸäº›äº‹åŠ¡å¯èƒ½è¾ƒå¤§ï¼Œæœªæäº¤æœŸé—´å¯èƒ½é˜»å¡åç»­å·²æäº¤æ¶ˆæ¯çš„å¯è¯»æ€§ï¼›æ¶ˆè´¹ç«¯ä¸åº”çœ‹åˆ°å°šæœªæäº¤çš„äº‹åŠ¡æ¶ˆæ¯ã€‚ Kafka è§’è‰²ï¼šå®¢æˆ·ç«¯é‡‡ç”¨ read_committed æ¨¡å¼ï¼ŒBroker åŸºäº LSO ç­–ç•¥åªè¿”å› â‰¤ LSO çš„æ¶ˆæ¯ï¼›LSO å®šä¹‰ä¸ºç¬¬ä¸€ä¸ªæœªå®Œæˆäº‹åŠ¡çš„èµ·å§‹ä½ç½®ï¼Œè¿‡æ»¤æ‰å°šæœªæäº¤çš„æ¶ˆæ¯ã€‚å·²æäº¤çš„ä½†ä½äº LSO ä¹‹åçš„çŸ­äº‹åŠ¡æ¶ˆæ¯ï¼Œå› è¢«é•¿äº‹åŠ¡é˜»å¡ï¼Œä¹Ÿæš‚æ—¶æ— æ³•è¿”å›ï¼›è¿™æ ·åšå…¼é¡¾æ­£ç¡®æ€§ä¸æ€§èƒ½/å†…å­˜å‹åŠ›ã€‚æ­¤å¤–ï¼ŒBroker ç»´æŠ¤ .txnindex è®°å½•å·²å›æ»šäº‹åŠ¡çš„åŒºé—´ï¼Œä»¥ä¾¿æ¶ˆè´¹ç«¯åœ¨æ‹‰å–æ—¶æå‰è¿‡æ»¤å›æ»šæ•°æ®ï¼Œå‡è½»å®¢æˆ·ç«¯ç¼“å­˜å‹åŠ›ã€‚ äº‹åŠ¡è¶…æ—¶ä¸æ¸…ç†åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šè‹¥ç”Ÿäº§è€…å¼€å¯äº‹åŠ¡åé•¿æœŸæ— è¿›å±•ï¼ˆè¶…æ—¶ï¼‰ï¼Œæˆ–äº‹åŠ¡ ID é•¿æœŸæœªä½¿ç”¨ï¼Œéœ€å›æ»šå¹¶å›æ”¶èµ„æºã€‚\nKafka è§’è‰²ï¼š\näº‹åŠ¡æ“ä½œè¶…æ—¶ï¼šå®¢æˆ·ç«¯è®¾å®š transaction.timeout.msï¼Œè‹¥è¶…æ—¶æœªæäº¤ï¼Œåè°ƒè€…ä¸»åŠ¨å›æ»šäº‹åŠ¡ï¼›æœåŠ¡ç«¯æœ‰ max.transaction.timeout.ms ä¸Šé™ã€‚ äº‹åŠ¡ ID è¿‡æœŸï¼šåè°ƒè€…å®šæœŸæ£€æŸ¥ transaction.id.expiration.msï¼Œè‹¥æŸäº‹åŠ¡ ID é•¿æœŸæ— è¯·æ±‚ï¼Œåˆ™æ¸…ç†å¯¹åº”å…ƒæ•°æ®ï¼Œé‡Šæ”¾ PID ç­‰èµ„æºã€‚ 2. å…³é”®è®¾è®¡åŠå…¶ç†å¿µã€è§£å†³é—®é¢˜å’Œä½œç”¨\r#\rä¸‹é¢æŒ‰é€»è¾‘æ¨¡å—æˆ–è§’è‰²é€ä¸€åˆ—ä¸¾ï¼Œå¹¶è¯´æ˜è®¾è®¡åˆè¡·ã€è§£å†³çš„é—®é¢˜åŠåœ¨ Exactly-Once æµåœºæ™¯ä¸­çš„ä½œç”¨ã€‚\nProducer ID (PID) ä¸åˆ†åŒºå†…åºåˆ—å· + å¹‚ç­‰ç”Ÿäº§è€…\nè®¾è®¡ç†å¿µï¼šé€šè¿‡ç»™æ¯ä¸ªç”Ÿäº§è€…ä¼šè¯åˆ†é…å”¯ä¸€ PIDï¼Œå¹¶åœ¨æ¯ä¸ª Topic-Partition ç»´åº¦ç»´æŠ¤åºåˆ—å·ï¼ŒæœåŠ¡ç«¯åªéœ€ä¿å­˜æœ‰é™æœ€è¿‘æ‰¹æ¬¡ä¿¡æ¯å³å¯åˆ¤é‡ä¸ä¹±åºï¼Œè€Œéä¿å­˜æ‰€æœ‰æ¶ˆæ¯ IDã€‚ è§£å†³é—®é¢˜ï¼šè§£å†³å•ä¼šè¯ä¸­ç”±äºç½‘ç»œ ACK ä¸¢å¤±æˆ–é‡è¯•å¯¼è‡´çš„é‡å¤å†™å…¥ä¸ä¹±åºå†™å…¥é—®é¢˜ï¼Œå®ç°å¹‚ç­‰æ€§ï¼ˆExactly-Once at least on single-session, single-partitionï¼‰ã€‚ ä½œç”¨ï¼šä¸ºåç»­è·¨ä¼šè¯å¹‚ç­‰ä¸äº‹åŠ¡æä¾›åŸºç¡€ï¼›åœ¨æ¯ä¸ª ProduceRequest ä¸­æºå¸¦ PID + epoch +åºåˆ—å·ï¼ŒBroker æ£€æµ‹é‡å¤æˆ–ä¹±åºå¹¶æ‹’ç»æˆ–å¿½ç•¥ï¼Œä»è€Œä¿è¯å•ä¼šè¯å•åˆ†åŒºå†™å…¥çš„å¹‚ç­‰æ€§ã€‚ Transactional ID + Epoch (Fencing) æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šç”¨æˆ·ä¸ºæµå¤„ç†åº”ç”¨æä¾›ä¸€ä¸ªç¨³å®šçš„ Transactional IDï¼›æœåŠ¡ç«¯ä¸ºè¯¥ ID åˆ†é… PIDï¼Œå¹¶åœ¨æ¯æ¬¡åˆå§‹åŒ–æˆ–é‡å¯æ—¶é€šè¿‡ epoch éš”ç¦»è¿‡æœŸä¼šè¯ï¼Œé¿å…â€œåƒµå°¸ç”Ÿäº§è€…â€æ··å…¥ã€‚ è§£å†³é—®é¢˜ï¼šè·¨ä¼šè¯æ¢å¤æ—¶ï¼Œè‹¥æ—§ä¼šè¯å´©æºƒï¼Œæ–°ä¼šè¯ä»èƒ½ä»¥åŒä¸€ Transactional ID ç»§ç»­æˆ–å›æ»šä¸Šæ¬¡æœªå®Œæˆäº‹åŠ¡ï¼›é˜²æ­¢å¤šä¸ªç”Ÿäº§è€…åŒæ—¶ç”¨åŒä¸€ Transactional ID å¯¼è‡´ç«æ€ï¼ˆfencingï¼‰ã€‚ ä½œç”¨ï¼šå®ç°è·¨ä¼šè¯å¹‚ç­‰å†™å…¥ï¼šæ—§äº‹åŠ¡è‹¥æœªå®Œæˆä¼šè¢«ä¸»åŠ¨å›æ»šï¼›æ–°ä¼šè¯è·å¾—æ›´é«˜ epochï¼Œæ—§ä¼šè¯è¯·æ±‚å›  epoch è¾ƒä½å°†è¢«æ‹’ç»ï¼Œä»è€Œä¿è¯åªæœ‰å½“å‰æ´»è·ƒä¼šè¯èƒ½æäº¤ã€‚ äº‹åŠ¡åè°ƒè€… (Transaction Coordinator)\nè®¾è®¡ç†å¿µï¼šé›†ä¸­ç®¡ç†äº‹åŠ¡å…ƒæ•°æ®ï¼ˆTransactional IDã€PIDã€epochã€æ¶‰åŠåˆ†åŒºåˆ—è¡¨ã€æ¶ˆè´¹ä½ç‚¹ä¿¡æ¯ç­‰ï¼‰ï¼Œå¹¶åœ¨äº‹åŠ¡å®Œæˆåç»Ÿä¸€è´Ÿè´£å¹¿æ’­æäº¤/å›æ»šæ§åˆ¶æ¶ˆæ¯ã€‚\nè§£å†³é—®é¢˜ï¼šåœ¨å¤šåˆ†åŒºå†™å…¥ã€å¤šä¸ªæ“ä½œåŸå­æ€§éœ€æ±‚ä¸‹ï¼Œé¿å…å®¢æˆ·ç«¯å¯¹æ¯ä¸ªåˆ†åŒº Leader é€ä¸€å‘é€â€œæäº¤/å›æ»šâ€å‘½ä»¤ï¼›ä¹Ÿä¾¿äºåœ¨åè°ƒè€…æ•…éšœåˆ‡æ¢æ—¶é€šè¿‡é›†ä¸­æ—¥å¿—æ¢å¤ã€‚\nä½œç”¨ï¼š\nåˆ†é…ä¸ç®¡ç† PIDï¼ˆä¸ ProducerIdManager äº¤äº’ï¼Œä» ZooKeeper æˆ–å†…éƒ¨æœºåˆ¶è·å– ID æ®µï¼Œå¹¶ç»´æŠ¤æœ€æ–°çŠ¶æ€ï¼‰ã€‚ è·Ÿè¸ªäº‹åŠ¡æ¶‰åŠçš„æ‰€æœ‰ Topic-Partitionï¼šåœ¨å‘é€äº‹åŠ¡æ¶ˆæ¯å‰ï¼Œå®¢æˆ·ç«¯é€šè¿‡ AddPartitionsToTxnRequest é€šçŸ¥åè°ƒè€…ï¼Œåè°ƒè€…æŒä¹…åŒ–åˆ° __transaction_stateã€‚ è·Ÿè¸ªæ¶ˆè´¹ä½ç‚¹æäº¤ä¿¡æ¯ï¼šé€šè¿‡ AddOffsetsToTxnRequest åŒæ­¥è¦æäº¤çš„ __consumer_offsets åˆ†åŒºä¿¡æ¯åˆ°äº‹åŠ¡å…ƒæ•°æ®ï¼Œå¹¶æœ€ç»ˆå‘ Group Coordinator æäº¤ã€‚ æäº¤/å›æ»šå†³ç­–ï¼šæ¥æ”¶ EndTxnRequest åï¼Œæ›´æ–° transaction_state åˆ° PREPARE* çŠ¶æ€ï¼Œå†å¼‚æ­¥å‘å„åˆ†åŒº Leader å‘é€ WriteTxnMarker æ§åˆ¶æ¶ˆæ¯ï¼›å¾…æ‰€æœ‰æ§åˆ¶æ¶ˆæ¯æˆåŠŸæŒä¹…åŒ–ï¼Œå†æ›´æ–°çŠ¶æ€åˆ° COMPLETE* å¹¶é‡Šæ”¾èµ„æºã€‚ HA ä¸æŒä¹…åŒ–ï¼šåˆ©ç”¨å†…éƒ¨ __transaction_state compacted Topicï¼Œå¤šå‰¯æœ¬ä¿è¯æ—¥å¿—ä¸ä¸¢å¤±ï¼›æ•…éšœåˆ‡æ¢åå¯ä»æ—¥å¿—æ¢å¤æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡çŠ¶æ€ã€‚ å®šæœŸå›æ»šè¶…æ—¶äº‹åŠ¡ã€æ¸…ç†è¿‡æœŸäº‹åŠ¡ IDã€‚ åœ¨æ•…éšœåœºæ™¯ä¸­æ¥ç®¡ï¼šè‹¥å®¢æˆ·ç«¯å´©æºƒä½† EndTxnRequest å·²åˆ°è¾¾åè°ƒè€…ï¼Œåè°ƒè€…å¯ç»§ç»­å®Œæˆæäº¤/å›æ»šæµç¨‹ï¼›è‹¥ EndTxnRequest æœªåˆ°è¾¾ï¼Œåˆ™è¶…æ—¶è‡ªåŠ¨å›æ»šã€‚ å†…éƒ¨äº‹åŠ¡çŠ¶æ€ Topic (__transaction_state)\nè®¾è®¡ç†å¿µï¼šæŒä¹…åŒ–äº‹åŠ¡å…ƒæ•°æ®ï¼ˆTransactional ID â†’ å½“å‰çŠ¶æ€ã€PID+epochã€æ¶‰åŠåˆ†åŒºé›†åˆã€æäº¤ä½ç‚¹ä¿¡æ¯ç­‰ï¼‰ï¼Œç±»ä¼¼ä¸€ä¸ªåˆ†å¸ƒå¼ KV å­˜å‚¨ã€‚ è§£å†³é—®é¢˜ï¼šæä¾› HA æ¢å¤èƒ½åŠ›ï¼šåè°ƒè€…æ•…éšœåå¯ä»è¯¥ Topic è¯»å–æœ€æ–°çŠ¶æ€ï¼›ä¿è¯äº‹åŠ¡çŠ¶æ€æœºåœ¨é›†ç¾¤é‡å¯æˆ–åˆ‡æ¢æ—¶ä¸ä¸¢å¤±ã€‚ ä½œç”¨ï¼šè®°å½•äº‹åŠ¡çŠ¶æ€è½¬ç§»ï¼ˆEMPTY â†’ ONGOING â†’ PREPARE_COMMIT/ABORT â†’ COMPLETE_COMMIT/ABORT â†’ DEADï¼‰ï¼Œå…³é”®èŠ‚ç‚¹æŒä¹…åŒ–ï¼›åè°ƒè€…é€šè¿‡è¯¥æ—¥å¿—é©±åŠ¨åç»­æ§åˆ¶æ¶ˆæ¯å‘é€ä¸èµ„æºæ¸…ç†ã€‚ æ§åˆ¶æ¶ˆæ¯ (Transaction Markers, WriteTxnMarkerRequest)\nè®¾è®¡ç†å¿µï¼šå°†â€œæäº¤â€æˆ–â€œå›æ»šâ€å†³ç­–ä»¥æ§åˆ¶æ¶ˆæ¯å½¢å¼å†™å…¥æ™®é€šæ—¥å¿—ï¼Œä¸ä¸šåŠ¡æ¶ˆæ¯å…±å­˜ï¼›æ¶ˆè´¹ç«¯è¯»å–åˆ°æ§åˆ¶æ¶ˆæ¯åï¼Œå¾—çŸ¥å¯¹åº”äº‹åŠ¡æ¶ˆæ¯æ˜¯å¦å¯è§ã€‚ è§£å†³é—®é¢˜ï¼šä¸€æ–¹é¢é¿å…åœ¨ Broker å†…å­˜ä¸­ä¸´æ—¶ç¼“å­˜å¤§é‡æœªå®Œæˆæ¶ˆæ¯ï¼›å¦ä¸€æ–¹é¢è®©æ¶ˆè´¹è€…é€šè¿‡è¯»å–æ—¥å¿—ä¸­çš„æ§åˆ¶æ¶ˆæ¯æ¥åˆ¤æ–­äº‹åŠ¡è¾¹ç•Œã€‚ ä½œç”¨ï¼šäº‹åŠ¡åè°ƒè€…åœ¨ PREPARE é˜¶æ®µå‘å„åˆ†åŒº Leader å‘é€ WriteTxnMarkerï¼ŒLeader å°†æ­¤å†™å…¥æ—¥å¿—ã€‚æ¶ˆè´¹è€…åœ¨ read_committed æ¨¡å¼ä¸‹ï¼Œè§åˆ°æ§åˆ¶æ¶ˆæ¯åå†å†³å®šå…è®¸çœ‹åˆ°ä¹‹å‰çš„æ¶ˆæ¯æˆ–å¿½ç•¥ï¼ˆä¾æ®æäº¤æˆ–å›æ»šï¼‰ã€‚åè°ƒè€…ä¼šä¸æ–­é‡è¯•ç›´åˆ°æ‰€æœ‰åˆ†åŒºæˆåŠŸå†™å…¥æ§åˆ¶æ¶ˆæ¯ï¼Œä¿è¯åŸå­æäº¤/å›æ»šã€‚ ProducerIdManager / PID Snapshot æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šæœåŠ¡ç«¯ç»´æŠ¤åˆ†é…ç»™å„ Transactional ID çš„ PID æ®µï¼Œå¹¶åœ¨å†…å­˜ä¸­è·Ÿè¸ªå½“å‰æ´»è·ƒ PID â†’ åˆ†åŒºå†…æœ€é«˜åºåˆ—å·æ˜ å°„ï¼›é€šè¿‡å®šæœŸå¿«ç…§å‡å°‘é‡å¯æ¢å¤æ—¶è¯»å–å…¨é‡æ—¥å¿—çš„å¼€é”€ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…æ¯æ¬¡ Broker é‡å¯æ—¶æ‰«æå…¨éƒ¨æ—¥å¿—ä»¥é‡å»º PID åºåˆ—å·æ˜ å°„ï¼›æå‡æ¢å¤é€Ÿåº¦ï¼›åŒæ—¶ç¡®ä¿åœ¨æ•…éšœæ¢å¤åä¾ç„¶èƒ½è¿›è¡Œå¹‚ç­‰åˆ¤é‡ã€‚ ä½œç”¨ï¼šåœ¨ Broker å¯åŠ¨æˆ– Leader åˆ‡æ¢æ—¶ï¼Œé€šè¿‡ PID Snapshot å’Œæ—¥å¿—ä¸­è®°å½•æ¢å¤ ProducerStateï¼›åœ¨è¿è¡Œæ—¶å¯¹ ProduceRequest è¿›è¡Œåºåˆ—å·æ ¡éªŒï¼›æ”¯æŒäº‹åŠ¡ä¸­å¯¹é‡å¤æ‰¹æ¬¡è¯†åˆ«ã€‚ Group Coordinator / __consumer_offsets ä¸ sendOffsetsToTransaction è®¾è®¡\nè®¾è®¡ç†å¿µï¼šåœ¨äº‹åŠ¡ä¸­ï¼Œæ¶ˆè´¹è€…æäº¤ offset éœ€ä¸è¾“å‡ºæ¶ˆæ¯ä¸€åŒåŸå­æäº¤ï¼›å€ŸåŠ© Producer ä½œä¸ºå®¢æˆ·ç«¯åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­å…ˆå‘äº‹åŠ¡åè°ƒè€…åŒæ­¥å°†è¦æäº¤çš„ offset åˆ†åŒºï¼Œå†æ­£å¼å‘ Group Coordinator æäº¤ä½†ä¸æ›´æ–°ç¼“å­˜ï¼Œå¾…äº‹åŠ¡æäº¤åæ‰è®©æ¶ˆè´¹è€…çœ‹åˆ°æ–°ä½ç‚¹ã€‚\nè§£å†³é—®é¢˜ï¼šé¿å…å…ˆæäº¤ä½ç‚¹è€Œè¾“å‡ºæ¶ˆæ¯å›æ»šæ—¶å‡ºç°â€œä¸¢æ•°æ®â€æˆ–å…ˆè¾“å‡ºæ¶ˆæ¯è€Œä½ç‚¹æœªæäº¤æ—¶å´©æºƒå¯¼è‡´â€œé‡å¤å¤„ç†â€ã€‚\nä½œç”¨ï¼š\nç”Ÿäº§è€…è°ƒç”¨ sendOffsetsToTransaction()ï¼Œå…ˆå‘ AddOffsetsToTxnRequest ç»™äº‹åŠ¡åè°ƒè€…ï¼Œåè°ƒè€…å°†è¯¥ offset åˆ†åŒºä¿¡æ¯åŠ å…¥äº‹åŠ¡å…ƒæ•°æ®ï¼›æ”¶åˆ°å“åº”åï¼Œå†å‘ TxnOffsetCommitRequest ç»™ Group Coordinatorï¼Œå°† offset å†™å…¥ __consumer_offsets æ—¥å¿—ä½†ä¸æ›´æ–°ç¼“å­˜ï¼›åªæœ‰å½“äº‹åŠ¡æäº¤å®Œæˆï¼Œåè°ƒè€…æ‰èƒ½å°†è¯¥ä½ç‚¹å¯¹æ¶ˆè´¹è€…å¯è§ã€‚ Group Coordinator æ¥æ”¶åŒ…å« PID/epoch çš„ TxnOffsetCommitRequestï¼ŒæŒä¹…åŒ– offsetï¼›ä½†ç›´åˆ°äº‹åŠ¡å®Œæˆï¼Œä¸ä¼šæ›´æ–°æ¶ˆè´¹è¿›åº¦ç¼“å­˜ï¼Œä¿è¯åŸå­æ€§ã€‚ Last Stable Offset (LSO) ä¸ read_committed æ¶ˆè´¹æ¨¡å¼\nè®¾è®¡ç†å¿µï¼šåœ¨æ¶ˆè´¹ç«¯åªè¿”å›â€œå·²æäº¤ä¸”ç¨³å®šâ€çš„æ¶ˆæ¯ï¼Œå±è”½å°šæœªæäº¤çš„äº‹åŠ¡æ¶ˆæ¯ï¼›ç”¨ LSO æ ‡è®°é¦–ä¸ªæœªå®Œæˆäº‹åŠ¡çš„èµ·å§‹ä½ç½®ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…æ¶ˆè´¹è€…çœ‹åˆ°æœªå®Œæˆæˆ–å›æ»šäº‹åŠ¡çš„æ•°æ®ï¼›åŒæ—¶é¿å…æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯å› ç¼“å­˜æ‰€æœ‰æœªæäº¤æ¶ˆæ¯å¯¼è‡´ OOM æˆ–æ€§èƒ½ä¸‹é™ã€‚ ä½œç”¨ï¼šBroker åœ¨ read_committed æ¨¡å¼ä¸‹æ ¹æ®åˆ†åŒº LSOï¼Œåªè¿”å› â‰¤ LSO çš„æ¶ˆæ¯ï¼›å½“é•¿äº‹åŠ¡é˜»å¡åç»­çŸ­äº‹åŠ¡ï¼ŒçŸ­äº‹åŠ¡å³ä½¿å·²æäº¤ï¼Œä¹Ÿæš‚æ—¶ä¸è¢«è¿”å›ï¼Œä½†å¯åœ¨åç»­é‡æ–°è®¡ç®— LSO åæ¶ˆè´¹ï¼›ç»“åˆ .txnindex æå‰è¿‡æ»¤å›æ»šäº‹åŠ¡åŒºé—´ï¼Œå‡è½»å®¢æˆ·ç«¯å¤„ç†å‹åŠ›ã€‚ .txnindex å›æ»šäº‹åŠ¡ç´¢å¼•\nè®¾è®¡ç†å¿µï¼šBroker ä¸ºæ¯ä¸ªåˆ†åŒºç»´æŠ¤å·²å›æ»šäº‹åŠ¡å¯¹åº”çš„æ—¥å¿—èµ·æ­¢ä½ç‚¹ç´¢å¼•ï¼Œå¹¶æŒä¹…åŒ–äº .txnindex æ–‡ä»¶ã€‚ è§£å†³é—®é¢˜ï¼šè®©æ¶ˆè´¹ç«¯åœ¨æ‹‰å–æ—¶å¯ä»¥æå‰è·çŸ¥å“ªäº›åŒºé—´çš„æ•°æ®å±äºå·²å›æ»šäº‹åŠ¡ï¼Œä»è€Œè·³è¿‡ï¼Œæ— éœ€å®¢æˆ·ç«¯ç¼“å­˜åç»­ç­‰å¾…æ§åˆ¶æ¶ˆæ¯ã€‚ ä½œç”¨ï¼šæé«˜æ¶ˆè´¹æ•ˆç‡ï¼Œå‡å°‘å› ç­‰å¾…æ§åˆ¶æ¶ˆæ¯è€Œå ç”¨å†…å­˜æˆ–é‡å¤æ‹‰å–çš„å¼€é”€ã€‚ äº‹åŠ¡è¶…æ—¶ä¸è¿‡æœŸæ¸…ç†\nè®¾è®¡ç†å¿µï¼šè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼ˆtransaction.timeout.msï¼‰ä»¥é™åˆ¶å®¢æˆ·ç«¯å®Œæˆäº‹åŠ¡çš„æœ€é•¿æ—¶é™ï¼›åè°ƒè€…æœ‰æœ€å¤§å¯æ¥å—è¶…æ—¶ max.transaction.timeout.msï¼›æ­¤å¤–é€šè¿‡ transaction.id.expiration.ms æ¸…ç†é•¿æœŸä¸æ´»è·ƒçš„äº‹åŠ¡ IDã€‚ è§£å†³é—®é¢˜ï¼šé¿å…äº‹åŠ¡æ— é™æœŸæŒ‚èµ·å ç”¨èµ„æºï¼›ç¡®ä¿æ•…éšœæ¢å¤åèƒ½åŠæ—¶å›æ»šæˆ–é‡Šæ”¾ï¼›é‡Šæ”¾ PID èµ„æºï¼Œé˜²æ­¢å…ƒæ•°æ®è†¨èƒ€ã€‚ ä½œç”¨ï¼šåè°ƒè€…å®šæœŸæ‰«æå¹¶å›æ»šè¶…æ—¶äº‹åŠ¡ï¼›æ¸…ç†è¿‡æœŸäº‹åŠ¡ ID \u0026amp; PID æ˜ å°„ï¼Œä¿è¯ç³»ç»Ÿå¥åº·å’Œèµ„æºå›æ”¶ã€‚ å†…éƒ¨ HA ä¸æ•…éšœæ¢å¤è®¾è®¡\nè®¾è®¡ç†å¿µï¼šåˆ©ç”¨ Kafka æœ¬èº«å¤šå‰¯æœ¬ã€Leader é€‰ä¸¾æœºåˆ¶ï¼Œä»¥åŠå†…éƒ¨ compacted Topicsï¼ˆå¦‚ __transaction_stateã€__consumer_offsetsï¼‰ï¼Œä¿è¯åœ¨ Broker æˆ–åè°ƒè€…æ•…éšœåå¯å¿«é€Ÿæ¢å¤çŠ¶æ€ã€‚\nè§£å†³é—®é¢˜ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä»»ä½•èŠ‚ç‚¹å´©æºƒéƒ½ä¸åº”å¯¼è‡´äº‹åŠ¡çŠ¶æ€ä¸ä¸€è‡´æˆ–ä¸¢å¤±ï¼Œä¿è¯ Exactly-Once è¯­ä¹‰åœ¨æ•…éšœåœºæ™¯ä¸‹ä¾ç„¶æˆç«‹ã€‚\nä½œç”¨ï¼š\nåè°ƒè€…å¤±è´¥åï¼Œæ–°ä»»åè°ƒè€…è¯»å– __transaction_state æ¢å¤æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡çŠ¶æ€å¹¶ç»§ç»­å‘é€æ§åˆ¶æ¶ˆæ¯æˆ–å›æ»šã€‚ åˆ†åŒº Leader å¤±è´¥åï¼Œé€šè¿‡æ—¥å¿—ä¸ PID Snapshot æ¢å¤ ProducerStateï¼›åè°ƒè€…é‡è¯• WriteTxnMarkerï¼›æ¶ˆè´¹è€…ç»§ç»­æ¶ˆè´¹å·²æäº¤æ•°æ®ã€‚ Group Coordinator ç»´æŠ¤ __consumer_offsets å¤šå‰¯æœ¬ä»¥æ¢å¤ offset æäº¤ã€‚ å®¢æˆ·ç«¯çŠ¶æ€æœºç®¡ç†\nè®¾è®¡ç†å¿µï¼šåœ¨ Producer å®¢æˆ·ç«¯å†…éƒ¨ç»´æŠ¤ä¸€ç»„çŠ¶æ€ï¼ˆUNINITIALIZED â†’ INITIALIZING â†’ READY â†’ IN_TRANSACTION â†’ COMMITTING/ABORTING_TRANSACTION â†’ \u0026hellip;ï¼‰ï¼Œç¡®ä¿åœ¨ä¸åŒé˜¶æ®µåªæœ‰åˆæ³•æ“ä½œï¼Œå¹¶åœ¨å¼‚å¸¸æ—¶è¿›å…¥ ABORTABLE_ERROR æˆ– FATAL_ERRORï¼Œè§¦å‘å›æ»šæˆ–å…³é—­ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…å®¢æˆ·ç«¯åœ¨ä¸åˆé€‚æ—¶æœºè°ƒç”¨äº‹åŠ¡ APIï¼›åœ¨å‡ºé”™æ—¶èƒ½åŠæ—¶å›æ»šå¹¶æ¸…ç†æœ¬åœ°çŠ¶æ€ï¼›é…åˆæœåŠ¡ç«¯çŠ¶æ€ä¸€è‡´æ€§ã€‚ ä½œç”¨ï¼šåœ¨è°ƒç”¨ initTransactionsã€beginTransactionã€send/sendOffsetsToTransactionã€commitTransaction/abortTransaction å„é˜¶æ®µï¼Œé€šè¿‡çŠ¶æ€è½¬æ¢ä¸æ ¡éªŒä¿è¯æ­£ç¡®è°ƒç”¨é¡ºåºï¼›åœ¨å¼‚å¸¸æˆ–è¶…æ—¶åœºæ™¯è‡ªåŠ¨å›æ»šæˆ–æŠ¥å‘Šé”™è¯¯ã€‚ æ¶ˆè´¹æ¨¡å¼åŒºåˆ†ï¼ˆread_uncommitted vs read_committedï¼‰\nè®¾è®¡ç†å¿µï¼šæä¾›ä¸¤ç§æ¶ˆè´¹è¯­ä¹‰ï¼šé»˜è®¤ read_uncommittedï¼ˆå¯è§æ‰€æœ‰æ¶ˆæ¯ï¼ŒåŒ…æ‹¬æœªæäº¤äº‹åŠ¡æ¶ˆæ¯ï¼‰ï¼›read_committedï¼ˆä»…è§å·²æäº¤ä¸”ç¨³å®šçš„ï¼‰ã€‚ è§£å†³é—®é¢˜ï¼šæ”¯æŒä¸åŒåº”ç”¨éœ€æ±‚ï¼šæŸäº›åœºæ™¯å¯èƒ½å®¹å¿çœ‹åˆ°æœªæäº¤æ¶ˆæ¯ï¼ˆå¦‚å†…éƒ¨åˆ†æï¼‰ï¼›å¤šæ•°åœºæ™¯éœ€è¦ Exactly-Once è¯­ä¹‰ï¼Œåˆ™ä½¿ç”¨ read_committedï¼Œå±è”½æœªæäº¤æˆ–å›æ»šæ•°æ®ã€‚ ä½œç”¨ï¼šåœ¨å®¢æˆ·ç«¯é…ç½®ä¸­è®¾ç½® isolation.level; Broker æ ¹æ® LSO åŠæ§åˆ¶æ¶ˆæ¯å†³å®šè¿”å›å“ªäº›æ¶ˆæ¯ã€‚ ç”Ÿäº§è€…ä¸åè°ƒè€…çš„äº¤äº’åè®®è®¾è®¡ï¼ˆå„ç§ Request ç±»å‹ï¼‰\nè®¾è®¡ç†å¿µï¼šé€šè¿‡ä¸€ç³»åˆ— Request/Responseï¼šFindCoordinatorRequestã€InitProducerIdRequestã€AddPartitionsToTxnRequestã€ProduceRequestï¼ˆæºå¸¦ PID+åºåˆ—å·+äº‹åŠ¡æ ‡è¯†ï¼‰ã€AddOffsetsToTxnRequestã€TxnOffsetCommitRequestã€EndTxnRequestã€WriteTxnMarkerRequestï¼ˆç”±åè°ƒè€…å‘èµ·ï¼‰ã€ç¡®ä¿æ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®ç›®çš„ã€å¯æŒä¹…åŒ–ä¸å¯é‡è¯•ã€‚ è§£å†³é—®é¢˜ï¼šç»“æ„åŒ–å®šä¹‰å„é˜¶æ®µäº¤äº’ï¼Œä½¿å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯¹äº‹åŠ¡å…ƒæ•°æ®æ›´æ–°ã€æ¶ˆæ¯å†™å…¥ã€ä½ç‚¹æäº¤ç­‰éƒ½æœ‰æ¸…æ™°æµç¨‹ï¼›æ”¯æŒé‡è¯•ä¸æ•…éšœæ¢å¤ï¼›é¿å…åè®®æ··ä¹±ã€‚ ä½œç”¨ï¼šå„è¯·æ±‚æºå¸¦å¿…è¦æ ‡è¯†ï¼ˆTransactional IDã€PIDã€epochã€åˆ†åŒºåˆ—è¡¨ã€offsetã€commit/abort æ ‡å¿—ç­‰ï¼‰ï¼ŒæœåŠ¡ç«¯å¯¹åº”å¤„ç†å¹¶æŒä¹…åŒ–ï¼Œåè°ƒè€…é›†ä¸­ç®¡ç†åç»­æ­¥éª¤ã€‚ ZooKeeper æˆ–å†…éƒ¨æœºåˆ¶ç®¡ç† PID æ®µåˆ†é…\nè®¾è®¡ç†å¿µï¼šä¸ºäº§ç”Ÿå…¨å±€å”¯ä¸€çš„ PIDï¼Œåè°ƒè€…é€šè¿‡ ProducerIdManager ä» ZooKeeperï¼ˆæˆ–æ–°ç‰ˆ Kafka å¯å†…ç½®æ›¿ä»£ï¼‰ç”³è¯· ID æ®µï¼›æ¯æ¬¡ç”³è¯·ä¸€æ®µï¼ˆå¦‚ 1000 IDsï¼‰ï¼Œå‡å°‘é¢‘ç¹äº¤äº’ã€‚ è§£å†³é—®é¢˜ï¼šç¡®ä¿ PID å”¯ä¸€ï¼›é«˜æ•ˆåˆ†é…ï¼›æ”¯æŒæ‰©å±•ä¸ HAã€‚ ä½œç”¨ï¼šåè°ƒè€…åœ¨ InitPidRequest é˜¶æ®µåˆ†é… PIDï¼Œå¹¶è®°å½•æœ€æ–°åˆ†é…åŒºé—´ï¼›å®¢æˆ·ç«¯è·å¾— PID åç”¨äºåç»­å¹‚ç­‰ä¸äº‹åŠ¡ï¼›Broker é‡å¯æ¢å¤æ—¶ä¹Ÿéœ€æ¢å¤ PID-åºåˆ—å·æ˜ å°„ã€‚ äº‹åŠ¡ Marker å‘é€ä¸é‡è¯•æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šåè°ƒè€…åœ¨ PREPARE é˜¶æ®µå‘å‡º WriteTxnMarkerRequestï¼Œå¹¶ä¸æ–­é‡è¯•ç›´è‡³æ‰€æœ‰åˆ†åŒºç¡®è®¤æˆåŠŸåï¼Œæ‰æ›´æ–°çŠ¶æ€ä¸º COMPLETEï¼›ä»»ä½•å¤±è´¥å¯¼è‡´æ— é™é‡è¯•æˆ–æ•…éšœåˆ‡æ¢åç»§ç»­é‡è¯•ã€‚ è§£å†³é—®é¢˜ï¼šä¿è¯äº‹åŠ¡æ¶ˆæ¯çš„æäº¤æˆ–å›æ»šé€šçŸ¥å¯é é€è¾¾ï¼Œå³ä½¿åœ¨ç½‘ç»œæˆ– Broker æ•…éšœæ—¶äº¦å¯æœ€ç»ˆä¸€è‡´ï¼›é¿å…åŠæäº¤çŠ¶æ€å¯¼è‡´æ•°æ®å¯è§æ€§é”™è¯¯ã€‚ ä½œç”¨ï¼šåè°ƒè€…å†…éƒ¨ç»´æŠ¤å¾…å‘é€é˜Ÿåˆ—ï¼ˆmarkersQueuePerBrokerï¼‰ï¼Œå¯¹å¤±è´¥åˆ†åŒºé‡æ–° enqueueï¼›æ•´ä½“æˆåŠŸåè§¦å‘äº‹åŠ¡å®Œæˆæ¸…ç†ï¼›è‹¥åè°ƒè€…è‡ªèº«å¤±è´¥ï¼Œæ–°åè°ƒè€…ä» __transaction_state æ¢å¤å¹¶ç»§ç»­å‘é€ã€‚ äº‹åŠ¡çŠ¶æ€æœºä¸çŠ¶æ€è½¬ç§»\nè®¾è®¡ç†å¿µï¼šåœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯åˆ†åˆ«ç»´æŠ¤æ˜ç¡®çŠ¶æ€æœºï¼Œæè¿°ç”Ÿå‘½å‘¨æœŸï¼›çŠ¶æ€è½¬æ¢æ—¶ä¼´éšæŒä¹…åŒ–æˆ–å¿…è¦çš„äº¤äº’ã€‚\nè§£å†³é—®é¢˜ï¼šç¡®ä¿ä»…åœ¨åˆæ³•é˜¶æ®µæ‰§è¡Œå¯¹åº”æ“ä½œï¼›åœ¨å¼‚å¸¸æˆ–æ•…éšœæ—¶èƒ½æ ¹æ®å½“å‰çŠ¶æ€é‡‡å–å›æ»šã€é‡è¯•æˆ–æ¸…ç†ï¼›ä¾¿äºç†è§£å’Œç»´æŠ¤ã€‚\nä½œç”¨ï¼š\næœåŠ¡ç«¯çŠ¶æ€ï¼šEMPTY â†’ ONGOING â†’ PREPARE_COMMIT / PREPARE_ABORT â†’ COMPLETE_COMMIT / COMPLETE_ABORT â†’ DEAD â†’ (æ¸…ç†)ï¼›åè°ƒè€…æ ¹æ® EndTxnRequestã€è¶…æ—¶æ£€æµ‹ç­‰è¿›è¡ŒçŠ¶æ€è½¬ç§»å¹¶æŒä¹…åŒ–ã€‚ å®¢æˆ·ç«¯çŠ¶æ€ï¼šUNINITIALIZED â†’ INITIALIZING â†’ READY â†’ IN_TRANSACTION â†’ COMMITTING_TRANSACTION / ABORTING_TRANSACTION â†’ READY æˆ– ABORTABLE_ERROR / FATAL_ERRORï¼›ä¿è¯ API è°ƒç”¨é¡ºåºåŠå¼‚å¸¸å¤„ç†ã€‚ æ€»ç»“ï¼šKafka åœ¨æµå¤„ç†åœºæ™¯ä¸‹ç«¯åˆ°ç«¯ Exactly-Once èƒ½åŠ›ï¼Œæ ¸å¿ƒä¾èµ–äºå¹‚ç­‰ç”Ÿäº§è€…ï¼ˆPID+åºåˆ—å·+åˆ¤é‡ï¼‰ã€äº‹åŠ¡æœºåˆ¶ï¼ˆTransactional ID+Epoch+Transaction Coordinator+å†…éƒ¨ __transaction_state æ—¥å¿—+æ§åˆ¶æ¶ˆæ¯+LSO/read_committed+.txnindexï¼‰ã€ä»¥åŠæ¶ˆè´¹ç«¯é…åˆï¼ˆsendOffsetsToTransactionã€read_committedï¼‰ã€‚å„è®¾è®¡æ¨¡å—ç›¸äº’åä½œï¼Œé€šè¿‡åˆ†å±‚åè®®ä¸æŒä¹…åŒ–æœºåˆ¶ï¼Œåœ¨åˆ†å¸ƒå¼ã€æ•…éšœã€ç½‘ç»œæŠ–åŠ¨åœºæ™¯ä¸‹ä»èƒ½æä¾›æ­£ç¡®çš„æ°å¥½ä¸€æ¬¡å¤„ç†è¯­ä¹‰ã€‚\n"},{"id":25,"href":"/docs/shortcodes/katex/","title":"KaTeX","section":"Shortcodes","content":"\rKaTeX\r#\rKaTeX shortcode let you render math typesetting in markdown document. See KaTeX\nExample\r#\r{{\u0026lt; katex display=true \u0026gt;}} f(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi {{\u0026lt; /katex \u0026gt;}} \\[\rf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\r\\]\rDisplay Mode Example\r#\rHere is some inline example: \\(\\pi(x)\\)\r, rendered in the same line. And below is display example, having display: block \\[\rf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\r\\]\rText continues here.\n"},{"id":26,"href":"/docs/study/frontend/react-knowledge/","title":"React çŸ¥è¯†","section":"å‰ç«¯","content":"This is an extensive list covering almost every aspect of React development! I\u0026rsquo;ll provide concise, effective answers for each, suitable for an interview context. Remember to personalize these answers with your own project examples and specific experiences to make them more impactful.\nğŸ’¡ React æ ¸å¿ƒåŸºç¡€\r#\rReact çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\r#\rReact çš„æ ¸å¿ƒåŸç†æ˜¯å£°æ˜å¼ UI å’Œç»„ä»¶åŒ–ã€‚æˆ‘ä»¬é€šè¿‡å£°æ˜å¼åœ°æè¿° UI åº”è¯¥é•¿ä»€ä¹ˆæ ·ï¼ˆç»™å®šçŠ¶æ€ï¼‰ï¼ŒReact ä¼šè´Ÿè´£æ›´æ–° UI ä»¥åŒ¹é…è¿™ä¸ªå£°æ˜ã€‚å®ƒå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶ç®¡ç†è‡ªå·±çš„çŠ¶æ€å¹¶æ¸²æŸ“ç‰¹å®šçš„ UI ç‰‡æ®µã€‚é€šè¿‡è™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•ï¼ŒReact é«˜æ•ˆåœ°æ›´æ–°çœŸå® DOMï¼Œåªä¿®æ”¹å¿…è¦çš„éƒ¨åˆ†ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚\nä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼Ÿå®ƒæ€ä¹ˆæå‡æ€§èƒ½ï¼Ÿ\r#\rè™šæ‹Ÿ DOM (Virtual DOM) æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript å¯¹è±¡æ ‘ï¼Œå®ƒæ˜¯çœŸå® DOM ç»“æ„çš„ä¸€ä¸ªå†…å­˜è¡¨ç¤ºã€‚å½“ç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼Œç„¶åå°†æ–°æ—§ä¸¤æ£µè™šæ‹Ÿ DOM æ ‘è¿›è¡Œ Diff ç®—æ³•æ¯”è¾ƒï¼Œæ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„æœ€å°å·®å¼‚ã€‚æœ€åï¼ŒReact åªå°†è¿™äº›å·®å¼‚åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚\nè™šæ‹Ÿ DOM æå‡æ€§èƒ½ä½“ç°åœ¨ï¼š\nå‡å°‘ç›´æ¥æ“ä½œçœŸå® DOM çš„æ¬¡æ•°ï¼š çœŸå® DOM æ“ä½œéå¸¸æ˜‚è´µï¼Œè™šæ‹Ÿ DOM å…è®¸æ‰¹é‡æ›´æ–°ã€‚ æœ€å°åŒ– DOM æ“ä½œèŒƒå›´ï¼š Diff ç®—æ³•ç¡®ä¿åªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„æœ€å°éƒ¨åˆ†ï¼Œé¿å…ä¸å¿…è¦çš„é‡ç»˜å’Œå›æµã€‚ è·¨å¹³å°èƒ½åŠ›ï¼š è™šæ‹Ÿ DOM ä¸ä¾èµ–äºç‰¹å®šçš„æ¸²æŸ“ç¯å¢ƒï¼Œä½¿å…¶èƒ½ç”¨äº Nativeã€WebGL ç­‰ã€‚ React ç»„ä»¶æœ‰å“ªäº›ï¼Ÿå‡½æ•°ç»„ä»¶ vs ç±»ç»„ä»¶åŒºåˆ«ï¼Ÿ\r#\rReact ç»„ä»¶ä¸»è¦æœ‰å‡½æ•°ç»„ä»¶ (Functional Components) å’Œ ç±»ç»„ä»¶ (Class Components)ã€‚\nå‡½æ•°ç»„ä»¶ vs ç±»ç»„ä»¶åŒºåˆ«ï¼š\nç‰¹ç‚¹ å‡½æ•°ç»„ä»¶ (Hooks ä¹‹å‰) å‡½æ•°ç»„ä»¶ (Hooks ä¹‹å) ç±»ç»„ä»¶ å®šä¹‰ çº¯å‡½æ•°ï¼Œæ¥æ”¶ props è¿”å› JSX çº¯å‡½æ•°ï¼Œæ¥æ”¶ props è¿”å› JSX ES6 Classï¼Œç»§æ‰¿ React.Component çŠ¶æ€ æ— çŠ¶æ€ (Stateless) é€šè¿‡ useState Hook ç®¡ç†çŠ¶æ€ é€šè¿‡ this.state å’Œ this.setState ç®¡ç† ç”Ÿå‘½å‘¨æœŸ æ— ç”Ÿå‘½å‘¨æœŸæ–¹æ³• é€šè¿‡ useEffect Hook æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸæ–¹æ³• æ‹¥æœ‰ componentDidMount ç­‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸæ–¹æ³• this æ—  this (ç®­å¤´å‡½æ•°é™¤å¤–) æ—  this å­˜åœ¨ thisï¼Œéœ€è¦å¤„ç† this ç»‘å®š æ€§èƒ½ ç†è®ºä¸Šæ›´è½»é‡ï¼Œæ½œåœ¨æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚è‡ªåŠ¨è®°å¿†åŒ–ï¼‰ ç†è®ºä¸Šæ›´è½»é‡ï¼Œé…åˆ useCallback/useMemo ä¼˜åŒ– ç›¸å¯¹é‡ï¼Œä¼˜åŒ–éœ€ shouldComponentUpdate ä»£ç é£æ ¼ æ›´ç®€æ´ï¼Œæ˜“äºæµ‹è¯•å’Œç†è§£ æ›´ç®€æ´ï¼Œæ˜“äºæµ‹è¯•å’Œç†è§£ ç›¸å¯¹ç¹çï¼Œéœ€è¦ç¼–å†™æ›´å¤šæ ·æ¿ä»£ç  æ¨èï¼š åœ¨ React 16.8 å¼•å…¥ Hooks åï¼Œå‡½æ•°ç»„ä»¶æˆä¸ºä¸»æµï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†åŒæ ·çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä»£ç æ›´ç®€æ´ã€å¯è¯»æ€§æ›´é«˜ï¼Œä¸”æ›´å®¹æ˜“è¿›è¡Œé€»è¾‘å¤ç”¨ï¼ˆè‡ªå®šä¹‰ Hookï¼‰ã€‚\nä»€ä¹ˆæ˜¯ JSXï¼Ÿå®ƒå¦‚ä½•è¢«å¤„ç†ï¼Ÿ\r#\rJSX (JavaScript XML) æ˜¯ä¸€ç§ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ JavaScript ä»£ç ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ç»“æ„ã€‚å®ƒå¹¶ä¸æ˜¯çœŸæ­£çš„ HTMLï¼Œè€Œæ˜¯ React æä¾›çš„ä¸€ç§è¯­æ³•ç³–ï¼Œç”¨äºæè¿° UI çš„ç»“æ„å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚\nJSX çš„å¤„ç†è¿‡ç¨‹ï¼š JSX ä¸ä¼šè¢«æµè§ˆå™¨ç›´æ¥è¯†åˆ«ã€‚å®ƒä¼šè¢« Babel ç­‰è½¬è¯‘å·¥å…·ç¼–è¯‘æˆæ™®é€šçš„ JavaScript å‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š \u0026lt;h1\u0026gt;Hello, {name}!\u0026lt;/h1\u0026gt; ä¼šè¢«ç¼–è¯‘æˆ React.createElement('h1', null, 'Hello, ', name, '!'); è¿™äº› React.createElement è°ƒç”¨ä¼šè¿”å›ä¸€ä¸ª JavaScript å¯¹è±¡ï¼ˆå³ React å…ƒç´ ï¼‰ï¼Œæè¿°äº† UI ç»“æ„ã€‚React å†æ ¹æ®è¿™äº› React å…ƒç´ æ„å»ºè™šæ‹Ÿ DOMã€‚\nReact ä¸­çš„çŠ¶æ€å’Œ props æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\r#\rProps (Properties) å’Œ State (çŠ¶æ€) æ˜¯ React ç»„ä»¶ä¸­ç”¨äºå­˜å‚¨æ•°æ®å¹¶é©±åŠ¨ UI æ›´æ–°çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä½†å®ƒä»¬æœ‰æœ¬è´¨åŒºåˆ«ï¼š\nç‰¹ç‚¹ Props State æ‰€æœ‰è€… ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ ç»„ä»¶è‡ªèº«ç®¡ç† å¯å˜æ€§ ä¸å¯å˜ (Immutable)ï¼šå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„ props å¯å˜ (Mutable)ï¼šç»„ä»¶å†…éƒ¨å¯ä»¥æ›´æ–°è‡ªå·±çš„ state ä¼ é€’æ–¹å¼ ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç»„ä»¶ é€šè¿‡ useState (å‡½æ•°ç»„ä»¶) æˆ– this.setState (ç±»ç»„ä»¶) æ›´æ–° ç›®çš„ ç”¨äºç»„ä»¶é—´é€šä¿¡ï¼Œé…ç½®ç»„ä»¶å¤–è§‚å’Œè¡Œä¸º å­˜å‚¨ç»„ä»¶å†…éƒ¨éšæ—¶é—´å˜åŒ–çš„æ•°æ®ï¼Œé©±åŠ¨è‡ªèº« UI æ›´æ–° key çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç”¨ indexï¼Ÿ\r#\råœ¨ React æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œkey æ˜¯ç”¨äºå”¯ä¸€æ ‡è¯†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„ç‰¹æ®Šå­—ç¬¦ä¸²å±æ€§ã€‚ å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å¸®åŠ© React é«˜æ•ˆåœ°è¯†åˆ«å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ã€è¢«æ·»åŠ æˆ–è¢«ç§»é™¤ã€‚\nkey çš„å·¥ä½œåŸç†ï¼š å½“åˆ—è¡¨é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact ä¼šä½¿ç”¨ key æ¥åŒ¹é…æ—§åˆ—è¡¨ä¸­çš„å…ƒç´ å’Œæ–°åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚å¦‚æœ key ç›¸åŒï¼ŒReact å°±è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªç»„ä»¶/å…ƒç´ ï¼Œä¼šå°è¯•å¤ç”¨å®ƒå¹¶åªæ›´æ–°å…¶å†…éƒ¨å±æ€§ï¼›å¦‚æœ key ä¸åŒï¼Œåˆ™ä¼šé”€æ¯æ—§ç»„ä»¶å¹¶åˆ›å»ºæ–°ç»„ä»¶ã€‚\nä¸ºä»€ä¹ˆä¸èƒ½ç”¨ index ä½œä¸º keyï¼Ÿ å½“åˆ—è¡¨é¡¹çš„é¡ºåºå¯èƒ½ä¼šæ”¹å˜ã€æ–°å¢æˆ–åˆ é™¤æ—¶ï¼Œä½¿ç”¨æ•°ç»„ç´¢å¼• (index) ä½œä¸º key ä¼šå¯¼è‡´é—®é¢˜ï¼š\næ€§èƒ½é—®é¢˜ï¼š å½“åˆ—è¡¨ä¸­é—´çš„æŸä¸ªå…ƒç´ è¢«åˆ é™¤æˆ–æ’å…¥æ—¶ï¼Œåç»­å…ƒç´ çš„ç´¢å¼•ä¼šå‘ç”Ÿå˜åŒ–ã€‚React ä¼šé”™è¯¯åœ°è®¤ä¸ºè¿™äº›å…ƒç´ æ˜¯æ–°çš„ï¼Œä»è€Œé”€ç”¨æ—§å…ƒç´ å¹¶é‡æ–°åˆ›å»ºæ–°å…ƒç´ ï¼Œå¯¼è‡´ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œå½±å“æ€§èƒ½ã€‚ çŠ¶æ€é”™ä¹±ï¼š å¦‚æœåˆ—è¡¨é¡¹å†…éƒ¨æœ‰è‡ªå·±çš„çŠ¶æ€ï¼ˆå¦‚è¾“å…¥æ¡†çš„ valueï¼‰ï¼Œä½¿ç”¨ index ä½œä¸º key å¯èƒ½ä¼šå¯¼è‡´çŠ¶æ€æ··æ·†ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ä¸­é—´é¡¹åï¼ŒåŸå…ˆæ’åœ¨åé¢çš„å…ƒç´ ä¼šâ€œæ¥æ›¿â€å‰é¢å…ƒç´ çš„ç´¢å¼•ï¼Œå¯èƒ½é”™è¯¯åœ°ç»§æ‰¿äº†å‰é¢å…ƒç´ çš„çŠ¶æ€ã€‚ æœ€ä½³å®è·µï¼š å§‹ç»ˆä½¿ç”¨ç¨³å®šä¸”å”¯ä¸€çš„ keyï¼Œé€šå¸¸æ˜¯æ•°æ®é¡¹æœ¬èº«çš„å”¯ä¸€ IDï¼ˆå¦‚æ•°æ®åº“ IDï¼‰ã€‚åªæœ‰å½“åˆ—è¡¨æ˜¯é™æ€çš„ã€æ°¸ä¸æ”¹å˜é¡ºåºå’Œå†…å®¹çš„ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ index ä½œä¸º keyï¼Œä½†é€šå¸¸ä¸æ¨èã€‚\nä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶ï¼Ÿ\r#\rè¿™ä¸¤ä¸ªæ¦‚å¿µä¸»è¦ç”¨äº è¡¨å•å…ƒç´  çš„å¤„ç†ã€‚\nå—æ§ç»„ä»¶ (Controlled Components)ï¼š\nå®šä¹‰ï¼š è¡¨å•å…ƒç´ çš„å€¼ç”± React ç»„ä»¶çš„çŠ¶æ€ (State) æ¥æ§åˆ¶ã€‚æ¯æ¬¡è¾“å…¥æ¡†çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šé€šè¿‡ onChange äº‹ä»¶æ›´æ–°ç»„ä»¶çš„çŠ¶æ€ï¼Œç„¶åçŠ¶æ€çš„æ”¹å˜å†åæ˜ åˆ°è¾“å…¥æ¡†ä¸Šã€‚ ç‰¹ç‚¹ï¼š è¡¨å•æ•°æ®ç”± React ç»„ä»¶ç®¡ç†ï¼Œå€¼å®Œå…¨åŒæ­¥ã€‚ æ›´æ˜“äºå®ç°å³æ—¶æ ¡éªŒã€æ¡ä»¶ç¦ç”¨ã€æ ¼å¼åŒ–è¾“å…¥ç­‰åŠŸèƒ½ã€‚ ä»£ç ç›¸å¯¹æ›´å¤æ‚ä¸€äº›ï¼Œå› ä¸ºéœ€è¦ä¸ºæ¯ä¸ªè¾“å…¥æ¡†ç»´æŠ¤çŠ¶æ€å’Œ onChange å¤„ç†å‡½æ•°ã€‚ ä¾‹å­ï¼š \u0026lt;input type=\u0026quot;text\u0026quot; value={this.state.name} onChange={this.handleChange} /\u0026gt; éå—æ§ç»„ä»¶ (Uncontrolled Components)ï¼š\nå®šä¹‰ï¼š è¡¨å•å…ƒç´ çš„å€¼ä¸ç”± React ç»„ä»¶çš„çŠ¶æ€æ§åˆ¶ï¼Œè€Œæ˜¯ç”± DOM è‡ªèº«æ¥ç®¡ç†ã€‚é€šå¸¸é€šè¿‡ ref æ¥ç›´æ¥è®¿é—® DOM å…ƒç´ å¹¶è·å–å…¶å€¼ã€‚ ç‰¹ç‚¹ï¼š è¡¨å•æ•°æ®ç”± DOM è‡ªèº«ç®¡ç†ã€‚ æ›´æ¥è¿‘ä¼ ç»Ÿçš„ HTML è¡¨å•è¡Œä¸ºã€‚ ä»£ç ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºä¸éœ€è¦ç»´æŠ¤å¤§é‡çŠ¶æ€ã€‚ ä½†åœ¨å¤æ‚äº¤äº’åœºæ™¯ä¸‹ï¼Œæ§åˆ¶èƒ½åŠ›è¾ƒå¼±ã€‚ ä¾‹å­ï¼š \u0026lt;input type=\u0026quot;text\u0026quot; ref={inputRef} /\u0026gt;ï¼Œç„¶åé€šè¿‡ inputRef.current.value è·å–å€¼ã€‚ é€‰æ‹©ï¼š å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå—æ§ç»„ä»¶æ›´å¸¸ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›å’Œæ›´æ¸…æ™°çš„æ•°æ®æµã€‚éå—æ§ç»„ä»¶é€‚ç”¨äºä¸€äº›ç®€å•çš„åœºæ™¯ï¼Œæˆ–è€…éœ€è¦é›†æˆé React çš„ DOM åº“æ—¶ã€‚\nâš™ï¸ Hooks\r#\ruseState å’Œ useEffect çš„ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹ï¼Ÿ\r#\r1. useStateï¼š\nç”¨æ³•ï¼š ```javascript const [state, setState] = useState(initialState); * `state`: å½“å‰çš„çŠ¶æ€å€¼ã€‚\r* `setState`: æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚\r* `initialState`: çŠ¶æ€çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼ˆç”¨äºå»¶è¿Ÿåˆå§‹åŒ–æˆ–å¤æ‚è®¡ç®—ï¼‰ã€‚ æ³¨æ„äº‹é¡¹ï¼š ä¸å¯å˜æ›´æ–°ï¼š setState æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”åº”è¯¥å§‹ç»ˆç”¨æ–°å€¼æ›¿æ¢æ—§å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ—§å€¼ï¼ˆå³ä¸å¯å˜æ›´æ–°ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ›´æ–°æ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œåº”åˆ›å»ºæ–°æ•°ç»„/å¯¹è±¡ï¼šsetArray([...array, newItem]) æˆ– setObject({...object, key: value})ã€‚ å‡½æ•°å¼æ›´æ–°ï¼š å½“æ–°çŠ¶æ€ä¾èµ–äºæ—§çŠ¶æ€æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ç»™ setState æ›´å®‰å…¨ï¼Œå¯ä»¥é¿å…é—­åŒ…é™·é˜±ï¼šsetCount(prevCount =\u0026gt; prevCount + 1)ã€‚ æ‰¹å¤„ç† (Batching)ï¼š åœ¨ React 18 ä¹‹å‰ï¼ŒsetState åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ˜¯æ‰¹é‡æ›´æ–°çš„ï¼Œåœ¨å¼‚æ­¥ä»£ç ä¸­æ˜¯åŒæ­¥çš„ã€‚React 18 å¼€å§‹ï¼Œæ‰€æœ‰ setState è°ƒç”¨é»˜è®¤éƒ½æ˜¯æ‰¹é‡æ›´æ–°çš„ï¼ˆè‡ªåŠ¨æ‰¹å¤„ç†ï¼‰ï¼Œæ— è®ºæ˜¯åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¿˜æ˜¯å¼‚æ­¥ä»£ç ä¸­ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚ 2. useEffectï¼š\nç”¨æ³•ï¼š ç”¨äºå¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ (side effects)ï¼Œå¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨æ”¹å˜ DOMã€å®šæ—¶å™¨ç­‰ã€‚ useEffect(() =\u0026gt; { // å‰¯ä½œç”¨ä»£ç  return () =\u0026gt; { // æ¸…ç†å‡½æ•° (å¯é€‰)ï¼Œåœ¨ç»„ä»¶å¸è½½æˆ–ä¾èµ–é¡¹æ”¹å˜å‰æ‰§è¡Œ }; }, [dependencies]); // ä¾èµ–æ•°ç»„ (å¯é€‰) æ³¨æ„äº‹é¡¹ï¼š æ‰§è¡Œæ—¶æœºï¼š useEffect åœ¨æ¯æ¬¡æ¸²æŸ“åï¼ˆåŒ…æ‹¬åˆæ¬¡æ¸²æŸ“å’Œæ›´æ–°ï¼‰æ‰§è¡Œï¼Œä½†ä¼šåœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€å’Œç»˜åˆ¶ä¹‹åã€‚ æ¸…ç†å‡½æ•°ï¼š è¿”å›çš„å‡½æ•°ç”¨äºæ¸…ç†å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ã€ç§»é™¤äº‹ä»¶ç›‘å¬ã€‚å®ƒä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æˆ–ä¸‹æ¬¡ useEffect æ‰§è¡Œå‰ï¼ˆä¾èµ–é¡¹å˜åŒ–æ—¶ï¼‰æ‰§è¡Œã€‚ ä¾èµ–æ•°ç»„ï¼š ç©ºæ•°ç»„ []ï¼š å‰¯ä½œç”¨åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ¸…ç†å‡½æ•°åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚æ¨¡æ‹Ÿ componentDidMount å’Œ componentWillUnmountã€‚ æ— ä¾èµ–æ•°ç»„ï¼š å‰¯ä½œç”¨åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½æ‰§è¡Œã€‚æ…ç”¨ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ æœ‰ä¾èµ–é¡¹ [dep1, dep2]ï¼š å‰¯ä½œç”¨åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œï¼Œæ¸…ç†å‡½æ•°åœ¨ä¸‹æ¬¡ä¾èµ–é¡¹å˜åŒ–å‰æˆ–ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚æ¨¡æ‹Ÿ componentDidUpdate å’Œ componentWillUnmountã€‚ é—­åŒ…é—®é¢˜ï¼š å¦‚æœ useEffect å†…éƒ¨ä½¿ç”¨äº†ç»„ä»¶å¤–éƒ¨çš„å˜é‡æˆ–å‡½æ•°ï¼Œä½†æ²¡æœ‰å°†å…¶åŒ…å«åœ¨ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨åˆ°æ—§çš„å˜é‡å€¼ï¼Œäº§ç”Ÿéš¾ä»¥è°ƒè¯•çš„ bugã€‚ å¦‚ä½•æ¨¡æ‹Ÿ componentDidMount / DidUpdate / WillUnmountï¼Ÿ\r#\rcomponentDidMountï¼š ä½¿ç”¨ useEffectï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ã€‚ useEffect(() =\u0026gt; { console.log(\u0026#39;ç»„ä»¶å·²æŒ‚è½½ï¼Œåªæ‰§è¡Œä¸€æ¬¡\u0026#39;); // æ•°æ®è¯·æ±‚ã€è®¢é˜…ç­‰ }, []); componentDidUpdateï¼š ä½¿ç”¨ useEffectï¼Œå¹¶ä¼ å…¥åŒ…å«æ‰€æœ‰éœ€è¦ç›‘å¬å˜åŒ–çš„ä¾èµ–é¡¹ã€‚ useEffect(() =\u0026gt; { console.log(\u0026#39;ç»„ä»¶å·²æ›´æ–°ï¼Œæˆ–è€… count/name æ”¹å˜äº†\u0026#39;); // å½“ count æˆ– name æ”¹å˜æ—¶æ‰§è¡Œé€»è¾‘ }, [count, name]); componentWillUnmountï¼š ä½¿ç”¨ useEffectï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚å½“ä¾èµ–æ•°ç»„ä¸ºç©ºæ—¶ï¼Œæ¸…ç†å‡½æ•°åªåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚ useEffect(() =\u0026gt; { const timer = setInterval(() =\u0026gt; { console.log(\u0026#39;å®šæ—¶å™¨è¿è¡Œä¸­...\u0026#39;); }, 1000); return () =\u0026gt; { clearInterval(timer); // åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ console.log(\u0026#39;ç»„ä»¶å³å°†å¸è½½ï¼Œæ¸…ç†å·¥ä½œå·²å®Œæˆ\u0026#39;); }; }, []); useEffect ä¾èµ–æ•°ç»„ä¸ºä»€ä¹ˆä¸èƒ½éšä¾¿çœç•¥ï¼Ÿ\r#\ruseEffect çš„ä¾èµ–æ•°ç»„ç”¨äºå‘Šè¯‰ React ä½•æ—¶é‡æ–°è¿è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚å¦‚æœçœç•¥ä¾èµ–æ•°ç»„ï¼ˆå³ä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼ŒuseEffect ä¼šåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½æ‰§è¡Œï¼Œè¿™é€šå¸¸ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œé€»è¾‘é”™è¯¯ï¼Œå› ä¸ºå‰¯ä½œç”¨å¯èƒ½ä¼šä¸å¿…è¦åœ°é¢‘ç¹è¿è¡Œã€‚\næ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœå‰¯ä½œç”¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†ç»„ä»¶çŠ¶æ€ã€props æˆ–å‡½æ•°ï¼Œä½†æ²¡æœ‰å°†å®ƒä»¬åˆ—åœ¨ä¾èµ–æ•°ç»„ä¸­ï¼Œå°±ä¼šå¯¼è‡´â€œé—­åŒ…é™·é˜±â€ï¼š å‰¯ä½œç”¨å‡½æ•°ä¼šæ•è·åˆ°é¦–æ¬¡æ¸²æŸ“æ—¶çš„æ—§å€¼ï¼Œå³ä½¿è¿™äº›å€¼åœ¨åç»­æ¸²æŸ“ä¸­å·²ç»æ›´æ–°ã€‚è¿™å¯èƒ½å¯¼è‡´ï¼š\nä½¿ç”¨è¿‡æœŸçš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚ è®¢é˜…æˆ–ç›‘å¬äº†æ—§çš„äº‹ä»¶æºã€‚ å†…å­˜æ³„æ¼ï¼ˆæ¸…ç†å‡½æ•°å¯èƒ½æ²¡æœ‰æ­£ç¡®åœ°æ¸…ç†æ‰æ—§çš„èµ„æºï¼‰ã€‚ ç¤ºä¾‹ï¼š\nfunction Counter() { const [count, setCount] = useState(0); // é”™è¯¯ï¼šçœç•¥äº†ä¾èµ–æ•°ç»„ï¼Œeffect ä¼šä½¿ç”¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„ count = 0 // å¯¼è‡´æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œlog éƒ½ä¼šæ˜¯ 0ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„ count useEffect(() =\u0026gt; { console.log(\u0026#39;Count is:\u0026#39;, count); // æ°¸è¿œæ˜¯ 0 }); // âŒ ç¼ºå°‘ä¾èµ–æ•°ç»„ // æ­£ç¡®ï¼šæ˜ç¡®å‘Šè¯‰ React ä¾èµ– countï¼Œå½“ count å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ useEffect(() =\u0026gt; { console.log(\u0026#39;Count is:\u0026#39;, count); // æ˜¾ç¤ºæœ€æ–°çš„ count }, [count]); // âœ… åŒ…å«äº†ä¾èµ–é¡¹ return \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt;; } ç»“è®ºï¼š ä¸¥æ ¼éµå¾ª useEffect çš„ä¾èµ–é¡¹è§„åˆ™æ˜¯é¿å…å„ç§éš¾ä»¥è°ƒè¯•çš„ bug å’Œæ€§èƒ½é—®é¢˜çš„å…³é”®ã€‚\nå¦‚ä½•ç”¨ useRef å®ç°é˜²æŠ–æˆ–ä¿å­˜æ—§çŠ¶æ€ï¼Ÿ\r#\r1. ç”¨ useRef å®ç°é˜²æŠ– (Debounce)ï¼š useRef å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸€ä¸ªåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´æŒä¹…å­˜åœ¨çš„å¯å˜å€¼ï¼Œè€Œä¸ä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å…¶éå¸¸é€‚åˆå­˜å‚¨å®šæ—¶å™¨ IDï¼Œä»¥ä¾¿åœ¨åç»­æ¸²æŸ“ä¸­æ¸…é™¤å®ƒã€‚\nimport React, { useRef, useEffect } from \u0026#39;react\u0026#39;; function DebouncedInput() { const [value, setValue] = useState(\u0026#39;\u0026#39;); const timerRef = useRef(null); // å­˜å‚¨å®šæ—¶å™¨IDçš„ref useEffect(() =\u0026gt; { // æ¸…ç†å‡½æ•°ï¼Œåœ¨æ¯æ¬¡ effect æ‰§è¡Œå‰å’Œç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ return () =\u0026gt; { if (timerRef.current) { clearTimeout(timerRef.current); } }; }, []); // ç©ºæ•°ç»„ï¼Œç¡®ä¿åªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶å¤„ç† const handleChange = (e) =\u0026gt; { const inputValue = e.target.value; setValue(inputValue); // æ¸…é™¤ä¸Šæ¬¡çš„å®šæ—¶å™¨ if (timerRef.current) { clearTimeout(timerRef.current); } // è®¾ç½®æ–°çš„å®šæ—¶å™¨ timerRef.current = setTimeout(() =\u0026gt; { console.log(\u0026#39;Debounced value:\u0026#39;, inputValue); // åœ¨è¿™é‡Œæ‰§è¡Œå®é™…çš„æœç´¢æˆ–APIè°ƒç”¨ }, 500); }; return \u0026lt;input type=\u0026#34;text\u0026#34; value={value} onChange={handleChange} placeholder=\u0026#34;Type to debounce...\u0026#34; /\u0026gt;; } 2. ç”¨ useRef ä¿å­˜æ—§çŠ¶æ€ï¼š useRef ä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„çŠ¶æ€å€¼ï¼Œå› ä¸º ref.current åœ¨æ¸²æŸ“ä¹‹é—´æ˜¯æŒä¹…çš„ã€‚\nimport React, { useState, useEffect, useRef } from \u0026#39;react\u0026#39;; function PreviousValueDisplay() { const [count, setCount] = useState(0); const prevCountRef = useRef(0); // åˆå§‹åŒ–refæ¥å­˜å‚¨æ—§å€¼ // åœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œå°†å½“å‰ count å­˜å‚¨åˆ° ref ä¸­ useEffect(() =\u0026gt; { prevCountRef.current = count; }); // æ²¡æœ‰ä¾èµ–æ•°ç»„ï¼Œæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ const prevCount = prevCountRef.current; // è·å–ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„å€¼ return ( \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;Current Count: {count}\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Previous Count: {prevCount}\u0026lt;/p\u0026gt; {/* è¿™é‡Œçš„ prevCount æ˜¯ä¸Šä¸€æ¬¡æ¸²æŸ“çš„ count */} \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ); } åœ¨ React 16.8+ ä¸­ï¼Œä½¿ç”¨ useRef æ˜¯ä¿å­˜è·¨æ¸²æŸ“å‘¨æœŸå¯å˜å€¼çš„æ ‡å‡†æ–¹å¼ã€‚\nuseCallback vs useMemo åŒºåˆ«ï¼Ÿ\r#\ruseCallback å’Œ useMemo éƒ½æ˜¯ React Hooksï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œé€šè¿‡è®°å¿†åŒ– (memoization) é¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ã€‚\nuseCallbackï¼š\nç›®çš„ï¼š è®°å¿†åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«è®°å¿†åŒ–çš„å›è°ƒå‡½æ•°ã€‚ è¯­æ³•ï¼š const memoizedCallback = useCallback(() =\u0026gt; { /* ... */ }, [dependencies]); ä½œç”¨ï¼š å½“ä¾èµ–é¡¹æ•°ç»„ä¸­çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseCallback ä¼šè¿”å›ä¸Šæ¬¡æ¸²æŸ“æ—¶åˆ›å»ºçš„å‡½æ•°å®ä¾‹ã€‚è¿™å¯¹äºå°†å‡½æ•°ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨äº† React.memo ä¼˜åŒ–çš„å­ç»„ä»¶ï¼‰éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é˜²æ­¢å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚ ä½¿ç”¨åœºæ™¯ï¼š ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€useEffect çš„ä¾èµ–é¡¹ï¼ˆå½“å‡½æ•°æœ¬èº«æ˜¯ useEffect çš„ä¾èµ–æ—¶ï¼‰ã€‚ useMemoï¼š\nç›®çš„ï¼š è®°å¿†åŒ–ä¸€ä¸ªå€¼ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬ä¸€ä¸ª JSX ç‰‡æ®µã€ä¸€ä¸ªå¯¹è±¡ã€ä¸€ä¸ªè®¡ç®—ç»“æœç­‰ï¼‰ï¼Œè¿”å›ä¸€ä¸ªè¢«è®°å¿†åŒ–çš„å€¼ã€‚ è¯­æ³•ï¼š const memoizedValue = useMemo(() =\u0026gt; computeExpensiveValue(a, b), [a, b]); ä½œç”¨ï¼š å½“ä¾èµ–é¡¹æ•°ç»„ä¸­çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseMemo ä¼šè¿”å›ä¸Šæ¬¡è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œé¿å…é‡å¤æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ˜‚è´µçš„è®¡ç®—ç»“æœã€æ´¾ç”ŸçŠ¶æ€ã€å¤æ‚çš„ JSX æ¸²æŸ“ã€ä¼ é€’ç»™å­ç»„ä»¶çš„å¤æ‚å¯¹è±¡ã€‚ æ€»ç»“åŒºåˆ«ï¼š\nuseCallback è®°å¿†çš„æ˜¯ä¸€ä¸ªå‡½æ•°**ã€‚ useMemo è®°å¿†çš„æ˜¯ä¸€ä¸ªå€¼**ã€‚ ä¾‹å­ï¼š\nimport React, { useState, useCallback, useMemo } from \u0026#39;react\u0026#39;; // å­ç»„ä»¶ï¼Œå‡è®¾å®ƒè¢« React.memo ä¼˜åŒ–ï¼Œåªæœ‰ props æ”¹å˜æ—¶æ‰æ¸²æŸ“ const ChildComponent = React.memo(({ onClick, data }) =\u0026gt; { console.log(\u0026#39;ChildComponent re-rendered\u0026#39;); return ( \u0026lt;div\u0026gt; \u0026lt;button onClick={onClick}\u0026gt;Click me\u0026lt;/button\u0026gt; \u0026lt;p\u0026gt;{data}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ); }); function ParentComponent() { const [count, setCount] = useState(0); const [name, setName] = useState(\u0026#39;Alice\u0026#39;); // ä½¿ç”¨ useCallback è®°å¿†å‡½æ•°ï¼šåªæœ‰å½“ count æ”¹å˜æ—¶ï¼ŒhandleClick æ‰é‡æ–°åˆ›å»º const handleClick = useCallback(() =\u0026gt; { setCount(c =\u0026gt; c + 1); }, [count]); // å¦‚æœ count æ˜¯ä¾èµ–é¡¹ï¼Œå½“ count å˜åŒ–æ—¶ï¼ŒhandleClick ä¼šè¢«é‡æ–°åˆ›å»º // ä½¿ç”¨ useMemo è®°å¿†å€¼ï¼šåªæœ‰å½“ name æ”¹å˜æ—¶ï¼ŒexpensiveData æ‰é‡æ–°è®¡ç®— const expensiveData = useMemo(() =\u0026gt; { console.log(\u0026#39;Calculating expensive data...\u0026#39;); return `Hello, ${name}! The count is ${count}.`; }, [name, count]); // å¦‚æœ name æˆ– count æ”¹å˜ï¼ŒexpensiveData ä¼šé‡æ–°è®¡ç®— return ( \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;Count: {count}\u0026lt;/p\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; value={name} onChange={e =\u0026gt; setName(e.target.value)} /\u0026gt; {/* å³ä½¿ ParentComponent é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœ handleClick æ²¡æœ‰å˜ï¼ŒChildComponent ä¹Ÿä¸ä¼šæ¸²æŸ“ */} \u0026lt;ChildComponent onClick={handleClick} data={expensiveData} /\u0026gt; \u0026lt;/div\u0026gt; ); } è‡ªå®šä¹‰ Hook æ€ä¹ˆå†™ï¼Ÿå®é™…é¡¹ç›®ä¸­å†™è¿‡å“ªäº›ï¼Ÿ\r#\rè‡ªå®šä¹‰ Hook æ˜¯ä¸€ç§å°†ç»„ä»¶é€»è¾‘æŠ½å–å‡ºæ¥å¹¶åœ¨å‡½æ•°ç»„ä»¶ä¹‹é—´å…±äº«çš„æœºåˆ¶ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œå…¶åç§°çº¦å®šä»¥ use å¼€å¤´ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­è°ƒç”¨å…¶ä»– Hookï¼ˆå¦‚ useState, useEffect, useRef ç­‰ï¼‰ã€‚\næ€ä¹ˆå†™ï¼Ÿ\nåˆ›å»ºä¸€ä¸ª JavaScript å‡½æ•°ï¼š åç§°ä»¥ use å¼€å¤´ï¼ˆè¿™æ˜¯ React çš„çº¦å®šï¼Œç”¨äºè®© Linter è¯†åˆ«å¹¶éµå¾ª Hook è§„åˆ™ï¼‰ã€‚ åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å…¶ä»– Hookï¼š ä¾‹å¦‚ useState æ¥ç®¡ç†å†…éƒ¨çŠ¶æ€ï¼ŒuseEffect æ¥å¤„ç†å‰¯ä½œç”¨ç­‰ã€‚ è¿”å›éœ€è¦å…±äº«çš„çŠ¶æ€å’Œæ–¹æ³•ï¼š å¯ä»¥è¿”å›ä¸€ä¸ªæ•°ç»„ã€å¯¹è±¡æˆ–ä»»ä½•å€¼ã€‚ ç¤ºä¾‹ï¼šuseToggle\nimport { useState, useCallback } from \u0026#39;react\u0026#39;; function useToggle(initialValue = false) { const [value, setValue] = useState(initialValue); const toggle = useCallback(() =\u0026gt; { setValue(prevValue =\u0026gt; !prevValue); }, []); // ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œç¡®ä¿ toggle å‡½æ•°å¼•ç”¨ä¸å˜ return [value, toggle]; } // å¦‚ä½•ä½¿ç”¨ï¼š // function MyComponent() { // const [isOn, toggle] = useToggle(false); // return \u0026lt;button onClick={toggle}\u0026gt;{isOn ? \u0026#39;On\u0026#39; : \u0026#39;Off\u0026#39;}\u0026lt;/button\u0026gt;; // } å®é™…é¡¹ç›®ä¸­å†™è¿‡å“ªäº›ï¼Ÿ ï¼ˆè¿™é‡Œä½ éœ€è¦æ ¹æ®ä½ è‡ªå·±çš„é¡¹ç›®ç»éªŒæ¥å›ç­”ï¼Œä¸‹é¢æ˜¯å¸¸è§çš„ä¸€äº›ä¾‹å­ï¼‰\nuseLocalStorage / useSessionStorageï¼š ç”¨äºå°†çŠ¶æ€ä¸æµè§ˆå™¨æœ¬åœ°å­˜å‚¨åŒæ­¥ã€‚ useDebounce / useThrottleï¼š ç”¨äºå¯¹è¾“å…¥ã€æ»šåŠ¨ç­‰äº‹ä»¶è¿›è¡Œé˜²æŠ–/èŠ‚æµå¤„ç†ã€‚ usePreviousï¼š ç”¨äºè·å–ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„æŸä¸ªçŠ¶æ€æˆ– prop çš„å€¼ã€‚ useForm / useFormValidationï¼š å°è£…è¡¨å•çš„çŠ¶æ€ç®¡ç†ã€æ ¡éªŒé€»è¾‘ã€‚ useClickOutsideï¼š æ£€æµ‹å…ƒç´ å¤–éƒ¨ç‚¹å‡»äº‹ä»¶ï¼Œå¸¸ç”¨äºå®ç°ä¸‹æ‹‰èœå•æˆ–å¼¹çª—çš„ç‚¹å‡»å¤–éƒ¨å…³é—­åŠŸèƒ½ã€‚ useFetch / useApiï¼š å°è£…æ•°æ®è¯·æ±‚é€»è¾‘ï¼ŒåŒ…æ‹¬åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ã€ç¼“å­˜ç­‰ã€‚ useIntersectionObserverï¼š ç”¨äºå®ç°å›¾ç‰‡æ‡’åŠ è½½ã€æ— é™æ»šåŠ¨ç­‰ã€‚ useClipboardï¼š å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿ã€‚ è‡ªå®šä¹‰ Hook çš„å¥½å¤„ï¼š\né€»è¾‘å¤ç”¨ï¼š é¿å…åœ¨ä¸åŒç»„ä»¶ä¸­é‡å¤ç¼–å†™ç›¸åŒçš„çŠ¶æ€é€»è¾‘ã€‚ å…³æ³¨ç‚¹åˆ†ç¦»ï¼š å°†çŠ¶æ€é€»è¾‘ä» UI æ¸²æŸ“ä¸­åˆ†ç¦»ï¼Œä½¿ç»„ä»¶æ›´ä¸“æ³¨äºæ¸²æŸ“ã€‚ æé«˜å¯è¯»æ€§ï¼š ç»„ä»¶ä»£ç æ›´ç®€æ´ï¼Œæ˜“äºç†è§£ã€‚ æ˜“äºæµ‹è¯•ï¼š ç‹¬ç«‹çš„é€»è¾‘æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ ğŸš€ æ€§èƒ½ä¼˜åŒ–ä¸æ¶æ„\r#\rReact ä¸­æœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Ÿ\r#\rReact æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„è¯¾é¢˜ï¼Œæ¶‰åŠå¤šä¸ªå±‚é¢ï¼š\nå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ (Re-renders)ï¼š\nReact.memo (å‡½æ•°ç»„ä»¶) / PureComponent (ç±»ç»„ä»¶)ï¼š å¯¹ç»„ä»¶è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œå¦‚æœ props æ²¡æœ‰å˜åŒ–ï¼Œåˆ™è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ useCallback å’Œ useMemo Hooksï¼š è®°å¿†åŒ–å‡½æ•°å’Œè®¡ç®—ç»“æœï¼Œé¿å…å­ç»„ä»¶å› çˆ¶ç»„ä»¶ä¼ é€’çš„å‡½æ•°/å¯¹è±¡å¼•ç”¨å˜åŒ–è€Œé‡å¤æ¸²æŸ“ã€‚ åˆç†ä½¿ç”¨ shouldComponentUpdate (ç±»ç»„ä»¶)ï¼š æ‰‹åŠ¨æ§åˆ¶ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ï¼ˆä½† Hooks æ—¶ä»£æ›´æ¨è React.memoï¼‰ã€‚ çŠ¶æ€æå‡å’Œç»„ä»¶æ‹†åˆ†ï¼š å°†ä¸å½±å“æŸä¸ªç»„ä»¶æ¸²æŸ“çš„çŠ¶æ€å’Œé€»è¾‘æå‡åˆ°çˆ¶ç»„ä»¶æˆ–æ‹†åˆ†åˆ°æ›´å°çš„ã€ç‹¬ç«‹çš„ç»„ä»¶ä¸­ï¼Œå‡å°‘å•ä¸ªç»„ä»¶çš„æ¸²æŸ“èŒƒå›´ã€‚ Key çš„æ­£ç¡®ä½¿ç”¨ï¼š åœ¨æ¸²æŸ“åˆ—è¡¨æ—¶ä½¿ç”¨ç¨³å®šä¸”å”¯ä¸€çš„ keyï¼Œå¸®åŠ© React æ­£ç¡®è¯†åˆ«å’Œå¤ç”¨å…ƒç´ ã€‚ æ•°æ®å±‚ä¼˜åŒ–ï¼š\næ•°æ®ä¸å¯å˜æ€§ (Immutable Data)ï¼š é¿å…ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œå§‹ç»ˆåˆ›å»ºæ–°çš„æ•°æ®å‰¯æœ¬è¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾— React çš„ Diff ç®—æ³•èƒ½å¤Ÿè¿›è¡Œæ›´é«˜æ•ˆçš„æµ…æ¯”è¾ƒã€‚å¯ä»¥ä½¿ç”¨ Immer ç­‰åº“ç®€åŒ–ä¸å¯å˜æ›´æ–°ã€‚ åˆç†ä½¿ç”¨ç¼“å­˜ï¼š åœ¨æ•°æ®è¯·æ±‚å±‚ï¼ˆå¦‚ä½¿ç”¨ react-queryï¼‰æˆ–åº”ç”¨å±‚ä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘é‡å¤çš„ç½‘ç»œè¯·æ±‚ã€‚ é¦–æ¬¡åŠ è½½æ€§èƒ½ä¼˜åŒ–ï¼š\nä»£ç åˆ†å‰² (Code Splitting) å’Œæ‡’åŠ è½½ (Lazy Loading)ï¼š ä½¿ç”¨ React.lazy å’Œ Suspense æˆ–åŠ¨æ€ import()ï¼ŒæŒ‰éœ€åŠ è½½ç»„ä»¶å’Œä»£ç ï¼Œå‡å°‘åˆå§‹åŒ…ä½“ç§¯ã€‚ å›¾ç‰‡ä¼˜åŒ–ï¼š å‹ç¼©å›¾ç‰‡ã€ä½¿ç”¨ WebP æ ¼å¼ã€å›¾ç‰‡æ‡’åŠ è½½ã€‚ CDNï¼š é™æ€èµ„æºä½¿ç”¨ CDN åŠ é€Ÿã€‚ Gzip/Brotli å‹ç¼©ï¼š æœåŠ¡å™¨ç«¯å¼€å¯èµ„æºå‹ç¼©ã€‚ UI æ¸²æŸ“ä¼˜åŒ–ï¼š\nåˆ—è¡¨è™šæ‹ŸåŒ– (Virtualization) / çª—å£åŒ– (Windowing)ï¼š å¯¹äºåŒ…å«å¤§é‡æ•°æ®é¡¹çš„é•¿åˆ—è¡¨ï¼Œåªæ¸²æŸ“å¯è§åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚ é¿å…åœ¨æ¸²æŸ“å‡½æ•°ä¸­æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ï¼š å°†æ˜‚è´µçš„è®¡ç®—æ”¾å…¥ useMemo æˆ–ç§»åˆ°ç»„ä»¶å¤–éƒ¨ã€‚ é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºç»„ä»¶ï¼š å°½å¯èƒ½é¿å…åœ¨å¾ªç¯å†…å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼Œè¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„åˆ›å»ºå’Œé‡æ–°æ¸²æŸ“ã€‚ å…¶ä»–ï¼š\nä½¿ç”¨ç”Ÿäº§ç¯å¢ƒæ„å»ºï¼š ç”Ÿäº§ç¯å¢ƒçš„ React æ„å»ºä¼šç§»é™¤å¼€å‘ç¯å¢ƒçš„è°ƒè¯•ä»£ç å’Œè­¦å‘Šï¼Œä½“ç§¯æ›´å°ï¼Œè¿è¡Œæ›´å¿«ã€‚ Lighthouse / React DevTools Profilerï¼š ä½¿ç”¨è¿™äº›å·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æï¼Œæ‰¾å‡ºç“¶é¢ˆã€‚ ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–ï¼ˆvirtualizationï¼‰ï¼Ÿç”¨è¿‡å“ªäº›åº“ï¼Ÿ\r#\rè™šæ‹ŸåŒ–ï¼ˆVirtualizationï¼‰ï¼Œä¹Ÿç§°ä¸ºâ€œçª—å£åŒ–ï¼ˆWindowingï¼‰â€ï¼Œæ˜¯ä¸€ç§é’ˆå¯¹é•¿åˆ—è¡¨ï¼ˆåŒ…å«å¤§é‡æ•°æ®é¡¹çš„åˆ—è¡¨ï¼‰çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåªæ¸²æŸ“å½“å‰åœ¨ç”¨æˆ·è§†å£ï¼ˆå³å±å¹•å¯è§åŒºåŸŸï¼‰å†…çš„åˆ—è¡¨é¡¹ï¼Œå¯¹äºè§†å£å¤–çš„å¤§é‡åˆ—è¡¨é¡¹ï¼Œåªè®¡ç®—å…¶å ä½é«˜åº¦ï¼Œè€Œä¸å®é™…æ¸²æŸ“å®ƒä»¬çš„å†…å®¹ã€‚ å½“ç”¨æˆ·æ»šåŠ¨æ—¶ï¼ŒåŠ¨æ€åœ°æ¸²æŸ“å’Œé”€æ¯åˆ—è¡¨é¡¹ã€‚\nä¼˜åŠ¿ï¼š å¤§å¹…å‡å°‘ DOM èŠ‚ç‚¹çš„æ•°é‡ï¼Œé™ä½æµè§ˆå™¨æ¸²æŸ“å‹åŠ›ï¼Œæå‡é•¿åˆ—è¡¨çš„æ»šåŠ¨æ€§èƒ½å’Œé¡µé¢å“åº”é€Ÿåº¦ã€‚\nç”¨è¿‡çš„åº“ï¼š\nreact-windowï¼š è½»é‡çº§ã€é«˜æ€§èƒ½çš„ React åˆ—è¡¨è™šæ‹ŸåŒ–åº“ï¼Œç”± react-virtualized ä½œè€…å¼€å‘ã€‚å®ƒæä¾›äº†å›ºå®šé«˜åº¦/å®½åº¦åˆ—è¡¨ã€å¯å˜é«˜åº¦/å®½åº¦åˆ—è¡¨ã€ç½‘æ ¼ç­‰ç»„ä»¶ã€‚æˆ‘ç»å¸¸ç”¨å®ƒæ¥å¤„ç†éœ€è¦å±•ç¤ºå‡ ç™¾åˆ°å‡ ä¸‡æ¡æ•°æ®çš„è¡¨æ ¼æˆ–åˆ—è¡¨ï¼Œæ•ˆæœéå¸¸æ˜¾è‘—ã€‚ react-virtualizedï¼š åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´å…¨é¢çš„è™šæ‹ŸåŒ–åº“ï¼Œä½†ç›¸å¯¹ react-window æ›´é‡ä¸€äº›ã€‚å®ƒæä¾›äº†æ›´å¤šé«˜çº§åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨è°ƒæ•´è¡Œé«˜ã€æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ç­‰ã€‚ å®é™…åº”ç”¨åœºæ™¯ï¼š\næ•°æ®è¡¨æ ¼ï¼ˆå¦‚å±•ç¤ºå¤§é‡ç”¨æˆ·æ•°æ®ã€æ—¥å¿—è®°å½•ï¼‰ã€‚ èŠå¤©è®°å½•ã€ä¿¡æ¯æµã€‚ è‚¡ç¥¨è¡Œæƒ…ã€ç›‘æ§é¢æ¿ç­‰å®æ—¶æ•°æ®å±•ç¤ºã€‚ å¦‚ä½•é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼Ÿ\r#\ré¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“æ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç‚¹ä¹‹ä¸€ã€‚ä¸»è¦æ–¹æ³•åŒ…æ‹¬ï¼š\nä½¿ç”¨ React.memo (é’ˆå¯¹å‡½æ•°ç»„ä»¶)ï¼š\nè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚React.memo æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ (HOC)ï¼Œå®ƒä¼šæµ…å±‚æ¯”è¾ƒç»„ä»¶çš„ propsã€‚å¦‚æœ props æ²¡æœ‰æ”¹å˜ï¼Œç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š const MyMemoizedComponent = React.memo(MyComponent); æ³¨æ„äº‹é¡¹ï¼š å¯¹äº props ä¸­çš„å‡½æ•°å’Œå¯¹è±¡ï¼Œå¦‚æœå®ƒä»¬åœ¨çˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½é‡æ–°åˆ›å»ºï¼Œé‚£ä¹ˆ React.memo ä»ç„¶ä¼šåˆ¤æ–­ props æ”¹å˜ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚æ­¤æ—¶éœ€è¦é…åˆ useCallback å’Œ useMemoã€‚ ä½¿ç”¨ useCallback å’Œ useMemo (é’ˆå¯¹å‡½æ•°ç»„ä»¶çš„ props)ï¼š\nuseCallbackï¼š è®°å¿†åŒ–ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€‚ç¡®ä¿å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¦‚æœå‡½æ•°çš„ä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œå‡½æ•°å¼•ç”¨ä¸ä¼šæ”¹å˜ï¼Œä»è€Œé¿å… React.memo çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ useMemoï¼š è®°å¿†åŒ–ä¼ é€’ç»™å­ç»„ä»¶çš„å¯¹è±¡ã€æ•°ç»„æˆ–æ˜‚è´µçš„è®¡ç®—ç»“æœã€‚ç¡®ä¿å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¦‚æœå€¼çš„ä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œå¯¹è±¡/æ•°ç»„å¼•ç”¨ä¸ä¼šæ”¹å˜ï¼Œä»è€Œé¿å… React.memo çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š const handleClick = useCallback(() =\u0026gt; { /* ... */ }, [dependency]); const data = useMemo(() =\u0026gt; ({ /* ... */ }), [dependency]); \u0026lt;MemoizedChild onClick={handleClick} data={data} /\u0026gt; ä½¿ç”¨ PureComponent (é’ˆå¯¹ç±»ç»„ä»¶)ï¼š\nPureComponent å®ç°äº† shouldComponentUpdate æ–¹æ³•ï¼Œå®ƒä¹Ÿä¼šå¯¹ props å’Œ state è¿›è¡Œæµ…å±‚æ¯”è¾ƒã€‚å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰æ”¹å˜ï¼Œç»„ä»¶å°†ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚ æ³¨æ„äº‹é¡¹ï¼š ä¸ React.memo ç±»ä¼¼ï¼Œä¹Ÿå­˜åœ¨å‡½æ•°å’Œå¯¹è±¡å¼•ç”¨å¯¼è‡´çš„é—®é¢˜ã€‚ çŠ¶æ€æå‡å’Œç»„ä»¶æ‹†åˆ†ï¼š\nå°†ä¸å½±å“å­ç»„ä»¶æ¸²æŸ“çš„çŠ¶æ€å’Œé€»è¾‘å‘ä¸Šæå‡åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ï¼Œæˆ–è€…å°†å¤æ‚ç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„ã€ç‹¬ç«‹çš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œå½“å±€éƒ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œåªä¼šå¼•èµ·ç›¸å…³çš„å°ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¤§ç»„ä»¶æ ‘ã€‚ é¿å…åœ¨æ¸²æŸ“æ–¹æ³•ä¸­å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼š\nåœ¨ render æ–¹æ³•ï¼ˆç±»ç»„ä»¶ï¼‰æˆ–å‡½æ•°ç»„ä»¶å†…éƒ¨ç›´æ¥å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼Œä¼šå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„å¼•ç”¨ï¼Œå³ä½¿å®ƒä»¬é€»è¾‘ç›¸åŒï¼Œä¹Ÿä¼šå¯¼è‡´ props å˜åŒ–ï¼Œä»è€Œå¼ºåˆ¶å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ ä»€ä¹ˆæ˜¯ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ï¼Ÿ\r#\rä»£ç åˆ†å‰² (Code Splitting) æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºçš„ä»£ç æ‹†åˆ†æˆæ›´å°çš„ã€æŒ‰éœ€åŠ è½½çš„å— (chunks)ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç ã€‚è¿™æœ‰åŠ©äºæ˜¾è‘—å‡å°‘åˆå§‹åŠ è½½æ—¶ä¸‹è½½çš„ä»£ç é‡ï¼Œä»è€Œæå‡åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ã€‚\nåŸç†ï¼š é€šå¸¸ä¸æ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackã€Rollupï¼‰é…åˆä½¿ç”¨ï¼Œå®ƒä»¬åœ¨æ‰“åŒ…æ—¶ä¼šæ ¹æ®é…ç½®æˆ–è¯­æ³•çº¦å®šå°†ä»£ç åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„ JavaScript æ–‡ä»¶ã€‚\nä¼˜åŠ¿ï¼š\næ›´å¿«çš„åˆå§‹åŠ è½½æ—¶é—´ (TTI)ï¼š ç”¨æˆ·åªéœ€ä¸‹è½½å½“å‰é¡µé¢æ‰€éœ€çš„ä»£ç ã€‚ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š é¡µé¢æ›´å¿«å“åº”ï¼Œå°¤å…¶åœ¨ç½‘ç»œæ¡ä»¶ä¸ä½³æ—¶ã€‚ æœ‰æ•ˆåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼š ä¸åŒçš„ä»£ç å—å¯ä»¥ç‹¬ç«‹ç¼“å­˜ï¼Œå½“ä»£ç æ›´æ–°æ—¶ï¼Œç”¨æˆ·åªéœ€è¦ä¸‹è½½å‘ç”Ÿå˜åŒ–çš„å—ã€‚ ç»„ä»¶æ‡’åŠ è½½å¦‚ä½•å®ç°ï¼ŸReact.lazy vs åŠ¨æ€å¯¼å…¥\r#\rç»„ä»¶æ‡’åŠ è½½ æ˜¯ä»£ç åˆ†å‰²çš„ä¸€ç§å…·ä½“å®ç°ï¼Œå®ƒå…è®¸æˆ‘ä»¬å»¶è¿ŸåŠ è½½ç»„ä»¶çš„ä»£ç ï¼Œç›´åˆ°å®ƒä»¬å®é™…è¢«æ¸²æŸ“æ—¶æ‰å»ä¸‹è½½ã€‚\nå®ç°æ–¹å¼ï¼š\nReact.lazy (æ¨èç”¨äº React ç»„ä»¶)ï¼š\nReact.lazy æ˜¯ React æä¾›çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒå…è®¸ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·æ¸²æŸ“ä¸€ä¸ªåŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Promiseï¼Œè¯¥ Promise resolve ä¸ºä¸€ä¸ª React ç»„ä»¶ï¼ˆå³ default exportï¼‰ã€‚ é€šå¸¸ä¸ Suspense ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼ŒSuspense å¯ä»¥åœ¨æ‡’åŠ è½½ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºä¸€ä¸ªå›é€€ UIï¼ˆå¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰ã€‚ è¯­æ³•ï¼š import React, { lazy, Suspense } from \u0026#39;react\u0026#39;; const MyLazyComponent = lazy(() =\u0026gt; import(\u0026#39;./MyComponent\u0026#39;)); // åŠ¨æ€å¯¼å…¥ function App() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Welcome\u0026lt;/h1\u0026gt; \u0026lt;Suspense fallback={\u0026lt;div\u0026gt;Loading MyLazyComponent...\u0026lt;/div\u0026gt;}\u0026gt; \u0026lt;MyLazyComponent /\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;/div\u0026gt; ); } ç‰¹ç‚¹ï¼š ä¸“é—¨ä¸º React ç»„ä»¶è®¾è®¡ï¼Œæ˜“äºé›†æˆï¼Œä¸”ä¸ React çš„å¹¶å‘æ¨¡å¼å…¼å®¹ã€‚ åŠ¨æ€ import() (é€šå¸¸ä¸ Webpack ç­‰æ„å»ºå·¥å…·é…åˆ)ï¼š\nimport() æ˜¯ ECMAScript çš„ä¸€ä¸ªææ¡ˆï¼Œå®ƒå…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å¯¼å…¥æ¨¡å—ã€‚å®ƒè¿”å›ä¸€ä¸ª Promiseï¼ŒPromise resolved åä¼šå¾—åˆ°æ¨¡å—å¯¹è±¡ã€‚ è™½ç„¶ React.lazy åœ¨åº•å±‚å°±æ˜¯ä½¿ç”¨äº†åŠ¨æ€ import()ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ import() æ¥å®ç°æ›´é€šç”¨çš„ä»£ç åˆ†å‰²ï¼Œä¾‹å¦‚åŠ è½½éç»„ä»¶çš„æ¨¡å—ã€å·¥å…·å‡½æ•°æˆ–è·¯ç”±çº§åˆ«ä»£ç ã€‚ è¯­æ³•ï¼š // åŠ¨æ€å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¸ä¸€å®šæ˜¯Reactç»„ä»¶ import(\u0026#39;./utils\u0026#39;).then(module =\u0026gt; { const { someFunction } = module; someFunction(); }); ä¸ React.lazy ç»“åˆï¼š React.lazy çš„å‚æ•° () =\u0026gt; import('./MyComponent') å°±æ˜¯ä¸€ä¸ªåŠ¨æ€å¯¼å…¥ã€‚ é€‰æ‹©ï¼š\nå¯¹äºReact ç»„ä»¶çš„æ‡’åŠ è½½ï¼ŒReact.lazy + Suspense æ˜¯é¦–é€‰ï¼Œå®ƒæä¾›äº†ç®€æ´çš„ API å’Œå†…ç½®çš„å›é€€æœºåˆ¶ã€‚ å¯¹äºéç»„ä»¶çš„ JavaScript æ¨¡å—çš„æŒ‰éœ€åŠ è½½ï¼Œæˆ–è€…éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶åŠ è½½æ—¶æœºçš„åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŠ¨æ€ import()ã€‚ ğŸ”„ çŠ¶æ€ç®¡ç†\r#\rä½ é¡¹ç›®ä¸­å¦‚ä½•ç®¡ç†ç»„ä»¶é—´çŠ¶æ€ï¼Ÿ\r#\råœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œç»„ä»¶é—´çŠ¶æ€ç®¡ç†ä¼šæ ¹æ®é¡¹ç›®çš„è§„æ¨¡å’Œå¤æ‚æ€§é‡‡å–ä¸åŒçš„ç­–ç•¥ï¼š\nå°±è¿‘åŸåˆ™ / çŠ¶æ€æå‡ (State Hoisting)ï¼š å¯¹äºç®€å•çš„çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œæˆ‘ä¼šä¼˜å…ˆå°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒç¥–å…ˆç»„ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ã€‚è¿™é€‚ç”¨äºå±€éƒ¨æ€§å¼ºã€è·¨ç»„ä»¶å±‚çº§ä¸æ·±çš„çŠ¶æ€ã€‚ Context API (useContext)ï¼š å¯¹äºä¸€äº›éœ€è¦å…¨å±€å…±äº«ä½†å˜åŒ–ä¸é¢‘ç¹çš„çŠ¶æ€ï¼ˆå¦‚ä¸»é¢˜æ¨¡å¼ã€ç”¨æˆ·ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ï¼‰ï¼Œæˆ‘ä¼šä½¿ç”¨ React çš„ Context APIã€‚å®ƒé¿å…äº† props drillingï¼ˆå±‚å±‚ä¼ é€’ propsï¼‰çš„é—®é¢˜ï¼Œä½¿çŠ¶æ€åœ¨ç»„ä»¶æ ‘ä¸­â€œç›´è¾¾â€éœ€è¦å®ƒçš„ç»„ä»¶ã€‚ Redux (æˆ–å…¶å˜ä½“ï¼Œå¦‚ Redux Toolkit)ï¼š å¯¹äºä¸­å¤§å‹ã€å¤æ‚çš„åº”ç”¨ï¼Œæˆ–è€…éœ€è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œã€å¯é¢„æµ‹çŠ¶æ€ç®¡ç†ã€æ—¶é—´æ—…è¡Œè°ƒè¯•ç­‰åœºæ™¯ï¼Œæˆ‘ä¼šé‡‡ç”¨ Reduxã€‚å®ƒæä¾›äº†ä¸€ä¸ªå•ä¸€çš„ã€é›†ä¸­çš„çŠ¶æ€æ ‘ï¼Œé€šè¿‡ action å’Œ reducer ä¸¥æ ¼æ§åˆ¶çŠ¶æ€çš„å˜æ›´ã€‚ æˆ‘é€šå¸¸ä¼šä½¿ç”¨ Redux Toolkitï¼Œå› ä¸ºå®ƒç®€åŒ–äº† Redux çš„é…ç½®å’Œæ ·æ¿ä»£ç ï¼Œå†…ç½®äº† RTK Queryï¼Œèƒ½æ›´å¥½åœ°å¤„ç†æ•°æ®è¯·æ±‚å’Œç¼“å­˜ã€‚ Hooks ç»“åˆè‡ªå®šä¹‰ Hookï¼š å¯¹äºä¸€äº›å¯å¤ç”¨çš„ã€å…·æœ‰ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„çŠ¶æ€ï¼ˆå¦‚è¡¨å•æ ¡éªŒã€æ•°æ®è¯·æ±‚çŠ¶æ€ï¼‰ï¼Œæˆ‘ä¼šå°†å…¶å°è£…æˆè‡ªå®šä¹‰ Hookï¼Œä»¥ä¾¿åœ¨ä¸åŒç»„ä»¶ä¸­å…±äº«é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…±äº«å…¨å±€çŠ¶æ€ã€‚ ç»„ä»¶å†…éƒ¨çŠ¶æ€ (useState)ï¼š å¯¹äºç»„ä»¶ç§æœ‰çš„ã€ä¸ä¸å…¶ä»–ç»„ä»¶å…±äº«çš„çŠ¶æ€ï¼Œå°±ç›´æ¥ä½¿ç”¨ useStateã€‚ æˆ‘çš„é€‰æ‹©é€»è¾‘æ˜¯ï¼š ä¼˜å…ˆé€‰æ‹©æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œå½“å¤æ‚åº¦å¢åŠ æ—¶ï¼Œé€æ­¥å‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚é¿å…è¿‡åº¦è®¾è®¡ï¼Œä½†ä¹Ÿè¦ä¸ºæœªæ¥çš„æ‰©å±•ç•™æœ‰ä½™åœ°ã€‚\nRedux å·¥ä½œåŸç†ï¼Ÿ\r#\rRedux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„ JavaScript çŠ¶æ€å®¹å™¨ï¼Œä¸»è¦ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„å…¨å±€çŠ¶æ€ã€‚å®ƒçš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼šå•ä¸€æ•°æ®æºã€çŠ¶æ€åªè¯»ã€çº¯å‡½æ•°å˜æ›´ã€‚\nRedux çš„æ ¸å¿ƒç»„ä»¶å’Œå·¥ä½œåŸç†ï¼š\nStore (å•ä¸€æ•°æ®æº)ï¼š\næ•´ä¸ªåº”ç”¨ç¨‹åºçš„ æ‰€æœ‰çŠ¶æ€ éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„ JavaScript å¯¹è±¡æ ‘ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡æ ‘å°±æ˜¯ Storeã€‚ å®ƒç”± createStore åˆ›å»ºã€‚ Store åŒ…å« getState()ã€dispatch(action) å’Œ subscribe(listener) ç­‰æ–¹æ³•ã€‚ Action (æ„å›¾çš„æè¿°)ï¼š\næ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œç”¨äºæè¿°å‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶ã€‚ å¿…é¡»åŒ…å«ä¸€ä¸ª type å­—æ®µï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ã€‚ å¯ä»¥åŒ…å«å…¶ä»–ä»»æ„æ•°æ®ï¼Œå³ payloadã€‚ ä¾‹å­ï¼š { type: 'ADD_TODO', payload: { id: 1, text: 'Learn Redux' } } Reducer (çº¯å‡½æ•°)ï¼š\næ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰ state å’Œä¸€ä¸ª action ä½œä¸ºå‚æ•°ã€‚ æ ¹æ® action.type æ¥è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ stateã€‚ æ ¸å¿ƒåŸåˆ™ï¼š å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼ˆä¸ä¿®æ”¹åŸå§‹ stateï¼Œæ— å‰¯ä½œç”¨ï¼‰ï¼Œå¯¹ç›¸åŒçš„è¾“å…¥æ°¸è¿œè¿”å›ç›¸åŒçš„è¾“å‡ºã€‚ ä¾‹å­ï¼š function todosReducer(state = [], action) { switch (action.type) { case \u0026#39;ADD_TODO\u0026#39;: return [...state, action.payload]; // è¿”å›æ–°æ•°ç»„ï¼Œä¸ä¿®æ”¹åŸæ•°ç»„ default: return state; } } Dispatch (è§¦å‘æ›´æ–°)ï¼š\næ˜¯ Store çš„ä¸€ä¸ªæ–¹æ³•ã€‚ç”¨äºå‘é€ (dispatch) ä¸€ä¸ª actionã€‚ è¿™æ˜¯å”¯ä¸€èƒ½è§¦å‘çŠ¶æ€æ›´æ–°çš„æ–¹å¼ã€‚ å·¥ä½œæµç¨‹ï¼š\nç”¨æˆ·äº¤äº’ï¼ˆä¾‹å¦‚ï¼Œç‚¹å‡»æŒ‰é’®ï¼‰ã€‚ ç»„ä»¶è°ƒç”¨ store.dispatch(action) å‘é€ä¸€ä¸ª Actionã€‚ Store æ¥æ”¶åˆ° Action åï¼Œä¼šå°†å½“å‰ State å’Œè¯¥ Action ä¸€èµ·ä¼ é€’ç»™ Reducerã€‚ Reducer æ ¹æ® Action ç±»å‹ï¼Œè®¡ç®—å‡ºæ–°çš„ Stateï¼Œå¹¶è¿”å›æ–°çš„ Stateã€‚ Store æ¥æ”¶åˆ°æ–°çš„ State åï¼Œä¼šæ›´æ–°å…¶å†…éƒ¨çŠ¶æ€ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰ è®¢é˜…è€… (subscribers)ã€‚ è®¢é˜…è€…ï¼ˆé€šå¸¸æ˜¯ React ç»„ä»¶ï¼‰æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šè·å–æ–°çš„ Stateï¼Œå¹¶è§¦å‘è‡ªèº«é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–° UIã€‚ æ€»ç»“ï¼š Redux å¼ºåˆ¶å•å‘æ•°æ®æµå’Œä¸¥æ ¼çš„çŠ¶æ€å˜æ›´æ¨¡å¼ï¼Œä½¿å¾—çŠ¶æ€çš„å˜åŒ–å¯é¢„æµ‹ã€å¯è¿½è¸ªï¼Œä¾¿äºè°ƒè¯•å’Œç»´æŠ¤ã€‚\nuseContext æœ‰å“ªäº›é€‚ç”¨åœºæ™¯ï¼Ÿèƒ½æ›¿ä»£ Redux å—ï¼Ÿ\r#\ruseContext çš„é€‚ç”¨åœºæ™¯ï¼š useContext Hook ç»“åˆ React.createContext æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œè€Œæ— éœ€é€šè¿‡ props é€å±‚æ‰‹åŠ¨ä¼ é€’ã€‚å®ƒä¸»è¦é€‚ç”¨äºï¼š\nå…¨å±€ä¸é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼š ä¾‹å¦‚ä¸»é¢˜ï¼ˆäº®/æš—æ¨¡å¼ï¼‰ã€ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ã€å…¨å±€é…ç½®ç­‰ã€‚ é¿å… Props Drilling (å±æ€§é€å±‚ä¼ é€’)ï¼š å½“ä½ éœ€è¦åœ¨ç»„ä»¶æ ‘ä¸­æ·±å±‚åµŒå¥—çš„å­ç»„ä»¶è®¿é—®æŸä¸ªæ•°æ®æ—¶ï¼Œé¿å…äº†çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶ä¸€å±‚å±‚ä¼ é€’ props çš„ç¹çã€‚ ç»„ä»¶åº“/UI æ¡†æ¶å†…éƒ¨çš„çŠ¶æ€ç®¡ç†ï¼š è®¸å¤šç»„ä»¶åº“ä¼šä½¿ç”¨ Context æ¥ç®¡ç†å…¶å†…éƒ¨ç»„ä»¶çš„ä¸»é¢˜ã€å°ºå¯¸ç­‰é…ç½®ã€‚ useContext èƒ½æ›¿ä»£ Redux å—ï¼Ÿ é€šå¸¸æƒ…å†µä¸‹ï¼ŒuseContext éš¾ä»¥å®Œå…¨æ›¿ä»£ Reduxï¼Œå°¤å…¶æ˜¯åœ¨ä¸­å¤§å‹å’Œå¤æ‚åº”ç”¨ä¸­ã€‚ å®ƒä»¬è§£å†³çš„é—®é¢˜å’Œä¾§é‡ç‚¹æœ‰æ‰€ä¸åŒï¼š\nuseContext ä¼˜åŠ¿ï¼š\nAPI ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚ é€‚ç”¨äºå…±äº«ç›¸å¯¹é™æ€æˆ–ä¸é¢‘ç¹å˜åŒ–çš„æ•°æ®ã€‚ ä»£ç é‡å°‘ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–ç‰¹å®šåŠŸèƒ½çš„å±€éƒ¨çŠ¶æ€å…±äº«ã€‚ useContext çš„å±€é™æ€§ï¼ˆç›¸å¯¹äº Reduxï¼‰ï¼š\næ€§èƒ½é—®é¢˜ï¼š å½“ Context Provider ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹è¯¥ Context çš„ç»„ä»¶ï¼ˆå³ä½¿å…¶ props æˆ– state æ²¡æœ‰ç›´æ¥å˜åŒ–ï¼‰éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å¦‚æœ Context ä¸­åŒ…å«é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼Œä¼šå¯¼è‡´å¤§é‡ä¸å¿…è¦çš„æ¸²æŸ“ã€‚Redux é€šå¸¸ä¼šé…åˆ react-redux çš„ connect æˆ– useSelector è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œåªåœ¨å®é™…éœ€è¦çš„çŠ¶æ€éƒ¨åˆ†å˜åŒ–æ—¶æ‰è§¦å‘ç»„ä»¶æ¸²æŸ“ã€‚ çŠ¶æ€å˜æ›´é€»è¾‘åˆ†æ•£ï¼š Context æœ¬èº«åªè´Ÿè´£ä¼ é€’æ•°æ®ï¼Œä¸æä¾›å¼ºåˆ¶çš„çŠ¶æ€å˜æ›´æ¨¡å¼ï¼ˆå¦‚ Reducerï¼‰ã€‚å½“çŠ¶æ€é€»è¾‘å˜å¾—å¤æ‚æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å˜æ›´é€»è¾‘åˆ†æ•£åœ¨å¤šä¸ªç»„ä»¶ä¸­ï¼Œéš¾ä»¥è¿½è¸ªå’Œè°ƒè¯•ã€‚ ç¼ºä¹å¼€å‘è€…å·¥å…·æ”¯æŒï¼š Redux æœ‰å¼ºå¤§çš„å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥æ—¶é—´æ—…è¡Œè°ƒè¯•ã€æŸ¥çœ‹æ¯æ¬¡çŠ¶æ€å˜æ›´ï¼Œè¿™åœ¨å¤§å‹åº”ç”¨ä¸­æ˜¯å·¨å¤§çš„ä¼˜åŠ¿ã€‚Context æ²¡æœ‰å¼€ç®±å³ç”¨çš„ç±»ä¼¼å·¥å…·ã€‚ å¼‚æ­¥æ“ä½œå¤æ‚ï¼š Context å¤„ç†å¼‚æ­¥æ“ä½œç›¸å¯¹ä¸ä¾¿ï¼Œé€šå¸¸éœ€è¦ç»“åˆ useEffect å’Œ useState æ¥æ‰‹åŠ¨ç®¡ç†åŠ è½½ã€é”™è¯¯ç­‰çŠ¶æ€ã€‚Redux æœ‰ redux-thunk æˆ– redux-saga ç­‰ä¸­é—´ä»¶æ¥å¤„ç†å¤æ‚çš„å¼‚æ­¥æµã€‚ ç»“è®ºï¼š\nå°å‹åº”ç”¨æˆ–ç®€å•å…¨å±€çŠ¶æ€ï¼š useContext æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼Œå®ƒç®€å•é«˜æ•ˆã€‚ ä¸­å¤§å‹æˆ–å¤æ‚åº”ç”¨ï¼š Reduxï¼ˆå°¤å…¶æ˜¯ Redux Toolkitï¼‰ä»ç„¶æ˜¯æ›´å¥å£®ã€å¯ç»´æŠ¤æ€§æ›´é«˜ã€è°ƒè¯•æ›´æ–¹ä¾¿çš„é€‰æ‹©ã€‚ æœ€ä½³å®è·µï¼š å¯ä»¥å°†ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œç”¨ useContext ç®¡ç†ä¸»é¢˜ç­‰ä¸å¸¸å˜ä¸”æ€§èƒ½å½±å“å°çš„æ•°æ®ï¼›ç”¨ Redux ç®¡ç†æ ¸å¿ƒä¸šåŠ¡æ•°æ®å’Œå¤æ‚çš„å¼‚æ­¥çŠ¶æ€ã€‚ Redux ä¸­ thunk / saga çš„ä½œç”¨ï¼Ÿ\r#\råœ¨ Redux ä¸­ï¼Œthunk å’Œ saga éƒ½æ˜¯å¤„ç†å¼‚æ­¥å‰¯ä½œç”¨ (Side Effects) çš„ä¸­é—´ä»¶ï¼Œå› ä¸º Redux çš„ Reducer å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥å¤„ç†å¼‚æ­¥æ“ä½œã€‚\nRedux Thunk (redux-thunk)ï¼š\nä½œç”¨ï¼š å…è®¸ dispatch ä¸€ä¸ªå‡½æ•°ï¼ˆè€Œä¸æ˜¯æ™®é€šå¯¹è±¡ actionï¼‰ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ dispatch å’Œ getState ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåå†æ¬¡ dispatch æ™®é€šçš„ action æ¥æ›´æ–°çŠ¶æ€ã€‚ åŸç†ï¼š å®ƒéå¸¸ç®€å•ï¼Œé€šè¿‡æ£€æµ‹ dispatch çš„å‚æ•°æ˜¯å¦æ˜¯å‡½æ•°ã€‚å¦‚æœæ˜¯å‡½æ•°ï¼Œå°±æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶å°† dispatch å’Œ getState ä¼ å…¥ï¼›å¦‚æœä¸æ˜¯å‡½æ•°ï¼Œå°±ç›´æ¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– Reducerã€‚ ç‰¹ç‚¹ï¼š ç®€å•æ˜“å­¦ï¼š ä»£ç é‡å°‘ï¼Œç†è§£æˆæœ¬ä½ã€‚ ç›´æ¥ï¼š å¼‚æ­¥é€»è¾‘ç›´æ¥å†™åœ¨ thunk å‡½æ•°ä¸­ï¼Œç¬¦åˆ JavaScript ä¹ æƒ¯ã€‚ é€‚åˆï¼š ç®€å•çš„å¼‚æ­¥æ“ä½œï¼ˆå¦‚å•ä¸ª API è°ƒç”¨ï¼‰ã€ä¸€æ¬¡æ€§çš„å¼‚æ­¥æµç¨‹ã€‚ ç¼ºç‚¹ï¼š éšç€å¼‚æ­¥é€»è¾‘å¤æ‚ï¼ˆå¦‚å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ä¸²è”ã€å–æ¶ˆæ“ä½œï¼‰ï¼Œä»£ç å¯èƒ½å˜å¾—éš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•ï¼ˆå›è°ƒåœ°ç‹±ï¼‰ã€‚ Redux Saga (redux-saga)ï¼š\nä½œç”¨ï¼š ä½¿ç”¨ ES6 çš„ Generator å‡½æ•°æ¥å¤„ç†å¼‚æ­¥å‰¯ä½œç”¨ã€‚å®ƒå°†å¼‚æ­¥æ“ä½œè§†ä¸ºä¸€ç³»åˆ—çš„ Effectsï¼ˆå¦‚ callã€putã€takeã€selectï¼‰ï¼Œè¿™äº› Effects æ˜¯çº¯ JS å¯¹è±¡ï¼Œç”± Saga Middleware è§£é‡Šæ‰§è¡Œã€‚ åŸç†ï¼š redux-saga åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„â€œè¿›ç¨‹â€ï¼ˆGenerator å‡½æ•°ï¼‰ï¼Œä¸ä¸»åº”ç”¨è¿›ç¨‹å¹¶è¡Œè¿è¡Œï¼Œé€šè¿‡ç›‘å¬ Redux Actions æ¥è§¦å‘å¼‚æ­¥ä»»åŠ¡ã€‚å®ƒä½¿ç”¨ yield å…³é”®å­—æ¥æš‚åœå’Œæ¢å¤å¼‚æ­¥æ“ä½œï¼Œä½¿å¾—å¼‚æ­¥æµç¨‹çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ã€‚ ç‰¹ç‚¹ï¼š å£°æ˜å¼ã€å‘½ä»¤å¼å…¼é¡¾ï¼š å¼‚æ­¥æµç¨‹æ›´æ˜“äºé˜…è¯»å’Œæµ‹è¯•ï¼ˆå› ä¸º Effects éƒ½æ˜¯çº¯ JS å¯¹è±¡ï¼‰ã€‚ å¼ºå¤§çš„åŠŸèƒ½ï¼š æä¾›å¼ºå¤§çš„å¹¶å‘æ§åˆ¶ã€ä»»åŠ¡å–æ¶ˆã€ç«æ€æ¡ä»¶å¤„ç†ã€é”™è¯¯å¤„ç†ç­‰æœºåˆ¶ã€‚ å¤æ‚æ€§ï¼š å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œéœ€è¦ç†è§£ Generator å‡½æ•°å’Œ Saga Effectã€‚ é€‚åˆï¼š å¤æ‚çš„å¼‚æ­¥æµç¨‹ã€éœ€è¦ç²¾ç»†æ§åˆ¶å¹¶å‘å’Œå–æ¶ˆçš„åœºæ™¯ã€é•¿æ—¶é—´è¿è¡Œçš„åå°ä»»åŠ¡ã€‚ ç¼ºç‚¹ï¼š å¼•å…¥äº†æ–°çš„æ¦‚å¿µï¼ˆGeneratorã€Effectsï¼‰ï¼Œå¢åŠ äº†é¡¹ç›®å¤æ‚åº¦ã€‚ é€‰æ‹©ï¼š\nThunkï¼š é€‚åˆå°å‹é¡¹ç›®æˆ–å¼‚æ­¥é€»è¾‘ç®€å•çš„åœºæ™¯ï¼Œè¿½æ±‚å¿«é€Ÿå®ç°ã€‚ Sagaï¼š é€‚åˆä¸­å¤§å‹é¡¹ç›®ï¼Œå¼‚æ­¥é€»è¾‘å¤æ‚ã€éœ€è¦é«˜å¯æ§æ€§ã€å¯æµ‹è¯•æ€§å¼ºçš„åœºæ™¯ã€‚ Zustandã€Recoilã€Jotai ç”¨è¿‡å—ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ\r#\rï¼ˆä½ éœ€è¦æ ¹æ®ä½ æ˜¯å¦æœ‰å®é™…ä½¿ç”¨ç»éªŒæ¥å›ç­”ï¼‰\næˆ‘ç”¨è¿‡çš„ï¼š\nZustand (æˆ‘ç”¨è¿‡): ä¼˜ç‚¹ï¼š æç®€ä¸”è½»é‡ï¼š API æå…¶ç®€æ´ï¼Œå‡ è¡Œä»£ç å°±èƒ½æå®šçŠ¶æ€ç®¡ç†ï¼Œæ¯” Redux ç®€å•å¤ªå¤šã€‚ æ— éœ€ Providerï¼š æ— éœ€åƒ Context æˆ– Redux é‚£æ ·åŒ…è£¹ Providerï¼Œç»„ä»¶å¯ä»¥ç›´æ¥ä» Store è¯»å–çŠ¶æ€ã€‚ å“åº”å¼æ›´æ–°ï¼š é€šè¿‡ selector æœºåˆ¶ï¼Œåªæœ‰è¢«é€‰æ‹©çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚ åŸºäº Hooksï¼š ä¸ React Hooks å¤©ç„¶é›†æˆã€‚ å¯ç»„åˆæ€§å¼ºï¼š æ˜“äºä¸å…¶ä»– Hookã€å·¥å…·ç»“åˆã€‚ ç¼ºç‚¹ï¼š ä¸å¼ºåˆ¶ä¸¥æ ¼çš„å•ä¸€æ•°æ®æºå’Œçº¯å‡½æ•°æ›´æ–°ï¼Œåœ¨å¤§å‹å›¢é˜Ÿåä½œæ—¶å¯èƒ½éœ€è¦é¢å¤–çš„è§„èŒƒã€‚ ç¼ºå°‘åƒ Redux DevTools é‚£æ ·å¼€ç®±å³ç”¨çš„æ—¶é—´æ—…è¡Œè°ƒè¯•åŠŸèƒ½ï¼ˆä½†æœ‰ç¤¾åŒºæ’ä»¶ï¼‰ã€‚ å¼‚æ­¥æ“ä½œç›¸å¯¹ç®€å•ï¼Œéœ€è¦æ‰‹åŠ¨ç»“åˆ async/await æˆ– fetchã€‚ é€‚ç”¨åœºæ™¯ï¼š å°å‹åˆ°ä¸­å‹é¡¹ç›®ã€å¯¹åŒ…ä½“ç§¯å’Œå­¦ä¹ æˆæœ¬è¦æ±‚é«˜çš„é¡¹ç›®ã€éœ€è¦å¿«é€ŸåŸå‹å¼€å‘ã€‚ æˆ‘äº†è§£ä½†æœªæ·±å…¥ä½¿ç”¨çš„ (æˆ–è€…åªåœ¨å° demo ä¸­ä½“éªŒè¿‡)ï¼š\nRecoil (Facebook æ¨å‡º)ï¼š\nä¼˜ç‚¹ï¼š åŸå­åŒ–çŠ¶æ€ï¼š å°†çŠ¶æ€æ‹†åˆ†æˆç»†ç²’åº¦çš„â€œåŸå­ (Atoms)â€ï¼Œæ¯ä¸ªç»„ä»¶åªè®¢é˜…å…¶æ‰€éœ€çš„åŸå­ã€‚ æ€§èƒ½ä¼˜åŒ–ï¼š åªæœ‰è®¢é˜…äº†ç‰¹å®šåŸå­çš„ç»„ä»¶åœ¨åŸå­å˜åŒ–æ—¶æ‰ä¼šæ¸²æŸ“ï¼Œå¤©ç„¶çš„æ€§èƒ½ä¼˜åŒ–ã€‚ æ´¾ç”ŸçŠ¶æ€ (Selectors)ï¼š å¼ºå¤§çš„ Selector æœºåˆ¶ç”¨äºä» Atoms æ´¾ç”Ÿè®¡ç®—çŠ¶æ€ï¼Œå¹¶ä¸”æ˜¯å¯ç¼“å­˜çš„ã€‚ ä¸ React Concurrent Mode å…¼å®¹ï¼š è®¾è®¡ä¹‹åˆå°±è€ƒè™‘äº† React çš„å¹¶å‘ç‰¹æ€§ã€‚ ç¼ºç‚¹ï¼š å­¦ä¹ æ›²çº¿æ¯” Zustand ç¨é™¡å³­ï¼Œå¼•å…¥äº† Atoms å’Œ Selectors æ¦‚å¿µã€‚ æ–‡æ¡£å’Œç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹ Redux å’Œ Zustand ç¨å¼±ä¸€äº›ï¼ˆä½†ä¹Ÿåœ¨å¿«é€Ÿå‘å±•ï¼‰ã€‚ ç›¸å¯¹æ¯”è¾ƒæ–°ï¼Œæˆç†Ÿåº¦å°šä¸å¦‚ Reduxã€‚ é€‚ç”¨åœºæ™¯ï¼š å¤§å‹å¤æ‚åº”ç”¨ã€éœ€è¦é«˜æ€§èƒ½å’Œç»†ç²’åº¦çŠ¶æ€æ§åˆ¶ã€è¿½æ±‚ä¸ React æœ€æ–°ç‰¹æ€§ç´§å¯†ç»“åˆã€‚ Jotai (å— Recoil å¯å‘)ï¼š\nä¼˜ç‚¹ï¼š åŸå­åŒ–ä¸”æ›´å°ï¼š æ¯” Recoil æ›´è½»é‡ï¼Œæ›´å°çš„åŒ…ä½“ç§¯ã€‚ æç®€ APIï¼š API ç”šè‡³æ¯” Recoil æ›´ç®€å•ï¼Œæ ¸å¿ƒæ˜¯ atom å’Œ useAtomã€‚ Typescript å‹å¥½ï¼š å¤©ç„¶æ”¯æŒ TypeScriptã€‚ é«˜åº¦å¯ç»„åˆï¼š åŸå­å¯ä»¥äº’ç›¸ç»„åˆã€‚ ç¼ºç‚¹ï¼š æ¦‚å¿µæŠ½è±¡ï¼Œåˆæ¬¡ç†è§£å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ã€‚ ç¤¾åŒºç”Ÿæ€å’Œå·¥å…·é“¾ç›¸å¯¹è¾ƒæ–°ã€‚ é€‚ç”¨åœºæ™¯ï¼š è¿½æ±‚æè‡´è½»é‡å’Œé«˜æ€§èƒ½ã€é«˜åº¦ TypeScript åŒ–çš„é¡¹ç›®ã€éœ€è¦ç»†ç²’åº¦çŠ¶æ€æ§åˆ¶ã€‚ æ€»ç»“ï¼š å¯¹äºå·¥å…·é“¾å¹³å°è¿™æ ·çš„é¡¹ç›®ï¼Œå¦‚æœä¸éœ€è¦å¤æ‚çš„å¼‚æ­¥æµå’Œæ—¶é—´æ—…è¡Œè°ƒè¯•ï¼ŒZustand æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒè½»é‡ã€ç®€å•ï¼Œèƒ½å¿«é€Ÿå®ç°åŠŸèƒ½ã€‚å¦‚æœé¡¹ç›®éå¸¸åºå¤§ï¼Œå¯¹çŠ¶æ€ç»†ç²’åº¦æ§åˆ¶å’Œæœªæ¥æ‰©å±•æ€§æœ‰æé«˜è¦æ±‚ï¼Œå¯èƒ½ä¼šè€ƒè™‘ Recoilã€‚Redux Toolkit ä»ç„¶æ˜¯ç¨³å¥çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯æœ‰ Redux ç»éªŒçš„å›¢é˜Ÿã€‚\nğŸŒ å¼‚æ­¥ä¸ç½‘ç»œè¯·æ±‚\r#\rReact ä¸­å¦‚ä½•å‘é€å¼‚æ­¥è¯·æ±‚ï¼Ÿ\r#\råœ¨ React ä¸­å‘é€å¼‚æ­¥è¯·æ±‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\nåœ¨ useEffect Hook ä¸­å‘é€ï¼ˆå‡½æ•°ç»„ä»¶ï¼Œæœ€å¸¸ç”¨ï¼‰ï¼š\nè¿™æ˜¯å¤„ç†æ•°æ®è·å–å‰¯ä½œç”¨çš„æ ‡å‡†æ–¹å¼ã€‚ é€šå¸¸ä¼šç»“åˆ useState æ¥ç®¡ç†è¯·æ±‚çš„åŠ è½½çŠ¶æ€ (isLoading)ã€é”™è¯¯çŠ¶æ€ (isError) å’Œæ•°æ®æœ¬èº«ã€‚ éœ€è¦æ³¨æ„ä¾èµ–æ•°ç»„å’Œæ¸…ç†å‡½æ•°ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼å’Œç«æ€æ¡ä»¶ã€‚ import React, { useState, useEffect } from \u0026#39;react\u0026#39;; function MyComponent() { const [data, setData] = useState(null); const [loading, setLoading] = useState(true); const [error, setError] = useState(null); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { try { const response = await fetch(\u0026#39;/api/data\u0026#39;); if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); } const result = await response.json(); setData(result); } catch (err) { setError(err); } finally { setLoading(false); } }; fetchData(); // å¦‚æœæœ‰éœ€è¦æ¸…ç†çš„è®¢é˜…æˆ–å®šæ—¶å™¨ï¼Œåœ¨è¿™é‡Œè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•° return () =\u0026gt; { // ä¾‹å¦‚ï¼Œå–æ¶ˆè¯·æ±‚ï¼ˆå¦‚æœä½¿ç”¨ abort controllerï¼‰ }; }, []); // ç©ºæ•°ç»„è¡¨ç¤ºåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ if (loading) return \u0026lt;div\u0026gt;Loading...\u0026lt;/div\u0026gt;; if (error) return \u0026lt;div\u0026gt;Error: {error.message}\u0026lt;/div\u0026gt;; return \u0026lt;div\u0026gt;Data: {JSON.stringify(data)}\u0026lt;/div\u0026gt;; } åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å‘é€ï¼š\nå½“å¼‚æ­¥è¯·æ±‚æ˜¯ç”±ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰è§¦å‘æ—¶ï¼Œç›´æ¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ã€‚ function MyForm() { const handleSubmit = async (e) =\u0026gt; { e.preventDefault(); try { const response = await fetch(\u0026#39;/api/submit\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: \u0026#39;...\u0026#39; }); // å¤„ç†å“åº” } catch (error) { // å¤„ç†é”™è¯¯ } }; return \u0026lt;form onSubmit={handleSubmit}\u0026gt;...\u0026lt;/form\u0026gt;; } ä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…ï¼š\nä¸ºäº†å¤ç”¨æ•°æ®è¯·æ±‚é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†ï¼Œé€šå¸¸ä¼šå°† useEffect ä¸­çš„è¯·æ±‚é€»è¾‘å°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰ Hookã€‚ // ä¾‹å¦‚ï¼šuseFetch.js import { useState, useEffect } from \u0026#39;react\u0026#39;; function useFetch(url) { const [data, setData] = useState(null); const [loading, setLoading] = useState(true); const [error, setError] = useState(null); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { try { const response = await fetch(url); const result = await response.json(); setData(result); } catch (err) { setError(err); } finally { setLoading(false); } }; fetchData(); }, [url]); return { data, loading, error }; } // åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š // const { data, loading, error } = useFetch(\u0026#39;/api/users\u0026#39;); ä½¿ç”¨ä¸“é—¨çš„æ•°æ®è¯·æ±‚åº“/Hooks (å¦‚ react-query, SWR)ï¼š\nè¿™äº›åº“æä¾›äº†æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚ç¼“å­˜ã€åå°é‡æ–°éªŒè¯ã€é”™è¯¯é‡è¯•ã€åˆ†é¡µã€æ•°æ®åŒæ­¥ç­‰ã€‚ æ€ä¹ˆå¤„ç†åŠ è½½ä¸­ã€é”™è¯¯å’Œå–æ¶ˆè¯·æ±‚ï¼Ÿ\r#\r1. åŠ è½½ä¸­ (Loading State)ï¼š\nå®ç°ï¼š ä½¿ç”¨ä¸€ä¸ª boolean ç±»å‹çš„çŠ¶æ€å˜é‡ï¼ˆå¦‚ isLoading æˆ– loadingï¼‰ã€‚åœ¨è¯·æ±‚å¼€å§‹å‰è®¾ä¸º trueï¼Œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åè®¾ä¸º falseã€‚ ç”¨æˆ·ä½“éªŒï¼š åœ¨ UI ä¸Šæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼ˆSpinnerï¼‰ã€éª¨æ¶å± (Skeleton Screen)ã€ç¦ç”¨æŒ‰é’®ç­‰ã€‚ 2. é”™è¯¯ (Error Handling)ï¼š\nå®ç°ï¼š ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å­˜å‚¨é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚ errorï¼Œå¯ä»¥æ˜¯ null æˆ– Error å¯¹è±¡ï¼‰ã€‚åœ¨ try-catch å—ä¸­æ•è· fetch æˆ– axios æŠ›å‡ºçš„å¼‚å¸¸ã€‚ ç”¨æˆ·ä½“éªŒï¼š æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€é‡è¯•æŒ‰é’®ã€é”™è¯¯æ—¥å¿—è®°å½•ã€‚ 3. å–æ¶ˆè¯·æ±‚ (Request Cancellation)ï¼š\né‡è¦æ€§ï¼š é¿å…åœ¨ç»„ä»¶å¸è½½åå¯¹å·²å¸è½½ç»„ä»¶çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼ˆå¯¼è‡´â€œå†…å­˜æ³„æ¼â€è­¦å‘Šï¼‰ï¼Œä»¥åŠé¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ç»§ç»­æ‰§è¡Œã€‚ å®ç°æ–¹å¼ï¼š AbortController (Fetch API)ï¼š è¿™æ˜¯ç°ä»£æµè§ˆå™¨åŸç”Ÿçš„æ–¹å¼ã€‚åœ¨ useEffect çš„æ¸…ç†å‡½æ•°ä¸­ï¼Œå¯ä»¥è°ƒç”¨ AbortController çš„ abort() æ–¹æ³•æ¥å–æ¶ˆè¯·æ±‚ã€‚ useEffect(() =\u0026gt; { const controller = new AbortController(); const signal = controller.signal; const fetchData = async () =\u0026gt; { try { const response = await fetch(\u0026#39;/api/data\u0026#39;, { signal }); // ... } catch (err) { if (err.name === \u0026#39;AbortError\u0026#39;) { console.log(\u0026#39;Fetch aborted\u0026#39;); } else { setError(err); } } finally { setLoading(false); } }; fetchData(); return () =\u0026gt; { controller.abort(); // ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚ }; }, []); Axios çš„å–æ¶ˆä»¤ç‰Œ (Cancellation Token)ï¼š Axios æä¾›äº†è‡ªå·±çš„å–æ¶ˆè¯·æ±‚æœºåˆ¶ã€‚ è¯·æ±‚åº“/Hooks çš„å†…ç½®æ”¯æŒï¼š react-query å’Œ SWR ç­‰åº“é€šå¸¸ä¼šå†…ç½®å¤„ç†è¯·æ±‚å–æ¶ˆå’Œç¼“å­˜ï¼Œç®€åŒ–å¼€å‘ã€‚ é¡¹ç›®ä¸­å¦‚ä½•åšæ¥å£ç¼“å­˜ / åˆ†é¡µåŠ è½½ï¼Ÿ\r#\r1. æ¥å£ç¼“å­˜ (API Caching)ï¼š æ¥å£ç¼“å­˜æ˜¯æé«˜ç”¨æˆ·ä½“éªŒå’Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½çš„å…³é”®ã€‚\nå®¢æˆ·ç«¯ç¼“å­˜ (å‰ç«¯ç¼“å­˜)ï¼š HTTP ç¼“å­˜ï¼š åˆ©ç”¨ HTTP å“åº”å¤´ï¼ˆCache-Control, ETag, Last-Modifiedï¼‰è®©æµè§ˆå™¨ç¼“å­˜èµ„æºã€‚å¯¹äº GET è¯·æ±‚ï¼Œå¦‚æœèµ„æºæœªæ”¹å˜ï¼Œæµè§ˆå™¨å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚ å†…å­˜ç¼“å­˜ï¼š çŠ¶æ€ç®¡ç†åº“ï¼š åœ¨ Redux Store ä¸­ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç¼“å­˜å±‚ï¼Œæˆ–è€…ä½¿ç”¨ Context API æ¥å­˜å‚¨å·²è¯·æ±‚è¿‡çš„æ•°æ®ã€‚ ä¸“é—¨çš„æ•°æ®è¯·æ±‚åº“ï¼š react-query (æˆ– SWR) æ˜¯å¤„ç†æ•°æ®è¯·æ±‚å’Œç¼“å­˜çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä»¬æä¾›äº†è‡ªåŠ¨ç¼“å­˜ã€åå°é‡æ–°éªŒè¯ã€æ•°æ®è¿‡æœŸã€ä¹è§‚æ›´æ–°ç­‰åŠŸèƒ½ã€‚è¿™æ˜¯æˆ‘å®é™…é¡¹ç›®ä¸­å®ç°æ¥å£ç¼“å­˜çš„é¦–é€‰ã€‚ è‡ªå®šä¹‰ Hookï¼š å°è£…ä¸€ä¸ª useCacheFetchï¼Œå†…éƒ¨ä½¿ç”¨ Map æˆ– localStorage å­˜å‚¨æ•°æ®ã€‚ æœåŠ¡å™¨ç«¯ç¼“å­˜ (CDN / Reverse Proxy / åº”ç”¨çº§ç¼“å­˜)ï¼š å¯¹äºå…¬å…±ä¸”ä¸ç»å¸¸å˜åŒ–çš„æ¥å£ï¼Œå¯ä»¥åœ¨ CDNã€Nginx æˆ–åç«¯åº”ç”¨å±‚ï¼ˆå¦‚ Redisï¼‰è¿›è¡Œç¼“å­˜ã€‚ 2. åˆ†é¡µåŠ è½½ (Pagination / Infinite Scroll)ï¼š å¯¹äºå¤§é‡æ•°æ®çš„åˆ—è¡¨ï¼Œé€šå¸¸é‡‡ç”¨åˆ†é¡µåŠ è½½æ¥é¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚\nä¼ ç»Ÿåˆ†é¡µ (Pagination)ï¼š\nåŸç†ï¼š æ¯æ¬¡è¯·æ±‚æŒ‡å®šé¡µç å’Œæ¯é¡µæ•°é‡çš„æ•°æ®ï¼ˆpage=1\u0026amp;size=10ï¼‰ã€‚åç«¯è¿”å›è¯¥é¡µçš„æ•°æ®å’Œæ€»é¡µæ•°ã€‚ å®ç°ï¼š å‰ç«¯ç»´æŠ¤å½“å‰é¡µç  currentPage å’Œæ¯é¡µæ•°é‡ pageSize çŠ¶æ€ã€‚ç”¨æˆ·ç‚¹å‡»é¡µç æ—¶ï¼Œæ›´æ–° currentPage å¹¶é‡æ–°å‘é€è¯·æ±‚ã€‚ ä¼˜ç‚¹ï¼š ç”¨æˆ·å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ä»»ä½•é¡µï¼Œæ€»æ•°æ˜ç¡®ã€‚ ç¼ºç‚¹ï¼š æ¯æ¬¡ç¿»é¡µéƒ½éœ€è¦é‡æ–°è¯·æ±‚æ•°æ®ã€‚ æ— é™æ»šåŠ¨ (Infinite Scroll / Load More)ï¼š\nåŸç†ï¼š åˆå§‹åŠ è½½å°‘é‡æ•°æ®ã€‚å½“ç”¨æˆ·æ»šåŠ¨åˆ°åˆ—è¡¨åº•éƒ¨æ—¶ï¼Œè§¦å‘åŠ è½½æ›´å¤šæ•°æ®çš„è¯·æ±‚ï¼ˆoffset=X\u0026amp;limit=Y æˆ– lastId=Z\u0026amp;limit=Yï¼‰ã€‚æ–°æ•°æ®è¿½åŠ åˆ°ç°æœ‰åˆ—è¡¨ã€‚ å®ç°ï¼š å‰ç«¯ç»´æŠ¤ dataList å’Œ page æˆ– offset çŠ¶æ€ã€‚ ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ã€‚ å¯ä»¥ä½¿ç”¨ Intersection Observer API æ£€æµ‹ä¸€ä¸ªå ä½å…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼Œä»è€Œè§¦å‘åŠ è½½æ›´å¤šã€‚ åœ¨è¯·æ±‚æ—¶æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼Œè¯·æ±‚å¤±è´¥æ—¶æ˜¾ç¤ºé‡è¯•æŒ‰é’®ã€‚ ä¼˜ç‚¹ï¼š æå‡ç”¨æˆ·ä½“éªŒï¼Œæ„Ÿè§‰æ•°æ®æºæºä¸æ–­ã€‚ ç¼ºç‚¹ï¼š æ— æ³•ç›´æ¥è·³è½¬åˆ°ç‰¹å®šé¡µç ï¼Œå›æ»šåˆ°é¡¶éƒ¨å¯èƒ½éœ€è¦é‡æ–°åŠ è½½æˆ–è¿›è¡Œç¼“å­˜ä¼˜åŒ–ã€‚ ç»“åˆä½¿ç”¨ï¼š\nreact-query / SWR çš„åˆ†é¡µ Hookï¼š è¿™äº›åº“é€šå¸¸æä¾›äº†ä¸“é—¨çš„ Hooksï¼ˆå¦‚ useInfiniteQueryï¼‰æ¥ç®€åŒ–æ— é™æ»šåŠ¨çš„å®ç°ï¼Œå¤„ç†äº†åŠ è½½çŠ¶æ€ã€é”™è¯¯ã€ç¼“å­˜å’Œæ•°æ®åˆå¹¶ã€‚ ç”¨è¿‡ react-query å—ï¼Ÿæ ¸å¿ƒç‰¹æ€§ï¼Ÿ\r#\rï¼ˆå¦‚æœä½ ç”¨è¿‡ï¼Œå¯ä»¥è¯¦ç»†è¯´ï¼›æ²¡ç”¨è¿‡ï¼Œå°±è¯´äº†è§£å’Œå…¶ä¼˜åŠ¿ï¼‰\næˆ‘ç”¨è¿‡ react-query (ç°åœ¨å« TanStack Query)ã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒå°†æœåŠ¡å™¨ç«¯æ•°æ®ï¼ˆå¼‚æ­¥æ•°æ®ï¼‰çš„ç®¡ç†ä»ç»„ä»¶çŠ¶æ€ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶æä¾›äº†å¤§é‡å¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæå¤§åœ°ç®€åŒ–äº†æ•°æ®è¯·æ±‚é€»è¾‘ã€‚\næ ¸å¿ƒç‰¹æ€§ï¼š\næ•°æ®ç¼“å­˜ (Caching)ï¼š é»˜è®¤å¼€å¯ç¼“å­˜ï¼Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚ æ•°æ®åœ¨åå°â€œstaleâ€åä¼šè‡ªåŠ¨é‡æ–°è·å–ï¼ˆstale-while-revalidate ç­–ç•¥ï¼‰ï¼Œç¡®ä¿æ•°æ®æ–°é²œåº¦ã€‚ cacheTime å’Œ staleTimeï¼š ç»†ç²’åº¦æ§åˆ¶æ•°æ®åœ¨ç¼“å­˜ä¸­ä¿ç•™å¤šä¹…ä»¥åŠå¤šä¹…åå˜ä¸ºâ€œè¿‡æœŸâ€çŠ¶æ€ã€‚ åå°é‡æ–°éªŒè¯ (Background Re-fetching)ï¼š å½“çª—å£é‡æ–°è·å¾—ç„¦ç‚¹ã€ç½‘ç»œé‡æ–°è¿æ¥ã€æˆ–é€šè¿‡ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨åå°é‡æ–°è·å–æ•°æ®ï¼Œç¡®ä¿æ˜¾ç¤ºçš„æ˜¯æœ€æ–°æ•°æ®ã€‚ æŸ¥è¯¢çŠ¶æ€ç®¡ç†ï¼š æä¾›äº†ä¸€è‡´çš„æŸ¥è¯¢çŠ¶æ€ (isLoading, isFetching, isError, isSuccess) å’Œé”™è¯¯å¤„ç†ï¼Œä½¿ç»„ä»¶çš„ UI é€»è¾‘æ›´æ¸…æ™°ã€‚ è‡ªåŠ¨é‡è¯• (Automatic Retries)ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤±è´¥çš„æŸ¥è¯¢ä¼šè‡ªåŠ¨é‡è¯•å‡ æ¬¡ï¼Œæé«˜äº†è¯·æ±‚çš„å¥å£®æ€§ã€‚ åˆ†é¡µå’Œæ— é™æ»šåŠ¨æŸ¥è¯¢ (useInfiniteQuery)ï¼š ç®€åŒ–äº†åˆ†é¡µå’Œæ— é™æ»šåŠ¨åˆ—è¡¨çš„å®ç°ï¼Œè‡ªåŠ¨å¤„ç†æ•°æ®çš„åˆå¹¶å’ŒåŠ è½½æ›´å¤šçŠ¶æ€ã€‚ ä¹è§‚æ›´æ–° (Optimistic Updates)ï¼š å…è®¸åœ¨æ•°æ®æ›´æ–°è¯·æ±‚å‘é€æˆåŠŸä¹‹å‰ï¼Œå°±ç«‹å³æ›´æ–° UIï¼Œç»™ç”¨æˆ·å³æ—¶åé¦ˆï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå†å›æ»š UIã€‚ ä¾èµ–æŸ¥è¯¢ (Dependent Queries)ï¼š å¯ä»¥æ–¹ä¾¿åœ°å®šä¹‰æŸ¥è¯¢ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿æŸä¸ªæŸ¥è¯¢åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢æˆåŠŸåæ‰æ‰§è¡Œã€‚ å¼€å‘è€…å·¥å…·ï¼š æä¾›äº†å¼ºå¤§çš„ DevToolsï¼Œç”¨äºæ£€æŸ¥æŸ¥è¯¢çŠ¶æ€ã€ç¼“å­˜ã€è¯·æ±‚ç­‰ï¼Œæå¤§åœ°æå‡äº†è°ƒè¯•æ•ˆç‡ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æˆ‘åœ¨é¡¹ç›®ä¸­ä¸»è¦ç”¨ react-query æ¥ç®¡ç†å„ç§ API è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¾‹å¦‚ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºã€è¡¨å•æ•°æ®çš„æäº¤ã€å®æ—¶æ•°æ®çš„æ›´æ–°ç­‰ã€‚å®ƒæå¤§åœ°å‡å°‘äº†æˆ‘åœ¨ useEffect ä¸­æ‰‹åŠ¨ç®¡ç† loadingã€errorã€data çŠ¶æ€çš„æ ·æ¿ä»£ç ï¼Œå¹¶å¤©ç„¶è§£å†³äº†è®¸å¤šæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚\nğŸ“¦ ç»„ä»¶é€šä¿¡ä¸å¤ç”¨\r#\rçˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡ï¼Ÿå…„å¼Ÿç»„ä»¶æ€ä¹ˆé€šä¿¡ï¼Ÿ\r#\r1. çˆ¶å­ç»„ä»¶é€šä¿¡ï¼š\nçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼ï¼šé€šè¿‡ Props è¿™æ˜¯æœ€ç›´æ¥å’Œå¸¸ç”¨çš„æ–¹å¼ã€‚çˆ¶ç»„ä»¶å°†æ•°æ®ä½œä¸ºå±æ€§ï¼ˆpropsï¼‰ä¼ é€’ç»™å­ç»„ä»¶ã€‚å­ç»„ä»¶é€šè¿‡å…¶ props å¯¹è±¡è®¿é—®è¿™äº›æ•°æ®ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const message = \u0026#34;Hello from Parent!\u0026#34;; return \u0026lt;ChildComponent data={message} /\u0026gt;; } // ChildComponent.js function ChildComponent(props) { return \u0026lt;p\u0026gt;{props.data}\u0026lt;/p\u0026gt;; // æˆ– { data } è§£æ„ } å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼šé€šè¿‡å›è°ƒå‡½æ•° (Callback Functions) çˆ¶ç»„ä»¶å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º prop ä¼ é€’ç»™å­ç»„ä»¶ã€‚å­ç»„ä»¶åœ¨éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®æˆ–è§¦å‘çˆ¶ç»„ä»¶è¡Œä¸ºæ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠæ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const handleChildClick = (dataFromChild) =\u0026gt; { console.log(\u0026#39;Received from child:\u0026#39;, dataFromChild); }; return \u0026lt;ChildButton onClick={handleChildClick} /\u0026gt;; } // ChildButton.js function ChildButton(props) { return \u0026lt;button onClick={() =\u0026gt; props.onClick(\u0026#39;Data sent!\u0026#39;)}\u0026gt;Click me\u0026lt;/button\u0026gt;; } useRef (ç‰¹æ®Šæƒ…å†µ)ï¼š çˆ¶ç»„ä»¶é€šè¿‡ ref ç›´æ¥è®¿é—®å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹æˆ–å®ä¾‹ï¼ˆç±»ç»„ä»¶ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ useImperativeHandle æš´éœ²å­ç»„ä»¶çš„ç‰¹å®šæ–¹æ³•ç»™çˆ¶ç»„ä»¶è°ƒç”¨ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºéå£°æ˜å¼çš„äº¤äº’ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ‰“ç ´äº†å•å‘æ•°æ®æµã€‚ 2. å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼š\nå…„å¼Ÿç»„ä»¶ä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œéœ€è¦é€šè¿‡å®ƒä»¬çš„å…±åŒçˆ¶ç»„ä»¶ä½œä¸ºâ€œä¸­é—´äººâ€è¿›è¡Œé€šä¿¡ã€‚\né€šè¿‡å…±åŒçˆ¶ç»„ä»¶ (çŠ¶æ€æå‡)ï¼š å°†å…±äº«çš„çŠ¶æ€æå‡åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ä¸­ç®¡ç†ã€‚ çˆ¶ç»„ä»¶å°†çŠ¶æ€é€šè¿‡ props ä¼ é€’ç»™ä¸€ä¸ªå…„å¼Ÿç»„ä»¶ï¼ˆæ¥æ”¶è€…ï¼‰ã€‚ çˆ¶ç»„ä»¶å°†æ›´æ–°çŠ¶æ€çš„å›è°ƒå‡½æ•°é€šè¿‡ props ä¼ é€’ç»™å¦ä¸€ä¸ªå…„å¼Ÿç»„ä»¶ï¼ˆå‘é€è€…ï¼‰ã€‚ å‘é€è€…å…„å¼Ÿç»„ä»¶è°ƒç”¨å›è°ƒå‡½æ•°æ¥æ›´æ–°çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå½±å“æ¥æ”¶è€…å…„å¼Ÿç»„ä»¶çš„æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const [sharedData, setSharedData] = useState(\u0026#39;\u0026#39;); return ( \u0026lt;div\u0026gt; \u0026lt;SiblingA onDataChange={setSharedData} /\u0026gt; \u0026lt;SiblingB data={sharedData} /\u0026gt; \u0026lt;/div\u0026gt; ); } // SiblingA.js function SiblingA({ onDataChange }) { return \u0026lt;button onClick={() =\u0026gt; onDataChange(\u0026#39;Hello from A\u0026#39;)}\u0026gt;Send Data to B\u0026lt;/button\u0026gt;; } // SiblingB.js function SiblingB({ data }) { return \u0026lt;p\u0026gt;Received in B: {data}\u0026lt;/p\u0026gt;; } Context API (useContext)ï¼š å¯¹äºéœ€è¦è·¨è¶Šå¤šä¸ªå±‚çº§æˆ–å¤šä¸ªå…„å¼Ÿç»„ä»¶å…±äº«çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ Context APIã€‚å…±åŒçˆ¶ç»„ä»¶ä½œä¸º Providerï¼Œæä¾›å…±äº«æ•°æ®å’Œæ›´æ–°å‡½æ•°ï¼›å…„å¼Ÿç»„ä»¶ä½œä¸º Consumerï¼ˆé€šè¿‡ useContext Hookï¼‰ï¼Œè·å–æ‰€éœ€æ•°æ®ã€‚ å…¨å±€çŠ¶æ€ç®¡ç†åº“ (Redux, Zustand, etc.)ï¼š å¯¹äºæ›´å¤æ‚ã€éœ€è¦é›†ä¸­ç®¡ç†å’Œåè°ƒçš„å…¨å±€çŠ¶æ€ï¼Œä½¿ç”¨ Reduxã€Zustand ç­‰çŠ¶æ€ç®¡ç†åº“æ˜¯æœ€ä½³é€‰æ‹©ã€‚å…„å¼Ÿç»„ä»¶éƒ½ä» Store ä¸­è®¢é˜…æ‰€éœ€çš„çŠ¶æ€ï¼Œå¹¶ dispatch action æ¥æ›´æ–°çŠ¶æ€ã€‚ ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Ÿ\r#\ré«˜é˜¶ç»„ä»¶ (Higher-Order Component, HOC) æ˜¯ React ä¸­ç”¨äºç»„ä»¶é€»è¾‘å¤ç”¨çš„ä¸€ç§é«˜çº§æŠ€æœ¯ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ï¼ˆå¢å¼ºå‹ï¼‰ç»„ä»¶ã€‚\nå®šä¹‰ï¼š HOC æ˜¯ä¸€ç§çº¦å®šä¿—æˆçš„æ¨¡å¼ï¼Œå®ƒä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„ç»“æ„é€šå¸¸æ˜¯ï¼šconst EnhancedComponent = higherOrderComponent(WrappedComponent);\nHOC çš„ä½œç”¨ï¼š\né€»è¾‘å¤ç”¨ï¼š æå–å’Œå¤ç”¨å…¬å…±çš„çŠ¶æ€é€»è¾‘æˆ–è¡Œä¸ºï¼Œé¿å…åœ¨å¤šä¸ªç»„ä»¶ä¸­é‡å¤ç¼–å†™ã€‚ ä»£ç è§£è€¦ï¼š å°†å¢å¼ºé€»è¾‘ä¸ UI æ¸²æŸ“é€»è¾‘åˆ†ç¦»ã€‚ Props åŠ«æŒ/æ³¨å…¥ï¼š å¯ä»¥ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤ä¼ é€’ç»™è¢«åŒ…è£…ç»„ä»¶çš„ propsã€‚ æ¸²æŸ“åŠ«æŒï¼š å¯ä»¥æ§åˆ¶è¢«åŒ…è£…ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ï¼ˆä¾‹å¦‚ï¼Œæ¡ä»¶æ¸²æŸ“ã€åŒ…è£…é¢å¤–çš„å…ƒç´ ï¼‰ã€‚ ç¤ºä¾‹ï¼šwithLoading HOC (æ·»åŠ åŠ è½½çŠ¶æ€é€»è¾‘)\nimport React, { useState, useEffect } from \u0026#39;react\u0026#39;; function withLoading(WrappedComponent) { return function WithLoadingComponent(props) { const [loading, setLoading] = useState(true); useEffect(() =\u0026gt; { // æ¨¡æ‹Ÿæ•°æ®åŠ è½½ setTimeout(() =\u0026gt; { setLoading(false); }, 2000); }, []); if (loading) { return \u0026lt;div\u0026gt;Loading...\u0026lt;/div\u0026gt;; } return \u0026lt;WrappedComponent {...props} /\u0026gt;; // ä¼ é€’åŸå§‹ props }; } // å¦‚ä½•ä½¿ç”¨ï¼š // const MyDataDisplay = ({ data }) =\u0026gt; \u0026lt;p\u0026gt;{data}\u0026lt;/p\u0026gt;; // const MyDataDisplayWithLoading = withLoading(MyDataDisplay); // \u0026lt;MyDataDisplayWithLoading data=\u0026#34;Some important data\u0026#34; /\u0026gt; HOC çš„ä¼˜ç¼ºç‚¹ï¼š\nä¼˜ç‚¹ï¼š é€»è¾‘å¤ç”¨æ€§å¼ºï¼Œå¯¹åŸå§‹ç»„ä»¶ä¾µå…¥æ€§å°ã€‚ ç¼ºç‚¹ï¼š å‘½åå†²çªï¼š å¦‚æœå¤šä¸ª HOC æ³¨å…¥åŒå propsï¼Œå¯èƒ½ä¼šè¦†ç›–ã€‚ Props æ¥æºä¸æ˜ç¡®ï¼š å¾ˆéš¾çœ‹å‡ºæŸä¸ª prop æ˜¯ä»å“ªä¸ª HOC æ³¨å…¥çš„ã€‚ Wrapper Hellï¼š å¤šä¸ª HOC åµŒå¥—å¯èƒ½å¯¼è‡´ç»„ä»¶æ ‘å±‚çº§è¿‡æ·±ï¼Œè°ƒè¯•å›°éš¾ã€‚ ä¸å…¼å®¹ Hooks (æ—©æœŸ)ï¼š åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼ŒHOC æ˜¯ä¸»è¦çš„é€»è¾‘å¤ç”¨æ–¹å¼ã€‚Hooks å‡ºç°åï¼Œè‡ªå®šä¹‰ Hook æˆä¸ºæ›´æ¨èçš„æ–¹å¼ï¼Œå› ä¸ºå®ƒä»¬è§£å†³äº† HOC çš„ä¸€äº›ç—›ç‚¹ã€‚ ä»€ä¹ˆæ˜¯ render props æ¨¡å¼ï¼Ÿ\r#\rRender Props æ˜¯ä¸€ç§ React ä¸­ç”¨äºç»„ä»¶é€»è¾‘å¤ç”¨çš„æ¨¡å¼ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸€ä¸ªç»„ä»¶çš„ props æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼ˆè¿™ä¸ªå‡½æ•°è¿”å› React å…ƒç´ ï¼Œå³æ¸²æŸ“å†…å®¹ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å› React å…ƒç´ ã€‚ å­ç»„ä»¶åœ¨å†…éƒ¨è°ƒç”¨è¿™ä¸ªå‡½æ•° prop æ¥å†³å®šå®ƒè¦æ¸²æŸ“ä»€ä¹ˆã€‚\nå®šä¹‰ï¼š ä»»ä½•ä½¿ç”¨ render prop æ¥å‘Šè¯‰ç»„ä»¶è¦æ¸²æŸ“ä»€ä¹ˆï¼Œè€Œä¸æ˜¯è‡ªå·±æ¸²æŸ“çš„ç»„ä»¶ï¼Œéƒ½å¯ä»¥ç§°ä¸ºä½¿ç”¨äº† render props æ¨¡å¼ã€‚å°½ç®¡åå­—å« render propsï¼Œä½†è¿™ä¸ª prop çš„åç§°ä¸ä¸€å®šæ˜¯ renderï¼Œå¯ä»¥æ˜¯ä»»ä½•å‡½æ•°ç±»å‹çš„ propï¼ˆå¦‚ children, renderHeader ç­‰ï¼‰ã€‚\nç¤ºä¾‹ï¼šMouseTracker ç»„ä»¶ (è¿½è¸ªé¼ æ ‡ä½ç½®å¹¶æ¸²æŸ“ä»»æ„å†…å®¹)\nimport React, { useState } from \u0026#39;react\u0026#39;; class MouseTracker extends React.Component { constructor(props) { super(props); this.state = { x: 0, y: 0 }; this.handleMouseMove = this.handleMouseMove.bind(this); } handleMouseMove(event) { this.setState({ x: event.clientX, y: event.clientY }); } render() { return ( \u0026lt;div style={{ height: \u0026#39;100vh\u0026#39; }} onMouseMove={this.handleMouseMove}\u0026gt; {/* è°ƒç”¨ä¼ å…¥çš„ render propï¼Œå¹¶å°†å½“å‰é¼ æ ‡ä½ç½®ä½œä¸ºå‚æ•°ä¼ é€’ */} {this.props.render(this.state)} \u0026lt;/div\u0026gt; ); } } // å¦‚ä½•ä½¿ç”¨ï¼š function App() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Move the mouse around!\u0026lt;/h1\u0026gt; \u0026lt;MouseTracker render={({ x, y }) =\u0026gt; ( // Render props æ¥æ”¶ MouseTracker ä¼ é€’çš„çŠ¶æ€ï¼Œå¹¶å†³å®šæ¸²æŸ“ä»€ä¹ˆ \u0026lt;p\u0026gt;The mouse position is ({x}, {y})\u0026lt;/p\u0026gt; )}/\u0026gt; {/* ä¹Ÿå¯ä»¥æ¸²æŸ“å…¶ä»–å†…å®¹ï¼Œåªè¦æä¾›ä¸åŒçš„ render prop */} \u0026lt;MouseTracker render={({ x, y }) =\u0026gt; ( \u0026lt;img src=\u0026#34;https://example.com/cat.png\u0026#34; style={{ position: \u0026#39;absolute\u0026#39;, left: x, top: y }} alt=\u0026#34;Cat\u0026#34; /\u0026gt; )}/\u0026gt; \u0026lt;/div\u0026gt; ); } Render Props çš„ä¼˜ç¼ºç‚¹ï¼š\nä¼˜ç‚¹ï¼š çµæ´»çš„ UI æ¸²æŸ“ï¼š è¢«åŒ…è£…çš„ç»„ä»¶å®Œå…¨æ§åˆ¶æ¸²æŸ“å†…å®¹ã€‚ é€»è¾‘å¤ç”¨ï¼š è¡Œä¸ºé€»è¾‘ï¼ˆå¦‚é¼ æ ‡è¿½è¸ªã€æ•°æ®è·å–ï¼‰å¯ä»¥åœ¨ä¸åŒç»„ä»¶é—´å¤ç”¨ã€‚ é¿å…å‘½åå†²çªï¼š ä¸åƒ HOC å¯èƒ½ä¼šæœ‰ props å‘½åå†²çªã€‚ æ¸…æ™°çš„æ•°æ®æµï¼š æ˜ç¡®åœ°çŸ¥é“å“ªäº›æ•°æ®ä»çˆ¶ç»„ä»¶ï¼ˆè¿™é‡Œæ˜¯ MouseTrackerï¼‰ä¼ é€’ç»™äº†å­ç»„ä»¶ï¼ˆrender prop è¿”å›çš„ç»„ä»¶ï¼‰ã€‚ ç¼ºç‚¹ï¼š åµŒå¥—åœ°ç‹± (Wrapper Hell)ï¼š å¦‚æœä½¿ç”¨å¤šä¸ª render propsï¼Œå¯èƒ½ä¼šå¯¼è‡´ JSX åµŒå¥—è¿‡æ·±ï¼Œä»£ç å¯è¯»æ€§ä¸‹é™ã€‚ æ€§èƒ½é—®é¢˜ï¼š æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œå¦‚æœ render prop æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼ˆä¸ React.memo ç»“åˆæ—¶éœ€è¦æ³¨æ„ï¼‰ã€‚ Hooks ä¸ Render Propsï¼š åœ¨ Hooks å‡ºç°åï¼Œè®¸å¤šåŸæœ¬é€šè¿‡ render props å®ç°çš„é€»è¾‘å¤ç”¨åœºæ™¯ç°åœ¨å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Hook æ›´ç®€æ´åœ°å®ç°ï¼Œä¸”æ²¡æœ‰åµŒå¥—åœ°ç‹±çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°çš„ MouseTracker é€»è¾‘å°±å¯ä»¥å°è£…æˆä¸€ä¸ª useMousePosition è‡ªå®šä¹‰ Hookã€‚å°½ç®¡å¦‚æ­¤ï¼ŒRender Props åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚éœ€è¦åŠ¨æ€æä¾›æ¸²æŸ“å†…å®¹ï¼‰ä»ç„¶æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ¨¡å¼ã€‚\nç»„ä»¶å¤ç”¨æœ‰å“ªäº›æ–¹å¼ï¼Ÿä½ å®é™…é¡¹ç›®æ€ä¹ˆåšçš„ï¼Ÿ\r#\rç»„ä»¶å¤ç”¨æ˜¯æé«˜å¼€å‘æ•ˆç‡ã€ä»£ç è´¨é‡å’Œç»´æŠ¤æ€§çš„é‡è¦æ–¹é¢ã€‚ä¸»è¦æ–¹å¼æœ‰ï¼š\né«˜é˜¶ç»„ä»¶ (HOC)ï¼š\næ–¹å¼ï¼š å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚ é€‚ç”¨åœºæ™¯ï¼š æ³¨å…¥å…¬å…± propsã€æ·»åŠ å…¬å…±é€»è¾‘ï¼ˆå¦‚åŠ è½½çŠ¶æ€ã€æƒé™æ ¡éªŒã€æ•°æ®è¯·æ±‚ï¼‰ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘åœ¨é¡¹ç›®ä¸­æ›¾ç”¨ HOC å®ç°è¿‡ç»Ÿä¸€çš„æƒé™æ ¡éªŒ (withAuth) æˆ–åŠ è½½çŠ¶æ€å±•ç¤º (withLoading)ï¼Œå°†è¿™äº›éä¸šåŠ¡é€»è¾‘ä»ä¸šåŠ¡ç»„ä»¶ä¸­å‰¥ç¦»ã€‚ Render Props æ¨¡å¼ï¼š\næ–¹å¼ï¼š ç»„ä»¶çš„ prop æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å› JSXã€‚ é€‚ç”¨åœºæ™¯ï¼š éœ€è¦å¤ç”¨é€»è¾‘ä½† UI è¡¨ç°å½¢å¼çµæ´»å¤šæ ·çš„æƒ…å†µï¼ˆå¦‚é¼ æ ‡è¿½è¸ªã€å¼¹çª—ã€è¡¨å•å­—æ®µï¼‰ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘æ›¾ç”¨å®ƒæ¥å®ç°ä¸€ä¸ªå¯å¤ç”¨çš„ DataFetcher ç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ•°æ®çš„åŠ è½½ã€é”™è¯¯å¤„ç†ï¼Œç„¶åé€šè¿‡ render prop æŠŠæ•°æ®å’ŒçŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶æ¥æ¸²æŸ“ä¸åŒå½¢å¼çš„ UIã€‚ è‡ªå®šä¹‰ Hook (Custom Hooks)ï¼š\næ–¹å¼ï¼š ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œå†…éƒ¨è°ƒç”¨å…¶ä»– Hookï¼Œå°è£…å¹¶å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ é€‚ç”¨åœºæ™¯ï¼š è¿™æ˜¯ React å®˜æ–¹æ¨èçš„ã€åœ¨å‡½æ•°ç»„ä»¶ä¸­æœ€ä¸»è¦çš„é€»è¾‘å¤ç”¨æ–¹å¼ã€‚ å‡ ä¹æ‰€æœ‰éœ€è¦å…±äº«çŠ¶æ€é€»è¾‘çš„åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘åœ¨é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨äº†è‡ªå®šä¹‰ Hookï¼Œä¾‹å¦‚ useFormValidationï¼ˆå°è£…è¡¨å•éªŒè¯é€»è¾‘ï¼‰ã€useInfiniteScrollï¼ˆå®ç°æ— é™æ»šåŠ¨åˆ—è¡¨ï¼‰ã€useDebounceï¼ˆé˜²æŠ–å‡½æ•°ï¼‰ã€‚è¿™æå¤§åœ°å‡å°‘äº†ç»„ä»¶å†…éƒ¨çš„æ ·æ¿ä»£ç ï¼Œæé«˜äº†é€»è¾‘çš„å†…èšæ€§å’Œå¯æµ‹è¯•æ€§ã€‚ ç»„ä»¶ç»„åˆ (Composition)ï¼š\næ–¹å¼ï¼š å°†å¤šä¸ªå°ç»„ä»¶ç»„åˆæˆä¸€ä¸ªå¤§ç»„ä»¶ï¼Œé€šè¿‡ props.children æˆ–å…¶ä»–å‘½å props æ¥ä¼ é€’ JSX ç‰‡æ®µã€‚ é€‚ç”¨åœºæ™¯ï¼š æ„å»ºå¤æ‚ UI ç»“æ„ï¼Œä¾‹å¦‚å¸ƒå±€ç»„ä»¶ã€å¡ç‰‡ç»„ä»¶ã€æ¨¡æ€æ¡†ç»„ä»¶ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘ä¼šåˆ›å»ºåƒ Card, Modal, Layout è¿™æ ·çš„é€šç”¨ UI ç»„ä»¶ã€‚ä¾‹å¦‚ï¼ŒCard ç»„ä»¶å¯èƒ½æœ‰ä¸€ä¸ª header å’Œ body propï¼Œå…è®¸ä¼ å…¥ä¸åŒçš„ JSX æ¥æ¸²æŸ“ä¸åŒçš„å†…å®¹ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç è¿™äº›å†…å®¹ã€‚ // Card.js function Card({ header, children, footer }) { return ( \u0026lt;div className=\u0026#34;card\u0026#34;\u0026gt; {header \u0026amp;\u0026amp; \u0026lt;div className=\u0026#34;card-header\u0026#34;\u0026gt;{header}\u0026lt;/div\u0026gt;} \u0026lt;div className=\u0026#34;card-body\u0026#34;\u0026gt;{children}\u0026lt;/div\u0026gt; {footer \u0026amp;\u0026amp; \u0026lt;div className=\u0026#34;card-footer\u0026#34;\u0026gt;{footer}\u0026lt;/div\u0026gt;} \u0026lt;/div\u0026gt; ); } // Usage // \u0026lt;Card header={\u0026lt;h2\u0026gt;Title\u0026lt;/h2\u0026gt;} footer={\u0026lt;button\u0026gt;More\u0026lt;/button\u0026gt;}\u0026gt; // \u0026lt;p\u0026gt;Card content here\u0026lt;/p\u0026gt; // \u0026lt;/Card\u0026gt; æˆ‘å®é™…é¡¹ç›®æ€ä¹ˆåšçš„ï¼Ÿ åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œè‡ªå®šä¹‰ Hook æ˜¯æˆ‘æœ€ä¸»è¦å’Œæœ€æ¨èçš„é€»è¾‘å¤ç”¨æ–¹å¼ï¼Œå› ä¸ºå®ƒç®€æ´ã€å¼ºå¤§ä¸”ç¬¦åˆ Hooks çš„è®¾è®¡å“²å­¦ã€‚å¯¹äº UI ç»“æ„ä¸Šçš„å¤ç”¨ï¼Œæˆ‘ä¸»è¦ä½¿ç”¨ç»„ä»¶ç»„åˆï¼Œåˆ›å»ºé€šç”¨ä¸”å¯é…ç½®çš„ UI ç»„ä»¶ã€‚HOC å’Œ Render Props åœ¨ Hooks å‡ºç°åä½¿ç”¨é¢‘ç‡æœ‰æ‰€ä¸‹é™ï¼Œä½†å¦‚æœé¢å¯¹æ—§é¡¹ç›®æˆ–ç‰¹å®šéœ€æ±‚ï¼Œå®ƒä»¬ä»æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ—§ç‰ˆç±»ç»„ä»¶è¾ƒå¤šçš„é¡¹ç›®é‡Œï¼ŒHOC ä»ç„¶æ˜¯æœ‰æ•ˆçš„å¤ç”¨æ–¹æ¡ˆã€‚\nä»€ä¹ˆæ˜¯ç»„åˆä¼˜äºç»§æ‰¿ï¼ŸReact å¦‚ä½•ä½“ç°ï¼Ÿ\r#\râ€œç»„åˆä¼˜äºç»§æ‰¿â€ (Composition over Inheritance) æ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå®ƒå»ºè®®åœ¨è®¾è®¡å¯å¤ç”¨ä»£ç æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘é€šè¿‡ç»„åˆçš„æ–¹å¼æ¥å®ç°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿ã€‚\nç»§æ‰¿çš„ç¼ºç‚¹ï¼š\nç´§è€¦åˆï¼š å­ç±»ä¸çˆ¶ç±»ç´§å¯†è€¦åˆï¼Œå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå³ä½¿å®ƒä¸éœ€è¦ã€‚ è„†å¼±çš„åŸºç±»é—®é¢˜ï¼š çˆ¶ç±»çš„æ”¹å˜å¯èƒ½ä¼šæ„å¤–åœ°å½±å“æ‰€æœ‰å­ç±»ï¼Œå¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚ å¤šé‡ç»§æ‰¿é—®é¢˜ï¼š è®¸å¤šè¯­è¨€ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œé™åˆ¶äº†ä»£ç å¤ç”¨çš„çµæ´»æ€§ã€‚ å…³æ³¨ç‚¹æ··åˆï¼š çˆ¶ç±»å¯èƒ½åŒ…å«ä¸å­ç±»æ— å…³çš„é€»è¾‘ã€‚ ç»„åˆçš„ä¼˜ç‚¹ï¼š\næ¾è€¦åˆï¼š ç»„ä»¶ä¹‹é—´é€šè¿‡ props è¿›è¡Œé€šä¿¡ï¼Œä¾èµ–å…³ç³»æ˜ç¡®ã€‚ é«˜å†…èšä½è€¦åˆï¼š æ¯ä¸ªç»„ä»¶åªå…³æ³¨è‡ªå·±çš„èŒè´£ã€‚ æ›´çµæ´»ï¼š å¯ä»¥æ ¹æ®éœ€è¦ç»„åˆä¸åŒçš„åŠŸèƒ½ã€‚ æ›´æ˜“æµ‹è¯•ï¼š ç‹¬ç«‹çš„ç»„ä»¶æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ React å¦‚ä½•ä½“ç°â€œç»„åˆä¼˜äºç»§æ‰¿â€ï¼š\nå‡½æ•°ç»„ä»¶å’Œ Hooksï¼š\nReact æ¨èä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œå®ƒæ›´åƒä¸€ä¸ªâ€œçº¯å‡½æ•°â€ï¼Œæ¥æ”¶ props å¹¶è¿”å› UIã€‚ è‡ªå®šä¹‰ Hook æ˜¯ç»„åˆæ€æƒ³çš„å®Œç¾ä½“ç°ã€‚å®ƒå…è®¸ä½ å°†ç‹¬ç«‹çš„çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨å°è£…èµ·æ¥ï¼Œç„¶ååœ¨å¤šä¸ªç»„ä»¶ä¸­â€œç»„åˆâ€ä½¿ç”¨è¿™äº›é€»è¾‘ï¼Œè€Œä¸éœ€è¦é€šè¿‡ç»§æ‰¿æ¥å…±äº«ã€‚ä¾‹å¦‚ï¼ŒuseToggle å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­ç»„åˆä½¿ç”¨ï¼Œè€Œä¸éœ€è¦ç»„ä»¶ç»§æ‰¿ä¸€ä¸ª ToggleableComponentã€‚ props.children å’Œå…¶ä»– props ä¼ é€’ JSXï¼š\nè¿™æ˜¯ React ä¸­æœ€å¸¸è§çš„ç»„åˆæ–¹å¼ã€‚çˆ¶ç»„ä»¶é€šè¿‡ props.childrenï¼ˆæˆ–è‡ªå®šä¹‰çš„ propsï¼Œå¦‚ leftSidebar, footerï¼‰æ¥æ¸²æŸ“å…¶å†…éƒ¨çš„å†…å®¹ã€‚çˆ¶ç»„ä»¶åªæä¾›ç»“æ„å’Œå¸ƒå±€ï¼Œä¸å…³å¿ƒå­ç»„ä»¶çš„å…·ä½“æ¸²æŸ“é€»è¾‘ã€‚ ç¤ºä¾‹ï¼š Modal ç»„ä»¶åªè´Ÿè´£æ¨¡æ€æ¡†çš„æ˜¾ç¤ºã€éšè—ã€é®ç½©å’Œå…³é—­æŒ‰é’®ï¼Œè€Œæ¨¡æ€æ¡†çš„å…·ä½“å†…å®¹åˆ™æ˜¯é€šè¿‡ props.children ä¼ é€’è¿›æ¥çš„ã€‚ function Modal({ children, isOpen, onClose }) { if (!isOpen) return null; return ( \u0026lt;div className=\u0026#34;modal-overlay\u0026#34;\u0026gt; \u0026lt;div className=\u0026#34;modal-content\u0026#34;\u0026gt; {children} {/* ç»„åˆè¿›å»çš„å†…å®¹ */} \u0026lt;button onClick={onClose}\u0026gt;Close\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } // Usage: \u0026lt;Modal isOpen={true} onClose={() =\u0026gt; {}}\u0026gt;\u0026lt;MyForm /\u0026gt;\u0026lt;/Modal\u0026gt; Modal ç»„ä»¶å¹¶ä¸çŸ¥é“ MyForm æ˜¯ä»€ä¹ˆï¼Œå®ƒåªçŸ¥é“è¦æ¸²æŸ“ childrenã€‚ é«˜é˜¶ç»„ä»¶ (HOC) å’Œ Render Props (ä¼ ç»Ÿæ–¹å¼)ï¼š\nè™½ç„¶ç°åœ¨è‡ªå®šä¹‰ Hook æ›´æµè¡Œï¼Œä½† HOC å’Œ Render Props æ¨¡å¼æœ¬èº«ä¹Ÿæ˜¯ç»„åˆçš„ä½“ç°ã€‚å®ƒä»¬é€šè¿‡åŒ…è£…æˆ–æ³¨å…¥å‡½æ•°æ¥â€œç»„åˆâ€é¢å¤–çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯è®©ç»„ä»¶ç»§æ‰¿ä¸€ä¸ªåŸºç±»ã€‚ æ€»ç»“ï¼š React çš„è®¾è®¡å“²å­¦é¼“åŠ±æˆ‘ä»¬åˆ›å»ºå°çš„ã€ç‹¬ç«‹çš„ã€èŒè´£å•ä¸€çš„ç»„ä»¶ï¼Œå¹¶é€šè¿‡ propsã€children å’Œè‡ªå®šä¹‰ Hook å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œæ„å»ºå‡ºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å¼ºè°ƒçš„â€œç»„åˆä¼˜äºç»§æ‰¿â€åŸåˆ™ä¸è°‹è€Œåˆï¼Œä½¿å¾— React åº”ç”¨æ›´å…·çµæ´»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚\nğŸ“„ è·¯ç”±ä¸è¡¨å•\r#\rReact Router çš„æ ¸å¿ƒåŸç†ï¼Ÿ\r#\rReact Router æ˜¯ä¸€ä¸ªæµè¡Œçš„å£°æ˜å¼è·¯ç”±åº“ï¼Œç”¨äºåœ¨ React åº”ç”¨ä¸­ç®¡ç† URL å’Œ UI çš„åŒæ­¥ã€‚\næ ¸å¿ƒåŸç†ï¼š\nå†å²ç®¡ç† (History Management)ï¼š\nReact Router çš„æ ¸å¿ƒæ˜¯åŸºäº History APIï¼ˆpushState, replaceState, popstate äº‹ä»¶ï¼‰æˆ– Hash Historyï¼ˆwindow.location.hashï¼‰æ¥ç®¡ç† URL çš„å˜åŒ–ã€‚ å®ƒæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾— URL çš„å˜åŒ–ä¸ä¼šå¯¼è‡´æµè§ˆå™¨è¿›è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯é€šè¿‡ JavaScript æ¥åŠ¨æ€æ›´æ–° UIã€‚ BrowserRouter ä½¿ç”¨ History API (HTML5 Pushstate)ã€‚ HashRouter ä½¿ç”¨ URL çš„å“ˆå¸Œéƒ¨åˆ†ï¼ˆ#/pathï¼‰ã€‚ å£°æ˜å¼è·¯ç”±é…ç½®ï¼š\næˆ‘ä»¬ä½¿ç”¨ Route ç»„ä»¶æ¥å£°æ˜è·¯ç”±è§„åˆ™ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„é›†ä¸­å¼è·¯ç”±é…ç½®ã€‚ æ¯ä¸ª Route ç»„ä»¶éƒ½å®šä¹‰äº†å½“ URL åŒ¹é…ç‰¹å®š path æ—¶åº”è¯¥æ¸²æŸ“å“ªä¸ªç»„ä»¶ã€‚ path å‚æ•°ï¼š å¯ä»¥æ˜¯ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€å‚æ•°ï¼ˆå¦‚ /users/:idï¼‰ã€‚ åµŒå¥—è·¯ç”±ï¼š å…è®¸ç»„ä»¶å†…éƒ¨å®šä¹‰è‡ªå·±çš„å­è·¯ç”±ï¼Œå½¢æˆå±‚çº§ç»“æ„ã€‚ ç»„ä»¶ä¸ URL çš„å…³è”ï¼š\nRoute ç»„ä»¶ä¼šç›‘å¬ URL çš„å˜åŒ–ã€‚å½“ URL ä¸å…¶ path åŒ¹é…æ—¶ï¼Œå®ƒä¼šæ¸²æŸ“æŒ‡å®šçš„ç»„ä»¶ï¼Œå¹¶å‘è¯¥ç»„ä»¶æ³¨å…¥è·¯ç”±ç›¸å…³çš„ propsï¼ˆå¦‚ match, location, historyï¼‰ã€‚ Hooks (useParams, useLocation, useNavigate, useMatch) æä¾›äº†æ›´ç®€æ´çš„æ–¹å¼æ¥è·å–è·¯ç”±ä¿¡æ¯å’Œè¿›è¡Œå¯¼èˆªã€‚ å¯¼èˆªï¼š\nLink ç»„ä»¶ï¼šç”¨äºå£°æ˜å¼å¯¼èˆªï¼Œæ¸²æŸ“æˆä¸€ä¸ªå¸¦æœ‰ href çš„ \u0026lt;a\u0026gt; æ ‡ç­¾ï¼Œç‚¹å‡»æ—¶ä¼šé€šè¿‡ History API æ›´æ–° URLï¼Œè€Œä¸è§¦å‘é¡µé¢åˆ·æ–°ã€‚ useNavigate Hook (React Router v6+)ï¼šç”¨äºç¼–ç¨‹å¼å¯¼èˆªï¼Œå¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°æˆ–å‰¯ä½œç”¨ä¸­è¿›è¡Œé¡µé¢è·³è½¬ã€‚ æ¸²æŸ“æœºåˆ¶ï¼š\nå½“ URL å˜åŒ–æ—¶ï¼ŒReact Router ä¼šæ¯”è¾ƒæ–°çš„ URL å’Œå·²æœ‰çš„è·¯ç”±é…ç½®ï¼Œæ‰¾å‡ºåŒ¹é…çš„ Route ç»„ä»¶ã€‚ åŒ¹é…åˆ°çš„ Route ç»„ä»¶ä¼šè§¦å‘å…¶å†…éƒ¨ç»„ä»¶çš„æ¸²æŸ“ã€‚è¿™ä¸ªè¿‡ç¨‹ä»ç„¶éµå¾ª React çš„ Diff ç®—æ³•å’Œè™šæ‹Ÿ DOM æ›´æ–°æœºåˆ¶ã€‚ æ€»ç»“ï¼š React Router çš„æ ¸å¿ƒåœ¨äºå°†æµè§ˆå™¨çš„ URL å˜åŒ–ä¸ React ç»„ä»¶çš„æ¸²æŸ“çŠ¶æ€è¿›è¡ŒåŒæ­¥ï¼Œé€šè¿‡å£°æ˜å¼é…ç½®å’Œ History API å®ç°äº†å•é¡µé¢åº”ç”¨ (SPA) ä¸­çš„æ— åˆ·æ–°è·¯ç”±è·³è½¬å’Œ UI æ›´æ–°ã€‚\nè·¯ç”±æ‡’åŠ è½½æ€ä¹ˆåšï¼Ÿ\r#\rReact Router ä¸­çš„è·¯ç”±æ‡’åŠ è½½é€šå¸¸ç»“åˆ React.lazy å’Œ Suspense æ¥å®ç°ã€‚\næ­¥éª¤ï¼š\nä½¿ç”¨ React.lazy åŠ¨æ€å¯¼å…¥è·¯ç”±ç»„ä»¶ï¼š\nå°†éœ€è¦è¿›è¡Œæ‡’åŠ è½½çš„è·¯ç”±å¯¹åº”çš„ç»„ä»¶ä½¿ç”¨ React.lazy åŒ…è£¹ã€‚React.lazy æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè°ƒç”¨ import() åŠ¨æ€å¯¼å…¥ç»„ä»¶ã€‚ import React, { lazy, Suspense } from \u0026#39;react\u0026#39;; import { BrowserRouter, Routes, Route } from \u0026#39;react-router-dom\u0026#39;; // æ‡’åŠ è½½ç»„ä»¶ const HomePage = lazy(() =\u0026gt; import(\u0026#39;./pages/HomePage\u0026#39;)); const AboutPage = lazy(() =\u0026gt; import(\u0026#39;./pages/AboutPage\u0026#39;)); const DashboardPage = lazy(() =\u0026gt; import(\u0026#39;./pages/DashboardPage\u0026#39;)); ä½¿ç”¨ Suspense åŒ…è£¹ Route ç»„ä»¶ï¼š\nå°†åŒ…å«æ‡’åŠ è½½ç»„ä»¶çš„ Route æˆ– Routes æ•´ä½“ç”¨ Suspense ç»„ä»¶åŒ…è£¹èµ·æ¥ã€‚ Suspense ç»„ä»¶éœ€è¦ä¸€ä¸ª fallback propï¼Œç”¨äºåœ¨æ‡’åŠ è½½ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå›é€€å†…å®¹ï¼ˆå¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰ã€‚ function App() { return ( \u0026lt;BrowserRouter\u0026gt; \u0026lt;Suspense fallback={\u0026lt;div\u0026gt;Loading page...\u0026lt;/div\u0026gt;}\u0026gt; \u0026lt;Routes\u0026gt; \u0026lt;Route path=\u0026#34;/\u0026#34; element={\u0026lt;HomePage /\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/about\u0026#34; element={\u0026lt;AboutPage /\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/dashboard\u0026#34; element={\u0026lt;DashboardPage /\u0026gt;} /\u0026gt; \u0026lt;/Routes\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;/BrowserRouter\u0026gt; ); } åŸç†ï¼š å½“ç”¨æˆ·è®¿é—®ä¸€ä¸ªæ‡’åŠ è½½è·¯ç”±æ—¶ï¼Œæµè§ˆå™¨ä¸ä¼šç«‹å³ä¸‹è½½è¯¥è·¯ç”±ç»„ä»¶åŠå…¶æ‰€æœ‰ä¾èµ–çš„ä»£ç ã€‚åªæœ‰å½“ç”¨æˆ·å¯¼èˆªåˆ°è¯¥è·¯ç”±æ—¶ï¼ŒReact.lazy æ‰ä¼šè§¦å‘ç›¸åº”çš„ import() åŠ¨æ€å¯¼å…¥ï¼Œæ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackï¼‰ä¼šè¯†åˆ«åˆ°è¿™ä¸ªåŠ¨æ€å¯¼å…¥ï¼Œå¹¶å°†å…¶æ‹†åˆ†æˆä¸€ä¸ªå•ç‹¬çš„ JavaScript bundleã€‚æµè§ˆå™¨ä¼šå¼‚æ­¥ä¸‹è½½è¿™ä¸ª bundleï¼Œå¹¶åœ¨ä¸‹è½½å®Œæˆåæ¸²æŸ“ç»„ä»¶ã€‚åœ¨æ­¤æœŸé—´ï¼ŒSuspense çš„ fallback å†…å®¹ä¼šæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚\nä¼˜åŠ¿ï¼š\nå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼š åº”ç”¨ç¨‹åºçš„åˆå§‹ bundle ä½“ç§¯æ›´å°ã€‚ æŒ‰éœ€åŠ è½½ï¼š åªæœ‰å½“ç”¨æˆ·éœ€è¦è®¿é—®æŸä¸ªé¡µé¢æ—¶ï¼Œæ‰åŠ è½½è¯¥é¡µé¢å¯¹åº”çš„ä»£ç ã€‚ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š é¡µé¢åŠ è½½æ›´å¿«ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹å•é¡µåº”ç”¨ä¸­ã€‚ è¡¨å•åº“ä½ ç”¨è¿‡å“ªäº›ï¼ŸFormik / React Hook Formï¼Ÿ\r#\rï¼ˆæ ¹æ®ä½ çš„å®é™…ä½¿ç”¨ç»éªŒå›ç­”ï¼Œä¸‹é¢ä»¥éƒ½ç”¨è¿‡ä¸ºä¾‹ï¼‰\næˆ‘åœ¨é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨è¿‡ Formik å’Œ React Hook Formã€‚\nFormikï¼š\nä¼˜ç‚¹ï¼š åŠŸèƒ½å…¨é¢ï¼š å†…ç½®äº†è¡¨å•å€¼ã€é”™è¯¯ã€è§¦æ§çŠ¶æ€ (touched) çš„ç®¡ç†ï¼Œä»¥åŠæäº¤å¤„ç†ã€éªŒè¯ç­‰ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆã€‚ æ˜“äºä¸Šæ‰‹ï¼š å¯¹äºä¸ç†Ÿæ‚‰ Hooks çš„å¼€å‘è€…æ¥è¯´ï¼ŒFormik æä¾›äº† Formik ç»„ä»¶å’Œ Field ç»„ä»¶ï¼Œå°è£…äº†å¤§éƒ¨åˆ†é€»è¾‘ï¼Œå¼€ç®±å³ç”¨ã€‚ ç”Ÿæ€å¥å…¨ï¼š ç¤¾åŒºæ´»è·ƒï¼Œæœ‰ä¸°å¯Œçš„é›†æˆæ–¹æ¡ˆï¼ˆå¦‚ä¸ Yup é…åˆè¿›è¡Œæ ¡éªŒï¼‰ã€‚ ç¼ºç‚¹ï¼š æ¸²æŸ“æ€§èƒ½ï¼š åœ¨è¾“å…¥æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œå› ä¸º Formik ä¼šæ›´æ–°å†…éƒ¨çŠ¶æ€ï¼Œè¿™ä¼šå¼•èµ·æ•´ä¸ª Formik ä¸Šä¸‹æ–‡çš„æ¶ˆè´¹è€…ï¼ˆåŒ…æ‹¬æ‰€æœ‰ Fieldï¼‰é‡æ–°æ¸²æŸ“ã€‚ å­¦ä¹ æ›²çº¿ï¼š è™½ç„¶æ¯”æ‰‹åŠ¨å†™è¡¨å•ç®€å•ï¼Œä½†å…¶ render props æˆ– HOC æ¨¡å¼åœ¨ Hooks æµè¡Œåæ˜¾å¾—ç•¥å¾®å¤æ‚ã€‚ é€‚ç”¨åœºæ™¯ï¼š å¯¹æ€§èƒ½è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜ã€åå¥½ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆã€æˆ–å›¢é˜Ÿä¹ æƒ¯ç±»ç»„ä»¶æ¨¡å¼çš„é¡¹ç›®ã€‚ React Hook Formï¼š\nä¼˜ç‚¹ï¼š æ€§èƒ½ä¼˜å¼‚ï¼š é‡‡ç”¨éå—æ§ç»„ä»¶çš„æ€è·¯ï¼Œé€šè¿‡ ref ç›´æ¥æ“ä½œ DOMï¼Œé¿å…äº†ç»„ä»¶åœ¨æ¯æ¬¡è¾“å…¥æ—¶éƒ½é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å¾—å®ƒåœ¨æ€§èƒ½ä¸Šè¡¨ç°å“è¶Šï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹æˆ–å¤æ‚è¡¨å•ä¸­ã€‚ å°å·§è½»é‡ï¼š åŒ…ä½“ç§¯éå¸¸å°ï¼Œæ— é¢å¤–çš„ä¾èµ–ã€‚ åŸºäº Hooksï¼š å®Œå…¨åˆ©ç”¨ React Hooks çš„ç‰¹æ€§ï¼ŒAPI ç®€æ´ç›´è§‚ã€‚ æ›´å°‘é‡æ¸²æŸ“ï¼š åªæœ‰åœ¨è¡¨å•çŠ¶æ€ï¼ˆå¦‚ isValid, isDirtyï¼‰çœŸæ­£å˜åŒ–æ—¶æ‰ä¼šè§¦å‘ç»„ä»¶é‡æ¸²æŸ“ï¼Œè€Œè¾“å…¥å€¼çš„å˜åŒ–ç›´æ¥ç”± DOM å¤„ç†ã€‚ æ˜“äºé›†æˆï¼š æ ¡éªŒåº“ï¼ˆå¦‚ Zod, Yupï¼‰é›†æˆç®€å•ã€‚ ç¼ºç‚¹ï¼š å¯¹å—æ§ç»„ä»¶çš„æ”¯æŒç›¸å¯¹å¼±ä¸€äº›ï¼ˆéœ€è¦ä½¿ç”¨ Controller ç»„ä»¶ï¼‰ã€‚ å¯¹äºä¹ æƒ¯å—æ§ç»„ä»¶çš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½éœ€è¦é€‚åº”å…¶éå—æ§çš„å“²å­¦ã€‚ é€‚ç”¨åœºæ™¯ï¼š å¯¹è¡¨å•æ€§èƒ½è¦æ±‚é«˜ã€å¤§å‹å¤æ‚è¡¨å•ã€è¿½æ±‚è½»é‡çº§å’Œ Hook å‹å¥½çš„é¡¹ç›®ã€‚ æˆ‘çš„é€‰æ‹©ï¼š åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ React Hook Formã€‚å®ƒåœ¨æ€§èƒ½æ–¹é¢çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…å¤§å‹è¡¨å•å¸¦æ¥çš„å¡é¡¿é—®é¢˜ã€‚å…¶ Hooks åŒ–çš„ API ä¹Ÿæ›´ç¬¦åˆç°ä»£ React å¼€å‘çš„ä¹ æƒ¯ï¼Œä»£ç ä¹Ÿæ›´ç®€æ´ã€‚å¯¹äºéœ€è¦é›†æˆç¬¬ä¸‰æ–¹å—æ§ç»„ä»¶çš„åœºæ™¯ï¼ŒController ç»„ä»¶ä¹Ÿèƒ½å¾ˆå¥½åœ°è§£å†³ã€‚\nè¡¨å•æ ¡éªŒæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\r#\rè¡¨å•æ ¡éªŒæ˜¯ç¡®ä¿ç”¨æˆ·è¾“å…¥æ•°æ®æœ‰æ•ˆæ€§çš„å…³é”®ã€‚æˆ‘é€šå¸¸ç»“åˆä»¥ä¸‹æ–¹å¼æ¥å®ç°ï¼š\nå†…ç½® HTML5 æ ¡éªŒï¼š\næ–¹å¼ï¼š åˆ©ç”¨ HTML5 è‡ªèº«çš„å±æ€§ï¼Œå¦‚ required, minlength, maxlength, type=\u0026quot;email\u0026quot;, pattern ç­‰ã€‚ ä¼˜ç‚¹ï¼š ç®€å•æ˜“ç”¨ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤– JavaScriptã€‚ ç¼ºç‚¹ï¼š æ ¡éªŒè§„åˆ™æœ‰é™ï¼Œé”™è¯¯æç¤ºæ ·å¼ä¸å¯æ§ï¼Œç”¨æˆ·ä½“éªŒè¾ƒå·®ã€‚ æ‰‹åŠ¨æ ¡éªŒ (åœ¨ onChange æˆ– onSubmit äº‹ä»¶ä¸­)ï¼š\næ–¹å¼ï¼š åœ¨ input çš„ onChange äº‹ä»¶ä¸­å®æ—¶æ ¡éªŒï¼Œæˆ–è€…åœ¨è¡¨å•æäº¤ (onSubmit) æ—¶é›†ä¸­æ ¡éªŒã€‚ ä¼˜ç‚¹ï¼š çµæ´»ï¼Œå¯ä»¥å®ç°ä»»æ„å¤æ‚çš„æ ¡éªŒé€»è¾‘ã€‚ ç¼ºç‚¹ï¼š éœ€è¦æ‰‹åŠ¨ç®¡ç†å¤§é‡é”™è¯¯çŠ¶æ€ï¼Œä»£ç é‡å¤§ï¼Œé€»è¾‘åˆ†æ•£ã€‚ ä½¿ç”¨ç¬¬ä¸‰æ–¹æ ¡éªŒåº“ (ç»“åˆè¡¨å•åº“)ï¼š\næ–¹å¼ï¼š è¿™æ˜¯æœ€æ¨èçš„æ–¹å¼ã€‚ç»“åˆ Formik æˆ– React Hook Form è¿™æ ·çš„è¡¨å•åº“ï¼Œå†é›†æˆä¸“é—¨çš„æ ¡éªŒåº“ã€‚ å¸¸ç”¨æ ¡éªŒåº“ï¼š Yupï¼š å£°æ˜å¼æ ¡éªŒåº“ï¼Œä½¿ç”¨ schema å®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œè¯­æ³•ç›´è§‚ã€‚ Zodï¼š TypeScript ä¼˜å…ˆçš„å£°æ˜å¼æ ¡éªŒåº“ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„ç±»å‹æ¨æ–­èƒ½åŠ›ã€‚ Joiï¼š å¦ä¸€ä¸ªæµè¡Œçš„å£°æ˜å¼æ ¡éªŒåº“ï¼ˆå¸¸ç”¨äº Node.jsï¼Œä½†å‰ç«¯ä¹Ÿå¯ç”¨ï¼‰ã€‚ å®ç°æµç¨‹ (ä»¥ React Hook Form + Yup ä¸ºä¾‹)ï¼š å®šä¹‰ Yup çš„ schemaï¼ŒåŒ…å«æ‰€æœ‰è¡¨å•å­—æ®µçš„æ ¡éªŒè§„åˆ™ï¼ˆå¦‚ string().required('å¿…å¡«'), number().min(0)ï¼‰ã€‚ åœ¨ useForm Hook ä¸­ï¼Œå°† schema ä¼ å…¥ resolver é…ç½®é¡¹ï¼ˆå¦‚ resolver: yupResolver(schema)ï¼‰ã€‚ React Hook Form ä¼šè‡ªåŠ¨å¤„ç†è¡¨å•çš„æ ¡éªŒé€»è¾‘ï¼Œå¹¶åœ¨é”™è¯¯æ—¶æä¾› errors å¯¹è±¡ã€‚ åœ¨ UI å±‚ï¼Œæ ¹æ® errors å¯¹è±¡æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚ ä¼˜ç‚¹ï¼š ä»£ç ç®€æ´ï¼š æ ¡éªŒé€»è¾‘ä¸ UI åˆ†ç¦»ï¼Œé€šè¿‡ Schema é›†ä¸­å®šä¹‰ã€‚ å¯å¤ç”¨æ€§ï¼š æ ¡éªŒ Schema å¯ä»¥å¤ç”¨ã€‚ ç”¨æˆ·ä½“éªŒï¼š å¯ä»¥å®ç°å®æ—¶çš„å­—æ®µçº§æ ¡éªŒã€æäº¤æ—¶é›†ä¸­æ ¡éªŒã€è‡ªå®šä¹‰é”™è¯¯æç¤ºã€‚ æ€§èƒ½ï¼š è¡¨å•åº“ä¼šä¼˜åŒ–æ ¡éªŒè§¦å‘æ—¶æœºï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚ åç«¯æ ¡éªŒï¼š\né‡è¦æ€§ï¼š ä»»ä½•å‰ç«¯æ ¡éªŒéƒ½ä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼å‰ç«¯æ ¡éªŒæ˜¯ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œåç«¯æ ¡éªŒæ˜¯ç¡®ä¿æ•°æ®å®‰å…¨å’Œå®Œæ•´æ€§çš„æœ€åä¸€é“é˜²çº¿ã€‚ æ–¹å¼ï¼š åç«¯æ¥æ”¶åˆ°æ•°æ®åï¼Œå†æ¬¡è¿›è¡Œä¸¥æ ¼çš„ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æ ¼å¼æ ¡éªŒã€‚ æˆ‘çš„å®è·µï¼š åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸ä¼šä½¿ç”¨ React Hook Form ç»“åˆ Yup æˆ– Zod æ¥å®ç°å‰ç«¯çš„è¡¨å•æ ¡éªŒã€‚ è¿™å¥—ç»„åˆèƒ½æä¾›æä½³çš„å¼€å‘ä½“éªŒå’Œè¿è¡Œæ—¶æ€§èƒ½ã€‚åŒæ—¶ï¼Œåç«¯æ¥å£ä¹Ÿä¼šæœ‰å¯¹åº”çš„æ ¡éªŒé€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„æœ€ç»ˆæ­£ç¡®æ€§ã€‚å¯¹äºä¸€äº›å¤æ‚æˆ–éœ€è¦åŠ¨æ€å˜åŒ–çš„æ ¡éªŒè§„åˆ™ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨ Yup Schema ä¸­ç»“åˆæ¡ä»¶æ ¡éªŒï¼Œæˆ–è€…åœ¨ React Hook Form çš„ watch æœºåˆ¶ä¸­æ‰‹åŠ¨è§¦å‘ä¸€äº›å‰¯ä½œç”¨æ¥ç®¡ç†ã€‚\nğŸ§ª æµ‹è¯•ä¸å·¥å…·é“¾\r#\rå¦‚ä½•å¯¹ React ç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ\r#\rå¯¹ React ç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•é€šå¸¸æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š\næµ‹è¯•è¿è¡Œå™¨ï¼š ä½¿ç”¨ Jest ä½œä¸ºæµ‹è¯•è¿è¡Œå™¨å’Œæ–­è¨€åº“ã€‚ æ¸²æŸ“åº“ï¼š ä½¿ç”¨ React Testing Library (RTL) æˆ– Enzymeï¼ˆç°åœ¨ RTL æ›´æ¨èï¼‰æ¥æ¸²æŸ“å’Œä¸ç»„ä»¶äº¤äº’ã€‚ æ¨¡æ‹Ÿ (Mocking)ï¼š ä½¿ç”¨ Jest çš„æ¨¡æ‹ŸåŠŸèƒ½æ¥æ¨¡æ‹Ÿç»„ä»¶çš„ä¾èµ–é¡¹ï¼ˆå¦‚ API è¯·æ±‚ã€å¤–éƒ¨æ¨¡å—ã€DOM APIï¼‰ã€‚ å•å…ƒæµ‹è¯•çš„æ ¸å¿ƒåŸåˆ™ï¼š\næµ‹è¯•ç»„ä»¶çš„å…¬å…±æ¥å£ï¼š è€Œä¸æ˜¯å…¶å†…éƒ¨å®ç°ç»†èŠ‚ã€‚ æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼š è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ç»„ä»¶æ–¹æ³•ã€‚ å…³æ³¨è¾“å‡ºï¼š éªŒè¯ç»„ä»¶æ¸²æŸ“çš„ UIã€è§¦å‘çš„äº‹ä»¶ã€å¯¹çŠ¶æ€çš„æ›´æ–°ç­‰ã€‚ åŸºæœ¬æ­¥éª¤å’Œç¤ºä¾‹ (ä½¿ç”¨ Jest + React Testing Library)ï¼š\nå®‰è£…ä¾èµ–ï¼š npm install --save-dev @testing-library/react @testing-library/jest-dom jest ç¼–å†™æµ‹è¯•æ–‡ä»¶ï¼š é€šå¸¸æ”¾åœ¨ç»„ä»¶æ–‡ä»¶æ—è¾¹æˆ–ç‹¬ç«‹çš„ __tests__ ç›®å½•ä¸­ã€‚ // MyComponent.test.js import React from \u0026#39;react\u0026#39;; import { render, screen, fireEvent } from \u0026#39;@testing-library/react\u0026#39;; import \u0026#39;@testing-library/jest-dom\u0026#39;; // å¼•å…¥æ–­è¨€æ‰©å±• import MyComponent from \u0026#39;./MyComponent\u0026#39;; // å¾…æµ‹è¯•ç»„ä»¶ describe(\u0026#39;MyComponent\u0026#39;, () =\u0026gt; { // æµ‹è¯•ç»„ä»¶æ˜¯å¦æ­£ç¡®æ¸²æŸ“ test(\u0026#39;renders correctly with default props\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent /\u0026gt;); expect(screen.getByText(/Hello, World!/i)).toBeInTheDocument(); }); // æµ‹è¯•ç‚¹å‡»äº‹ä»¶å’ŒçŠ¶æ€æ›´æ–° test(\u0026#39;increments count on button click\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent /\u0026gt;); const button = screen.getByRole(\u0026#39;button\u0026#39;, { name: /Increment/i }); expect(screen.getByText(/Count: 0/i)).toBeInTheDocument(); fireEvent.click(button); // æ¨¡æ‹Ÿç‚¹å‡» expect(screen.getByText(/Count: 1/i)).toBeInTheDocument(); }); // æµ‹è¯• props çš„ä¼ é€’ test(\u0026#39;renders custom greeting based on prop\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent greeting=\u0026#34;Hi there!\u0026#34; /\u0026gt;); expect(screen.getByText(/Hi there!/i)).toBeInTheDocument(); }); // æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚çš„æµ‹è¯•ï¼ˆå¦‚æœç»„ä»¶æœ‰æ•°æ®è·å–ï¼‰ test(\u0026#39;fetches data and displays it\u0026#39;, async () =\u0026gt; { // æ¨¡æ‹Ÿ fetch API jest.spyOn(global, \u0026#39;fetch\u0026#39;).mockImplementation(() =\u0026gt; Promise.resolve({ ok: true, json: () =\u0026gt; Promise.resolve({ title: \u0026#39;Test Data\u0026#39; }), }) ); render(\u0026lt;MyComponent /\u0026gt;); expect(screen.getByText(/Loading.../i)).toBeInTheDocument(); // ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ await screen.findByText(/Title: Test Data/i); expect(screen.queryByText(/Loading.../i)).not.toBeInTheDocument(); global.fetch.mockRestore(); // æ¢å¤åŸå§‹ fetch }); }); // MyComponent.js (ç¤ºä¾‹å¾…æµ‹è¯•ç»„ä»¶) import React, { useState, useEffect } from \u0026#39;react\u0026#39;; function MyComponent({ greeting = \u0026#34;Hello, World!\u0026#34; }) { const [count, setCount] = useState(0); const [data, setData] = useState(null); const [loading, setLoading] = useState(true); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { setLoading(true); const res = await fetch(\u0026#39;/api/data\u0026#39;); const json = await res.json(); setData(json); setLoading(false); }; fetchData(); }, []); return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;{greeting}\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;Count: {count}\u0026lt;/p\u0026gt; \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt; {loading ? \u0026lt;p\u0026gt;Loading...\u0026lt;/p\u0026gt; : data \u0026amp;\u0026amp; \u0026lt;p\u0026gt;Title: {data.title}\u0026lt;/p\u0026gt;} \u0026lt;/div\u0026gt; ); } export default MyComponent; å…³é”®ç‚¹ï¼š\nrenderï¼š æ¸²æŸ“ç»„ä»¶åˆ°è™šæ‹Ÿ DOMã€‚ screenï¼š æŸ¥è¯¢ DOM èŠ‚ç‚¹ï¼Œæ¨èä½¿ç”¨ç”¨æˆ·å¯è§çš„æŸ¥è¯¢æ–¹å¼ï¼ˆå¦‚ getByText, getByRoleï¼‰ã€‚ fireEventï¼š æ¨¡æ‹Ÿç”¨æˆ·äº‹ä»¶ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ã€‚ expect(...).toBeInTheDocument()ï¼š æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨äº DOM ä¸­ã€‚ å¼‚æ­¥æµ‹è¯•ï¼š ä½¿ç”¨ async/await å’Œ findBy* æŸ¥è¯¢ï¼ˆfindByText, findByRoleï¼‰ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ç­‰å¾…å…ƒç´ å‡ºç°ã€‚ æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼š ä½¿ç”¨ jest.mock æˆ– jest.spyOnã€‚ jestã€react-testing-library ç”¨è¿‡å—ï¼Ÿ\r#\ræ˜¯çš„ï¼Œæˆ‘ç”¨è¿‡ Jest å’Œ React Testing Library (RTL)ï¼Œå®ƒä»¬æ˜¯æˆ‘åœ¨ React é¡¹ç›®ä¸­è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•çš„ä¸»è¦å·¥å…·ã€‚\nJestï¼š\nè§’è‰²ï¼š å®ƒæ˜¯ä¸€ä¸ªJavaScript æµ‹è¯•è¿è¡Œå™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–­è¨€åº“ï¼ˆexpect APIï¼‰ã€æ¨¡æ‹Ÿæ¡†æ¶ (jest.mock, jest.spyOn)ã€‚ æ ¸å¿ƒç‰¹ç‚¹ï¼š é›¶é…ç½®ï¼š å¯¹äºå¤§å¤šæ•° React é¡¹ç›®ï¼ŒJest å¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚ å¿«ç…§æµ‹è¯•ï¼š å¯ä»¥æ–¹ä¾¿åœ°å¯¹æ¯” UI å¿«ç…§ï¼Œæ£€æµ‹æ„å¤–çš„ UI å˜åŒ–ã€‚ å¼ºå¤§çš„æ¨¡æ‹Ÿï¼š è½»æ¾æ¨¡æ‹Ÿæ¨¡å—ã€å‡½æ•°å’Œå®šæ—¶å™¨ã€‚ ä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼š æä¾›è¯¦ç»†çš„æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šã€‚ ç”¨æ³•ï¼š æˆ‘ç”¨ Jest æ¥ç»„ç»‡æµ‹è¯•å¥—ä»¶ (describe)ã€å®šä¹‰æµ‹è¯•ç”¨ä¾‹ (test/it)ã€ç¼–å†™æ–­è¨€ (expect) å’Œè¿›è¡Œæ¨¡æ‹Ÿã€‚ React Testing Library (RTL)ï¼š\nè§’è‰²ï¼š å®ƒæ˜¯ä¸€ä¸ªæ¸²æŸ“åº“ï¼Œç”¨äºæ¸²æŸ“ React ç»„ä»¶å¹¶æä¾›å·¥å…·æ¥æŸ¥è¯¢å’Œä¸è¿™äº›ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚ æ ¸å¿ƒç†å¿µï¼š â€œè¶Šåƒç”¨æˆ·ä½¿ç”¨ä½ çš„è½¯ä»¶ï¼Œä½ çš„æµ‹è¯•å°±è¶Šæœ‰ä¿¡å¿ƒã€‚â€ å®ƒé¼“åŠ±æˆ‘ä»¬ä»ç”¨æˆ·çš„è§’åº¦æ¥æµ‹è¯•ç»„ä»¶ï¼Œè€Œä¸æ˜¯å…³æ³¨å†…éƒ¨å®ç°ã€‚ æ ¸å¿ƒç‰¹ç‚¹ï¼š å…³æ³¨ç”¨æˆ·è¡Œä¸ºï¼š ä¼˜å…ˆæä¾›åŸºäºå¯è®¿é—®æ€§ï¼ˆAccessibilityï¼‰çš„æŸ¥è¯¢æ–¹æ³•ï¼ˆgetByRole, getByLabelText, getByText ç­‰ï¼‰ï¼Œæ¨¡æ‹Ÿç”¨æˆ·å¦‚ä½•ä¸é¡µé¢äº’åŠ¨ã€‚ ä¸å…³æ³¨å®ç°ç»†èŠ‚ï¼š é¼“åŠ±æµ‹è¯•ç»„ä»¶çš„æœ€ç»ˆæ¸²æŸ“ç»“æœå’Œè¡Œä¸ºï¼Œè€Œä¸æ˜¯å†…éƒ¨çŠ¶æ€æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ æ›´æ¥è¿‘çœŸå®æµè§ˆå™¨ç¯å¢ƒï¼š æ¸²æŸ“ç»„ä»¶åˆ°ä¸€ä¸ªè½»é‡çº§çš„ DOM ç¯å¢ƒä¸­ã€‚ ç”¨æ³•ï¼š æˆ‘ç”¨ render å‡½æ•°æ¥æ¸²æŸ“ç»„ä»¶ï¼Œç”¨ screen å¯¹è±¡ä¸Šçš„æŸ¥è¯¢æ–¹æ³•æ¥è·å– DOM å…ƒç´ ï¼Œç”¨ fireEvent æ¥æ¨¡æ‹Ÿç”¨æˆ·äº‹ä»¶ã€‚ æˆ‘çš„å®è·µï¼š æˆ‘é€šå¸¸ä¼šç»“åˆ Jest å’Œ RTL æ¥å¯¹æˆ‘çš„ React ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚\næˆ‘ä¼šä¸ºæ¯ä¸ªæ ¸å¿ƒä¸šåŠ¡ç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿å…¶åœ¨ä¸åŒ props å’Œ state ä¸‹çš„æ¸²æŸ“æ­£ç¡®æ€§ï¼Œä»¥åŠç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ï¼‰çš„é¢„æœŸè¡Œä¸ºã€‚ å¯¹äºå¸¦æœ‰å¼‚æ­¥æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ï¼‰çš„ç»„ä»¶ï¼Œæˆ‘ä¼šä½¿ç”¨ Jest æ¨¡æ‹Ÿ fetch æˆ– axiosï¼Œç„¶åä½¿ç”¨ RTL çš„ findBy æŸ¥è¯¢ç­‰å¾…å¼‚æ­¥ UI æ›´æ–°ã€‚ æˆ‘ä¼šç¡®ä¿å…³é”®ç»„ä»¶çš„æµ‹è¯•è¦†ç›–ç‡ï¼Œå¹¶é€šè¿‡ CI/CD æµæ°´çº¿è‡ªåŠ¨åŒ–è¿è¡Œæµ‹è¯•ã€‚ ç”¨ä»€ä¹ˆå·¥å…·è°ƒè¯• React åº”ç”¨ï¼Ÿ\r#\ræˆ‘ä¸»è¦ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥è°ƒè¯• React åº”ç”¨ï¼š\nReact DevTools (æµè§ˆå™¨æ‰©å±•)ï¼š\næ ¸å¿ƒè°ƒè¯•åˆ©å™¨ã€‚ å®ƒæ˜¯ Chrome/Firefox çš„æµè§ˆå™¨æ‰©å±•ã€‚ åŠŸèƒ½ï¼š Components Tabï¼š æŸ¥çœ‹ç»„ä»¶æ ‘ã€æ£€æŸ¥ç»„ä»¶çš„ propsã€stateã€Contextã€‚å¯ä»¥å®æ—¶ä¿®æ”¹ props å’Œ state æ¥è§‚å¯Ÿ UI å˜åŒ–ã€‚ Profiler Tabï¼š è®°å½•ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ï¼Œåˆ†ææ¸²æŸ“æ€§èƒ½ï¼Œæ‰¾å‡ºä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“æˆ–æ€§èƒ½ç“¶é¢ˆã€‚ Hooks æ£€æŸ¥ï¼š å¯ä»¥æŸ¥çœ‹ Hook çš„å†…éƒ¨å€¼ï¼ˆå¦‚ useState çš„å€¼ã€useRef.current çš„å€¼ï¼‰ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ£€æŸ¥ç»„ä»¶çŠ¶æ€ã€å®šä½ props ä¼ é€’é”™è¯¯ã€åˆ†ææ¸²æŸ“æ€§èƒ½ã€‚ æµè§ˆå™¨å¼€å‘è€…å·¥å…· (DevTools - Console, Network, Elements)ï¼š\nConsoleï¼š æŸ¥çœ‹ console.log è¾“å‡ºã€é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯ã€‚è¿™æ˜¯æ’æŸ¥ JavaScript è¿è¡Œæ—¶é”™è¯¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚ Networkï¼š ç›‘æ§æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼ˆAPI è¯·æ±‚ã€å›¾ç‰‡ã€è„šæœ¬åŠ è½½ï¼‰ï¼Œæ£€æŸ¥è¯·æ±‚å¤´ã€å“åº”ä½“ã€çŠ¶æ€ç ã€åŠ è½½æ—¶é—´ç­‰ã€‚å¯¹äºæ’æŸ¥æ¥å£é—®é¢˜ã€è·¨åŸŸé—®é¢˜ã€åŠ è½½æ€§èƒ½é—®é¢˜è‡³å…³é‡è¦ã€‚ Elementsï¼š æ£€æŸ¥å’Œä¿®æ”¹é¡µé¢çš„çœŸå® DOM ç»“æ„å’Œæ ·å¼ï¼ŒæŸ¥çœ‹å…ƒç´ è®¡ç®—æ ·å¼ã€å¸ƒå±€ç­‰ã€‚ Sourcesï¼š è®¾ç½®æ–­ç‚¹ã€å•æ­¥è°ƒè¯• JavaScript ä»£ç ï¼ŒæŸ¥çœ‹å˜é‡å€¼ã€è°ƒç”¨å †æ ˆã€‚ VS Code è°ƒè¯•å™¨ï¼š\nåŠŸèƒ½ï¼š å¦‚æœæ˜¯åœ¨ VS Code ä¸­å¼€å‘ï¼Œå¯ä»¥é…ç½®å†…ç½®çš„ JavaScript è°ƒè¯•å™¨ï¼Œç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå•æ­¥æ‰§è¡Œä»£ç ï¼ŒæŸ¥çœ‹å˜é‡ï¼Œæ¯”æµè§ˆå™¨ DevTools æ›´æ–¹ä¾¿ã€‚ ä½¿ç”¨åœºæ™¯ï¼š è°ƒè¯•å¤æ‚çš„ JavaScript é€»è¾‘ï¼Œç‰¹åˆ«æ˜¯å½“é—®é¢˜ä¸æ˜¯ç›´æ¥å‘ç”Ÿåœ¨ React æ¸²æŸ“å±‚æ—¶ã€‚ Redux DevTools (å¦‚æœä½¿ç”¨ Redux)ï¼š\nåŠŸèƒ½ï¼š å¼ºå¤§çš„ Redux ä¸“å±è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥æ—¶é—´æ—…è¡Œè°ƒè¯•ï¼ˆå›æº¯ Action å’Œ State çš„å˜åŒ–ï¼‰ã€æŸ¥çœ‹æ¯ä¸ª Action çš„è¯¦æƒ…ã€State çš„å‰åå¯¹æ¯”ã€ç”šè‡³æ´¾å‘ Actionã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ’æŸ¥ Redux çŠ¶æ€ç®¡ç†é—®é¢˜ï¼Œç†è§£æ•°æ®æµï¼Œè°ƒè¯•å¤æ‚çš„å¼‚æ­¥ Actionã€‚ è‡ªå®šä¹‰æ—¥å¿— (console.log / console.warn / console.error)ï¼š\nåœ¨å¼€å‘é˜¶æ®µï¼Œåˆç†åœ°æ’å…¥ console.log æ˜¯å¿«é€ŸæŸ¥çœ‹å˜é‡å€¼å’Œä»£ç æ‰§è¡Œæµç¨‹çš„æœ‰æ•ˆæ–¹æ³•ã€‚ è°ƒè¯•ç­–ç•¥ï¼š æˆ‘é€šå¸¸ä¼šä» React DevTools å¼€å§‹ï¼Œæ£€æŸ¥ç»„ä»¶çš„ props å’Œ state æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¦‚æœå‘ç°æ•°æ®æœ‰é—®é¢˜ï¼Œå†ç»“åˆç½‘ç»œé¢æ¿æ£€æŸ¥ API è¯·æ±‚æˆ–æ§åˆ¶å°æŸ¥çœ‹ JavaScript é”™è¯¯ã€‚å¯¹äºæ›´æ·±å±‚æ¬¡çš„é€»è¾‘é”™è¯¯ï¼Œä¼šåˆ©ç”¨ VS Code çš„è°ƒè¯•å™¨æˆ–åœ¨å…³é”®ä»£ç å¤„æ·»åŠ  console.log è¿›è¡Œç»†è‡´æ’æŸ¥ã€‚\nWebpack / Vite é…ç½®ä½ äº†è§£å—ï¼Ÿ\r#\ræˆ‘äº†è§£ Webpack å’Œ Viteï¼Œå¹¶åœ¨é¡¹ç›®ä¸­å®é™…é…ç½®å’Œä½¿ç”¨è¿‡ã€‚\nWebpack (ä¼ ç»Ÿæ‰“åŒ…å·¥å…·)\r#\ræ ¸å¿ƒæ¦‚å¿µï¼š\nEntry (å…¥å£)ï¼š æŒ‡ç¤º Webpack ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾ã€‚ Output (è¾“å‡º)ï¼š å‘Šè¯‰ Webpack åœ¨å“ªé‡Œè¾“å‡ºæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•å‘½åã€‚ Loader (åŠ è½½å™¨)ï¼š Webpack è‡ªèº«åªèƒ½ç†è§£ JavaScript å’Œ JSON æ–‡ä»¶ã€‚Loader å…è®¸ Webpack å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚ CSSã€å›¾ç‰‡ã€å­—ä½“ã€TypeScriptã€JSXï¼‰ï¼Œå°†å®ƒä»¬è½¬æ¢æˆæœ‰æ•ˆçš„æ¨¡å—ã€‚ å¸¸è§ Loaderï¼š babel-loader (å¤„ç† ES6+/JSX)ã€css-loader (è§£æ CSS)ã€style-loader (å°† CSS æ³¨å…¥ DOM)ã€sass-loader (å¤„ç† Sass)ã€file-loader/url-loader (å¤„ç†æ–‡ä»¶)ã€‚ Plugin (æ’ä»¶)ï¼š æ’ä»¶ç”¨äºæ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€æ³¨å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚å®ƒä»¬å¯ä»¥æ‹¦æˆª Webpack æ„å»ºæµç¨‹ä¸­çš„å„ç§äº‹ä»¶ã€‚ å¸¸è§ Pluginï¼š HtmlWebpackPlugin (ç”Ÿæˆ HTML æ–‡ä»¶å¹¶æ³¨å…¥æ‰“åŒ…åçš„ JS/CSS)ã€MiniCssExtractPlugin (æå– CSS åˆ°å•ç‹¬æ–‡ä»¶)ã€CleanWebpackPlugin (æ¸…ç†è¾“å‡ºç›®å½•)ã€DefinePlugin (å®šä¹‰å…¨å±€å¸¸é‡)ã€‚ Mode (æ¨¡å¼)ï¼š development (å¼€å‘æ¨¡å¼ï¼Œä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼Œæä¾›è°ƒè¯•ä¿¡æ¯) æˆ– production (ç”Ÿäº§æ¨¡å¼ï¼Œä¼˜åŒ–è¾“å‡ºä½“ç§¯å’Œè¿è¡Œæ€§èƒ½)ã€‚ å¸¸è§é…ç½®ï¼š\næ¨¡å—è§£æ (resolve)ï¼š é…ç½®æ¨¡å—å¦‚ä½•è¢«è§£æï¼Œä¾‹å¦‚è®¾ç½®åˆ«å (alias) ç®€åŒ–å¯¼å…¥è·¯å¾„ã€‚ ä¼˜åŒ– (optimization)ï¼š splitChunksï¼š ä»£ç åˆ†å‰²ï¼Œå°†å…¬å…±ä¾èµ–æˆ–ç¬¬ä¸‰æ–¹åº“æå–åˆ°å•ç‹¬çš„ chunkï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚ minimizerï¼š å‹ç¼©ä»£ç ï¼ˆå¦‚ TerserWebpackPlugin å‹ç¼© JSï¼ŒCssMinimizerWebpackPlugin å‹ç¼© CSSï¼‰ã€‚ DevServerï¼š å¼€å‘æœåŠ¡å™¨é…ç½®ï¼Œå®ç°çƒ­æ¨¡å—æ›¿æ¢ (HMR)ã€ä»£ç† (proxy)ã€‚ æˆ‘çš„äº†è§£å’Œå®è·µï¼š\næˆ‘ç†Ÿæ‚‰ webpack.config.js çš„åŸºæœ¬ç»“æ„å’Œå¸¸ç”¨é…ç½®é¡¹ã€‚ åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘é…ç½®è¿‡ babel-loader æ¥ç¼–è¯‘ React/JSX å’Œ ESNext è¯­æ³•ã€‚ é…ç½®è¿‡ css-loader å’Œ style-loader æ¥å¤„ç†æ ·å¼æ–‡ä»¶ï¼Œä¹Ÿç”¨ MiniCssExtractPlugin æå–è¿‡ CSSã€‚ åˆ©ç”¨ HtmlWebpackPlugin è‡ªåŠ¨åŒ–ç”Ÿæˆ HTML æ–‡ä»¶ã€‚ åˆ©ç”¨ splitChunks ä¼˜åŒ–åŒ…ä½“ç§¯å’Œç¼“å­˜ç­–ç•¥ã€‚ é…ç½® webpack-dev-server å®ç°çƒ­æ›´æ–°å’Œ API ä»£ç†ã€‚ Vite (æ–°ä¸€ä»£æ„å»ºå·¥å…·)\r#\ræ ¸å¿ƒç†å¿µï¼š åŸºäºæµè§ˆå™¨ ESM (ES Modules) çš„å¼€å‘æ¨¡å¼ å’Œ Rollup ç”Ÿäº§æ‰“åŒ…ã€‚\nå¼€å‘æ¨¡å¼ (Dev Server)ï¼š\næŒ‰éœ€ç¼–è¯‘ï¼š Vite åœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸éœ€è¦æ‰“åŒ…æ•´ä¸ªåº”ç”¨ã€‚å®ƒåˆ©ç”¨æµè§ˆå™¨å¯¹ ES Modules çš„åŸç”Ÿæ”¯æŒï¼Œåªåœ¨æµè§ˆå™¨è¯·æ±‚æŸä¸ªæ¨¡å—æ—¶æ‰å¯¹å…¶è¿›è¡Œè½¬æ¢å’Œæä¾›ã€‚ å†·å¯åŠ¨æå¿«ï¼š è¿™ç§æŒ‰éœ€ç¼–è¯‘çš„æ¨¡å¼ä½¿å¾— Vite çš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦æå¿«ã€‚ çƒ­æ¨¡å—æ›¿æ¢ (HMR) æå¿«ï¼š HMR çš„æ›´æ–°åªä½œç”¨äºå‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼Œå¹¶é€šè¿‡ WebSocket å°†æ›´æ–°æ¨é€åˆ°æµè§ˆå™¨ï¼Œè€Œä¸æ˜¯é‡æ–°æ„å»ºæ•´ä¸ªæ¨¡å—å›¾ï¼Œä½¿å¾— HMR é€Ÿåº¦é£å¿«ã€‚ ç”Ÿäº§æ‰“åŒ…ï¼š\nVite ä½¿ç”¨ Rollup è¿›è¡Œç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…ã€‚Rollup åœ¨æ‰“åŒ… JS åº“æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œå…¶ Tree Shaking èƒ½åŠ›å¼ºã€‚ ç‰¹ç‚¹ï¼š\nå¿«ï¼š å¼€å‘ä½“éªŒçš„æ ¸å¿ƒä¼˜åŠ¿ã€‚ å¼€ç®±å³ç”¨ï¼š å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼ŒVite å‡ ä¹æ˜¯é›¶é…ç½®ã€‚ æ’ä»¶åŒ–ï¼š åŸºäº Rollup æ’ä»¶æ¥å£ï¼Œç¤¾åŒºæä¾›äº†ä¸°å¯Œçš„æ’ä»¶ã€‚ TypeScript / JSX / CSS æ”¯æŒï¼š å†…ç½®æ”¯æŒï¼Œæ— éœ€é¢å¤–é…ç½® Loaderã€‚ æˆ‘çš„äº†è§£å’Œå®è·µï¼š\næˆ‘è®¤è¯†åˆ° Vite è§£å†³äº† Webpack åœ¨å¤§å‹é¡¹ç›®å†·å¯åŠ¨æ…¢ã€HMR æ›´æ–°æ…¢çš„ç—›ç‚¹ã€‚ æˆ‘äº†è§£ Vite é€šè¿‡ vite.config.js è¿›è¡Œé…ç½®ï¼Œç›¸æ¯” Webpack ç®€æ´å¾—å¤šã€‚ æˆ‘ä½¿ç”¨è¿‡ Vite çš„ proxy é…ç½®è¿›è¡Œ API è½¬å‘ã€‚ å¯¹äºæ–°é¡¹ç›®ï¼Œæˆ‘æ›´å€¾å‘äºé€‰æ‹© Viteï¼Œå› ä¸ºå®ƒèƒ½æä¾›æ›´æµç•…çš„å¼€å‘ä½“éªŒã€‚ æ€»ç»“ï¼š Webpack å¼ºå¤§ä¸”çµæ´»ï¼Œé€‚åˆå„ç§å¤æ‚çš„åœºæ™¯ï¼Œä½†é…ç½®ç›¸å¯¹ç¹çï¼Œå¼€å‘æ¨¡å¼é€Ÿåº¦è¾ƒæ…¢ã€‚Vite åˆ™æ˜¯åèµ·ä¹‹ç§€ï¼Œä»¥å…¶æå¿«çš„å¼€å‘æ¨¡å¼å’Œæç®€é…ç½®èµ¢å¾—äº†å¼€å‘è€…é’çï¼Œå°¤å…¶é€‚åˆç°ä»£å‰ç«¯é¡¹ç›®ã€‚\nğŸ› ï¸ é¡¹ç›®å®æˆ˜ç»éªŒ\r#\ræè¿°ä½ åšè¿‡çš„ä¸€ä¸ªå¤æ‚ React é¡¹ç›®ï¼Ÿ\r#\rï¼ˆè¿™é‡Œéœ€è¦ä½ ç»“åˆä½ ç®€å†ä¸­â€œæ±‡ä¸°è½¯ä»¶å¼€å‘ï¼ˆå¹¿ä¸œï¼‰æœ‰é™å…¬å¸ä¸Šæµ·åˆ†å…¬å¸â€çš„ç»éªŒæ¥ç»„ç»‡ç­”æ¡ˆï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ç¤ºä¾‹æ¡†æ¶ï¼Œä½ å¡«å……å…·ä½“ç»†èŠ‚ï¼‰\né¡¹ç›®åç§°ï¼š \u0026ldquo;æˆ‘ä»¬ä¹‹å‰åœ¨æ±‡ä¸°å‚ä¸è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ªåŸºäº Java Spring Boot å’Œ React çš„äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°ï¼Œç”¨äºæ”¯æ’‘é“¶è¡Œå†…éƒ¨çš„æŸé¡¹æ ¸å¿ƒä¸šåŠ¡ï¼ˆä¾‹å¦‚ï¼šé«˜é¢‘äº¤æ˜“æ•°æ®å¤„ç† / é‡‘èäº§å“é£é™©è¯„ä¼° / å®¢æˆ·æ•°æ®ç®¡ç†å¹³å°ç­‰ï¼‰ã€‚\u0026rdquo;\né¡¹ç›®èƒŒæ™¯å’Œå¤æ‚æ€§ï¼š\né«˜å¹¶å‘/é«˜å¯ç”¨ï¼š è¿™æ˜¯ä¸€ä¸ªå…³é”®ä¸šåŠ¡ç³»ç»Ÿï¼Œè¦æ±‚èƒ½å¤Ÿæ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼Œä¸”ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ã€‚è¿™æ„å‘³ç€å‰ç«¯ç»„ä»¶è¦èƒ½é«˜æ•ˆæ¸²æŸ“ï¼ŒåŒæ—¶åç«¯æœåŠ¡è¦èƒ½å¿«é€Ÿå“åº”ï¼Œæ•´ä¸ªç³»ç»Ÿè¦å…·å¤‡æé«˜çš„å®¹é”™èƒ½åŠ›ã€‚ æ•°æ®é‡å¤§ï¼š éœ€è¦å¤„ç†å’Œå±•ç¤ºå¤§é‡å®æ—¶æˆ–å‡†å®æ—¶æ•°æ®ï¼Œæ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆã€‚ å®‰å…¨æ€§/åˆè§„æ€§ï¼š ä½œä¸ºé“¶è¡Œç³»ç»Ÿï¼Œå¯¹æ•°æ®åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒã€å®¡è®¡æ—¥å¿—æœ‰ä¸¥æ ¼çš„å®‰å…¨åˆè§„è¦æ±‚ã€‚ å¾®æœåŠ¡æ¶æ„ï¼š æ•´ä¸ªç³»ç»Ÿæ˜¯åŸºäºäº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„ï¼Œå‰ç«¯éœ€è¦ä¸å¤šä¸ªåç«¯æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œå¹¶å¤„ç†å¤æ‚çš„è·¨æœåŠ¡æ•°æ®æµã€‚ å‰åç«¯ååŒï¼š ä½œä¸ºä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæˆ‘ä¸ä»…è´Ÿè´£å‰ç«¯ï¼Œä¹Ÿæ·±å…¥å‚ä¸äº†åç«¯å’Œéƒ¨ç½²è¿ç»´ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²å’ŒèŒè´£ï¼š\nå‰ç«¯æ–¹é¢ï¼š è´Ÿè´£æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ˆä¾‹å¦‚ï¼šäº¤æ˜“è¯¦æƒ…å±•ç¤ºã€é£é™©æŒ‡æ ‡å›¾è¡¨ã€ç”¨æˆ·é…ç½®ç•Œé¢ï¼‰çš„ React ç»„ä»¶è®¾è®¡å’Œå¼€å‘ã€‚ é’ˆå¯¹å¤§é‡æ•°æ®åˆ—è¡¨ï¼Œå¼•å…¥äº†**è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆå¦‚ react-windowï¼‰**æ¥æå‡æ¸²æŸ“æ€§èƒ½ã€‚ å®ç°äº†å¤æ‚çš„è¡¨å•é€»è¾‘å’Œæ ¡éªŒï¼ˆå¯èƒ½ä½¿ç”¨äº† React Hook Formï¼‰ï¼Œç¡®ä¿æ•°æ®è¾“å…¥çš„å‡†ç¡®æ€§ã€‚ å°è£…äº†é€šç”¨çš„æ•°æ®è¯·æ±‚ Hookï¼Œç»Ÿä¸€å¤„ç†åŠ è½½ã€é”™è¯¯å’Œå–æ¶ˆè¯·æ±‚ï¼Œå¹¶å®ç°äº†æ¥å£ç¼“å­˜å’Œåˆ†é¡µåŠ è½½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ å‚ä¸äº†å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚ç»„ä»¶æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²ï¼Œå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ã€‚ åç«¯æ–¹é¢ï¼š è®¾è®¡å’Œå®ç°äº†åŸºäº Spring Boot çš„å¾®æœåŠ¡ API æ¥å£ï¼Œè´Ÿè´£æ•°æ®å¤„ç†å’Œä¸šåŠ¡é€»è¾‘ã€‚ å‚ä¸äº†æ•°æ®åº“åˆ†ç‰‡å’Œåˆ†å¸ƒå¼äº‹åŠ¡çš„è®¾è®¡ä¸å®ç°ï¼Œä»¥åº”å¯¹é«˜å¹¶å‘åœºæ™¯ã€‚ åœ¨æ¶æ„ä¸­åµŒå…¥äº†åŠ å¯†ä¼ è¾“ã€ç»†ç²’åº¦æƒé™æ ¡éªŒï¼ˆRBACï¼‰å’Œå®¡è®¡æ—¥å¿—ï¼Œç¡®ä¿å®‰å…¨åˆè§„ã€‚ DevOps/æ¶æ„æ–¹é¢ï¼š å‚ä¸äº†äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°çš„æ¶æ„è®¾è®¡å’Œé€‰å‹ï¼ˆKubernetes, Dockerï¼‰ã€‚ ååŠ©æ­å»ºå’Œä¼˜åŒ– CI/CD æµæ°´çº¿ï¼ˆGitLab CI/Jenkins, Terraform IaCï¼‰ï¼Œå®ç°äº†å¤šç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ˜¾è‘—æå‡äº†ç ”å‘å’Œå‘å¸ƒæ•ˆç‡ã€‚ ååŠ©æ­å»ºäº† Prometheus + Grafana ç›‘æ§å¹³å°ï¼Œå®ç°ç³»ç»Ÿå®æ—¶ç›‘æ§ã€å‘Šè­¦å’Œæ•…éšœå®šä½ã€‚ é¡¹ç›®æˆæœï¼ˆé‡åŒ–æ•°æ®ï¼‰ï¼š\næ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ã€‚ ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ã€‚ å¹³å‡å“åº”æ—¶å»¶é™ä½ 50% ä»¥ä¸Šã€‚ æ•…éšœå®šä½æ•ˆç‡æå‡ 100%ã€‚ CI/CD æµæ°´çº¿æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Œå‘å¸ƒé¢‘ç‡æå‡æ•°å€ã€‚ é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼š (æŒ‘ä¸€ä¸ªæœ€å…¸å‹çš„æŒ‘æˆ˜æ¥å±•å¼€è¯´ï¼Œä¾‹å¦‚ï¼šé«˜å¹¶å‘ä¸‹çš„æ•°æ®ä¸€è‡´æ€§/æ€§èƒ½ä¼˜åŒ–)\næŒ‘æˆ˜ï¼š ä¾‹å¦‚ï¼Œåœ¨å¤„ç†é«˜å¹¶å‘äº¤æ˜“æ•°æ®æ—¶ï¼Œå¦‚ä½•ç¡®ä¿æ•°æ®åœ¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆåˆ†ç‰‡ï¼‰ä¸­çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¹¶ä¿è¯äº¤æ˜“çš„åŸå­æ€§ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼š æˆ‘ä»¬é‡‡ç”¨äº†åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼ˆå¦‚ Kafkaï¼‰ã€‚äº¤æ˜“æ•°æ®é¦–å…ˆå†™å…¥ Kafkaï¼Œç„¶åç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†å¹¶å†™å…¥åˆ°ä¸åŒçš„æ•°æ®åº“åˆ†ç‰‡ã€‚å¯¹äºæ ¸å¿ƒæµç¨‹ï¼Œæˆ‘ä»¬ç»“åˆäº†åˆ†å¸ƒå¼é”ï¼ˆåŸºäº Redisï¼‰æ¥é¿å…å¹¶å‘å†²çªã€‚åŒæ—¶ï¼Œä½¿ç”¨ @Transactional ç»“åˆ Spring Boot çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ¥æ§åˆ¶å•åº“äº‹åŠ¡ï¼Œå¯¹äºè·¨åº“äº‹åŠ¡ï¼Œåˆ™å€¾å‘äºé‡‡ç”¨æŸ”æ€§äº‹åŠ¡ï¼ˆå¦‚ TCC æˆ– Saga æ¨¡å¼ï¼‰ï¼Œç¡®ä¿åœ¨å¤æ‚ä¸šåŠ¡æµç¨‹ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­çš„æ€è€ƒå’Œè´¡çŒ®ï¼š\nä½œä¸ºé«˜çº§å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæˆ‘ä¸ä»…å…³æ³¨ä»£ç å®ç°ï¼Œä¹Ÿç§¯æå‚ä¸äº†æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨é€‰æ‹©çŠ¶æ€ç®¡ç†æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä¸»å¯¼äº†å¯¹ Redux Toolkit å’Œ react-query çš„è°ƒç ”å’Œå¼•å…¥ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®å±‚çš„ç®¡ç†æ•ˆç‡å’Œç»„ä»¶çš„å¼€å‘ä½“éªŒã€‚ æˆ‘æ³¨é‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œæ¨è¡Œäº†ä»£ç å®¡æŸ¥å’Œå•å…ƒæµ‹è¯•ï¼Œå¹¶ç§¯æç¼–å†™æŠ€æœ¯æ–‡æ¡£ã€‚ é¡¹ç›®ä¸­é‡åˆ°è¿‡å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ\r#\rï¼ˆç»“åˆä½ åœ¨æ±‡ä¸°çš„ç»éªŒï¼Œä»å‰ç«¯å’Œåç«¯æŒ‘1-2ä¸ªå…·ä½“ä¾‹å­ï¼‰\næˆ‘åœ¨å¤šä¸ªé¡¹ç›®ä¸­éƒ½é‡åˆ°è¿‡æ€§èƒ½é—®é¢˜ï¼Œè§£å†³è¿™äº›é—®é¢˜æ˜¯æå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæˆ‘è®°å¿†æ·±åˆ»çš„ä¾‹å­ï¼š\næ¡ˆä¾‹ï¼šé•¿åˆ—è¡¨æ¸²æŸ“æ€§èƒ½é—®é¢˜\né—®é¢˜æè¿°ï¼š åœ¨ä¸€ä¸ªå±•ç¤ºå¤§é‡äº¤æ˜“æ˜ç»†ï¼ˆå¯èƒ½è¾¾åˆ°å‡ åƒç”šè‡³ä¸Šä¸‡æ¡è®°å½•ï¼‰çš„é¡µé¢ä¸­ï¼Œç”¨æˆ·åœ¨åŠ è½½æˆ–æ»šåŠ¨æ—¶ä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°é¡µé¢å¡é¡¿ã€å“åº”è¿Ÿé’ã€‚åˆæ­¥åˆ†æå‘ç°ï¼Œé¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´å¾ˆé•¿ï¼Œå¹¶ä¸”æ»šåŠ¨æ—¶ CPU ä½¿ç”¨ç‡é£™å‡ã€‚ è¯Šæ–­è¿‡ç¨‹ï¼š é¦–å…ˆï¼Œä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆPerformance Tabï¼‰è¿›è¡Œæ€§èƒ½åˆ†æã€‚ å‘ç°å¤§é‡çš„è„šæœ¬æ‰§è¡Œæ—¶é—´å’Œå¸ƒå±€/é‡ç»˜æ—¶é—´ã€‚ React DevTools çš„ Profiler Tab æ˜¾ç¤ºï¼Œæ¯æ¬¡æ»šåŠ¨æˆ–æ•°æ®æ›´æ–°æ—¶ï¼Œæ•´ä¸ªåŒ…å«å¤§é‡åˆ—è¡¨é¡¹çš„çˆ¶ç»„ä»¶éƒ½åœ¨è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œå¹¶ä¸”ç”Ÿæˆäº†å¤§é‡çš„ DOM èŠ‚ç‚¹ã€‚ åˆæ­¥åˆ¤æ–­ï¼š ä¸»è¦ç“¶é¢ˆåœ¨äºä¸€æ¬¡æ€§æ¸²æŸ“äº†è¿‡å¤šçš„ DOM èŠ‚ç‚¹ï¼Œä»¥åŠ React åœ¨å¤„ç†è¿™äº›èŠ‚ç‚¹æ—¶è¿›è¡Œäº†å¤§é‡çš„ Diff å’Œ DOM æ“ä½œã€‚ è§£å†³æ–¹æ¡ˆï¼š å¼•å…¥åˆ—è¡¨è™šæ‹ŸåŒ– (Virtualization)ï¼š å†³å®šä½¿ç”¨ react-window åº“ã€‚å®ƒåªæ¸²æŸ“ç”¨æˆ·å½“å‰å¯è§åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œå¹¶å¯¹ä¸å¯è§åŒºåŸŸçš„åˆ—è¡¨é¡¹è¿›è¡Œé«˜åº¦å ä½ã€‚ å°†æ•°æ®æºå’Œæ¸²æŸ“é€»è¾‘é€‚é… FixedSizeList æˆ– VariableSizeList ç»„ä»¶ã€‚ æ•ˆæœï¼š é¡µé¢ DOM èŠ‚ç‚¹æ•°é‡ä»ä¸Šä¸‡ä¸ªéª¤é™åˆ°å‡ åä¸ªï¼ˆå–å†³äºè§†å£å¤§å°ï¼‰ï¼Œæ»šåŠ¨æ€§èƒ½ç¬é—´æµç•…ï¼ŒCPU å ç”¨ç‡å¤§å¹…ä¸‹é™ã€‚ ä¼˜åŒ–æ•°æ®æºå’Œæ›´æ–°ç­–ç•¥ï¼š ç»“åˆåˆ†é¡µåŠ è½½ï¼š å¦‚æœæ˜¯æ— é™æ»šåŠ¨ï¼Œç¡®ä¿ä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°å‰ç«¯ï¼Œè€Œæ˜¯æ ¹æ®æ»šåŠ¨ä½ç½®æ‡’åŠ è½½æ›´å¤šæ•°æ®ã€‚ æ•°æ®ä¸å¯å˜æ€§ï¼š ç¡®ä¿æ›´æ–°åˆ—è¡¨æ•°æ®æ—¶ï¼Œå§‹ç»ˆåˆ›å»ºæ–°çš„æ•°ç»„å¼•ç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼Œä»¥ä¾¿ React çš„ Diff ç®—æ³•èƒ½æ­£ç¡®è¿›è¡Œæµ…æ¯”è¾ƒã€‚ key çš„æ­£ç¡®ä½¿ç”¨ï¼š ç¡®ä¿æ¯ä¸ªåˆ—è¡¨é¡¹éƒ½æœ‰ä¸€ä¸ªç¨³å®šä¸”å”¯ä¸€çš„ keyï¼ˆé€šå¸¸æ˜¯åç«¯è¿”å›çš„å”¯ä¸€ IDï¼‰ï¼Œé¿å…è™šæ‹ŸåŒ–åº“å†…éƒ¨å›  key å˜åŒ–è€Œå¯¼è‡´çš„é”™è¯¯å¤ç”¨å’Œé‡æ–°æ¸²æŸ“ã€‚ æˆæœï¼š é¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´ç¼©çŸ­äº†çº¦ 60%ã€‚ æ»šåŠ¨æµç•…åº¦æ˜¾è‘—æå‡ï¼Œä»è‚‰çœ¼å¯è§çš„å¡é¡¿å˜ä¸ºå¹³æ»‘æ»šåŠ¨ã€‚ æµè§ˆå™¨ CPU å’Œå†…å­˜å ç”¨å¤§å¹…é™ä½ã€‚ ç”¨æˆ·ä½“éªŒå¾—åˆ°æå¤§æ”¹å–„ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æµè§ˆå’Œåˆ†æå¤§é‡æ•°æ®ã€‚ å…¶ä»–å¯èƒ½é‡åˆ°çš„æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼ˆå¯ä½œä¸ºå¤‡é€‰æ¡ˆä¾‹ï¼‰ï¼š\nåç«¯ API å“åº”æ…¢ï¼š æ£€æŸ¥åç«¯æ—¥å¿—ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ã€å¼•å…¥ Redis ç¼“å­˜ã€ä¼˜åŒ– SQLã€è¯»å†™åˆ†ç¦»ã€æ•°æ®åº“åˆ†ç‰‡ã€‚ ç½‘ç»œè¯·æ±‚è¿‡å¤š/è¿‡å¤§ï¼š æ¥å£åˆå¹¶ã€æ•°æ®å‹ç¼©ã€å›¾ç‰‡æ‡’åŠ è½½ã€CDN åŠ é€Ÿã€HTTP ç¼“å­˜ã€‚ ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼š ä½¿ç”¨ React.memo / useCallback / useMemoã€‚ JS é€»è¾‘è®¡ç®—è€—æ—¶ï¼š å°†å¤æ‚è®¡ç®—æ”¾å…¥ Web Workerã€æˆ–ä½¿ç”¨ useMemo è®°å¿†åŒ–ã€‚ ä½ æ˜¯å¦‚ä½•ç»„ç»‡ç»„ä»¶ç»“æ„å’Œæ¨¡å—çš„ï¼Ÿ\r#\ræˆ‘é€šå¸¸é‡‡ç”¨ä¸€ç§åŠŸèƒ½å¯¼å‘ï¼ˆæˆ–é¢†åŸŸé©±åŠ¨ï¼‰ä¸èŒè´£åˆ†ç¦»ç›¸ç»“åˆçš„ç»„ä»¶å’Œæ¨¡å—ç»„ç»‡æ–¹å¼ï¼Œä»¥æé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¼€å‘æ•ˆç‡ã€‚\næ ¸å¿ƒæ€æƒ³ï¼š\né«˜å†…èšï¼Œä½è€¦åˆï¼š ç»„ä»¶å’Œæ¨¡å—å†…éƒ¨åŠŸèƒ½ç´§å¯†ç›¸å…³ï¼Œç›¸äº’ä¹‹é—´çš„ä¾èµ–å°½å¯èƒ½å°‘ã€‚ å¯è¯»æ€§ä¸å¯æŸ¥æ‰¾æ€§ï¼š ç›®å½•ç»“æ„æ¸…æ™°ï¼Œæ˜“äºå›¢é˜Ÿæˆå‘˜ç†è§£å’Œæ‰¾åˆ°ç›¸å…³ä»£ç ã€‚ å¯å¤ç”¨æ€§ï¼š å°½å¯èƒ½æå–é€šç”¨ç»„ä»¶å’Œé€»è¾‘ã€‚ å…·ä½“çš„ç»„ç»‡ç»“æ„ï¼ˆç¤ºä¾‹ï¼‰ï¼š\nsrc/\râ”œâ”€â”€ assets/ # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ã€å…¨å±€æ ·å¼ï¼‰\râ”‚ â”œâ”€â”€ images/\râ”‚ â”œâ”€â”€ fonts/\râ”‚ â””â”€â”€ styles/\râ”‚ â”œâ”€â”€ _variables.scss # Sass å˜é‡\râ”‚ â”œâ”€â”€ _mixins.scss # Sass æ··å…¥\râ”‚ â””â”€â”€ global.scss # å…¨å±€æ ·å¼\râ”‚\râ”œâ”€â”€ components/ # é€šç”¨/UIç»„ä»¶ (Dumb Components)\râ”‚ â”œâ”€â”€ Button/\râ”‚ â”‚ â”œâ”€â”€ Button.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â”œâ”€â”€ Modal/\râ”‚ â”‚ â”œâ”€â”€ Modal.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â”œâ”€â”€ Table/\râ”‚ â”‚ â”œâ”€â”€ Table.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â””â”€â”€ LoadingSpinner/\râ”‚ â””â”€â”€ LoadingSpinner.jsx\râ”‚\râ”œâ”€â”€ features/ # ä¸šåŠ¡åŠŸèƒ½æ¨¡å— (Smart Components / Containers) - æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†\râ”‚ â”œâ”€â”€ UserManagement/ # ç”¨æˆ·ç®¡ç†æ¨¡å—\râ”‚ â”‚ â”œâ”€â”€ components/ # è¯¥æ¨¡å—å†…éƒ¨çš„UIç»„ä»¶\râ”‚ â”‚ â”‚ â”œâ”€â”€ UserListTable.jsx\râ”‚ â”‚ â”‚ â””â”€â”€ UserForm.jsx\râ”‚ â”‚ â”œâ”€â”€ hooks/ # è¯¥æ¨¡å—å†…éƒ¨çš„è‡ªå®šä¹‰Hook\râ”‚ â”‚ â”‚ â””â”€â”€ useUsersData.js\râ”‚ â”‚ â”œâ”€â”€ pages/ # è·¯ç”±é¡µé¢ç»„ä»¶\râ”‚ â”‚ â”‚ â””â”€â”€ UserListPage.jsx\râ”‚ â”‚ â”œâ”€â”€ services/ # æ¨¡å—ç›¸å…³çš„APIæœåŠ¡\râ”‚ â”‚ â”‚ â””â”€â”€ userService.js\râ”‚ â”‚ â””â”€â”€ index.js # å¯¼å‡ºæ¨¡å—å…¬å…±æ¥å£\râ”‚ â”œâ”€â”€ ProductCatalog/ # äº§å“ç›®å½•æ¨¡å—\râ”‚ â”‚ â””â”€â”€ ...\râ”‚ â””â”€â”€ OrderProcessing/ # è®¢å•å¤„ç†æ¨¡å—\râ”‚ â””â”€â”€ ...\râ”‚\râ”œâ”€â”€ hooks/ # é€šç”¨è‡ªå®šä¹‰Hook (è·¨æ¨¡å—å¤ç”¨)\râ”‚ â”œâ”€â”€ useDebounce.js\râ”‚ â”œâ”€â”€ useLocalStorage.js\râ”‚ â””â”€â”€ useClickOutside.js\râ”‚\râ”œâ”€â”€ services/ # å…¨å±€æˆ–é€šç”¨çš„ API æœåŠ¡\râ”‚ â”œâ”€â”€ authService.js\râ”‚ â””â”€â”€ apiClient.js # å°è£… Axios æˆ– Fetch\râ”‚\râ”œâ”€â”€ store/ # å…¨å±€çŠ¶æ€ç®¡ç† (Redux/Zustandç­‰)\râ”‚ â”œâ”€â”€ index.js # Store é…ç½®\râ”‚ â”œâ”€â”€ userSlice.js # Redux Toolkit çš„ Slice\râ”‚ â”œâ”€â”€ authSlice.js\râ”‚ â””â”€â”€ ...\râ”‚\râ”œâ”€â”€ utils/ # å·¥å…·å‡½æ•°å’Œå¸¸é‡\râ”‚ â”œâ”€â”€ constants.js\râ”‚ â”œâ”€â”€ helpers.js\râ”‚ â”œâ”€â”€ validators.js\râ”‚ â””â”€â”€ dateUtils.js\râ”‚\râ”œâ”€â”€ router/ # è·¯ç”±é…ç½®\râ”‚ â”œâ”€â”€ index.js # ä¸»è·¯ç”±é…ç½®\râ”‚ â””â”€â”€ routes.js # è·¯ç”±å®šä¹‰\râ”‚\râ”œâ”€â”€ App.jsx # åº”ç”¨æ ¹ç»„ä»¶\râ”œâ”€â”€ index.js # å…¥å£æ–‡ä»¶\râ””â”€â”€ reportWebVitals.js æˆ‘çš„å®è·µå’ŒåŸåˆ™ï¼š\næŒ‰åŠŸèƒ½/é¢†åŸŸåˆ’åˆ† (Feature-based)ï¼š è¿™æ˜¯æœ€é‡è¦çš„åŸåˆ™ã€‚å°†ä¸ç‰¹å®šä¸šåŠ¡åŠŸèƒ½ç›¸å…³çš„ç»„ä»¶ã€Hookã€æœåŠ¡ã€é¡µé¢ç­‰éƒ½æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ features ç›®å½•ä¸‹ã€‚è¿™ä½¿å¾—å›¢é˜Ÿæ›´å®¹æ˜“ç†è§£æŸä¸ªåŠŸèƒ½çš„å…¨éƒ¨ä»£ç ï¼Œä¹Ÿæ–¹ä¾¿æœªæ¥è¿›è¡Œæ‹†åˆ†æˆ–ç‹¬ç«‹éƒ¨ç½²ã€‚ UI ç»„ä»¶ä¸ä¸šåŠ¡ç»„ä»¶åˆ†ç¦»ï¼š components ç›®å½•å­˜æ”¾å¯å¤ç”¨çš„ã€ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„å“‘ç»„ä»¶ (Dumb Components)ï¼Œå®ƒä»¬åªè´Ÿè´£æ¸²æŸ“ UI å’Œæ¥æ”¶ propsã€‚features ç›®å½•ä¸‹çš„ç»„ä»¶ï¼ˆé€šå¸¸æ˜¯é¡µé¢ç»„ä»¶æˆ–å®¹å™¨ç»„ä»¶ï¼‰åˆ™åŒ…å«ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ï¼Œå®ƒä»¬ä¼šç»„åˆä½¿ç”¨ components ç›®å½•ä¸‹çš„ UI ç»„ä»¶ã€‚ Hooks é›†ä¸­ç®¡ç†ï¼š åˆ†ä¸º hooks/ï¼ˆé€šç”¨ Hookï¼‰å’Œ features/*/hooks/ï¼ˆç‰¹å®šä¸šåŠ¡ Hookï¼‰ï¼Œæ¸…æ™°åœ°è¡¨è¾¾å…¶å¤ç”¨èŒƒå›´ã€‚ æœåŠ¡å±‚æŠ½è±¡ï¼š æ‰€æœ‰çš„ API è¯·æ±‚éƒ½å°è£…åœ¨ services ç›®å½•ä¸‹ï¼Œä¸ç»„ä»¶è§£è€¦ã€‚å¯ä»¥è¿›ä¸€æ­¥æŒ‰ä¸šåŠ¡æ¨¡å—ç»†åˆ†ã€‚ å…¨å±€çŠ¶æ€ï¼š store ç›®å½•é›†ä¸­ç®¡ç†å…¨å±€çŠ¶æ€ï¼ˆå¦‚ Redux storeï¼‰ï¼Œå¹¶æŒ‰æ¨¡å— (slice) è¿›è¡Œåˆ’åˆ†ã€‚ è·¯ç”±é›†ä¸­ï¼š ç‹¬ç«‹çš„ router ç›®å½•ç®¡ç†è·¯ç”±é…ç½®ï¼Œä¾¿äºç»´æŠ¤å’Œå®ç°è·¯ç”±æ‡’åŠ è½½ã€‚ å…¥å£æ–‡ä»¶ï¼š App.jsx å’Œ index.js ä¿æŒç®€æ´ï¼Œä¸»è¦ç”¨äºåˆå§‹åŒ–åº”ç”¨å’ŒæŒ‚è½½æ ¹ç»„ä»¶ã€‚ è¿™ç§ç»“æ„åœ¨æˆ‘çš„é¡¹ç›®ä¸­è¡¨ç°è‰¯å¥½ï¼Œç‰¹åˆ«æ˜¯åœ¨å›¢é˜Ÿåä½œå’Œé¡¹ç›®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°åˆ’åˆ†èŒè´£ï¼Œé™ä½æ²Ÿé€šæˆæœ¬ï¼Œå¹¶æœ‰æ•ˆæ”¯æ’‘é¡¹ç›®çš„æ‰©å±•ã€‚\nåœ¨ React é¡¹ç›®ä¸­åšè¿‡å“ªäº›æŠ½è±¡/å°è£…ï¼Ÿ\r#\råœ¨ React é¡¹ç›®ä¸­ï¼Œæˆ‘ä¸»è¦åœ¨ä»¥ä¸‹å‡ ä¸ªå±‚é¢è¿›è¡ŒæŠ½è±¡å’Œå°è£…ï¼Œä»¥æé«˜ä»£ç å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ï¼š\nè‡ªå®šä¹‰ Hook å°è£…ï¼ˆé€»è¾‘å¤ç”¨æ ¸å¿ƒï¼‰ï¼š\nèŒè´£ï¼š è¿™æ˜¯æˆ‘æœ€ä¸»è¦çš„æŠ½è±¡æ–¹å¼ï¼Œç”¨äºå°è£…å’Œå¤ç”¨çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨ã€‚ ä¾‹å­ï¼š useFetchData / useApiï¼š å°è£…æ•°æ®è¯·æ±‚ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ã€ç¼“å­˜ç­‰ã€‚ useForm / useValidationï¼š å°è£…è¡¨å•å­—æ®µçš„çŠ¶æ€ç®¡ç†ã€éªŒè¯é€»è¾‘ã€æäº¤å¤„ç†ã€‚ useLocalStorageï¼š å°è£…ä¸æµè§ˆå™¨æœ¬åœ°å­˜å‚¨çš„äº¤äº’ã€‚ useDebounce / useThrottleï¼š å°è£…é˜²æŠ–/èŠ‚æµé€»è¾‘ã€‚ useClickOutsideï¼š å°è£…ç‚¹å‡»ç»„ä»¶å¤–éƒ¨çš„äº‹ä»¶ç›‘å¬ã€‚ æ•ˆæœï¼š æå¤§åœ°å‡å°‘äº†ç»„ä»¶å†…éƒ¨çš„æ ·æ¿ä»£ç ï¼Œä½¿ç»„ä»¶æ›´ä¸“æ³¨äº UI æ¸²æŸ“ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ UI ç»„ä»¶/é€šç”¨ç»„ä»¶å°è£…ï¼š\nèŒè´£ï¼š å°è£…ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„ã€å¯å¤ç”¨çš„ UI å…ƒç´ ã€‚ ä¾‹å­ï¼š Buttonã€Inputã€Modalã€Tableã€LoadingSpinnerã€DatePicker ç­‰ã€‚è¿™äº›ç»„ä»¶é€šå¸¸æ˜¯â€œå“‘ç»„ä»¶â€æˆ–â€œå±•ç¤ºå‹ç»„ä»¶â€ï¼Œåªæ¥æ”¶ props æ¥æ§åˆ¶å¤–è§‚å’Œè¡Œä¸ºã€‚ æ•ˆæœï¼š ç¡®ä¿ UI é£æ ¼çš„ä¸€è‡´æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚ API è¯·æ±‚å±‚å°è£…ï¼š\nèŒè´£ï¼š ç»Ÿä¸€ç®¡ç†æ‰€æœ‰åç«¯ API è¯·æ±‚ï¼Œå¤„ç†å…¬å…±é€»è¾‘ã€‚ ä¾‹å­ï¼š å°è£… axios æˆ– fetchã€‚ ç»Ÿä¸€çš„è¯·æ±‚é…ç½®ï¼š åŸºç¡€ URLã€è¯·æ±‚å¤´ï¼ˆå¦‚ Authorization Tokenã€Content-Typeï¼‰ã€‚ è¯·æ±‚æ‹¦æˆªå™¨ï¼š æ·»åŠ è®¤è¯ Tokenã€è®°å½•è¯·æ±‚æ—¥å¿—ã€å¤„ç†å…¨å±€ loading çŠ¶æ€ã€‚ å“åº”æ‹¦æˆªå™¨ï¼š ç»Ÿä¸€å¤„ç†é”™è¯¯ç ï¼ˆå¦‚ 401 æœªè®¤è¯ã€403 æ— æƒé™ï¼‰ã€è§£æå“åº”æ•°æ®ã€ç»Ÿä¸€é”™è¯¯æç¤ºã€‚ å–æ¶ˆè¯·æ±‚æœºåˆ¶ï¼š å°è£… AbortControllerã€‚ æ•ˆæœï¼š é›†ä¸­ç®¡ç†ç½‘ç»œè¯·æ±‚é€»è¾‘ï¼Œæé«˜ä»£ç å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘æ¯ä¸ªä¸šåŠ¡æ¨¡å—å¯¹è¯·æ±‚ç»†èŠ‚çš„å…³æ³¨ã€‚ çŠ¶æ€ç®¡ç†æ¨¡å—æŠ½è±¡ï¼ˆå¦‚æœä½¿ç”¨ Redux/Zustandï¼‰ï¼š\nèŒè´£ï¼š æŠ½è±¡ Redux çš„ reducerã€actionã€selector æˆ– Zustand çš„ store å®šä¹‰ã€‚ ä¾‹å­ï¼š åœ¨ä½¿ç”¨ Redux Toolkit æ—¶ï¼Œæˆ‘ä¼šå°†æ¯ä¸ªä¸šåŠ¡æ¨¡å—çš„çŠ¶æ€å®šä¹‰ä¸ºä¸€ä¸ª sliceï¼Œå…¶ä¸­åŒ…å«äº† reducerã€action creator å’Œ selectorï¼Œå®ç°äº†çŠ¶æ€çš„æ¨¡å—åŒ–å°è£…ã€‚ åœ¨ä½¿ç”¨ Zustand æ—¶ï¼Œæˆ‘ä¼šå°† store çš„å®šä¹‰ã€å…¶ä¸­çš„ state å’Œ actions å°è£…åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚ æ•ˆæœï¼š æ¸…æ™°åœ°å®šä¹‰äº†æ¯ä¸ªä¸šåŠ¡é¢†åŸŸçš„çŠ¶æ€å’ŒçŠ¶æ€å˜æ›´é€»è¾‘ï¼Œæé«˜äº†çŠ¶æ€ç®¡ç†çš„å¯é¢„æµ‹æ€§å’Œå¯æµ‹è¯•æ€§ã€‚ å·¥å…·å‡½æ•°åº“ï¼š\nèŒè´£ï¼š å°è£…ä¸ä¸šåŠ¡æ— å…³çš„ã€é€šç”¨çš„ JavaScript å·¥å…·å‡½æ•°ã€‚ ä¾‹å­ï¼š æ—¥æœŸæ ¼å¼åŒ–ã€å­—ç¬¦ä¸²å¤„ç†ã€æ•°æ®éªŒè¯è¾…åŠ©å‡½æ•°ã€æ•°å€¼è®¡ç®—ç­‰ã€‚ æ•ˆæœï¼š é¿å…ä»£ç é‡å¤ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ è¿™äº›æŠ½è±¡å’Œå°è£…ç­–ç•¥ä½¿å¾—æˆ‘çš„ React é¡¹ç›®èƒ½å¤Ÿä»ä¸€ä¸ªå°å‹çš„ Demo æ‰©å±•åˆ°ä¸€ä¸ªå¤æ‚çš„ä¼ä¸šçº§åº”ç”¨ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚\nå’Œåç«¯å¦‚ä½•å¯¹æ¥ï¼Ÿæœ‰æ²¡æœ‰å°è£…è¯·æ±‚åº“ï¼Ÿ\r#\råœ¨æˆ‘çš„ React é¡¹ç›®ä¸­ï¼Œä¸åç«¯å¯¹æ¥æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç¯èŠ‚ï¼Œæˆ‘é€šå¸¸ä¼šé‡‡å–ä»¥ä¸‹ç­–ç•¥å’Œæ­¥éª¤ï¼š\næ˜ç¡® API æ–‡æ¡£å’Œæ¥å£è§„èŒƒï¼š\nåœ¨é¡¹ç›®å¼€å§‹é˜¶æ®µï¼Œä¼šä¸åç«¯å›¢é˜Ÿå…±åŒå®šä¹‰è¯¦ç»†çš„ API æ–‡æ¡£ï¼ˆå¦‚ä½¿ç”¨ Swagger/OpenAPIã€Postman Collectionsï¼‰ã€‚è¿™åŒ…æ‹¬æ¥å£ URLã€è¯·æ±‚æ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰ã€è¯·æ±‚å‚æ•°ï¼ˆQuery Params, Request Bodyï¼‰ã€å“åº”ç»“æ„ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ã€é”™è¯¯ç å®šä¹‰ç­‰ã€‚ æ˜ç¡®å‰åç«¯æ•°æ®ä¼ è¾“æ ¼å¼ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰ã€‚ å°è£…è¯·æ±‚åº“ (Service Layer)ï¼š\næ˜¯çš„ï¼Œæˆ‘ä¸€å®šä¼šå°è£…è¯·æ±‚åº“ã€‚ è¿™æ˜¯å‰ç«¯é¡¹ç›®å·¥ç¨‹åŒ–å’Œæé«˜å¯ç»´æŠ¤æ€§çš„é‡è¦ä¸€ç¯ã€‚ é€‰æ‹©ï¼š æˆ‘ä¸»è¦ä½¿ç”¨ axios ä½œä¸º HTTP å®¢æˆ·ç«¯ï¼Œå› ä¸ºå®ƒæä¾›äº†å¼ºå¤§çš„æ‹¦æˆªå™¨ã€å–æ¶ˆè¯·æ±‚ã€è¶…æ—¶è®¾ç½®ç­‰åŠŸèƒ½ã€‚ å°è£…å†…å®¹ï¼š åŸºæœ¬é…ç½®ï¼š è®¾ç½® baseURLï¼ˆå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼‰ã€timeoutã€‚ è¯·æ±‚æ‹¦æˆªå™¨ (Request Interceptors)ï¼š æ·»åŠ è®¤è¯ Tokenï¼š è‡ªåŠ¨åœ¨æ¯ä¸ªè¯·æ±‚å¤´ä¸­åŠ å…¥ Authorization Token (å¦‚ JWT)ã€‚ ç»Ÿä¸€å‚æ•°å¤„ç†ï¼š ä¾‹å¦‚ï¼Œç»Ÿä¸€å¯¹ GET è¯·æ±‚çš„å‚æ•°è¿›è¡Œåºåˆ—åŒ–ã€‚ å…¨å±€ Loading çŠ¶æ€ï¼š åœ¨è¯·æ±‚å¼€å§‹æ—¶æ˜¾ç¤ºå…¨å±€ loading åŠ¨ç”»ã€‚ æ—¥å¿—è®°å½•ï¼š è®°å½•è¯·æ±‚ URLã€æ–¹æ³•ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚ å“åº”æ‹¦æˆªå™¨ (Response Interceptors)ï¼š ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼š æ ¹æ®åç«¯è¿”å›çš„ HTTP çŠ¶æ€ç æˆ–ä¸šåŠ¡é”™è¯¯ç è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼ˆå¦‚ 401 æœªè®¤è¯æ—¶è·³è½¬ç™»å½•é¡µï¼Œ403 æ— æƒé™æ—¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼‰ã€‚ æ•°æ®ç»“æ„è§£æ„ï¼š å¦‚æœåç«¯å“åº”ä½“æœ‰ç»Ÿä¸€çš„å°è£…ï¼ˆå¦‚ { code: 0, message: 'Success', data: {} }ï¼‰ï¼Œåˆ™åœ¨æ‹¦æˆªå™¨ä¸­ç›´æ¥è¿”å› data éƒ¨åˆ†ã€‚ å…¨å±€é”™è¯¯æç¤ºï¼š å¯¹æŸäº›é”™è¯¯ç ï¼Œè‡ªåŠ¨å¼¹å‡ºç»Ÿä¸€çš„é”™è¯¯æç¤ºæ¶ˆæ¯ï¼ˆå¦‚ Toastï¼‰ã€‚ å…¨å±€ Loading çŠ¶æ€ç»“æŸã€‚ å–æ¶ˆè¯·æ±‚ï¼š å°è£… AbortController æœºåˆ¶ï¼Œå…è®¸ç»„ä»¶åœ¨å¸è½½æˆ–è¯·æ±‚è¿‡æœŸæ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ã€‚ ç¤ºä¾‹ä»£ç ç»“æ„ï¼š // src/services/apiClient.js import axios from \u0026#39;axios\u0026#39;; const apiClient = axios.create({ baseURL: process.env.REACT_APP_API_BASE_URL || \u0026#39;/api\u0026#39;, // ç¯å¢ƒå˜é‡é…ç½® timeout: 10000, // 10ç§’è¶…æ—¶ headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, }, }); // è¯·æ±‚æ‹¦æˆªå™¨ apiClient.interceptors.request.use( (config) =\u0026gt; { // ä» localStorage æˆ– Redux store è·å– token const token = localStorage.getItem(\u0026#39;authToken\u0026#39;); if (token) { config.headers.Authorization = `Bearer ${token}`; } // å¯ä»¥æ·»åŠ å…¨å±€ loading çŠ¶æ€ // showGlobalLoading(); return config; }, (error) =\u0026gt; { return Promise.reject(error); } ); // å“åº”æ‹¦æˆªå™¨ apiClient.interceptors.response.use( (response) =\u0026gt; { // hideGlobalLoading(); // å¦‚æœåç«¯æœ‰ç»Ÿä¸€çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œå¯ä»¥åªè¿”å›å®é™…çš„æ•°æ®éƒ¨åˆ† if (response.data \u0026amp;\u0026amp; response.data.code === 0) { return response.data.data; // è¿”å›ä¸šåŠ¡æ•°æ® } else if (response.data \u0026amp;\u0026amp; response.data.message) { // å¤„ç†ä¸šåŠ¡é”™è¯¯ // showToast(response.data.message, \u0026#39;error\u0026#39;); return Promise.reject(new Error(response.data.message)); } return response; }, (error) =\u0026gt; { // hideGlobalLoading(); if (error.response) { const { status, data } = error.response; if (status === 401) { // å¤„ç†æœªè®¤è¯ï¼Œä¾‹å¦‚è·³è½¬åˆ°ç™»å½•é¡µ // redirectToLogin(); // showToast(\u0026#39;è®¤è¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•\u0026#39;, \u0026#39;error\u0026#39;); } else if (status === 403) { // å¤„ç†æ— æƒé™ // showToast(\u0026#39;æ— è®¿é—®æƒé™\u0026#39;, \u0026#39;error\u0026#39;); } else { // showToast(data.message || \u0026#39;è¯·æ±‚å¤±è´¥\u0026#39;, \u0026#39;error\u0026#39;); } } else if (error.request) { // è¯·æ±‚å·²å‘é€ä½†æœªæ”¶åˆ°å“åº” // showToast(\u0026#39;ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨æ— å“åº”\u0026#39;, \u0026#39;error\u0026#39;); } else { // è¯·æ±‚è®¾ç½®æ—¶å‘ç”Ÿé”™è¯¯ // showToast(\u0026#39;è¯·æ±‚é…ç½®é”™è¯¯\u0026#39;, \u0026#39;error\u0026#39;); } return Promise.reject(error); } ); export default apiClient; ä¸šåŠ¡ API æœåŠ¡æ¨¡å—ï¼š\nå¯¹äºæ¯ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œæˆ‘ä¼šåˆ›å»ºç‹¬ç«‹çš„ API æœåŠ¡æ–‡ä»¶ï¼Œç»Ÿä¸€ç®¡ç†è¯¥æ¨¡å—ç›¸å…³çš„æ¥å£ã€‚ ä¾‹å­ï¼š src/services/userService.js, src/services/productService.js è¿™äº›æ–‡ä»¶ä¼šå¯¼å…¥ä¸Šé¢å°è£…çš„ apiClientï¼Œå¹¶æä¾›å…·ä½“çš„ä¸šåŠ¡æ–¹æ³•ã€‚ // src/services/userService.js import apiClient from \u0026#39;./apiClient\u0026#39;; export const getUsers = (params) =\u0026gt; apiClient.get(\u0026#39;/users\u0026#39;, { params }); export const getUserById = (id) =\u0026gt; apiClient.get(`/users/${id}`); export const createUser = (data) =\u0026gt; apiClient.post(\u0026#39;/users\u0026#39;, data); // ... åœ¨ç»„ä»¶æˆ– Hook ä¸­è°ƒç”¨ï¼š\nç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook ä¼šè°ƒç”¨è¿™äº›ä¸šåŠ¡ API æœåŠ¡æ–¹æ³•æ¥è·å–æˆ–æäº¤æ•°æ®ã€‚ æˆ‘å€¾å‘äºä½¿ç”¨è‡ªå®šä¹‰ Hook (å¦‚ useQuery from react-query æˆ–è‡ªå®šä¹‰ useFetchData ) æ¥å°è£…æ•°æ®è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬åŠ è½½ã€é”™è¯¯ã€æ•°æ®çŠ¶æ€ç®¡ç†ï¼Œå¹¶åœ¨æ­¤å¤„è°ƒç”¨ userService.getUsers() ç­‰æ–¹æ³•ã€‚ é€šè¿‡è¿™ç§åˆ†å±‚çš„å¯¹æ¥æ–¹å¼ï¼Œæˆ‘èƒ½å¤Ÿç¡®ä¿å‰ç«¯ä¸åç«¯äº¤äº’çš„å¥å£®æ€§ã€å¯ç»´æŠ¤æ€§å’Œé«˜æ•ˆç‡ã€‚\nğŸ§  è¿›é˜¶ä¸æ¡†æ¶åŸç†\r#\rReact ä¸­ setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\r#\råœ¨ React ä¸­ï¼ŒsetStateï¼ˆåŒ…æ‹¬å‡½æ•°ç»„ä»¶çš„ useState æ›´æ–°å‡½æ•°ï¼‰æ—¢å¯ä»¥æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œè¿™å–å†³äºå®ƒåœ¨ä»€ä¹ˆä¸Šä¸‹æ–‡è¢«è°ƒç”¨ã€‚\næ¦‚æ‹¬ï¼š\nåœ¨ React å†…éƒ¨çš„äº‹ä»¶å¤„ç†å‡½æ•°å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼ŒsetState æ˜¯å¼‚æ­¥çš„ï¼ˆæ‰¹å¤„ç†ï¼‰ã€‚ åœ¨ åŸç”Ÿäº‹ä»¶å¤„ç†å‡½æ•°æˆ–å¼‚æ­¥ä»£ç ï¼ˆå¦‚ setTimeoutã€Promise å›è°ƒï¼‰ä¸­ï¼ŒsetState æ˜¯åŒæ­¥çš„ã€‚ React 18 ä¹‹åï¼Œæ‰€æœ‰ setState è°ƒç”¨é»˜è®¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆè‡ªåŠ¨æ‰¹å¤„ç†ï¼‰ï¼Œæ— è®ºåœ¨ä½•ç§ä¸Šä¸‹æ–‡ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿï¼ˆReact 18 ä¹‹å‰çš„æœºåˆ¶ï¼‰ è¿™æ˜¯å› ä¸º React æœ‰ä¸€ä¸ªæ‰¹å¤„ç† (Batching) æœºåˆ¶ã€‚\nä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼š å¦‚æœæ¯æ¬¡ setState è°ƒç”¨éƒ½ç«‹å³æ›´æ–° DOMï¼Œä¼šå¯¼è‡´é¢‘ç¹çš„é‡ç»˜å’Œå›æµï¼Œæ€§èƒ½æå·®ã€‚ é˜²æ­¢ä¸ä¸€è‡´çš„ UI çŠ¶æ€ï¼š åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼Œå¦‚æœå¤šä¸ªçŠ¶æ€æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸­é—´çŠ¶æ€çš„ UI é—ªçƒã€‚ æ‰¹å¤„ç†æœºåˆ¶ï¼š å½“ä½ åœ¨ React å†…éƒ¨çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆä¾‹å¦‚ onClickã€onChange ç­‰åˆæˆäº‹ä»¶ï¼‰ä¸­å¤šæ¬¡è°ƒç”¨ setState æ—¶ï¼ŒReact ä¼šå°†è¿™äº›æ›´æ–°åˆå¹¶ (batch) èµ·æ¥ï¼Œåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸæ—¶ç»Ÿä¸€æ‰§è¡Œä¸€æ¬¡çœŸå®çš„ DOM æ›´æ–°ã€‚è¿™ç¡®ä¿äº†ï¼š\næ›´å°‘çš„ DOM æ“ä½œï¼š æ‰€æœ‰çš„ setState è°ƒç”¨åªè§¦å‘ä¸€æ¬¡ DOM æ¸²æŸ“ã€‚ æ›´å¥½çš„æ€§èƒ½ï¼š é¿å…äº†ä¸å¿…è¦çš„é‡å¤è®¡ç®—å’Œæ¸²æŸ“ã€‚ çŠ¶æ€ä¸€è‡´æ€§ï¼š ä¿è¯åœ¨ä¸€ä¸ªäº‹ä»¶å†…ï¼Œç»„ä»¶çš„ props å’Œ state å¤„äºä¸€ä¸ªä¸€è‡´çš„æœ€ç»ˆçŠ¶æ€ã€‚ ç¤ºä¾‹ï¼ˆReact 18 ä¹‹å‰ï¼‰ï¼š\n// React 18 ä¹‹å‰ function MyComponent() { const [count, setCount] = useState(0); const handleClick = () =\u0026gt; { setCount(count + 1); // ç¬¬ä¸€æ¬¡è°ƒç”¨ console.log(count); // 0 (æ—§å€¼ï¼Œå› ä¸º setState å¼‚æ­¥) setCount(prev =\u0026gt; prev + 1); // ç¬¬äºŒæ¬¡è°ƒç”¨ (å‡½æ•°å¼æ›´æ–°ï¼Œä¼šè¢«åˆå¹¶) console.log(count); // 0 (æ—§å€¼) // ä¸Šè¿°ä¸¤ä¸ª setCount ä¼šè¢«æ‰¹å¤„ç†ï¼Œæœ€ç»ˆ count ä¼šå˜æˆ 2ï¼Œä½† console.log çœ‹åˆ°çš„æ˜¯æ—§å€¼ }; const handleAsyncClick = () =\u0026gt; { setTimeout(() =\u0026gt; { setCount(count + 1); // ç¬¬ä¸€æ¬¡è°ƒç”¨ console.log(count); // å¯èƒ½æ˜¯ 0 æˆ– 1 (å–å†³äº timingï¼Œä½†è¿™é‡Œé€šå¸¸æ˜¯åŒæ­¥æ›´æ–°) setCount(prev =\u0026gt; prev + 1); // ç¬¬äºŒæ¬¡è°ƒç”¨ console.log(count); // å¯èƒ½æ˜¯ 1 æˆ– 2 (åŒæ­¥æ›´æ–°) // åœ¨ setTimeout ä¸­ï¼Œæ¯ä¸ª setState éƒ½ä¼šåŒæ­¥æ›´æ–°å¹¶è§¦å‘æ¸²æŸ“ }, 0); }; } React 18 åçš„å˜åŒ–ï¼šè‡ªåŠ¨æ‰¹å¤„ç† (Automatic Batching) React 18 å¼•å…¥äº†è‡ªåŠ¨æ‰¹å¤„ç†ã€‚ç°åœ¨ï¼Œæ— è®º setState æ˜¯åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ã€åŸç”Ÿäº‹ä»¶ã€setTimeout è¿˜æ˜¯ Promise å›è°ƒä¸­è°ƒç”¨ï¼Œå®ƒéƒ½å°†é»˜è®¤è¢«æ‰¹å¤„ç†ã€‚è¿™æ„å‘³ç€æ‰€æœ‰è¿™äº›æ›´æ–°éƒ½å°†åœ¨ä¸‹ä¸€ä¸ªæ¸²æŸ“ä¸­ä¸€èµ·å¤„ç†ï¼Œé™¤éä½ æ˜ç¡®é€‰æ‹©é€€å‡ºæ‰¹å¤„ç†ï¼ˆä½¿ç”¨ ReactDOM.flushSyncï¼‰ã€‚\nå¥½å¤„ï¼š è¿›ä¸€æ­¥ç®€åŒ–äº†å¼€å‘è€…å¯¹ setState è¡Œä¸ºçš„ç†è§£ï¼Œå¹¶æå‡äº†åº”ç”¨åœ¨æ›´å¤šåœºæ™¯ä¸‹çš„æ€§èƒ½ã€‚\nä»€ä¹ˆæ˜¯è°ƒå’Œï¼ˆReconciliationï¼‰ï¼Ÿ\r#\rè°ƒå’Œï¼ˆReconciliationï¼‰ æ˜¯ React çš„æ ¸å¿ƒç®—æ³•ã€‚å®ƒæŒ‡çš„æ˜¯ React åœ¨ç»„ä»¶çŠ¶æ€ï¼ˆæˆ– propsï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–° UI çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå°†æ–°çš„ React å…ƒç´ æ ‘ï¼ˆè™šæ‹Ÿ DOMï¼‰ä¸ä¹‹å‰çš„ React å…ƒç´ æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå¯¹çœŸå® DOM åšå‡ºå“ªäº›æœ€å°çš„æ›´æ”¹ã€‚\nè°ƒå’Œè¿‡ç¨‹çš„æ­¥éª¤ï¼š\nè§¦å‘æ›´æ–°ï¼š å½“ç»„ä»¶çš„ state æˆ– props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚ ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼š React ä¼šè°ƒç”¨ç»„ä»¶çš„ render æ–¹æ³•ï¼ˆæˆ–å‡½æ•°ç»„ä»¶çš„ä½“ï¼‰ï¼Œç”Ÿæˆä¸€æ£µæ–°çš„ React å…ƒç´ æ ‘ï¼ˆä¹Ÿå°±æ˜¯æ–°çš„è™šæ‹Ÿ DOMï¼‰ã€‚ Diff ç®—æ³•æ¯”è¾ƒï¼š React ä¼šå°†è¿™æ£µæ–°çš„è™šæ‹Ÿ DOM æ ‘ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“çš„è™šæ‹Ÿ DOM æ ‘è¿›è¡Œé€’å½’æ¯”è¾ƒã€‚è¿™å°±æ˜¯æ‰€è°“çš„ Diff ç®—æ³•ã€‚ æ ¸å¿ƒè§„åˆ™ï¼š å…ƒç´ ç±»å‹ä¸åŒï¼š å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ç±»å‹ä¸åŒï¼ˆä¾‹å¦‚ï¼Œ\u0026lt;div\u0026gt; å˜ä¸º \u0026lt;span\u0026gt;ï¼‰ï¼ŒReact ä¼šé”€æ¯æ—§æ ‘ï¼Œå¹¶ä»å¤´å¼€å§‹æ„å»ºæ–°æ ‘ã€‚ å…ƒç´ ç±»å‹ç›¸åŒï¼š å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ç±»å‹ç›¸åŒï¼ŒReact ä¼šæ¯”è¾ƒå®ƒä»¬çš„å±æ€§ã€‚åªæœ‰å‘ç”Ÿæ”¹å˜çš„å±æ€§ä¼šè¢«æ›´æ–°åˆ°çœŸå® DOM ä¸Šã€‚ åˆ—è¡¨æ¯”è¾ƒï¼ˆé€šè¿‡ keyï¼‰ï¼š å¯¹äºåˆ—è¡¨ï¼ŒReact ä½¿ç”¨ key å±æ€§æ¥è¯†åˆ«å…ƒç´ ã€‚å¦‚æœ key ç›¸åŒï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œä¼šå°è¯•å¤ç”¨ï¼›å¦‚æœ key ä¸åŒï¼Œåˆ™é”€æ¯é‡å»ºã€‚ ç”Ÿæˆæ›´æ–°é˜Ÿåˆ— (Patch)ï¼š Diff ç®—æ³•ä¼šè®¡ç®—å‡ºæœ€å°çš„æ›´æ–°é›†åˆï¼Œå½¢æˆä¸€ä¸ªâ€œè¡¥ä¸â€ (patch) æˆ–â€œæ›´æ–°é˜Ÿåˆ—â€ã€‚ æ›´æ–°çœŸå® DOMï¼š React å°†è¿™ä¸ªè¡¥ä¸åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šï¼Œåªæ‰§è¡Œå¿…è¦çš„ DOM æ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤ã€æ›´æ–°å±æ€§ï¼‰ã€‚è¿™ä½¿å¾— React èƒ½å¤Ÿé«˜æ•ˆåœ°æ›´æ–° UIï¼Œé¿å…äº†ä»£ä»·æ˜‚è´µçš„æ•´ä½“ DOM é‡ç»˜ã€‚ ä¸ºä»€ä¹ˆå«â€œè°ƒå’Œâ€è€Œä¸æ˜¯â€œæ¸²æŸ“â€ï¼Ÿ â€œæ¸²æŸ“â€é€šå¸¸æŒ‡å°†æ•°æ®è½¬åŒ–ä¸ºå¯è§†åŒ–å½¢å¼çš„è¿‡ç¨‹ã€‚è€Œâ€œè°ƒå’Œâ€æ›´å¼ºè°ƒçš„æ˜¯æ¯”è¾ƒå’Œåè°ƒæ—§çš„ UI çŠ¶æ€ä¸æ–°çš„ UI çŠ¶æ€ï¼Œå¹¶æ‰¾å‡ºæœ€å°çš„å·®å¼‚ä»¥è¾¾åˆ°æœ€ç»ˆçŠ¶æ€çš„è¿‡ç¨‹ã€‚\nFiber æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\r#\rFiber æ˜¯ React 16 å¼•å…¥çš„ä¸€ä¸ªå…¨æ–°çš„æ ¸å¿ƒç®—æ³•çš„é‡å†™ã€‚å®ƒè§£å†³äº†ä¹‹å‰ React Stack Reconcilerï¼ˆæ ˆè°ƒå’Œå™¨ï¼‰å­˜åœ¨çš„ä¸»è¦é—®é¢˜ï¼šé•¿ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚\nStack Reconciler çš„é—®é¢˜ (React 15 åŠä»¥å‰)ï¼š\né€’å½’æ‰§è¡Œï¼š è°ƒå’Œè¿‡ç¨‹æ˜¯åŒæ­¥çš„ã€é€’å½’æ‰§è¡Œçš„ã€‚ä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šä¸€å£æ°”å¤„ç†å®Œæ•´ä¸ªç»„ä»¶æ ‘çš„ Diff è¿‡ç¨‹ï¼Œç›´åˆ°å®Œæˆã€‚ é˜»å¡ä¸»çº¿ç¨‹ï¼š å¦‚æœç»„ä»¶æ ‘éå¸¸æ·±ã€ç»„ä»¶æ•°é‡éå¸¸å¤šï¼Œæˆ–è€…æŸä¸ªç»„ä»¶çš„ render è¿‡ç¨‹è®¡ç®—é‡å¾ˆå¤§ï¼Œæ•´ä¸ª Diff è¿‡ç¨‹å¯èƒ½ä¼šæŒç»­å¾ˆé•¿æ—¶é—´ã€‚ç”±äº JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™ä¼šé˜»å¡æµè§ˆå™¨çš„ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´é¡µé¢é•¿æ—¶é—´æ— å“åº”ï¼Œç”¨æˆ·æ— æ³•è¿›è¡Œæ“ä½œï¼Œå‡ºç°å¡é¡¿ã€‚ Fiber æ¶æ„å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼š\nå¯ä¸­æ–­å’Œå¯æ¢å¤çš„æ›´æ–°ï¼š\nFiber å°† React å†…éƒ¨çš„åè°ƒå·¥ä½œåˆ†è§£æˆä¸€ä¸ªä¸ªå°çš„**â€œå·¥ä½œå•å…ƒâ€ï¼ˆFiberï¼‰**ã€‚ æ¯ä¸ª Fiber ä»£è¡¨ä¸€ä¸ªç»„ä»¶æˆ–ä¸€ä¸ª DOM èŠ‚ç‚¹ã€‚ åè°ƒè¿‡ç¨‹ä¸å†æ˜¯åŒæ­¥é€’å½’ï¼Œè€Œæ˜¯å¯ä»¥æš‚åœå’Œæ¢å¤çš„ã€‚React å¯ä»¥åœ¨å®Œæˆä¸€éƒ¨åˆ†å·¥ä½œåï¼Œå°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ï¼Œè®©æµè§ˆå™¨å¤„ç†ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ï¼‰ï¼Œç„¶åå†ç»§ç»­ä¹‹å‰ä¸­æ–­çš„å·¥ä½œã€‚ è¿™ç§èƒ½åŠ›ç§°ä¸º**â€œå¯ä¸­æ–­æ¸²æŸ“â€ (Interruptible Rendering)**ï¼Œæ˜¯å®ç° Concurrent Mode å’Œ Suspense çš„åŸºç¡€ã€‚ ä¼˜å…ˆçº§è°ƒåº¦ (Prioritization)ï¼š\nFiber å¼•å…¥äº†ä»»åŠ¡ä¼˜å…ˆçº§çš„æ¦‚å¿µã€‚React å¯ä»¥æ ¹æ®ä¸åŒçš„æ›´æ–°ç±»å‹ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§ã€‚ é«˜ä¼˜å…ˆçº§çš„æ›´æ–°å¯ä»¥ä¸­æ–­ä½ä¼˜å…ˆçº§çš„æ›´æ–°ï¼Œä¼˜å…ˆå¾—åˆ°æ‰§è¡Œå’Œæ¸²æŸ“ï¼Œç¡®ä¿å…³é”®ç”¨æˆ·äº¤äº’çš„åŠæ—¶å“åº”ã€‚ åŒç¼“å†²æœºåˆ¶ (Double Buffering)ï¼š\nFiber ç»´æŠ¤ä¸¤æ£µ Fiber æ ‘ï¼šâ€œCurrentâ€æ ‘ï¼ˆå½“å‰åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„çŠ¶æ€ï¼‰å’Œ**â€œWorkInProgressâ€æ ‘**ï¼ˆæ­£åœ¨æ„å»ºçš„ã€å³å°†å˜æˆä¸‹ä¸€ä¸ª Current æ ‘çš„è‰ç¨¿ï¼‰ã€‚ æ‰€æœ‰çš„æ›´æ–°æ“ä½œéƒ½åœ¨ WorkInProgress æ ‘ä¸Šè¿›è¡Œã€‚å½“ WorkInProgress æ ‘æ„å»ºå®Œæˆåï¼Œå¹¶ä¸”æ‰€æœ‰å‰¯ä½œç”¨éƒ½å¤„ç†å®Œæ¯•ï¼ŒReact ä¼šé€šè¿‡ä¸€ä¸ªç®€å•çš„æŒ‡é’ˆåˆ‡æ¢ï¼Œå°† WorkInProgress æ ‘å˜ä¸ºæ–°çš„ Current æ ‘ï¼Œä¸€æ¬¡æ€§æäº¤åˆ°çœŸå® DOMã€‚ è¿™ä¿è¯äº† UI æ›´æ–°çš„åŸå­æ€§å’Œä¸€è‡´æ€§ï¼Œç”¨æˆ·ä¸ä¼šçœ‹åˆ°ä¸­é—´çŠ¶æ€æˆ–ä¸å®Œæ•´çš„ UIã€‚ æ€»ç»“ï¼š Fiber æ¶æ„å°† React çš„åè°ƒè¿‡ç¨‹ä»åŒæ­¥çš„ã€ä¸å¯ä¸­æ–­çš„é€’å½’æ¨¡å‹ï¼Œè½¬å˜ä¸ºå¼‚æ­¥çš„ã€å¯ä¸­æ–­çš„å¢é‡æ›´æ–°æ¨¡å‹ã€‚è¿™ä½¿å¾— React èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´ï¼Œå“åº”ç”¨æˆ·äº¤äº’ï¼Œå¹¶ä¸ºæœªæ¥çš„å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰å’Œ Suspense ç­‰é«˜çº§ç‰¹æ€§å¥ å®šäº†åŸºç¡€ï¼Œä»è€Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚\nConcurrent Mode å’Œ Suspense çŸ¥é“å¤šå°‘ï¼Ÿ\r#\rConcurrent Mode (å¹¶å‘æ¨¡å¼) å’Œ Suspense æ˜¯ React 18 å¼•å…¥çš„å¼ºå¤§æ–°ç‰¹æ€§ï¼Œå®ƒä»¬åŸºäº Fiber æ¶æ„ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨æ€§èƒ½ã€‚\n1. Concurrent Mode (å¹¶å‘æ¨¡å¼)ï¼š\næ ¸å¿ƒæ€æƒ³ï¼š å…è®¸ React åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·è¾“å…¥äº‹ä»¶å’Œä¸€ä¸ªæ•°æ®è·å–ï¼‰ã€‚å®ƒé€šè¿‡å¯ä¸­æ–­æ¸²æŸ“å’Œä¼˜å…ˆçº§è°ƒåº¦æ¥å®ç°ã€‚ è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š è§£å†³äº† React 15 åŠå…¶ä»¥å‰ç‰ˆæœ¬ä¸­ç”±äºåŒæ­¥æ¸²æŸ“å¯èƒ½å¯¼è‡´é¡µé¢å¡é¡¿çš„é—®é¢˜ã€‚åœ¨å¹¶å‘æ¨¡å¼ä¸‹ï¼Œå³ä½¿æœ‰å¤§é‡æˆ–æ˜‚è´µçš„æ›´æ–°ï¼ŒReact ä¹Ÿèƒ½åœ¨åå°å‡†å¤‡æ–°çš„ UIï¼ŒåŒæ—¶ä¸é˜»å¡ç”¨æˆ·äº¤äº’ã€‚ å·¥ä½œåŸç†ï¼š React ä¼šåœ¨åå°æ„å»ºæ–°çš„ Fiber æ ‘ï¼ˆâ€œWorkInProgressâ€æ ‘ï¼‰ã€‚ åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰åˆ°æ¥ï¼ŒReact å¯ä»¥æš‚åœå½“å‰æ­£åœ¨è¿›è¡Œçš„ä½ä¼˜å…ˆçº§æ¸²æŸ“ä»»åŠ¡ï¼Œä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œç­‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡å®Œæˆåå†ç»§ç»­ä¹‹å‰çš„ä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚ åªæœ‰å½“æ–°çš„ UI å‡†å¤‡å¥½å¹¶å®Œå…¨ä¸€è‡´æ—¶ï¼ŒReact æ‰ä¼šå°†å…¶ä¸€æ¬¡æ€§æäº¤åˆ°çœŸå®çš„ DOMã€‚ çŠ¶æ€ï¼š åœ¨ React 18 ä¸­ï¼ŒConcurrent Mode å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„â€œæ¨¡å¼â€å¼€å…³ï¼Œè€Œæ˜¯ä½œä¸º React çš„é»˜è®¤è¡Œä¸ºå’Œåº•å±‚ä¼˜åŒ–è‡ªåŠ¨å¯ç”¨ã€‚ä¾‹å¦‚ï¼ŒstartTransition API å…è®¸ä½ æ ‡è®°æ›´æ–°ä¸ºâ€œå¯ä¸­æ–­çš„è¿‡æ¸¡â€ã€‚ ä¼˜åŠ¿ï¼š æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒï¼š åº”ç”¨ç¨‹åºåœ¨å¤„ç†å¤§é‡æˆ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ—¶ä»èƒ½ä¿æŒå“åº”ã€‚ æ›´å¥½çš„äº¤äº’æ€§ï¼š ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ç­‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¯ä»¥ä¼˜å…ˆå“åº”ã€‚ 2. Suspenseï¼š\næ ¸å¿ƒæ€æƒ³ï¼š å…è®¸ç»„ä»¶â€œç­‰å¾…â€æŸä¸ªå¼‚æ­¥æ“ä½œå®Œæˆï¼Œå¹¶åœ¨ç­‰å¾…æœŸé—´æ˜¾ç¤ºä¸€ä¸ªå›é€€ (fallback) UIã€‚å®ƒè®©æ•°æ®è·å–ç­‰å¼‚æ­¥æ“ä½œçš„åŠ è½½çŠ¶æ€ç®¡ç†å˜å¾—å£°æ˜å¼ï¼Œè€Œä¸æ˜¯å‘½ä»¤å¼ã€‚ è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š è§£å†³äº†ä¼ ç»Ÿæ•°æ®è·å–ä¸­â€œç€‘å¸ƒå¼è¯·æ±‚â€å’Œæ‰‹åŠ¨ç®¡ç† isLoading çŠ¶æ€çš„ç¹çé—®é¢˜ã€‚ å·¥ä½œåŸç†ï¼š å½“ä¸€ä¸ªç»„ä»¶ï¼ˆæˆ–å…¶å†…éƒ¨çš„å­ç»„ä»¶ï¼‰â€œæŒ‚èµ·â€ (suspends) æ—¶ï¼ˆä¾‹å¦‚ï¼Œå®ƒå†…éƒ¨çš„æ•°æ®è¯·æ±‚å°šæœªå®Œæˆï¼‰ï¼ŒReact ä¼šæ•è·è¿™ä¸ªæŒ‚èµ·ï¼Œå¹¶æ¸²æŸ“æœ€è¿‘çš„ \u0026lt;Suspense\u0026gt; ç¥–å…ˆç»„ä»¶çš„ fallback propã€‚ ä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œç»„ä»¶æ•°æ®å‡†å¤‡å°±ç»ªï¼ŒReact å°±ä¼šæ›¿æ¢ fallback UIï¼Œæ¸²æŸ“çœŸå®çš„ç»„ä»¶å†…å®¹ã€‚ å¸¸è§ç”¨é€”ï¼š ç»„ä»¶æ‡’åŠ è½½ï¼š React.lazy å’Œ Suspense ç»“åˆå®ç°ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚ æ•°æ®è·å–ï¼š (æœªæ¥çš„ä¸»è¦ç”¨ä¾‹) ç»“åˆæ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ react-query çš„ experimental Suspense æ¨¡å¼ï¼‰ï¼Œå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨æ•°æ®è·å–é€»è¾‘ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç®¡ç† loading çŠ¶æ€ã€‚ ä¼˜åŠ¿ï¼š å£°æ˜å¼æ•°æ®åŠ è½½ï¼š ç®€åŒ–äº†å¼‚æ­¥æ•°æ®åŠ è½½çš„ UI é€»è¾‘ã€‚ æ”¹å–„ç”¨æˆ·ä½“éªŒï¼š é¿å…äº†ç»„ä»¶åŠ è½½æ—¶çš„é—ªçƒå’Œä¸ä¸€è‡´æ€§ï¼Œæä¾›æ›´å¹³æ»‘çš„åŠ è½½è¿‡æ¸¡ã€‚ é¿å…ç€‘å¸ƒå¼è¯·æ±‚ï¼š ç†è®ºä¸Šèƒ½æ›´å¥½åœ°åè°ƒå¹¶è¡Œæ•°æ®è·å–ã€‚ æ€»ç»“ï¼š Concurrent Mode æ˜¯ React å†…éƒ¨çš„è°ƒåº¦èƒ½åŠ›ï¼Œä½¿å¾— React èƒ½å¤Ÿæ›´æ™ºèƒ½åœ°å¤„ç†å’Œæ¸²æŸ“æ›´æ–°ã€‚Suspense æ˜¯æš´éœ²ç»™å¼€å‘è€…çš„ä¸€ç§èƒ½åŠ›ï¼Œè®©æˆ‘ä»¬å¯ä»¥å£°æ˜å¼åœ°å¤„ç†å¼‚æ­¥èµ„æºçš„åŠ è½½çŠ¶æ€ï¼Œå¹¶åˆ©ç”¨ Concurrent Mode çš„åº•å±‚èƒ½åŠ›æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚å®ƒä»¬å…±åŒæ˜¯ React æœªæ¥å‘å±•çš„é‡è¦æ–¹å‘ã€‚\nReact 18 å¼•å…¥äº†å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ\r#\rReact 18 å¸¦æ¥äº†è®¸å¤šé‡è¦çš„æ›´æ–°ï¼Œä¸»è¦å…³æ³¨æ€§èƒ½ä¼˜åŒ–ã€ç”¨æˆ·ä½“éªŒæå‡å’Œæ–°çš„å¹¶å‘ç‰¹æ€§ã€‚æ ¸å¿ƒæ–°ç‰¹æ€§åŒ…æ‹¬ï¼š\nè‡ªåŠ¨æ‰¹å¤„ç† (Automatic Batching)ï¼š\nä½œç”¨ï¼š æ— è®º setState è°ƒç”¨åœ¨ä½•å¤„ï¼ˆåŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€Promise å›è°ƒã€setTimeout ç­‰ï¼‰ï¼ŒReact éƒ½ä¼šè‡ªåŠ¨å°†å¤šä¸ªçŠ¶æ€æ›´æ–°åˆå¹¶æˆä¸€ä¸ªæ‰¹æ¬¡ï¼Œåœ¨ä¸€æ¬¡æ¸²æŸ“ä¸­å®Œæˆæ‰€æœ‰æ›´æ–°ã€‚ ä¼˜åŠ¿ï¼š å‡å°‘äº†ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæå‡äº†åº”ç”¨æ€§èƒ½ï¼Œç®€åŒ–äº†å¼€å‘è€…å¯¹ setState è¡Œä¸ºçš„ç†è§£ã€‚åœ¨ React 18 ä¹‹å‰ï¼Œåªæœ‰åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ setState æ‰æ˜¯æ‰¹å¤„ç†çš„ã€‚ startTransition (å¯ä¸­æ–­æ›´æ–°)ï¼š\nä½œç”¨ï¼š å…è®¸ä½ å°†æŸäº›ä¸ç´§æ€¥çš„çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºâ€œè¿‡æ¸¡ (transitions)â€ã€‚è¿™äº›è¿‡æ¸¡æ›´æ–°æ˜¯å¯ä¸­æ–­çš„ï¼ŒReact ä¼šä¼˜å…ˆå¤„ç†ç´§æ€¥æ›´æ–°ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰ï¼Œè€Œè¿‡æ¸¡æ›´æ–°å¯ä»¥åœ¨åå°è¿›è¡Œï¼Œç”šè‡³è¢«æ›´ç´§æ€¥çš„æ›´æ–°ä¸­æ–­ã€‚ ç”¨æ³•ï¼š import { startTransition } from \u0026#39;react\u0026#39;; // ... const handleChange = (e) =\u0026gt; { setInputValue(e.target.value); // ç´§æ€¥æ›´æ–°ï¼Œç«‹å³æ˜¾ç¤ºè¾“å…¥å†…å®¹ startTransition(() =\u0026gt; { // è¿™ä¸ªæ›´æ–°è¢«æ ‡è®°ä¸ºéç´§æ€¥ï¼Œå¯ä»¥è¢«ä¸­æ–­ setSearchResults(filterData(e.target.value)); }); }; ä¼˜åŠ¿ï¼š å³ä½¿æœ‰å¤§é‡æ•°æ®è®¡ç®—æˆ–æ¸²æŸ“ï¼Œä¹Ÿèƒ½ç¡®ä¿ UI çš„å“åº”æ€§ï¼Œé¿å…å¡é¡¿ã€‚ Suspense for Data Fetching (ç”¨äºæ•°æ®è·å–çš„ Suspense)ï¼š\nè™½ç„¶åœ¨ React 16.6 ä¸­å·²ç»å¼•å…¥äº† Suspense ç”¨äºä»£ç åˆ†å‰² (React.lazy)ï¼Œä½† React 18 æ‰©å±•äº†å…¶èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿç”¨äºæ•°æ®è·å–ã€‚ ä½œç”¨ï¼š å½“ç»„ä»¶çš„æ•°æ®å°šæœªå‡†å¤‡å¥½æ—¶ï¼Œå®ƒå¯ä»¥â€œæŒ‚èµ·â€ (suspend)ï¼Œå¹¶è®©æœ€è¿‘çš„ Suspense è¾¹ç•Œæ˜¾ç¤º fallback UIã€‚å½“æ•°æ®åŠ è½½å®Œæˆåï¼Œå†æ¸²æŸ“ç»„ä»¶å†…å®¹ã€‚ ä¼˜åŠ¿ï¼š ç®€åŒ–äº†æ•°æ®è·å–çš„åŠ è½½çŠ¶æ€ç®¡ç†ï¼Œé¿å…äº†â€œç€‘å¸ƒå¼è¯·æ±‚â€ï¼Œæ”¹å–„äº†ç”¨æˆ·ä½“éªŒã€‚éœ€è¦æ­é…æ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ react-query çš„å®éªŒæ€§æ¨¡å¼æˆ–æœªæ¥çš„ React Server Componentsï¼‰ã€‚ æ–°çš„ Root API (createRoot)ï¼š\nä½œç”¨ï¼š React 18 å¼•å…¥äº†æ–°çš„æ ¹ API ReactDOM.createRoot() æ¥æ›¿ä»£æ—§çš„ ReactDOM.render()ã€‚ ç”¨æ³•ï¼š // æ—§ç‰ˆ // import ReactDOM from \u0026#39;react-dom\u0026#39;; // ReactDOM.render(\u0026lt;App /\u0026gt;, document.getElementById(\u0026#39;root\u0026#39;)); // æ–°ç‰ˆ import ReactDOM from \u0026#39;react-dom/client\u0026#39;; const root = ReactDOM.createRoot(document.getElementById(\u0026#39;root\u0026#39;)); root.render(\u0026lt;App /\u0026gt;); ä¼˜åŠ¿ï¼š æ–°çš„ Root API æ˜¯å¯ç”¨æ‰€æœ‰å¹¶å‘ç‰¹æ€§ï¼ˆåŒ…æ‹¬è‡ªåŠ¨æ‰¹å¤„ç†å’Œ startTransitionï¼‰çš„å‰æã€‚ useDeferredValue Hookï¼š\nä½œç”¨ï¼š å…è®¸ä½ â€œå»¶è¿Ÿâ€æ›´æ–°æŸä¸ªå€¼ã€‚å½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šè¿”å›è¯¥å€¼çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½†ä¼šç»™ React ä¸€ä¸ªæç¤ºï¼Œè¿™ä¸ªæ›´æ–°å¯ä»¥è¢«å»¶è¿Ÿï¼Œä¸ä¼šç«‹å³é˜»å¡ä¸»çº¿ç¨‹ã€‚ ä¼˜åŠ¿ï¼š ç±»ä¼¼äº startTransitionï¼Œä½†ç²’åº¦æ›´ç»†ï¼Œé€šå¸¸ç”¨äºä¼˜åŒ–å®æ—¶æœç´¢æ¡†æˆ–è¾“å…¥æ¡†çš„å“åº”æ€§ï¼Œå½“ç”¨æˆ·å¿«é€Ÿè¾“å…¥æ—¶ï¼Œåªæ˜¾ç¤ºéƒ¨åˆ†æ›´æ–°ç»“æœï¼Œè€Œåœ¨ç©ºé—²æ—¶å†æ˜¾ç¤ºå®Œæ•´ç»“æœã€‚ Server Components (å¤„äºå®éªŒé˜¶æ®µï¼Œä¸æ˜¯ React 18 æ ¸å¿ƒå‘å¸ƒå†…å®¹ä½†ç›¸å…³)ï¼š\nä½œç”¨ï¼š å…è®¸å¼€å‘è€…åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“å’Œè·å–æ•°æ®ï¼Œå¹¶å°†ç»„ä»¶ç›´æ¥å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œå‡å°‘å®¢æˆ·ç«¯ JavaScript çš„æ•°é‡ã€‚ ä¼˜åŠ¿ï¼š æå‡åˆå§‹åŠ è½½æ€§èƒ½ï¼Œé™ä½å®¢æˆ·ç«¯èµ„æºæ¶ˆè€—ã€‚ æ€»ç»“ï¼š React 18 çš„æ ¸å¿ƒåœ¨äºå¼•å…¥äº†å¹¶å‘æ¸²æŸ“çš„æ¦‚å¿µï¼Œä½¿å¾— React åº”ç”¨åœ¨å¤„ç†å¤æ‚å’Œå¤§æ•°æ®é‡æ›´æ–°æ—¶èƒ½å¤Ÿä¿æŒæ›´é«˜çš„å“åº”æ€§ã€‚å®ƒé€šè¿‡è‡ªåŠ¨æ‰¹å¤„ç†ã€å¯ä¸­æ–­æ›´æ–°ï¼ˆstartTransitionï¼‰å’Œæ›´å¼ºå¤§çš„ Suspense æœºåˆ¶æ¥æå‡ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚\n"},{"id":27,"href":"/docs/study/system-design/rpc/","title":"RPC æ¡†æ¶","section":"ç³»ç»Ÿè®¾è®¡","content":"è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨ä¸”é«˜æ€§èƒ½çš„ RPC æ¡†æ¶éœ€è¦ä»ä½“ç³»ç»“æ„ã€é€šä¿¡æœºåˆ¶ã€å®‰å…¨ä¸å¯è§‚æµ‹æ€§ç­‰å¤šæ–¹é¢è¿›è¡Œè®¾è®¡ã€‚ä»¥ä¸‹æ˜¯ä¸­è‹±æ–‡ç‰ˆæœ¬çš„ç»¼åˆå»ºè®®ã€‚\nâœ… ä¸­æ–‡ç‰ˆ\r#\r1. æ¥å£å®šä¹‰ä¸åè®® (IDL + åºåˆ—åŒ–)\r#\rä½¿ç”¨ Interface Definition Languageï¼ˆå¦‚ Protocol Buffers / Thrift IDLï¼‰æ¸…æ™°å®šä¹‰æœåŠ¡æ¥å£ï¼Œå®ç°è·¨è¯­è¨€æ”¯æŒå¹¶ç”Ÿæˆç±»å‹å®‰å…¨çš„ä»£ç  (\rbulbapp.io, en.wikipedia.org)ã€‚ åºåˆ—åŒ–å»ºè®®ä½¿ç”¨é«˜æ•ˆäºŒè¿›åˆ¶æ ¼å¼ï¼ˆå¦‚ Protobufã€Capâ€™n Protoï¼‰ï¼‹å¯é€‰å‹ç¼©ï¼ˆå¦‚ Snappy/LZ4ï¼‰ï¼Œæå‡ä¼ è¾“æ•ˆç‡(\ren.wikipedia.org)ã€‚ 2. ä¼ è¾“å±‚ \u0026amp; ç½‘ç»œé€šä¿¡\r#\råŸºäº HTTP/2 æˆ–åŸå§‹ TCPï¼Œæ”¯æŒåŒå‘æµï¼ˆgRPCï¼‰ä¸å¼‚æ­¥è°ƒç”¨æ¨¡å‹ï¼ˆå¦‚ Nettyã€éé˜»å¡ IOï¼‰ã€‚ è¿æ¥æ± ä¸ä¼šè¯ç®¡ç†ï¼šä½¿ç”¨è¿æ¥å¤ç”¨ã€å¿ƒè·³æ£€æµ‹ï¼Œç¡®ä¿è¿æ¥ç¨³å®šå’Œé«˜å¹¶å‘æ€§èƒ½ã€‚ 3. å®¢æˆ·ç«¯ Stub ä¸ Server éª¨æ¶\r#\rå®¢æˆ·ç«¯ç”Ÿæˆ Stubï¼Œå°è£…åºåˆ—åŒ–ã€ç½‘ç»œè°ƒç”¨ã€è¶…æ—¶å’Œé‡è¯•é€»è¾‘ï¼ˆå»ºè®®æ”¯æŒå¹‚ç­‰é‡è¯•ã€è¶…æ—¶æ§åˆ¶ï¼‰ã€‚ æœåŠ¡ç«¯ä½¿ç”¨æ‹¦æˆªå™¨é“¾ï¼ˆInterceptorï¼‰æ¨¡å¼å¤„ç†å¼ºåˆ¶è®¤è¯ã€é™æµã€æ—¥å¿—ã€ç›‘æ§åŸ‹ç‚¹ç­‰äº‹åŠ¡ï¼Œè§£è€¦å…³æ³¨ç‚¹(\rgoogle.github.io)ã€‚ 4. æœåŠ¡æ³¨å†Œä¸å‘ç°\r#\ré›†æˆæ³¨å†Œä¸­å¿ƒï¼ˆå¦‚ Consulã€Nacosã€Eurekaã€Zookeeperï¼‰ï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡ã€å¥åº·æ£€æŸ¥ã€‚ å®¢æˆ·ç«¯æ”¯æŒè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ã€ä¸€è‡´æ€§å“ˆå¸Œã€æƒé‡ï¼‰ï¼Œå¹¶è‡ªåŠ¨æ„ŸçŸ¥æœåŠ¡å¢åˆ ã€‚ 5. é”™è¯¯å¤„ç†ä¸å®¹é”™\r#\rå®šä¹‰ç»Ÿä¸€çš„é”™è¯¯ç å’Œé‡è¯•ç­–ç•¥ï¼ˆåŸºäºå¹‚ç­‰æ€§ + æŒ‡æ•°é€€é¿ + å‰¯ä½œç”¨é‡è¯•ï¼‰ã€‚ å®ç°æ–­è·¯å™¨ï¼ˆcircuit breakerï¼‰ã€é™çº§ç­–ç•¥ï¼Œé˜²æ­¢é”™è¯¯æ‰©æ•£(\rprogramming.vip)ã€‚ 6. å®‰å…¨ä¸æˆæƒ\r#\ræ”¯æŒ TLS åŠ å¯†ã€åŒå‘è®¤è¯åŠ OAuth/JWT è®¤è¯æ–¹å¼ã€‚ æ’é™¤æ³¨å…¥å¼å®‰å…¨æ¼æ´ï¼Œç¡®ä¿ä¼ è¾“ä¸æ¥å£è®¿é—®å®‰å…¨ã€‚ 7. æ€§èƒ½ä¼˜åŒ–ä¸å¯è§‚æµ‹æ€§\r#\rå®¢æˆ·ç«¯ Stub æ”¯æŒå‹ç¼©ä¸æ‰¹é‡è¯·æ±‚ï¼Œé™ä½å»¶è¿Ÿä¸å¹¶å‘è¿æ¥æ•°ã€‚ é›†æˆç›‘æ§ç³»ç»Ÿï¼ˆPrometheusã€Grafanaã€Opentelemetryï¼‰ï¼Œè®°å½•è¯·æ±‚è€—æ—¶ã€é”™è¯¯ç‡ã€QPSã€çº¿ç¨‹æ± çŠ¶å†µç­‰ã€‚ æ”¯æŒåˆ†å¸ƒå¼ Tracingï¼ˆå¦‚ OpenTracing/Jaegerï¼‰ï¼Œä¾¿äºæ•…éšœåˆ†æä¸å»¶è¿Ÿè¿½è¸ªã€‚ 8. æµ‹è¯•ä¸éƒ¨ç½²\r#\ræä¾›å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ€§èƒ½å‹æµ‹è„šæœ¬ï¼ˆä¾‹å¦‚åŸºäº gRPC æ¡†æ¶æˆ– HTTP2ï¼‰ã€‚ å¼•å…¥ CI/CD å’Œå®¹å™¨éƒ¨ç½²ï¼ˆDocker + Kubernetesï¼‰ï¼Œé…å¥—å¥åº·æ£€æŸ¥å’Œæ»šåŠ¨å‡çº§æœºåˆ¶ã€‚ âœ… English Version\r#\r1. Interface Definition \u0026amp; Serialization\r#\rUse an IDL (e.g., Protobuf or Thrift) to define service contracts, enabling cross-language support and codegen for type-safe client/server stubsÂ (\ren.wikipedia.org). Opt for efficient binary serialization (Protobuf, Capâ€™n Proto) with optional compression (Snappy/LZ4) to optimize payload size and speedÂ (\ren.wikipedia.org). 2. Transport Layer \u0026amp; Communication\r#\rLeverage HTTP/2 or raw TCP with bidirectional streaming (gRPC) or custom async I/O for high concurrency. Implement connection pooling and heartbeats to manage resource usage and reduce latency. 3. Client Stub \u0026amp; Server Skeleton\r#\rClient stubs wrap serialization, network calls, timeouts, and retry mechanisms (with idempotent retries and timeout support)Â (\rbulbapp.io). Use interceptor chains on the server to handle auth, logging, rate-limiting, metrics, and tracingâ€”enabling clear separation of concernsÂ . 4. Service Discovery \u0026amp; Load Balancing\r#\rIntegrate with service registries (Consul, Nacos, Eureka, ZooKeeper) for auto-discovery and LB. Implement client-side load balancing (round-robin, consistent hashing, weighted) and support dynamic updates. 5. Error Handling \u0026amp; Resilience\r#\rDefine consistent error codes; support retry strategies with exponential backoff, focusing on idempotent operations. Incorporate circuit breakers and fallback mechanisms to prevent cascading failuresÂ (\rprogramming.vip, bulbapp.io). 6. Security \u0026amp; Authentication\r#\rSupport TLS encryption, mTLS, and token-based authentication (OAuth2/JWT). Enforce strict validation to protect against injection and unauthorized access. 7. Performance \u0026amp; Observability\r#\rEnable payload compression and batch requests to lower latency and throughput overhead. Instrument with Prometheus/Grafana/OpenTelemetry to monitor QPS, latency, errors, thread metrics. Integrate distributed tracing (OpenTelemetry, Jaeger) for end-to-end request visibilityÂ . 8. Testing \u0026amp; Deployment\r#\rProvide unit/integration tests and benchmark tools to validate correctness and performance. Package with Docker/Kubernetes, including health checks and rolling upgrades, integrated via CI/CD pipelines. ğŸ§  æ€»ç»“\r#\rè®¾è®¡ä¸€ä¸ªé«˜è´¨é‡ RPC æ¡†æ¶åº”èšç„¦ä»¥ä¸‹æ–¹å‘ï¼š\nå¯é é€šä¿¡ï¼ˆIDL + åºåˆ—åŒ– + ä¼ è¾“å±‚ï¼‰ æœåŠ¡æ³¨å†Œä¸æ²»ç† å¯æ’æ‹”çš„æ‹¦æˆªæœºåˆ¶ é”™è¯¯å®¹å¿èƒ½åŠ› å®‰å…¨ä¸è®¤è¯ ç›‘æ§+Tracing å…¨é“¾è·¯å¯è§‚æµ‹ è‰¯å¥½çš„æµ‹è¯•å’Œéƒ¨ç½²æ”¯æŒ é‡‡ç”¨è¿™äº›åŸåˆ™ï¼Œå¹¶å‚è€ƒæˆç†Ÿæ¡†æ¶ï¼ˆå¦‚ gRPCã€Thriftã€Dubboï¼‰çš„å®ç°æ–¹å¼ä¸è®¾è®¡ï¼Œå¯ä»¥å¸®åŠ©ä½ ä»é›¶æ„å»ºä¸€ä¸ªç¨³å®šé«˜æ•ˆã€æ˜“ç»´æŠ¤çš„ RPC å¹³å°ã€‚\n"},{"id":28,"href":"/docs/study/cache/cache-consistency/","title":"ç¼“å­˜ä¸€è‡´æ€§","section":"ç¼“å­˜","content":"\rå»¶è¿ŸåŒåˆ  vs Kafka\r#\rå¯¹æ¯”ç»´åº¦ å»¶è¿ŸåŒåˆ  Kafka ç¼“å­˜å¤±æ•ˆé€šçŸ¥ å®ç°éš¾åº¦ ç®€å•ï¼Œä»£ç å†…å®ç° éœ€è¦æ¥å…¥ Kafka + æ¶ˆè´¹æœºåˆ¶ ç¼“å­˜ä¸€è‡´æ€§æ§åˆ¶åŠ› ä¸ç¨³å®šï¼ˆå»¶è¿ŸæœŸé—´ä»å¯èƒ½è¢«è¦†ç›–ï¼‰ å¼ºä¸€è‡´ï¼ˆé€šçŸ¥æ‰€æœ‰æ¶ˆè´¹è€…å®æ—¶å¤±æ•ˆï¼‰ é€‚åº”å¤šæœåŠ¡ / å¤šå‰¯æœ¬ å·®ï¼Œéœ€æ¯ä¸ªæœåŠ¡éƒ½å®ç° å¼ºï¼Œå¤šæœåŠ¡å¯ç»Ÿä¸€è®¢é˜…é€šçŸ¥ å¼‚æ­¥è§£è€¦èƒ½åŠ› å¼±ï¼Œç´§è€¦åˆåœ¨ä¸šåŠ¡é€»è¾‘ä¸­ å¼ºï¼Œæ•°æ®åº“å˜æ›´ â†’ å¼‚æ­¥é€šçŸ¥ æ•…éšœå¯è¿½æº¯æ€§ å·®ï¼Œåˆ å¤±è´¥éš¾å®šä½ å¼ºï¼ŒKafka ç•™å­˜æ¶ˆæ¯å¯å›æº¯ ç½‘ç»œå¼‚å¸¸å®¹é”™æ€§ å·®ï¼Œå¤±è´¥åä¸æ˜“é‡è¯• å¥½ï¼Œå¯æ¶ˆè´¹å¤±è´¥åé‡è¯• "},{"id":29,"href":"/docs/example/introduction/","title":"ä»‹ç»","section":"Example Site","content":"\rä¸­æ–‡ç´¢å¼•é¡µ\r#\rAstris ipse furtiva\r#\rEst in vagis et Pittheus tu arge accipiter regia iram vocatur nurus. Omnes ut olivae sensit arma sorori deducit, inesset crudus, ego vetuere aliis, modo arsit? Utinam rapta fiducia valuere litora adicit cursu, ad facies\nSuis quot vota\r#\rEa furtique risere fratres edidit terrae magis. Colla tam mihi tenebat: miseram excita suadent es pecudes iam. Concilio quam velatus posset ait quod nunc! Fragosis suae dextra geruntur functus vulgata.\nTempora nisi nunc\r#\rLorem markdownum emicat gestu. Cannis sol pressit ducta. Est Idaei, tremens ausim se tutaeque, illi ulnis hausit, sed, lumina cutem. Quae avis sequens!\nvar panel = ram_design;\rif (backup + system) {\rfile.readPoint = network_native;\rsidebar_engine_device(cell_tftp_raster,\rdual_login_paper.adf_vci.application_reader_design(\rgraphicsNvramCdma, lpi_footer_snmp, integer_model));\r}\rpublic_keyboard_docking += error.controller_gibibyte_plug.ip(4,\rasciiPetaflops, software(supercomputer_compatible_status + 4));\rdynamic_disk.indexModeLaptop = bufferTftpReality;\rvar export_vlog_sequence = trinitron_flowchart + supercomputer_cluster_rj(\r-1, toolbar_powerpoint_query, -2 / multiprocessing_impression);\rLocis suis novi cum suoque decidit eadem\r#\rIdmoniae ripis, at aves, ali missa adest, ut et autem, et ab? Venit spes versus finis sermonibus patefecit murum nec est sine oculis. Ille inmota macies domoque caelestia cadit tantummodo scelus procul, corde!\nDolentem capi parte rostro alvum habentem pudor Fulgentia sanguine paret E punior consurgit lentus Vox hasta eras micantes Facibus pharetrae indetonsusque indulsit sic incurrite foliis\r#\rNefandam et prisci palmas! Blandita cutis flectitur montis macies, te nati Latiis; turbaque inferias. Virginis tibi peracta avidusque facies caper nec, e at ademptae, mira.\ndirect *= font(inputScareware(sliHome), crossplatform.byte(\rppl_encryption.excel_e_rte(integratedModelModifier), timeVirtual,\rfloating_speakers.media_printer(us, yahoo, primaryPhp)));\rfriendly_metal_flatbed(cd, isoPrimaryStorage(reader), dmaMirrored);\rif (parse_flash_cron.metalGif(1, adServiceDevice, utility)) {\radf -= operation_cdma_samba;\rimapGif.switch += torrent;\r} else {\rpmu.disk_captcha = digital_ppp_pci + recursionTransistor(5, dram);\rajax_service += grayscalePythonLock;\rgoogle_scroll_capacity = ftp + engine_dslam_sidebar / tape - 1;\r}\rdrive_rw = zipTftp;\rvar suffix = software_router_extension.dimm_ddr(-5,\rkernel_digital_minisite);\rVocavit toto; alas mitis maestus in liquidarum ab legi finitimosque dominam tibi subitus; Orionis vertitur nota. Currere alti etiam seroque cernitis innumeris miraturus amplectique collo sustinet quemque! Litora ante turba?\n"},{"id":30,"href":"/docs/hidden/meituan-1/","title":"ç¾å›¢-1","section":"éšè—","content":"ä»¥ä¸‹æŒ‰ä½ çš„ç®€å†ç»å†å’Œå…³é”®æŠ€æœ¯ç‚¹ï¼Œé’ˆå¯¹æ¯æ¡èŒè´£å’Œæˆå°±ï¼Œåˆ—å‡ºé¢è¯•å®˜å¯èƒ½è¿½é—®çš„ç»†èŠ‚é—®é¢˜ï¼Œå¹¶ç»™å‡ºç¤ºèŒƒæ€§å›ç­”æ€è·¯ã€‚å›ç­”æ€è·¯å¯ç»“åˆä½ ä¸ªäººçœŸå®ç»éªŒè¡¥å……å…·ä½“æ•°å­—æˆ–å·¥å…·ç»†èŠ‚ã€‚\nä¸€ã€2022.05 â€“ 2025.05 æ±‡ä¸°è½¯ä»¶å¼€å‘ï¼ˆå¹¿ä¸œï¼‰æœ‰é™å…¬å¸ä¸Šæµ·åˆ†å…¬å¸ é«˜çº§å…¨æ ˆå·¥ç¨‹å¸ˆ\r#\r1. â€œè®¾è®¡å¹¶å®ç°åŸºäº Java + Spring Boot çš„äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°ï¼šåœ¨ Kubernetes + Docker ç¯å¢ƒä¸­éƒ¨ç½²æ— çŠ¶æ€æœåŠ¡ï¼Œç»“åˆè‡ªåŠ¨æ‰©å®¹ä¸è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡æ•°æ®åº“åˆ†ç‰‡ä¸äº‹åŠ¡æ§åˆ¶æ”¯æ’‘ 5,000+ TPSã€å³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼Œç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ï¼Œå¹¶åœ¨æ¶æ„ä¸­åµŒå…¥åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒä¸å®¡è®¡æ—¥å¿—ç­‰æªæ–½ï¼Œç¬¦åˆé“¶è¡Œå®‰å…¨åˆè§„æ ‡å‡†ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\ræ¶æ„æ•´ä½“è®¾è®¡\né—®ï¼šè¯·ç”»ä¸€ä¸‹è¯¥å¾®æœåŠ¡å¹³å°çš„æ•´ä½“æ¶æ„å›¾ï¼Œé‡ç‚¹ç»„ä»¶å¦‚ä½•äº¤äº’ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næè¿° API ç½‘å…³æˆ– ingressï¼ˆå¦‚ Kong/Nginx/Envoyï¼‰è´Ÿè´£æµé‡å…¥å£ï¼›åç«¯ Spring Boot å¾®æœåŠ¡é€šè¿‡ Service Meshï¼ˆå¦‚ Istio/Linkerdï¼‰æˆ–è‡ªç ”æ–¹æ¡ˆè¿›è¡ŒæœåŠ¡å‘ç°ä¸è°ƒç”¨ï¼› æ•°æ®å±‚ï¼šåˆ†ç‰‡åçš„ MySQL é›†ç¾¤ã€è¯»å†™åˆ†ç¦»æ–¹æ¡ˆï¼›Redis ç¼“å­˜å±‚ï¼›æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ Kafkaï¼‰ç”¨äºå¼‚æ­¥è§£è€¦ï¼› éƒ¨ç½²å±‚ï¼šDocker å®¹å™¨æ‰“åŒ…ï¼ŒKubernetes é›†ç¾¤éƒ¨ç½²ï¼›Horizontal Pod Autoscalerã€Cluster Autoscalerï¼›è´Ÿè½½å‡è¡¡ï¼ˆK8s Serviceã€äº‘ LBï¼‰ï¼› å®‰å…¨å±‚ï¼šTLS è¯ä¹¦ç®¡ç†ã€æœåŠ¡é—´ mTLSï¼›æƒé™æ ¡éªŒï¼ˆOAuth2/JWT æˆ–å†…éƒ¨ IAMï¼‰ï¼›å®¡è®¡æ—¥å¿—ç»„ä»¶ï¼ˆæ—¥å¿—æ”¶é›†åˆ° ELK æˆ–é›†ä¸­å®¡è®¡ç³»ç»Ÿï¼‰ï¼› ç›‘æ§ä¸é¢„è­¦ï¼šPrometheus + Grafana æˆ–å†…éƒ¨ç›‘æ§å¹³å°ï¼Œå‘Šè­¦è§„åˆ™ï¼›é“¾è·¯è¿½è¸ªï¼ˆZipkin/Sleuth æˆ–å†…éƒ¨ APMï¼‰ã€‚ æ³¨æ„ï¼šç»“åˆé“¶è¡Œåœºæ™¯è¦æåŠåˆè§„è¦æ±‚ï¼ˆåŠ å¯†ä¼ è¾“ã€å®¡è®¡ã€è®¿é—®æ§åˆ¶ã€éš”ç¦»ç­–ç•¥ç­‰ï¼‰ã€‚\nKubernetes + Docker éƒ¨ç½²ç»†èŠ‚\né—®ï¼šä½ å¦‚ä½•è®¾è®¡ Docker é•œåƒä»¥ä¿è¯å¿«é€Ÿå¯åŠ¨å’Œå®‰å…¨æ€§ï¼Ÿæœ‰å“ªäº›ä¼˜åŒ–æ‰‹æ®µï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¤šé˜¶æ®µæ„å»ºï¼šç¼–è¯‘æ‰“åŒ…é˜¶æ®µä»…åŒ…å«å¿…è¦ä¾èµ–ï¼›è¿è¡Œé•œåƒä»…åŒ…å« JRE + åº”ç”¨ jarï¼Œå‡å°ä½“ç§¯ï¼› é•œåƒå®‰å…¨æ‰«æï¼šå®šæœŸæ‰«æåŸºç¡€é•œåƒæ¼æ´ï¼›ä½¿ç”¨å®˜æ–¹æˆ–å†…éƒ¨å—ä¿¡ä»»é•œåƒï¼›æœ€å°æƒé™å®¹å™¨ç”¨æˆ·ï¼› å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼šå‰”é™¤ä¸å¿…è¦çš„åº“ï¼Œæå‰è¿›è¡Œç±»é¢„çƒ­ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼›JVM å‚æ•°è°ƒæ•´ï¼› é…ç½®ç®¡ç†ï¼šConfigMap/Secret æŒ‚è½½ï¼›Secrets ç®¡ç†åŠ å¯†æ•æ„Ÿä¿¡æ¯ï¼› å¥åº·æ£€æŸ¥ï¼šé…ç½® readinessProbe/livenessProbeï¼Œé¿å…æµé‡æ‰“åˆ°æœªå°±ç»ªå®ä¾‹ï¼› æ—¥å¿—ä¸æŒ‡æ ‡ï¼šå®¹å™¨å†…è¾“å‡ºç»“æ„åŒ–æ—¥å¿—ï¼Œæ–¹ä¾¿ä¾§è½¦æˆ– DaemonSet æ”¶é›†ï¼›Metrics exporter æš´éœ² JVM/åº”ç”¨æŒ‡æ ‡ã€‚ é—®ï¼šå¦‚ä½•é…ç½®è‡ªåŠ¨æ‰©å®¹ï¼Ÿæœ‰å“ªäº›æŒ‡æ ‡è§¦å‘ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nHorizontal Pod Autoscaler (HPA)ï¼šåŸºäº CPU åˆ©ç”¨ç‡ã€å†…å­˜æˆ–è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆå¦‚é˜Ÿåˆ—é•¿åº¦ã€è¯·æ±‚é€Ÿç‡ï¼‰è§¦å‘ï¼›ç»“åˆ Kubernetes Metrics Server æˆ– Prometheus Adapter ä¸ŠæŠ¥è‡ªå®šä¹‰æŒ‡æ ‡ï¼› Cluster Autoscalerï¼šå½“èŠ‚ç‚¹èµ„æºä¸è¶³æ—¶åŠ¨æ€æ·»åŠ èŠ‚ç‚¹ï¼› å¦‚ä½•é¿å…æŠ–åŠ¨ï¼šè®¾ç½®åˆé€‚çš„é˜ˆå€¼ã€å†·å´æ—¶é—´ï¼›å¯¹çªå¢æµé‡åšé™æµæˆ–é¢„çƒ­ç­–ç•¥ï¼› æµé‡å³°å€¼é¢„æ¡ˆï¼šä¸ä¸šåŠ¡åŒå­¦æ²Ÿé€šæ´»åŠ¨æ’æœŸï¼Œæå‰é¢„ç•™èµ„æºæˆ–æµé‡å‰Šå³°ç­–ç•¥ï¼ˆé™æµã€æ’é˜Ÿï¼‰ã€‚ æ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼ä¸‡çº§å¹¶å‘\né—®ï¼šå¦‚ä½•è¿›è¡Œå‹æµ‹ä»¥éªŒè¯ TPS å’Œå¹¶å‘èƒ½åŠ›ï¼Ÿç”¨åˆ°å“ªäº›å·¥å…·ï¼Œæµç¨‹å¦‚ä½•ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‹æµ‹å·¥å…·ï¼šJMeter/Gatling/Locust æˆ–å†…éƒ¨å‹æµ‹å¹³å°ï¼›ç¼–å†™è„šæœ¬æ¨¡æ‹ŸçœŸå®æµé‡ç‰¹å¾ï¼ˆçŸ­è¿æ¥/é•¿è¿æ¥ã€å¹¶å‘ç”¨æˆ·æ•°ã€è¯·æ±‚åˆ†å¸ƒï¼‰ï¼› æ•°æ®å‡†å¤‡ï¼šæ¨¡æ‹ŸçœŸå®ä¸šåŠ¡æ•°æ®ï¼Œå¦‚å¤šç§è¯·æ±‚å‚æ•°ã€ç”¨æˆ·çŠ¶æ€ã€é‰´æƒï¼› ç¯å¢ƒæ­å»ºï¼šåœ¨æ¥è¿‘ç”Ÿäº§çš„ç¯å¢ƒåšå‹æµ‹ï¼ˆæˆ–é¢„ç•™å‹æµ‹ç¯å¢ƒï¼‰ï¼Œä¿è¯è§„æ¨¡å¯æ‰©å±•ï¼› åˆ†æç“¶é¢ˆï¼šç›‘æ§ CPUã€å†…å­˜ã€GCã€çº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± ã€ç½‘ç»œå¸¦å®½ã€Redis/Kafka æ€§èƒ½æŒ‡æ ‡ï¼› ä¼˜åŒ–æªæ–½ï¼šè°ƒæ•´çº¿ç¨‹æ± å¤§å°ã€è¿æ¥æ± å¤§å°ï¼›æ•°æ®åº“ç´¢å¼•ã€åˆ†ç‰‡ç­–ç•¥ã€æŸ¥è¯¢ä¼˜åŒ–ï¼›ç¼“å­˜å‘½ä¸­ç‡ä¼˜åŒ–ï¼›æ¶ˆæ¯é˜Ÿåˆ—å¹¶å‘æ¶ˆè´¹ä¼˜åŒ–ï¼›JVM GC å‚æ•°è°ƒä¼˜ï¼›IO æ¨¡å‹ï¼ˆNIOã€å¼‚æ­¥è°ƒç”¨ç­‰ï¼‰ï¼› éªŒè¯ï¼šæ¯è½®ä¼˜åŒ–åå¤æµ‹ï¼Œç›´è‡³æ»¡è¶³ç›®æ ‡æˆ–è¯„ä¼°æˆæœ¬æ”¶ç›Šã€‚ é—®ï¼šå½“æ•°æ®åº“æˆä¸ºç“¶é¢ˆï¼Œä½ å¦‚ä½•æ‰©å±•ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‚ç›´æ‰©å±• vs æ°´å¹³æ‰©å±•ï¼šæ°´å¹³åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼›è¯»å†™åˆ†ç¦»ï¼šMaster/Replicaï¼›åŸºäºä¸šåŠ¡ç»´åº¦æˆ–ç”¨æˆ· ID è¿›è¡Œè·¯ç”±ï¼› åˆ†ç‰‡å®ç°ï¼šä½¿ç”¨ä¸­é—´ä»¶å¦‚ ShardingSphereï¼Œæˆ–è‡ªç ”è·¯ç”±ï¼›å¤„ç†è·¨åˆ†ç‰‡äº‹åŠ¡ï¼šé¿å…åˆ†å¸ƒå¼äº‹åŠ¡å¼€é”€ï¼Œæˆ–ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼› ç¼“å­˜é™çº§ï¼šçƒ­ç‚¹æ•°æ®æ”¾ Redisï¼›äºŒçº§ç¼“å­˜è®¾è®¡ï¼› é™ä½äº‹åŠ¡èŒƒå›´ï¼šå°½é‡ç¼©çŸ­äº‹åŠ¡æŒæœ‰é”æ—¶é—´ï¼›ä½¿ç”¨ä¹è§‚é”ã€è¡Œçº§é”ï¼› å¼‚æ­¥åŒ–ï¼šæŸäº›éå¼ºä¸€è‡´æ“ä½œå¼‚æ­¥å¤„ç†ã€‚ æ•°æ®åº“åˆ†ç‰‡ä¸äº‹åŠ¡æ§åˆ¶\né—®ï¼šåœ¨åˆ†ç‰‡åå¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿæœ‰æ²¡æœ‰ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¦‚ä½•é¿å…ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\né¿å…è·¨åˆ†ç‰‡å¼ºäº‹åŠ¡ï¼šè®¾è®¡æ—¶å°½é‡è®©ä¸šåŠ¡è¯·æ±‚åªè§¦åŠå•ä¸€åˆ†ç‰‡ï¼› è¡¥å¿å¼äº‹åŠ¡æˆ–æœ€ç»ˆä¸€è‡´æ€§ï¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ— + çŠ¶æ€æœºï¼Œå®ç°å¼‚æ­¥è¡¥å¿ï¼› å¦‚æœå¿…é¡»åˆ†å¸ƒå¼äº‹åŠ¡ï¼šè¯„ä¼°æ€§èƒ½å¼€é”€ï¼Œä½¿ç”¨ä¸¤é˜¶æ®µæäº¤æˆ– TCCï¼Œä½†åœ¨é«˜ TPS åœºæ™¯ä¸‹è°¨æ…ï¼› ä¸¾ä¾‹ï¼šæŸåœºæ™¯ä¸‹å°†ç”¨æˆ·ä¸»è¡¨ä¸å…³è”è¡¨æ”¾åŒåˆ†ç‰‡ï¼›è·¨ä¸šåŠ¡åœºæ™¯æ‹†åˆ†æˆå¤šä¸ªå­æµç¨‹ï¼Œå„è‡ªç”¨æœ¬åœ°äº‹åŠ¡å¹¶é€šè¿‡å¼‚æ­¥æ¶ˆæ¯åè°ƒã€‚ é—®ï¼šæ•°æ®åº“åˆ‡åˆ†ç­–ç•¥å¦‚ä½•é€‰ï¼Ÿæ°´å¹³åˆ‡åˆ†è¿˜æ˜¯å‚ç›´åˆ‡åˆ†ï¼Ÿä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‚ç›´åˆ‡åˆ†ï¼šæŒ‰æ¨¡å—æˆ–åŠŸèƒ½æ‹†åˆ†æœåŠ¡ï¼Œå‡å°‘è¡¨å¤§å°ï¼›æ°´å¹³åˆ‡åˆ†ï¼šæŒ‰ç”¨æˆ· IDã€ä¸šåŠ¡ ID ç­‰å‡åŒ€åˆ†å¸ƒï¼›éœ€è€ƒè™‘çƒ­ç‚¹æ•°æ®ã€æ•°æ®å€¾æ–œï¼› åˆ†ç‰‡é”®é€‰å–ï¼šå°½é‡ä¿è¯æ•£åˆ—å‡åŒ€ã€æ˜“ç”¨äºæŸ¥è¯¢è·¯ç”±ï¼› ç›‘æ§åˆ†ç‰‡åè´Ÿè½½ï¼šé¿å…å•åˆ†ç‰‡è¿‡çƒ­ï¼›åŠ¨æ€æ‰©å®¹ç­–ç•¥ï¼› ç‰ˆæœ¬è¿­ä»£ä¸­å¦‚ä½•åœ¨çº¿æ‹†åˆ†æˆ–åˆå¹¶åˆ†ç‰‡ã€‚ åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒä¸å®¡è®¡æ—¥å¿—\né—®ï¼šä½ å¦‚ä½•å®ç°æœåŠ¡é—´æˆ–å®¢æˆ·ç«¯åˆ°æœåŠ¡çš„åŠ å¯†ä¼ è¾“ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nTLSï¼šIngress/TLS Terminationï¼ŒæœåŠ¡é—´ mTLSï¼›è¯ä¹¦ç®¡ç†ï¼ˆè‡ªç­¾ vs CA æœºæ„ï¼‰ï¼›è‡ªåŠ¨ç»­æœŸï¼ˆå¦‚ä½¿ç”¨ cert-managerï¼‰ï¼› æ•°æ®åº“åŠ å¯†ï¼šä¼ è¾“åŠ å¯† (SSL/TLS)ã€é™æ€åŠ å¯† (TDE)ï¼› æ¶ˆæ¯é˜Ÿåˆ—åŠ å¯†é…ç½®ï¼› åŠ å¯†æ€§èƒ½å½±å“åŠä¼˜åŒ–ï¼šç¡¬ä»¶åŠ é€Ÿã€TLS åå•†ä¼˜åŒ–ã€‚ é—®ï¼šæƒé™æ ¡éªŒæ–¹æ¡ˆï¼Ÿå¦‚ä½•è®¾è®¡ç»Ÿä¸€é‰´æƒä½“ç³»ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nèº«ä»½è®¤è¯ï¼šOAuth2/JWT æˆ–å†…éƒ¨ SSOï¼›API Gateway éªŒè¯ Tokenï¼›æœåŠ¡é—´è°ƒç”¨å¸¦ Token/è¯ä¹¦ï¼› æˆæƒï¼šè§’è‰²/æƒé™æ¨¡å‹ï¼›åœ¨å¾®æœåŠ¡ä¸­ä½¿ç”¨ç»Ÿä¸€åº“æˆ–ç½‘å…³ä¾§å†³ç­–ï¼›RBAC æˆ– ABACï¼›åŠ¨æ€æƒé™ç®¡ç†ï¼› å®¡è®¡æ—¥å¿—ï¼šå“ªäº›æ“ä½œè¦è®°å½•ï¼Ÿæ—¥å¿—æ ¼å¼ç»“æ„åŒ–ï¼Œé›†ä¸­æ±‡æ€»ï¼›å¦‚ä½•ä¿è¯ä¸å¯ç¯¡æ”¹ï¼Ÿå¦‚ä½•æŸ¥è¯¢å’Œåˆ†æï¼Ÿ åˆè§„è¦æ±‚ï¼šæ—¥å¿—ä¿ç•™æ—¶é•¿ã€è®¿é—®æ§åˆ¶ã€è„±æ•å¤„ç†ã€‚ é—®ï¼šé‡åˆ°å®‰å…¨åˆè§„å†²çªå¦‚ä½•å¤„ç†ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nä¸¾ä¾‹ï¼šæŸç‰¹æ€§å½±å“åŠ å¯†æˆ–å®¡è®¡å¼€é”€ï¼Œä¸ä¸šåŠ¡å›¢é˜Ÿæ²Ÿé€šæƒè¡¡ï¼›é€šè¿‡æ€§èƒ½æµ‹è¯•è¯„ä¼°å½±å“ï¼Œæå‡ºæ”¹è¿›æ–¹æ¡ˆï¼›ä¸åˆè§„/å®‰å…¨å›¢é˜Ÿå¯¹é½ï¼›è®°å½•å†³ç­–è¿‡ç¨‹ã€‚ 2. Redis ç¼“å­˜ç­–ç•¥ã€Kafka å¼‚æ­¥è§£è€¦ã€æ•°æ®åº“åˆ†ç‰‡ä¸è¯»å†™åˆ†ç¦»ï¼Œå°†å¹³å‡å“åº”æ—¶å»¶é™ä½ 50% ä»¥ä¸Šï¼›Prometheus + Grafana æ­å»ºç›‘æ§ä¸æ•°æ®å¯è§†åŒ–å¹³å°ï¼Œæ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆï¼Œæ•…éšœå®šä½æ•ˆç‡æå‡ 100%ã€‚\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rRedis ç¼“å­˜ç­–ç•¥\né—®ï¼šå“ªäº›åœºæ™¯ç”¨ç¼“å­˜ï¼Ÿç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©å¦‚ä½•é˜²èŒƒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç¼“å­˜åœºæ™¯ï¼šçƒ­ç‚¹æ•°æ®ã€é¢‘ç¹è¯»ã€è®¡ç®—ç»“æœï¼›å¯¹éœ€è¦å¿«é€Ÿå“åº”çš„æŸ¥è¯¢åšç¼“å­˜ï¼› é˜²ç©¿é€ï¼šæå‰æ ¡éªŒå‚æ•°ã€ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼›ç¼“å­˜ç©ºå€¼ï¼› é˜²å‡»ç©¿ï¼šåŠ é”æˆ–ä½¿ç”¨äº’æ–¥é”ã€è¯·æ±‚æ’é˜Ÿï¼› é˜²é›ªå´©ï¼šè®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´ã€äºŒçº§ç¼“å­˜ï¼›å¼€å¯ Redis é«˜å¯ç”¨ï¼ˆå“¨å…µ/é›†ç¾¤ï¼‰ï¼› ç¼“å­˜ä¸€è‡´æ€§ï¼šæ›´æ–°ç­–ç•¥ï¼ˆä¸»åŠ¨å¤±æ•ˆã€å»¶è¿ŸåŒåˆ ã€æ¶ˆæ¯é€šçŸ¥ï¼‰ï¼›è€ƒè™‘ä¸šåŠ¡å¯å®¹å¿çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚ é—®ï¼šå¦‚ä½•ç›‘æ§å’Œä¼˜åŒ– Redis æ€§èƒ½ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç›‘æ§æŒ‡æ ‡ï¼šå‘½ä¸­ç‡ã€å†…å­˜ä½¿ç”¨ã€æ…¢æŸ¥è¯¢ã€è¿æ¥æ•°ã€CPUã€ç½‘ç»œå¸¦å®½ï¼› ä¼˜åŒ–ï¼šåˆç†æ•°æ®ç»“æ„ï¼ˆhashã€set ç­‰ï¼‰ï¼Œé¿å…å¤§ keyï¼›ä½¿ç”¨ pipeline/batchï¼›é…ç½®å†…å­˜æ·˜æ±°ç­–ç•¥ï¼›åˆ†ç‰‡æˆ– Cluster æ¨¡å¼ï¼›è¿ç»´ï¼šå†…å­˜é¢„ç•™ã€æŒä¹…åŒ–é…ç½®ï¼ˆAOF/RDBï¼‰å¯¹æ€§èƒ½å½±å“ã€‚ Kafka å¼‚æ­¥è§£è€¦\né—®ï¼šåœ¨ä»€ä¹ˆåœºæ™¯ä½¿ç”¨ Kafkaï¼Ÿå¦‚ä½•ä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nåœºæ™¯ï¼šè§£è€¦é«˜å³°å†™å…¥ï¼›å¼‚æ­¥é€šçŸ¥ã€æ—¥å¿—æµï¼›æµå¼å¤„ç†ï¼› é…ç½®ï¼šacks=allï¼Œå‰¯æœ¬æ•° \u0026gt;= 2ï¼›ISR é…ç½®ï¼›ä¿æŒåˆé€‚çš„åˆ†åŒºæ•°ä»¥æ”¯æŒå¹¶å‘ï¼› æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ä½ç‚¹ç®¡ç†ï¼ˆæ‰‹åŠ¨æäº¤ vs è‡ªåŠ¨ï¼‰ï¼›å¹‚ç­‰æ¶ˆè´¹æ–¹æ¡ˆï¼›å¤„ç†å¤±è´¥é‡è¯•ä¸æ­»ä¿¡é˜Ÿåˆ—ï¼› å»¶è¿Ÿä¸ååå¹³è¡¡ï¼šæ‰¹é‡å‘é€ã€å‹ç¼©ï¼›åˆ†åŒºé”®ä¸è´Ÿè½½å‡è¡¡ï¼› ç›‘æ§ï¼šLagã€ååé‡ã€å»¶è¿Ÿã€é”™è¯¯ç‡ã€‚ é—®ï¼šå¦‚ä½•å¤„ç†æ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¹‚ç­‰è®¾è®¡ï¼šä¸šåŠ¡å¤„ç†æ¥å£å…·å¤‡å¹‚ç­‰æ€§ï¼›ä½¿ç”¨å”¯ä¸€ ID æˆ–å¹‚ç­‰é”®ï¼› é‡è¯•ç­–ç•¥ï¼šé™æ¬¡é‡è¯•åå†™æ­»ä¿¡ï¼›äººå·¥æˆ–è‡ªåŠ¨è¡¥å¿æµç¨‹ï¼› äº‹åŠ¡æ¶ˆæ¯ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼šKafka äº‹åŠ¡æ”¯æŒæˆ–å¤–éƒ¨åè°ƒï¼›è°¨æ…ä½¿ç”¨ï¼› ç›‘æ§å‘Šè­¦ï¼šLag çªå¢ã€æ¶ˆè´¹å¤±è´¥å‘Šè­¦ã€‚ ç›‘æ§ä¸æ•°æ®å¯è§†åŒ–\né—®ï¼šPrometheus + Grafana å¦‚ä½•éƒ¨ç½²ä¸ä½¿ç”¨ï¼Ÿç›‘æ§å“ªäº›å…³é”®æŒ‡æ ‡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\néƒ¨ç½²æ–¹å¼ï¼šPrometheus server + exportersï¼ˆJVM exporterã€Node exporterã€è‡ªå®šä¹‰ exporterï¼‰ï¼›Alertmanager é…ç½®ï¼›Grafana Dashboard åˆ›å»ºï¼› æŒ‡æ ‡ï¼šåº”ç”¨å±‚ï¼ˆè¯·æ±‚é€Ÿç‡ã€é”™è¯¯ç‡ã€å“åº”æ—¶å»¶åˆ†å¸ƒï¼‰ã€JVMï¼ˆheap, GCï¼‰ã€å®¹å™¨ï¼ˆCPU/å†…å­˜ï¼‰ã€æ•°æ®åº“è¿æ¥æ± ã€Redis/Kafka æŒ‡æ ‡ã€å¤–éƒ¨ä¾èµ–è°ƒç”¨æ—¶å»¶ï¼›ä¸šåŠ¡æŒ‡æ ‡ï¼šTPSã€ç”¨æˆ·è¡Œä¸ºæŒ‡æ ‡ï¼›AI æ¨¡å‹è°ƒç”¨å»¶è¿Ÿ/æˆåŠŸç‡ç­‰ï¼› æŠ¥è­¦ï¼šè®¾ç½®é˜ˆå€¼æŠ¥è­¦ã€èšåˆæŠ¥è­¦ï¼Œé¿å…å‘Šè­¦é£æš´ï¼›å‘Šè­¦æ¸ é“ï¼ˆé‚®ä»¶ã€é’‰é’‰ã€Slackï¼‰ï¼› æ•°æ®å¯è§†åŒ–ï¼šä¸ºä¸åŒè§’è‰²ï¼ˆå¼€å‘ã€è¿ç»´ã€äº§å“ï¼‰å®šåˆ¶ Dashboardï¼›å†å²è¶‹åŠ¿åˆ†æç”¨äºå®¹é‡è§„åˆ’ã€‚ æ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆï¼Œæ•…éšœå®šä½æ•ˆç‡æå‡ 100%\né—®ï¼šå…·ä½“å¦‚ä½•æ”¯æŒ AI æ¨¡å‹é›†æˆï¼Ÿæ•°æ®æµå’Œæµç¨‹å¦‚ä½•è®¾è®¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ•°æ®é‡‡é›†ï¼šåœ¨ä¸šåŠ¡è°ƒç”¨é“¾æˆ–æ—¥å¿—ä¸­åŸ‹ç‚¹ï¼Œç»“æ„åŒ–æ—¥å¿—æˆ–äº‹ä»¶ï¼Œsink åˆ° Kafka/æ¶ˆæ¯æ€»çº¿ï¼› æ•°æ®å­˜å‚¨ï¼šå®æ—¶å…¥åº“æˆ–æ‰¹é‡å…¥åº“åˆ°æ•°æ®ä»“åº“ (Hive/ClickHouse/æ•°æ®åº“)ã€æˆ–è€…ç›´æ¥ä¾›æ¨¡å‹è®­ç»ƒï¼› ç‰¹å¾è®¡ç®—ï¼šå®æ—¶ç‰¹å¾ä» Redis/NoSQL æå–ï¼Œç¦»çº¿ç‰¹å¾ç¦»çº¿è®¡ç®—ï¼› æ¨¡å‹æœåŠ¡ï¼šæš´éœ²æ¨¡å‹æ¨ç†æ¥å£ï¼Œé›†æˆåˆ°ä¸šåŠ¡è°ƒç”¨é“¾ï¼›è€ƒè™‘å¹¶å‘å’Œå»¶è¿Ÿï¼› å¹³å°æ”¯æŒï¼šç»Ÿä¸€æ•°æ®æ¥å…¥æ¡†æ¶ã€æ¨¡å‹ç®¡ç†æœåŠ¡ï¼ˆç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒï¼‰ã€ç›‘æ§æ¨¡å‹æ€§èƒ½ï¼ˆçº¿ä¸Šç²¾åº¦ã€å»¶è¿Ÿï¼‰ï¼› æ•…éšœå®šä½æ•ˆç‡æå‡ï¼šåˆ©ç”¨é“¾è·¯è¿½è¸ªã€ç»“æ„åŒ–æ—¥å¿—ã€æ—¥å¿—èšåˆæŸ¥è¯¢ã€é”™è¯¯åˆ†ç±»å‘Šè­¦ã€è‡ªåŠ¨åŒ–è¯Šæ–­è„šæœ¬æˆ–å¹³å°ï¼›æ¡ˆä¾‹ï¼šæŸæ¬¡çº¿ä¸Šå¼‚å¸¸ï¼Œé€šè¿‡é“¾è·¯è¿½è¸ªå¿«é€Ÿå®šä½åˆ°ä¸‹æ¸¸æœåŠ¡å»¶è¿Ÿï¼› ä¸¾ä¾‹ï¼šå¼€å‘ä¸€å¥—è‡ªåŠ©æŸ¥è¯¢å·¥å…·æˆ–è„šæœ¬ï¼Œæå‡è¯Šæ–­é€Ÿåº¦ï¼›å®Œå–„æ–‡æ¡£å’ŒçŸ¥è¯†åº“ã€‚ 3. CI/CD æµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–ï¼šåŸºäº GitLab CI/Jenkinsã€Docker ä¸ Kubernetesï¼Œç»“åˆ Terraform å®ç° IaCï¼Œå®ç°å¤šç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå°†æµæ°´çº¿æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Œå‘å¸ƒé¢‘ç‡æå‡æ•°å€ã€å›æ»šç‡é™è‡³æä½æ°´å¹³ã€‚\r#\ré—®ï¼šè¯·æè¿°å®Œæ•´çš„ CI/CD æµç¨‹ï¼Œä»ä»£ç æäº¤åˆ°ç”Ÿäº§ä¸Šçº¿çš„å„æ­¥éª¤ã€‚\nå›ç­”æ€è·¯ï¼š\nä»£ç ç®¡ç†ï¼šGit åˆ†æ”¯ç­–ç•¥ï¼ˆGitFlow/Trunk-basedï¼‰ï¼›Merge Request å®¡æŸ¥æµç¨‹ï¼› é™æ€æ£€æŸ¥ï¼šä»£ç é£æ ¼ã€é™æ€å®‰å…¨æ‰«æã€å•å…ƒæµ‹è¯•ï¼› æ„å»ºæ‰“åŒ…ï¼šMaven/Gradle æ„å»ºï¼ŒDocker é•œåƒæ‰“åŒ…ï¼›é•œåƒæ¨åˆ°ç§æœ‰é•œåƒä»“åº“ï¼› éƒ¨ç½²ï¼šTerraform ç®¡ç†åŸºç¡€è®¾æ–½ï¼ˆK8s é›†ç¾¤ã€ç½‘ç»œã€å®‰å…¨ç»„ï¼‰ï¼›Helm Chart æˆ– Kustomize éƒ¨ç½²å¾®æœåŠ¡åˆ°ä¸åŒç¯å¢ƒï¼ˆdev/test/stage/prodï¼‰ï¼› è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šé›†æˆæµ‹è¯•ã€æ¥å£æµ‹è¯•ã€å‹æµ‹è„šæœ¬è§¦å‘ï¼›æµ‹è¯•é€šè¿‡åè‡ªåŠ¨æ¨è¿›ï¼› å‘å¸ƒç­–ç•¥ï¼šæ»šåŠ¨å‡çº§ã€è“ç»¿/é‡‘ä¸é›€å‘å¸ƒï¼›ç›‘æ§æ–°ç‰ˆæœ¬æŒ‡æ ‡ï¼ŒçŸ­æœŸå›æ»šè§¦å‘æ¡ä»¶ï¼› å›æ»šï¼šè‡ªåŠ¨åŒ–æˆ–æ‰‹åŠ¨å›æ»šæµç¨‹ï¼›ä¿æŒæ•°æ®åº“å…¼å®¹ï¼› å‘å¸ƒåéªŒè¯ï¼šSmoke testã€å¥åº·æ£€æŸ¥ï¼›å‘Šè­¦ä¸è§‚å¯Ÿï¼› æ—¶é—´ä¼˜åŒ–ï¼šå¹¶è¡Œæ„å»ºã€ç¼“å­˜ä¾èµ–ã€æ„å»ºé•œåƒåˆ†å±‚ä¼˜åŒ–ã€å…±äº«runneræˆ–èŠ‚ç‚¹ï¼›å‡å°‘å†—ä½™æ­¥éª¤ï¼› å›æ»šç‡é™ä½æªæ–½ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ã€é¢„å‘å¸ƒç¯å¢ƒéªŒè¯ã€ç°åº¦å‘å¸ƒè§‚å¯Ÿã€å¿«é€Ÿå›æ»šè„šæœ¬ï¼› å›¢é˜Ÿåä½œï¼šå¦‚ä½•ä¸æµ‹è¯•ã€è¿ç»´ã€äº§å“ååŒç¡®å®šè‡ªåŠ¨åŒ–æµç¨‹ï¼›æ–‡æ¡£å’Œè¿è¡Œæ‰‹å†Œã€‚ é—®ï¼šTerraform åœ¨è¿™é‡Œå¦‚ä½•ä½¿ç”¨ï¼Ÿæœ‰å“ªäº›æŒ‘æˆ˜ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nTerraform ç®¡ç†äº‘èµ„æºï¼ˆé›†ç¾¤ã€ç½‘ç»œã€å®‰å…¨ç»„ã€å­˜å‚¨ï¼‰ã€Kubernetes èµ„æºï¼ˆå¦‚ CRDã€Namespaceï¼‰ï¼› çŠ¶æ€ç®¡ç†ï¼šRemote state å­˜å‚¨ã€é”å®šï¼›å¤šäººåä½œæ—¶å¦‚ä½•é¿å…å†²çªï¼› æ¨¡å—åŒ–ï¼šç¼–å†™å¯å¤ç”¨æ¨¡å—ï¼›ç¯å¢ƒéš”ç¦»ï¼›å‚æ•°åŒ–ï¼› å˜æ›´ç®¡ç†ï¼šReview Terraform planï¼›å¤„ç†ç ´åæ€§å˜æ›´ï¼›å›æ»šç­–ç•¥ï¼› æŒ‘æˆ˜ï¼šçŠ¶æ€ driftã€èµ„æºä¾èµ–å…³ç³»ã€æƒé™ç®¡ç†ã€Terraform ç‰ˆæœ¬å‡çº§å…¼å®¹ï¼› ç¤ºèŒƒï¼šæŸæ¬¡å˜æ›´å¯¼è‡´é›†ç¾¤ç½‘ç»œé…ç½®å˜æ›´ï¼Œå¦‚ä½•æ’æŸ¥å¹¶ä¿®å¤ã€‚ é—®ï¼šå¦‚ä½•å°†æµæ°´çº¿æ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¹¶è¡ŒåŒ–æ­¥éª¤ï¼šåŒæ—¶æ„å»ºå¤šä¸ªæœåŠ¡é•œåƒï¼›å¹¶è¡Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼› ç¼“å­˜ä¾èµ–ï¼šMaven/Gradle æœ¬åœ°ç¼“å­˜ã€Docker layer ç¼“å­˜ï¼› è½»é‡åŒ–æµ‹è¯•ï¼šåŒºåˆ†å¿«æµ‹å’Œå…¨é‡æµ‹è¯•ï¼Œå°†å¿«æµ‹æ”¾åœ¨æäº¤é˜¶æ®µï¼›å…¨é‡æµ‹è¯•åœ¨åˆå¹¶åæˆ–å¤œé—´å®Œæˆï¼› ä¼˜åŒ–é•œåƒå¤§å°å’Œæ¨é€é€Ÿåº¦ï¼›æ¨é€åˆ°åŒæœºæˆ¿æˆ–åŠ é€Ÿçš„é•œåƒä»“åº“ï¼› è‡ªåŠ¨åŒ–èµ„æºå‡†å¤‡ï¼šåŸºç¡€ç¯å¢ƒé¢„çƒ­ï¼›åŠ¨æ€åˆ†é… runnerï¼Œæé«˜åˆ©ç”¨ç‡ï¼› ç›‘æ§ç“¶é¢ˆï¼šåˆ†ææµæ°´çº¿å„é˜¶æ®µè€—æ—¶ï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼› é£é™©æ§åˆ¶ï¼šåœ¨ä¿è¯è´¨é‡å‰æä¸‹ï¼Œé¿å…å†—ä½™æ­¥éª¤ï¼›å¯¹é‡è¦æ­¥éª¤å¢åŠ æ¡ä»¶è§¦å‘ï¼Œä¾‹å¦‚ä»…åœ¨å…³é”®åˆ†æ”¯æˆ–æ ‡ç­¾æ—¶è¿›è¡Œå®Œæ•´æµç¨‹ã€‚ é—®ï¼šå‘å¸ƒé¢‘ç‡æå‡å¸¦æ¥çš„æŒ‘æˆ˜å¦‚ä½•åº”å¯¹ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næœåŠ¡æ²»ç†ï¼šå¾®æœåŠ¡ç‰ˆæœ¬å…¼å®¹ï¼›API å…¼å®¹æ€§ç­–ç•¥ï¼›ç°åº¦å‘å¸ƒï¼›å‘å¸ƒæ–‡æ¡£ä¸å˜æ›´é€šçŸ¥ï¼› æ•°æ®åº“å˜æ›´ï¼šåœ¨çº¿å˜æ›´ç­–ç•¥ï¼ˆè“ç»¿è¡¨ã€å›æ»šæ–¹æ¡ˆï¼‰ï¼›DB migration å·¥å…·ï¼ˆFlyway/Liquibaseï¼‰ï¼›é¢„æ¼”ç¯å¢ƒéªŒè¯ï¼› ç›‘æ§å‘Šè­¦ï¼šè‡ªåŠ¨åŒ–æ£€æµ‹æ–°ç‰ˆæœ¬å¼‚å¸¸ï¼›å¿«é€Ÿå®šä½å’Œå›æ»šï¼› å›¢é˜Ÿåä½œæ–‡åŒ–ï¼šDevOps æ–‡åŒ–æ¨åŠ¨ï¼›å¼€å‘è€…è‡ªåŠ©å‘å¸ƒèƒ½åŠ›ï¼›åˆ¶å®šå‘å¸ƒè§„èŒƒä¸ SLOï¼› é£é™©ç®¡ç†ï¼šæµé‡åˆ‡åˆ†ã€é™æµå¼€å…³ã€Feature Flagã€‚ äºŒã€2019.02 â€“ 2022.05 ä¸Šæµ·æ ¸å·¥ç¨‹ç ”ç©¶è®¾è®¡é™¢æœ‰é™å…¬å¸ å…¨æ ˆå·¥ç¨‹å¸ˆ\r#\r1. â€œä½¿ç”¨ Spring Boot ä¸ Spring Cloud ç°ä»£å¾®æœåŠ¡æ¶æ„é‡æ„å·¥ä¸šç³»ç»Ÿï¼šå°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºæ¨¡å—åŒ–æœåŠ¡ï¼Œç¡®ä¿æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’Œå®‰å…¨é›†æˆï¼Œå°†å¼€å‘ä¸æµ‹è¯•æ—¶é—´ç¼©çŸ­è‡³å°‘ 75%ï¼Œæ˜¾è‘—æå‡å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rå•ä½“æ‹†åˆ†æ€è·¯\né—®ï¼šæ‹†åˆ†å‰å¦‚ä½•è¯„ä¼°å•ä½“ç³»ç»Ÿç—›ç‚¹ï¼Ÿæ‹†åˆ†åå¦‚ä½•éªŒè¯æˆæ•ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç—›ç‚¹è°ƒç ”ï¼šæ€§èƒ½ç“¶é¢ˆã€éƒ¨ç½²éš¾åº¦ã€å›¢é˜Ÿåä½œå†²çªã€ä»£ç è€¦åˆåº¦é«˜ã€å‘å¸ƒå‘¨æœŸé•¿ï¼› æ‹†åˆ†åŸåˆ™ï¼šæŒ‰ä¸šåŠ¡åŸŸåˆ’åˆ†è¾¹ç•Œï¼ˆDDD é¢†åŸŸé©±åŠ¨è®¾è®¡æ€è·¯ï¼‰ï¼Œæˆ–æŒ‰å›¢é˜ŸèŒè´£åˆ’åˆ†ï¼› æœåŠ¡å‘ç°ï¼šSpring Cloud Eureka/Nacos æˆ–ä¼ä¸šå†…éƒ¨æ–¹æ¡ˆï¼› é…ç½®ç®¡ç†ï¼šSpring Cloud Config æˆ– Apollo ç­‰ï¼› å®‰å…¨é›†æˆï¼šç»Ÿä¸€è®¤è¯é‰´æƒï¼ˆOAuth2/OIDCã€JWTï¼‰ï¼›é›†ä¸­å®¡è®¡ï¼› éªŒè¯ï¼šæ‹†åˆ†å‰åéƒ¨ç½²æ—¶é—´å¯¹æ¯”ã€å•æ¬¡å‘å¸ƒé£é™©é™ä½ã€å›¢é˜Ÿå¹¶è¡Œå¼€å‘æ•ˆç‡ã€æµ‹è¯•æ—¶é—´ç¼©çŸ­æŒ‡æ ‡ã€ç³»ç»Ÿç¨³å®šæ€§æŒ‡æ ‡ã€å¯æ‰©å±•èƒ½åŠ›ï¼ˆå¯ç‹¬ç«‹æ‰©å®¹æŸæœåŠ¡ï¼‰ã€‚ é—®ï¼šå¦‚ä½•å¤„ç†è·¨æœåŠ¡è°ƒç”¨å’Œäº‹åŠ¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nåŒæ­¥è°ƒç”¨ï¼šREST/gRPCï¼›é™çº§ä¸å®¹é”™ï¼ˆFeign + Hystrix æˆ– Resilience4jï¼‰ï¼›è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥ï¼› å¼‚æ­¥è°ƒç”¨ï¼šæ¶ˆæ¯é˜Ÿåˆ—è§£è€¦ï¼› åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå°è¯•é¿å…æˆ–ä½¿ç”¨è¡¥å¿/æœ€ç»ˆä¸€è‡´æ€§ï¼›è¯´æ˜å…·ä½“åœºæ™¯å¦‚ä½•å¤„ç†ï¼› API è®¾è®¡ï¼šç‰ˆæœ¬ç®¡ç†ã€å‘åå…¼å®¹ï¼›å¥‘çº¦æµ‹è¯•ï¼› é—®ï¼šæ‹†åˆ†è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸»è¦æŒ‘æˆ˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ—§æœ‰åº“ä¾èµ–ï¼šå¦‚ä½•æ‹†åˆ†å…±äº«åº“ï¼›é‡æ„å…¬å…±ç»„ä»¶ï¼› æ•°æ®åº“æ‹†åˆ†æˆ–å…±äº«åº“è¡¨ï¼šåœ¨æ‹†åˆ†å‰åå¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´ï¼› éƒ¨ç½²æµç¨‹ï¼šæ„å»º CI/CD æ”¯æŒå¾®æœåŠ¡ï¼› å›¢é˜Ÿæ²Ÿé€šï¼šåŸ¹è®­å¼€å‘ã€æ›´æ–°æ–‡æ¡£ä¸è§„èŒƒï¼›å¼•å¯¼åŒäº‹é€‚åº”æ–°æ¶æ„ï¼› ä¸¾ä¾‹å…·ä½“å›°éš¾ï¼šæŸä¸ªä¸šåŠ¡æ¨¡å—è€¦åˆå¤ªæ·±ï¼Œå¦‚ä½•é€æ­¥æŠ½ç¦»ï¼›è§£å†³æ€è·¯ä¸æ­¥éª¤ï¼› æˆæœï¼šå¼€å‘/æµ‹è¯•æ—¶é—´ç¼©çŸ­ 75% çš„å…·ä½“è¡¡é‡æ–¹å¼ï¼ˆä¾‹å¦‚å¹¶è¡Œæµ‹è¯•ã€ç‹¬ç«‹éƒ¨ç½²ã€ç¯å¢ƒéš”ç¦»ç­‰æŒ‡æ ‡ï¼‰ã€‚ æœåŠ¡å‘ç°ä¸é…ç½®ç®¡ç†\né—®ï¼šä½ ä½¿ç”¨äº†å“ªäº›å…·ä½“æŠ€æœ¯/æ¡†æ¶ï¼Ÿå¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nSpring Cloud Eureka/Consul/Nacosï¼šé›†ç¾¤éƒ¨ç½²ä¿è¯é«˜å¯ç”¨ï¼›å®¢æˆ·ç«¯ç¼“å­˜ä¸å¿ƒè·³æœºåˆ¶ï¼› é…ç½®ä¸­å¿ƒï¼šSpring Cloud Config/Git-backed æˆ– Apolloï¼›é…ç½®æ›´æ–°æ¨é€ä¸å›æ»šæ”¯æŒï¼› å®‰å…¨ï¼šé…ç½®æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼Œè®¿é—®æ§åˆ¶ï¼› ç›‘æ§æœåŠ¡å®ä¾‹å¥åº·ï¼šè‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼›è‡ªåŠ¨å‰”é™¤ä¸å¯ç”¨å®ä¾‹ï¼› ç°åº¦å‘å¸ƒé…ç½®ï¼šåŠ¨æ€è°ƒæ•´å‚æ•°å½±å“èŒƒå›´ã€‚ å®‰å…¨é›†æˆ\né—®ï¼šå¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®ç°ç»Ÿä¸€è®¤è¯æˆæƒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè®¤è¯ä¸­å¿ƒï¼šOAuth2 Authorization Server æˆ–ä¼ä¸š SSOï¼›å®¢æˆ·ç«¯å‡­è¯æµæˆ–æˆæƒç æµï¼› å¾®æœåŠ¡é—´ä¿¡ä»»ï¼šJWT Token éªŒè¯ã€æœåŠ¡é—´ mTLSï¼› æƒé™ç®¡ç†ï¼šRole/Permission è®¾è®¡ã€é›†ä¸­ç­–ç•¥å†³ç­–æˆ–ç½‘å…³ä¾§é‰´æƒï¼›åŠ¨æ€æƒé™æ›´æ–°ï¼› æ—¥å¿—ä¸å®¡è®¡ï¼šè®°å½•ç”¨æˆ·æ“ä½œå’Œç³»ç»Ÿè°ƒç”¨ï¼›åˆè§„è¦æ±‚ã€‚ é—®ï¼šå·¥ä¸šç³»ç»Ÿä¸­æœ‰å“ªäº›ç‰¹æœ‰å®‰å…¨è¦æ±‚ï¼Ÿå¦‚ä½•æ»¡è¶³ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå·¥ä¸šæ§åˆ¶æˆ–æ ¸å·¥ç¨‹èƒŒæ™¯ï¼šå¯èƒ½æœ‰å¯¹å®æ—¶æ€§å’Œå¯é æ€§æ›´é«˜è¦æ±‚ï¼›å¯¹æ—¥å¿—å’Œå®¡è®¡æ›´ä¸¥æ ¼ï¼›å¯èƒ½éœ€éš”ç¦»ç½‘ç»œç¯å¢ƒï¼› åˆè§„æ ‡å‡†ï¼šå†…éƒ¨æˆ–è¡Œä¸šå®‰å…¨æ ‡å‡†ï¼›åŠ å¯†å­˜å‚¨ã€èº«ä»½ç®¡ç†ï¼›è®¿é—®å®¡è®¡ã€‚ å¼€å‘ä¸æµ‹è¯•æ—¶é—´ç¼©çŸ­ 75%\né—®ï¼šå…·ä½“å¦‚ä½•è¡¡é‡â€œå¼€å‘ä¸æµ‹è¯•æ—¶é—´â€ï¼Ÿé‡‡å–äº†å“ªäº›è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næŒ‡æ ‡ï¼šä»éœ€æ±‚ç¡®è®¤åˆ°ä¸Šçº¿çš„å¹³å‡å‘¨æœŸï¼›CI/CD è§¦å‘åˆ°æµ‹è¯•æŠ¥å‘Šçš„æ—¶é—´ï¼›ç¯å¢ƒå‡†å¤‡æ—¶é—´ï¼›å›å½’æµ‹è¯•è¦†ç›–ï¼› è‡ªåŠ¨åŒ–ï¼šè‡ªåŠ¨éƒ¨ç½²æµ‹è¯•ç¯å¢ƒï¼›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒã€é›†æˆã€æ¥å£æµ‹è¯•è„šæœ¬ï¼‰ï¼›Mock ç¯å¢ƒæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼›å¥‘çº¦æµ‹è¯•ï¼›å®¹å™¨åŒ–ç¯å¢ƒåˆå§‹åŒ–ï¼› å›¢é˜Ÿåä½œï¼šé‡‡ç”¨ DevOps æ–‡åŒ–ï¼Œè®©å¼€å‘æ›´å¤šå…³æ³¨ä¸šåŠ¡å®ç°ï¼›æå‰ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼›æŒç»­é›†æˆä¿è¯å¿«é€Ÿåé¦ˆï¼› ä¸¾ä¾‹ï¼šæŸæ¨¡å—æµ‹è¯•ç¯å¢ƒä»æ‰‹åŠ¨æ•°å°æ—¶æ­å»ºåˆ°è‡ªåŠ¨åŒ–æ•°åˆ†é’Ÿï¼›API æµ‹è¯•è„šæœ¬è¦†ç›–ç‡æå‡ç­‰ã€‚ 2. â€œé›†æˆ Kafkaï¼Œå®ç°ä¸ Siemens ç³»ç»Ÿçš„æ¯«ç§’çº§é›¶æ•°æ®ä¸¢å¤±ä¼ è¾“ï¼›åŒæ—¶æ¥å…¥ ELK æ—¥å¿—é‡‡é›†ä¸ç›‘æ§å¹³å°ï¼Œæä¾›å®æ—¶ç›‘æ§ä¸å‘Šè­¦ï¼Œå°†å¹³å‡æ•…éšœå®šä½æ—¶é—´ç¼©çŸ­ 50%ï¼Œæ”¯æŒåŸºäºæ•°æ®çš„æŒç»­ä¼˜åŒ–ï¼Œå…‹æœå·¥ä¸šç³»ç»Ÿæ¥å£å­¦ä¹ ä¸è°ƒè¯•æŒ‘æˆ˜ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rKafka é›†æˆä¸ Siemens ç³»ç»Ÿå¯¹æ¥\né—®ï¼šSiemens ç³»ç»Ÿå¦‚ä½•äº§ç”Ÿæˆ–æä¾›æ•°æ®ï¼Ÿä½¿ç”¨ä½•ç§åè®®æˆ–æ ¼å¼ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè¯´æ˜ Siemens ç³»ç»Ÿè¾“å‡ºæ•°æ®çš„æ–¹å¼ï¼ˆå¦‚ OPC UAã€æ–‡ä»¶ã€REST æ¥å£æˆ–ä¸“æœ‰åè®®ï¼‰ï¼›å¦‚ä½•æŠ“å–æ•°æ®å¹¶æ¨é€åˆ° Kafkaï¼› è‹¥é€šè¿‡é€‚é…å™¨æˆ–ä¸­é—´ä»¶ï¼šè‡ªç ”é€‚é…å™¨æˆ–ä½¿ç”¨å·²æœ‰ SDKï¼Œå°† Siemens è¾“å‡ºè½¬æˆ Kafka æ¶ˆæ¯ï¼› æ¶ˆæ¯æ ¼å¼ï¼šJSON/Avro/Protobufï¼Œå¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼› é›¶æ•°æ®ä¸¢å¤±ï¼šKafka é…ç½®ï¼ˆacks=allã€åˆé€‚å‰¯æœ¬æ•°ã€åŒæ­¥å†™å…¥ï¼‰ï¼›å¹‚ç­‰ç”Ÿäº§è€…ï¼›äº‹åŠ¡æˆ–å¤–éƒ¨åè°ƒï¼›ç›‘æ§å‰¯æœ¬åŒæ­¥çŠ¶æ€ï¼› æ¯«ç§’çº§å»¶è¿Ÿï¼šæ‰¹é‡å‘é€ vs å®æ—¶å‘é€çš„æƒè¡¡ï¼›ç”Ÿäº§è€… flush ç­–ç•¥ã€åˆ†åŒºé€‰æ‹©ï¼›ç½‘ç»œå’Œ Kafka é›†ç¾¤æ€§èƒ½ä¼˜åŒ–ï¼›æ¶ˆè´¹è€…ä¾§å®æ—¶å¤„ç†èƒ½åŠ›ï¼› æ•…éšœæ¢å¤ï¼šè‹¥ Kafka èŠ‚ç‚¹æˆ–ç½‘ç»œæ•…éšœï¼Œå¦‚ä½•ä¿è¯æ•°æ®æ¢å¤ï¼›Consumer åç§»ç®¡ç†ï¼›é‡è¯•æˆ–è¡¥æ•°æ®æœºåˆ¶ã€‚ é—®ï¼šå¦‚ä½•éªŒè¯â€œé›¶æ•°æ®ä¸¢å¤±â€ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç«¯åˆ°ç«¯æµ‹è¯•ï¼šåœ¨æ¨¡æ‹Ÿç½‘ç»œæŠ–åŠ¨æˆ–èŠ‚ç‚¹æ•…éšœæƒ…å†µä¸‹ï¼ŒéªŒè¯æ¶ˆæ¯å®Œæ•´æ€§ï¼› ç›‘æ§ï¼šOffset å·®å¼‚ç›‘æ§ã€Kafka æ¶ˆæ¯å †ç§¯/æ»åç›‘æ§ï¼› æ•°æ®æ ¡éªŒï¼šåœ¨æ¶ˆè´¹ç«¯å­˜å‚¨æ•°æ®åï¼Œä¸æºç³»ç»Ÿå®šæœŸå¯¹æ¯”è®¡æ•°æˆ–æ ¡éªŒæ‘˜è¦ï¼› ç¾éš¾æ¢å¤æ¼”ç»ƒï¼šæ–­å¼€è¿æ¥ã€é‡å¯é›†ç¾¤æ—¶çš„æ•°æ®æ¢å¤æµ‹è¯•ã€‚ ELK æ—¥å¿—é‡‡é›†ä¸ç›‘æ§\né—®ï¼šå¦‚ä½•éƒ¨ç½² ELKï¼Ÿæ—¥å¿—é‡‡é›†æ¶æ„å¦‚ä½•è®¾è®¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ—¥å¿—é‡‡é›†ï¼šä½¿ç”¨ Filebeat/Fluentd/Logstash Agent éƒ¨ç½²åœ¨å„æœåŠ¡èŠ‚ç‚¹ï¼Œè¯»å–åº”ç”¨æ—¥å¿—æˆ–å®¹å™¨ stdoutï¼›ç»“æ„åŒ–æ—¥å¿—(JSON æ ¼å¼)ï¼›RPC é“¾è·¯æ—¥å¿—åŸ‹ç‚¹ï¼› æ—¥å¿—ä¼ è¾“ï¼šç»è¿‡ Logstash è§£æåå‘é€åˆ° Elasticsearchï¼›è®¾ç½®ç´¢å¼•ç­–ç•¥ï¼ˆæŒ‰å¤©/æŒ‰é¡¹ç›®ï¼‰ï¼› å¯è§†åŒ–ï¼šKibana Dashboardï¼Œå®šä¹‰æœç´¢å’Œå¯è§†åŒ–è§†å›¾ï¼›å‘Šè­¦ï¼šWatcher æˆ–ç»“åˆå¤–éƒ¨å‘Šè­¦ç»„ä»¶ï¼› é«˜å¯ç”¨ï¼šElasticsearch é›†ç¾¤é…ç½®ã€Shard/Replica è®¾ç½®ï¼›Storage è€ƒè™‘ä¸å½’æ¡£ï¼›æ—¥å¿—ä¿ç•™ç­–ç•¥ï¼› æ€§èƒ½ï¼šæ—¥å¿—é‡å¤§æ—¶å¦‚ä½•å‹ç¼©ã€åˆ†æµã€å†·å­˜ï¼›é¿å…æ—¥å¿—ç³»ç»Ÿè¿‡è½½ï¼› æ•…éšœå®šä½ï¼šå¦‚ä½•å¿«é€Ÿä»æ—¥å¿—ä¸­å®šä½é—®é¢˜ï¼Ÿä¾‹å¦‚é€šè¿‡ Trace ID æˆ–è¯·æ±‚ ID å…³è”å¤šæœåŠ¡æ—¥å¿—ï¼›è‡ªåŠ¨åŒ–è„šæœ¬æˆ– Kibana æŸ¥è¯¢æ¨¡æ¿ã€‚ é—®ï¼šå¦‚ä½•å°†æ•…éšœå®šä½æ—¶é—´ç¼©çŸ­ 50%ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¼•å…¥å”¯ä¸€è¯·æ±‚ IDï¼ˆTrace IDï¼‰ï¼Œåœ¨å„æœåŠ¡æ—¥å¿—ä¸­ä¼ é€’å¹¶æ‰“å°ï¼› é“¾è·¯è¿½è¸ªï¼šä½¿ç”¨åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼Œé…åˆæ—¥å¿—ï¼›å¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆæˆ–å¼‚å¸¸æœåŠ¡ï¼› æ—¥å¿—ç»“æ„åŒ–ï¼šç»Ÿä¸€å­—æ®µï¼Œæ–¹ä¾¿æœç´¢å’Œè¿‡æ»¤ï¼›é¢„å…ˆå®šä¹‰å¸¸è§åœºæ™¯çš„æŸ¥è¯¢æ¨¡æ¿ï¼› å‘Šè­¦è‡ªåŠ¨åŒ–ï¼šå½“ Key Metric å¼‚å¸¸æ—¶è‡ªåŠ¨è§¦å‘æŠ¥è­¦å’Œè¯Šæ–­è„šæœ¬ï¼› æ–‡æ¡£ä¸çŸ¥è¯†åº“ï¼šæ•…éšœç»éªŒæ²‰æ·€ï¼›å›¢é˜ŸååŒæµç¨‹ï¼› ä¸¾ä¾‹ï¼šæ›¾æŸæ¬¡çº¿ä¸Šæ¥å£å¼‚å¸¸ï¼Œé€šè¿‡ Trace ID å’Œæ—¥å¿—å¿«é€Ÿå®šä½åˆ°æŸä¸‹æ¸¸è°ƒç”¨å¼‚å¸¸ï¼Œä»å‰éœ€æ•°å°æ—¶ï¼Œç°åœ¨å‡ åˆ†é’Ÿã€‚ å…‹æœå·¥ä¸šç³»ç»Ÿæ¥å£å­¦ä¹ ä¸è°ƒè¯•æŒ‘æˆ˜\né—®ï¼šå…·ä½“é‡åˆ°å“ªäº›æ¥å£å­¦ä¹ æˆ–è°ƒè¯•éš¾ç‚¹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå·¥ä¸šåè®®å¯èƒ½æ–‡æ¡£ä¸å®Œå–„æˆ–ä¸“æœ‰åè®®ï¼›éœ€è¦é˜…è¯»æ–‡æ¡£ã€æŠ“åŒ…åˆ†ææˆ–ä¸ç¡¬ä»¶å›¢é˜Ÿ/ä¾›åº”å•†æ²Ÿé€šï¼› ç¼–å†™æµ‹è¯•å·¥å…·æˆ–æ¨¡æ‹Ÿå™¨ï¼šæ¨¡æ‹Ÿ Siemens æ¥å£è¯·æ±‚è¿›è¡Œè”è°ƒï¼› è°ƒè¯•ç¯å¢ƒï¼šéƒ¨ç½²æµ‹è¯•ç¯å¢ƒæˆ–æ²™ç®±ï¼›ä½¿ç”¨æ—¥å¿—å’Œç›‘æ§å®šä½æ•°æ®æ ¼å¼æˆ–äº¤äº’é—®é¢˜ï¼› ä¸é¢†åŸŸä¸“å®¶åä½œï¼šç†è§£ä¸šåŠ¡æµç¨‹å’Œæ—¶åºè¦æ±‚ï¼›è®°å½•æ¥å£çº¦å®šå¹¶å½¢æˆæ–‡æ¡£ï¼› ä¸¾ä¾‹ï¼šæŸ Siemens è®¾å¤‡æ•°æ®æ ¼å¼å˜åŒ–å¯¼è‡´æ¶ˆæ¯è§£æå¼‚å¸¸ï¼Œé€šè¿‡æŠ“åŒ…å®šä½å¹¶æ›´æ–°è§£æé€»è¾‘ã€‚ 3. â€œç»´æŠ¤å¹¶ä¼˜åŒ–é—ç•™å‰åç«¯ç³»ç»Ÿï¼šè¿ç”¨ Reactã€Angular å‰ç«¯æ¡†æ¶å’Œ PHP åç«¯æŠ€æœ¯ï¼Œä¼˜å…ˆä¿®å¤å…³é”®ç¼ºé™·å¹¶å®Œå–„ä»£ç æ–‡æ¡£ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\ré—ç•™ç³»ç»Ÿç»´æŠ¤ç»éªŒ\né—®ï¼šå¦‚ä½•è¯„ä¼°é—ç•™ç³»ç»Ÿè´¨é‡ä¸é£é™©ï¼Ÿå¦‚ä½•å†³å®šä¿®å¤ã€é‡æ„æˆ–æ›¿æ¢ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè¯„ä¼°æŒ‡æ ‡ï¼šç¼ºé™·é¢‘æ¬¡ã€ä»£ç è€¦åˆåº¦ã€æŠ€æœ¯æ ˆè€æ—§ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½ç“¶é¢ˆï¼›ä¸šåŠ¡ä»·å€¼ï¼šæ˜¯å¦æ ¸å¿ƒåŠŸèƒ½ï¼›ç»´æŠ¤æˆæœ¬ï¼› å†³ç­–ï¼šå°èŒƒå›´é‡æ„ vs å¤§è§„æ¨¡é‡å†™ï¼›ä½¿ç”¨æŠ€æœ¯å€ºåŠ¡è¯„ä¼°è¡¨ï¼›ä¸ä¸šåŠ¡æ–¹æ²Ÿé€šï¼šæŠ•å…¥äº§å‡ºæ¯”ï¼› ä¸¾ä¾‹ï¼šæŸæ¨¡å—é¢‘å‘é”™è¯¯ï¼Œä½†é‡å†™æˆæœ¬é«˜ï¼Œé‡‡ç”¨è¡¥ä¸å¼ä¿®å¤å¹¶ç¼–å†™å•å…ƒæµ‹è¯•ï¼›åŒæ—¶è®°å½•é‡æ„è®¡åˆ’ã€‚ é—®ï¼šå‰ç«¯æ¡†æ¶ React/Angular çš„ç»´æŠ¤æŒ‘æˆ˜åŠä¼˜åŒ–ç»éªŒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç‰ˆæœ¬å‡çº§ï¼šå¦‚ä½•å¹³æ»‘å‡çº§ React æˆ– Angular ç‰ˆæœ¬ï¼Ÿé‡åˆ°ç ´åæ€§å˜æ›´å¦‚ä½•é€‚é…ï¼Ÿ æ€§èƒ½ä¼˜åŒ–ï¼šå‰ç«¯æ¸²æŸ“æ€§èƒ½ã€bundle å¤§å°ä¼˜åŒ–ã€æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²ï¼› çŠ¶æ€ç®¡ç†ï¼šå¦‚æœä½¿ç”¨ Reduxã€MobX æˆ– Angular Serviceï¼›å¦‚ä½•é‡æ„æ··ä¹±çŠ¶æ€é€»è¾‘ï¼› æµ‹è¯•ï¼šå‰ç«¯å•å…ƒæµ‹è¯•ä¸ç«¯åˆ°ç«¯æµ‹è¯•ï¼›è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼› æ–‡æ¡£å®Œå–„ï¼šç¼–å†™ç»„ä»¶åº“æ–‡æ¡£ã€æ¥å£æ–‡æ¡£ï¼›æ–¹ä¾¿åç»­ç»´æŠ¤ã€‚ é—®ï¼šPHP åç«¯ç»´æŠ¤ç»éªŒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nä»£ç è´¨é‡ï¼šé‡æ„ä¸è§„èŒƒä»£ç ã€å¼•å…¥æˆ–æ”¹è¿› MVC æ¡†æ¶ï¼›ç¼–å†™å•å…ƒæµ‹è¯•ï¼› æ€§èƒ½é—®é¢˜ï¼šæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ã€Session ç®¡ç†ï¼› å®‰å…¨é—®é¢˜ï¼šé˜²æ­¢ SQL æ³¨å…¥ã€XSSã€CSRF ç­‰ï¼›å‡çº§ PHP ç‰ˆæœ¬åŠä¾èµ–åŒ…ï¼› æ–‡æ¡£ä¸è§„èŒƒï¼šè¡¥å……æ³¨é‡Šã€API æ–‡æ¡£ï¼ˆå¦‚ Swaggerï¼‰ï¼›å»ºç«‹ä»£ç è§„èŒƒæ£€æŸ¥æµç¨‹ï¼› éƒ¨ç½²æµç¨‹ï¼šæ”¹è¿›éƒ¨ç½²è„šæœ¬æˆ–æµç¨‹ï¼Œå‡å°‘äººå·¥æ“ä½œã€‚ é—®ï¼šå¦‚ä½•åè°ƒåŒæ—¶å¤„ç†å¤šä¸ªé—ç•™æ¨¡å—çš„è¿ç»´ä¼˜å…ˆçº§ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ ¹æ®ä¸šåŠ¡å½±å“ã€æ•…éšœé¢‘ç‡ã€å®‰å…¨é£é™©æ’åºï¼›ä¸ä¸šåŠ¡å›¢é˜Ÿåå•†ï¼›ä¿è¯é«˜ä¼˜å…ˆçº§é—®é¢˜åŠæ—¶ä¿®å¤ï¼›åˆ¶å®šè§„èŒƒç¼“æ…¢æ”¹è¿›è®¡åˆ’ï¼› è®¾å®š SLAsï¼›ç›‘æ§é—ç•™ç³»ç»Ÿå…³é”®æŒ‡æ ‡ï¼›åœ¨ä¿®å¤æ—¶å…¼é¡¾å›å½’æµ‹è¯•ï¼› ä¸¾ä¾‹ï¼šæŸé—ç•™åŠŸèƒ½å½±å“æ ¸å¿ƒæµç¨‹ï¼Œç´§æ€¥ä¿®å¤åŒæ—¶ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¹¶è®¡åˆ’ä¸‹ä¸ªç‰ˆæœ¬é‡æ„ã€‚ ä¸‰ã€é€šç”¨æ·±æŒ–ä¸è¡Œä¸ºé—®é¢˜\r#\ré™¤äº†é’ˆå¯¹ä¸Šè¿°æŠ€æœ¯ç‚¹ï¼Œé¢è¯•å®˜è¿˜ä¼šæŒ–æ˜ä»¥ä¸‹æ–¹é¢ï¼š\nç»†èŠ‚éªŒè¯\nâ€œä½ è¯´ç³»ç»Ÿå¯ç”¨æ€§ 99.9%+ï¼Œå…·ä½“å¦‚ä½•æµ‹ç®—ï¼Ÿâ€\nå›ç­”ï¼šç»Ÿè®¡ SLA æŒ‡æ ‡ï¼Œå®šä¹‰å¯ç”¨æ€§æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚æˆåŠŸç‡ã€æœåŠ¡å¯è®¿é—®æ€§ï¼‰ï¼Œä½¿ç”¨ç›‘æ§å¹³å°æ•°æ®ï¼Œè®¡ç®—ä¸€æ®µæ—¶é—´å†…å¯ç”¨ç™¾åˆ†æ¯”ã€‚ â€œä½ æåˆ°æ•…éšœå®šä½æ•ˆç‡æå‡ 100%ï¼Œæ˜¯ä»€ä¹ˆåŸºå‡†ï¼Ÿå¦‚ä½•è¡¡é‡ï¼Ÿâ€\nå›ç­”ï¼šä¾‹å¦‚åŸæ¥å¹³å‡æ•…éšœå®šä½è€—æ—¶ 4 å°æ—¶ï¼Œä¼˜åŒ–å 2 å°æ—¶ï¼›æŒ‡æ ‡æ¥æºäºç›‘æ§å·¥å•ç³»ç»Ÿæˆ–å›¢é˜Ÿè®°å½•ã€‚ â€œæ•°æ®åº“åˆ†ç‰‡æ”¯æ’‘ 5,000+ TPSï¼Œå…·ä½“éªŒè¯è¿‡ç¨‹ï¼Ÿâ€\nå›ç­”ï¼šå‹æµ‹ç»“æœã€ç›‘æ§æ•°æ®ã€ç”Ÿäº§æµé‡ç›‘æ§å¯¹é½ï¼›æ˜¯å¦æ¨¡æ‹ŸçœŸå®åœºæ™¯åšå‹æµ‹ã€‚ å†³ç­–åŠ¨æœºä¸æƒè¡¡\nâ€œä¸ºä»€ä¹ˆé€‰ç”¨ Kafka è€Œä¸æ˜¯ RabbitMQï¼Ÿåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ä¼˜ç¼ºç‚¹ï¼Ÿâ€\nå›ç­”ï¼šKafka æ›´é€‚åˆå¤§ååã€æŒä¹…åŒ–æ—¥å¿—ã€æµå¼å¤„ç†ï¼Œä¸”å‰¯æœ¬æœºåˆ¶ä¿è¯å¯é ï¼›RabbitMQ æ›´é€‚åˆå¤æ‚è·¯ç”±æˆ–ä½å»¶è¿Ÿå•æ¶ˆæ¯åœºæ™¯ï¼›ç»“åˆä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©ã€‚ â€œä¸ºä»€ä¹ˆç”¨ Spring Cloud è€Œéå…¶ä»–å¾®æœåŠ¡æ¡†æ¶ï¼Ÿæ˜¯å¦è€ƒè™‘è¿‡è½»é‡æ–¹æ¡ˆï¼Ÿâ€\nå›ç­”ï¼šè¯´æ˜é€‰å‹èƒŒæ™¯ï¼šå›¢é˜Ÿç†Ÿæ‚‰åº¦ã€ç”Ÿæ€æ”¯æŒã€å…¬å¸å·²æœ‰å¹³å°ï¼›åŒæ—¶åœ¨è½»é‡æˆ–é«˜æ€§èƒ½åœºæ™¯ä¼šè€ƒè™‘è‡ªç ”æˆ–æ›´ç®€æ´æ–¹æ¡ˆã€‚ â€œä¸ºä»€ä¹ˆç”¨ Prometheus + Grafanaï¼Ÿæ˜¯å¦è¯„ä¼°è¿‡å…¶ä»–ç›‘æ§æ–¹æ¡ˆï¼Ÿâ€\nå›ç­”ï¼šå¼€æºã€ç¤¾åŒºä¸°å¯Œã€è‡ªå®šä¹‰æŒ‡æ ‡æ–¹ä¾¿ï¼›å¦‚æœå…¬å¸æœ‰å†…éƒ¨ç›‘æ§å¹³å°ï¼Œå¦‚ä½•å¯¹æ¥æˆ–æ‰©å±•ï¼›è€ƒè™‘æ¥å…¥æ—¥å¿—ç›‘æ§æˆ– APMã€‚ â€œä¸ºä»€ä¹ˆæ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Ÿåœ¨é«˜å¹¶å‘å†™åœºæ™¯å¦‚ä½•ä¿è¯è¯»åˆ°æœ€æ–°æ•°æ®ï¼Ÿâ€\nå›ç­”ï¼šè¯»å†™åˆ†ç¦»å‡è½»ä¸»åº“è¯»å‹åŠ›ï¼Œä½†éœ€å¤„ç†è¯»å»¶è¿Ÿï¼šå¯¹å®æ—¶å¼ºä¸€è‡´è¯»å¯ç›´è¯»ä¸»åº“æˆ–åšç­–ç•¥ï¼›å¯¹æœ€ç»ˆä¸€è‡´æ€§åœºæ™¯å¯è¯»ä»åº“ï¼›ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–ã€‚ æŒ‘æˆ˜ä¸æ•™è®­\nâ€œæåˆ°æŸæ¬¡é‡æ„å¤±è´¥æˆ–é‡åˆ°ç“¶é¢ˆï¼Œä½ æ˜¯å¦‚ä½•åº”å¯¹çš„ï¼Ÿâ€\nå›ç­”ï¼šæè¿°å…·ä½“åœºæ™¯ï¼ˆå¦‚æ€§èƒ½æå‡ä¸æ˜æ˜¾æˆ–æ–°æ–¹æ¡ˆå¼•å…¥é—®é¢˜ï¼‰ï¼Œå¦‚ä½•å›é€€æˆ–è°ƒæ•´ï¼›å­¦åˆ°çš„ç»éªŒï¼ˆå¦‚å…ˆå°èŒƒå›´éªŒè¯ã€å‹åŠ›æµ‹è¯•æ›´å……åˆ†ã€æ³¨æ„å…¼å®¹æ€§ï¼‰ã€‚ â€œåœ¨è·¨å›¢é˜Ÿåä½œæ—¶é‡åˆ°å†²çªå¦‚ä½•è§£å†³ï¼Ÿâ€\nå›ç­”ï¼šä¸¾ä¾‹ï¼šä¸è¿ç»´æˆ–å®‰å…¨å›¢é˜Ÿå¯¹æ¥æ—¶å› è§„èŒƒå·®å¼‚å¯¼è‡´å»¶è¿Ÿï¼Œç”¨æ•°æ®å’Œå°èŒƒå›´ PoC è¯´æœï¼›å»ºç«‹æ²Ÿé€šæœºåˆ¶ï¼›æ–‡æ¡£å¯¹é½ï¼›å®šæœŸå¯¹é½ä¼šã€‚ â€œå¦‚ä½•å¹³è¡¡æ–°åŠŸèƒ½äº¤ä»˜é€Ÿåº¦ä¸æ¶æ„ä¼˜åŒ–æŠ•å…¥ï¼Ÿâ€\nå›ç­”ï¼šæ ¹æ®ä¸šåŠ¡ç´§æ€¥åº¦è®¾å®šä¼˜å…ˆçº§ï¼›å¯¹æ ¸å¿ƒæ¨¡å—åšé•¿æœŸæŠ€æœ¯å€ºå¿è¿˜ï¼›åœ¨äº¤ä»˜ä¸­åµŒå…¥å¯ç»´æŠ¤æ€§è€ƒè™‘ï¼›ç”¨ Demo/PoC éªŒè¯æ–°æŠ€æœ¯ã€‚ é¡¹ç›®ç»†èŠ‚ä¸é‡åŒ–\né¢è¯•å®˜å¾€å¾€è¦æ±‚ä½ ç»™å‡ºå…·ä½“æ•°å­—ã€æ—¶é—´èŠ‚ç‚¹ã€å›¢é˜Ÿè§„æ¨¡ç­‰ç»†èŠ‚ï¼š\nâ€œä½ è¿™ä¸ªé¡¹ç›®å›¢é˜Ÿå¤šå¤§ï¼Ÿä½ è´Ÿè´£å¤šå¤§æ¯”ä¾‹å·¥ä½œï¼Ÿâ€ â€œé¡¹ç›®ä¸Šçº¿åå¸¦æ¥å“ªäº›ä¸šåŠ¡æˆ–æ€§èƒ½æå‡ï¼Ÿæœ‰å…·ä½“æ•°æ®å—ï¼Ÿâ€ â€œå¦‚æœç”¨ 5,000+ TPSï¼Œå³°å€¼ä¸‡çº§å¹¶å‘ï¼Œè¿™ä¸ªå³°å€¼æ˜¯å¤šä¹…æŒç»­ï¼Ÿå¦‚ä½•åšå®¹é‡é¢„ä¼°ï¼Ÿâ€ â€œCI/CD æµç¨‹æ”¹å˜åæ¯å¤©å¹³å‡å‘å¸ƒé¢‘ç‡æ˜¯å¤šå°‘ï¼Ÿå›æ»šæ¡ˆä¾‹å¦‚ä½•ä½“ç°ä½å›æ»šç‡ï¼Ÿâ€ å›ç­”æ—¶å‡†å¤‡å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°æ®ï¼Œé¿å…ç©ºæ³›ã€‚\nè½¯æŠ€èƒ½ä¸åä½œ\nâ€œä½ åœ¨å›¢é˜Ÿä¸­å¦‚ä½•æŒ‡å¯¼æ–°äººæˆ–åˆ†äº«çŸ¥è¯†ï¼Ÿâ€\nå›ç­”ï¼šå®šæœŸæŠ€æœ¯åˆ†äº«ä¼šã€ç¼–å†™æ–‡æ¡£ã€Code Review æŒ‡å¯¼ï¼›Pair programmingï¼›Mentoringï¼›åŸ¹è®­ææ–™ï¼›ç»„ç»‡ Hackathon æˆ–å†…éƒ¨åŸ¹è®­ã€‚ â€œå¦‚ä½•å¼€å±•æŠ€æœ¯è¯„å®¡ï¼Ÿâ€\nå›ç­”ï¼šæ’°å†™è®¾è®¡æ–‡æ¡£ã€åˆ—å‡ºéœ€æ±‚ä¸éåŠŸèƒ½éœ€æ±‚ã€ç»™å‡ºæ–¹æ¡ˆé€‰é¡¹åŠä¼˜ç¼ºç‚¹åˆ†æï¼›å¬å¼€è¯„å®¡ä¼šï¼Œæ”¶é›†æ„è§åæ›´æ–°ï¼›æ˜ç¡®å†³ç­–è®°å½•ä¸è½åœ°è®¡åˆ’ã€‚ â€œå¦‚ä½•å¤„ç†ç´§æ€¥æ•…éšœï¼Ÿâ€\nå›ç­”ï¼šç´§æ€¥å“åº”æµç¨‹ï¼šå¿«é€Ÿå®šä½ã€åˆ†å·¥åä½œã€å›æ»šæˆ–é™çº§æ–¹æ¡ˆã€äº‹åå¤ç›˜ï¼›ç¼–å†™ Runbookï¼›å»ºç«‹å€¼ç­ä¸å‘Šè­¦ç³»ç»Ÿã€‚ å››ã€ç¤ºèŒƒå›ç­”æ¨¡æ¿ä¸å‡†å¤‡å»ºè®®\r#\ré’ˆå¯¹æŠ€æœ¯æ·±æŒ–é—®é¢˜ï¼š\nå…ˆç®€è¦å›ç­”æ ¸å¿ƒç»“è®ºï¼Œå†åˆ†å±‚å±•å¼€ï¼šè®¾è®¡æ€è·¯ â†’ å…³é”®æŠ€æœ¯ç‚¹ â†’ å®ç°ç»†èŠ‚ â†’ é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³åŠæ³• â†’ ç»“æœåŠæ•°æ®æ”¯æ’‘ â†’ ç»éªŒæ•™è®­ã€‚ å¦‚è°ˆæ¶æ„ï¼Œæœ€å¥½ç”»å›¾ï¼ˆåœ¨çº¿é¢è¯•å¯ç”¨ç™½æ¿å·¥å…·ï¼Œæœ¬åœ°é¢è¯•å¯ç°åœºç”»ï¼‰ï¼Œçªå‡ºç»„ä»¶å’Œæ•°æ®æµã€å¤±è´¥åœºæ™¯å¤„ç†ã€‚ å¦‚è°ˆæ€§èƒ½ä¼˜åŒ–ï¼Œæ˜ç¡®ç“¶é¢ˆå®šä½æ–¹æ³•ï¼ˆç›‘æ§æŒ‡æ ‡ã€æ—¥å¿—ã€å‹æµ‹ï¼‰ï¼Œç„¶åä¼˜åŒ–æ–¹æ¡ˆï¼Œæœ€åéªŒè¯æ•ˆæœã€‚ å¦‚è°ˆå®‰å…¨ä¸åˆè§„ï¼Œè¯´æ˜è§„èŒƒä¾æ®ï¼ˆå…¬å¸/è¡Œä¸šæ ‡å‡†ï¼‰ã€è½åœ°ç»†èŠ‚ï¼ˆåŠ å¯†ã€å®¡è®¡ã€æƒé™ï¼‰ã€éªŒè¯æ–¹å¼ï¼ˆæµ‹è¯•ã€å®¡è®¡æµç¨‹ï¼‰ã€‚ å¦‚è°ˆå¾®æœåŠ¡æ‹†åˆ†æˆ–é‡æ„ï¼Œé‡ç‚¹åœ¨è¯„ä¼°ã€æ¸è¿›å¼æ‹†åˆ†ã€ä¿è¯ç¨³å®šå’Œå…¼å®¹æ€§ã€å›æ»šæ–¹æ¡ˆã€å›¢é˜Ÿåä½œã€‚ å¦‚è°ˆ CI/CDï¼Œå±•ç¤ºæµç¨‹è‡ªåŠ¨åŒ–ç¨‹åº¦ã€å…³é”®ç¯èŠ‚å¦‚ä½•ä¿è¯è´¨é‡ã€å¦‚ä½•ç¼©çŸ­æ—¶é—´ã€å¦‚ä½•åº”å¯¹é¢‘ç¹å‘å¸ƒã€‚ é’ˆå¯¹â€œä¸ºä»€ä¹ˆé€‰ X æŠ€æœ¯â€ï¼š\nç®€è¿°èƒŒæ™¯å’Œéœ€æ±‚ï¼Œå†æ¯”è¾ƒä¸åŒæ–¹æ¡ˆä¼˜ç¼ºç‚¹ï¼Œæœ€åè¯´æ˜ä¸ºä½•å½“å‰é€‰å‹æœ€åˆé€‚ï¼Œå¹¶æåˆ°æœªæ¥è‹¥å¤§é‡å˜åŒ–ä¼šå¦‚ä½•è¯„ä¼°æ–°æŠ€æœ¯ã€‚ é’ˆå¯¹é‡åŒ–æŒ‡æ ‡ï¼š\næå‰å‡†å¤‡å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°å­—ï¼›è¯´æ˜åº¦é‡æ–¹å¼å’Œç›‘æ§å·¥å…·æ¥æºï¼›åŒºåˆ†ä¸šåŠ¡æŒ‡æ ‡ vs æŠ€æœ¯æŒ‡æ ‡ï¼›å±•ç¤ºå› æœå…³ç³»ï¼ˆå¦‚ä¼˜åŒ–æªæ–½â†’æŒ‡æ ‡æå‡ï¼‰ã€‚ è¡Œä¸ºä¸åä½œé—®é¢˜ï¼š\nä½¿ç”¨ STAR æ–¹æ³•ï¼šSituationï¼ˆèƒŒæ™¯ï¼‰ã€Taskï¼ˆä»»åŠ¡ï¼‰ã€Actionï¼ˆè¡ŒåŠ¨ï¼‰ã€Resultï¼ˆç»“æœï¼‰ï¼›çªå‡ºè‡ªå·±åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ä¸è´¡çŒ®ã€å­¦åˆ°çš„ç»éªŒã€‚ é‡åˆ°ä¸ç†Ÿæ‚‰é¢†åŸŸæ—¶çš„å›ç­”ï¼š\nè¯šå®æ‰¿è®¤ï¼Œä½†ç»™å‡ºå¿«é€Ÿå­¦ä¹ æ€è·¯ï¼šå¦‚æ›¾å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹æ–°æŠ€æœ¯ï¼›å¦‚ä½•é€šè¿‡é˜…è¯»æ–‡æ¡£ã€PoCã€å°è§„æ¨¡å®éªŒéªŒè¯ï¼›å¦‚ä½•å€ŸåŠ©å›¢é˜Ÿèµ„æºã€‚ å‡†å¤‡ç¤ºä¾‹ï¼š\né’ˆå¯¹ä¸Šè¿°å„é¡¹ï¼Œå‡†å¤‡ 2-3 ä¸ªä¸ä½ ç»å†æœ€è´´è¿‘çš„å…·ä½“æ¡ˆä¾‹ï¼›å¹¶åœ¨å›ç­”ä¸­ç»“åˆè¿™äº›æ¡ˆä¾‹å±•å¼€ï¼Œæ—¢èƒ½ä½“ç°æ·±åº¦ä¹Ÿæ˜¾å¾—çœŸå®å¯ä¿¡ã€‚ äº”ã€ç¤ºä¾‹é—®ç­”èŠ‚é€‰\r#\rä¸‹é¢ä¸¾å‡ ä¸ªç¤ºä¾‹é—®é¢˜ä¸ç¤ºèŒƒå›ç­”è¦ç‚¹ï¼Œä¾›ä½ è¿›ä¸€æ­¥æ¼”ç»ƒï¼š\nç¤ºä¾‹é—®ï¼šè¯·è¯¦ç»†æè¿°ä½ åœ¨æ±‡ä¸°é¡¹ç›®ä¸­ï¼Œå¦‚ä½•å®ç°æ•°æ®åº“åˆ†ç‰‡å’Œäº‹åŠ¡æ§åˆ¶æ¥æ”¯æ’‘ 5,000+ TPSï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\nèƒŒæ™¯ä¸éœ€æ±‚ï¼šéšç€ä¸šåŠ¡å¢é•¿ï¼Œå•åº“è¾¾ä¸åˆ°æ€§èƒ½è¦æ±‚ï¼Œéœ€è¦æ°´å¹³æ‰©å±•ï¼›TPS ç›®æ ‡å’Œå¹¶å‘ç‰¹å¾ï¼ˆè¯·æ±‚åˆ†å¸ƒã€è¯»å†™æ¯”ä¾‹ï¼‰å¦‚ä½•è¯„ä¼°ï¼› åˆ†ç‰‡æ–¹æ¡ˆï¼šåŸºäºç”¨æˆ· ID hash åˆ†ç‰‡åˆ°å¤šä¸ª MySQL å®ä¾‹ï¼›ä½¿ç”¨ ShardingSphereï¼ˆæˆ–è‡ªç ”ä¸­é—´ä»¶ï¼‰åšè·¯ç”±ï¼› äº‹åŠ¡å¤„ç†ï¼šé¼“åŠ±å•åˆ†ç‰‡äº‹åŠ¡ï¼›å¯¹è·¨åˆ†ç‰‡åœºæ™¯ä½¿ç”¨å¼‚æ­¥è¡¥å¿ï¼›ä¸¾ä¾‹æŸä¸šåŠ¡å¦‚ä½•æ‹†åˆ†æˆæœ¬åœ°äº‹åŠ¡ + æ¶ˆæ¯é©±åŠ¨çš„è¡¥å¿æµç¨‹ï¼› å‹æµ‹ä¸éªŒè¯ï¼šä½¿ç”¨ JMeter æ¨¡æ‹Ÿå¹¶å‘ï¼Œå¯¹åˆ†åº“åçš„æ€§èƒ½è¿›è¡Œå‹æµ‹ï¼›ç›‘æ§æ•°æ®åº“å“åº”æ—¶å»¶ã€è¿æ¥æ± ä½¿ç”¨ç‡ï¼› ä¼˜åŒ–ï¼šç´¢å¼•ä¼˜åŒ–ã€è¿æ¥æ± è°ƒå‚ã€ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼›å¯¹æ…¢æŸ¥è¯¢é‡å†™ï¼› ç»“æœï¼šå‹æµ‹è¾¾åˆ° 5,000 TPSï¼›ç”Ÿäº§éªŒè¯å³°å€¼èƒ½æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼›ç³»ç»Ÿç¨³å®šæ€§å’Œå¯ç”¨æ€§è¾¾æ ‡ï¼› æ•™è®­ï¼šåˆ†ç‰‡åéœ€æ³¨æ„ç›‘æ§å„åˆ†ç‰‡è´Ÿè½½å‡è¡¡ï¼Œé¿å…æ•°æ®å€¾æ–œï¼›æå‰è®¾è®¡æ‰©å®¹æ–¹æ¡ˆã€‚ ç¤ºä¾‹é—®ï¼šåœ¨ Kafka ä¸ Siemens ç³»ç»Ÿé›†æˆæ—¶ï¼Œä½ å¦‚ä½•ç¡®ä¿æ¯«ç§’çº§é›¶æ•°æ®ä¸¢å¤±ï¼Ÿé‡åˆ°è¿‡å“ªäº›æ•…éšœï¼Œä½ å¦‚ä½•å¤„ç†ï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\né›†æˆæ–¹å¼ï¼šæè¿° Siemens ç³»ç»Ÿè¾“å‡ºæœºåˆ¶ï¼Œç”¨é€‚é…å™¨ï¼ˆæˆ– SDKï¼‰è¯»å–æ•°æ®å¹¶åŒæ­¥æ¨é€åˆ° Kafkaï¼› ä¿è¯é›¶ä¸¢å¤±ï¼šKafka ç”Ÿäº§è€…é…ç½® acks=allã€å‰¯æœ¬ \u0026gt;=2ï¼›å¹‚ç­‰ç”Ÿäº§è€…é…ç½®ï¼›ç½‘ç»œæˆ–èŠ‚ç‚¹æ•…éšœæ—¶é‡è¯•é€»è¾‘ï¼›ç›‘æ§ ISR ä¸å‰¯æœ¬åŒæ­¥ï¼› å»¶è¿Ÿä¼˜åŒ–ï¼šåˆç† batch.sizeã€linger.ms è°ƒæ•´ï¼›ç½‘ç»œä¼˜åŒ–ï¼›ç”Ÿäº§è€…çº¿ç¨‹æ¨¡å‹ï¼›æ¶ˆè´¹è€…å¤„ç†èƒ½åŠ›ä¿è¯åŠæ—¶ ackï¼› æ•…éšœåœºæ™¯ï¼šå¦‚æŸæ¬¡ Kafka broker çŸ­æš‚å®•æœºï¼Œå¦‚ä½•é€šè¿‡é‡è¯•å’Œå¤‡ä»½é˜Ÿåˆ—ä¿è¯æ•°æ®ä¸ä¸¢ï¼›å¦‚ä½•é€šè¿‡ç›‘æ§å¿«é€Ÿå‘ç°å¹¶æ¢å¤ï¼› éªŒè¯æ–¹æ³•ï¼šå®šæœŸå¯¹æ¯”æºç³»ç»Ÿå’Œç›®æ ‡æ•°æ®é‡ã€æ ¡éªŒæ‘˜è¦ï¼›ç¾éš¾æ¼”ç»ƒï¼›æ—¥å¿—ä¸ç›‘æ§å‘Šè­¦ï¼› ç»“æœä¸ç»éªŒï¼šå®ç°ç¨³å®šæ¥å…¥ï¼›è‹¥å‡ºç°å»¶è¿Ÿæˆ–ä¸¢å¤±æ€€ç–‘ï¼Œé€šè¿‡ç›‘æ§æŠ¥è­¦å’Œè¡¥å¿æµç¨‹å¿«é€Ÿä¿®å¤ï¼›å­¦åˆ°è¦ä¸ä¸‹æ¸¸æˆ–ä¸Šæ¸¸ç³»ç»Ÿçº¦å®šå¥½é‡è¯•ã€å»é‡ç­–ç•¥ã€‚ ç¤ºä¾‹é—®ï¼šä½ çš„ CI/CD æµæ°´çº¿å¦‚ä½•è®¾è®¡ï¼Œå¦‚ä½•å°†æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\næµæ°´çº¿å„é˜¶æ®µï¼šæ‹‰ä»£ç  â†’ é™æ€æ£€æŸ¥ â†’ å•å…ƒæµ‹è¯• â†’ æ„å»º Docker é•œåƒ â†’ æ¨é•œåƒ â†’ éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ â†’ é›†æˆæµ‹è¯• â†’ éƒ¨ç½²åˆ°ç°åº¦/ç”Ÿäº§ï¼› å¹¶è¡Œä¸ç¼“å­˜ï¼šå¹¶è¡Œè¿è¡Œå¤šä¸ªæ¨¡å—çš„æ„å»º/æµ‹è¯•ï¼›Maven/Gradle ä¾èµ–ç¼“å­˜ï¼›Docker layer ç¼“å­˜ï¼›CI Runner æ± åŒ–ï¼› åˆ†çº§æµ‹è¯•ç­–ç•¥ï¼šæäº¤é˜¶æ®µä¸»è¦è·‘å•å…ƒæµ‹è¯•å’Œå…³é”®é›†æˆæµ‹è¯•ï¼›å…¨é‡å›å½’å¯ä»¥åœ¨åˆå¹¶åæˆ–å¤œé—´ï¼›å‡å°‘é˜»å¡æ—¶é—´ï¼› å¿«é€Ÿåé¦ˆï¼šå¤±è´¥æ—©åœï¼›å¤±è´¥æ—¥å¿—æ¸…æ™°ï¼›æ¨é€æµ‹è¯•ç¯å¢ƒåè‡ªåŠ¨åŒ– Smoke Testï¼› éƒ¨ç½²ä¼˜åŒ–ï¼šé‡‡ç”¨è“ç»¿æˆ–æ»šåŠ¨å‘å¸ƒï¼›æå‰å‡†å¤‡ç¯å¢ƒï¼›è‡ªåŠ¨åŒ–å¥åº·æ£€æŸ¥ï¼›å¿«é€Ÿå›æ»šè„šæœ¬ï¼› åº¦é‡ä¸æ”¹è¿›ï¼šæŒç»­ç›‘æ§å„é˜¶æ®µè€—æ—¶ï¼Œå®šæœŸä¼˜åŒ–ç“¶é¢ˆï¼›å›¢é˜Ÿåä½œä¿è¯æµç¨‹é¡ºç•…ï¼› ç»“æœï¼šå‘å¸ƒé¢‘ç‡ç”±æ¯æ—¥å‡ æ¬¡æå‡è‡³æ¯æ—¥åå‡ æ¬¡ï¼›é”™è¯¯ç‡ä¸‹é™ï¼›å¼€å‘åé¦ˆæ›´åŠæ—¶ï¼› æ³¨æ„äº‹é¡¹ï¼šç°åº¦å‘å¸ƒè¦åšå¥½æµé‡åˆ†é…ï¼›æ•°æ®åº“å˜æ›´è°¨æ…ï¼Œæå‰åšå¥½è¿ç§»è„šæœ¬ï¼›ç‰ˆæœ¬å…¼å®¹æ€§è€ƒè™‘ã€‚ ç¤ºä¾‹é—®ï¼šåœ¨å‰ç«¯ç»´æŠ¤ä¸­ï¼Œå½“ä½ è¦å‡çº§ React æˆ– Angular ç‰ˆæœ¬æ—¶ï¼Œå¦‚ä½•è¯„ä¼°å’Œæ‰§è¡Œï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\nè¯„ä¼°é£é™©ï¼šå…ˆæŸ¥çœ‹ç‰ˆæœ¬å‘å¸ƒè¯´æ˜ã€ç ´åæ€§å˜æ›´åˆ—è¡¨ï¼›ç¡®å®šæ ¸å¿ƒä¾èµ–çš„å…¼å®¹æ€§ï¼›åˆ—å‡ºå—å½±å“ç»„ä»¶ï¼› å‡†å¤‡æµ‹è¯•ï¼šç¼–å†™è‡ªåŠ¨åŒ– UI æµ‹è¯•æˆ–æ‰‹åŠ¨æµ‹è¯•ç”¨ä¾‹ï¼›åœ¨ç‹¬ç«‹åˆ†æ”¯åšå‡çº§éªŒè¯ï¼› åˆ†é˜¶æ®µå‡çº§ï¼šå…ˆå‡çº§ä¾èµ–åº“ï¼Œå†æ”¹ä»£ç ï¼›æˆ–å…ˆåœ¨å­æ¨¡å—å°è¯•ï¼› å¤„ç†ç ´åæ€§å˜æ›´ï¼šæ ¹æ®å®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºå»ºè®®é‡æ„ä»£ç ï¼›ä½¿ç”¨ polyfill æˆ–å…¼å®¹å±‚ï¼› å›é€€æ–¹æ¡ˆï¼šå¦‚éªŒè¯å¤±è´¥å¯å¿«é€Ÿå›é€€ï¼›ç¡®ä¿ç‰ˆæœ¬æ§åˆ¶ä¸ CI/CD æ”¯æŒå›æ»šï¼› ç»“æœï¼šå‡çº§åæ€§èƒ½æˆ–å®‰å…¨æ”¹è¿›ï¼Œæ–‡æ¡£æ›´æ–°ï¼›è‹¥é‡åˆ°ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹ï¼Œå¦‚ä½•åè°ƒæˆ–æ›¿æ¢ï¼› ç»éªŒï¼šå®šæœŸå…³æ³¨æ¡†æ¶æ¼”è¿›ï¼Œä¿æŒä¾èµ–ä¸è¿‡æœŸå¤ªä¹…ï¼›ç¼–å†™è‰¯å¥½æµ‹è¯•è¦†ç›–é™ä½å‡çº§é£é™©ã€‚ å…­ã€å‡†å¤‡å»ºè®®\r#\ræ¢³ç†ç»†èŠ‚ï¼šé’ˆå¯¹ä»¥ä¸Šæ¯ä¸ªé—®ç­”æ€è·¯ï¼Œç»“åˆä½ çœŸå®çš„å·¥å…·é€‰æ‹©ã€ç‰ˆæœ¬å·ã€å›¢é˜Ÿè§„æ¨¡ã€å…·ä½“æ•°å­—å’Œé‡åˆ°çš„é—®é¢˜ï¼Œå‡†å¤‡æ¸…æ™°ã€ç»“æ„åŒ–çš„å›ç­”è¦ç‚¹ã€‚ æ¼”ç»ƒè¡¨è¾¾ï¼šç”¨ç™½æ¿/çº¸æˆ–åœ¨çº¿å·¥å…·ç”»æ¶æ„å›¾å¹¶å£å¤´æ¼”ç»ƒæè¿°ï¼›ç”¨ STAR æ¨¡å‹ç»ƒä¹ è¡Œä¸ºé—®é¢˜ï¼›æ¨¡æ‹Ÿé¢è¯•æ—¶è‡ªé—®è‡ªç­”æˆ–ä¸åŒäº‹æ¼”ç»ƒã€‚ æ•°æ®å‡†å¤‡ï¼šæ•´ç†å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°æ®æŒ‡æ ‡ï¼ˆå¦‚å‹æµ‹ç»“æœã€ç›‘æ§æ•°æ®ã€å‘å¸ƒæ—¶é—´é¢‘ç‡ã€æ•…éšœå¤„ç†æ—¶é—´ç­‰ï¼‰ï¼Œä»¥å¤‡é¢è¯•æ—¶å¼•ç”¨ã€‚ ææ–™æ”¯æŒï¼šå¯å‡†å¤‡ä¸€ä»½ç®€çŸ­çš„æŠ€æœ¯è®¾è®¡ç¤ºä¾‹ï¼ˆå¦‚æ•°æ®åº“åˆ†ç‰‡æ–¹æ¡ˆæ–‡æ¡£ç‰‡æ®µã€CI/CD æµç¨‹å›¾ã€ç›‘æ§ Dashboard æˆªå›¾ç­‰ï¼‰ï¼Œé¢è¯•æ—¶è§†æƒ…å†µåˆ†äº«ï¼ˆçº¿ä¸Šå¯é€šè¿‡å±å¹•å…±äº«ï¼‰ã€‚ å…³æ³¨å²—ä½åŒ¹é…ï¼šé’ˆå¯¹â€œå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘â€ï¼Œåœ¨å›ç­”ä¸­å¯æœ‰æ„èå…¥ä½ åœ¨ä¸Šè¿°é¡¹ç›®ç»éªŒä¸­å¯è¿ç§»çš„èƒ½åŠ›ï¼Œå¦‚é«˜å¹¶å‘æ¶æ„ã€ç›‘æ§ä¸æ•°æ®å¹³å°ã€å¼‚æ­¥è§£è€¦ã€å¾®æœåŠ¡æ²»ç†ã€CI/CD ç»éªŒï¼Œéƒ½èƒ½å¸®åŠ©å¿«é€Ÿè½åœ°æ–°æ–¹å‘ï¼›å¦‚æœä½ æœ‰ AI/è¯­éŸ³æˆ–å¿«é€Ÿå­¦ä¹ æ–°é¢†åŸŸçš„ç»éªŒï¼Œå¯å¼ºè°ƒå­¦ä¹ æ–¹æ³•å’Œè½åœ°æ€è·¯ã€‚ å‡†å¤‡æé—®ï¼šé’ˆå¯¹ä½ è¿‡å¾€ç»éªŒä¸è¯¥å²—ä½çš„æŠ€æœ¯æ ˆç»“åˆï¼Œæå‡ºæœ‰æ·±åº¦çš„é—®é¢˜ï¼Œå¦‚â€œåœ¨å¤§æ¨¡å‹ç”µè¯åœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¯„ä¼°å’Œæ‰©å±•å¾®æœåŠ¡å¹³å°ä»¥æ”¯æŒå®æ—¶è¯­éŸ³æµé‡ï¼Ÿâ€ï¼Œâ€œå›¢é˜Ÿè¿‡å»åœ¨ CI/CD æˆ–ç›‘æ§å¹³å°ä¸Šé‡åˆ°å“ªäº›ç‰¹æ®ŠæŒ‘æˆ˜ï¼Ÿâ€ï¼Œâ€œé“¶è¡Œé¡¹ç›®çš„å®‰å…¨åˆè§„å®è·µæœ‰ä»€ä¹ˆå¯å€Ÿé‰´åˆ°ç”µè¯ç³»ç»Ÿå®‰å…¨ä¸­ï¼Ÿâ€ã€‚ æ€»ç»“\r#\rå¯¹æ¯æ¡ç®€å†ä¸­çš„æŠ€æœ¯æˆ–æˆå°±ï¼Œé¢è¯•å®˜ä¼šæ·±æŒ–â€œä¸ºä»€ä¹ˆè¿™ä¹ˆåšâ€â€œæ€ä¹ˆåšçš„â€â€œæ•ˆæœå¦‚ä½•â€â€œé‡åˆ°å“ªäº›é—®é¢˜â€â€œå¦‚ä½•è§£å†³â€çš„ç»†èŠ‚ã€‚ å›ç­”è¦ç»“æ„åŒ–ï¼šå…ˆèƒŒæ™¯ä¸ç›®æ ‡ï¼Œå†æ–¹æ¡ˆè®¾è®¡ã€å®ç°ç»†èŠ‚ã€é‡åˆ°æŒ‘æˆ˜åŠè§£å†³ã€æœ€ç»ˆæ•ˆæœä¸é‡åŒ–æŒ‡æ ‡ã€ç»éªŒæ•™è®­ã€‚ å‡†å¤‡å¥½å…·ä½“æ•°å­—ã€å·¥å…·/ç‰ˆæœ¬ã€å›¢é˜Ÿè§’è‰²ã€æ—¶é—´èŠ‚ç‚¹ç­‰ç»†èŠ‚ï¼Œä½¿å›ç­”çœŸå®å¯ä¿¡ã€‚ å¤šæ¼”ç»ƒã€ç»“åˆâ€œå¤§æ¨¡å‹ç”µè¯åº”ç”¨â€æ–¹å‘æ€è€ƒï¼Œç”¨è¿‡å¾€ç»éªŒå±•ç°è¿ç§»èƒ½åŠ›ä¸å¿«é€Ÿå­¦ä¹ èƒ½åŠ›ã€‚ è¡Œä¸ºä¸åä½œæ–¹é¢ï¼Œç”¨ STAR æ¨¡å‹ï¼Œçªå‡ºæ²Ÿé€šã€å¸¦é¢†ã€å†²çªè§£å†³ã€å¿«é€Ÿå“åº”ç­‰è½¯æŠ€èƒ½ã€‚ å¸Œæœ›è¿™äº›é—®é¢˜æ¸…å•å’Œå›ç­”æ€è·¯èƒ½å¸®åŠ©ä½ å…¨é¢å‡†å¤‡ã€‚å¦‚æœéœ€è¦é’ˆå¯¹æŸä¸ªé—®é¢˜æ·±å…¥æ¨¡æ‹Ÿæˆ–æ’°å†™æ›´è¯¦ç»†çš„å›ç­”ç¤ºä¾‹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ç¥é¢è¯•é¡ºåˆ©ï¼\n"},{"id":31,"href":"/docs/hidden/fangxiang/","title":"ç¾å›¢æ–¹å‘","section":"éšè—","content":"ä»¥ä¸‹å†…å®¹åˆ†ä¸ºè‹¥å¹²éƒ¨åˆ†ï¼Œå¸®åŠ©ä½ é’ˆå¯¹ç¾å›¢â€œJAVAé«˜çº§å¼€å‘å·¥ç¨‹å¸ˆï¼ˆå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘ï¼‰â€å²—ä½è¿›è¡Œå……åˆ†å‡†å¤‡ï¼ŒåŒ…æ‹¬èƒŒæ™¯è°ƒç ”ã€æŠ€æœ¯è¦ç‚¹ã€ç³»ç»Ÿè®¾è®¡æ€è·¯ã€å¯èƒ½é¢è¯•é¢˜åŠå›ç­”æ€è·¯ã€è½¯æŠ€èƒ½ä¸å›¢é˜Ÿåä½œç­‰ã€‚æ‰€æœ‰è§‚ç‚¹å°½é‡ç»“åˆå…¬å¼€èµ„æ–™ï¼Œå¹¶åœ¨å…³é”®é™ˆè¿°åæä¾›å¼•ç”¨ã€‚\nä¸€ã€å…¬å¸ä¸ä¸šåŠ¡èƒŒæ™¯è°ƒç ”\r#\rç¾å›¢AIæˆ˜ç•¥åŠå¤§æ¨¡å‹èƒ½åŠ› ç¾å›¢è¿‘å¹´æ¥åœ¨AIé¢†åŸŸæŒç»­åŠ ç ï¼Œè‡ªç ”å¤§æ¨¡å‹â€œé¾™çŒ«â€ï¼Œå¹¶åœ¨å†…éƒ¨æé«˜å¼€å‘æ•ˆç‡ä¸å®¢æœæ•ˆç‡ï¼Œå¦‚è´¢æŠ¥ç”µè¯ä¼šæåˆ°â€œAIå®¢æœæ•ˆç‡æå‡è¶…20%â€å’Œâ€œè®¡åˆ’æ¨å‡ºè¦†ç›–æ‰€æœ‰æœåŠ¡çš„AIåŠ©æ‰‹â€ (\rwallstreetcn.com, letsclouds.com)ã€‚\né¢è¯•ä¸­å¯ä»¥æåˆ°ï¼šå¯¹å¤§æ¨¡å‹åœ¨å®¢æœã€ç”µè¯åº”ç”¨åœºæ™¯çš„æ„ä¹‰ã€æœ‰ä½•æŠ€æœ¯æŒ‘æˆ˜ã€ä»¥åŠå¦‚ä½•ä¸ä¸šåŠ¡ç»“åˆã€‚ å¯å…³æ³¨ç¾å›¢AIåº”ç”¨çš„å¤šå±‚æ¬¡ï¼šåŸºç¡€è®¾æ–½ã€äº§å“ä¸­çš„AIã€å·¥ä½œä¸­çš„AIä¸‰å±‚(\rwallstreetcn.com)ã€‚ ç¾å›¢ç”µè¯/è¯­éŸ³äº¤äº’ç°çŠ¶\nç¾å›¢å·²æœ‰æ™ºèƒ½è¯­éŸ³æœåŠ¡å®è·µï¼Œå¦‚é€šè¿‡ MRCP åè®®ä¸ FreeSWITCH å¯¹æ¥ï¼Œå®ç°å®æ—¶ ASR/TTS è½¬æ¢ï¼Œç”¨äºå‘¼å«ä¸­å¿ƒä¸šåŠ¡(\rtech.meituan.com)ã€‚ ä¹Ÿæœ‰æ™ºèƒ½å¤–å‘¼æœºå™¨äººåœ¨å‚¬å•ã€ç¡®è®¤ç­‰åœºæ™¯çš„å®è·µï¼Œå¹¶æœ‰å®Œæ•´çš„æ„å›¾è®­ç»ƒä¸ä¼˜åŒ–æµç¨‹(\rblog.csdn.net)ã€‚ å¯åœ¨é¢è¯•ä¸­å±•ç¤ºä½ å¯¹ç”µè¯äº¤äº’ç³»ç»Ÿï¼ˆå‘¼å«ä¸­å¿ƒæ¥å…¥ã€ASR/TTSã€æ„å›¾è¯†åˆ«ã€å¯¹è¯ç®¡ç†ã€æœºå™¨äººå¤–å‘¼/å‘¼å…¥æµç¨‹ï¼‰çš„ç†è§£å’Œæ€è€ƒã€‚ ä¸šåŠ¡ä»·å€¼ä¸ç›®æ ‡\nå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘ï¼Œæ ¸å¿ƒæ˜¯æå‡ç”¨æˆ·ä½“éªŒã€é™ä½äººåŠ›æˆæœ¬ã€æé«˜å‘¼å«è´¨é‡å’Œè½¬åŒ–ç‡ï¼› éœ€è¦å…¼é¡¾é«˜å¯ç”¨ã€é«˜å¹¶å‘ã€å®æ—¶æ€§ã€ç¨³å®šæ€§ã€å®‰å…¨åˆè§„ï¼ˆç”¨æˆ·éšç§ã€è¯­éŸ³æ•°æ®å®‰å…¨ç­‰ï¼‰ï¼› æ•°æ®èƒ½åŠ›: å¤§é‡é€šè¯ã€æ„å›¾ã€å¯¹è¯ç»“æœæ•°æ®ï¼Œéœ€è¦æ„å»ºæ•°æ®å¤§ç›˜ã€ç›‘æ§ã€æŒ‡æ ‡è¯„ä¼°ä¸ä¼˜åŒ–é—­ç¯ã€‚ è·¨å›¢é˜Ÿåˆä½œ: éœ€ä¸é£æ§ã€è·¯ç”±ã€ç”¨æˆ·åˆ†å±‚ç­‰å›¢é˜Ÿå¯¹æ¥ï¼Œä¸ºç”µè¯å†³ç­–æä¾›èƒ½åŠ›æ”¯æŒï¼Œéœ€ç†è§£ä¸šåŠ¡éœ€æ±‚ã€æ•°æ®æµåŠè”åŠ¨æ–¹å¼ã€‚ äºŒã€æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹ä¸èƒ½åŠ›å‡†å¤‡\r#\r1. åˆ†å¸ƒå¼ç³»ç»Ÿä¸é«˜å¹¶å‘æ¶æ„\r#\ré«˜å¯ç”¨ä¸å¯æ‰©å±•è®¾è®¡\nç†Ÿæ‚‰å¸¸è§å¾®æœåŠ¡æ¶æ„æ¨¡å¼ï¼šæœåŠ¡æ‹†åˆ†åŸåˆ™ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€ç†”æ–­é™çº§ã€é™æµã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡æ²»ç†ã€‚ äº†è§£å¦‚ä½•åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹è¿›è¡Œå®¹é‡è§„åˆ’ï¼ˆå¦‚å‘¼å…¥/å¤–å‘¼æ½®æ±æµé‡ï¼‰ã€å¼¹æ€§ä¼¸ç¼©ï¼ˆKubernetesã€å®¹å™¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©å®¹ç­–ç•¥ï¼‰ã€‚ è®¾è®¡æ—¶è€ƒè™‘æ— çŠ¶æ€æœåŠ¡ä¸çŠ¶æ€æŒä¹…åŒ–åˆ†ç¦»ï¼Œåˆ©ç”¨ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦å³°å€¼æµé‡ã€‚ ä¸­é—´ä»¶ä¸å¼‚æ­¥å¤„ç†\nç†Ÿæ‚‰ Redisï¼ˆç¼“å­˜ã€åˆ†å¸ƒå¼é”ï¼‰ã€Kafkaï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€æµå¼å¤„ç†ï¼‰ã€ZooKeeperï¼ˆæœåŠ¡æ²»ç†æˆ–å¯æ›¿ä»£æ–¹æ¡ˆå¦‚ etcd/Consulï¼‰ã€RocketMQ ç­‰ã€‚ç†è§£äº‹åŠ¡ã€é”ã€å¹¶å‘å®ç°æœºåˆ¶åŠå…¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„è°ƒä¼˜ã€‚ å¼‚æ­¥æ¶ˆæ¯æ¶æ„ï¼šå¦‚ä½•å¤„ç†å‘¼å«ç»“æœã€ASRå¼‚æ­¥å›è°ƒã€é•¿å°¾é‡è¯•ã€å¤±è´¥æ‰“ç‚¹ã€æ­»ä¿¡é˜Ÿåˆ—è®¾è®¡ã€‚ è®¾è®¡â€œå¹‚ç­‰â€åŠå®¹é”™å¤„ç†ï¼Œå¦‚é‡å¤æ¶ˆæ¯ã€éƒ¨åˆ†å¤±è´¥å¦‚ä½•è¡¥å¿ã€‚ æ•°æ®åº“ä¸æ€§èƒ½ä¼˜åŒ–\nMySQLï¼šåˆ†åº“åˆ†è¡¨ç­–ç•¥ã€è¯»å†™åˆ†ç¦»ã€ç´¢å¼•ä¼˜åŒ–ã€æŸ¥è¯¢æ€§èƒ½è°ƒä¼˜ï¼›å¤§è§„æ¨¡è°ƒç”¨ä¸‹çš„è¿æ¥æ± ã€æ…¢æŸ¥è¯¢åˆ†æã€å½’æ¡£ç­–ç•¥ç­‰ã€‚ NoSQLé€‰å‹ï¼šåœ¨éœ€è¦å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¸Šä¸‹æ–‡æˆ–çŸ­æœŸç¼“å­˜æ—¶ï¼Œä½•æ—¶ä½¿ç”¨Redis/Mongo/Cassandraç­‰ï¼›è€ƒè™‘ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€å»¶è¿Ÿã€‚ å¯¹å¤§è§„æ¨¡æ—¥å¿—æˆ–é€šè¯è®°å½•ï¼Œå¯å¼•å…¥åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚HDFS/S3ï¼‰ã€æœç´¢å¼•æ“ï¼ˆå¦‚Elasticsearchï¼‰ä»¥ä¾¿å¿«é€Ÿæ£€ç´¢ä¸åˆ†æã€‚ RPCä¸åºåˆ—åŒ–\nç†Ÿæ‚‰RPCæ¡†æ¶ï¼ˆå¦‚ gRPCã€Thriftã€Dubbo ç­‰ï¼‰ï¼Œç†è§£é€šä¿¡æ¨¡å‹ã€ç½‘ç»œIOï¼ˆNIO/Nettyï¼‰ã€åºåˆ—åŒ–åè®®ï¼ˆProtobufã€JSONã€Thriftåè®®ï¼‰çš„æ€§èƒ½ã€å…¼å®¹æ€§ä¸æ‰©å±•æ€§ã€‚ æœåŠ¡æ²»ç†ã€ç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒåœ¨å¤šç‰ˆæœ¬è¿­ä»£åœºæ™¯ä¸‹çš„æ–¹æ¡ˆã€‚ JVMä¸æ€§èƒ½è°ƒä¼˜\nç†Ÿæ‚‰JVMè°ƒä¼˜æ€è·¯ï¼šGCè°ƒä¼˜ï¼ˆä¸åŒGCç®—æ³•å¯¹å»¶è¿Ÿå’Œååçš„å½±å“ï¼‰ã€å†…å­˜æ³„éœ²åˆ†æã€çº¿ç¨‹æ± ç®¡ç†ã€IOæ¨¡å‹ï¼ˆNIO/AIOï¼‰ã€ç½‘ç»œoffloadç­‰ã€‚ å…³æ³¨å¼‚æ­¥ã€éé˜»å¡IOåœ¨é«˜å¹¶å‘å‘¼å«åœºæ™¯ä¸‹çš„é€‚ç”¨æ€§ï¼šå¦‚å¯¹æ¥ASR/TTSæœåŠ¡æ—¶éœ€å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚ å¤šçº¿ç¨‹ä¸å¹¶å‘\næ·±å…¥ç†è§£Javaå¤šçº¿ç¨‹ã€å¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰ï¼Œçº¿ç¨‹æ± è®¾è®¡ã€é”ä¸æ— é”ç¼–ç¨‹ï¼ˆCASã€åŸå­ç±»ï¼‰ã€å¹¶å‘å®¹å™¨ã€‚ Springåœ¨å¹¶å‘æ§åˆ¶ä¸Šçš„èƒ½åŠ›ï¼Œå¦‚å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œã€@Asyncã€TaskExecutoré…ç½®ã€çº¿ç¨‹éš”ç¦»ç­–ç•¥ã€‚ 2. SpringåŸç†ä¸æ¡†æ¶èƒ½åŠ›\r#\rSpringæ ¸å¿ƒåŸç†\nBeanç”Ÿå‘½å‘¨æœŸã€ä¾èµ–æ³¨å…¥ã€BeanFactory vs ApplicationContextã€BeanPostProcessorã€AOPåŸç†ï¼ˆåŠ¨æ€ä»£ç†ä¸CGLIBå®ç°ï¼‰ã€äº‹åŠ¡ç®¡ç†åŸç†ï¼ˆSpringäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€äº‹åŠ¡ç®¡ç†å™¨çš„å®ç°ï¼‰ã€‚ äº†è§£Spring Bootè‡ªåŠ¨é…ç½®åŸç†ã€å¦‚ä½•å®šåˆ¶æˆ–æ’é™¤è‡ªåŠ¨é…ç½®ã€é…ç½®ä¼˜å…ˆçº§ã€‚ Spring CloudåŠå¾®æœåŠ¡ç”Ÿæ€\nå¦‚æœç¾å›¢å†…éƒ¨ä½¿ç”¨ç›¸å…³å¾®æœåŠ¡æ²»ç†ã€é…ç½®ä¸­å¿ƒã€æœåŠ¡æ³¨å†Œä¸å‘ç°æ–¹æ¡ˆï¼ˆå¦‚åŸºäºNacosã€Zookeeperã€Eurekaç­‰ï¼‰ï¼Œå¯ç®€å•æåŠå¯¹ç±»ä¼¼æœºåˆ¶çš„ç†è§£ä¸å®è·µç»éªŒã€‚ é…ç½®ä¸­å¿ƒã€åˆ†å¸ƒå¼é…ç½®ç®¡ç†ã€å®‰å…¨è®¤è¯ä¸é‰´æƒï¼ˆOAuth2/JWTæˆ–å†…éƒ¨æ–¹æ¡ˆï¼‰ã€é“¾è·¯è¿½è¸ªï¼ˆå¦‚Sleuth/Zipkinæˆ–å…¶ä»–ï¼‰ã€‚ 3. å¤§æ¨¡å‹ä¸AIå¯¹æ¥\r#\rå¤§æ¨¡å‹è°ƒç”¨ä¸å¯¹è¯ç­–ç•¥\nç†Ÿæ‚‰å¸¸è§å¤§æ¨¡å‹APIè°ƒç”¨æ–¹å¼ï¼šåŒæ­¥/å¼‚æ­¥ã€æµå¼è¿”å›ï¼›å¦‚ä½•å¤„ç†ç½‘ç»œè¶…æ—¶ã€é™çº§ç­–ç•¥ã€å¹¶å‘è¯·æ±‚é™æµã€‚ å¯¹è¯ç®¡ç†ï¼šå¦‚ä½•è®¾è®¡å¯¹è¯çŠ¶æ€æœºæˆ–ç­–ç•¥ï¼Œç»“åˆè§„åˆ™ä¸å¤§æ¨¡å‹ç”Ÿæˆç»“æœã€‚å¦‚ä½•å¤„ç†å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆçŸ­æœŸä¸Šä¸‹æ–‡ç¼“å­˜ã€é•¿ä¼šè¯å†å²å­˜å‚¨ä¸æ£€ç´¢ï¼‰ã€‚ Prompt è®¾è®¡ä¸ä¼˜åŒ–ï¼šé’ˆå¯¹ç”µè¯åœºæ™¯çš„æç¤ºè¯ï¼ˆPromptï¼‰ç­–ç•¥ï¼ŒåŒ…æ‹¬å¤šæ¨¡æ€ï¼ˆå¦‚æœæœ‰ä¿¡å·è´¨é‡/ç”¨æˆ·æ ‡ç­¾ç­‰é¢å¤–ä¿¡æ¯ï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´Promptã€å°‘é‡ç¤ºä¾‹å­¦ä¹ ã€æŒ‡ä»¤å¼Promptã€‚ Latencyä¸æˆæœ¬è€ƒè™‘ï¼šç”µè¯å®æ—¶å¯¹è¯å¯¹å»¶è¿Ÿæ•æ„Ÿï¼Œéœ€åœ¨è®¾è®¡ä¸­è€ƒè™‘æœ¬åœ°è½»é‡åŒ–æ¨¡å‹æˆ–å¤šçº§è°ƒç”¨ç­–ç•¥ï¼ˆå…ˆæœ¬åœ°å°æ¨¡å‹å¿«é€Ÿå“åº”ï¼Œå¿…è¦æ—¶å†è°ƒå¤§æ¨¡å‹ï¼‰ï¼Œæˆ–ç¼“å­˜å¸¸è§é—®é¢˜ç­”æ¡ˆã€‚ ASR/TTSé›†æˆ\nä¸ASR/TTSæœåŠ¡é›†æˆçš„å¸¸è§å®è·µï¼šHTTP/gRPCè°ƒç”¨ã€éŸ³é¢‘æµå¤„ç†ï¼ˆPCM/WAVç­‰æ ¼å¼è½¬æ¢ï¼‰ã€å®æ—¶ä¸ç¦»çº¿æ¨¡å¼ã€è¯­éŸ³è´¨é‡æ£€æµ‹ã€å™ªå£°æŠ‘åˆ¶ã€‚ é”™è¯¯å¤„ç†ï¼šASRè¯†åˆ«é”™è¯¯çš„fallbackæ–¹æ¡ˆï¼Œå¦‚ç¡®è®¤ã€é‡é—®æˆ–è½¬äººå·¥ï¼›TTSå‘éŸ³è´¨é‡ç›‘æ§ã€‚ åè®®å±‚ï¼šMRCPåè®®å¦‚ä½•åœ¨ç³»ç»Ÿä¸­è½åœ°ï¼Œå¦‚ä½•ä¿è¯ä¸FreeSWITCHç­‰å‘¼å«ä¸­å¿ƒè®¾å¤‡çš„ç¨³å®šé€šä¿¡(\rtech.meituan.com)ã€‚ æ•°æ®èƒ½åŠ›ä¸ç›‘æ§\næ„å»ºæ•°æ®å¤§ç›˜ï¼šå®šä¹‰å…³é”®æŒ‡æ ‡ï¼ˆå¦‚è¯†åˆ«å‡†ç¡®ç‡ã€å“åº”å»¶è¿Ÿã€å¯¹è¯æˆåŠŸç‡ã€ç”¨æˆ·æ»¡æ„åº¦ã€è½¬äººå·¥ç‡ã€ROIç­‰ï¼‰ï¼Œå¹¶åŸºäºå®æ—¶ä¸ç¦»çº¿æ•°æ®å»ºç«‹ç›‘æ§ä¸æŠ¥è­¦ã€‚ æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ï¼šè°ƒç”¨é“¾åŸ‹ç‚¹ã€æ—¥å¿—ç»“æ„åŒ–ã€æŒ‡æ ‡ä¸ŠæŠ¥ç³»ç»Ÿï¼ˆå¦‚Prometheusã€Elasticsearch+Kibanaã€Grafanaç­‰ï¼‰ã€‚ A/Bæµ‹è¯•ä¸å®éªŒå¹³å°ï¼šå¯¹ä¸åŒå¯¹è¯ç­–ç•¥ã€Promptç‰ˆæœ¬æˆ–æ¨¡å‹ç‰ˆæœ¬è¿›è¡Œå®éªŒåˆ†æï¼Œè¯„ä¼°æ•ˆæœå¹¶è¿­ä»£ã€‚ å®‰å…¨ä¸åˆè§„\nè¯­éŸ³æ•°æ®éšç§ä¿æŠ¤ï¼šåŠ å¯†ä¼ è¾“ä¸å­˜å‚¨ã€è„±æ•å¤„ç†ã€è®¿é—®æ§åˆ¶ã€å®¡è®¡æ—¥å¿—ã€‚ é£æ§å¯¹æ¥ï¼šç”µè¯åº”ç”¨å¸¸ä¼šæ¶‰åŠè¯ˆéª—æ£€æµ‹ã€é£æ§è§„åˆ™ï¼Œå¯¹æ¥é£æ§ç­–ç•¥æ—¶éœ€è€ƒè™‘å®æ—¶å†³ç­–ä¸æ‰¹é‡å†³ç­–æµç¨‹ã€‚ åˆè§„è¦æ±‚ï¼šæ ¹æ®åœ°åŸŸæ³•å¾‹æ³•è§„ï¼ˆå¦‚ä¸­å›½ç›¸å…³è§„å®šï¼‰å¯¹å½•éŸ³ç•™å­˜ã€ç”¨æˆ·éšç§ä¿éšœã€æ•°æ®å®‰å…¨è¦æ±‚ã€‚ 4. å¾®æœåŠ¡é‡æ„ä¸æ¶æ„æ¼”è¿›ç»éªŒ\r#\rä¸­å¤§å‹ç³»ç»Ÿé‡æ„ç»éªŒ\nå¦‚ä½•è¯„ä¼°æ—§ç³»ç»Ÿç—›ç‚¹ï¼ˆæ€§èƒ½ç“¶é¢ˆã€å¯ç»´æŠ¤æ€§å·®ã€å¯æ‰©å±•æ€§ä¸è¶³ç­‰ï¼‰ï¼Œåˆ¶å®šé‡æ„æ–¹æ¡ˆï¼šåˆ†é˜¶æ®µè¿ç§»ã€åŒå†™æˆ–ç°åº¦æ›¿æ¢ã€å›æ»šç­–ç•¥ã€å…¼å®¹æ€§å¤„ç†ã€‚ ä»£ç è´¨é‡ä¸å·¥ç¨‹åŒ–ï¼šæœåŠ¡æ¨¡å—åŒ–ã€å…¬å…±ç»„ä»¶æç‚¼ã€ç»Ÿä¸€SDK/å·¥å…·é“¾ã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å‹æµ‹è„šæœ¬ï¼‰ã€CI/CDæµæ°´çº¿ã€‚ å¯è§‚æµ‹æ€§æå‡ï¼šå…¨é“¾è·¯è¿½è¸ªã€æ—¥å¿—è¿½è¸ªã€æŒ‡æ ‡ç›‘æ§ã€å¯è§†åŒ–å¤§ç›˜ã€‚ åœ¨é¢è¯•ä¸­ï¼Œå‡†å¤‡ä¸€åˆ°ä¸¤ä¸ªä½ ä¸»å¯¼æˆ–å‚ä¸è¿‡çš„é‡æ„æ¡ˆä¾‹ï¼Œè¯´æ˜èƒŒæ™¯ã€æŒ‘æˆ˜ã€è§£å†³æ–¹æ¡ˆã€æ”¶ç›Šã€æ•™è®­ã€‚ 5. å›¢é˜Ÿåˆä½œä¸è·¨å›¢é˜Ÿåä½œ\r#\ræ²Ÿé€šèƒ½åŠ›\nç†è§£ä¸šåŠ¡éœ€æ±‚ï¼šä¸äº§å“ã€è¿è¥ã€ç®—æ³•ã€é£æ§å›¢é˜Ÿç­‰å¤šæ–¹äº¤æµï¼Œå¬æ‡‚ä¸šåŠ¡ç—›ç‚¹å¹¶å°†å…¶è½¬åŒ–ä¸ºæŠ€æœ¯æ–¹æ¡ˆï¼› æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡ï¼šæ’°å†™æ¸…æ™°çš„è®¾è®¡æ–‡æ¡£ï¼Œåšå¥½æŠ€æœ¯è¯„å®¡ï¼Œå¹³è¡¡å¯è¡Œæ€§ã€å¯ç»´æŠ¤æ€§ã€æˆæœ¬ã€é£é™©ï¼› è·¯ç”±ä¸åˆ†å±‚å¯¹æ¥ï¼šä¸è·¯ç”±å›¢é˜Ÿå¯¹æ¥ç”µè¯çº¿è·¯ï¼›ä¸ç”¨æˆ·åˆ†å±‚å›¢é˜Ÿå¯¹æ¥ç”¨æˆ·ç”»åƒã€æ ‡ç­¾ï¼›ä¸é£æ§å›¢é˜Ÿå¯¹æ¥å®æ—¶é£æ§ç­–ç•¥ç­‰ã€‚ é¢†å¯¼ä¸å¸¦é¢†\nä½œä¸ºä¸»Rï¼Œéœ€è¦å¸¦é¢†å°å›¢é˜Ÿå®Œæˆæ ¸å¿ƒèƒ½åŠ›æ¨¡å—ï¼Œåˆ¶å®šè®¡åˆ’ã€è·Ÿè¿›è¿›åº¦ã€æŒ‡å¯¼åŒå­¦ã€é£é™©é¢„åˆ¤ä¸ç®¡æ§ï¼Œç¡®ä¿äº¤ä»˜è´¨é‡ä¸æ—¶é—´ï¼› åŸ¹å…»æ–°äººï¼šå¦‚ä½•å¸®åŠ©æ–°äººå¿«é€Ÿä¸Šæ‰‹ã€è®¾è®¡åˆç†çš„æ–‡æ¡£æˆ–ç¤ºä¾‹ï¼›æŠ€æœ¯åˆ†äº«ä¸åŸ¹è®­ã€‚ ä¸‰ã€å¯èƒ½çš„é¢è¯•é¢˜ä¸å›ç­”æ€è·¯\r#\rä»¥ä¸‹ç¤ºä¾‹é¢˜ç›®ä¾›ç»ƒä¹ ï¼Œå¯ç»“åˆè‡ªèº«ç»éªŒå‡†å¤‡å›ç­”ã€‚\n1. åˆ†å¸ƒå¼ç³»ç»Ÿä¸æ¶æ„è®¾è®¡é¢˜\r#\ré¢˜ç›®ç¤ºä¾‹ï¼šè®¾è®¡ä¸€ä¸ªå¤§æ¨¡å‹ç”µè¯å®¢æœç³»ç»Ÿæ¶æ„\néœ€æ±‚è¦ç‚¹ï¼š\næ”¯æŒé«˜å¹¶å‘å‘¼å…¥/å¤–å‘¼ï¼šæ—¥å¸¸é«˜å³°å’Œçªå‘æ´»åŠ¨æ—¶çš„æµé‡æ³¢åŠ¨ï¼› å®æ—¶ASRè¯†åˆ«ä¸TTSåˆæˆï¼›å¤§æ¨¡å‹åœ¨çº¿è°ƒç”¨ï¼Œå“åº”æ—¶å»¶æ§åˆ¶åœ¨å¯æ¥å—çš„èŒƒå›´ï¼› å¯æ’æ‹”æ¨¡å‹ç‰ˆæœ¬ï¼šæ”¯æŒå¤šç§å¤§æ¨¡å‹æˆ–æœ¬åœ°å¤‡é€‰æ–¹æ¡ˆï¼› å¤±è´¥é™çº§ç­–ç•¥ï¼šASR/TTSæˆ–å¤§æ¨¡å‹è°ƒç”¨å¼‚å¸¸æ—¶å¦‚ä½•å¿«é€Ÿé™çº§åˆ°ç®€å•è§„åˆ™æˆ–äººå·¥è½¬æ¥ï¼› æ•°æ®é‡‡é›†ä¸ç›‘æ§ï¼šå®æ—¶æŒ‡æ ‡æ”¶é›†ã€æ—¥å¿—åŸ‹ç‚¹ã€è°ƒç”¨é“¾è¿½è¸ªï¼› å®‰å…¨ä¸åˆè§„ï¼šå½•éŸ³ç•™å­˜ã€éšç§åŠ å¯†ã€é£æ§æ¥å…¥ï¼› å¯æ‰©å±•æ€§ï¼šæ°´å¹³æ‰©å±•æœåŠ¡èŠ‚ç‚¹ã€å¼‚åœ°å¤šæ´»æˆ–å®¹ç¾æ–¹æ¡ˆï¼› è¿ç»´ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²ã€å¥åº·æ£€æŸ¥ã€è“ç»¿/ç°åº¦å‘å¸ƒï¼› å›ç­”æ€è·¯ï¼š\næ•´ä½“æ¶æ„å›¾ï¼šç”»å‡ºå‘¼å«ä¸­å¿ƒè®¾å¤‡åˆ°åç«¯å¾®æœåŠ¡ã€ASR/TTSæœåŠ¡ã€å¤§æ¨¡å‹æœåŠ¡ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“ã€ç›‘æ§ç³»ç»Ÿçš„è°ƒç”¨æµç¨‹ã€‚ å‘¼å«æ¥å…¥å±‚ï¼šFreeSWITCH/Asterisk è´Ÿè´£ç”µä¿¡æ¥å…¥ï¼Œè½¬å‘éŸ³é¢‘æµåˆ°æ™ºèƒ½è¯­éŸ³æœåŠ¡ï¼›ç”¨MRCPåè®®ä¸ASR/TTSå¯¹æ¥ï¼Œç»†èŠ‚å¯æåŠéŸ³é¢‘æ ¼å¼è½¬æ¢ã€è¯­éŸ³æ–­ç‚¹æ£€æµ‹ç­‰(\rtech.meituan.com)ã€‚ æ™ºèƒ½è¯­éŸ³æœåŠ¡å±‚ï¼šå®ç°ASR/TTSè°ƒç”¨å°è£…ã€å¯¹è¯ç®¡ç†ã€ç­–ç•¥å¼•æ“ã€‚å†…éƒ¨å¯ç”¨Spring Bootå¾®æœåŠ¡ï¼Œå¼‚æ­¥æ¡†æ¶å¤„ç†å¹¶å‘ï¼šå¦‚Netty/NIOå¤„ç†å®æ—¶éŸ³é¢‘æµï¼›çº¿ç¨‹æ± éš”ç¦»ä¸åŒè°ƒç”¨ç±»å‹ã€‚ å¤§æ¨¡å‹è°ƒç”¨å±‚ï¼šå¯ä»¥é€šè¿‡ç»Ÿä¸€çš„æ¨¡å‹è°ƒç”¨ç½‘å…³æˆ–SDKï¼Œæ”¯æŒå¼‚æ­¥æµå¼è¿”å›ï¼›éœ€è€ƒè™‘è°ƒç”¨é™æµã€ç†”æ–­ã€é‡è¯•ã€è¶…æ—¶ç­–ç•¥ï¼›å¯è®¾è®¡å¤šçº§è°ƒç”¨ï¼šå…ˆæœ¬åœ°å°æ¨¡å‹å¿«é€Ÿå“åº”ï¼Œå†å¿…è¦æ—¶è°ƒç”¨å¤§æ¨¡å‹ã€‚ çŠ¶æ€ç®¡ç†ä¸å¯¹è¯ç®¡ç†ï¼šè®¾è®¡ä¼šè¯IDä½“ç³»ï¼Œå°†ç”¨æˆ·é€šè¯çŠ¶æ€ä¿å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisï¼‰æˆ–æ•°æ®åº“ï¼›å¯¹è·¨å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†ï¼ŒåŒ…æ‹¬åŠ¨æ€ä¸Šä¸‹æ–‡è£å‰ªã€é•¿æœŸä¿¡æ¯å­˜å‚¨ä¸æ£€ç´¢ç­‰ã€‚ æ•°æ®ä¸ç›‘æ§ï¼šè°ƒç”¨é“¾åŸ‹ç‚¹ï¼ˆå¦‚ä½¿ç”¨Sleuth/Zipkinæˆ–å†…éƒ¨é“¾è·¯è¿½è¸ªï¼‰ï¼Œæ—¥å¿—ç»“æ„åŒ–è¾“å‡ºï¼›å…³é”®æŒ‡æ ‡ä¸ŠæŠ¥åˆ°Prometheus/Grafanaæˆ–ç¾å›¢å†…éƒ¨ç›‘æ§å¹³å°ï¼›æ­å»ºæ•°æ®å¤§ç›˜ï¼Œåˆ†æASRå‡†ç¡®ç‡ã€å“åº”æ—¶å»¶ã€å¯¹è¯æˆåŠŸç‡ç­‰ã€‚ é™çº§ä¸å®¹é”™ï¼šASR/TTSè¶…æ—¶æˆ–è¯†åˆ«ç‡ä½æ—¶ï¼Œé™çº§åˆ°è§„åˆ™é—®ç­”æˆ–æç¤ºè½¬äººå·¥ï¼›å¤§æ¨¡å‹è°ƒç”¨å¤±è´¥æ—¶ï¼Œfallbackç®€å•FAQæˆ–æç¤ºäººå·¥ï¼›æ¶ˆæ¯é˜Ÿåˆ—ç¼“å†²çªå‘æµé‡ï¼Œé˜²æ­¢ä¸‹æ¸¸æœåŠ¡å‹å®ã€‚ å­˜å‚¨ä¸æœç´¢ï¼šå‘¼å«æ—¥å¿—ã€å½•éŸ³æ–‡ä»¶ã€å¯¹è¯è®°å½•ç­‰å­˜å‚¨ç­–ç•¥ï¼šå®æ—¶ä½¿ç”¨Elasticsearchåšæ£€ç´¢åˆ†æï¼›å½’æ¡£åˆ°åˆ†å¸ƒå¼å­˜å‚¨ç”¨äºç¦»çº¿åˆ†æä¸æ¨¡å‹è®­ç»ƒã€‚ å®‰å…¨åˆè§„ï¼šé€šè¯å½•éŸ³åŠ å¯†å­˜å‚¨ã€è®¿é—®æ§åˆ¶ï¼›æ•°æ®è„±æ•ï¼›ååŒé£æ§å›¢é˜Ÿæ¥å…¥å®æ—¶é£æ§å†³ç­–æœåŠ¡ï¼›æ»¡è¶³æ³•è§„è¦æ±‚çš„å½•éŸ³ä¿å­˜æ—¶é•¿ä¸ç”¨æˆ·éšç§ä¿æŠ¤ã€‚ è¿ç»´ä¸è‡ªåŠ¨åŒ–ï¼šä½¿ç”¨Kubernetesæˆ–å®¹å™¨é›†ç¾¤ï¼Œè‡ªåŠ¨ä¼¸ç¼©ï¼›å¥åº·æ£€æŸ¥ä¸æŠ¥è­¦ï¼›CI/CDæµæ°´çº¿æ”¯æŒè‡ªåŠ¨æ„å»ºã€è‡ªåŠ¨æµ‹è¯•ã€è‡ªåŠ¨éƒ¨ç½²ã€è‡ªåŠ¨å›æ»šã€‚ æ‰©å±•æ€§ä¸å¤šæ´»ï¼šè·¨åœ°åŸŸéƒ¨ç½²å¤šæ´»æ¶æ„ï¼Œè§£å†³ç½‘ç»œæ•…éšœæˆ–å•ç‚¹å®•æœºï¼Œä¿è¯é«˜å¯ç”¨ï¼›è¯»å†™åˆ†ç¦»ã€å¤šä¸»æˆ–ä¸»ä»å¤åˆ¶æ•°æ®åº“ï¼›é…ç½®ä¸­å¿ƒå’ŒæœåŠ¡å‘ç°æ”¯æŒå¤šé›†ç¾¤ç¯å¢ƒã€‚ é¢è¯•æ—¶å»ºè®®ï¼šåœ¨å›ç­”è¿‡ç¨‹ä¸­å¯ç”»ç™½æ¿æˆ–åœ¨çº¸ä¸Šå†™ç®€ç•¥å›¾ï¼Œåˆ†å±‚é˜è¿°ã€‚ç»“åˆè‡ªå·±è¿‡å¾€ç»éªŒï¼Œæè¿°å¦‚ä½•è½åœ°ç±»ä¼¼è®¾è®¡æˆ–ä»¥å¾€é‡åˆ°çš„æŒ‘æˆ˜ä¸ä¼˜åŒ–æ–¹æ¡ˆã€‚\n2. æ•°æ®èƒ½åŠ›ä¸ç›‘æ§é¢˜\r#\ré¢˜ç›®ç¤ºä¾‹ï¼šå¦‚ä½•è®¾è®¡ä¸€å¥—æ•°æ®å¤§ç›˜ï¼Œç”¨äºç›‘æ§å¤§æ¨¡å‹ç”µè¯æœåŠ¡ä½“éªŒï¼Ÿ\nå…³é”®æŒ‡æ ‡ï¼šASRè¯†åˆ«ç‡ã€TTSåˆæˆæˆåŠŸç‡ã€LLMå“åº”æ—¶å»¶ã€å¯¹è¯æˆåŠŸç‡ï¼ˆå¦‚ç”¨æˆ·ç»™å‡ºæ»¡æ„å›ç­”æˆ–å®Œæˆé¢„æœŸåŠ¨ä½œï¼‰ã€è½¬äººå·¥ç‡ã€ç”¨æˆ·æŒ‚æ–­ç‡ã€ä¸šåŠ¡è½¬åŒ–ç‡ï¼ˆå¦‚ç”¨æˆ·è§£å†³é—®é¢˜ã€å®Œæˆäº¤æ˜“ï¼‰ã€é”™è¯¯ç‡ã€ç³»ç»Ÿååé‡ã€èµ„æºä½¿ç”¨ç‡ï¼ˆCPU/GPUï¼‰ã€‚ æ•°æ®é‡‡é›†ï¼šåœ¨å„è°ƒç”¨ç‚¹åŸ‹æ—¥å¿—ä¸åŸ‹ç‚¹ï¼›å®æ—¶é‡‡é›†æµå¼æ•°æ®ï¼ˆå¯ç”¨Kafka/Flinkå®æ—¶å¤„ç†ï¼‰ï¼›ç¦»çº¿æ‰¹é‡å¤„ç†ç”¨äºæ›´æ·±å…¥åˆ†æå’Œæ¨¡å‹è®­ç»ƒã€‚ å¤§ç›˜å®ç°ï¼šå‰ç«¯å¯è§†åŒ–ï¼ˆGrafanaã€å†…éƒ¨BIå·¥å…·ï¼‰ï¼Œåç«¯å­˜å‚¨ï¼šæ—¶åºæ•°æ®åº“ï¼ˆPrometheusã€InfluxDBç­‰ï¼‰+æ—¥å¿—ç´¢å¼•ï¼ˆElasticSearchï¼‰ï¼›å®æ—¶æŠ¥è­¦ï¼šé˜ˆå€¼æŠ¥è­¦ä¸å¼‚å¸¸æ£€æµ‹ï¼ˆåŸºäºç»Ÿè®¡æˆ–MLçš„å¼‚å¸¸æ£€æµ‹ï¼‰ã€‚ A/Bæµ‹è¯•ä¸å®éªŒå¹³å°ï¼šå¯¹æ–°Promptã€æ–°æ¨¡å‹ç‰ˆæœ¬æˆ–ç­–ç•¥æ–¹æ¡ˆè¿›è¡Œå®éªŒï¼Œæ”¶é›†ä¸åŒæµé‡ç»„çš„æ•°æ®ï¼Œè¯„ä¼°æ•ˆæœï¼Œåšæ˜¾è‘—æ€§åˆ†æã€‚ åé¦ˆä¸è¿­ä»£ï¼šç»“åˆå¤§ç›˜æŒ‡æ ‡ä¸æ—¥å¿—åˆ†æç»“æœï¼ŒæŒç»­ä¼˜åŒ–å¯¹è¯ç­–ç•¥æˆ–æ¨¡å‹è°ƒç”¨é€»è¾‘ï¼›ä¸ç®—æ³•å›¢é˜Ÿåˆä½œï¼Œç”¨æ”¶é›†åˆ°çš„æ•°æ®è®­ç»ƒæˆ–å¾®è°ƒæ¨¡å‹ã€‚ 3. ç¼–ç ä¸ç®—æ³•é¢˜\r#\rå¹¶å‘ç¼–ç¨‹ï¼šå¯èƒ½è€ƒå¯Ÿä½¿ç”¨ Java å¹¶å‘åŒ…å®ç°é«˜æ€§èƒ½ã€å¤šçº¿ç¨‹åœºæ™¯ä¸‹çš„ä»»åŠ¡è°ƒåº¦æˆ–é™æµã€‚ä¾‹å¦‚ï¼šç”¨ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•å®ç°åˆ†å¸ƒå¼é™æµï¼›ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€ä¼˜å…ˆé˜Ÿåˆ—å®ç°å¸¦ä¼˜å…ˆçº§çš„ä»»åŠ¡è°ƒåº¦ã€‚ ç®—æ³•é¢˜ï¼šè™½ç„¶åæ¶æ„è§’è‰²ï¼Œä»å¯èƒ½è¯¢é—®å¸¸è§ç®—æ³•é¢˜ï¼ˆå¦‚æŸ¥æ‰¾ã€æ’åºã€å›¾ç®—æ³•ã€åŠ¨æ€è§„åˆ’ï¼‰ï¼Œç›®çš„æ˜¯è€ƒå¯Ÿæ€è·¯ä¸ä»£ç èƒ½åŠ›ã€‚å»ºè®®å¤ä¹ å¸¸è§é¢˜ç›®å¹¶ç†Ÿç»ƒå†™å‡ºæ¸…æ™°å¯è¿è¡Œä»£ç ã€‚ æ•°æ®åº“ç›¸å…³ï¼šSQLæŸ¥è¯¢ä¼˜åŒ–ã€äº‹åŠ¡éš”ç¦»çº§åˆ«åŠå¹¶å‘æ§åˆ¶ï¼Œå¯èƒ½ä»¥é¢˜ç›®å½¢å¼å‡ºç°ã€‚ åºåˆ—åŒ–ä¸ç½‘ç»œï¼šå¦‚è®¾è®¡è‡ªå®šä¹‰åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–é€»è¾‘æ—¶å¦‚ä½•è€ƒè™‘å…¼å®¹æ€§ä¸æ€§èƒ½ã€å¦‚ä½•é˜²æ­¢ååºåˆ—åŒ–æ¼æ´ã€‚ Springåº”ç”¨ï¼šå¯èƒ½è¦æ±‚ç°åœºé˜…è¯»æˆ–åˆ†æä¸€æ®µSpring Booté¡¹ç›®ä»£ç ï¼Œå®šä½bugæˆ–ç†è§£é…ç½®ï¼Œæˆ–è§£é‡ŠSpring AOPã€äº‹åŠ¡ã€IOCåŸç†ã€‚ 4. æ¡ˆä¾‹ä¸ç»éªŒåˆ†äº«é¢˜\r#\ré¡¹ç›®ç»å†ï¼šå‡†å¤‡2-3ä¸ªä¸ä½ å²—ä½é«˜åº¦ç›¸å…³çš„é¡¹ç›®æ¡ˆä¾‹ï¼Œéœ€çªå‡ºï¼š\nä½ åœ¨é¡¹ç›®ä¸­æ‰¿æ‹…çš„è§’è‰²ï¼ˆä¾‹å¦‚ä¸»Ræˆ–æ ¸å¿ƒå¼€å‘è€…ï¼‰ï¼Œå…·ä½“å·¥ä½œå†…å®¹ï¼› æŠ€æœ¯ç—›ç‚¹ä¸æŒ‘æˆ˜ï¼šå¦‚å¦‚ä½•ä¼˜åŒ–æŸä¸ªé«˜å¹¶å‘æœåŠ¡ï¼›å¦‚ä½•è¿›è¡Œç³»ç»Ÿé‡æ„ï¼›å¦‚ä½•è®¾è®¡ç›‘æ§ç³»ç»Ÿï¼›å¦‚ä½•é›†æˆASR/TTSæˆ–å¤–éƒ¨æœåŠ¡ï¼›å¦‚ä½•ä¸AIæˆ–å¤§æ¨¡å‹é›†æˆï¼› è§£å†³æ–¹æ¡ˆï¼šæŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€å®ç°ç»†èŠ‚ã€æµ‹è¯•ä¸éªŒè¯æ–¹æ³•ï¼› æˆæœä¸é‡åŒ–æŒ‡æ ‡ï¼šå¦‚æ€§èƒ½æå‡å¤šå°‘ï¼›ç³»ç»Ÿå¯ç”¨æ€§æå‡ï¼›æˆæœ¬é™ä½ï¼›ä¸šåŠ¡è½¬åŒ–ç‡æå‡ï¼›ç”¨æˆ·æ»¡æ„åº¦æå‡ç­‰ï¼› ç»éªŒæ•™è®­ï¼šåœ¨è¿‡ç¨‹ä¸­å­¦åˆ°çš„æŠ€æœ¯æˆ–å›¢é˜Ÿåä½œç»éªŒã€é‡åˆ°çš„é—®é¢˜å’Œé¿å…æ–¹æ¡ˆã€‚ å¤±è´¥æˆ–é‡åˆ°çš„éš¾é¢˜ï¼šå¦‚æŸæ¬¡çº¿ä¸Šæ•…éšœå®šä½ä¸æ¢å¤ã€æ€§èƒ½ç“¶é¢ˆæ’æŸ¥ã€ä¾èµ–æœåŠ¡ä¸ç¨³å®šå¦‚ä½•åº”å¯¹ï¼Œå¯¹è¿™äº›æ¡ˆä¾‹è¦æ¸…æ™°æè¿°è¿‡ç¨‹ä¸æ”¶è·ã€‚\n5. é¢†åŸŸçŸ¥è¯†é¢˜\r#\rç”µè¯è¯­éŸ³äº¤äº’åŸºç¡€ï¼šå¯¹å‘¼å«ä¸­å¿ƒå¸¸è§åè®®ä¸æ¶æ„ï¼ˆSIPã€MRCPã€FreeSWITCH/Asteriskï¼‰æœ‰åŸºæœ¬äº†è§£ï¼›ASR/TTSçš„å·¥ä½œæµç¨‹ï¼›è¯­éŸ³ä¿¡å·å¤„ç†åŸºç¡€ï¼ˆå¦‚å¦‚ä½•å¤„ç†é™éŸ³ã€å™ªå£°ï¼‰ï¼›æ„å›¾è¯†åˆ«å’Œå¯¹è¯ç®¡ç†å¸¸è§æ–¹æ³•ï¼ˆåŸºäºè§„åˆ™ vs åŸºäºML/å¤§æ¨¡å‹ï¼‰ï¼›å›è½ä¸å¤šæ¨¡æ€ä¿¡æ¯ï¼ˆç”¨æˆ·æ ‡ç­¾ã€å†å²äº¤äº’æ•°æ®ï¼‰çš„ç»“åˆã€‚\nå‘¼å«ä¸­å¿ƒç³»ç»Ÿï¼šå¤–å‘¼/å‘¼å…¥æµç¨‹ã€è¿è¥å•†çº¿è·¯å¯¹æ¥ã€IVRæµç¨‹ï¼›å¸¸è§å‘¼å«è·¯ç”±ã€æ’é˜Ÿç­–ç•¥ï¼›å®æ—¶ç›‘æ§å‘¼å«è´¨é‡ã€‚\nå¤§æ¨¡å‹åœ¨ç”µè¯åœºæ™¯çš„æŒ‘æˆ˜ï¼š\nå»¶è¿Ÿæ•æ„Ÿï¼šè¯­éŸ³äº¤äº’ç”¨æˆ·å¯¹å“åº”æ—¶å»¶è¾ƒæ•æ„Ÿï¼Œéœ€è¦å®æ—¶æˆ–è¿‘å®æ—¶ï¼› è´¨é‡æ§åˆ¶ï¼šå¤§æ¨¡å‹ç”Ÿæˆå¯èƒ½å‡ºç°â€œè·‘é¢˜â€æˆ–ä¸å‡†ç¡®ï¼Œåº”ç»“åˆè§„åˆ™æˆ–çŸ¥è¯†åº“è¿›è¡Œè¿‡æ»¤ä¸æ ¡æ­£ï¼› ä¸Šä¸‹æ–‡ç®¡ç†ï¼šç”µè¯å¯¹è¯ä¸Šä¸‹æ–‡é•¿åº¦æœ‰é™ï¼Œéœ€è¦åœ¨Promptè®¾è®¡ä¸­æ³¨æ„æˆªæ–­ä¸é‡ç‚¹ä¿ç•™ï¼› èµ„æºæˆæœ¬ï¼šè°ƒç”¨å¤§æ¨¡å‹æˆæœ¬é«˜ï¼Œéœ€è¦åšå¥½è°ƒç”¨é¢‘æ¬¡æ§åˆ¶ã€ç¼“å­˜ã€åŠ¨æ€è°ƒåº¦ï¼› éšç§ä¸åˆè§„ï¼šå¯¹è¯å†…å®¹å¯èƒ½æ¶‰åŠéšç§æˆ–æ•æ„Ÿä¿¡æ¯ï¼Œéœ€è¦è„±æ•å’Œå®‰å…¨å­˜å‚¨ã€‚ 6. ç³»ç»Ÿæ¼”ç»ƒæˆ–ç™½æ¿é¢˜\r#\rè®¾è®¡ç¼“å­˜ç­–ç•¥ï¼šä¾‹å¦‚å¦‚ä½•ç¼“å­˜å¸¸è§é—®ç­”çš„ç»“æœï¼›ç¼“å­˜æ•°æ®å¤±æ•ˆä¸æ›´æ–°ç­–ç•¥ï¼›å¦‚ä½•å¤„ç†åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§ã€‚ è®¾è®¡ä¸€å¥—é™æµç†”æ–­æœºåˆ¶ï¼šç»“åˆHystrixæˆ–è‡ªç ”ï¼Œå¦‚ä½•ç›‘æ§é”™è¯¯ç‡ä¸å»¶è¿Ÿï¼Œè§¦å‘ç†”æ–­ï¼Œæ¢å¤åå¦‚ä½•æ£€æµ‹æ¢å¤æ—¶æœºï¼›åˆ†å¸ƒå¼é™æµå¦‚ä½•å®ç°ï¼ˆå¦‚ä¸€è‡´æ€§å“ˆå¸Œã€æ¼æ¡¶ã€ä»¤ç‰Œæ¡¶ã€Redis+Luaè„šæœ¬ç­‰ï¼‰ã€‚ çº¿ç¨‹æ± è°ƒä¼˜ï¼šå¦‚ä½•æ ¹æ®ä»»åŠ¡ç‰¹æ€§ï¼ˆCPUå¯†é›† vs IOå¯†é›†ï¼‰é€‰å–åˆé€‚çš„çº¿ç¨‹æ± å‚æ•°ï¼Œé˜²æ­¢OOMæˆ–çº¿ç¨‹è¿‡å¤šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢è¿‡é«˜ã€‚ æ•…éšœå¤„ç†ä¸æ¢å¤ï¼šæ¨¡æ‹ŸASRæœåŠ¡å¤§è§„æ¨¡æ•…éšœæ—¶ï¼Œç³»ç»Ÿå¦‚ä½•å¿«é€Ÿé™çº§ã€ç†”æ–­å¹¶åˆ‡æ¢å¤‡ç”¨æ–¹æ¡ˆï¼›å¦‚ä½•è¿›è¡Œç¾å¤‡æ¼”ç»ƒã€‚ ç›‘æ§ä¸å‘Šè­¦æ–¹æ¡ˆè®¾è®¡ï¼šå¦‚ä½•è®¾ç½®é˜ˆå€¼å‘Šè­¦ä¸å¼‚å¸¸æ£€æµ‹å‘Šè­¦ï¼›å¦‚ä½•å®šä¹‰æŠ¥è­¦ç­–ç•¥ä»¥é¿å…å‘Šè­¦é£æš´ï¼›å¦‚ä½•è¿½è¸ªè·¨æœåŠ¡é“¾è·¯ã€‚ å››ã€é¢è¯•å‡†å¤‡ä¸ç­–ç•¥\r#\ræŠ€æœ¯å‡†å¤‡\nåˆ·ä¸€ä¸‹å¹¶å‘ã€å¤šçº¿ç¨‹ç›¸å…³çŸ¥è¯†ç‚¹å’Œå¸¸è§é¢è¯•é¢˜ï¼›å¤ä¹ JVMè°ƒä¼˜è¦ç‚¹ï¼›ç†Ÿæ‚‰SpringåŸç†ï¼›å›é¡¾MySQLä¼˜åŒ–ä¸ä¸­é—´ä»¶ä½¿ç”¨ç»éªŒã€‚ æ·±å…¥æ€è€ƒç”µè¯è¯­éŸ³åœºæ™¯ä¸­çš„ç³»ç»Ÿæ¶æ„ï¼šè¯»å‡ ç¯‡å…¬å¼€æ–‡ç« ï¼ˆå¦‚MRCPå®è·µï¼‰å¹¶æ•´ç†ç¬”è®°(\rtech.meituan.com)ã€‚ äº†è§£å¤§æ¨¡å‹è°ƒç”¨æ¨¡å¼ï¼šåŒæ­¥ã€å¼‚æ­¥ã€æµå¼è¿”å›ã€Promptè®¾è®¡ã€ç¼“å­˜ç­–ç•¥ã€å®¹é”™ã€é™çº§ã€‚ç»“åˆå»¶è¿Ÿæ•æ„Ÿåœºæ™¯æ€è€ƒä¼˜åŒ–æ–¹æ¡ˆã€‚ å‡†å¤‡é¡¹ç›®ç»éªŒï¼šæ¢³ç†è¿‡å¾€é¡¹ç›®ä¸å²—ä½è¦æ±‚çš„å¥‘åˆç‚¹ï¼Œå°¤å…¶åœ¨åˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€æ¶æ„è®¾è®¡ã€ç›‘æ§ã€AIé›†æˆç­‰æ–¹é¢çš„æ¡ˆä¾‹ã€‚ å¦‚æœæ²¡æœ‰ç”µè¯è¯­éŸ³é¡¹ç›®ç»éªŒï¼Œå¯è¯»ä¸€äº›è¡Œä¸šå®è·µæ–‡ç« ï¼Œè‡ªå·±æ„æ€ä¸€ä¸ªç”µè¯æœºå™¨äººç³»ç»Ÿçš„è®¾è®¡æ–¹æ¡ˆï¼Œå¹¶å¯¹æ¯”æ€è€ƒæ”¹è¿›ç‚¹ã€‚ è½¯æŠ€èƒ½å‡†å¤‡\næ²Ÿé€šä¸è¡¨è¾¾ï¼šé¢è¯•ä¸­è¦æ¡ç†æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ï¼Œèƒ½å¤Ÿç”¨ç®€æ´è¯­è¨€æè¿°å¤æ‚æ¶æ„ï¼›å¯¹é—®é¢˜è¾¹ç•Œå®šä¹‰è¦æ˜ç¡®ï¼Œé¿å…æ³›æ³›è€Œè°ˆã€‚ æé—®ç¯èŠ‚ï¼šå‡†å¤‡é’ˆå¯¹å›¢é˜Ÿã€æŠ€æœ¯æ ˆã€å›¢é˜Ÿæ–‡åŒ–ã€é¡¹ç›®ç—›ç‚¹çš„æœ‰æ·±åº¦çš„é—®é¢˜ï¼Œè¡¨ç°å¯¹å²—ä½çš„å…´è¶£å’Œå¯¹ä¸šåŠ¡çš„ç†è§£ã€‚ æ¡ˆä¾‹åˆ†äº«ï¼šç»ƒä¹ ç”¨STARï¼ˆSituation, Task, Action, Resultï¼‰æ¨¡å‹è®²è¿°é¡¹ç›®ç»éªŒï¼Œçªå‡ºä½ å¯¹ä¸šåŠ¡ä»·å€¼çš„å…³æ³¨å’ŒæŠ€æœ¯å†³ç­–èƒŒåçš„æ€è€ƒã€‚ å›¢é˜Ÿåˆä½œï¼šå‡†å¤‡è¯´æ˜ä½ å¦‚ä½•åœ¨è·¨å›¢é˜Ÿåœºæ™¯ä¸­åä½œï¼ˆå¦‚ä¸äº§å“ã€ç®—æ³•ã€è¿ç»´ã€é£æ§å›¢é˜Ÿé…åˆï¼‰ï¼Œå±•ç¤ºåè°ƒèƒ½åŠ›ä¸å½±å“åŠ›ã€‚ å­¦ä¹ èƒ½åŠ›ï¼šå¤§æ¨¡å‹ä¸AIé¢†åŸŸå˜åŒ–å¿«ï¼Œå¯è°ˆå¦‚ä½•æŒç»­å­¦ä¹ æ–°æŠ€æœ¯ï¼ˆé˜…è¯»è®ºæ–‡ã€å†…éƒ¨åˆ†äº«ã€Hackathonç­‰æ–¹å¼ï¼‰ï¼Œä»¥åŠå°†æ–°æŠ€æœ¯åº”ç”¨äºä¸šåŠ¡çš„æ€è·¯ã€‚ é¢è¯•å½¢å¼ä¸æµç¨‹\né€šå¸¸ä¼šæœ‰æŠ€æœ¯é¢ï¼ˆæ¶æ„è®¾è®¡ã€ç¼–ç é¢˜ã€åŸç†é—®ç­”ï¼‰ã€é¡¹ç›®ç»éªŒé¢ã€ä»¥åŠHRé¢æˆ–å›¢é˜Ÿæ–‡åŒ–é¢ã€‚ æå‰å‡†å¤‡ç¯å¢ƒï¼šå¦‚æœçº¿ä¸Šé¢è¯•ï¼Œæ£€æŸ¥ç½‘ç»œã€IDEã€ç™½æ¿å·¥å…·ï¼›å¦‚æœç°åœºé¢è¯•ï¼Œå¸¦å¥½ç¬”è®°æœ¬ã€ç¬”å’Œçº¸ï¼Œæå‰åˆ°è¾¾ï¼Œå¯¹åœºåœ°æœ‰å¿ƒç†é¢„æœŸã€‚ æ¨¡æ‹Ÿé¢è¯•ï¼šä¸æœ‹å‹æˆ–è‡ªå·±è¿›è¡Œæ¨¡æ‹Ÿé—®ç­”ï¼Œç»ƒä¹ æ—¶é—´æŠŠæ§ï¼Œé¿å…å›ç­”è¿‡é•¿æˆ–é—æ¼é‡ç‚¹ã€‚ ç®€å†æ¢³ç†ï¼šç¡®ä¿ç®€å†ä¸­é¡¹ç›®ç»å†ã€æŠ€æœ¯æ ˆä¸å²—ä½è¦æ±‚é«˜åº¦åŒ¹é…ï¼Œçªå‡ºåˆ†å¸ƒå¼ç³»ç»Ÿã€å¹¶å‘ä¼˜åŒ–ã€SpringåŸç†ã€æ•°æ®åº“ä¼˜åŒ–ã€ä¸­é—´ä»¶ç»éªŒï¼Œä»¥åŠAIæˆ–ç›¸å…³æ¢ç´¢ç»éªŒã€‚ å¤§æ¨¡å‹ç”µè¯æ–¹å‘çš„ç‰¹åˆ«å‡†å¤‡\né˜…è¯»å…¬å¼€èµ„æ–™ï¼šäº†è§£è¡Œä¸šç”µè¯æœºå™¨äººå¸¸è§æ–¹æ¡ˆï¼Œå¦‚ASR/TTSå‚å•†ï¼ˆç§‘å¤§è®¯é£ã€è…¾è®¯äº‘è¯­éŸ³ã€é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡ç­‰ï¼‰æ¥å…¥æ¨¡å¼å’Œæ€§èƒ½ç‰¹ç‚¹ï¼›MRCPåè®®å®è·µï¼›æ™ºèƒ½å¤–å‘¼/å‘¼å…¥æœºå™¨äººæµç¨‹ã€‚ æ€è€ƒå¤§æ¨¡å‹åœ¨ç”µè¯åœºæ™¯çš„è½åœ°æŒ‘æˆ˜ï¼šå¦‚ä½•ä¿éšœå®æ—¶æ€§ã€å¦‚ä½•åšPromptè£å‰ªã€å¦‚ä½•ç»“åˆä¸šåŠ¡è§„åˆ™åšå®‰å…¨è¿‡æ»¤ã€å¦‚ä½•é™ä½æˆæœ¬ã€å¦‚ä½•åšç°åº¦å’ŒABæµ‹è¯•ã€‚å¯å‡†å¤‡ä¸€ä¸ªç®€çŸ­PPTæˆ–æ€è·¯æ–‡æ¡£ï¼ˆè‡ªç”¨ï¼‰ï¼Œé¢è¯•æ—¶å¯ç”¨äºæ”¯æ’‘é˜è¿°ã€‚ æŒæ¡å¸¸è§å¤§æ¨¡å‹è°ƒç”¨ç»†èŠ‚ï¼šæµå¼è¿”å›å¤„ç†ã€æ–­æµé‡è¿ã€ä¸Šä¸‹æ–‡è¿ç»­æ€§ã€Tokené¢„ç®—ä¸è®¡è´¹ã€ç¼“å­˜å±‚è®¾è®¡ã€é™çº§ç­–ç•¥ã€‚ å…³æ³¨è¡Œä¸šåŠ¨å‘ï¼šæ¯”å¦‚ç¾å›¢è‡ªç ”å¤§æ¨¡å‹è¿›å±•ã€å†…éƒ¨AIå¹³å°èƒ½åŠ›ã€ç›¸å…³è®ºæ–‡æˆ–Tech Blogæ–‡ç« ã€‚å¯ä»¥åœ¨ç¾å›¢æŠ€æœ¯ç¤¾åŒºæˆ–è¿‘æœŸæŠ€æœ¯åˆ†äº«ä¸­å¯»æ‰¾ä¸ç”µè¯AIç›¸å…³çš„æ–‡ç« ï¼Œæ•´ç†è¦ç‚¹å¹¶æ€è€ƒåœ¨ä½ è®¾è®¡ä¸­çš„åº”ç”¨ã€‚ äº”ã€ç¤ºä¾‹é¢è¯•é—®é¢˜ä¸å›ç­”è¦ç‚¹\r#\rä»¥ä¸‹ç»™å‡ºéƒ¨åˆ†ç¤ºä¾‹é—®é¢˜å’Œæ€è·¯è¦ç‚¹ï¼ˆéå®Œæ•´ç­”æ¡ˆï¼Œä»…ä¾›å‚è€ƒæ€è€ƒï¼‰ï¼š\nè¯·è§£é‡ŠJavaåå°„ä¸ºä½•æ€§èƒ½è¾ƒä½ï¼Ÿèƒ½å¦ä¸¾ä¾‹ä½•æ—¶ç”¨åå°„ï¼Œä½•æ—¶é¿å…ï¼Ÿ\nå…³é”®ç‚¹ï¼šåå°„ç»•è¿‡ç¼–è¯‘æœŸä¼˜åŒ–ã€è¿è¡Œæ—¶æ£€æŸ¥ã€åŒ…è£…/æ‹†ç®±ã€JNIè°ƒç”¨å¼€é”€ç­‰ï¼›åœ¨æ¡†æ¶å¯åŠ¨æˆ–å°‘é¢‘è°ƒç”¨æ—¶å¯æ¥å—ï¼Œå¦‚Springæ³¨è§£æ‰«æï¼›åœ¨é«˜é¢‘ä¸šåŠ¡æ ¸å¿ƒè·¯å¾„åº”é¿å…ï¼Œç”¨ä»£ç ç”Ÿæˆæˆ–MethodHandleæ›¿ä»£(\rtech.meituan.com)ã€‚ å¯æMethodHandleå’ŒLambdaMetafactoryæ€§èƒ½æ›´ä¼˜ï¼Œä¸”Springéƒ¨åˆ†åœºæ™¯å·²ä½¿ç”¨è¿™äº›æ‰‹æ®µã€‚ å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å‘¼å«å¼‚æ­¥ä»»åŠ¡å¤„ç†æ¨¡å—ï¼Ÿ\næè¿°ä¸šåŠ¡æµç¨‹ï¼šæ¥åˆ°å‘¼å«è¯·æ±‚ï¼Œæäº¤å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚è®°å½•æ—¥å¿—ã€æ¨é€æ¶ˆæ¯ã€å¼‚æ­¥é€šçŸ¥å¤–éƒ¨ç³»ç»Ÿï¼‰ï¼Œå¤„ç†éœ€ä¿è¯å¹‚ç­‰ï¼› æŠ€æœ¯é€‰å‹ï¼šä½¿ç”¨çº¿ç¨‹æ± æˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka/RabbitMQ/ç¾å›¢å†…éƒ¨æ¶ˆæ¯ç³»ç»Ÿï¼‰ï¼›ä»»åŠ¡é‡è¯•ä¸å¹‚ç­‰è®¾è®¡ï¼›é˜Ÿåˆ—å®¹é‡ä¸èƒŒå‹ï¼›ç›‘æ§é˜Ÿåˆ—ç§¯å‹ï¼›ä¼˜å…ˆçº§ä»»åŠ¡å¤„ç†ï¼›çº¿ç¨‹æ± å‚æ•°è°ƒä¼˜ï¼›å¼‚å¸¸å‘Šè­¦ã€‚ Springä¸­AOPå¦‚ä½•å®ç°ï¼Ÿæœ‰å“ªäº›ä»£ç†æ–¹å¼ï¼Ÿ\né€šè¿‡åŠ¨æ€ä»£ç†ï¼ˆJDK Proxyï¼‰å’ŒCGLIBå­—èŠ‚ç ç”Ÿæˆï¼›BeanPostProcessoråœ¨å®¹å™¨åˆå§‹åŒ–é˜¶æ®µç”Ÿæˆä»£ç†å¯¹è±¡ï¼›æ³¨æ„æœ€ç»ˆç›®æ ‡å¯¹è±¡ç±»å‹ä¸ä»£ç†ç±»å‹çš„åŒºåˆ«ï¼›åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹AOPè°ƒç”¨å¼€é”€ï¼›å¯è®¨è®ºä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æˆ–åˆ‡é¢ä¼˜åŒ–æ–¹æ¡ˆã€‚ è¯·è®¾è®¡ä¸€ä¸ªé™æµç†”æ–­ç³»ç»Ÿï¼Œç”¨äºé˜²æ­¢å¤§æ¨¡å‹è°ƒç”¨è¿‡è½½ã€‚\næ€è·¯ï¼šå…¨å±€é™æµä¸åˆ†å¸ƒå¼é™æµç­–ç•¥ï¼›åŸºäºä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•ï¼›ä½¿ç”¨Redisåšåˆ†å¸ƒå¼è®¡æ•°æˆ–ä»¤ç‰Œå‘æ”¾ï¼›ç†”æ–­åŸºäºé”™è¯¯ç‡æˆ–è¶…æ—¶ç‡ï¼Œè§¦å‘åçŸ­æ—¶é—´å†…æ‹’ç»æˆ–é™çº§ï¼›æ¢å¤ç­–ç•¥ï¼šåŠå¼€çŠ¶æ€æ¢æµ‹ï¼›ç›‘æ§æŒ‡æ ‡ï¼šè°ƒç”¨æˆåŠŸç‡ã€å»¶è¿Ÿï¼›ä¸é™çº§é€»è¾‘ç»“åˆï¼ˆå¦‚å›é€€åˆ°æœ¬åœ°å°æ¨¡å‹æˆ–è§„åˆ™ï¼‰ï¼›ç°åº¦å‘å¸ƒæ–°æ¨¡å‹æ—¶æµé‡æ§åˆ¶ã€‚ å¦‚ä½•ç®¡ç†å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ï¼Ÿ\nä½¿ç”¨ä¼šè¯IDå…³è”è¯·æ±‚ï¼›çŸ­æœŸä¸Šä¸‹æ–‡å­˜äºRedisæˆ–å†…å­˜ç¼“å­˜ï¼ŒåŒ…å«æœ€è¿‘å‡ è½®çš„å…³é”®ä¿¡æ¯ï¼›é•¿æœŸä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åå¥½ï¼‰å­˜äºDBï¼›Promptæ‹¼æ¥æ—¶åšè£å‰ªï¼ˆä¿ç•™æœ€ç›¸å…³ç‰‡æ®µï¼‰ï¼›å¯¹è¯ä¸Šä¸‹æ–‡ç‰ˆæœ¬ç®¡ç†ï¼›å¦‚ä½•é˜²æ­¢ä¸Šä¸‹æ–‡æ³„éœ²æˆ–æ»¥ç”¨ï¼›å¹¶å‘åœºæ™¯ä¸­å¦‚ä½•åŒæ­¥æ›´æ–°ä¸Šä¸‹æ–‡ï¼›å¦‚ä½•åšå¹¶è¡Œå¤šæ„å›¾è¯†åˆ«ã€‚ è°ˆè°ˆASRæ¥å…¥å’Œè¯†åˆ«ç»“æœå¤„ç†\nåè®®ä¸æ•°æ®æ ¼å¼ï¼šMRCPåè®®ã€WebSocketæˆ–HTTPæµå¼ï¼›éŸ³é¢‘é¢„å¤„ç†ï¼ˆé™å™ªã€å›å£°æ¶ˆé™¤ç­‰ï¼‰ï¼›ASRè¿”å›ç»“æœçš„å¯ä¿¡åº¦è¯„åˆ†ï¼›è¯†åˆ«ä¸ç¡®å®šæ—¶çš„å¤„ç†ï¼ˆç¡®è®¤ã€é‡é—®ï¼‰ï¼›å¤šè¯­ç§æˆ–æ–¹è¨€åœºæ™¯çš„æŒ‘æˆ˜ã€‚ æ€§èƒ½ï¼šæ‰¹é‡è¯·æ±‚ä¸å¹¶å‘è¯·æ±‚ç®¡ç†ã€è¶…æ—¶è®¾ç½®ã€å¹¶å‘é™åˆ¶ã€è¿æ¥å¤ç”¨ï¼›å¦‚ä½•ç›‘æ§ASRæœåŠ¡è´¨é‡å’Œè°ƒç”¨æˆæœ¬ã€‚ é¡¹ç›®ç»éªŒåˆ†äº«ï¼šè¯·è°ˆä¸€æ¬¡ä½ ä¸»å¯¼çš„é«˜å¹¶å‘ç³»ç»Ÿé‡æ„ç»å†\nè¯´æ˜èƒŒæ™¯ã€ç³»ç»Ÿç—›ç‚¹ã€åˆ†ææ–¹æ³•ï¼ˆå¦‚å‹æµ‹å®šä½ç“¶é¢ˆã€ä»£ç å‰–æã€æ—¥å¿—åˆ†æï¼‰ï¼›æå‡ºæ–¹æ¡ˆï¼ˆå¦‚æ‹†åˆ†æœåŠ¡ã€å¼•å…¥ç¼“å­˜ã€å¼‚æ­¥è§£è€¦ã€åˆ†åº“åˆ†è¡¨ã€ä¼˜åŒ–SQLã€æ”¹è¿›çº¿ç¨‹æ± æ¨¡å‹ï¼‰ï¼›å®æ–½è¿‡ç¨‹ï¼ˆé˜¶æ®µæ€§ç°åº¦ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€å›æ»šé¢„æ¡ˆï¼‰ï¼›æ•ˆæœï¼ˆæ€§èƒ½æå‡å¤šå°‘ã€æˆæœ¬èŠ‚çœå¤šå°‘ã€ç¨³å®šæ€§æ”¹å–„ï¼‰ï¼›åç»­æŒç»­ä¼˜åŒ–æªæ–½ã€‚ å¦‚ä½•æ„å»ºæ•°æ®ç›‘æ§åŠæŠ¥è­¦ä½“ç³»ï¼Ÿ\nç›‘æ§ç»´åº¦ï¼šä¸šåŠ¡æŒ‡æ ‡ã€ç³»ç»ŸæŒ‡æ ‡ã€æ¨¡å‹æŒ‡æ ‡ï¼›é‡‡é›†æ–¹å¼ï¼šæ—¥å¿—åŸ‹ç‚¹ã€æŒ‡æ ‡ä¸ŠæŠ¥SDKï¼›å®æ—¶ç›‘æ§ä¸ç¦»çº¿åˆ†æç»“åˆï¼›å‘Šè­¦ç­–ç•¥ï¼šé˜ˆå€¼å‘Šè­¦ã€å¼‚å¸¸æ£€æµ‹ï¼ˆåŸºäºå†å²æ•°æ®ï¼‰ï¼›æŠ¥è­¦æ¸ é“ï¼šé‚®ä»¶ã€çŸ­ä¿¡ã€é’‰é’‰/Slackå‘Šè­¦ï¼›å‘Šè­¦å»é‡ä¸åˆ†çº§ï¼›äº‹æ•…å“åº”æµç¨‹ï¼›æ€æ ·åˆ©ç”¨ç›‘æ§è¿›è¡Œå®¹é‡è§„åˆ’å’Œé¢„è­¦ã€‚ å¦‚æœå¤§æ¨¡å‹è°ƒç”¨æˆæœ¬è¿‡é«˜ï¼Œå¦‚ä½•ä¼˜åŒ–æˆæœ¬ï¼Ÿ\næŠ€æœ¯æ–¹æ¡ˆï¼šç¼“å­˜å¸¸è§å¯¹è¯ç»“æœï¼›æœ¬åœ°å°æ¨¡å‹åˆç­›ï¼Œå¤§æ¨¡å‹åªåœ¨å¿…è¦æ—¶è°ƒç”¨ï¼›åŠ¨æ€è´Ÿè½½ç­–ç•¥ã€æµé‡åˆ†å±‚ï¼›å»¶è¿Ÿå®¹å¿åœºæ™¯æ”¹ä¸ºç¦»çº¿å¤„ç†ï¼›æ‰¹é‡å¤„ç†åœºæ™¯åˆå¹¶è¯·æ±‚ï¼›åˆç†é€‰æ‹©æ¨¡å‹ç²¾åº¦ä¸è®¡ç®—èµ„æºï¼›ç»“åˆæˆæœ¬ä¸æ•ˆæœè¡¡é‡ï¼Œå¼•å…¥é™é¢æˆ–ä¼˜å…ˆçº§ç­–ç•¥ã€‚ ä¸šåŠ¡æ–¹æ¡ˆï¼šè®¾ç½®ä¸šåŠ¡ä¼˜å…ˆçº§ã€ç”¨æˆ·åˆ†å±‚ï¼ˆé«˜ä»·å€¼ç”¨æˆ·å¯ç”¨æ›´å¥½æ¨¡å‹ï¼‰ï¼Œæ™®é€šåœºæ™¯ä½¿ç”¨è½»é‡æ–¹æ¡ˆï¼›A/Bæµ‹è¯•ä¸åŒç‰ˆæœ¬å¯¹æˆæœ¬ä¸æ•ˆæœçš„å½±å“ã€‚ è·¨å›¢é˜Ÿåä½œåœºæ™¯\nåœºæ™¯ç¤ºä¾‹ï¼šä¸é£æ§å›¢é˜Ÿå¯¹æ¥å®æ—¶æ¬ºè¯ˆæ£€æµ‹ï¼Œéœ€è¦åœ¨é€šè¯ä¸­åŠ¨æ€æŸ¥è¯¢é£é™©åˆ¤å®šï¼›ä¸è·¯ç”±å›¢é˜Ÿå¯¹æ¥ï¼Œå†³å®šæ‹¨æ‰“æ—¶é—´çª—å£æˆ–é‡æ‹¨ç­–ç•¥ï¼›ä¸ç”¨æˆ·åˆ†å±‚å›¢é˜Ÿå¯¹æ¥ï¼Œè·å–ç”¨æˆ·ç”»åƒä¿¡æ¯ç”¨äºå¯¹è¯ä¸ªæ€§åŒ–ï¼›ä¸æ³•åŠ¡/åˆè§„å›¢é˜Ÿæ²Ÿé€šå½•éŸ³ä¿å­˜ç­–ç•¥ã€‚ è¦ç‚¹ï¼šæ˜ç¡®æ¥å£åè®®ã€æ•°æ®æ ¼å¼ã€è°ƒç”¨æ—¶å»¶ä¸å¯é æ€§è¦æ±‚ï¼›åˆ¶å®šSLAsï¼›é”™è¯¯å’Œé™çº§å¤„ç†æ–¹æ¡ˆï¼›æ–‡æ¡£ä¸æ²Ÿé€šæµç¨‹ï¼›å®šæœŸå¯¹é½éœ€æ±‚ä¸æŠ€æœ¯æ–¹æ¡ˆï¼›æ•æ·å¼€å‘ä¸è¿­ä»£äº¤ä»˜ã€‚ å…­ã€å®è·µæ€§å‡†å¤‡\r#\råŠ¨æ‰‹ç»ƒä¹ \nç¼–å†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„â€œç”µè¯å¯¹è¯æ¨¡æ‹ŸæœåŠ¡â€ï¼šæ¨¡æ‹ŸASR/TTSè°ƒç”¨ï¼ˆå¯ç”¨å‡æ•°æ®æˆ–å¼€æºç®€å•åº“æ¨¡æ‹Ÿï¼‰ï¼Œç”¨Spring Bootå®ç°ä¸€ä¸ªå¯¹è¯ç®¡ç†å¾®æœåŠ¡ï¼›é›†æˆä¸€ä¸ªå…¬å…±å¤§æ¨¡å‹APIï¼ˆå¦‚OpenAIæˆ–æœ¬åœ°æ¨¡æ‹Ÿï¼‰ï¼Œå®ç°å¤šè½®å¯¹è¯é€»è¾‘ï¼›ç”¨Redisä¿å­˜ä¼šè¯çŠ¶æ€ï¼›åŠ å…¥é™æµå’Œç†”æ–­é€»è¾‘ï¼›ç¼–å†™ç®€å•çš„ç›‘æ§æŒ‡æ ‡è¾“å‡ºï¼ˆå¦‚Prometheuså®¢æˆ·ç«¯ï¼‰ã€‚é€šè¿‡è¿™ä¸ªDemoåŠ æ·±ç†è§£ï¼Œä¹Ÿå¯åœ¨é¢è¯•æ—¶ä¸¾ä¾‹è¯´æ˜è‡ªå·±äº²æ‰‹å®è·µè¿‡ç±»ä¼¼æµç¨‹ã€‚ å¦‚æœæ—¶é—´å……è£•ï¼Œå¯å°è¯•æ¥å…¥å¼€æºè¯­éŸ³å¥—ä»¶ï¼ˆå¦‚Kaldiæˆ–ç¬¬ä¸‰æ–¹ASR SDKæ¨¡æ‹Ÿï¼‰ï¼Œç†è§£éŸ³é¢‘å¤„ç†æµç¨‹ã€‚ é˜…è¯»ä¸ç¬”è®°\né˜…è¯»ç¾å›¢æŠ€æœ¯åšå®¢ä¸­ç›¸å…³è¯­éŸ³äº¤äº’å’ŒAIåº”ç”¨æ–‡ç« ï¼ˆå¦‚ MRCP å®è·µæ–‡ç« ï¼‰å¹¶è®°å½•å…³é”®æŠ€æœ¯ç‚¹å’Œæ€è€ƒã€‚ é˜…è¯»å¤§æ¨¡å‹è°ƒç”¨ã€Promptè®¾è®¡å’Œå¤šè½®å¯¹è¯ç®¡ç†çš„å…¬å¼€èµ„æ–™ã€è®ºæ–‡æˆ–åšå®¢ï¼Œæ€»ç»“åœ¨å®æ—¶ç”µè¯åœºæ™¯çš„åº”ç”¨æ³¨æ„äº‹é¡¹ã€‚ å¤ä¹ Springæºç å…³é”®æ¨¡å—ï¼ˆAOPã€Beanç”Ÿå‘½å‘¨æœŸã€äº‹åŠ¡ã€IOCå®¹å™¨ï¼‰ä»¥åŠJavaå¹¶å‘åŸç†ï¼Œç»“åˆå®é™…é¡¹ç›®ç»éªŒå½¢æˆç»“æ„åŒ–æ€è·¯ã€‚ ç®€å†ä¸è‡ªæˆ‘ä»‹ç»\nå°†ç®€å†ä¸­çš„é¡¹ç›®ç»éªŒçªå‡ºä¸å²—ä½è¦æ±‚å¥‘åˆçš„éƒ¨åˆ†ï¼Œå¦‚åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ã€é«˜å¹¶å‘ä¼˜åŒ–ã€SpringåŸç†åº”ç”¨ã€æ•°æ®åº“ä¸ä¸­é—´ä»¶è°ƒä¼˜ã€AIæˆ–è¯­éŸ³ç›¸å…³æ¢ç´¢ã€‚ è‡ªæˆ‘ä»‹ç»ï¼ˆ1-2åˆ†é’Ÿï¼‰è¦æ¶µç›–ä½ çš„æ ¸å¿ƒä¼˜åŠ¿ï¼šæ‰å®è®¡ç®—æœºåŸºç¡€ã€ä¸°å¯Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒã€AIæˆ–è¯­éŸ³æ–¹å‘çš„å…´è¶£/å®è·µã€è‰¯å¥½æ²Ÿé€šå’Œé¢†å¯¼èƒ½åŠ›ã€‚æŠŠè‡ªå·±å®šä½ä¸ºèƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¹¶æ¨åŠ¨å¤§æ¨¡å‹ç”µè¯ç³»ç»Ÿè½åœ°çš„äººã€‚ å‡†å¤‡é—®é¢˜\né’ˆå¯¹å›¢é˜Ÿä¸å²—ä½ï¼Œå‡†å¤‡é—®é¢˜ï¼šå›¢é˜Ÿå½“å‰åœ¨å¤§æ¨¡å‹ç”µè¯åº”ç”¨ä¸Šæœ€è¿«åˆ‡çš„æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿç°æœ‰ç³»ç»Ÿæ¶æ„å¦‚ä½•ï¼Ÿä½¿ç”¨å“ªäº›ä¸­é—´ä»¶ä¸AIå¹³å°ï¼Ÿå›¢é˜Ÿåˆä½œæ¨¡å¼ä¸ç ”å‘æµç¨‹ï¼Ÿå¯¹æ–°æˆå‘˜çš„æœŸæœ›ï¼ŸæŠ€æœ¯æ ˆæˆ–å·¥å…·é“¾æœ‰ä½•åå¥½ï¼Ÿæœªæ¥æŠ€æœ¯æ¼”è¿›æ–¹å‘ï¼Ÿ é€šè¿‡æé—®å±•ç°ä½ å¯¹è¯¥æ–¹å‘çš„ç†è§£å’Œçƒ­æƒ…ï¼Œå¹¶ä¸ºåç»­é¢è¯•æ·±å…¥å¯¹è¯æ‰“ä¸‹åŸºç¡€ã€‚ ä¸ƒã€æ€»ç»“ä¸å¿ƒæ€\r#\rå…¨é¢å‡†å¤‡ï¼šæ—¢è¦æŒæ¡åˆ†å¸ƒå¼ã€å¹¶å‘ã€SpringåŸç†ã€æ•°æ®åº“ä¸ä¸­é—´ä»¶ä¼˜åŒ–ç­‰æ ¸å¿ƒåç«¯èƒ½åŠ›ï¼Œä¹Ÿè¦æ·±å…¥äº†è§£ç”µè¯è¯­éŸ³äº¤äº’æµç¨‹ã€å¤§æ¨¡å‹é›†æˆä¸å®æ—¶å¯¹è¯ç®¡ç†çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠæ•°æ®ç›‘æ§ä¸è¿­ä»£ä¼˜åŒ–æ–¹æ³•ã€‚ ç»“åˆç»éªŒä¸å®è·µï¼šç”¨è‡ªå·±è¿‡å»çš„é¡¹ç›®ç»éªŒè¯´æ˜å…·å¤‡ç±»ä¼¼èƒ½åŠ›ï¼›è‹¥ç¼ºä¹è¯­éŸ³æ–¹å‘ç»éªŒï¼Œå¯é€šè¿‡è‡ªä¸»Demoæˆ–é˜…è¯»è¡Œä¸šå®è·µå¼¥è¡¥ï¼›å±•ç¤ºå¿«é€Ÿå­¦ä¹ ä¸è½åœ°èƒ½åŠ›ã€‚ ç»“æ„åŒ–è¡¨è¾¾ï¼šé¢è¯•æ—¶æ€è·¯è¦æ¸…æ™°ï¼Œå…ˆå®šä¹‰é—®é¢˜èŒƒå›´ï¼Œå†åˆ†å±‚æè¿°æ–¹æ¡ˆï¼Œæœ€åæ€»ç»“åˆ©å¼Šä¸å¯æ”¹è¿›ä¹‹å¤„ï¼›å›ç­”è¦ç»“åˆå…·ä½“ä¾‹å­æˆ–æ•°å­—ï¼Œé¿å…ç©ºæ³›ã€‚ æ²Ÿé€šä¸å›¢é˜Ÿæ„è¯†ï¼šçªå‡ºè·¨å›¢é˜Ÿåä½œç»éªŒã€è‰¯å¥½æ²Ÿé€šå’Œå½±å“åŠ›ï¼›é¢è¯•ä¸­å±•ç¤ºå¯¹å›¢é˜Ÿæ–‡åŒ–çš„å¥‘åˆåº¦å’Œæ¨åŠ¨ä»·å€¼ã€‚ æŒç»­å­¦ä¹ ï¼šå…³æ³¨è¡Œä¸šæœ€æ–°åŠ¨æ€å’ŒæŠ€æœ¯è¶‹åŠ¿ï¼ˆå¦‚æœ€æ–°å¤§æ¨¡å‹ã€å®æ—¶æµå¤„ç†æŠ€æœ¯ã€å¯è§‚æµ‹æ€§å·¥å…·ç­‰ï¼‰ï¼Œå¹¶æ€è€ƒå¦‚ä½•åº”ç”¨åˆ°å¤§æ¨¡å‹ç”µè¯æœåŠ¡ä¸­ã€‚ è‡ªä¿¡ä¸è°¦é€Šï¼šè¯šå®å›ç­”è‡ªå·±ä¸ç†Ÿæ‚‰çš„é¢†åŸŸï¼ŒåŒæ—¶å±•ç¤ºå­¦ä¹ è®¡åˆ’å’Œæ€è·¯ï¼›å¯¹ç†Ÿæ‚‰é¢†åŸŸè‡ªä¿¡é˜è¿°ï¼Œå¯¹ä¸ç†Ÿæ‚‰é¢†åŸŸè¡¨è¾¾å­¦ä¹ å…´è¶£å’Œå¿«é€Ÿä¸Šæ‰‹èƒ½åŠ›ã€‚ ç¥ä½ é¢è¯•é¡ºåˆ©ï¼è‹¥éœ€è¦åœ¨æŸä¸ªæŠ€æœ¯ç‚¹ä¸Šæ·±å…¥å®ç°ç¤ºä¾‹æˆ–ç»ƒä¹ ä»£ç ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥æ²Ÿé€šã€‚\n"},{"id":32,"href":"/docs/study/cache/kafka/microservices-comm/","title":"å¾®æœåŠ¡é€šä¿¡","section":"Kafka","content":"Kafka æœ¬èº«åœ¨â€œKafka ä¸»é¢˜å†…éƒ¨â€çš„ç”Ÿäº§è€…åˆ°æ¶ˆè´¹è€…ç¯èŠ‚ï¼Œå¯ä»¥é€šè¿‡å¹‚ç­‰ç”Ÿäº§è€… + äº‹åŠ¡æœºåˆ¶å®ç°â€œæ°å¥½ä¸€æ¬¡â€ï¼ˆExactly-Onceï¼‰çš„æ¶ˆæ¯å†™å…¥å’Œæ¶ˆè´¹-offset æäº¤ã€‚ä½†åœ¨å¾®æœåŠ¡é€šä¿¡çš„æ›´å¹¿æ³›åœºæ™¯ä¸­ï¼Œå¾€å¾€æ¶‰åŠå°†æ¶ˆæ¯æ¶ˆè´¹åçš„ç»“æœå†™å…¥å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚æ•°æ®åº“ï¼‰æˆ–è°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œè¿™æ—¶è¦è¾¾åˆ°ç«¯åˆ°ç«¯çš„â€œæ°å¥½ä¸€æ¬¡â€åˆ™æ›´å¤æ‚ï¼Œéœ€è¦é…åˆé¢å¤–è®¾è®¡ä¸æ¨¡å¼ã€‚\nKafka å†…éƒ¨çš„ Exactly-Once ä¿è¯\nä½¿ç”¨å¹‚ç­‰ç”Ÿäº§è€…ï¼ˆProducer ID + åˆ†åŒºå†…åºåˆ—å· + æœåŠ¡ç«¯åˆ¤é‡ï¼‰å¯ä¿è¯å•ä¼šè¯ã€å•åˆ†åŒºå†™å…¥ä¸é‡å¤ã€‚ å¼•å…¥äº‹åŠ¡ï¼ˆTransactional ID + Transaction Coordinator + WriteTxnMarker + read_committed æ¶ˆè´¹æ¨¡å¼ + sendOffsetsToTransactionï¼‰ï¼Œå¯å°†â€œæ¶ˆè´¹æ¶ˆæ¯â†’å¤„ç†â†’ç”Ÿäº§æ–°æ¶ˆæ¯â€ä¸â€œæäº¤æ¶ˆè´¹ offsetâ€æ”¾åœ¨åŒä¸€äº‹åŠ¡å†…ï¼Œç¡®ä¿è¦ä¹ˆéƒ½ç”Ÿæ•ˆè¦ä¹ˆéƒ½ä¸ç”Ÿæ•ˆï¼Œä»è€Œåœ¨åŒä¸€ä¸ª Kafka æµç¨‹é“¾ä¸Šå®ç°æ°å¥½ä¸€æ¬¡å¤„ç†ã€‚ å¾®æœåŠ¡é€šä¿¡çš„æŒ‘æˆ˜\nå¤–éƒ¨ç³»ç»Ÿäº‹åŠ¡ä¸å¯è·¨ Kafka äº‹åŠ¡è‡ªåŠ¨åè°ƒï¼šKafka äº‹åŠ¡åªèƒ½ä¿è¯ Kafka å†…éƒ¨çš„å†™å…¥ä¸ offset æäº¤åŸå­æ€§ï¼Œæ— æ³•ç›´æ¥ä¸å¤–éƒ¨æ•°æ®åº“æˆ–å…¶å®ƒæ¶ˆæ¯é˜Ÿåˆ—çš„äº‹åŠ¡åšåˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ã€‚ æœåŠ¡é—´è°ƒç”¨æˆ–æ•°æ®åº“å†™å…¥çš„å¹‚ç­‰æ€§ï¼šè‹¥æœåŠ¡å¤„ç†æ¶ˆæ¯åè¦å†™æ•°æ®åº“æˆ–è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼Œéœ€è¦ä¿è¯è¯¥æ­¥éª¤å¹‚ç­‰æˆ–è€…å¯å›æ»šï¼Œå¦åˆ™å³ä½¿ Kafka ç«¯ä¸é‡å¤ï¼Œå¤–éƒ¨æ“ä½œä»å¯èƒ½å› é‡è¯•å¯¼è‡´é‡å¤æˆ–æ¼å¤„ç†ã€‚ ç½‘ç»œæˆ–è¿›ç¨‹æ•…éšœæ—¶çš„ä¸€è‡´æ€§è¾¹ç•Œï¼šå¤„ç†è¿‡ç¨‹ä¸­è‹¥æ’­å‡ºæ¶ˆæ¯å·²æäº¤ä½†å¤–éƒ¨å†™å…¥å¤±è´¥ï¼Œæˆ–ç›¸åï¼Œéƒ½å¯èƒ½å¯¼è‡´ä¸ä¸€è‡´ã€‚ å¸¸è§è§£å†³æ¨¡å¼\nOutbox æ¨¡å¼\nåœ¨ä¸šåŠ¡æ•°æ®åº“çš„åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼ŒåŒæ—¶å†™å…¥ä¸»ä¸šåŠ¡è¡¨å’Œâ€œoutbox è¡¨â€è®°å½•å¾…å‘é€çš„æ¶ˆæ¯ã€‚äº‹åŠ¡æäº¤åï¼Œç”±ä¸“é—¨çš„è¿›ç¨‹æˆ– Debezium ç­‰ CDC å·¥å…·è¯»å– outbox è¡¨å¹¶å‘ Kafka å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å¯ä¿è¯â€œä¸šåŠ¡å†™å…¥ä¸æ¶ˆæ¯æŠ•é€’â€åœ¨åŒä¸€æ•°æ®åº“äº‹åŠ¡éš”ç¦»ä¸­ï¼Œæ— æ¼å‘ï¼›å‘é€åˆ° Kafka æ—¶å†é€šè¿‡å¹‚ç­‰æˆ–äº‹åŠ¡æ§åˆ¶é¿å…é‡å¤æŠ•é€’ã€‚ Idempotent æ¶ˆè´¹ä¸å¤„ç†\nä¸‹æ¸¸æœåŠ¡åœ¨æ¶ˆè´¹ Kafka æ¶ˆæ¯å†™å…¥æ•°æ®åº“æ—¶ï¼Œè®¾è®¡å¹‚ç­‰å†™å…¥ï¼ˆå¦‚åŸºäºä¸šåŠ¡ä¸»é”®åš UPSERTï¼Œæˆ–è®°å½•å·²å¤„ç†æ¶ˆæ¯ ID ä»¥å»é‡ï¼‰ã€‚å³ä¾¿é‡è¯•æ¶ˆè´¹ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´å¤šæ¬¡å‰¯ä½œç”¨ã€‚ äº‹åŠ¡åè°ƒä¸è¡¥å¿ï¼ˆSagaï¼‰\nå¯¹äºè·¨å¤šä¸ªæœåŠ¡æˆ–ç³»ç»Ÿçš„ä¸šåŠ¡ï¼Œå°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªæœ¬åœ°äº‹åŠ¡ï¼Œå¹¶è®¾è®¡è¡¥å¿é€»è¾‘ï¼šå¤±è´¥æ—¶å›æ»šå·²ç”Ÿæ•ˆçš„æ­¥éª¤ã€‚é…åˆå¯é æ¶ˆæ¯ï¼ˆKafka ç”Ÿäº§ï¼‰ä¸å¹‚ç­‰å¤„ç†ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æœ€çµ‚ä¸€è‡´æ€§ã€‚ åŒå†™+æ ¡éªŒ\næ¶ˆè´¹æ¶ˆæ¯ååŒæ—¶å¾€ Kafka å’Œæ•°æ®åº“å†™å…¥ï¼Œä½†éœ€å¤–éƒ¨æ ¡éªŒæˆ–å¼‚æ­¥è¡¥å¿æ¥å¤„ç†å¯èƒ½çš„å†™å…¥ä¸ä¸€è‡´ï¼Œé€šå¸¸ç»“åˆé‡è¯•ç­–ç•¥ä¸å¹‚ç­‰è®¾è®¡ã€‚ Exactly-Once Semantics (EOS) for Kafka Streams\nå¦‚æœå¾®æœåŠ¡æœ¬èº«ä½¿ç”¨ Kafka Streamsï¼Œå¹¶ä¸”æµå¤„ç†ç»“æœä¹Ÿå†™å› Kafkaï¼Œå†ç”±å¦ä¸€ä¸ªæœåŠ¡æ¶ˆè´¹å¹¶å†™æ•°æ®åº“ï¼Œå¯åœ¨ Kafka Streams ä¾§åˆ©ç”¨äº‹åŠ¡ä¿è¯æµå†…éƒ¨æ°å¥½ä¸€æ¬¡ã€‚ä½†å†™åˆ°å¤–éƒ¨ DB æ—¶ï¼Œä»éœ€å€ŸåŠ© Outbox æˆ–å¹‚ç­‰å†™å…¥ç­‰æ–¹å¼ã€‚ å®è·µå»ºè®®\nå°½é‡æŠŠæ ¸å¿ƒä¸šåŠ¡çŠ¶æ€å†™å…¥åŒä¸€æ•°æ®åº“äº‹åŠ¡æ—¶è§¦å‘ outbox æ¶ˆæ¯ï¼Œå†ç”± Kafka è´Ÿè´£åç»­åˆ†å‘ã€‚ æ¶ˆè´¹ç«¯å†™æ•°æ®åº“æ—¶ä½¿ç”¨å¹‚ç­‰æˆ–å­˜åœ¨æ£€æŸ¥ï¼›é¿å…ä¾èµ–å•çº¯ Kafka äº‹åŠ¡å°±è®¤ä¸ºå¤–éƒ¨å†™å…¥ä¹Ÿâ€œæ°å¥½ä¸€æ¬¡â€ã€‚ åœ¨å¯èƒ½çš„åœºæ™¯ä¸‹ï¼Œå°†æ›´å¤šé€»è¾‘ç•™åœ¨ Kafka Streams æˆ– ksqlDB ç­‰æ¡†æ¶å†…ï¼Œå‡å°‘å¤–éƒ¨ç³»ç»Ÿäº¤äº’ï¼Œåˆ©ç”¨å…¶å†…å»ºäº‹åŠ¡èƒ½åŠ›ã€‚ æ˜ç¡® SLAï¼šå¾ˆå¤šç³»ç»Ÿæ¥å—â€œè‡³å°‘ä¸€æ¬¡â€åŠ å¹‚ç­‰å¤„ç†å³å¯ï¼›è‹¥å¿…é¡»ä¸¥æ ¼æ°å¥½ä¸€æ¬¡ï¼Œéœ€è¦ç»“åˆä¸Šè¿°æ¨¡å¼å¹¶æ¥å—å¤æ‚åº¦å’Œæ€§èƒ½æˆæœ¬ã€‚ å¯¹å»¶è¿Ÿã€ååä¸å¯ç”¨æ€§çš„æƒè¡¡ï¼šå‡ºäºé«˜å¯ç”¨ï¼Œå¾€å¾€é¿å…åˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ï¼Œè½¬è€Œç”¨è¡¥å¿æˆ–å¹‚ç­‰è®¾è®¡ã€‚ ç»“è®º Kafka å¯åœ¨è‡ªèº«èŒƒå›´å†…ï¼ˆâ€œè¯» Kafka â†’ å¤„ç† â†’ å†™ Kafka â†’ æäº¤ offsetâ€ï¼‰åšåˆ° Exactly-Onceï¼Œä½†åœ¨å¾®æœåŠ¡é€šä¿¡ä¸­è‹¥æ¶‰åŠå¤–éƒ¨æ•°æ®åº“æˆ–å…¶å®ƒæœåŠ¡ï¼Œéœ€è¦å€ŸåŠ© Outboxã€å¹‚ç­‰å†™å…¥ã€è¡¥å¿äº‹åŠ¡ï¼ˆSagaï¼‰ç­‰æ¨¡å¼æ¥æ¥è¿‘ç«¯åˆ°ç«¯æ°å¥½ä¸€æ¬¡ã€‚æ— éœ€å¼ºæ±‚è·¨å¤šç³»ç»Ÿçš„åˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ï¼ˆå¤æ‚ä¸”æ˜“æˆç“¶é¢ˆï¼‰ï¼Œè€Œæ˜¯é€šè¿‡å¯é æ¶ˆæ¯ã€å¹‚ç­‰è®¾è®¡ä¸è¡¥å¿é€»è¾‘ï¼Œå®ç°åœ¨å¸¸è§å¾®æœåŠ¡åœºæ™¯ä¸‹çš„ä¸šåŠ¡æ­£ç¡®æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§ã€‚\n"},{"id":33,"href":"/docs/study/base/license-comparison/","title":"ä¸»æµè®¸å¯è¯å¯¹æ¯”","section":"åŸºç¡€","content":"\rå¼€æºè®¸å¯è¯å¯¹æ¯”è¡¨\r#\rè®¸å¯è¯åç§° ç±»å‹ ä¸“åˆ©æˆæƒ Copyleft å¼ºåº¦ å•†ä¸šå…¼å®¹æ€§ ä¸ GPL å…¼å®¹æ€§ é€‚ç”¨åœºæ™¯ MIT å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ å°å‹é¡¹ç›®ã€åº“ Apache 2.0 å®½æ¾ âœ… æœ‰ âŒ æ—  âœ… é«˜ âœ… æ˜¯ ä¼ä¸šçº§é¡¹ç›®ã€æ¶‰åŠä¸“åˆ© GPL v3.0 å¼º Copyleft âœ… æœ‰ âœ… å¼º âš ï¸ é™åˆ¶ âœ… æ˜¯ å¼€æºé¡¹ç›®ã€éœ€å¼ºåˆ¶å¼€æº GPL v2.0 å¼º Copyleft âŒ æ—  âœ… å¼º âš ï¸ é™åˆ¶ âŒ å¦ ä¼ ç»Ÿå¼€æºé¡¹ç›® AGPL v3.0 å¼º Copyleft âœ… æœ‰ âœ… æœ€å¼º âš ï¸ é™åˆ¶ âœ… æ˜¯ SaaSã€ç½‘ç»œæœåŠ¡ LGPL v2.1 å¼± Copyleft âŒ æ—  âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ åº“ã€æ’ä»¶ BSD 2-Clause å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ ç³»ç»Ÿçº§ç»„ä»¶ã€å•†ä¸šé›†æˆ BSD 3-Clause å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ å•†ä¸šè½¯ä»¶ã€éœ€ç½²åä¿æŠ¤ Boost 1.0 å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ C++ åº“ã€å·¥å…·é“¾ CC0 1.0 å…¬å…±é¢†åŸŸ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ æ•°æ®é›†ã€å†…å®¹å…±äº« EPL 2.0 å¼± Copyleft âœ… æœ‰ âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ ä¼ä¸šè½¯ä»¶ã€æ¨¡å—åŒ–é¡¹ç›® MPL 2.0 å¼± Copyleft âš ï¸ éƒ¨åˆ† âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ æµè§ˆå™¨ã€æ··åˆæˆæƒé¡¹ç›® "}]