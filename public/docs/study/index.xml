<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>学习资料 on 君宝的笔记</title>
    <link>http://localhost:1313/docs/study/</link>
    <description>Recent content in 学习资料 on 君宝的笔记</description>
    <generator>Hugo</generator>
    <language>zh</language>
    <atom:link href="http://localhost:1313/docs/study/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>系统设计</title>
      <link>http://localhost:1313/docs/study/system-design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/study/system-design/</guid>
      <description>&lt;h3 id=&#34;要求&#34;&gt;&#xD;&#xA;  要求&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%a6%81%e6%b1%82&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;h4 id=&#34;1-分布式可扩展&#34;&gt;&#xD;&#xA;  1. 分布式、可扩展。&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#1-%e5%88%86%e5%b8%83%e5%bc%8f%e5%8f%af%e6%89%a9%e5%b1%95&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;分布式：微服务、异步通信、分布式缓存、K8s&lt;/li&gt;&#xA;&lt;li&gt;可扩展：HPA、分库分表、K8s DNS Service、多AZ、多国家&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;2-用户可搜索可预约可重新安排可取消基于医生的位置专科可用时间&#34;&gt;&#xD;&#xA;  2. 用户可搜索、可预约、可重新安排、可取消，基于医生的位置、专科、可用时间。&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#2-%e7%94%a8%e6%88%b7%e5%8f%af%e6%90%9c%e7%b4%a2%e5%8f%af%e9%a2%84%e7%ba%a6%e5%8f%af%e9%87%8d%e6%96%b0%e5%ae%89%e6%8e%92%e5%8f%af%e5%8f%96%e6%b6%88%e5%9f%ba%e4%ba%8e%e5%8c%bb%e7%94%9f%e7%9a%84%e4%bd%8d%e7%bd%ae%e4%b8%93%e7%a7%91%e5%8f%af%e7%94%a8%e6%97%b6%e9%97%b4&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;h5 id=&#34;搜索&#34;&gt;&#xD;&#xA;  搜索&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%90%9c%e7%b4%a2&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Cache Aside，Invalidate when Booking and Cancellation (TTL ~ minutes)&lt;/li&gt;&#xA;&lt;li&gt;Caffeine 异步延迟双删&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h6 id=&#34;权衡&#34;&gt;&#xD;&#xA;  权衡&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9d%83%e8%a1%a1&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h6&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;优点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;⚡ 高吞吐&lt;/td&gt;&#xA;          &lt;td&gt;Redis 命中率高，支持 QPS &amp;gt; 1000+&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;⏱️ 低延迟&lt;/td&gt;&#xA;          &lt;td&gt;单医生查询 latency ≈ 几 ms&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 写后无读&lt;/td&gt;&#xA;          &lt;td&gt;Slot 数据预生成、写入后只读，适合缓存&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🔁 异步更新&lt;/td&gt;&#xA;          &lt;td&gt;Cache 由 Kafka 驱动异步更新，无需强一致性&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;缺点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🕒 数据轻微不一致&lt;/td&gt;&#xA;          &lt;td&gt;TTL 失效期间可能展示已被预约的 slot（在 Booking 阶段兜底）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🧠 Cache Invalidate 复杂&lt;/td&gt;&#xA;          &lt;td&gt;多服务写入 slot 状态需保证正确清除 Redis 缓存&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;📦 大量 slot&lt;/td&gt;&#xA;          &lt;td&gt;Redis 内存占用需控制（可做分片 or 使用 Redis Cluster）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h5 id=&#34;预约&#34;&gt;&#xD;&#xA;  预约&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%a2%84%e7%ba%a6&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redlock 加锁 (TTL ~ seconds)&lt;/li&gt;&#xA;&lt;li&gt;加入 Request ID 作为唯一性约束&lt;/li&gt;&#xA;&lt;li&gt;数据库悲观锁（Pessimistic Lock）双检&lt;/li&gt;&#xA;&lt;li&gt;插入预约（Appointment）&lt;/li&gt;&#xA;&lt;li&gt;发布 AppointmentCreated 到 Kafka&lt;/li&gt;&#xA;&lt;li&gt;释放锁（Unlock）&lt;/li&gt;&#xA;&lt;li&gt;响应客户端&lt;/li&gt;&#xA;&lt;li&gt;消费者（Search Service）Cache Invalidation&lt;/li&gt;&#xA;&lt;li&gt;消费者（Notification Service）发送消息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h6 id=&#34;权衡-1&#34;&gt;&#xD;&#xA;  权衡&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9d%83%e8%a1%a1-1&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h6&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;优点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 高一致性保障&lt;/td&gt;&#xA;          &lt;td&gt;锁+事务双重保证&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 幂等设计&lt;/td&gt;&#xA;          &lt;td&gt;防止重复预约&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 可观测性强&lt;/td&gt;&#xA;          &lt;td&gt;Kafka 推送事件用于追踪链路&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 异步解耦&lt;/td&gt;&#xA;          &lt;td&gt;非核心逻辑（通知、缓存）不影响主流程性能&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;缺点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ Redis 不可用&lt;/td&gt;&#xA;          &lt;td&gt;Redlock 依赖 Redis，可引入降级机制（fallback DB lock）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ 高并发下延迟&lt;/td&gt;&#xA;          &lt;td&gt;拥塞在热点 slot（比如热门医生）可用队列排队缓解&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ 事务复杂性&lt;/td&gt;&#xA;          &lt;td&gt;需细致处理锁释放和回滚，避免死锁&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h5 id=&#34;重新安排&#34;&gt;&#xD;&#xA;  重新安排&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%87%8d%e6%96%b0%e5%ae%89%e6%8e%92&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redlock加锁 (TTL ~ seconds)&lt;/li&gt;&#xA;&lt;li&gt;数据库悲观锁（Pessimistic Lock）双检&lt;/li&gt;&#xA;&lt;li&gt;校验修改旧预约，插入新预约&lt;/li&gt;&#xA;&lt;li&gt;发布 AppointmentRescheduled 到 Kafka&lt;/li&gt;&#xA;&lt;li&gt;释放锁（Unlock）&lt;/li&gt;&#xA;&lt;li&gt;响应客户端&lt;/li&gt;&#xA;&lt;li&gt;消费者（Search Service）Cache Invalidation&lt;/li&gt;&#xA;&lt;li&gt;消费者（Notification Service）发送消息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h6 id=&#34;权衡-2&#34;&gt;&#xD;&#xA;  权衡&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9d%83%e8%a1%a1-2&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h6&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;优点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 一致性保障&lt;/td&gt;&#xA;          &lt;td&gt;事务更新 + 幂等控制，避免错约/重复约&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 双 slot 安全管理&lt;/td&gt;&#xA;          &lt;td&gt;显式释放旧 slot、锁定新 slot&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;✅ 解耦逻辑&lt;/td&gt;&#xA;          &lt;td&gt;Kafka 用于通知与缓存刷新，主流程不阻塞&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;缺点&lt;/th&gt;&#xA;          &lt;th&gt;说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ 新旧 slot 状态切换逻辑复杂&lt;/td&gt;&#xA;          &lt;td&gt;需要明确状态流转模型&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ Redis 不可用影响锁&lt;/td&gt;&#xA;          &lt;td&gt;降级 fallback：数据库悲观锁&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;❗ 用户误操作可能导致重复 reschedule&lt;/td&gt;&#xA;          &lt;td&gt;需限制频率，增强幂等性保障&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h5 id=&#34;取消&#34;&gt;&#xD;&#xA;  取消&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%8f%96%e6%b6%88&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redlock加锁 (TTL ~ seconds)&lt;/li&gt;&#xA;&lt;li&gt;数据库悲观锁（Pessimistic Lock）双检&lt;/li&gt;&#xA;&lt;li&gt;校验修改旧预约&lt;/li&gt;&#xA;&lt;li&gt;发布 AppointmentCanceled 到 Kafka&lt;/li&gt;&#xA;&lt;li&gt;释放锁（Unlock）&lt;/li&gt;&#xA;&lt;li&gt;响应客户端&lt;/li&gt;&#xA;&lt;li&gt;消费者（Search Service）Cache Invalidation&lt;/li&gt;&#xA;&lt;li&gt;消费者（Notification Service）发送消息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h6 id=&#34;权衡-3&#34;&gt;&#xD;&#xA;  权衡&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%9d%83%e8%a1%a1-3&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h6&gt;&#xD;&#xA;&lt;h4 id=&#34;3-服务5000万用户50万医生每秒700次搜索每秒90次预约&#34;&gt;&#xD;&#xA;  3. 服务5000万用户，50万医生，每秒700次搜索，每秒90次预约。&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#3-%e6%9c%8d%e5%8a%a15000%e4%b8%87%e7%94%a8%e6%88%b750%e4%b8%87%e5%8c%bb%e7%94%9f%e6%af%8f%e7%a7%92700%e6%ac%a1%e6%90%9c%e7%b4%a2%e6%af%8f%e7%a7%9290%e6%ac%a1%e9%a2%84%e7%ba%a6&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;h4 id=&#34;4-轻松拓展新地区&#34;&gt;&#xD;&#xA;  4. 轻松拓展新地区。&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#4-%e8%bd%bb%e6%9d%be%e6%8b%93%e5%b1%95%e6%96%b0%e5%9c%b0%e5%8c%ba&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;配置层面隔离（Spring Cloud Config）&lt;/li&gt;&#xA;&lt;li&gt;数据库分库（Date Partitioning）&lt;/li&gt;&#xA;&lt;li&gt;通用服务（Common Services）和差异化定制（Custom Services）&lt;/li&gt;&#xA;&lt;li&gt;API设计（/fr, /de）&lt;/li&gt;&#xA;&lt;li&gt;多租户部署（namespace）&lt;/li&gt;&#xA;&lt;li&gt;日志标签（Label）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;5-要考虑服务之间的扩展性容错性数据一致性&#34;&gt;&#xD;&#xA;  5. 要考虑服务之间的扩展性，容错性，数据一致性。&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#5-%e8%a6%81%e8%80%83%e8%99%91%e6%9c%8d%e5%8a%a1%e4%b9%8b%e9%97%b4%e7%9a%84%e6%89%a9%e5%b1%95%e6%80%a7%e5%ae%b9%e9%94%99%e6%80%a7%e6%95%b0%e6%8d%ae%e4%b8%80%e8%87%b4%e6%80%a7&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;扩展性：HPA，Ingress Controller，Redis Cluster Slot，Kafka Brokers Partition, Database Sharding&lt;/li&gt;&#xA;&lt;li&gt;容错性：Service Mesh，多AZ，Redis Redlock，Kafka&lt;/li&gt;&#xA;&lt;li&gt;最终一致性：数据库事务，Redis Redlock，SAGA Pattern，异步消息（Async Message），重试（Retry），死信队列（Dead Letter Queue），缓存失效（Cache Invalidation），事件监听（Event-driven Monitoring）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;问题&#34;&gt;&#xD;&#xA;  问题&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%97%ae%e9%a2%98&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;h4 id=&#34;1-搜索前search需要经过鉴权authorization吗&#34;&gt;&#xD;&#xA;  1. 搜索前（Search）需要经过鉴权（Authorization）吗？&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#1-%e6%90%9c%e7%b4%a2%e5%89%8dsearch%e9%9c%80%e8%a6%81%e7%bb%8f%e8%bf%87%e9%89%b4%e6%9d%83authorization%e5%90%97&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;p&gt;如果不需要：&lt;/p&gt;</description>
    </item>
    <item>
      <title>补充</title>
      <link>http://localhost:1313/docs/study/tips/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/study/tips/</guid>
      <description>&lt;h3 id=&#34;用途&#34;&gt;&#xD;&#xA;  用途&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e7%94%a8%e9%80%94&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;h4 id=&#34;1-api-gateway&#34;&gt;&#xD;&#xA;  1. API Gateway&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#1-api-gateway&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;身份验证（Authentication &amp;amp; Authorization）&lt;/li&gt;&#xA;&lt;li&gt;速率限制（Rate Limit）&lt;/li&gt;&#xA;&lt;li&gt;请求跟踪（Request Tracing）&lt;/li&gt;&#xA;&lt;li&gt;熔断（Circuit Breaking）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;2-search-service&#34;&gt;&#xD;&#xA;  2. Search Service&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#2-search-service&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redis + Database搜索&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;3-booking-service&#34;&gt;&#xD;&#xA;  3. Booking Service&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#3-booking-service&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redis Redlock，时段级锁定（Slot-level Locking），数据库事务（Transaction）&lt;/li&gt;&#xA;&lt;li&gt;Idempotency，Request ID&lt;/li&gt;&#xA;&lt;li&gt;发布到Kafka进行缓存失效和通知&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h5 id=&#34;预约流程&#34;&gt;&#xD;&#xA;  预约流程&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%a2%84%e7%ba%a6%e6%b5%81%e7%a8%8b&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Redlock加锁&lt;/li&gt;&#xA;&lt;li&gt;数据库悲观锁（Pessimistic Lock）双检&lt;/li&gt;&#xA;&lt;li&gt;插入预约（Appointment），加入Request ID作为唯一性约束&lt;/li&gt;&#xA;&lt;li&gt;发布AppointmentCreated到Kafka&lt;/li&gt;&#xA;&lt;li&gt;释放锁（Unlock）&lt;/li&gt;&#xA;&lt;li&gt;响应客户端&lt;/li&gt;&#xA;&lt;li&gt;消费者（Search Service）Cache Invalidation&lt;/li&gt;&#xA;&lt;li&gt;消费者（Notification Service）发送消息&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;4-database&#34;&gt;&#xD;&#xA;  4. Database&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#4-database&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;数据库分区（Partition by country or Doctor‘s ID）&lt;/li&gt;&#xA;&lt;li&gt;消息总线（Message Bus），用于解耦预约和缓存失效和通知&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;5-notification-service&#34;&gt;&#xD;&#xA;  5. Notification Service&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#5-notification-service&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Email Service or SMS Service （Sendgrid &amp;amp; Twilio）&lt;/li&gt;&#xA;&lt;li&gt;In-app notification （Firebase etc.)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;扩展&#34;&gt;&#xD;&#xA;  扩展&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e6%89%a9%e5%b1%95&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;根据CPU，Memory等进行横向拓展（Horizontal Pod Autoscaler）&lt;/li&gt;&#xA;&lt;li&gt;redis分片&lt;/li&gt;&#xA;&lt;li&gt;数据库读写分离（Read-Write Separation）&lt;/li&gt;&#xA;&lt;li&gt;数据库分区（Partition）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;容错&#34;&gt;&#xD;&#xA;  容错&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%ae%b9%e9%94%99&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;熔断（Circuit Breaker， Resilience4j）&lt;/li&gt;&#xA;&lt;li&gt;健康检查（Health Checks）&lt;/li&gt;&#xA;&lt;li&gt;自我修复（Self-Healing）&lt;/li&gt;&#xA;&lt;li&gt;告警（Alert）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;安全&#34;&gt;&#xD;&#xA;  安全&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%ae%89%e5%85%a8&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;端到端TLS&lt;/li&gt;&#xA;&lt;li&gt;OAuth2登录&lt;/li&gt;&#xA;&lt;li&gt;Rate Limit&lt;/li&gt;&#xA;&lt;li&gt;Logging&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;面试表述&#34;&gt;&#xD;&#xA;  面试表述&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e9%9d%a2%e8%af%95%e8%a1%a8%e8%bf%b0&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;h4 id=&#34;负载均衡和熔断限流在哪里做不在gateway做吗&#34;&gt;&#xD;&#xA;  负载均衡和熔断限流在哪里做，不在gateway做吗？&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1%e5%92%8c%e7%86%94%e6%96%ad%e9%99%90%e6%b5%81%e5%9c%a8%e5%93%aa%e9%87%8c%e5%81%9a%e4%b8%8d%e5%9c%a8gateway%e5%81%9a%e5%90%97&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;“我们在 Gateway 层做外部限流和初级熔断，用云厂商 LB + Ingress/Gateway 控制边缘流量；在 服务内部，客户端用 Ribbon 或 Envoy 做调用负载均衡，用 Resilience4j 做熔断和限流保护下游；在 平台侧，Kubernetes Service 负责 Pod 级别均衡，若引入 Service Mesh，则 Envoy sidecar 可做更细粒度的 LB、熔断、限流、流量镜像等高级功能。这样多层协同，既保护了下游服务，也保证了全链路的高可用和可控性。”&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;k8s中推荐用什么方式做用户侧调用和服务间调用的负载均衡限流熔断&#34;&gt;&#xD;&#xA;  k8s中推荐用什么方式做用户侧调用和服务间调用的负载均衡、限流、熔断？&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#k8s%e4%b8%ad%e6%8e%a8%e8%8d%90%e7%94%a8%e4%bb%80%e4%b9%88%e6%96%b9%e5%bc%8f%e5%81%9a%e7%94%a8%e6%88%b7%e4%be%a7%e8%b0%83%e7%94%a8%e5%92%8c%e6%9c%8d%e5%8a%a1%e9%97%b4%e8%b0%83%e7%94%a8%e7%9a%84%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1%e9%99%90%e6%b5%81%e7%86%94%e6%96%ad&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;“在边缘我们用云端 LB + Ingress 或 Envoy-based Gateway 做外部负载均衡和限流，可选性强且搭配插件化熔断；在服务内部调用层面，推荐用 Service Mesh（Envoy Sidecar）来透明做服务发现、客户端负载均衡、网络限流和熔断，代码层面再用 Resilience4j 对关键依赖做二次保护。”&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;k8s需要做注册中心集群吗&#34;&gt;&#xD;&#xA;  k8s需要做注册中心集群吗？&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#k8s%e9%9c%80%e8%a6%81%e5%81%9a%e6%b3%a8%e5%86%8c%e4%b8%ad%e5%bf%83%e9%9b%86%e7%be%a4%e5%90%97&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;“在 Kubernetes 中，API Server + etcd + kube-proxy 本身就构成了高可用的服务注册与发现体系，我们只需创建 Service 资源，K8s 自动维护 Endpoints 并做 DNS/负载均衡。除非有跨集群或必须用 Spring Cloud Netflix 生态的遗留需求，否则不再额外部署注册中心集群，这样能简化架构并利用 K8s 的原生 HA 能力。”&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h3 id=&#34;待解决问题&#34;&gt;&#xD;&#xA;  待解决问题&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%be%85%e8%a7%a3%e5%86%b3%e9%97%ae%e9%a2%98&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h3&gt;&#xD;&#xA;&lt;h4 id=&#34;如果快速将服务扩展到其他国家&#34;&gt;&#xD;&#xA;  如果快速将服务扩展到其他国家？&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%a6%82%e6%9e%9c%e5%bf%ab%e9%80%9f%e5%b0%86%e6%9c%8d%e5%8a%a1%e6%89%a9%e5%b1%95%e5%88%b0%e5%85%b6%e4%bb%96%e5%9b%bd%e5%ae%b6&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h4&gt;&#xD;&#xA;&lt;h5 id=&#34;1-目标拆解支持多国家的能力需求&#34;&gt;&#xD;&#xA;  1. 目标拆解：支持多国家的能力需求&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#1-%e7%9b%ae%e6%a0%87%e6%8b%86%e8%a7%a3%e6%94%af%e6%8c%81%e5%a4%9a%e5%9b%bd%e5%ae%b6%e7%9a%84%e8%83%bd%e5%8a%9b%e9%9c%80%e6%b1%82&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;维度&lt;/th&gt;&#xA;          &lt;th&gt;要求说明&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🏛 数据隔离&lt;/td&gt;&#xA;          &lt;td&gt;每个国家业务数据逻辑隔离（合规/监管要求）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🌐 业务配置差异&lt;/td&gt;&#xA;          &lt;td&gt;国家A/B 的工作日、货币、语言、时间等不同&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🧰 服务逻辑差异&lt;/td&gt;&#xA;          &lt;td&gt;部分微服务逻辑可能略有差异&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🚀 快速部署&lt;/td&gt;&#xA;          &lt;td&gt;新国家上线不需大改动，支持可配置部署&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;🔐 合规安全&lt;/td&gt;&#xA;          &lt;td&gt;数据主权（Data Residency）遵守各国法规&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h5 id=&#34;2-配置驱动的多国家支持&#34;&gt;&#xD;&#xA;  2. 配置驱动的多国家支持&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#2-%e9%85%8d%e7%bd%ae%e9%a9%b1%e5%8a%a8%e7%9a%84%e5%a4%9a%e5%9b%bd%e5%ae%b6%e6%94%af%e6%8c%81&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h5&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;方法&lt;/th&gt;&#xA;          &lt;th&gt;实现&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;配置中心&lt;/td&gt;&#xA;          &lt;td&gt;每个国家一份配置，如 &lt;code&gt;config_fr.yaml&lt;/code&gt;, &lt;code&gt;config_de.yaml&lt;/code&gt;&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;通过配置注入&lt;/td&gt;&#xA;          &lt;td&gt;控制：开放时间段、货币、支持语言、特殊逻辑开关&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;多租户标识（Tenant ID）&lt;/td&gt;&#xA;          &lt;td&gt;请求中传入国家 ID (&lt;code&gt;X-Country: FR&lt;/code&gt;)，统一识别&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;</description>
    </item>
    <item>
      <title>Doctolib系统设计</title>
      <link>http://localhost:1313/docs/study/doctolib-system-design/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/study/doctolib-system-design/</guid>
      <description>&lt;p&gt;以下给出一个面向生产环境、可扩展且高可用的微服务架构设计方案，重点关注“患者搜索与预约”这一日历（Calendar）功能的重构。方案会针对各子系统划分、技术选型、可扩展性、容错、数据一致性、多区域部署等方面进行说明，并针对每个组件选用的语言或技术做出理由说明。&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;1-非功能需求与业务规模&#34;&gt;&#xD;&#xA;  1. 非功能需求与业务规模&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#1-%e9%9d%9e%e5%8a%9f%e8%83%bd%e9%9c%80%e6%b1%82%e4%b8%8e%e4%b8%9a%e5%8a%a1%e8%a7%84%e6%a8%a1&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h2&gt;&#xD;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;规模要求&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;患者数量：50M&lt;/li&gt;&#xA;&lt;li&gt;从业者数量：500K&lt;/li&gt;&#xA;&lt;li&gt;并发搜索：700 次/秒&lt;/li&gt;&#xA;&lt;li&gt;并发预约（booking）：90 次/秒&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;可扩展性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;支持快速上线新国家/地区&lt;/li&gt;&#xA;&lt;li&gt;支持水平扩展（水平扩容实例）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;高可用、容错、降级&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;单点故障需避免&lt;/li&gt;&#xA;&lt;li&gt;任一组件出故障时，应保证核心功能（如查询缓存、只读搜索）尽可能可用，写操作可做限流或降级提示&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;数据一致性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;预约（Booking）流程需强一致或可接受的约束下的弱一致（依实践设计），但冲突需被正确检测并妥善处理。&lt;/li&gt;&#xA;&lt;li&gt;搜索结果可采用近实时（Eventual Consistency）方式更新。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;响应时延&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;搜索响应：百毫秒级&lt;/li&gt;&#xA;&lt;li&gt;预约确认：次秒级体验&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;安全与合规&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;涉及医疗数据或个人信息，需符合相关法规（如 GDPR、HIPAA 等，视具体国家要求）&lt;/li&gt;&#xA;&lt;li&gt;传输加密（TLS），存储加密，细粒度权限控制&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;可观察性&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;全链路追踪、日志、指标监控、告警&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&#xA;&lt;p&gt;&lt;strong&gt;自动化运维 / CI/CD&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;基于容器化与基础设施即代码（IaC），实现流水线自动化部署、滚动升级、灰度发布&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h2 id=&#34;2-总体架构概览&#34;&gt;&#xD;&#xA;  2. 总体架构概览&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#2-%e6%80%bb%e4%bd%93%e6%9e%b6%e6%9e%84%e6%a6%82%e8%a7%88&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h2&gt;&#xD;&#xA;&lt;p&gt;采用微服务架构 + API Gateway + 服务网格（可选） + 多区域部署 + 弹性伸缩。核心组件：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;API Gateway&lt;/strong&gt;：统一入口，做认证鉴权、限流、路由。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Auth 服务&lt;/strong&gt;：处理登录、认证、授权（OAuth2 / JWT）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;User 服务&lt;/strong&gt;：管理患者与从业者的 Profile 信息。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Search 服务&lt;/strong&gt;：负责处理按位置、专科、可用时段等条件的搜索请求；依赖搜索索引（Elasticsearch）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Availability 服务&lt;/strong&gt;：维护和计算从业者可预约时段（working hours + 例外情况 + 节假日 + 已有预约冲突）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Booking 服务&lt;/strong&gt;：处理预约创建、修改、取消事务，确保并发安全与一致性。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Notification 服务&lt;/strong&gt;：异步发送邮件/SMS/Push 推送（预约确认、提醒、变更通知）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Analytics / Monitoring 服务&lt;/strong&gt;（或外部）：收集日志、指标，用于监控与数据分析。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Payment / Billing 服务&lt;/strong&gt;（如需付费预约，可选）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;配置与管理服务&lt;/strong&gt;：管理多国家/地区配置（时区、节假日规则、语言、合规设置等）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;异步消息平台&lt;/strong&gt;（如 Kafka）：用于事件流（Event Bus），实现微服务间的解耦异步通信，如预约事件、索引更新、通知触发等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;缓存层&lt;/strong&gt;：Redis，用于热点数据、短期缓存、分布式锁等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据库&lt;/strong&gt;：关系型数据库（PostgreSQL/CockroachDB/Vitess+MySQL/Aurora 等）；可根据跨区域需求选择分布式SQL（如 CockroachDB）或各区域独立数据库并做异步复制。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;搜索引擎&lt;/strong&gt;：Elasticsearch 或 OpenSearch，用于地理位置与属性过滤、可用性初筛索引等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;基础设施与部署&lt;/strong&gt;：容器化（Docker）、Kubernetes（EKS/GKE/AKS 或自托管 K8s）、Terraform/CloudFormation 管理资源，多区域集群部署。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;下面分模块详细阐述，并说明选型理由。&lt;/p&gt;</description>
    </item>
    <item>
      <title>缓存一致性</title>
      <link>http://localhost:1313/docs/study/cache-consistency/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/study/cache-consistency/</guid>
      <description>&lt;h2 id=&#34;延迟双删-vs-kafka&#34;&gt;&#xD;&#xA;  延迟双删 vs Kafka&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%bb%b6%e8%bf%9f%e5%8f%8c%e5%88%a0-vs-kafka&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h2&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;对比维度&lt;/th&gt;&#xA;          &lt;th&gt;延迟双删&lt;/th&gt;&#xA;          &lt;th&gt;Kafka 缓存失效通知&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;实现难度&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;简单，代码内实现&lt;/td&gt;&#xA;          &lt;td&gt;需要接入 Kafka + 消费机制&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;缓存一致性控制力&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;不稳定（延迟期间仍可能被覆盖）&lt;/td&gt;&#xA;          &lt;td&gt;强一致（通知所有消费者实时失效）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;适应多服务 / 多副本&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;差，需每个服务都实现&lt;/td&gt;&#xA;          &lt;td&gt;强，多服务可统一订阅通知&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;异步解耦能力&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;弱，紧耦合在业务逻辑中&lt;/td&gt;&#xA;          &lt;td&gt;强，数据库变更 → 异步通知&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;故障可追溯性&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;差，删失败难定位&lt;/td&gt;&#xA;          &lt;td&gt;强，Kafka 留存消息可回溯&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;网络异常容错性&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;差，失败后不易重试&lt;/td&gt;&#xA;          &lt;td&gt;好，可消费失败后重试&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;</description>
    </item>
    <item>
      <title>主流许可证对比</title>
      <link>http://localhost:1313/docs/study/license-comparison/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/docs/study/license-comparison/</guid>
      <description>&lt;h2 id=&#34;开源许可证对比表&#34;&gt;&#xD;&#xA;  开源许可证对比表&#xD;&#xA;  &lt;a class=&#34;anchor&#34; href=&#34;#%e5%bc%80%e6%ba%90%e8%ae%b8%e5%8f%af%e8%af%81%e5%af%b9%e6%af%94%e8%a1%a8&#34;&gt;#&lt;/a&gt;&#xD;&#xA;&lt;/h2&gt;&#xD;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;许可证名称&lt;/th&gt;&#xA;          &lt;th&gt;类型&lt;/th&gt;&#xA;          &lt;th&gt;专利授权&lt;/th&gt;&#xA;          &lt;th&gt;Copyleft 强度&lt;/th&gt;&#xA;          &lt;th&gt;商业兼容性&lt;/th&gt;&#xA;          &lt;th&gt;与 GPL 兼容性&lt;/th&gt;&#xA;          &lt;th&gt;适用场景&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;MIT&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;宽松&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;小型项目、库&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;Apache 2.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;宽松&lt;/td&gt;&#xA;          &lt;td&gt;✅ 有&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;企业级项目、涉及专利&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;GPL v3.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;强 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;✅ 有&lt;/td&gt;&#xA;          &lt;td&gt;✅ 强&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 限制&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;开源项目、需强制开源&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;GPL v2.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;强 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 强&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 限制&lt;/td&gt;&#xA;          &lt;td&gt;❌ 否&lt;/td&gt;&#xA;          &lt;td&gt;传统开源项目&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;AGPL v3.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;强 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;✅ 有&lt;/td&gt;&#xA;          &lt;td&gt;✅ 最强&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 限制&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;SaaS、网络服务&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;LGPL v2.1&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;弱 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 弱&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;库、插件&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;BSD 2-Clause&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;宽松&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;系统级组件、商业集成&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;BSD 3-Clause&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;宽松&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;商业软件、需署名保护&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;Boost 1.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;宽松&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;C++ 库、工具链&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;CC0 1.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;公共领域&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;❌ 无&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;数据集、内容共享&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;EPL 2.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;弱 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;✅ 有&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 弱&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;企业软件、模块化项目&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;MPL 2.0&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;弱 Copyleft&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 部分&lt;/td&gt;&#xA;          &lt;td&gt;⚠️ 弱&lt;/td&gt;&#xA;          &lt;td&gt;✅ 高&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;          &lt;td&gt;浏览器、混合授权项目&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;</description>
    </item>
  </channel>
</rss>
