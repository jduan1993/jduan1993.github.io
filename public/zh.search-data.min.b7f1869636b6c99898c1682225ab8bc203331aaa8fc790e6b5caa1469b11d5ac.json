[{"id":0,"href":"/docs/example/table-of-contents/with-toc/","title":"With ToC","section":"Table of Contents","content":"\rCaput vino delphine in tamen vias\r#\rCognita laeva illo fracta\r#\rLorem markdownum pavent auras, surgit nunc cingentibus libet Laomedonque que est. Pastor An arbor filia foedat, ne fugit aliter, per. Helicona illas et callida neptem est Oresitrophos caput, dentibus est venit. Tenet reddite famuli praesentem fortibus, quaeque vis foret si frondes gelidos gravidae circumtulit inpulit armenta nativum.\nTe at cruciabere vides rubentis manebo Maturuit in praetemptat ruborem ignara postquam habitasse Subitarum supplevit quoque fontesque venabula spretis modo Montis tot est mali quasque gravis Quinquennem domus arsit ipse Pellem turis pugnabant locavit Natus quaerere\r#\rPectora et sine mulcere, coniuge dum tincta incurvae. Quis iam; est dextra Peneosque, metuis a verba, primo. Illa sed colloque suis: magno: gramen, aera excutiunt concipit.\nPhrygiae petendo suisque extimuit, super, pars quod audet! Turba negarem. Fuerat attonitus; et dextra retinet sidera ulnas undas instimulat vacuae generis? Agnus dabat et ignotis dextera, sic tibi pacis feriente at mora euhoeque comites hostem vestras Phineus. Vultuque sanguine dominoque metuit risi fama vergit summaque meus clarissimus artesque tinguebat successor nominis cervice caelicolae.\nLimitibus misere sit\r#\rAurea non fata repertis praerupit feruntur simul, meae hosti lentaque citius levibus, cum sede dixit, Phaethon texta. Albentibus summos multifidasque iungitur loquendi an pectore, mihi ursaque omnia adfata, aeno parvumque in animi perlucentes. Epytus agis ait vixque clamat ornum adversam spondet, quid sceptra ipsum est. Reseret nec; saeva suo passu debentia linguam terga et aures et cervix de ubera. Coercet gelidumque manus, doluit volvitur induta?\nEnim sua\r#\rIuvenilior filia inlustre templa quidem herbis permittat trahens huic. In cruribus proceres sole crescitque fata, quos quos; merui maris se non tamen in, mea.\nGermana aves pignus tecta\r#\rMortalia rudibusque caelum cognosceret tantum aquis redito felicior texit, nec, aris parvo acre. Me parum contulerant multi tenentem, gratissime suis; vultum tu occupat deficeret corpora, sonum. E Actaea inplevit Phinea concepit nomenque potest sanguine captam nulla et, in duxisses campis non; mercede. Dicere cur Leucothoen obitum?\nPostibus mittam est nubibus principium pluma, exsecratur facta et. Iunge Mnemonidas pallamque pars; vere restitit alis flumina quae quoque, est ignara infestus Pyrrha. Di ducis terris maculatum At sede praemia manes nullaque!\n"},{"id":1,"href":"/docs/study/system-design/system-design/","title":"ç³»ç»Ÿè®¾è®¡","section":"ç³»ç»Ÿè®¾è®¡","content":"\rè¦æ±‚\r#\r1. åˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€‚\r#\råˆ†å¸ƒå¼ï¼šå¾®æœåŠ¡ã€å¼‚æ­¥é€šä¿¡ã€åˆ†å¸ƒå¼ç¼“å­˜ã€K8s å¯æ‰©å±•ï¼šHPAã€åˆ†åº“åˆ†è¡¨ã€K8s DNS Serviceã€å¤šAZã€å¤šå›½å®¶ 2. ç”¨æˆ·å¯æœç´¢ã€å¯é¢„çº¦ã€å¯é‡æ–°å®‰æ’ã€å¯å–æ¶ˆï¼ŒåŸºäºåŒ»ç”Ÿçš„ä½ç½®ã€ä¸“ç§‘ã€å¯ç”¨æ—¶é—´ã€‚\r#\ræœç´¢\r#\rCache Asideï¼ŒInvalidate when Booking and Cancellation (TTL ~ minutes) Caffeine å¼‚æ­¥å»¶è¿ŸåŒåˆ  æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âš¡ é«˜åå Redis å‘½ä¸­ç‡é«˜ï¼Œæ”¯æŒ QPS \u0026gt; 1000+ â±ï¸ ä½å»¶è¿Ÿ å•åŒ»ç”ŸæŸ¥è¯¢ latency â‰ˆ å‡  ms âœ… å†™åæ— è¯» Slot æ•°æ®é¢„ç”Ÿæˆã€å†™å…¥ååªè¯»ï¼Œé€‚åˆç¼“å­˜ ğŸ” å¼‚æ­¥æ›´æ–° Cache ç”± Kafka é©±åŠ¨å¼‚æ­¥æ›´æ–°ï¼Œæ— éœ€å¼ºä¸€è‡´æ€§ ç¼ºç‚¹ è¯´æ˜ ğŸ•’ æ•°æ®è½»å¾®ä¸ä¸€è‡´ TTL å¤±æ•ˆæœŸé—´å¯èƒ½å±•ç¤ºå·²è¢«é¢„çº¦çš„ slotï¼ˆåœ¨ Booking é˜¶æ®µå…œåº•ï¼‰ ğŸ§  Cache Invalidate å¤æ‚ å¤šæœåŠ¡å†™å…¥ slot çŠ¶æ€éœ€ä¿è¯æ­£ç¡®æ¸…é™¤ Redis ç¼“å­˜ ğŸ“¦ å¤§é‡ slot Redis å†…å­˜å ç”¨éœ€æ§åˆ¶ï¼ˆå¯åšåˆ†ç‰‡ or ä½¿ç”¨ Redis Clusterï¼‰ é¢„çº¦\r#\rRedlock åŠ é” (TTL ~ seconds) åŠ å…¥ Request ID ä½œä¸ºå”¯ä¸€æ€§çº¦æŸ æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ’å…¥é¢„çº¦ï¼ˆAppointmentï¼‰ å‘å¸ƒ AppointmentCreated åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âœ… é«˜ä¸€è‡´æ€§ä¿éšœ é”+äº‹åŠ¡åŒé‡ä¿è¯ âœ… å¹‚ç­‰è®¾è®¡ é˜²æ­¢é‡å¤é¢„çº¦ âœ… å¯è§‚æµ‹æ€§å¼º Kafka æ¨é€äº‹ä»¶ç”¨äºè¿½è¸ªé“¾è·¯ âœ… å¼‚æ­¥è§£è€¦ éæ ¸å¿ƒé€»è¾‘ï¼ˆé€šçŸ¥ã€ç¼“å­˜ï¼‰ä¸å½±å“ä¸»æµç¨‹æ€§èƒ½ ç¼ºç‚¹ è¯´æ˜ â— Redis ä¸å¯ç”¨ Redlock ä¾èµ– Redisï¼Œå¯å¼•å…¥é™çº§æœºåˆ¶ï¼ˆfallback DB lockï¼‰ â— é«˜å¹¶å‘ä¸‹å»¶è¿Ÿ æ‹¥å¡åœ¨çƒ­ç‚¹ slotï¼ˆæ¯”å¦‚çƒ­é—¨åŒ»ç”Ÿï¼‰å¯ç”¨é˜Ÿåˆ—æ’é˜Ÿç¼“è§£ â— äº‹åŠ¡å¤æ‚æ€§ éœ€ç»†è‡´å¤„ç†é”é‡Šæ”¾å’Œå›æ»šï¼Œé¿å…æ­»é” é‡æ–°å®‰æ’\r#\rRedlockåŠ é” (TTL ~ seconds) æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ ¡éªŒä¿®æ”¹æ—§é¢„çº¦ï¼Œæ’å…¥æ–°é¢„çº¦ å‘å¸ƒ AppointmentRescheduled åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\rä¼˜ç‚¹ è¯´æ˜ âœ… ä¸€è‡´æ€§ä¿éšœ äº‹åŠ¡æ›´æ–° + å¹‚ç­‰æ§åˆ¶ï¼Œé¿å…é”™çº¦/é‡å¤çº¦ âœ… åŒ slot å®‰å…¨ç®¡ç† æ˜¾å¼é‡Šæ”¾æ—§ slotã€é”å®šæ–° slot âœ… è§£è€¦é€»è¾‘ Kafka ç”¨äºé€šçŸ¥ä¸ç¼“å­˜åˆ·æ–°ï¼Œä¸»æµç¨‹ä¸é˜»å¡ ç¼ºç‚¹ è¯´æ˜ â— æ–°æ—§ slot çŠ¶æ€åˆ‡æ¢é€»è¾‘å¤æ‚ éœ€è¦æ˜ç¡®çŠ¶æ€æµè½¬æ¨¡å‹ â— Redis ä¸å¯ç”¨å½±å“é” é™çº§ fallbackï¼šæ•°æ®åº“æ‚²è§‚é” â— ç”¨æˆ·è¯¯æ“ä½œå¯èƒ½å¯¼è‡´é‡å¤ reschedule éœ€é™åˆ¶é¢‘ç‡ï¼Œå¢å¼ºå¹‚ç­‰æ€§ä¿éšœ å–æ¶ˆ\r#\rRedlockåŠ é” (TTL ~ seconds) æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ ¡éªŒä¿®æ”¹æ—§é¢„çº¦ å‘å¸ƒ AppointmentCanceled åˆ° Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ æƒè¡¡\r#\r3. æœåŠ¡5000ä¸‡ç”¨æˆ·ï¼Œ50ä¸‡åŒ»ç”Ÿï¼Œæ¯ç§’700æ¬¡æœç´¢ï¼Œæ¯ç§’90æ¬¡é¢„çº¦ã€‚\r#\r4. è½»æ¾æ‹“å±•æ–°åœ°åŒºã€‚\r#\ré…ç½®å±‚é¢éš”ç¦»ï¼ˆSpring Cloud Configï¼‰ æ•°æ®åº“åˆ†åº“ï¼ˆDate Partitioningï¼‰ é€šç”¨æœåŠ¡ï¼ˆCommon Servicesï¼‰å’Œå·®å¼‚åŒ–å®šåˆ¶ï¼ˆCustom Servicesï¼‰ APIè®¾è®¡ï¼ˆ/fr, /deï¼‰ å¤šç§Ÿæˆ·éƒ¨ç½²ï¼ˆnamespaceï¼‰ æ—¥å¿—æ ‡ç­¾ï¼ˆLabelï¼‰ 5. è¦è€ƒè™‘æœåŠ¡ä¹‹é—´çš„æ‰©å±•æ€§ï¼Œå®¹é”™æ€§ï¼Œæ•°æ®ä¸€è‡´æ€§ã€‚\r#\ræ‰©å±•æ€§ï¼šHPAï¼ŒIngress Controllerï¼ŒRedis Cluster Slotï¼ŒKafka Brokers Partition, Database Sharding å®¹é”™æ€§ï¼šService Meshï¼Œå¤šAZï¼ŒRedis Redlockï¼ŒKafka æœ€ç»ˆä¸€è‡´æ€§ï¼šæ•°æ®åº“äº‹åŠ¡ï¼ŒRedis Redlockï¼ŒSAGA Patternï¼Œå¼‚æ­¥æ¶ˆæ¯ï¼ˆAsync Messageï¼‰ï¼Œé‡è¯•ï¼ˆRetryï¼‰ï¼Œæ­»ä¿¡é˜Ÿåˆ—ï¼ˆDead Letter Queueï¼‰ï¼Œç¼“å­˜å¤±æ•ˆï¼ˆCache Invalidationï¼‰ï¼Œäº‹ä»¶ç›‘å¬ï¼ˆEvent-driven Monitoringï¼‰ é—®é¢˜\r#\r1. æœç´¢å‰ï¼ˆSearchï¼‰éœ€è¦ç»è¿‡é‰´æƒï¼ˆAuthorizationï¼‰å—ï¼Ÿ\r#\rå¦‚æœä¸éœ€è¦ï¼š\næŠŠSearch Serviceç½®å‰ è¿™æ ·å¯èƒ½æ›´å¸å¼•ç”¨æˆ· ä½†æ˜¯ä¼šå¢åŠ è®¿é—®é‡ 2. æœç´¢æ—¶éƒ½æœ‰ä»€ä¹ˆç­›é€‰æ¡ä»¶ï¼ˆFilter Conditionï¼‰ï¼Ÿ\r#\rå¦‚æœæ¶‰åŠåˆ°è·ç¦»ï¼Œäº¤é€šå·¥å…·ï¼Œè·¯ç¨‹ç”¨æ—¶ç­‰æ¡ä»¶ï¼š\nå¯ä»¥è®¾è®¡ç¬¬ä¸‰æ–¹ä¾›åº”å•†ï¼ˆ3rd-Party Vendorsï¼‰æä¾›åœ°å›¾ï¼ˆMap APIï¼‰ç­‰æ¥å£ å¦‚æœæ¶‰åŠåˆ°åŒ»ç”Ÿç®€ä»‹ï¼ˆSummaryï¼‰ï¼Œå…¨æ–‡æœç´¢ï¼ˆFull-Text Searchï¼‰:\nå¯ä»¥å¼•å…¥ElasticSearch 3. æˆ‘ä»¬ä¸åŒå›½å®¶çš„å¸‚åœºä½¿ç”¨åŒä¸€ä¸ªåº”ç”¨ï¼ˆThe only one appï¼‰å—ï¼Ÿ\r#\rå¦‚æœæ˜¯ï¼š\nå›½é™…åŒ–ï¼ˆInternationalizationï¼‰ï¼Œæ—¶é—´ã€è¯­è¨€ã€è´§å¸ã€æ—¥æœŸæ ¼å¼ é…ç½®å¼€å…³ï¼ˆFeature Flagï¼‰ æ ¹æ®è®¾å¤‡æœ¬åœ°æ—¶é—´ï¼ˆDevice Timeï¼‰æˆ–è€…å®šä½ï¼ˆLocalizationï¼‰ å¦‚æœä¸æ˜¯ï¼š\néƒ¨ç½²è¿‡ç¨‹è¦è€ƒè™‘æ›´å¤šæ¨¡å— 4. é¢„çº¦ä¼šè·¨å¤©ï¼ˆSpan 2 daysï¼‰å—ï¼Ÿ\r#\rè¦è€ƒè™‘æ•°æ®åº“è¡¨ç»“æ„ï¼ˆDatabase table structure) ä»£ç é€»è¾‘ä¸­è¦è€ƒè™‘ 5. æ¯ç§’700æ¬¡æœç´¢å’Œ90æ¬¡é¢„çº¦æ˜¯æœ€é«˜å³°å€¼ï¼ˆMaximum Peak Valueï¼‰å—ï¼Ÿ\r#\rå½±å“è§„æ¨¡ï¼ˆScaleï¼‰ å¯æ‰©å±•æ€§å’Œå®‰å…¨æ€§\r#\r1. å¯æ‰©å±•æ€§\r#\ræ–¹é¢ å…³é”®å®è·µ æ°´å¹³æ‰©å±•ï¼ˆHorizontal Scalingï¼‰ æ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å¤šä¸ªå‰¯æœ¬ æœåŠ¡è‡ªæ²»ï¼ˆService Autonomyï¼‰ å„æœåŠ¡å¯ç‹¬ç«‹æ‰©ç¼©ï¼Œä¸ä¾èµ–æ•´ä½“ç³»ç»Ÿ å®¹å™¨åŒ–éƒ¨ç½² ä½¿ç”¨ Docker + Kubernetes å®ç°è‡ªåŠ¨æ‰©ç¼©å®¹ è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰ ä½¿ç”¨ API Gateway æˆ– Service Mesh å‡è¡¡æµé‡ å¼‚æ­¥é€šä¿¡ Kafkaã€RabbitMQ ç­‰æé«˜ååé‡å’Œè§£è€¦ ç¼“å­˜ç­–ç•¥ Redisã€æœ¬åœ°ç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ› æ•°æ®åº“åˆ†åº“åˆ†è¡¨ æ°´å¹³æ‹†åˆ†æå‡å¹¶å‘èƒ½åŠ› æœåŠ¡ç†”æ–­/é™æµ Sentinelã€Hystrix é˜²æ­¢é›ªå´©æ•ˆåº” 2. å®‰å…¨æ€§\r#\rå®‰å…¨é¢†åŸŸ æŠ€æœ¯æ‰‹æ®µ èº«ä»½è®¤è¯ï¼ˆAuthenticationï¼‰ OAuth 2.0ã€OIDCã€JWT Token æœåŠ¡æˆæƒï¼ˆAuthorizationï¼‰ RBACã€ABACã€API æƒé™ç½‘å…³ é€šä¿¡åŠ å¯† HTTPS / TLSã€gRPC + mTLS æœåŠ¡é—´è®¤è¯ Service Meshï¼ˆå¦‚ Istioï¼‰æ”¯æŒ mTLS è‡ªåŠ¨åŠ å¯† API ç½‘å…³å®‰å…¨ é™æµã€é˜²æ­¢é‡æ”¾æ”»å‡»ã€è¯·æ±‚ç­¾åéªŒè¯ æ•°æ®å®‰å…¨ æ•°æ®åŠ å¯†ï¼ˆä¼ è¾“ + å­˜å‚¨ï¼‰ã€è„±æ•ã€è®¿é—®å®¡è®¡ å®¹å™¨å®‰å…¨ é•œåƒæ‰«æã€Kubernetes å®‰å…¨ç­–ç•¥ï¼ˆPodSecurityPolicyï¼‰ æ—¥å¿—å®¡è®¡ å®¡è®¡ç”¨æˆ·è¡Œä¸ºã€å¼‚å¸¸è®¿é—®è®°å½• é˜²æ”»å‡» é˜²æ­¢ XSS / CSRF / SQL æ³¨å…¥ï¼Œä½¿ç”¨ WAFã€é˜²ç«å¢™ç­‰ ä¼˜åŒ–\r#\ræœåŠ¡é—´é€šä¿¡åŒå‘TLSï¼ˆMutual TLS between servicesï¼‰ ç”¨Service Meshç»Ÿä¸€åšç†”æ–­ã€é™æµã€é‡è¯•ï¼ˆCentralized resiliency by service meshï¼‰ å¤šAZéƒ¨ç½²ï¼ŒåŒ…æ‹¬Servicesï¼ŒRedis Clusterç­‰ï¼ˆMulti-AZï¼‰ äºŒçº§ç¼“å­˜ï¼Œä¸€çº§Caffeineï¼ˆLocalï¼‰ï¼ŒäºŒçº§Redisï¼ˆDistributedï¼‰ æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼ˆRead-Write Separationï¼‰ï¼Œåˆ†åº“åˆ†è¡¨ï¼ˆShardingï¼‰ å…¨é“¾è·¯Traceï¼ˆTelemetryï¼Œend-to-end tracingï¼‰ å›ºå®šæ—¶é—´æ‰¹å¤„ç†çƒ­ç‚¹æ—¶é—´å¤šï¼ˆScheduled batch to store hot time slotsï¼‰ "},{"id":2,"href":"/docs/study/system-design/doctolib-tips/","title":"Doctolib å¤§çº²","section":"ç³»ç»Ÿè®¾è®¡","content":"\rç”¨é€”\r#\r1. API Gateway\r#\rèº«ä»½éªŒè¯ï¼ˆAuthentication \u0026amp; Authorizationï¼‰ é€Ÿç‡é™åˆ¶ï¼ˆRate Limitï¼‰ è¯·æ±‚è·Ÿè¸ªï¼ˆRequest Tracingï¼‰ ç†”æ–­ï¼ˆCircuit Breakingï¼‰ 2. Search Service\r#\rRedis + Databaseæœç´¢ 3. Booking Service\r#\rRedis Redlockï¼Œæ—¶æ®µçº§é”å®šï¼ˆSlot-level Lockingï¼‰ï¼Œæ•°æ®åº“äº‹åŠ¡ï¼ˆTransactionï¼‰ Idempotencyï¼ŒRequest ID å‘å¸ƒåˆ°Kafkaè¿›è¡Œç¼“å­˜å¤±æ•ˆå’Œé€šçŸ¥ é¢„çº¦æµç¨‹\r#\rRedlockåŠ é” æ•°æ®åº“æ‚²è§‚é”ï¼ˆPessimistic Lockï¼‰åŒæ£€ æ’å…¥é¢„çº¦ï¼ˆAppointmentï¼‰ï¼ŒåŠ å…¥Request IDä½œä¸ºå”¯ä¸€æ€§çº¦æŸ å‘å¸ƒAppointmentCreatedåˆ°Kafka é‡Šæ”¾é”ï¼ˆUnlockï¼‰ å“åº”å®¢æˆ·ç«¯ æ¶ˆè´¹è€…ï¼ˆSearch Serviceï¼‰Cache Invalidation æ¶ˆè´¹è€…ï¼ˆNotification Serviceï¼‰å‘é€æ¶ˆæ¯ 4. Database\r#\ræ•°æ®åº“åˆ†åŒºï¼ˆPartition by country or Doctorâ€˜s IDï¼‰ æ¶ˆæ¯æ€»çº¿ï¼ˆMessage Busï¼‰ï¼Œç”¨äºè§£è€¦é¢„çº¦å’Œç¼“å­˜å¤±æ•ˆå’Œé€šçŸ¥ 5. Notification Service\r#\rEmail Service or SMS Service ï¼ˆSendgrid \u0026amp; Twilioï¼‰ In-app notification ï¼ˆFirebase etc.) æ‰©å±•\r#\ræ ¹æ®CPUï¼ŒMemoryç­‰è¿›è¡Œæ¨ªå‘æ‹“å±•ï¼ˆHorizontal Pod Autoscalerï¼‰ redisåˆ†ç‰‡ æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼ˆRead-Write Separationï¼‰ æ•°æ®åº“åˆ†åŒºï¼ˆPartitionï¼‰ å®¹é”™\r#\rç†”æ–­ï¼ˆCircuit Breakerï¼Œ Resilience4jï¼‰ å¥åº·æ£€æŸ¥ï¼ˆHealth Checksï¼‰ è‡ªæˆ‘ä¿®å¤ï¼ˆSelf-Healingï¼‰ å‘Šè­¦ï¼ˆAlertï¼‰ å®‰å…¨\r#\rç«¯åˆ°ç«¯TLS OAuth2ç™»å½• Rate Limit Logging é¢è¯•è¡¨è¿°\r#\rè´Ÿè½½å‡è¡¡å’Œç†”æ–­é™æµåœ¨å“ªé‡Œåšï¼Œä¸åœ¨gatewayåšå—ï¼Ÿ\r#\râ€œæˆ‘ä»¬åœ¨ Gateway å±‚åšå¤–éƒ¨é™æµå’Œåˆçº§ç†”æ–­ï¼Œç”¨äº‘å‚å•† LB + Ingress/Gateway æ§åˆ¶è¾¹ç¼˜æµé‡ï¼›åœ¨ æœåŠ¡å†…éƒ¨ï¼Œå®¢æˆ·ç«¯ç”¨ Ribbon æˆ– Envoy åšè°ƒç”¨è´Ÿè½½å‡è¡¡ï¼Œç”¨ Resilience4j åšç†”æ–­å’Œé™æµä¿æŠ¤ä¸‹æ¸¸ï¼›åœ¨ å¹³å°ä¾§ï¼ŒKubernetes Service è´Ÿè´£ Pod çº§åˆ«å‡è¡¡ï¼Œè‹¥å¼•å…¥ Service Meshï¼Œåˆ™ Envoy sidecar å¯åšæ›´ç»†ç²’åº¦çš„ LBã€ç†”æ–­ã€é™æµã€æµé‡é•œåƒç­‰é«˜çº§åŠŸèƒ½ã€‚è¿™æ ·å¤šå±‚ååŒï¼Œæ—¢ä¿æŠ¤äº†ä¸‹æ¸¸æœåŠ¡ï¼Œä¹Ÿä¿è¯äº†å…¨é“¾è·¯çš„é«˜å¯ç”¨å’Œå¯æ§æ€§ã€‚â€ k8sä¸­æ¨èç”¨ä»€ä¹ˆæ–¹å¼åšç”¨æˆ·ä¾§è°ƒç”¨å’ŒæœåŠ¡é—´è°ƒç”¨çš„è´Ÿè½½å‡è¡¡ã€é™æµã€ç†”æ–­ï¼Ÿ\r#\râ€œåœ¨è¾¹ç¼˜æˆ‘ä»¬ç”¨äº‘ç«¯ LB + Ingress æˆ– Envoy-based Gateway åšå¤–éƒ¨è´Ÿè½½å‡è¡¡å’Œé™æµï¼Œå¯é€‰æ€§å¼ºä¸”æ­é…æ’ä»¶åŒ–ç†”æ–­ï¼›åœ¨æœåŠ¡å†…éƒ¨è°ƒç”¨å±‚é¢ï¼Œæ¨èç”¨ Service Meshï¼ˆEnvoy Sidecarï¼‰æ¥é€æ˜åšæœåŠ¡å‘ç°ã€å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€ç½‘ç»œé™æµå’Œç†”æ–­ï¼Œä»£ç å±‚é¢å†ç”¨ Resilience4j å¯¹å…³é”®ä¾èµ–åšäºŒæ¬¡ä¿æŠ¤ã€‚â€ k8séœ€è¦åšæ³¨å†Œä¸­å¿ƒé›†ç¾¤å—ï¼Ÿ\r#\râ€œåœ¨ Kubernetes ä¸­ï¼ŒAPI Server + etcd + kube-proxy æœ¬èº«å°±æ„æˆäº†é«˜å¯ç”¨çš„æœåŠ¡æ³¨å†Œä¸å‘ç°ä½“ç³»ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»º Service èµ„æºï¼ŒK8s è‡ªåŠ¨ç»´æŠ¤ Endpoints å¹¶åš DNS/è´Ÿè½½å‡è¡¡ã€‚é™¤éæœ‰è·¨é›†ç¾¤æˆ–å¿…é¡»ç”¨ Spring Cloud Netflix ç”Ÿæ€çš„é—ç•™éœ€æ±‚ï¼Œå¦åˆ™ä¸å†é¢å¤–éƒ¨ç½²æ³¨å†Œä¸­å¿ƒé›†ç¾¤ï¼Œè¿™æ ·èƒ½ç®€åŒ–æ¶æ„å¹¶åˆ©ç”¨ K8s çš„åŸç”Ÿ HA èƒ½åŠ›ã€‚â€ å¾…è§£å†³é—®é¢˜\r#\rå¦‚æœå¿«é€Ÿå°†æœåŠ¡æ‰©å±•åˆ°å…¶ä»–å›½å®¶ï¼Ÿ\r#\r1. ç›®æ ‡æ‹†è§£ï¼šæ”¯æŒå¤šå›½å®¶çš„èƒ½åŠ›éœ€æ±‚\r#\rç»´åº¦ è¦æ±‚è¯´æ˜ ğŸ› æ•°æ®éš”ç¦» æ¯ä¸ªå›½å®¶ä¸šåŠ¡æ•°æ®é€»è¾‘éš”ç¦»ï¼ˆåˆè§„/ç›‘ç®¡è¦æ±‚ï¼‰ ğŸŒ ä¸šåŠ¡é…ç½®å·®å¼‚ å›½å®¶A/B çš„å·¥ä½œæ—¥ã€è´§å¸ã€è¯­è¨€ã€æ—¶é—´ç­‰ä¸åŒ ğŸ§° æœåŠ¡é€»è¾‘å·®å¼‚ éƒ¨åˆ†å¾®æœåŠ¡é€»è¾‘å¯èƒ½ç•¥æœ‰å·®å¼‚ ğŸš€ å¿«é€Ÿéƒ¨ç½² æ–°å›½å®¶ä¸Šçº¿ä¸éœ€å¤§æ”¹åŠ¨ï¼Œæ”¯æŒå¯é…ç½®éƒ¨ç½² ğŸ” åˆè§„å®‰å…¨ æ•°æ®ä¸»æƒï¼ˆData Residencyï¼‰éµå®ˆå„å›½æ³•è§„ 2. é…ç½®é©±åŠ¨çš„å¤šå›½å®¶æ”¯æŒ\r#\ræ–¹æ³• å®ç° é…ç½®ä¸­å¿ƒ æ¯ä¸ªå›½å®¶ä¸€ä»½é…ç½®ï¼Œå¦‚ config_fr.yaml, config_de.yaml é€šè¿‡é…ç½®æ³¨å…¥ æ§åˆ¶ï¼šå¼€æ”¾æ—¶é—´æ®µã€è´§å¸ã€æ”¯æŒè¯­è¨€ã€ç‰¹æ®Šé€»è¾‘å¼€å…³ å¤šç§Ÿæˆ·æ ‡è¯†ï¼ˆTenant IDï¼‰ è¯·æ±‚ä¸­ä¼ å…¥å›½å®¶ ID (X-Country: FR)ï¼Œç»Ÿä¸€è¯†åˆ« "},{"id":3,"href":"/docs/example/table-of-contents/without-toc/","title":"Without ToC","section":"Table of Contents","content":"\rAt me ipso nepotibus nunc celebratior genus\r#\rTanto oblite\r#\rLorem markdownum pectora novis patenti igne sua opus aurae feras materiaque illic demersit imago et aristas questaque posset. Vomit quoque suo inhaesuro clara. Esse cumque, per referri triste. Ut exponit solisque communis in tendens vincetis agisque iamque huic bene ante vetat omina Thebae rates. Aeacus servat admonitu concidit, ad resimas vultus et rugas vultu dignamque Siphnon.\nQuam iugulum regia simulacra, plus meruit humo pecorumque haesit, ab discedunt dixit: ritu pharetramque. Exul Laurenti orantem modo, per densum missisque labor manibus non colla unum, obiectat. Tu pervia collo, fessus quae Cretenque Myconon crate! Tegumenque quae invisi sudore per vocari quaque plus ventis fluidos. Nodo perque, fugisse pectora sorores.\nSumme promissa supple vadit lenius\r#\rQuibus largis latebris aethera versato est, ait sentiat faciemque. Aequata alis nec Caeneus exululat inclite corpus est, ire tibi ostendens et tibi. Rigent et vires dique possent lumina; eadem dixit poma funeribus paret et felix reddebant ventis utile lignum.\nRemansit notam Stygia feroxque Et dabit materna Vipereas Phrygiaeque umbram sollicito cruore conlucere suus Quarum Elis corniger Nec ieiunia dixit Vertitur mos ortu ramosam contudit dumque; placabat ac lumen. Coniunx Amoris spatium poenamque cavernis Thebae Pleiadasque ponunt, rapiare cum quae parum nimium rima.\nQuidem resupinus inducto solebat una facinus quae\r#\rCredulitas iniqua praepetibus paruit prospexit, voce poena, sub rupit sinuatur, quin suum ventorumque arcadiae priori. Soporiferam erat formamque, fecit, invergens, nymphae mutat fessas ait finge.\nBaculum mandataque ne addere capiti violentior Altera duas quam hoc ille tenues inquit Sicula sidereus latrantis domoque ratae polluit comites Possit oro clausura namque se nunc iuvenisque Faciem posuit Quodque cum ponunt novercae nata vestrae aratra Ite extrema Phrygiis, patre dentibus, tonso perculit, enim blanda, manibus fide quos caput armis, posse! Nocendo fas Alcyonae lacertis structa ferarum manus fulmen dubius, saxa caelum effuge extremis fixum tumor adfecit bella, potentes? Dum nec insidiosa tempora tegit spirarunt. Per lupi pars foliis, porreximus humum negant sunt subposuere Sidone steterant auro. Memoraverit sine: ferrum idem Orion caelum heres gerebat fixis?\n"},{"id":4,"href":"/docs/example/table-of-contents/","title":"Table of Contents","section":"Example Site","content":"\rUbi loqui\r#\rMentem genus facietque salire tempus bracchia\r#\rLorem markdownum partu paterno Achillem. Habent amne generosi aderant ad pellem nec erat sustinet merces columque haec et, dixit minus nutrit accipiam subibis subdidit. Temeraria servatum agros qui sed fulva facta. Primum ultima, dedit, suo quisque linguae medentes fixo: tum petis.\nRapit vocant si hunc siste adspice\r#\rOra precari Patraeque Neptunia, dixit Danae Cithaeron armaque maxima in nati Coniugis templis fluidove. Effugit usus nec ingreditur agmen ac manus conlato. Nullis vagis nequiquam vultibus aliquos altera suum venis teneas fretum. Armos remotis hoc sine ferrea iuncta quam!\nLocus fuit caecis\r#\rNefas discordemque domino montes numen tum humili nexilibusque exit, Iove. Quae miror esse, scelerisque Melaneus viribus. Miseri laurus. Hoc est proposita me ante aliquid, aura inponere candidioribus quidque accendit bella, sumpta. Intravit quam erat figentem hunc, motus de fontes parvo tempestate.\niscsi_virus = pitch(json_in_on(eupViral),\rnorthbridge_services_troubleshooting, personal(\rfirmware_rw.trash_rw_crm.device(interactive_gopher_personal,\rsoftware, -1), megabit, ergonomicsSoftware(cmyk_usb_panel,\rmips_whitelist_duplex, cpa)));\rif (5) {\rmanagementNetwork += dma - boolean;\rkilohertz_token = 2;\rhoneypot_affiliate_ergonomics = fiber;\r}\rmouseNorthbridge = byte(nybble_xmp_modem.horse_subnet(\ranalogThroughputService * graphicPoint, drop(daw_bit, dnsIntranet),\rgateway_ospf), repository.domain_key.mouse(serverData(fileNetwork,\rtrim_duplex_file), cellTapeDirect, token_tooltip_mashup(\rripcordingMashup)));\rmodule_it = honeypot_driver(client_cold_dvr(593902, ripping_frequency) +\rcoreLog.joystick(componentUdpLink), windows_expansion_touchscreen);\rbashGigabit.external.reality(2, server_hardware_codec.flops.ebookSampling(\rciscNavigationBacklink, table + cleanDriver), indexProtocolIsp);\rPlacabilis coactis nega ingemuit ignoscat nimia non\r#\rFrontis turba. Oculi gravis est Delphice; inque praedaque sanguine manu non.\nif (ad_api) {\rzif += usb.tiffAvatarRate(subnet, digital_rt) + exploitDrive;\rgigaflops(2 - bluetooth, edi_asp_memory.gopher(queryCursor, laptop),\rpanel_point_firmware);\rspyware_bash.statePopApplet = express_netbios_digital(\rinsertion_troubleshooting.brouter(recordFolderUs), 65);\r}\rrecursionCoreRay = -5;\rif (hub == non) {\rportBoxVirus = soundWeb(recursive_card(rwTechnologyLeopard),\rfont_radcab, guidCmsScalable + reciprocalMatrixPim);\rleft.bug = screenshot;\r} else {\rtooltipOpacity = raw_process_permalink(webcamFontUser, -1);\rexecutable_router += tape;\r}\rif (tft) {\rbandwidthWeb *= social_page;\r} else {\rregular += 611883;\rthumbnail /= system_lag_keyboard;\r}\rCaesorum illa tu sentit micat vestes papyriferi\r#\rInde aderam facti; Theseus vis de tauri illa peream. Oculos uberaque non regisque vobis cursuque, opus venit quam vulnera. Et maiora necemque, lege modo; gestanda nitidi, vero? Dum ne pectoraque testantur.\nVenasque repulsa Samos qui, exspectatum eram animosque hinc, aut manes, Assyrii. Cupiens auctoribus pariter rubet, profana magni super nocens. Vos ius sibilat inpar turba visae iusto! Sedes ante dum superest extrema.\n"},{"id":5,"href":"/docs/example/","title":"Example Site","section":"Docs","content":"\rIntroduction\r#\rFerre hinnitibus erat accipitrem dixi Troiae tollens\r#\rLorem markdownum, a quoque nutu est quodcumque mandasset veluti. Passim inportuna totidemque nympha fert; repetens pendent, poenarum guttura sed vacet non, mortali undas. Omnis pharetramque gramen portentificisque membris servatum novabis fallit de nubibus atque silvas mihi. Dixit repetitaque Quid; verrit longa; sententia mandat quascumque nescio solebat litore; noctes. Hostem haerentem circuit plenaque tamen.\nPedum ne indigenae finire invergens carpebat Velit posses summoque De fumos illa foret Est simul fameque tauri qua ad\r#\rLocum nullus nisi vomentes. Ab Persea sermone vela, miratur aratro; eandem Argolicas gener.\nMe sol\r#\rNec dis certa fuit socer, Nonacria dies manet tacitaque sibi? Sucis est iactata Castrumque iudex, et iactato quoque terraeque es tandem et maternos vittis. Lumina litus bene poenamque animos callem ne tuas in leones illam dea cadunt genus, et pleno nunc in quod. Anumque crescentesque sanguinis progenies nuribus rustica tinguet. Pater omnes liquido creditis noctem.\nif (mirrored(icmp_dvd_pim, 3, smbMirroredHard) != lion(clickImportQueue,\rviralItunesBalancing, bankruptcy_file_pptp)) {\rfile += ip_cybercrime_suffix;\r}\rif (runtimeSmartRom == netMarketingWord) {\rvirusBalancingWin *= scriptPromptBespoke + raster(post_drive,\rwindowsSli);\rcd = address_hertz_trojan;\rsoap_ccd.pcbServerGigahertz(asp_hardware_isa, offlinePeopleware, nui);\r} else {\rmegabyte.api = modem_flowchart - web + syntaxHalftoneAddress;\r}\rif (3 \u0026lt; mebibyteNetworkAnimated) {\rpharming_regular_error *= jsp_ribbon + algorithm * recycleMediaKindle(\rdvrSyntax, cdma);\radf_sla *= hoverCropDrive;\rtemplateNtfs = -1 - vertical;\r} else {\rexpressionCompressionVariable.bootMulti = white_eup_javascript(\rtable_suffix);\rguidPpiPram.tracerouteLinux += rtfTerabyteQuicktime(1,\rmanagementRosetta(webcamActivex), 740874);\r}\rvar virusTweetSsl = nullGigo;\rTrepident sitimque\r#\rSentiet et ferali errorem fessam, coercet superbus, Ascaniumque in pennis mediis; dolor? Vidit imi Aeacon perfida propositos adde, tua Somni Fluctibus errante lustrat non.\nTamen inde, vos videt e flammis Scythica parantem rupisque pectora umbras. Haec ficta canistris repercusso simul ego aris Dixit! Esse Fama trepidare hunc crescendo vigor ululasse vertice exspatiantur celer tepidique petita aversata oculis iussa est me ferro.\n"},{"id":6,"href":"/docs/example/collapsed/3rd-level/4th-level/","title":"4th Level","section":"3rd Level","content":"\r4th Level of Menu\r#\rCaesorum illa tu sentit micat vestes papyriferi\r#\rInde aderam facti; Theseus vis de tauri illa peream. Oculos uberaque non regisque vobis cursuque, opus venit quam vulnera. Et maiora necemque, lege modo; gestanda nitidi, vero? Dum ne pectoraque testantur.\nVenasque repulsa Samos qui, exspectatum eram animosque hinc, aut manes, Assyrii. Cupiens auctoribus pariter rubet, profana magni super nocens. Vos ius sibilat inpar turba visae iusto! Sedes ante dum superest extrema.\n"},{"id":7,"href":"/docs/example/collapsed/3rd-level/","title":"3rd Level","section":"Collapsed","content":"\r3rd Level of Menu\r#\rNefas discordemque domino montes numen tum humili nexilibusque exit, Iove. Quae miror esse, scelerisque Melaneus viribus. Miseri laurus. Hoc est proposita me ante aliquid, aura inponere candidioribus quidque accendit bella, sumpta. Intravit quam erat figentem hunc, motus de fontes parvo tempestate.\niscsi_virus = pitch(json_in_on(eupViral),\rnorthbridge_services_troubleshooting, personal(\rfirmware_rw.trash_rw_crm.device(interactive_gopher_personal,\rsoftware, -1), megabit, ergonomicsSoftware(cmyk_usb_panel,\rmips_whitelist_duplex, cpa)));\rif (5) {\rmanagementNetwork += dma - boolean;\rkilohertz_token = 2;\rhoneypot_affiliate_ergonomics = fiber;\r}\rmouseNorthbridge = byte(nybble_xmp_modem.horse_subnet(\ranalogThroughputService * graphicPoint, drop(daw_bit, dnsIntranet),\rgateway_ospf), repository.domain_key.mouse(serverData(fileNetwork,\rtrim_duplex_file), cellTapeDirect, token_tooltip_mashup(\rripcordingMashup)));\rmodule_it = honeypot_driver(client_cold_dvr(593902, ripping_frequency) +\rcoreLog.joystick(componentUdpLink), windows_expansion_touchscreen);\rbashGigabit.external.reality(2, server_hardware_codec.flops.ebookSampling(\rciscNavigationBacklink, table + cleanDriver), indexProtocolIsp);\r"},{"id":8,"href":"/docs/example/hidden/","title":"Hidden","section":"Example Site","content":"\rThis page is hidden in menu\r#\rQuondam non pater est dignior ille Eurotas\r#\rLatent te facies\r#\rLorem markdownum arma ignoscas vocavit quoque ille texit mandata mentis ultimus, frementes, qui in vel. Hippotades Peleus pennas conscia cuiquam Caeneus quas.\nPater demittere evincitque reddunt Maxime adhuc pressit huc Danaas quid freta Soror ego Luctus linguam saxa ultroque prior Tatiumque inquit Saepe liquitur subita superata dederat Anius sudor Cum honorum Latona\r#\rO fallor in sustinui iussorum equidem. Nymphae operi oris alii fronde parens dumque, in auro ait mox ingenti proxima iamdudum maius?\nreality(burnDocking(apache_nanometer),\rpad.property_data_programming.sectorBrowserPpga(dataMask, 37,\rrecycleRup));\rintellectualVaporwareUser += -5 * 4;\rtraceroute_key_upnp /= lag_optical(android.smb(thyristorTftp));\rsurge_host_golden = mca_compact_device(dual_dpi_opengl, 33,\rcommerce_add_ppc);\rif (lun_ipv) {\rverticalExtranet(1, thumbnail_ttl, 3);\rbar_graphics_jpeg(chipset - sector_xmp_beta);\r}\rFronde cetera dextrae sequens pennis voce muneris\r#\rActa cretus diem restet utque; move integer, oscula non inspirat, noctisque scelus! Nantemque in suas vobis quamvis, et labori!\nvar runtimeDiskCompiler = home - array_ad_software;\rif (internic \u0026gt; disk) {\remoticonLockCron += 37 + bps - 4;\rwan_ansi_honeypot.cardGigaflops = artificialStorageCgi;\rsimplex -= downloadAccess;\r}\rvar volumeHardeningAndroid = pixel + tftp + onProcessorUnmount;\rsector(memory(firewire + interlaced, wired)); "},{"id":9,"href":"/docs/hidden/1/","title":"1st","section":"éšè—","content":"\rList\r#\rå¢åŠ ã€æ’å…¥å…ƒç´ \r#\rlst.append(x)ï¼šåœ¨æœ«å°¾æ·»åŠ å…ƒç´  xã€‚ lst.extend(iterable)ï¼šåœ¨æœ«å°¾ä¸€æ¬¡æ€§è¿½åŠ ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œç›¸å½“äºå¤šæ¬¡ appendã€‚ lst.insert(i, x)ï¼šåœ¨ç´¢å¼• i ä½ç½®æ’å…¥å…ƒç´  xï¼Œåé¢çš„å…ƒç´ å³ç§»ã€‚ åˆ é™¤å…ƒç´ \r#\rlst.pop([i])ï¼šåˆ é™¤å¹¶è¿”å›ç´¢å¼• i å¤„çš„å…ƒç´ ï¼Œè‹¥ä¸ä¼  iï¼Œé»˜è®¤åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´ ã€‚ lst.remove(x)ï¼šåˆ é™¤åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå€¼ä¸º x çš„å…ƒç´ ï¼›è‹¥ä¸å­˜åœ¨åˆ™æŠ› ValueErrorã€‚ del lst[i] / del lst[i:j]ï¼šé€šè¿‡ del å…³é”®å­—åˆ é™¤ç´¢å¼• i å¤„æˆ–åŒºé—´ [i:j] å†…çš„å…ƒç´ ã€‚ lst.clear()ï¼šæ¸…ç©ºåˆ—è¡¨ï¼Œç­‰ä»·äº del lst[:]ã€‚ æŸ¥æ‰¾ä¸ç»Ÿè®¡\r#\rlst.index(x[, start[, end]])ï¼šè¿”å›åˆ—è¡¨ä¸­å€¼ä¸º x çš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ï¼Œå¯é€‰æŒ‡å®šæŸ¥æ‰¾åŒºé—´ã€‚ lst.count(x)ï¼šç»Ÿè®¡åˆ—è¡¨ä¸­å€¼ä¸º x çš„å‡ºç°æ¬¡æ•°ã€‚ æ’åºå’Œåè½¬\r#\rlst.sort(key=None, reverse=False)ï¼šå°±åœ°ï¼ˆin-placeï¼‰å‡åºæ’åºï¼Œæ”¯æŒ key å‡½æ•°å’Œ reverse=Trueï¼ˆé™åºï¼‰ã€‚ lst.reverse()ï¼šå°±åœ°åè½¬åˆ—è¡¨é¡ºåºã€‚ sorted(lst, key=None, reverse=False)ï¼šå†…å»ºå‡½æ•°ï¼Œè¿”å›æ–°çš„æ’åºååˆ—è¡¨ï¼Œä¸æ”¹å˜åŸåˆ—è¡¨ã€‚ å¤åˆ¶\r#\rlst.copy()ï¼šæµ…æ‹·è´åˆ—è¡¨ï¼Œç›¸å½“äº lst[:]ã€‚ å…¶ä»–å¸¸è§æ“ä½œ\r#\rlen(lst)ï¼šè¿”å›åˆ—è¡¨é•¿åº¦ã€‚ lst[i] / lst[i:j:k]ï¼šç´¢å¼•æˆ–åˆ‡ç‰‡æ“ä½œï¼Œå¯è¯»å¯å†™ï¼ˆåˆ‡ç‰‡èµ‹å€¼æ—¶æ›¿æ¢åŒºé—´ï¼‰ã€‚ i in lstï¼šåˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)ã€‚ min(lst)ã€max(lst)ï¼šè¿”å›æœ€å°å€¼/æœ€å¤§å€¼ï¼ˆåˆ—è¡¨å…ƒç´ éœ€å¯æ¯”è¾ƒï¼‰ã€‚ Set\r#\rå¢åŠ ã€åˆ é™¤å…ƒç´ \r#\rs.add(x)ï¼šå°†å…ƒç´  x æ·»åŠ åˆ°é›†åˆä¸­ã€‚ s.update(iterable)ï¼šå°†å¯è¿­ä»£å¯¹è±¡ä¸­çš„æ‰€æœ‰å…ƒç´ åŠ åˆ°é›†åˆä¸­ã€‚ s.remove(x)ï¼šåˆ é™¤å…ƒç´  xï¼Œè‹¥ä¸å­˜åœ¨åˆ™æŠ› KeyErrorã€‚ s.discard(x)ï¼šåˆ é™¤å…ƒç´  xï¼Œè‹¥ä¸å­˜åœ¨ä¸æŠ›å¼‚å¸¸ã€‚ s.pop()ï¼šéšæœºåˆ é™¤å¹¶è¿”å›ä¸€ä¸ªå…ƒç´ ï¼ˆé›†åˆæ˜¯æ— åºçš„ï¼‰ã€‚ s.clear()ï¼šæ¸…ç©ºé›†åˆã€‚ Dict\r#\rè®¿é—®ã€èµ‹å€¼\r#\rd[key]ï¼šè·å–é”® key å¯¹åº”çš„å€¼ï¼Œè‹¥ key ä¸å­˜åœ¨æŠ› KeyErrorã€‚ d.get(key[, default])ï¼šè·å–é”® key çš„å€¼ï¼Œè‹¥ä¸å­˜åœ¨è¿”å› defaultï¼ˆé»˜è®¤ä¸º Noneï¼‰ã€‚ d[key] = valueï¼šæ–°å¢æˆ–ä¿®æ”¹é”®å€¼å¯¹ã€‚ d.setdefault(key[, default])ï¼šè‹¥ key å­˜åœ¨ï¼Œè¿”å›å¯¹åº”å€¼ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™å°† key: default åŠ å…¥å­—å…¸å¹¶è¿”å› defaultã€‚ åˆ é™¤\r#\rd.pop(key[, default])ï¼šåˆ é™¤é”® key å¹¶è¿”å›å¯¹åº”å€¼ï¼›è‹¥ä¸å­˜åœ¨ä¸”æœªç»™ defaultï¼ŒæŠ› KeyErrorï¼›è‹¥æä¾› defaultï¼Œè¿”å› defaultã€‚ d.popitem()ï¼šéšæœºï¼ˆå®é™…æ˜¯ LIFO é¡ºåºï¼‰åˆ é™¤å¹¶è¿”å›ä¸€å¯¹ (key, value)ï¼›Python3.7+ ä¸­ä¸ºåˆ é™¤æœ€åæ’å…¥çš„é”®å€¼å¯¹ã€‚ del d[key]ï¼šåˆ é™¤é”® keyï¼Œè‹¥ä¸å­˜åœ¨æŠ› KeyErrorã€‚ d.clear()ï¼šæ¸…ç©ºæ‰€æœ‰é”®å€¼å¯¹ã€‚ éå†\r#\rfor k in d:ï¼šéå†æ‰€æœ‰é”®ï¼ˆåŒ for k in d.keys():ï¼‰ã€‚ for k, v in d.items():ï¼šåŒæ—¶éå†é”®å’Œå€¼ã€‚ for v in d.values():ï¼šéå†æ‰€æœ‰å€¼ã€‚ æ›´æ–°\r#\rd.update(other_dict_or_iterable)ï¼šç”¨å¦ä¸€ä¸ªå­—å…¸æˆ–é”®å€¼å¯¹å¯è¿­ä»£å¯¹è±¡æ›´æ–° dï¼Œç›¸åŒé”®ä¼šè¢«è¦†ç›–ï¼Œæ–°é”®è¿½åŠ ã€‚ è§†å›¾ï¼ˆviewsï¼‰\r#\rd.keys()ã€d.values()ã€d.items() åˆ†åˆ«è¿”å›å¯è¿­ä»£çš„è§†å›¾å¯¹è±¡ï¼Œå®æ—¶åæ˜ å­—å…¸å˜åŒ–ã€‚ å…¶ä»–å¸¸ç”¨æ“ä½œ\r#\rlen(d)ï¼šé”®å€¼å¯¹æ•°é‡ã€‚ key in dï¼šåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨äºå­—å…¸ä¸­ã€‚ "},{"id":10,"href":"/docs/hidden/Java%E8%B5%84%E6%96%99/","title":"Javaèµ„æ–™","section":"éšè—","content":"\rç›®å½•\r#\ré˜Ÿåˆ— éé˜»å¡é˜Ÿåˆ—ï¼ˆé€‚ç”¨äºå•çº¿ç¨‹æˆ–æ‰‹åŠ¨åŒæ­¥ï¼‰ é˜»å¡é˜Ÿåˆ—ï¼ˆjava.util.concurrent åŒ…ï¼‰ æ— é”/é«˜æ€§èƒ½é˜Ÿåˆ—ï¼ˆéé˜»å¡å¹¶å‘é˜Ÿåˆ—ï¼‰ å¯¹æ¯”æ€»ç»“ å…¸å‹ä½¿ç”¨åœºæ™¯ LinkedList çš„ä¸»è¦ç‰¹æ€§ List æ¥å£çš„æ–¹æ³• Dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ–¹æ³• Queue æ–¹æ³• åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼ ç»§æ‰¿ Thread ç±» å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰ Thread å¸¸ç”¨æ–¹æ³•ä¸€è§ˆ é˜Ÿåˆ—\r#\réé˜»å¡é˜Ÿåˆ—ï¼ˆé€‚ç”¨äºå•çº¿ç¨‹æˆ–æ‰‹åŠ¨åŒæ­¥ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ LinkedList å®ç°äº† Deque å’Œ Queueï¼Œå¯ä»¥ä½œä¸ºæ™®é€šé˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—ä½¿ç”¨ PriorityQueue å…ƒç´ æŒ‰ä¼˜å…ˆçº§æ’åˆ—ï¼ˆé FIFOï¼‰ï¼Œä¸æ”¯æŒå¹¶å‘ ArrayDeque é«˜æ€§èƒ½åŒç«¯é˜Ÿåˆ—ï¼Œéçº¿ç¨‹å®‰å…¨ é˜»å¡é˜Ÿåˆ—ï¼ˆjava.util.concurrent åŒ…ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ ArrayBlockingQueue æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œæ•°ç»„å®ç°ï¼Œæ”¯æŒ FIFO LinkedBlockingQueue å¯é€‰å®¹é‡çš„é˜»å¡é˜Ÿåˆ—ï¼Œé“¾è¡¨å®ç°ï¼ŒFIFO PriorityBlockingQueue æ— ç•Œï¼Œå¸¦ä¼˜å…ˆçº§æ’åºï¼Œä¸ä¿è¯ FIFO DelayQueue å…ƒç´ æŒ‰å»¶è¿Ÿæ—¶é—´æ’åºï¼Œä»…åœ¨åˆ°æœŸåæ‰èƒ½å–å‡º SynchronousQueue æ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªå¯¹åº”çš„å–å‡ºæ“ä½œï¼ˆé›¶å®¹é‡ï¼‰ LinkedTransferQueue æ”¯æŒç”Ÿäº§è€…ç­‰å¾…æ¶ˆè´¹è€…ã€å®¹é‡æ— ç•Œ BlockingDeque æ”¯æŒé˜»å¡çš„åŒç«¯é˜Ÿåˆ—æ“ä½œï¼ˆå¦‚ LinkedBlockingDequeï¼‰ æ— é”/é«˜æ€§èƒ½é˜Ÿåˆ—ï¼ˆéé˜»å¡å¹¶å‘é˜Ÿåˆ—ï¼‰\r#\rå®ç°ç±» ç‰¹ç‚¹ ConcurrentLinkedQueue æ— ç•Œã€åŸºäºé“¾è¡¨ã€é€‚ç”¨äºé«˜å¹¶å‘ï¼ˆéé˜»å¡ï¼‰ ConcurrentLinkedDeque åŒç«¯æ— é”é˜Ÿåˆ—ï¼Œé€‚åˆå¹¶å‘ç¯å¢ƒ å¯¹æ¯”æ€»ç»“\r#\ré˜Ÿåˆ—ç±»å‹ æ˜¯å¦é˜»å¡ æ˜¯å¦çº¿ç¨‹å®‰å…¨ æ˜¯å¦æœ‰ç•Œ æ˜¯å¦æ”¯æŒä¼˜å…ˆçº§ LinkedList å¦ å¦ å¦ å¦ PriorityQueue å¦ å¦ å¦ æ˜¯ ArrayBlockingQueue æ˜¯ æ˜¯ æ˜¯ å¦ LinkedBlockingQueue æ˜¯ æ˜¯ å¯é€‰ å¦ PriorityBlockingQueue æ˜¯ æ˜¯ å¦ æ˜¯ DelayQueue æ˜¯ æ˜¯ å¦ æ˜¯ï¼ˆå»¶è¿Ÿæ—¶é—´ï¼‰ SynchronousQueue æ˜¯ æ˜¯ æ˜¯ï¼ˆé›¶å®¹é‡ï¼‰ å¦ ConcurrentLinkedQueue å¦ æ˜¯ å¦ å¦ å…¸å‹ä½¿ç”¨åœºæ™¯\r#\rä»»åŠ¡è°ƒåº¦ / æ¶ˆæ¯ä¸­è½¬ï¼š LinkedBlockingQueue, DelayQueue\né«˜å¹¶å‘æ—¥å¿—é‡‡é›†ï¼š ConcurrentLinkedQueue\nçº¿ç¨‹æ± ä»»åŠ¡é˜Ÿåˆ—ï¼š ArrayBlockingQueue, SynchronousQueue\nå®šæ—¶/ä¼˜å…ˆçº§ä»»åŠ¡ï¼š PriorityBlockingQueue, DelayQueue\nLinkedList çš„ä¸»è¦ç‰¹æ€§\r#\råŒå‘é“¾è¡¨å®ç°ï¼šæ’å…¥ã€åˆ é™¤å…ƒç´ æ•ˆç‡é«˜ï¼ˆç›¸è¾ƒäº ArrayListï¼‰\nå…ƒç´ å¯é‡å¤ï¼Œå…è®¸ null\néçº¿ç¨‹å®‰å…¨ï¼ˆéœ€è¦æ‰‹åŠ¨åŒæ­¥ï¼‰\nList æ¥å£çš„æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ add(E e) æ·»åŠ å…ƒç´ åˆ°æœ«å°¾ add(int index, E element) æŒ‡å®šä½ç½®æ’å…¥å…ƒç´  remove(int index) ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  remove(Object o) åˆ é™¤ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´  get(int index) è·å–æŒ‡å®šä½ç½®çš„å…ƒç´  set(int index, E element) è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´  indexOf(Object o) æŸ¥æ‰¾å…ƒç´ é¦–æ¬¡å‡ºç°çš„ä½ç½® lastIndexOf(Object o) æŸ¥æ‰¾å…ƒç´ æœ€åå‡ºç°çš„ä½ç½® clear() æ¸…ç©ºæ‰€æœ‰å…ƒç´  size() è·å–å…ƒç´ æ•°é‡ isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º Dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ addFirst(E e) å¤´éƒ¨æ·»åŠ å…ƒç´  addLast(E e) å°¾éƒ¨æ·»åŠ å…ƒç´  removeFirst() ç§»é™¤å¹¶è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´  removeLast() ç§»é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªå…ƒç´  getFirst() è·å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ getLast() è·å–æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ offerFirst(E e) å¤´éƒ¨æ’å…¥å…ƒç´ ï¼Œå¤±è´¥è¿”å› false offerLast(E e) å°¾éƒ¨æ’å…¥å…ƒç´ ï¼Œå¤±è´¥è¿”å› false pollFirst() è·å–å¹¶ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—ç©ºæ—¶è¿”å› null pollLast() è·å–å¹¶ç§»é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé˜Ÿåˆ—ç©ºæ—¶è¿”å› null peekFirst() æŸ¥çœ‹ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ peekLast() æŸ¥çœ‹æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¸ç§»é™¤ Queue æ–¹æ³•\r#\ræ–¹æ³• è¯´æ˜ offer(E e) æ·»åŠ å…ƒç´ åˆ°é˜Ÿå°¾ poll() å–å‡ºå¹¶ç§»é™¤é˜Ÿå¤´å…ƒç´  peek() æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ ä½†ä¸ç§»é™¤ åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼\r#\rç»§æ‰¿ Thread ç±»\r#\rclass MyThread extends Thread { public void run() { System.out.println(\u0026#34;Thread is running\u0026#34;); } } MyThread t = new MyThread(); t.start(); // å¯åŠ¨çº¿ç¨‹ å®ç° Runnable æ¥å£ï¼ˆæ¨èï¼‰\r#\rclass MyRunnable implements Runnable { public void run() { System.out.println(\u0026#34;Thread is running\u0026#34;); } } Thread t = new Thread(new MyRunnable()); t.start(); Thread å¸¸ç”¨æ–¹æ³•ä¸€è§ˆ\r#\ræ–¹æ³•å è¯´æ˜ start() å¯åŠ¨çº¿ç¨‹ï¼ˆä¼šè°ƒç”¨ run() æ–¹æ³•ï¼‰ run() çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡å†…å®¹ï¼ˆå¯é‡å†™ï¼‰ sleep(long millis) å½“å‰çº¿ç¨‹ç¡çœ æŒ‡å®šæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ join() ç­‰å¾…æŸä¸ªçº¿ç¨‹æ‰§è¡Œå®Œ interrupt() ä¸­æ–­çº¿ç¨‹ï¼ˆå¹¶ä¸ä¼šå¼ºåˆ¶åœæ­¢ï¼‰ isInterrupted() æ£€æŸ¥çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ setPriority(int newPriority) è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ï¼ˆ1~10ï¼‰ getPriority() è·å–çº¿ç¨‹ä¼˜å…ˆçº§ setName(String name) è®¾ç½®çº¿ç¨‹å getName() è·å–çº¿ç¨‹å setDaemon(boolean on) è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼ˆåœ¨ start() å‰è°ƒç”¨ï¼‰ isDaemon() åˆ¤æ–­æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹ currentThread() è·å–å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼ˆé™æ€æ–¹æ³•ï¼‰ yield() å½“å‰çº¿ç¨‹è®©å‡º CPU æ‰§è¡Œæƒï¼ˆä¸ä¸€å®šæˆåŠŸï¼‰ isAlive() åˆ¤æ–­çº¿ç¨‹æ˜¯å¦ä»åœ¨è¿è¡Œä¸­ "},{"id":11,"href":"/docs/hidden/SQL%E8%B5%84%E6%96%99/","title":"Sqlèµ„æ–™","section":"éšè—","content":"\rç›®å½•\r#\ræŸ¥è¯¢æ•°æ®ï¼ˆSELECTï¼‰ åŸºæœ¬æŸ¥è¯¢ æŸ¥è¯¢æ‰€æœ‰å­—æ®µ ä½¿ç”¨æ¡ä»¶ï¼ˆWHEREï¼‰ æ’åºï¼ˆORDER BYï¼‰ å»é‡ï¼ˆDISTINCTï¼‰ åˆ†é¡µï¼ˆLIMIT / OFFSETï¼‰ æ’å…¥æ•°æ®ï¼ˆINSERTï¼‰ æ’å…¥å•è¡Œ æ’å…¥å¤šè¡Œ æ›´æ–°æ•°æ®ï¼ˆUPDATEï¼‰ åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰ èšåˆå‡½æ•°ï¼ˆGROUP BY + HAVINGï¼‰ è¿æ¥æŸ¥è¯¢ï¼ˆJOINï¼‰ å­æŸ¥è¯¢ï¼ˆSubqueryï¼‰ CASE è¡¨è¾¾å¼ï¼ˆç±»ä¼¼ IFï¼‰ åˆ›å»ºå’Œç®¡ç†è¡¨ç»“æ„ï¼ˆDDLï¼‰ å¸¸ç”¨è¿ç®—ç¬¦é€ŸæŸ¥ å¸¸è§ç»„åˆä¾‹å­ SQLå¸¸ç”¨è¯­æ³•\r#\rä¸€ã€æŸ¥è¯¢æ•°æ®ï¼ˆSELECTï¼‰\r#\råŸºæœ¬æŸ¥è¯¢\r#\rSELECT column1, column2 FROM table_name; æŸ¥è¯¢æ‰€æœ‰å­—æ®µ\r#\rSELECT * FROM table_name; ä½¿ç”¨æ¡ä»¶ï¼ˆWHEREï¼‰\r#\rSELECT name, age FROM users WHERE age \u0026gt;= 18 AND gender = \u0026#39;F\u0026#39;; æ’åºï¼ˆORDER BYï¼‰\r#\rSELECT name, age FROM users ORDER BY age DESC, name ASC; å»é‡ï¼ˆDISTINCTï¼‰\r#\rSELECT DISTINCT city FROM users; åˆ†é¡µï¼ˆLIMIT / OFFSETï¼‰\r#\r-- MySQL / PostgreSQL SELECT * FROM users LIMIT 10 OFFSET 20; äºŒã€æ’å…¥æ•°æ®ï¼ˆINSERTï¼‰\r#\ræ’å…¥å•è¡Œ\r#\rINSERT INTO users (name, age) VALUES (\u0026#39;Alice\u0026#39;, 25); æ’å…¥å¤šè¡Œ\r#\rINSERT INTO users (name, age) VALUES (\u0026#39;Bob\u0026#39;, 30), (\u0026#39;Carol\u0026#39;, 22); ä¸‰ã€æ›´æ–°æ•°æ®ï¼ˆUPDATEï¼‰\r#\rUPDATE users SET age = 26 WHERE name = \u0026#39;Alice\u0026#39;; å››ã€åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰\r#\rDELETE FROM users WHERE age \u0026lt; 18; äº”ã€èšåˆå‡½æ•°ï¼ˆGROUP BY + HAVINGï¼‰\r#\rSELECT department, COUNT(*) AS total FROM employees GROUP BY department HAVING COUNT(*) \u0026gt; 5; å¸¸è§èšåˆå‡½æ•°ï¼š\nå‡½æ•° ä½œç”¨ COUNT() è®¡æ•° SUM() æ±‚å’Œ AVG() å¹³å‡å€¼ MAX() æœ€å¤§å€¼ MIN() æœ€å°å€¼ å…­ã€è¿æ¥æŸ¥è¯¢ï¼ˆJOINï¼‰\r#\rSELECT u.name, o.order_id FROM users u JOIN orders o ON u.id = o.user_id; ä¸ƒã€å­æŸ¥è¯¢ï¼ˆSubqueryï¼‰\r#\rSELECT name FROM users WHERE id IN ( SELECT user_id FROM orders WHERE amount \u0026gt; 100 ); å…«ã€CASE è¡¨è¾¾å¼ï¼ˆç±»ä¼¼ IFï¼‰\r#\rSELECT name, CASE WHEN age \u0026lt; 18 THEN \u0026#39;minor\u0026#39; WHEN age \u0026lt; 65 THEN \u0026#39;adult\u0026#39; ELSE \u0026#39;senior\u0026#39; END AS age_group FROM users; ä¹ã€åˆ›å»ºå’Œç®¡ç†è¡¨ç»“æ„ï¼ˆDDLï¼‰\r#\r-- åˆ›å»ºè¡¨ CREATE TABLE users ( id INT PRIMARY KEY, name VARCHAR(100), age INT ); -- ä¿®æ”¹è¡¨ ALTER TABLE users ADD email VARCHAR(255); -- åˆ é™¤è¡¨ DROP TABLE users; åã€å¸¸ç”¨è¿ç®—ç¬¦é€ŸæŸ¥\r#\rç±»åˆ« è¿ç®—ç¬¦/å…³é”®å­— æ¯”è¾ƒ =, \u0026lt;\u0026gt;, \u0026gt;, \u0026lt;, \u0026gt;=, \u0026lt;= èŒƒå›´ BETWEEN x AND y é›†åˆ IN (..) æ¨¡ç³ŠåŒ¹é… LIKE '%abc%' ç©ºå€¼æ£€æŸ¥ IS NULL, IS NOT NULL é€»è¾‘è¿ç®— AND, OR, NOT å¸¸è§ç»„åˆä¾‹å­\r#\rSELECT department, AVG(salary) FROM employees WHERE hire_date \u0026gt;= \u0026#39;2022-01-01\u0026#39; GROUP BY department ORDER BY AVG(salary) DESC LIMIT 5; "},{"id":12,"href":"/docs/hidden/System-Design%E8%B5%84%E6%96%99/","title":"System Designèµ„æ–™","section":"éšè—","content":"\ræ‚£è€…é¢„çº¦ç³»ç»Ÿ\r#\råŠŸèƒ½éœ€æ±‚\r#\råŒ»ç”Ÿï¼šè®¾ç½®å¯ç”¨æ—¶é—´æ®µã€‚\næ‚£è€…ï¼šæŸ¥çœ‹å¯ç”¨æ—¶é—´æ®µå¹¶é¢„çº¦ã€‚\nç³»ç»Ÿï¼šè¿”å›åŒ…å«é¢„çº¦æ—¶æ®µçš„å­—å…¸ã€‚\nç³»ç»Ÿæ¶æ„\r#\rç³»ç»Ÿé‡‡ç”¨ç®€åŒ–çš„æ¶æ„ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ç»„ä»¶ï¼š\næ•°æ®å­˜å‚¨ï¼šä½¿ç”¨ Map å­˜å‚¨åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µå’Œé¢„çº¦ä¿¡æ¯ã€‚\né¢„çº¦ç®¡ç†ï¼šå¤„ç†é¢„çº¦çš„åˆ›å»ºå’ŒæŸ¥è¯¢ã€‚\nJava å®ç°ç¤ºä¾‹\r#\rimport java.time.LocalDateTime; import java.time.format.DateTimeFormatter; import java.util.*; class AppointmentScheduler { private Map\u0026lt;String, List\u0026lt;TimeSlot\u0026gt;\u0026gt; doctorAvailability = new HashMap\u0026lt;\u0026gt;(); private Map\u0026lt;String, List\u0026lt;TimeSlot\u0026gt;\u0026gt; appointments = new HashMap\u0026lt;\u0026gt;(); // æ·»åŠ åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ public void addDoctorAvailability(String doctorId, List\u0026lt;TimeSlot\u0026gt; slots) { doctorAvailability.put(doctorId, slots); } // è·å–åŒ»ç”Ÿçš„å¯ç”¨é¢„çº¦æ—¶é—´æ®µ public List\u0026lt;TimeSlot\u0026gt; getAvailableSlots(String doctorId) { List\u0026lt;TimeSlot\u0026gt; available = new ArrayList\u0026lt;\u0026gt;(); List\u0026lt;TimeSlot\u0026gt; allSlots = doctorAvailability.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); List\u0026lt;TimeSlot\u0026gt; bookedSlots = appointments.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); for (TimeSlot slot : allSlots) { if (!bookedSlots.contains(slot)) { available.add(slot); } } return available; } // ä¸ºæ‚£è€…é¢„çº¦æŒ‡å®šçš„æ—¶é—´æ®µ public boolean bookAppointment(String doctorId, String patientId, TimeSlot desiredSlot) { List\u0026lt;TimeSlot\u0026gt; availableSlots = getAvailableSlots(doctorId); if (availableSlots.contains(desiredSlot)) { appointments.computeIfAbsent(doctorId, k -\u0026gt; new ArrayList\u0026lt;\u0026gt;()).add(desiredSlot); System.out.println(\u0026#34;é¢„çº¦æˆåŠŸï¼š\u0026#34; + desiredSlot); return true; } else { System.out.println(\u0026#34;é¢„çº¦å¤±è´¥ï¼Œæ—¶é—´æ®µä¸å¯ç”¨ã€‚\u0026#34;); return false; } } // è·å–åŒ»ç”Ÿçš„æ‰€æœ‰é¢„çº¦ public List\u0026lt;TimeSlot\u0026gt; getAppointments(String doctorId) { return appointments.getOrDefault(doctorId, new ArrayList\u0026lt;\u0026gt;()); } } class TimeSlot { private LocalDateTime start; private LocalDateTime end; public TimeSlot(LocalDateTime start, LocalDateTime end) { this.start = start; this.end = end; } // é‡å†™ equals å’Œ hashCode æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨åˆ—è¡¨ä¸­æ­£ç¡®æ¯”è¾ƒ TimeSlot å¯¹è±¡ @Override public boolean equals(Object obj) { if (this == obj) return true; if (!(obj instanceof TimeSlot)) return false; TimeSlot other = (TimeSlot) obj; return start.equals(other.start) \u0026amp;\u0026amp; end.equals(other.end); } @Override public int hashCode() { return Objects.hash(start, end); } @Override public String toString() { DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm\u0026#34;); return start.format(formatter) + \u0026#34; - \u0026#34; + end.format(formatter); } } // ç¤ºä¾‹ä½¿ç”¨ public class Main { public static void main(String[] args) { AppointmentScheduler scheduler = new AppointmentScheduler(); String doctorId = \u0026#34;Dr_Smith\u0026#34;; String patientId = \u0026#34;Patient_1\u0026#34;; // åˆ›å»ºåŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ List\u0026lt;TimeSlot\u0026gt; slots = new ArrayList\u0026lt;\u0026gt;(); LocalDateTime startTime = LocalDateTime.of(2025, 5, 14, 9, 0); for (int i = 0; i \u0026lt; 8; i++) { TimeSlot slot = new TimeSlot(startTime.plusMinutes(i * 30), startTime.plusMinutes((i + 1) * 30)); slots.add(slot); } // æ·»åŠ åŒ»ç”Ÿçš„å¯ç”¨æ—¶é—´æ®µ scheduler.addDoctorAvailability(doctorId, slots); // è·å–å¹¶æ˜¾ç¤ºå¯ç”¨æ—¶é—´æ®µ List\u0026lt;TimeSlot\u0026gt; availableSlots = scheduler.getAvailableSlots(doctorId); System.out.println(\u0026#34;å¯ç”¨æ—¶é—´æ®µï¼š\u0026#34;); for (TimeSlot slot : availableSlots) { System.out.println(slot); } // é¢„çº¦ä¸€ä¸ªæ—¶é—´æ®µ TimeSlot desiredSlot = availableSlots.get(0); scheduler.bookAppointment(doctorId, patientId, desiredSlot); // æ˜¾ç¤ºæ‰€æœ‰é¢„çº¦ List\u0026lt;TimeSlot\u0026gt; appointments = scheduler.getAppointments(doctorId); System.out.println(\u0026#34;æ‰€æœ‰é¢„çº¦ï¼š\u0026#34;); for (TimeSlot appointment : appointments) { System.out.println(appointment); } } } è¯´æ˜\r#\råŒ»ç”Ÿå¯ç”¨æ—¶é—´æ®µï¼šé€šè¿‡ addDoctorAvailability æ–¹æ³•æ·»åŠ ï¼Œç³»ç»Ÿä¼šæ ¹æ®æŒ‡å®šçš„æ—¶é—´èŒƒå›´ç”Ÿæˆæ‰€æœ‰å¯ç”¨çš„æ—¶é—´æ®µã€‚\nè·å–å¯ç”¨æ—¶é—´æ®µï¼šgetAvailableSlots æ–¹æ³•è¿”å›åŒ»ç”Ÿå½“å‰æœªè¢«é¢„çº¦çš„æ—¶é—´æ®µã€‚\né¢„çº¦æ—¶é—´æ®µï¼šbookAppointment æ–¹æ³•å…è®¸æ‚£è€…é¢„çº¦ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µï¼Œå¦‚æœè¯¥æ—¶é—´æ®µå¯ç”¨ï¼Œåˆ™é¢„çº¦æˆåŠŸã€‚\næŸ¥çœ‹æ‰€æœ‰é¢„çº¦ï¼šgetAppointments æ–¹æ³•è¿”å›åŒ»ç”Ÿçš„æ‰€æœ‰é¢„çº¦ä¿¡æ¯ã€‚\n"},{"id":13,"href":"/docs/hidden/%E6%9E%B6%E6%9E%84%E8%B5%84%E6%96%99/","title":"æ¶æ„èµ„æ–™","section":"éšè—","content":"Below are 10 Java and 10 Microservices technical questionsâ€”each with concise bilingual answers tailored to your background and the Doctolib Senior Software Engineer role.\nSummary\r#\rç»“åˆæ‚¨åœ¨ç®€å†å’ŒåŠ¨æœºä¿¡ä¸­å¼ºè°ƒçš„ Java å…¨æ ˆã€å¾®æœåŠ¡ å’Œ å¿«é€Ÿå­¦ä¹  èƒ½åŠ›ï¼Œä»¥åŠ Doctolib å¯¹ åç«¯ Javaã€å¯æ‰©å±•æ¶æ„ çš„éœ€æ±‚ï¼Œä¸‹åˆ—é—®é¢˜è¦†ç›–æ ¸å¿ƒæ¦‚å¿µã€å¸¸è§é™·é˜±å’Œå®æˆ˜åº”ç”¨ï¼Œå¸®åŠ©æ‚¨åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºã€‚\nä¸€ã€Java ç›¸å…³é—®é¢˜\r#\r1. ä¸ºä»€ä¹ˆè¯´ Java æ˜¯å¹³å°æ— å…³çš„ï¼Ÿ\r#\rEN: Java bytecode runs on any JVM regardless of underlying OS or hardware, thanks to the â€œwrite once, run anywhereâ€ design. (\rGeeksforGeeks) CNï¼š Java ç¼–è¯‘ç”Ÿæˆçš„å­—èŠ‚ç  (.class) å¯ä»¥åœ¨ä»»ä½•å®‰è£…äº† JVM çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€(\rGeeksforGeeks)ã€‚\n2. æŠ½è±¡ç±»å’Œæ¥å£æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\r#\rEN: An abstract class can have both method bodies and state (fields), while an interface (preâ€‘JavaÂ 8) only declares methods. A class can extend one abstract class but implement multiple interfaces. (\rReddit) CNï¼š æŠ½è±¡ç±»æ—¢å¯åŒ…å«å…·ä½“æ–¹æ³•ä¹Ÿå¯å­˜å‚¨çŠ¶æ€ï¼Œæ¥å£ï¼ˆJavaÂ 8 å‰ï¼‰åªèƒ½å£°æ˜æ–¹æ³•ï¼›ç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå´èƒ½å®ç°å¤šä¸ªæ¥å£ã€‚(\rReddit)\n3. Java çš„åƒåœ¾å›æ”¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ\r#\rEN: The JVMâ€™s GC reclaims unreachable objects automatically, typically using generational collectors (young/gen0, old/gen1) to minimize pause times. (\rGeeksforGeeks) CNï¼š JVM åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶ä¸å¯è¾¾å¯¹è±¡ï¼Œå¸¸ç”¨åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆæ–°ç”Ÿä»£/è€å¹´ä»£ï¼‰ä»¥é™ä½åœé¡¿ã€‚(\rGeeksforGeeks)\n4. ä»€ä¹ˆæ˜¯è£…ç®±å’Œæ‹†ç®±ï¼Ÿ\r#\rEN: Autoboxing converts primitives (e.g., int) into wrappers (Integer) automatically; unboxing does the reverse. (\rReddit) CNï¼š è‡ªåŠ¨è£…ç®±æ˜¯å°†åŸºæœ¬ç±»å‹ï¼ˆå¦‚Â intï¼‰éšå¼è½¬æ¢ä¸ºå…¶åŒ…è£…ç±»ï¼ˆIntegerï¼‰ï¼Œæ‹†ç®±åˆ™ç›¸åã€‚(\rReddit)\n5. HashMap çš„åº•å±‚ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ\r#\rEN: A HashMap uses an array of buckets where each bucket is a linked list or redâ€‘black tree (after threshold), with keysâ€™ hashcodes determining bucket index. (\rGeeksforGeeks) CNï¼š HashMap åº•å±‚ç”¨æ•°ç»„ï¼‹é“¾è¡¨ï¼ˆæˆ–è¶…é˜ˆå€¼åè½¬çº¢é»‘æ ‘ï¼‰å­˜å‚¨é”®å€¼å¯¹ï¼Œå“ˆå¸Œå€¼å†³å®šå…ƒç´ è½åœ¨å“ªä¸ªæ¡¶ã€‚(\rGeeksforGeeks)\n6. å¦‚ä½•å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ï¼Ÿ\r#\rEN: Use a static inner helper class or enum singleton; both are threadâ€‘safe and lazily initialized without explicit synchronization. (\rinterviewbit.com) CNï¼š å¯ä½¿ç”¨é™æ€å†…éƒ¨ç±»æˆ–æšä¸¾å•ä¾‹ï¼Œå®ƒä»¬åœ¨ç±»åŠ è½½æ—¶çº¿ç¨‹å®‰å…¨ä¸”æ”¯æŒå»¶è¿Ÿåˆå§‹åŒ–ï¼Œæ— éœ€æ‰‹åŠ¨é”ã€‚(\rinterviewbit.com)\n7. æè¿° Java 8 ä¸­çš„ Stream æµæ“ä½œã€‚\r#\rEN: Streams allow declarative, lazy operations (map, filter, reduce) on collections, enabling parallelizable data pipelines. (\rinterviewbit.com) CNï¼š Stream æä¾›å£°æ˜å¼ã€æƒ°æ€§åŠ è½½çš„é“¾å¼æ“ä½œï¼ˆå¦‚Â mapã€filterã€reduceï¼‰ï¼Œå¹¶å¯ç®€å•åœ°å¹¶è¡Œæ‰§è¡Œã€‚(\rinterviewbit.com)\n8. synchronized å’Œ ReentrantLock æœ‰ä½•ä¸åŒï¼Ÿ\r#\rEN: synchronized is builtâ€‘in, blocks on acquisition; ReentrantLock is more flexible (tryLock, timed lock) and supports condition variables. (\rinterviewbit.com) CNï¼š synchronized ä¸º JVM å†…ç½®é”ä¸”é˜»å¡æ€§è·å–ï¼›ReentrantLock åŠŸèƒ½æ›´å¼ºï¼ˆæ”¯æŒ tryLockã€å¯ä¸­æ–­é”ã€æ¡ä»¶å˜é‡ï¼‰ã€‚(\rinterviewbit.com)\n9. ä»€ä¹ˆæ˜¯ Java ä¸­çš„å¼‚å¸¸åˆ†ä¸º Checked å’Œ Uncheckedï¼Ÿ\r#\rEN: Checked exceptions (e.g., IOException) must be declared or caught; unchecked exceptions (subclasses of RuntimeException) need not be. (\rReddit) CNï¼š Checked å¼‚å¸¸ï¼ˆå¦‚Â IOExceptionï¼‰éœ€åœ¨ç­¾åä¸­å£°æ˜æˆ–æ•è·ï¼ŒUnchecked å¼‚å¸¸ï¼ˆRuntimeExceptionÂ å­ç±»ï¼‰åˆ™æ— éœ€ã€‚(\rReddit)\n10. æè¿° JIT ç¼–è¯‘å™¨çš„ä½œç”¨ã€‚\r#\rEN: The JIT (Justâ€‘Inâ€‘Time) compiler in the JVM converts hot bytecode paths into native code at runtime to boost performance. (\rGeeksforGeeks) CNï¼š JVM ä¸­çš„ JIT ç¼–è¯‘å™¨åœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹å­—èŠ‚ç ç¼–è¯‘æˆæœ¬åœ°æœºå™¨ç ï¼Œä»¥æå‡æ‰§è¡Œæ•ˆç‡ã€‚(\rGeeksforGeeks)\näºŒã€å¾®æœåŠ¡ç›¸å…³é—®é¢˜\r#\r1. ä»€ä¹ˆæ˜¯å¾®æœåŠ¡æ¶æ„ï¼Ÿ\r#\rEN: Microservices split applications into small, independent services, each handling a single business capability and communicating over lightweight protocols. (\rMedium) CNï¼š å¾®æœåŠ¡å°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå°å‹ç‹¬ç«‹æœåŠ¡ï¼Œæ¯ä¸ªèšç„¦å•ä¸€ä¸šåŠ¡èƒ½åŠ›ï¼Œé€šè¿‡è½»é‡åè®®äº’ç›¸é€šä¿¡ã€‚(\rMedium)\n2. å•ä½“æ¶æ„ä¸å¾®æœåŠ¡æœ‰ä½•åŒºåˆ«ï¼Ÿ\r#\rEN: Monolith bundles all functions into one deployable unit; microservices decouple features into separately deployable services for independent scaling. (\rTuring) CNï¼š å•ä½“æ¶æ„å°†æ‰€æœ‰åŠŸèƒ½æ‰“åŒ…éƒ¨ç½²ï¼Œå¾®æœåŠ¡åˆ™å°†å…¶æ‹†åˆ†ä¸ºç‹¬ç«‹æœåŠ¡ï¼Œå¯åˆ†åˆ«æ‰©å±•ä¸éƒ¨ç½²ã€‚(\rTuring)\n3. æœåŠ¡å‘ç°æ€ä¹ˆåšï¼Ÿ\r#\rEN: Use a registry (e.g., Eureka, Consul) where services register themselves; clients or gateway query registry to locate service instances. (\rMedium) CNï¼š ä½¿ç”¨æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¦‚Â Eurekaã€Consulï¼‰ï¼ŒæœåŠ¡å¯åŠ¨æ—¶æ³¨å†Œï¼Œå®¢æˆ·ç«¯æˆ–ç½‘å…³é€šè¿‡å®ƒæŸ¥æ‰¾å¯ç”¨å®ä¾‹ã€‚(\rMedium)\n4. ä»€ä¹ˆæ˜¯ API ç½‘å…³ï¼Ÿ\r#\rEN: An API Gateway routes external requests to appropriate microservices, handles auth, rateâ€‘limiting, and can aggregate responses. (\rMedium) CNï¼š API ç½‘å…³è´Ÿè´£å°†å¤–éƒ¨è¯·æ±‚è·¯ç”±åˆ°å¯¹åº”æœåŠ¡ï¼ŒåŒæ—¶åšé‰´æƒã€é™æµï¼Œå¹¶å¯è¿›è¡Œç»“æœèšåˆã€‚(\rMedium)\n5. å¦‚ä½•ä¿è¯å¾®æœåŠ¡å®‰å…¨ï¼Ÿ\r#\rEN: Use OAuth2/JWT for auth, HTTPS for transport security, and enforce scopes in the gateway or each service. (\rMedium) CNï¼š é‡‡ç”¨ OAuth2/JWT åšè®¤è¯æˆæƒï¼Œå…¨é“¾è·¯ä½¿ç”¨ HTTPSï¼Œå¹¶åœ¨ç½‘å…³æˆ–æœåŠ¡å†…æ ¡éªŒæƒé™ã€‚(\rMedium)\n6. å¾®æœåŠ¡é—´å¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Ÿ\r#\rEN: Prefer eventual consistency via eventâ€‘driven patterns (Kafka events) or SAGA orchestration with compensating transactions. (\rMedium) CNï¼š å»ºè®®é‡‡ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼Œå¦‚äº‹ä»¶é©±åŠ¨ï¼ˆKafkaï¼‰æˆ– SAGA æ¨¡å¼çš„è¡¥å¿äº‹åŠ¡ã€‚(\rMedium)\n7. ä»€ä¹ˆæ˜¯ç†”æ–­å™¨ï¼ˆCircuit Breakerï¼‰ï¼Ÿ\r#\rEN: A circuit breaker (e.g., via Resilience4j) prevents cascading failures by shortâ€‘circuited calls to unhealthy services and provides fallback. (\rSimplilearn.com) CNï¼š ç†”æ–­å™¨ï¼ˆå¦‚Â Resilience4jï¼‰é€šè¿‡æ‹¦æˆªå¯¹ä¸å¯ç”¨æœåŠ¡çš„è°ƒç”¨å¹¶å¿«é€Ÿå¤±è´¥æˆ–é™çº§ï¼Œé˜²æ­¢æ•…éšœè”“å»¶ã€‚(\rSimplilearn.com)\n8. å¦‚ä½•ç›‘æ§å¾®æœåŠ¡ï¼Ÿ\r#\rEN: Use Prometheus + Grafana for metrics, ELK/EFK for centralized logs, and distributed tracing (Jaeger/Zipkin) for request flows. (\rblog.bytebytego.com) CNï¼š ä½¿ç”¨ Prometheus+Grafana ç›‘æ§æŒ‡æ ‡ï¼ŒELK/EFK é›†ä¸­æ—¥å¿—ï¼ŒJaeger/Zipkin åšåˆ†å¸ƒå¼é“¾è·¯è·Ÿè¸ªã€‚(\rblog.bytebytego.com)\n9. å¦‚ä½•å¤„ç†å¾®æœåŠ¡çš„é…ç½®ç®¡ç†ï¼Ÿ\r#\rEN: Store configs in Spring Cloud Config or Vault; services pull or watch for updates, enabling dynamic reconfiguration. (\rGeeksforGeeks) CNï¼š é…ç½®å­˜æ”¾äº Spring Cloud Config æˆ– Vaultï¼ŒæœåŠ¡å¯åŠ¨æˆ–çƒ­åˆ·æ–°æ—¶æ‹‰å–æ›´æ–°ï¼Œå®ç°åŠ¨æ€é…ç½®ã€‚(\rGeeksforGeeks)\n10. å®¹å™¨åŒ–å’Œç¼–æ’å¯¹å¾®æœåŠ¡çš„å¥½å¤„ï¼Ÿ\r#\rEN: Docker containers package services with dependencies; Kubernetes automates scaling, selfâ€‘healing, rolling updates, and service discovery. (\rç»´åŸºç™¾ç§‘) CNï¼š Docker å°†æœåŠ¡åŠå…¶ä¾èµ–æ‰“åŒ…ï¼›Kubernetes è‡ªåŠ¨æ‰©ç¼©å®¹ã€è‡ªæ„ˆã€æ»šåŠ¨å‡çº§ï¼Œå¹¶æä¾›å†…ç½®æœåŠ¡å‘ç°ã€‚(\rç»´åŸºç™¾ç§‘)\nä»¥ä¸Šé—®é¢˜åŠä¸­è‹±æ–‡å›ç­”ï¼Œæ—¢æ¶µç›– Java æ ¸å¿ƒçŸ¥è¯†ã€å¹¶å‘ã€å®¹å™¨åŒ–ï¼Œä¹Ÿå…¼é¡¾ å¾®æœåŠ¡å®æˆ˜ è¦ç‚¹ï¼Œç»“åˆæ‚¨åœ¨ HSBC å¾®æœåŠ¡é¡¹ç›® å’Œ åŠ¨æœºä¿¡ä¸­æåˆ°çš„æŠ€æœ¯åå¥½ï¼Œå¯åŠ©æ‚¨é«˜æ•ˆå‡†å¤‡ Doctolib é¢è¯•ã€‚ç¥é¢è¯•é¡ºåˆ©ï¼\n"},{"id":14,"href":"/docs/shortcodes/buttons/","title":"Buttons","section":"Shortcodes","content":"\rButtons\r#\rButtons are styled links that can lead to local page or external link.\nExample\r#\r{{\u0026lt; button relref=\u0026#34;/\u0026#34; [class=\u0026#34;...\u0026#34;] \u0026gt;}}Get Home{{\u0026lt; /button \u0026gt;}} {{\u0026lt; button href=\u0026#34;https://github.com/alex-shpak/hugo-book\u0026#34; \u0026gt;}}Contribute{{\u0026lt; /button \u0026gt;}} Get Home\rContribute\r"},{"id":15,"href":"/docs/shortcodes/columns/","title":"Columns","section":"Shortcodes","content":"\rColumns\r#\rColumns help organize shorter pieces of content horizontally for readability.\nExample\r#\r{{% columns [ratio=\u0026#34;1:1\u0026#34;] [class=\u0026#34;...\u0026#34;] %}} \u0026lt;!-- begin columns block --\u0026gt; # Left Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Mid Content Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; # Right Content Lorem markdownum insigne... {{% /columns %}} Left Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nMid Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nRight Content\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nSettings size ratio for columns\r#\r{{% columns ratio=\u0026#34;1:2\u0026#34; %}} \u0026lt;!-- begin columns block --\u0026gt; ## x1 Column Lorem markdownum insigne... \u0026lt;---\u0026gt; \u0026lt;!-- magic separator, between columns --\u0026gt; ## x2 Column Lorem markdownum insigne... {{% /columns %}} x1 Column\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nx2 Column\r#\rLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":16,"href":"/docs/shortcodes/details/","title":"Details","section":"Shortcodes","content":"\rDetails\r#\rDetails shortcode is a helper for details html5 element. It is going to replace expand shortcode.\nExample\r#\r{{% details \u0026#34;Title\u0026#34; [open] %}} ## Markdown content Lorem markdownum insigne... {{% /details %}} {{% details title=\u0026#34;Title\u0026#34; open=true %}} ## Markdown content Lorem markdownum insigne... {{% /details %}} Title\rMarkdown content\r#\rLorem markdownum insigne\u0026hellip;\n"},{"id":17,"href":"/docs/shortcodes/hints/","title":"Hints","section":"Shortcodes","content":"\rHints\r#\rHint shortcode can be used as hint/alerts/notification block.\nThere are 3 colors to choose: info, warning and danger.\n{{% hint [info|warning|danger] %}} **Markdown content** Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa {{% /hint %}} Example\r#\rMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\nMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\nMarkdown content\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa\n"},{"id":18,"href":"/docs/shortcodes/mermaid/","title":"Mermaid","section":"Shortcodes","content":"\rMermaid Chart\r#\rMermaidJS is library for generating svg charts and diagrams from text.\nOverride Mermaid initialization config\nTo override the initialization config for Mermaid, create a mermaid.json file in your assets folder!\nExample\r#\r{{\u0026lt; mermaid [class=\u0026#34;...\u0026#34;] \u0026gt;}} stateDiagram-v2 State1: The state with a note note right of State1 Important information! You can write notes. end note State1 --\u0026gt; State2 note left of State2 : This is the note to the left. {{\u0026lt; /mermaid \u0026gt;}} stateDiagram-v2\rState1: The state with a note\rnote right of State1\rImportant information! You can write\rnotes.\rend note\rState1 --\u003e State2\rnote left of State2 : This is the note to the left.\r"},{"id":19,"href":"/docs/shortcodes/section/","title":"Section","section":"Shortcodes","content":"\rSection\r#\rSection renders pages in section as definition list, using title and description. Optional param summary can be used to show or hide page summary\nExample\r#\r{{\u0026lt; section [summary] \u0026gt;}} First Page\rFirst page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nSecond Page\rSecond Page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n"},{"id":20,"href":"/docs/shortcodes/section/first-page/","title":"First Page","section":"Section","content":"\rFirst page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":21,"href":"/docs/shortcodes/section/second-page/","title":"Second Page","section":"Section","content":"\rSecond Page\r#\rLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\nDuis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"},{"id":22,"href":"/docs/shortcodes/tabs/","title":"Tabs","section":"Shortcodes","content":"\rTabs\r#\rTabs let you organize content by context, for example installation instructions for each supported platform.\n{{\u0026lt; tabs \u0026#34;id\u0026#34; \u0026gt;}} {{% tab \u0026#34;MacOS\u0026#34; %}} # MacOS Content {{% /tab %}} {{% tab \u0026#34;Linux\u0026#34; %}} # Linux Content {{% /tab %}} {{% tab \u0026#34;Windows\u0026#34; %}} # Windows Content {{% /tab %}} {{\u0026lt; /tabs \u0026gt;}} Example\r#\rMacOS\rMacOS\r#\rThis is tab MacOS content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nLinux\rLinux\r#\rThis is tab Linux content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\nWindows\rWindows\r#\rThis is tab Windows content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.\n"},{"id":23,"href":"/docs/study/system-design/doctolib-system-design/","title":"Doctolib ç³»ç»Ÿè®¾è®¡","section":"ç³»ç»Ÿè®¾è®¡","content":"ä»¥ä¸‹ç»™å‡ºä¸€ä¸ªé¢å‘ç”Ÿäº§ç¯å¢ƒã€å¯æ‰©å±•ä¸”é«˜å¯ç”¨çš„å¾®æœåŠ¡æ¶æ„è®¾è®¡æ–¹æ¡ˆï¼Œé‡ç‚¹å…³æ³¨â€œæ‚£è€…æœç´¢ä¸é¢„çº¦â€è¿™ä¸€æ—¥å†ï¼ˆCalendarï¼‰åŠŸèƒ½çš„é‡æ„ã€‚æ–¹æ¡ˆä¼šé’ˆå¯¹å„å­ç³»ç»Ÿåˆ’åˆ†ã€æŠ€æœ¯é€‰å‹ã€å¯æ‰©å±•æ€§ã€å®¹é”™ã€æ•°æ®ä¸€è‡´æ€§ã€å¤šåŒºåŸŸéƒ¨ç½²ç­‰æ–¹é¢è¿›è¡Œè¯´æ˜ï¼Œå¹¶é’ˆå¯¹æ¯ä¸ªç»„ä»¶é€‰ç”¨çš„è¯­è¨€æˆ–æŠ€æœ¯åšå‡ºç†ç”±è¯´æ˜ã€‚\n1. éåŠŸèƒ½éœ€æ±‚ä¸ä¸šåŠ¡è§„æ¨¡\r#\rè§„æ¨¡è¦æ±‚\næ‚£è€…æ•°é‡ï¼š50M ä»ä¸šè€…æ•°é‡ï¼š500K å¹¶å‘æœç´¢ï¼š700 æ¬¡/ç§’ å¹¶å‘é¢„çº¦ï¼ˆbookingï¼‰ï¼š90 æ¬¡/ç§’ å¯æ‰©å±•æ€§\næ”¯æŒå¿«é€Ÿä¸Šçº¿æ–°å›½å®¶/åœ°åŒº æ”¯æŒæ°´å¹³æ‰©å±•ï¼ˆæ°´å¹³æ‰©å®¹å®ä¾‹ï¼‰ é«˜å¯ç”¨ã€å®¹é”™ã€é™çº§\nå•ç‚¹æ•…éšœéœ€é¿å… ä»»ä¸€ç»„ä»¶å‡ºæ•…éšœæ—¶ï¼Œåº”ä¿è¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚æŸ¥è¯¢ç¼“å­˜ã€åªè¯»æœç´¢ï¼‰å°½å¯èƒ½å¯ç”¨ï¼Œå†™æ“ä½œå¯åšé™æµæˆ–é™çº§æç¤º æ•°æ®ä¸€è‡´æ€§\né¢„çº¦ï¼ˆBookingï¼‰æµç¨‹éœ€å¼ºä¸€è‡´æˆ–å¯æ¥å—çš„çº¦æŸä¸‹çš„å¼±ä¸€è‡´ï¼ˆä¾å®è·µè®¾è®¡ï¼‰ï¼Œä½†å†²çªéœ€è¢«æ­£ç¡®æ£€æµ‹å¹¶å¦¥å–„å¤„ç†ã€‚ æœç´¢ç»“æœå¯é‡‡ç”¨è¿‘å®æ—¶ï¼ˆEventual Consistencyï¼‰æ–¹å¼æ›´æ–°ã€‚ å“åº”æ—¶å»¶\næœç´¢å“åº”ï¼šç™¾æ¯«ç§’çº§ é¢„çº¦ç¡®è®¤ï¼šæ¬¡ç§’çº§ä½“éªŒ å®‰å…¨ä¸åˆè§„\næ¶‰åŠåŒ»ç–—æ•°æ®æˆ–ä¸ªäººä¿¡æ¯ï¼Œéœ€ç¬¦åˆç›¸å…³æ³•è§„ï¼ˆå¦‚ GDPRã€HIPAA ç­‰ï¼Œè§†å…·ä½“å›½å®¶è¦æ±‚ï¼‰ ä¼ è¾“åŠ å¯†ï¼ˆTLSï¼‰ï¼Œå­˜å‚¨åŠ å¯†ï¼Œç»†ç²’åº¦æƒé™æ§åˆ¶ å¯è§‚å¯Ÿæ€§\nå…¨é“¾è·¯è¿½è¸ªã€æ—¥å¿—ã€æŒ‡æ ‡ç›‘æ§ã€å‘Šè­¦ è‡ªåŠ¨åŒ–è¿ç»´ / CI/CD\nåŸºäºå®¹å™¨åŒ–ä¸åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰ï¼Œå®ç°æµæ°´çº¿è‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ»šåŠ¨å‡çº§ã€ç°åº¦å‘å¸ƒ 2. æ€»ä½“æ¶æ„æ¦‚è§ˆ\r#\ré‡‡ç”¨å¾®æœåŠ¡æ¶æ„ + API Gateway + æœåŠ¡ç½‘æ ¼ï¼ˆå¯é€‰ï¼‰ + å¤šåŒºåŸŸéƒ¨ç½² + å¼¹æ€§ä¼¸ç¼©ã€‚æ ¸å¿ƒç»„ä»¶ï¼š\nAPI Gatewayï¼šç»Ÿä¸€å…¥å£ï¼Œåšè®¤è¯é‰´æƒã€é™æµã€è·¯ç”±ã€‚ Auth æœåŠ¡ï¼šå¤„ç†ç™»å½•ã€è®¤è¯ã€æˆæƒï¼ˆOAuth2 / JWTï¼‰ã€‚ User æœåŠ¡ï¼šç®¡ç†æ‚£è€…ä¸ä»ä¸šè€…çš„ Profile ä¿¡æ¯ã€‚ Search æœåŠ¡ï¼šè´Ÿè´£å¤„ç†æŒ‰ä½ç½®ã€ä¸“ç§‘ã€å¯ç”¨æ—¶æ®µç­‰æ¡ä»¶çš„æœç´¢è¯·æ±‚ï¼›ä¾èµ–æœç´¢ç´¢å¼•ï¼ˆElasticsearchï¼‰ã€‚ Availability æœåŠ¡ï¼šç»´æŠ¤å’Œè®¡ç®—ä»ä¸šè€…å¯é¢„çº¦æ—¶æ®µï¼ˆworking hours + ä¾‹å¤–æƒ…å†µ + èŠ‚å‡æ—¥ + å·²æœ‰é¢„çº¦å†²çªï¼‰ã€‚ Booking æœåŠ¡ï¼šå¤„ç†é¢„çº¦åˆ›å»ºã€ä¿®æ”¹ã€å–æ¶ˆäº‹åŠ¡ï¼Œç¡®ä¿å¹¶å‘å®‰å…¨ä¸ä¸€è‡´æ€§ã€‚ Notification æœåŠ¡ï¼šå¼‚æ­¥å‘é€é‚®ä»¶/SMS/Push æ¨é€ï¼ˆé¢„çº¦ç¡®è®¤ã€æé†’ã€å˜æ›´é€šçŸ¥ï¼‰ã€‚ Analytics / Monitoring æœåŠ¡ï¼ˆæˆ–å¤–éƒ¨ï¼‰ï¼šæ”¶é›†æ—¥å¿—ã€æŒ‡æ ‡ï¼Œç”¨äºç›‘æ§ä¸æ•°æ®åˆ†æã€‚ Payment / Billing æœåŠ¡ï¼ˆå¦‚éœ€ä»˜è´¹é¢„çº¦ï¼Œå¯é€‰ï¼‰ã€‚ é…ç½®ä¸ç®¡ç†æœåŠ¡ï¼šç®¡ç†å¤šå›½å®¶/åœ°åŒºé…ç½®ï¼ˆæ—¶åŒºã€èŠ‚å‡æ—¥è§„åˆ™ã€è¯­è¨€ã€åˆè§„è®¾ç½®ç­‰ï¼‰ã€‚ å¼‚æ­¥æ¶ˆæ¯å¹³å°ï¼ˆå¦‚ Kafkaï¼‰ï¼šç”¨äºäº‹ä»¶æµï¼ˆEvent Busï¼‰ï¼Œå®ç°å¾®æœåŠ¡é—´çš„è§£è€¦å¼‚æ­¥é€šä¿¡ï¼Œå¦‚é¢„çº¦äº‹ä»¶ã€ç´¢å¼•æ›´æ–°ã€é€šçŸ¥è§¦å‘ç­‰ã€‚ ç¼“å­˜å±‚ï¼šRedisï¼Œç”¨äºçƒ­ç‚¹æ•°æ®ã€çŸ­æœŸç¼“å­˜ã€åˆ†å¸ƒå¼é”ç­‰ã€‚ æ•°æ®åº“ï¼šå…³ç³»å‹æ•°æ®åº“ï¼ˆPostgreSQL/CockroachDB/Vitess+MySQL/Aurora ç­‰ï¼‰ï¼›å¯æ ¹æ®è·¨åŒºåŸŸéœ€æ±‚é€‰æ‹©åˆ†å¸ƒå¼SQLï¼ˆå¦‚ CockroachDBï¼‰æˆ–å„åŒºåŸŸç‹¬ç«‹æ•°æ®åº“å¹¶åšå¼‚æ­¥å¤åˆ¶ã€‚ æœç´¢å¼•æ“ï¼šElasticsearch æˆ– OpenSearchï¼Œç”¨äºåœ°ç†ä½ç½®ä¸å±æ€§è¿‡æ»¤ã€å¯ç”¨æ€§åˆç­›ç´¢å¼•ç­‰ã€‚ åŸºç¡€è®¾æ–½ä¸éƒ¨ç½²ï¼šå®¹å™¨åŒ–ï¼ˆDockerï¼‰ã€Kubernetesï¼ˆEKS/GKE/AKS æˆ–è‡ªæ‰˜ç®¡ K8sï¼‰ã€Terraform/CloudFormation ç®¡ç†èµ„æºï¼Œå¤šåŒºåŸŸé›†ç¾¤éƒ¨ç½²ã€‚ ä¸‹é¢åˆ†æ¨¡å—è¯¦ç»†é˜è¿°ï¼Œå¹¶è¯´æ˜é€‰å‹ç†ç”±ã€‚\n3. API Gateway ä¸æœåŠ¡é€šä¿¡\r#\rAPI Gatewayï¼šæ¨èä½¿ç”¨ Kongã€Envoy+Istioã€AWS API Gateway ç­‰ã€‚\nèŒè´£ï¼šç»Ÿä¸€å…¥å£ï¼Œåšè®¤è¯é‰´æƒï¼ˆå’Œ Auth æœåŠ¡é…åˆï¼‰ã€æµé‡é™æµã€ç°åº¦å‘å¸ƒè·¯ç”±ã€TLS ç»ˆç«¯ã€æ¥å£ç‰ˆæœ¬ç®¡ç†ã€ç›‘æ§æŒ‡æ ‡é‡‡é›†ã€‚\næŠ€æœ¯é€‰å‹ï¼š\nKong / Envoyï¼šæˆç†Ÿã€ç¤¾åŒºæ´»è·ƒã€æ˜“ä¸æœåŠ¡ç½‘æ ¼é›†æˆï¼› é€šè¿‡ Envoy é…åˆ Istio ç­‰æœåŠ¡ç½‘æ ¼ï¼Œå¯å®ç°æ›´ç»†ç²’åº¦çš„æµé‡ç®¡ç†ã€ç†”æ–­é™æµã€é“¾è·¯è¿½è¸ªæ³¨å…¥ã€‚ é€šä¿¡åè®®ï¼š\nå¾®æœåŠ¡é—´å†…éƒ¨é€šä¿¡å¯ä¼˜å…ˆç”¨ gRPCï¼ˆæ€§èƒ½ã€IDLã€å¼ºç±»å‹å¥‘çº¦ï¼‰ï¼Œä¹Ÿå¯é€‰ REST/JSONï¼ˆå…¼å®¹æ€§å¥½ï¼‰ï¼›è‹¥å·²æœ‰ç”Ÿæ€åå¥½ Java/Kotlin Spring Bootï¼Œå¯ç”¨ gRPC + Protobufï¼Œæˆ– REST+OpenAPIã€‚ å¤–éƒ¨å®¢æˆ·ç«¯ä¸ Gatewayï¼Œä¸€èˆ¬ç”¨ HTTPS/JSON+REST æˆ– GraphQLï¼ˆè‹¥ä¸šåŠ¡éœ€è¦èšåˆå¤šä¸ªæœåŠ¡æ•°æ®ï¼‰ã€‚æœ¬åœºæ™¯æœç´¢ä¸é¢„çº¦æµç¨‹è¾ƒç®€å•ï¼Œç”¨ REST å³å¯ã€‚ 4. èº«ä»½è®¤è¯ä¸æˆæƒ\r#\rAuth æœåŠ¡ï¼š\nåè®®ï¼šOAuth2 / OpenID Connect + JWTã€‚ å­˜å‚¨ï¼šç”¨æˆ·å‡­è¯ä¿¡æ¯ï¼ˆå¦‚æœç”¨ç”¨æˆ·åå¯†ç ï¼‰ã€ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¦‚ SSOï¼‰å‡­è¯ç­‰ã€‚ é€‰å‹ç†ç”±ï¼šä¸šç•Œæ ‡å‡†ï¼ŒJWT å¯åœ¨å¾®æœåŠ¡é—´ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼ˆClaimsï¼‰ï¼Œä¾¿äºé‰´æƒï¼›è‹¥å¯¹å®‰å…¨è¦æ±‚é«˜ï¼Œå¯é‡‡ç”¨åˆ·æ–° token æœºåˆ¶æˆ–çŸ­æœŸ token å¹¶ä½¿ç”¨ Refresh Tokenã€‚ æƒé™æ§åˆ¶ï¼šRBAC/ACL æœºåˆ¶ã€‚é¢„çº¦ç³»ç»Ÿä¸­ï¼Œå¤§å¤šæ•°æ“ä½œç”±æ‚£è€…æˆ–ä»ä¸šè€…è‡ªè¡Œå‘èµ·ï¼Œä»…éœ€ä¿è¯æ‚£è€…åªå¯è®¿é—®è‡ªå·±é¢„çº¦è®°å½•ï¼›ç®¡ç†å‘˜å¯è®¿é—®æ›´å¤šã€‚\nè¯­è¨€/æ¡†æ¶ï¼š\nJava/Kotlin Spring Securityã€Go+Oauth2åº“ï¼Œæˆ– Node.js+Passportï¼Œæ ¹æ®å›¢é˜Ÿç†Ÿæ‚‰é€‰æ‹©ã€‚ æ¨è Golangï¼šäºŒè¿›åˆ¶è½»é‡ã€æ€§èƒ½é«˜ã€å¹¶å‘å¤„ç†ä¼˜ç§€ï¼›æˆ– Kotlin(Spring Boot)ï¼šç”Ÿæ€æˆç†Ÿã€å¼€å‘æ•ˆç‡é«˜ã€‚ 5. æ•°æ®å­˜å‚¨æ–¹æ¡ˆ\r#\r5.1 å…³ç³»å‹æ•°æ®åº“ï¼ˆä¸»æ•°æ®ä¸äº‹åŠ¡ï¼‰\r#\rä¸»è¦ç”¨é€”ï¼šå­˜å‚¨æ‚£è€…ã€ä»ä¸šè€…ã€é¢„çº¦è®°å½•ã€å¯ç”¨æ—¶æ®µæ¨¡æ¿ã€åœ°ç‚¹/è¯Šæ‰€ä¿¡æ¯ã€ä¸“ç§‘åˆ†ç±»ã€å®¡è®¡æ—¥å¿—ç­‰ã€‚\né€‰å‹ï¼š\nPostgreSQLï¼šå¼ºä¸€è‡´ã€å¤æ‚æŸ¥è¯¢èƒ½åŠ›å¥½ã€æ”¯æŒåœ°ç†æ‰©å±• PostGISï¼Œå¯å¤„ç†ä½ç½®æ•°æ®ã€‚ CockroachDB æˆ– Google Spannerï¼ˆè‹¥äº‘ä¸Šéœ€æ±‚ï¼‰ï¼šæä¾›åˆ†å¸ƒå¼ SQLï¼Œæœ¬èº«æ”¯æŒè·¨å¤šåŒºåŸŸéƒ¨ç½²å’Œå¼ºä¸€è‡´äº‹åŠ¡ï¼Œä¾¿äºå…¨çƒéƒ¨ç½²ï¼Œä½†æˆæœ¬è¾ƒé«˜ï¼› Vitess+MySQL / Amazon Aurora MySQL/PostgreSQLï¼šå¯æ°´å¹³åˆ†ç‰‡ï¼›é€‚åˆå·²æœ‰ MySQL ç”Ÿæ€çš„å›¢é˜Ÿã€‚ åˆ†åŒº/åˆ†ç‰‡ç­–ç•¥ï¼š\nå¯æŒ‰å›½å®¶/åœ°åŒºåˆ†åº“ï¼šæ¯ä¸ªå›½å®¶å•ç‹¬æ•°æ®åº“å®ä¾‹/é›†ç¾¤ï¼Œé¿å…è·¨åŒºåŸŸå†™å»¶è¿Ÿï¼ŒåŒæ—¶ä¾¿äºåˆè§„éš”ç¦»ï¼ˆä¾‹å¦‚ GDPR åŒºåŸŸï¼‰ã€‚ åŒä¸€å›½å®¶å†…éƒ¨å¯å¯¹æ‚£è€…æˆ–ä»ä¸šè€…åšåˆ†è¡¨ï¼ˆshardingï¼‰ï¼Œå¦‚æŒ‰ç”¨æˆ·ID hashã€‚ CockroachDB åœºæ™¯ä¸‹å¯åˆ©ç”¨å…¶å¤šåŒºåŸŸåˆ†å¸ƒèƒ½åŠ›ï¼Œæ— éœ€å¤æ‚åˆ†ç‰‡é€»è¾‘ï¼›ä½†éœ€è¯„ä¼°å»¶è¿Ÿä¸æˆæœ¬ã€‚ äº‹åŠ¡å¤„ç†ï¼š\né¢„çº¦åˆ›å»º/å–æ¶ˆéœ€å¼ºä¸€è‡´ï¼šåœ¨å•åº“æˆ–åŒåˆ†åŒºä¸­ç”¨æ•°æ®åº“äº‹åŠ¡ï¼ˆSELECT FOR UPDATEã€ä¹è§‚é”æˆ–æ‚²è§‚é”ï¼‰ç¡®ä¿å¹¶å‘å®‰å…¨ï¼›é¿å…è·¨åˆ†åŒºäº‹åŠ¡ã€‚ è‹¥æŸäº›æ“ä½œéœ€è·¨åº“ï¼ˆå¦‚ Billing åœ¨ä¸åŒæœåŠ¡åº“ï¼‰ï¼Œå¯é‡‡ç”¨ Saga æ¨¡å¼ï¼šåˆ†å¸ƒå¼äº‹åŠ¡ç¼–æ’ï¼Œè¡¥å¿æµç¨‹ç¡®ä¿æœ€ç»ˆä¸€è‡´ã€‚ 5.2 æœç´¢ç´¢å¼•ï¼ˆå…¨æ–‡ä¸å±æ€§æ£€ç´¢ï¼‰\r#\rElasticsearch / OpenSearchï¼š\nç”¨é€”ï¼šåœ°ç†ä½ç½®æœç´¢ï¼ˆGeo distance queriesï¼‰ã€æŒ‰ä¸“ç§‘æ ‡ç­¾è¿‡æ»¤ã€å¯ç”¨æ€§åˆæ­¥ç­›é€‰ï¼ˆå¦‚ä¸‹ä¸€å¯ç”¨æ—¥æœŸ/æ—¶é—´åŒºé—´æ ‡è®°ï¼‰ã€å…¨æ–‡æœç´¢ï¼ˆè¯Šæ‰€æè¿°ã€è¯„è®ºï¼‰ã€‚ éƒ¨ç½²ï¼šå¤šèŠ‚ç‚¹é›†ç¾¤ï¼ŒæŒ‰å›½å®¶/åŒºåŸŸåˆ†é›†ç¾¤æˆ–ç´¢å¼•åˆ†ç‰‡ï¼›è€ƒè™‘è·¨åŒºåŸŸè¯»å‰¯æœ¬ä»¥é™ä½å»¶è¿Ÿã€‚ æ›´æ–°æ–¹å¼ï¼šå¼‚æ­¥äº‹ä»¶é©±åŠ¨æ›´æ–°ï¼šBooking æœåŠ¡æˆ– Availability æœåŠ¡åœ¨é¢„çº¦åˆ›å»º/å–æ¶ˆåå‘äº‹ä»¶ï¼Œç»æ¶ˆæ¯é˜Ÿåˆ— Worker æ›´æ–°ç´¢å¼•ï¼ˆè¿‘å®æ—¶ï¼‰ã€‚éœ€æ³¨æ„â€œæœç´¢ç»“æœå¯èƒ½æœ‰çŸ­æš‚å»¶è¿Ÿâ€ï¼›å¯¹æ­¤åœ¨ UX ä¸Šå¯æç¤ºâ€œå¯ç”¨æ€§å¯èƒ½å®æ—¶æ€§ç•¥æœ‰å»¶è¿Ÿï¼Œè¯·å®æ—¶å°è¯•é¢„çº¦â€ã€‚ é€‰å‹ç†ç”±ï¼šæ”¯æŒä¸°å¯ŒæŸ¥è¯¢ã€æ¨ªå‘æ‰©å±•æˆç†Ÿã€æ”¯æŒåœ°ç†è·ç¦»è®¡ç®—å’Œå¤æ‚è¿‡æ»¤ã€‚ 5.3 ç¼“å­˜å±‚\r#\rRedis / Memcachedï¼š\nç”¨é€”ï¼šçƒ­ç‚¹æœç´¢ç»“æœç¼“å­˜ï¼ˆå¦‚å¸¸è§åŸå¸‚+ä¸“ç§‘æ£€ç´¢ï¼‰ã€ä¼šè¯ä¿¡æ¯ã€é…é¢é™æµè®¡æ•°ã€åˆ†å¸ƒå¼é”ã€‚ é€‰å‹ï¼šRedis æ›´çµæ´»ï¼Œæ”¯æŒæ•°æ®ç»“æ„å’Œåˆ†å¸ƒå¼é”ï¼ˆRedlockï¼‰ï¼Œå»ºè®®é€‰ Redis Cluster éƒ¨ç½²ã€‚ æ³¨æ„ï¼šç¼“å­˜å¤±æ•ˆç­–ç•¥è¦è®¾è®¡åˆç†ï¼›å¯¹æœç´¢ç¼“å­˜å¯ç”¨ TTL ç»“åˆç¼“å­˜å‡»ç©¿é¢„é˜²ï¼ˆå¦‚ä½¿ç”¨çƒ­ç‚¹é¢„çƒ­æˆ–äº’æ–¥é”ï¼‰ã€‚ 5.4 æ¶ˆæ¯ä¸äº‹ä»¶æ€»çº¿\r#\rKafka / Pulsar / RabbitMQï¼š\nç”¨é€”ï¼šå®ç°å¼‚æ­¥ã€è§£è€¦ï¼š\né¢„çº¦åˆ›å»º/å–æ¶ˆäº‹ä»¶å‘å‡ºåï¼Œå¼‚æ­¥è§¦å‘ç´¢å¼•æ›´æ–°ã€é€šçŸ¥å‘é€ã€ç»Ÿè®¡æ›´æ–°ç­‰ï¼› æ—¥å¿—ã€æŒ‡æ ‡äº‹ä»¶æ±‡èšã€‚ é€‰å‹ç†ç”±ï¼šKafka åœ¨é«˜ååã€åˆ†åŒºæ‰©å±•ã€æ¶ˆæ¯æŒä¹…åŒ–æ–¹é¢æˆç†Ÿï¼›Pulsar ä¹Ÿå¯ï¼›RabbitMQ é€‚åˆè¾ƒå°‘æ¶ˆæ¯é‡æˆ–ç®€å•åœºæ™¯ã€‚æ­¤å¤„é«˜å¹¶å‘åœºæ™¯åº”é€‰ Kafkaã€‚\néƒ¨ç½²ï¼šKafka é›†ç¾¤ï¼Œå¤šåˆ†åŒºåˆ†åŒºé”®å¯æŒ‰å›½å®¶æˆ–æœåŠ¡ç±»å‹åŒºåˆ†ï¼Œä¾¿äºæ¶ˆè´¹ä¾§å¹¶è¡Œæ¶ˆè´¹ã€‚\n6. æœç´¢æµç¨‹è®¾è®¡\r#\rç”¨æˆ·è¯·æ±‚ï¼šå‰ç«¯é€šè¿‡ API Gateway å‘æœç´¢è¯·æ±‚ï¼Œå¸¦å…¥ä½ç½®ï¼ˆç»çº¬åº¦æˆ–åŸå¸‚IDï¼‰ã€ä¸“ç§‘ï¼ˆæ ‡ç­¾ï¼‰ã€å¯ç”¨æ—¥æœŸèŒƒå›´ï¼ˆå¦‚â€œæœ¬å‘¨æœ‰ç©ºâ€ï¼‰ã€å…¶ä»–è¿‡æ»¤ï¼ˆè¯­è¨€ã€æ€§åˆ«åå¥½ç­‰ï¼‰ã€‚\nSearch æœåŠ¡\né€»è¾‘ï¼šå…ˆæ ¡éªŒè¯·æ±‚å‚æ•°ï¼›æ„é€  Elasticsearch æŸ¥è¯¢ï¼š\nGeo Distance filterï¼šåŸºäºç”¨æˆ·ä½ç½®å’Œè¯Šæ‰€/ä»ä¸šè€…æ‰€åœ¨è¯Šæ‰€ä½ç½®è®¡ç®—è·ç¦»å¹¶æ’åºï¼ˆå¯åˆ†é¡µï¼‰ã€‚\nä¸“ç§‘ filterï¼šterm filter on specialty fieldã€‚\nå¯ç”¨æ€§ filterï¼šå¦‚æœç´¢å¼•ä¸­æå‰æ ‡æ³¨äº†â€œä¸‹ä¸€å¯ç”¨æ—¥æœŸâ€å­—æ®µï¼Œå¯åšèŒƒå›´è¿‡æ»¤ï¼ˆä¾‹å¦‚ next_available_date \u0026lt;= æœ¬å‘¨æœ«ï¼‰ï¼›è‹¥éœ€è¦æ›´å®æ—¶çš„å¯ç”¨æ—¶æ®µåˆ¤æ–­ï¼Œå¯ï¼š\nåœ¨æœç´¢é˜¶æ®µåªåšç²—ç­›ï¼ˆä¾‹å¦‚åªç­›é€‰æ ‡è®°æœ‰ç©ºé—²çš„ä»ä¸šè€…æˆ–è¯Šæ‰€ï¼‰ï¼ŒçœŸæ­£çš„å¯ç”¨æ—¶æ®µè¯¦æƒ…ç”±å‰ç«¯åœ¨å€™é€‰åˆ—è¡¨ä¸­ç‚¹å‡»åï¼Œå†è°ƒç”¨ Availability æœåŠ¡å®æ—¶è·å–å…·ä½“å¯ç”¨æ—¶æ®µã€‚ ç¼“å­˜ï¼šå¯¹é«˜é¢‘æŸ¥è¯¢ï¼ˆå¦‚å¤§åŸå¸‚å¸¸ç”¨ä¸“ç§‘ï¼‰å¯åœ¨ Redis ç¼“å­˜æœç´¢ç»“æœåˆ—è¡¨IDå’Œç®€å•æ‘˜è¦ï¼ŒTTL 10-30sï¼Œå‡è½» ES å‹åŠ›ã€‚\nåˆ†é¡µä¸æ’åºï¼šæ”¯æŒåˆ†é¡µï¼ˆæ·±åˆ†é¡µéœ€è°¨æ…ï¼Œå¯ç”¨ search_after æˆ–åŸºäºæ¸¸æ ‡åˆ†é¡µï¼‰ï¼Œæ’åºå¯æŒ‰è·ç¦»ã€è¯„åˆ†æˆ–ç»¼åˆå¾—åˆ†ã€‚\nå“åº”ï¼šè¿”å›å€™é€‰åˆ—è¡¨ï¼ˆå¸¦ä»ä¸šè€…IDã€è¯Šæ‰€ä¿¡æ¯åŸºç¡€ã€è¯„åˆ†ã€ä¸‹ä¸€å¯ç”¨æ—¥æœŸç­‰ï¼‰ï¼Œç”±å‰ç«¯å±•ç¤ºï¼›è‹¥ç”¨æˆ·è¿›ä¸€æ­¥è¦æ±‚â€œæŸ¥çœ‹å…·ä½“å¯ç”¨æ—¶æ®µâ€ï¼Œå†è°ƒç”¨ Availability æœåŠ¡ã€‚\næŠ€æœ¯è¯­è¨€ï¼š\nSearch æœåŠ¡æ¨èä½¿ç”¨ Go æˆ– Kotlin/Javaï¼š\nGoï¼šé«˜å¹¶å‘ã€è½»é‡äºŒè¿›åˆ¶ã€å¯åŠ¨å¿«ã€æ˜“éƒ¨ç½²ï¼›Elasticsearch å®¢æˆ·ç«¯æˆç†Ÿï¼Œé€‚åˆé«˜ QPSã€‚ Java/Kotlinï¼šç”Ÿæ€æˆç†Ÿï¼ŒåŸç”Ÿ ES å®¢æˆ·ç«¯æ”¯æŒå¥½ï¼›è‹¥å›¢é˜Ÿå·²æœ‰ Spring Boot ç»éªŒï¼Œå¯å¿«é€Ÿé›†æˆç›‘æ§ã€é…ç½®ä¸­å¿ƒç­‰ã€‚ Node.js ä¹Ÿå¯ï¼Œä½†åœ¨é«˜å¹¶å‘ç½‘ç»œ IO åœºæ™¯ä¸‹ Go æ€§èƒ½æ›´ä¼˜ä¸”èµ„æºå ç”¨æ›´ä½ã€‚\n7. å¯ç”¨æ—¶æ®µï¼ˆAvailabilityï¼‰è®¾è®¡\r#\r7.1 æ¦‚å¿µæ¨¡å‹\r#\rWorking Hours Templateï¼šä»ä¸šè€…åœ¨å„è¯Šæ‰€æˆ–è¿œç¨‹çš„å¸¸è§„å¯ç”¨æ—¶é—´æ®µï¼ˆä¾‹å¦‚å‘¨ä¸€9:00-12:00ï¼Œ14:00-18:00ï¼‰ã€‚ ä¾‹å¤–æƒ…å†µï¼ˆExceptionsï¼‰ï¼šè¯·å‡ã€ä¸´æ—¶å…³é—­ã€å‡æœŸã€ä¸´æ—¶åŠ ç­ã€æ‰‹åŠ¨é˜»å¡æ—¶é—´æ®µç­‰ã€‚ å·²é¢„çº¦æ—¶æ®µï¼ˆExisting Bookingsï¼‰ï¼šå·²è¢«å…¶ä»–æ‚£è€…é¢„è®¢çš„æ—¶æ®µã€‚ ç¼“å†²/å‡†å¤‡æ—¶é—´ï¼šæŸäº›æœåŠ¡éœ€è¦åœ¨é¢„çº¦å‰åç•™å‡ºå‡†å¤‡æˆ–æ¸…æ´æ—¶é—´ã€‚ æ—¶åŒºï¼šä»ä¸šè€…ä¸æ‚£è€…å¯èƒ½è·¨æ—¶åŒºï¼Œå¯¹æœ¬åœ°æ—¶é—´è½¬æ¢éœ€è°¨æ…ï¼Œç»Ÿä¸€ä»¥ UTC å­˜å‚¨ã€‚ 7.2 å­˜å‚¨ä¸è®¡ç®—\r#\rå­˜å‚¨æ–¹æ¡ˆï¼š\nWorking Hours Template \u0026amp; Exceptions å­˜åœ¨å…³ç³»å‹æ•°æ®åº“è¡¨ï¼š\npractitioner_availability_template(practitioner_id, weekday, start_time, end_time, duration_slot, buffer_before, buffer_after) availability_exceptions(practitioner_id, date, start_time, end_time, type) å·²é¢„çº¦è®°å½•å­˜åœ¨ appointments è¡¨ï¼Œå¹¶åœ¨ Booking æ—¶å†™å…¥ã€‚\nè®¡ç®—å®æ—¶å¯ç”¨æ—¶æ®µï¼š\næ–¹æ³• 1ï¼šå®æ—¶è®¡ç®—\nAPI è°ƒç”¨ Availability æœåŠ¡æ—¶ï¼Œæ ¹æ® template + exceptions + existing bookingsï¼Œä»ç›®æ ‡æ—¥æœŸèŒƒå›´å†…ç”Ÿæˆæ‰€æœ‰å€™é€‰æ—¶éš™ï¼Œå¹¶æ’é™¤å†²çªä¸ç¼“å†²åŒºï¼Œè¿”å›å¯é€‰æ—¶æ®µåˆ—è¡¨ã€‚é€‚åˆé’ˆå¯¹å•ä¸ªä»ä¸šè€…æˆ–å°‘é‡å¹¶å‘è¯·æ±‚ã€‚ ä¼˜ç‚¹ï¼šå®æ—¶å‡†ç¡®ï¼Œæ— éœ€é¢„å­˜ï¼›ç¼ºç‚¹ï¼šè‹¥è¯·æ±‚é‡å¤§æˆ–æŸ¥è¯¢èŒƒå›´å¤§ï¼ˆæ¯”å¦‚æ‰¹é‡æŸ¥è¯¢å¤šä½ä»ä¸šè€…å¤šä¸ªæ—¶é—´èŒƒå›´ï¼‰ï¼Œè®¡ç®—å¼€é”€å¯èƒ½é«˜ï¼Œéœ€åšå¥½å¹¶å‘ä¼˜åŒ–ã€‚ æ–¹æ³• 2ï¼šé¢„è®¡ç®— / ç¼“å­˜\nç³»ç»Ÿå®šæœŸï¼ˆå¦‚æ¯å¤©å‡Œæ™¨æˆ–å¢é‡äº‹ä»¶é©±åŠ¨ï¼‰ä¸ºæ¯ä¸ªä»ä¸šè€…ç”Ÿæˆæœªæ¥Nå¤©ï¼ˆå¦‚7å¤©æˆ–14å¤©ï¼‰çš„å¯ç”¨æ—¶æ®µåˆ—è¡¨ï¼Œå­˜äºä¸€ä¸ªå¿«é€ŸæŸ¥è¯¢çš„å­˜å‚¨ï¼ˆå¦‚ Redis æˆ–ä¸“é—¨çš„ NoSQL è¡¨ï¼‰ã€‚Booking æˆ– Search é˜¶æ®µå¯ç›´æ¥æŸ¥è¯¢ç¼“å­˜æ•°æ®ã€‚ å¢é‡æ›´æ–°ï¼šå½“æœ‰é¢„çº¦åˆ›å»º/å–æ¶ˆæˆ– Exceptions å˜æ›´æ—¶ï¼Œé€šè¿‡äº‹ä»¶æµè§¦å‘æ›´æ–°å¯¹åº”ä»ä¸šè€…åœ¨ç¼“å­˜ä¸­çš„å¯ç”¨æ—¶æ®µã€‚ ä¼˜ç‚¹ï¼šæŸ¥è¯¢å¿«é€Ÿï¼Œé€‚åˆæœç´¢å¤§æ‰¹ä»ä¸šè€…æ—¶åˆç­›ï¼›ç¼ºç‚¹ï¼šéœ€è¦è®¾è®¡æ›´æ–°æœºåˆ¶ï¼Œä¿è¯è¿‘å®æ—¶ã€‚ æ¨èï¼šç»“åˆä¸¤è€…ï¼šå¯¹äº Search é˜¶æ®µï¼Œä»…éœ€çŸ¥é“â€œæ˜¯å¦æœ‰å¯ç”¨â€ï¼Œå¯åœ¨é¢„è®¡ç®—ç´¢å¼•ï¼ˆä¾‹å¦‚ Elastic ç´¢å¼•ä¸­çš„ next_available_date å­—æ®µã€æˆ– Redis ä¸­å°ä½“é‡æ ‡è®°ï¼‰ä¸­æ ‡æ³¨ï¼›è‹¥ç”¨æˆ·é€‰å®šæŸä½ä»ä¸šè€…/è¯Šæ‰€å¹¶é€‰æ—¥æœŸï¼Œåˆ™å†è°ƒç”¨å®æ—¶è®¡ç®—ä»¥è·å–å…·ä½“æ—¶éš™ï¼Œæˆ–ä»é¢„è®¡ç®—ç¼“å­˜è¯»å–ï¼ˆè‹¥è¶³å¤Ÿå®æ—¶ï¼‰ã€‚\nè¯­è¨€/æ¡†æ¶ï¼š\nAvailability æœåŠ¡å¯ç”¨ Go å®ç°ï¼Œå…·å¤‡é«˜å¹¶å‘å¤„ç†èƒ½åŠ›ï¼›ä¹Ÿå¯ç”¨ Kotlin/Javaï¼Œè‹¥ä¸ä¸šåŠ¡å›¢é˜Ÿåå¥½ä¸€è‡´ã€‚æ ¸å¿ƒè®¡ç®—é€»è¾‘éœ€é«˜æ•ˆå®ç°ï¼ˆå¦‚æ—¶é—´åŒºé—´è¿ç®—ã€å†²çªæ£€æµ‹ï¼‰ï¼Œå¯å¤ç”¨å·²æœ‰åº“æˆ–è‡ªè¡Œå®ç°ã€‚ å¹¶å‘å¤„ç†ï¼š\nå¯¹å•ä¸ªä»ä¸šè€…çš„ Availability è®¡ç®—è¯·æ±‚ï¼Œç›¸å¯¹ç‹¬ç«‹ï¼›å¯æ°´å¹³æ‰©å±• Availability æœåŠ¡å®ä¾‹ã€‚\né¢„è®¡ç®—ä»»åŠ¡å¯ç”±ä¸“é—¨ Worker é›†ç¾¤ï¼ˆKafka Consumerï¼‰å¤„ç†ï¼Œè¯­è¨€å¯é€‰ Python æˆ– Goï¼š\nPythonï¼šå¼€å‘æ•ˆç‡é«˜ï¼Œå¯ç”¨ Pandas ç­‰åº“åšæ‰¹é‡è®¡ç®—ï¼›ä½†éœ€æ³¨æ„æ€§èƒ½å’Œå¹¶å‘ï¼› Goï¼šè‹¥è¦æ±‚é«˜å¹¶å‘ã€ä½å»¶è¿Ÿï¼Œä¹Ÿå¯ç”¨ Go Workerã€‚ å»ºè®®å®æ—¶åœ¨çº¿è®¡ç®—ç”± Go æœåŠ¡å®Œæˆï¼›æ‰¹é‡é¢„è®¡ç®— Worker å¯æ ¹æ®å›¢é˜ŸæŠ€æœ¯æ ˆåœ¨ Python/Go ä¹‹é—´é€‰æ‹©ã€‚\n8. é¢„çº¦ï¼ˆBookingï¼‰è®¾è®¡\r#\r8.1 ä¸šåŠ¡æµç¨‹\r#\ræ‚£è€…åœ¨æŸæ—¶æ®µç‚¹å‡»â€œé¢„çº¦â€\nBooking æœåŠ¡æ ¡éªŒè¯·æ±‚ï¼š\næ‚£è€…èº«ä»½æœ‰æ•ˆ é¢„çº¦æ—¶æ®µåœ¨å¯ç”¨èŒƒå›´å†…ï¼ˆå†æ¬¡æ£€æŸ¥ï¼Œé˜²æ­¢è„è¯»ç¼“å­˜å¯¼è‡´å†²çªï¼‰ è‹¥éœ€è¦ä»˜è´¹ï¼Œè§¦å‘ Payment æœåŠ¡ï¼ˆå¯å¼‚æ­¥æˆ–åŒæ­¥ï¼Œè§†ä¸šåŠ¡ï¼‰ã€‚ åˆ›å»ºé¢„çº¦è®°å½•ï¼šå†™å…¥å…³ç³»å‹æ•°æ®åº“ï¼›åŒæ—¶å¯èƒ½è¦æ›´æ–°ç¼“å­˜çš„å¯ç”¨æ—¶æ®µã€é€šçŸ¥äº‹ä»¶ã€ç´¢å¼•æ›´æ–°ã€‚\nå‘é€ç¡®è®¤ç»™æ‚£è€…ä¸ä»ä¸šè€…ï¼ˆåŒæ­¥ç­‰å¾…æˆ–å¼‚æ­¥åç»­ï¼‰ã€‚\næ”¯æŒåç»­ä¿®æ”¹/å–æ¶ˆï¼šéœ€å†æ¬¡åšå†²çªæ£€æŸ¥ä¸æ•°æ®åº“æ›´æ–°ï¼Œå¹¶è§¦å‘æ›´æ–°äº‹ä»¶ã€‚\n8.2 å¹¶å‘ä¸ä¸€è‡´æ€§\r#\rå¹¶å‘å†²çªåœºæ™¯ï¼šå¤šä¸ªæ‚£è€…åŒæ—¶è¯·æ±‚åŒä¸€ä»ä¸šè€…åŒä¸€æ—¶æ®µã€‚\nå¤„ç†ç­–ç•¥ï¼š\næ‚²è§‚é”ï¼šåœ¨æ•°æ®åº“å±‚å¯¹è¯¥ä»ä¸šè€…å¯¹åº”çš„å½“å¤©æ—¶æ®µåŠ é”ï¼ˆå¦‚ SELECT \u0026hellip; FOR UPDATE on availability-related rowï¼‰ï¼›ç¼ºç‚¹æ˜¯åœ¨é«˜å¹¶å‘ä¸‹çƒ­ç‚¹é”ç«äº‰ä¸¥é‡ï¼› ä¹è§‚é” / CASï¼šåœ¨é¢„çº¦è¡¨æˆ– availability cache ä¸­ç”¨ç‰ˆæœ¬å·æˆ–æ ‡å¿—ä½åšä¹è§‚å¹¶å‘æ§åˆ¶ï¼›å¯èƒ½éœ€è¦é‡è¯•é€»è¾‘ï¼› åˆ†å¸ƒå¼é”ï¼šåˆ©ç”¨ Redis Redlock æˆ– Zookeeper é’ˆå¯¹å•ä¸ªä»ä¸šè€…è¿›è¡Œé”ï¼Œæ§åˆ¶åŒä¸€æ—¶æ®µåªæœ‰ä¸€ä¸ªè¯·æ±‚è½åœ°ï¼›éœ€æ³¨æ„é”è¶…æ—¶ä¸å¯é æ€§ï¼› åˆ†åŒºè®¾è®¡ï¼šå°†åŒä¸€ä»ä¸šè€…æˆ–è¯Šæ‰€çš„é¢„çº¦è¯·æ±‚éƒ½è·¯ç”±åˆ°åŒä¸€æ•°æ®åº“åˆ†åŒºæˆ–å®ä¾‹ï¼Œé¿å…è·¨åˆ†åŒºäº‹åŠ¡ï¼›ç»“åˆä¸€è‡´æ€§å“ˆå¸Œæˆ–è·¯ç”±è§„åˆ™ã€‚ æ¨èåšæ³•ï¼š\nå°†é¢„çº¦æ•°æ®æŒ‰ä»ä¸šè€…ç»´åº¦åˆ†åŒºï¼ˆåŒä¸€ä»ä¸šè€…çš„é¢„çº¦å†™å…¥åŒä¸€åˆ†åŒº/åº“ï¼‰ï¼Œåœ¨è¯¥åˆ†åŒºå†…ç”¨æ•°æ®åº“äº‹åŠ¡ï¼ˆSELECT FOR UPDATEï¼‰æˆ–ä¹è§‚é”ç¡®ä¿åŒä¸€æ—¶æ®µåªä¼šè¢«ä¸€ä¸ªå†™æˆåŠŸã€‚å¯¹äºé«˜å¹¶å‘çƒ­é—¨åŒ»ç”Ÿï¼Œå¯é¢„ä¼°å¹¶åšé™æµã€‚ Redis åˆ†å¸ƒå¼é”é…åˆæ•°æ®åº“äº‹åŠ¡ï¼šå…ˆåœ¨ Redis ä¸Šå¯¹ key = practitioner_id:date:timeslot åŠ é”ï¼Œè‹¥è·å¾—é”åˆ™è¿›å…¥æ•°æ®åº“äº‹åŠ¡æ£€æŸ¥å¹¶å†™å…¥ï¼›å†™å®Œåé‡Šæ”¾é”ã€‚è¶…æ—¶æ§åˆ¶è¦æ¯”æ•°æ®åº“äº‹åŠ¡è¶…æ—¶æ›´é•¿ï¼Œé¿å…æ­»é”æˆ–æå‰é‡Šæ”¾ã€‚ å¹‚ç­‰æ€§ï¼šå‰ç«¯åœ¨è¯·æ±‚å¤´å¸¦å¹‚ç­‰IDï¼Œé˜²æ­¢é‡å¤æäº¤ã€‚ Saga æ¨¡å¼ï¼šè‹¥æœ‰è·¨æœåŠ¡ä¾èµ–ï¼ˆå¦‚åˆ›å»ºé¢„çº¦åéœ€è°ƒç”¨ Billingã€Notificationã€Analyticsï¼‰ï¼Œåœ¨ä¸»äº‹åŠ¡æäº¤åå‘å¸ƒâ€œé¢„çº¦å·²åˆ›å»ºâ€äº‹ä»¶ï¼›å„æ¶ˆè´¹è€…æŒ‰éœ€å¤„ç†ï¼ˆå¦‚æ‰£æ¬¾ã€å‘é€é‚®ä»¶ï¼‰ã€‚è‹¥ Billing å¤±è´¥ï¼Œå¯é€šè¿‡è¡¥å¿äº‹åŠ¡æˆ–äººå·¥å¹²é¢„å¤„ç†ã€‚\næŠ€æœ¯è¯­è¨€ï¼šBooking æœåŠ¡æ¨èä½¿ç”¨ Go æˆ– Kotlin/Javaã€‚\nGoï¼šè½»é‡é«˜å¹¶å‘ï¼Œæ˜“éƒ¨ç½²ï¼› Kotlin/Javaï¼šäº‹åŠ¡ç®¡ç†ä¸ç”Ÿæ€æˆç†Ÿï¼›Spring Transaction æ”¯æŒå¤šç§æ•°æ®åº“ã€‚ 9. å¼‚æ­¥ä»»åŠ¡ä¸äº‹ä»¶é©±åŠ¨\r#\ræ¶ˆæ¯æ€»çº¿ï¼šKafka\näº‹ä»¶ç±»å‹ï¼š\nAppointmentCreatedã€AppointmentCanceledã€AppointmentRescheduled AvailabilityChangedï¼ˆä»ä¸šè€…ä¿®æ”¹æ¨¡æ¿æˆ–ä¾‹å¤–ï¼‰ UserUpdatedã€PractitionerUpdatedï¼ˆè§¦å‘ç´¢å¼•æ›´æ–°ï¼‰ NotificationEventï¼ˆç”± Booking æˆ–å…¶ä»–æœåŠ¡ç”Ÿäº§ï¼Œå†ç”± Notification æœåŠ¡æ¶ˆè´¹ï¼‰ AnalyticsEventï¼ˆå¦‚æœç´¢è¡Œä¸ºã€é¢„çº¦å®Œæˆã€å–æ¶ˆç‡ç­‰ï¼‰ æ¶ˆè´¹è€… Workerï¼š\nç´¢å¼•æ›´æ–° Workerï¼šæ¶ˆè´¹äº‹ä»¶åæ›´æ–° Elasticsearch ç´¢å¼•ï¼ˆå¦‚æ›´æ–° next_available_dateã€è¯„åˆ†ç­‰ï¼‰ï¼Œä¿æŒæœç´¢ç»“æœè¿‘å®æ—¶ã€‚ Notification Workerï¼šæ¶ˆè´¹é€šçŸ¥äº‹ä»¶ï¼Œé€šè¿‡é‚®ä»¶/SMS/Push æœåŠ¡å‘é€ï¼›å¯ç”¨ Node.jsã€Python å®ç°ï¼Œæ–¹ä¾¿é›†æˆç¬¬ä¸‰æ–¹ SDKã€‚ Analytics Workerï¼šæ¶ˆè´¹è¡Œä¸ºäº‹ä»¶ï¼Œå­˜å…¥æ—¶åº/åˆ†æç³»ç»Ÿï¼ˆå¦‚ ClickHouseã€BigQueryã€InfluxDB ç­‰ï¼‰ï¼Œç”¨äºæŠ¥è¡¨å’Œæœºå™¨å­¦ä¹ ã€‚ Cache æ›´æ–° Workerï¼šå½“é¢„çº¦æˆ–å¯ç”¨æ€§å‘ç”Ÿå˜æ›´ï¼Œæ›´æ–° Redis ç¼“å­˜ä¸­å—å½±å“çš„æ•°æ®ã€‚ é€‰å‹ç†ç”±ï¼šKafka é«˜ååã€åˆ†åŒºæœºåˆ¶ä¾¿äºå¹¶è¡Œã€å¤šæ¶ˆè´¹è€…ç»„éš”ç¦»ã€‚\n10. ç¼“å­˜ä¸é™æµ\r#\rçƒ­ç‚¹ç¼“å­˜ï¼šRedis\næœç´¢ç¼“å­˜ï¼šåŸºäºæŸ¥è¯¢å‚æ•° hash åšçŸ­æœŸç¼“å­˜ï¼› å¯ç”¨æ€§ç¼“å­˜ï¼šé¢„è®¡ç®—åå­˜å‚¨æœªæ¥è‹¥å¹²å¤©çš„å¯ç”¨æ—¶æ®µåˆ—è¡¨ï¼ŒKey = practitioner_id; TTL æˆ–æ‰‹åŠ¨æ›´æ–°ï¼› Session/Token é»‘åå•ï¼šè‹¥éœ€è¦ç™»å‡ºæˆ–æ’¤é”€ tokenï¼› åˆ†å¸ƒå¼é”ï¼šRedis Redlockï¼Œç”¨äºé¢„çº¦å¹¶å‘æ§åˆ¶ï¼ˆå¦‚å‰è¿°ï¼‰ã€‚\né™æµã€ç†”æ–­ï¼š\nåœ¨ API Gateway å±‚é…ç½®è¯·æ±‚é™æµï¼ˆé˜²æ­¢æ´ªæ°´æ”»å‡»æˆ–çˆ¬è™«ï¼‰ï¼› æœåŠ¡å†…éƒ¨å¯ç”¨ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•åšç»†ç²’åº¦é™æµï¼ˆä¾‹å¦‚å¯¹å•ä¸ªä»ä¸šè€…çš„é¢„çº¦è¯·æ±‚åšé€Ÿç‡é™åˆ¶ï¼‰ã€‚ é™çº§ç­–ç•¥ï¼š\nå½“åç«¯æŸæœåŠ¡æ•…éšœæ—¶ï¼Œå¯¹ä½ä¼˜å…ˆçº§åŠŸèƒ½åšé™çº§ï¼ˆå¦‚æœç´¢ç¼“å­˜è¿”å›æ—§ç»“æœï¼Œå¹¶åœ¨ UI ä¸Šæç¤ºâ€œç»“æœå¯èƒ½è¿‡æ—¶ï¼Œè¯·ç¨åé‡è¯•â€ï¼‰ã€‚ 11. å¤šåŒºåŸŸä¸å›½é™…åŒ–\r#\rå¤šå›½å®¶/åœ°åŒºéƒ¨ç½²ï¼š\nç‹¬ç«‹ Region éƒ¨ç½²ï¼šé’ˆå¯¹ä¸åŒå›½å®¶/åœ°åŒºåœ¨å¯¹åº”åŒºåŸŸï¼ˆå¦‚ AWS åŒºåŸŸï¼‰éƒ¨ç½²ç‹¬ç«‹é›†ç¾¤ï¼Œæ•°æ®åº“æœ¬åœ°åŒ–ï¼Œå‡å°‘è·¨æ´‹å»¶è¿Ÿï¼›åˆè§„éš”ç¦»ï¼ˆæ•°æ®é©»ç•™ï¼‰ã€‚ è·¨åŒºåŸŸåŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šè‹¥éœ€è¦å…¨çƒæœç´¢ï¼ˆè·¨å›½æœç´¢ï¼‰ï¼Œéœ€è·¨åŒºåŸŸç´¢å¼•å¤åˆ¶ï¼›æˆ–é›†ä¸­æœç´¢é›†ç¾¤ï¼Œä½†ä¼šæœ‰å»¶è¿Ÿä¸åˆè§„é£é™©ï¼Œä¸€èˆ¬ä¸æ¨èã€‚æ¨èæŒ‰å›½å®¶éš”ç¦»ï¼Œæœªæ¥å¦‚éœ€å…¨çƒå…¥å£å¯åšç‹¬ç«‹æœåŠ¡èšåˆã€‚ é…ç½®ä¸­å¿ƒï¼šé€šè¿‡é…ç½®æœåŠ¡ç®¡ç†å„å›½èŠ‚å‡æ—¥è§„åˆ™ã€æ—¶åŒºã€è¯­è¨€æ–‡æ¡ˆã€ä»·æ ¼ç­–ç•¥ï¼ˆè‹¥ä»˜è´¹ï¼‰ã€æ³•è§„åˆè§„é…ç½®ç­‰ï¼›æœåŠ¡å¯åŠ¨æˆ–è¿è¡Œæ—¶ä»é…ç½®ä¸­å¿ƒè·å–å¯¹åº”å›½å®¶é…ç½®ã€‚ éƒ¨ç½²ä¸ IaCï¼šTerraform + Kubernetes + Helm Charts å®ç°å¯å¤åˆ¶çš„é›†ç¾¤æ¨¡æ¿ï¼Œæ–¹ä¾¿æ–°å›½å®¶å¿«é€Ÿä¸Šçº¿ï¼›CI/CD ç®¡é“æ¥å…¥è‡ªåŠ¨åˆ›å»ºé›†ç¾¤ã€éƒ¨ç½²æœåŠ¡ã€‚ æ—¶åŒºå¤„ç†ï¼š\nå­˜å‚¨ç»Ÿä¸€ç”¨ UTCï¼Œå‰ç«¯æ˜¾ç¤ºæˆ–ç”¨æˆ·è¾“å…¥æ—¶åšæ—¶åŒºè½¬æ¢ï¼›Availability æœåŠ¡åœ¨è®¡ç®—æ—¶è€ƒè™‘ä»ä¸šè€…æœ¬åœ°æ—¶åŒºå’Œæ‚£è€…æœ¬åœ°æ—¶åŒºã€‚ å¤šè¯­è¨€ / æ–‡æ¡ˆï¼š\nå‰ç«¯ä¸åç«¯æ”¯æŒå›½é™…åŒ–ï¼ˆi18nï¼‰ï¼›åç«¯é”™è¯¯/æ¶ˆæ¯ code åŒ–ï¼Œå‰ç«¯æ ¹æ® locale æ¸²æŸ“æ–‡æœ¬ã€‚ è´§å¸ä¸æ”¯ä»˜ï¼šè‹¥æ¶‰åŠä»˜è´¹é¢„çº¦ï¼Œéœ€æ”¯æŒå„åœ°è´§å¸ã€æ”¯ä»˜é€šé“æ¥å…¥ï¼ˆStripeã€PayPalã€æœ¬åœ°æ”¯ä»˜ç½‘å…³ï¼‰ï¼Œå¹¶åšåœ°åŸŸéš”ç¦»ã€‚\n12. å®‰å…¨ä¸åˆè§„\r#\rä¼ è¾“åŠ å¯†ï¼šå…¨é“¾è·¯ TLSã€‚ å­˜å‚¨åŠ å¯†ï¼šæ•°æ®åº“åŠ å¯†ã€S3 ç­‰å­˜å‚¨åŠ å¯†ã€‚ è®¿é—®æ§åˆ¶ï¼šæœ€å°æƒé™åŸåˆ™ï¼Œå¾®æœåŠ¡é—´è°ƒç”¨ç”¨ mTLS æˆ– JWTï¼Œä¸¥æ ¼æ§åˆ¶ IAM æƒé™ã€‚ æ•æ„Ÿæ•°æ®éš”ç¦»ï¼šå¦‚åŒ»ç–—éšç§ã€èº«ä»½è¯å·ç­‰ï¼Œéœ€åšä¸“é—¨åŠ å¯†æˆ–tokenåŒ–å­˜å‚¨ï¼Œå¹¶é™åˆ¶è®¿é—®æ—¥å¿—è®°å½•çº§åˆ«ã€‚ å®¡è®¡æ—¥å¿—ï¼šè®°å½•å…³é”®æ“ä½œï¼ˆé¢„çº¦åˆ›å»º/å–æ¶ˆ/ä¿®æ”¹ã€æƒé™å˜æ›´ç­‰ï¼‰åˆ°ä¸å¯ç¯¡æ”¹å­˜å‚¨ï¼Œç”¨äºå®‰å…¨å®¡è®¡ã€‚ DDoS é˜²æŠ¤ã€WAFï¼šåœ¨è¾¹ç¼˜å±‚é¢æˆ–äº‘æœåŠ¡å•†æä¾›é˜²æŠ¤ã€‚ åˆè§„ï¼šæ ¹æ®å„å›½æ³•è§„ï¼ˆGDPRã€HIPAA ç­‰ï¼‰ï¼Œéƒ¨ç½²å‰åšæ³•å¾‹åˆè§„è¯„ä¼°ã€‚ 13. ç›‘æ§ä¸å¯è§‚å¯Ÿæ€§\r#\rMetricsï¼šPrometheus + Grafanaã€‚\nç›‘æ§ API QPSã€å“åº”æ—¶å»¶ã€é”™è¯¯ç‡ï¼›å„å¾®æœåŠ¡èµ„æºï¼ˆCPU/Mem/Diskï¼‰ï¼›Kafka æ¶ˆè´¹æ»åï¼›æ•°æ®åº“è¿æ¥æ± ã€é”ç­‰å¾…ã€ç£ç›˜ç©ºé—´ç­‰ã€‚ æ—¥å¿—ï¼šç»“æ„åŒ–æ—¥å¿—ï¼ˆJSONï¼‰ï¼Œé›†ä¸­æ”¶é›†ï¼ˆELK/EFKï¼‰ã€‚\nTracingï¼šOpenTelemetry + Jaeger/Zipkinï¼Œé€šè¿‡ API Gateway æ³¨å…¥ trace idï¼Œé“¾è·¯å¯è§†åŒ–ï¼Œå®šä½è·¨æœåŠ¡å»¶è¿Ÿã€‚\nå‘Šè­¦ï¼šè®¾ç½®é˜ˆå€¼å‘Šè­¦ï¼ˆä¾‹å¦‚æœç´¢å»¶è¿Ÿè¶…è¿‡æŸå€¼ã€é¢„çº¦å¤±è´¥ç‡å¼‚å¸¸ä¸Šå‡ã€Kafka æ»åè¿‡é«˜ã€æ•°æ®åº“æ…¢æŸ¥è¯¢æ¿€å¢ç­‰ï¼‰ï¼Œå¹¶é›†æˆ PagerDuty/Slack ç­‰ã€‚\nå¥åº·æ£€æŸ¥ï¼šKubernetes readiness/liveness probeï¼›æœåŠ¡è‡ªå¸¦å¥åº·æ£€æŸ¥æ¥å£ï¼›è‡ªåŠ¨é‡å¯æ•…éšœå®ä¾‹ã€‚\nChaos Testingï¼šå®šæœŸæˆ–åœ¨é¢„ç”Ÿäº§ç¯å¢ƒåšæ•…éšœæ³¨å…¥æµ‹è¯•ï¼ˆæ–­ç½‘ã€å»¶è¿Ÿã€èŠ‚ç‚¹å®•æœºï¼‰ï¼ŒéªŒè¯ç³»ç»Ÿå¼¹æ€§å’Œæ¢å¤èƒ½åŠ›ã€‚\n14. CI/CD ä¸è‡ªåŠ¨åŒ–\r#\rç‰ˆæœ¬æ§åˆ¶ï¼šGit + åˆ†æ”¯ç­–ç•¥ï¼ˆGitFlow/GitHub Flowï¼‰ã€‚ å®¹å™¨åŒ–ï¼šDockerï¼Œé•œåƒæ‰“åŒ…ï¼›å¤šé˜¶æ®µæ„å»ºä»¥å‡å°é•œåƒä½“ç§¯ã€‚ æµæ°´çº¿ï¼šJenkins/GitHub Actions/GitLab CI ç­‰ï¼›åŒ…æ‹¬ä»£ç æ£€æŸ¥ã€å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€æ„å»ºé•œåƒã€æ‰«æå®‰å…¨æ¼æ´ã€éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¥‘çº¦æµ‹è¯•ã€ç«¯åˆ°ç«¯ï¼‰ã€éƒ¨ç½²åˆ°ç”Ÿäº§ã€‚ åŸºç¡€è®¾æ–½å³ä»£ç ï¼šTerraform/CloudFormation ç®¡ç†äº‘èµ„æºï¼›Helm Charts æˆ– Kustomize ç®¡ç† Kubernetes éƒ¨ç½²æ¸…å•ï¼›ç»“åˆ ArgoCD/Flux å®ç° GitOpsã€‚ è“ç»¿éƒ¨ç½² / é‡‘ä¸é›€å‘å¸ƒï¼šé€æ­¥æµé‡åˆ‡æ¢ï¼Œé™ä½é£é™©ã€‚ å›æ»šæœºåˆ¶ï¼šè‡ªåŠ¨åŒ–å›æ»šè„šæœ¬ï¼Œè‹¥å¥åº·æ£€æŸ¥å¤±è´¥æˆ–ç›‘æ§å‘Šè­¦ï¼Œå¯å¿«é€Ÿå›æ»šåˆ°ç¨³å®šç‰ˆæœ¬ã€‚ 15. æµ‹è¯•ç­–ç•¥\r#\rå•å…ƒæµ‹è¯•ï¼šå„æœåŠ¡å†…æ ¸å¿ƒé€»è¾‘ï¼ˆå¦‚ Availability è®¡ç®—ã€Booking å¹¶å‘å†²çªæ£€æµ‹ï¼‰ã€‚\né›†æˆæµ‹è¯•ï¼šæ¨¡æ‹Ÿå¾®æœåŠ¡é—´è°ƒç”¨ï¼Œå¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­ç”¨ WireMock æˆ–æµ‹è¯•å®¹å™¨ã€‚\nå¥‘çº¦æµ‹è¯•ï¼šç¡®ä¿æœåŠ¡é—´ API å˜æ›´ä¸ä¼šç ´åæ¶ˆè´¹è€…ã€‚\næ€§èƒ½æµ‹è¯•ï¼š\nLoad Testingï¼šç”¨å·¥å…·ï¼ˆLocustã€JMeterï¼‰æ¨¡æ‹Ÿ 700 Search QPSã€90 Booking QPSï¼›ç›‘æ§å„ç»„ä»¶ç“¶é¢ˆå¹¶è¿›è¡Œå®¹é‡è§„åˆ’ã€‚ å‹åŠ›æµ‹è¯•ï¼šè¶…é«˜å¹¶å‘ã€æ•…éšœåœºæ™¯ï¼›æµ‹è¯•ç³»ç»Ÿé™çº§èƒ½åŠ›ã€‚ å®‰å…¨æµ‹è¯•ï¼šæ‰«æä¾èµ–æ¼æ´ï¼ˆSnyk/OWASPï¼‰ã€æ¸—é€æµ‹è¯•ã€‚\nå¯ç”¨æ€§æµ‹è¯•ï¼šChaos Monkey é£æ ¼æ•…éšœæ³¨å…¥ï¼ŒéªŒè¯è‡ªåŠ¨æ¢å¤æœºåˆ¶ã€‚\n16. æŠ€æœ¯é€‰å‹å°ç»“ä¸ç†ç”±\r#\rå¾®æœåŠ¡æ¶æ„ + Kubernetesï¼šé¿å…å•ä½“ï¼Œä¾¿äºç‹¬ç«‹æ‰©å±•ã€éƒ¨ç½²å’Œå›¢é˜Ÿå¹¶è¡Œå¼€å‘ï¼›K8s æä¾›è‡ªæ„ˆã€æ»šåŠ¨å‡çº§ã€æ°´å¹³ä¼¸ç¼©èƒ½åŠ›ã€‚\nè¯­è¨€\nGoï¼šé«˜å¹¶å‘ã€äºŒè¿›åˆ¶éƒ¨ç½²ç®€å•ã€æ€§èƒ½ä¼˜è¶Šï¼Œé€‚ç”¨äº Searchã€Availabilityã€Booking ç­‰æ ¸å¿ƒé«˜ QPS æœåŠ¡ã€‚ Kotlin/Javaï¼šè‹¥å·²æœ‰å›¢é˜Ÿç†Ÿæ‚‰ Spring ç”Ÿæ€ï¼Œå¯å¿«é€Ÿå¼€å‘ï¼Œç”Ÿæ€æˆç†Ÿï¼›ä½†ç›¸æ¯” Go å¯åŠ¨æ›´æ…¢ã€èµ„æºæ¶ˆè€—ç•¥é«˜ï¼›é€‚åˆéœ€è¦å¤æ‚äº‹åŠ¡ç®¡ç†æˆ–å·²æœ‰å¤§é‡ Java åº“åœºæ™¯ã€‚ Python/Node.jsï¼šç”¨äºå¼‚æ­¥ Workerï¼ˆNotificationã€Analyticsï¼‰ï¼Œå› é›†æˆç¬¬ä¸‰æ–¹ SDKã€å¼€å‘æ•ˆç‡é«˜ï¼›å¯æ ¹æ®æ€§èƒ½éœ€æ±‚åœ¨é«˜åååœºæ™¯ä¸‹ä¹Ÿå¯é€‰ Goï¼› æ•°æ®åº“\nPostgreSQLï¼šæˆç†Ÿã€ç¨³å®šï¼Œæ”¯æŒå¤æ‚äº‹åŠ¡ä¸åœ°ç†ä½ç½®æ‰©å±•ï¼ˆPostGISï¼‰ï¼›æŒ‰å›½å®¶åˆ†åº“éƒ¨ç½²ã€‚ CockroachDBï¼šè‹¥å¤šåŒºåŸŸä¸€è‡´æ€§è¦æ±‚é«˜ã€å¸Œæœ›ç»Ÿä¸€æ•°æ®åº“å±‚ç®¡ç†ï¼Œå¯è€ƒè™‘ï¼Œä½†éœ€è¯„ä¼°è¿ç»´æˆæœ¬å’Œå»¶è¿Ÿã€‚ æœç´¢ï¼šElasticsearch/OpenSearchï¼Œç”¨äºåœ°ç†è¿‡æ»¤ã€å±æ€§è¿‡æ»¤ç­‰ã€‚\næ¶ˆæ¯é˜Ÿåˆ—ï¼šKafkaï¼Œç”¨äºé«˜ååå¼‚æ­¥äº‹ä»¶ã€‚\nç¼“å­˜/é”ï¼šRedis Clusterï¼Œç”¨äºçƒ­ç‚¹ç¼“å­˜ã€åˆ†å¸ƒå¼é”ã€é™æµã€‚\næœåŠ¡ç½‘æ ¼ï¼šIstio/Linkerdï¼ˆå¯é€‰ï¼‰ï¼Œå¢å¼ºæµé‡ç®¡ç†ã€TLSã€è§‚æµ‹ã€‚\nç›‘æ§/æ—¥å¿—/Tracingï¼šPrometheus+Grafanaã€ELK/EFKã€OpenTelemetry+Jaegerã€‚\nCI/CD \u0026amp; IaCï¼šTerraform + Kubernetes + GitOpsã€‚\nå®¹å™¨è¿è¡Œç¯å¢ƒï¼šDocker + Kubernetesï¼ˆäº‘æ‰˜ç®¡æˆ–è‡ªæ‰˜ç®¡ï¼‰ï¼Œç»“åˆè‡ªåŠ¨æ‰©ç¼©å®¹ï¼ˆHPA/VPAï¼‰ã€‚\nå¤–éƒ¨æ‰˜ç®¡æœåŠ¡ï¼šé‚®ä»¶/SMS æ¨é€ç”¨ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆSendGrid/Twilio ç­‰ï¼‰ï¼›æ”¯ä»˜é›†æˆ Stripe/PayPal/æœ¬åœ°æ”¯ä»˜ï¼›ç›‘æ§å‘Šè­¦å¯é›†æˆ PagerDutyã€‚\n17. å¤šå›½å®¶ä¸Šçº¿æµç¨‹ç¤ºä¾‹\r#\rå‡†å¤‡é˜¶æ®µ\nåœ¨é…ç½®ä¸­å¿ƒä¸­æ·»åŠ æ–°å›½å®¶é…ç½®ï¼šæ—¶åŒºã€èŠ‚å‡æ—¥è§„åˆ™ã€é»˜è®¤è¯­è¨€ã€åˆè§„è¦æ±‚ã€æ”¯ä»˜æ–¹å¼ç­‰ã€‚ Terraform è„šæœ¬ï¼šæ–°å¢å¯¹åº”åŒºåŸŸçš„ VPCã€Kubernetes é›†ç¾¤èŠ‚ç‚¹ç»„ç­‰èµ„æºå®šä¹‰ã€‚ éƒ¨ç½²åŸºç¡€è®¾æ–½\nä½¿ç”¨ Terraform è‡ªåŠ¨åˆ›å»ºæˆ–æ‰©å®¹é›†ç¾¤ï¼› åœ¨ Kubernetes ä¸­éƒ¨ç½²æ ¸å¿ƒå¾®æœåŠ¡ï¼ˆDeploymentã€StatefulSetã€ConfigMapã€Secret ç­‰ï¼‰ã€‚ åˆå§‹åŒ–æ•°æ®åº“ï¼šæ–°å›½å®¶æ•°æ®åº“å®ä¾‹æˆ–åˆ†åŒºã€‚ åŒæ­¥æ•°æ®ä¸æµ‹è¯•\næ ¹æ®éœ€è¦åŒæ­¥åŸºç¡€å­—å…¸æ•°æ®ï¼ˆå¦‚ä¸“ç§‘ç±»åˆ«ã€è¯Šæ‰€æ³¨å†Œè¡¨æ ¼å­—æ®µç­‰ï¼‰ï¼› åœ¨æµ‹è¯•ç¯å¢ƒè¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•ï¼›é¢„çƒ­ç¼“å­˜ï¼›æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼› ç°åº¦å‘å¸ƒï¼šå°†å°‘é‡æµé‡å¯¼å‘æ–°é›†ç¾¤ï¼Œè§‚å¯Ÿç›‘æ§æŒ‡æ ‡ã€‚ æ­£å¼ä¸Šçº¿\nDNS / Gateway é…ç½®ï¼šæ–°å›½å®¶åŸŸåæˆ–è·¯å¾„è·¯ç”±è‡³å¯¹åº”é›†ç¾¤ï¼› å¼€å¯ç›‘æ§å‘Šè­¦ï¼›ä¸å½“åœ°æ”¯æŒå›¢é˜Ÿã€è¿ç»´åä½œï¼› é€æ­¥æ‰©å¤§æµé‡è‡³å…¨é‡ï¼› è¿­ä»£ä¼˜åŒ–\næ ¹æ®ä½¿ç”¨æƒ…å†µä¼˜åŒ–èµ„æºé…ç½®ï¼›è°ƒæ•´é¢„è®¡ç®—çª—å£ï¼›å¢å¼ºç¼“å­˜ï¼› æ”¶é›†å½“åœ°ç”¨æˆ·åé¦ˆï¼ŒæŒç»­æ”¹è¿›ã€‚ 18. å®¹é”™ä¸é™çº§è®¾è®¡\r#\ræœåŠ¡å®ä¾‹å†—ä½™ï¼šå„å¾®æœåŠ¡åœ¨å¤šä¸ªèŠ‚ç‚¹å¤šå‰¯æœ¬éƒ¨ç½²ï¼›K8s è‡ªåŠ¨é‡å¯ã€‚\nè·¨å¯ç”¨åŒºéƒ¨ç½²ï¼šé›†ç¾¤è·¨å¤šä¸ªå¯ç”¨åŒºï¼Œé˜²æ­¢å• AZ æ•…éšœã€‚\nCircuit Breaker / Retryï¼šæœåŠ¡é—´è°ƒç”¨å‡ºç°æ•…éšœæ—¶ï¼Œå¿«é€Ÿå¤±è´¥å¹¶ç†”æ–­ï¼Œä¿æŠ¤ä¸‹æ¸¸ï¼›é‡è¯•æœºåˆ¶å¸¦é€€é¿ç­–ç•¥ã€‚\né™çº§æ–¹æ¡ˆï¼š\næœç´¢æœåŠ¡å¤±æ•ˆæ—¶ï¼Œå¯è¿”å›ç¼“å­˜ç»“æœæˆ–ç®€åŒ–è¿”å›ï¼ˆå¦‚ä»…è¿”å›è¯Šæ‰€åˆ—è¡¨ã€æç¤ºå®æ—¶ä¸å¯ç”¨ï¼‰ï¼› Availability æœåŠ¡æ•…éšœæ—¶ï¼Œå¯æ˜¾ç¤ºè¿‘æœŸç¼“å­˜æ—¶æ®µå¹¶æç¤ºâ€œè¯·åˆ·æ–°ä»¥è·å–å®æ—¶å¯ç”¨â€ï¼› Booking æœåŠ¡è‹¥çŸ­æš‚ä¸å¯ç”¨ï¼Œå‘ŠçŸ¥ç”¨æˆ·ç¨åé‡è¯•æˆ–æ’é˜Ÿï¼›å¯ç»“åˆé˜Ÿåˆ—ç¼“å†²ï¼ˆä½†éœ€è°¨æ…ï¼Œé˜²æ­¢æ’é˜Ÿè¿‡ä¹…å†²çªï¼‰ã€‚ æ•°æ®å¤‡ä»½ä¸æ¢å¤ï¼š\nå®šæœŸå¤‡ä»½æ•°æ®åº“å¿«ç…§ï¼›Elasticsearch å¿«ç…§ï¼›Kafka æ•°æ®ä¿ç•™ï¼› åˆ¶å®šç¾éš¾æ¢å¤ï¼ˆDRï¼‰é¢„æ¡ˆï¼Œä¿è¯åœ¨åŒºåŸŸæ•…éšœæ—¶å¯å¿«é€Ÿæ¢å¤ã€‚ 19. ç›‘æ§æ‰©å®¹è§„åˆ’\r#\rå®¹é‡è§„åˆ’ï¼š\næ ¹æ® Load Testing æ•°æ®ï¼Œé¢„ä¼°æœç´¢èŠ‚ç‚¹ã€ES é›†ç¾¤èŠ‚ç‚¹ã€æ•°æ®åº“å®ä¾‹è§„æ ¼ä¸å‰¯æœ¬æ•°ï¼› è®¾å®š HPAï¼ˆK8s Horizontal Pod Autoscalerï¼‰ç­–ç•¥ï¼šæ ¹æ® CPUã€å†…å­˜æˆ–è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚å»¶è¿Ÿã€é˜Ÿåˆ—é•¿åº¦ï¼‰è‡ªåŠ¨æ‰©å®¹ã€‚ å¼¹æ€§ä¼¸ç¼©ï¼š\nKubernetes Pod ä¼¸ç¼©ï¼› æ•°æ®åº“è¯»å‰¯æœ¬æ‰©å®¹ï¼›Elasticsearch èŠ‚ç‚¹æ‰©å®¹ï¼›Kafka partition æ‰©å®¹ï¼ˆéœ€å¹³è¡¡ rebalancing æ—¶å½±å“ï¼‰ã€‚ æˆæœ¬ä¼˜åŒ–ï¼š\néé«˜å³°æœŸå¯ç¼©å°å®ä¾‹ï¼›åˆ©ç”¨ Spot å®ä¾‹å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼› è¯„ä¼° Managed Serviceï¼ˆRDS/ElastiCache/ES Serviceï¼‰ä¸è‡ªæ‰˜ç®¡æˆæœ¬å¯¹æ¯”ã€‚ 20. ä¸šåŠ¡ç›‘æµ‹ä¸ä¼˜åŒ–\r#\rå…³é”®æŒ‡æ ‡ (KPI)\næœç´¢å“åº”æ—¶å»¶ã€æˆåŠŸç‡ï¼› é¢„çº¦æˆåŠŸç‡ã€å†²çªé‡è¯•ç‡ï¼› é¢„çº¦å–æ¶ˆç‡ã€æ”¹æœŸç‡ï¼› ç³»ç»Ÿå¯ç”¨ç‡ã€é”™è¯¯ç‡ã€ç³»ç»Ÿè´Ÿè½½ï¼› ç”¨æˆ·ç•™å­˜ã€ä½¿ç”¨é¢‘æ¬¡ï¼ˆç»“åˆ Analyticsï¼‰ã€‚ A/B æµ‹è¯•\nå¯¹æœç´¢æ’åºç®—æ³•ï¼ˆå¦‚è·ç¦»ä¼˜å…ˆ vs è¯„åˆ†ä¼˜å…ˆï¼‰ã€æ—¶æ®µæ¨èé€»è¾‘ç­‰è¿›è¡Œå®éªŒï¼Œè¯„ä¼°ç”¨æˆ·è½¬åŒ–ç‡ã€‚ æœºå™¨å­¦ä¹  / æ™ºèƒ½æ¨èï¼ˆå¯é€‰ï¼‰\nåŸºäºç”¨æˆ·å†å²ã€åœ°ç†ä½ç½®ã€è¯„ä»·ç­‰ï¼Œä¸ºç”¨æˆ·æ¨èåˆé€‚ä»ä¸šè€…ï¼› ä½†æ­¤åŠŸèƒ½ä¸åŸºç¡€ç³»ç»Ÿè§£è€¦ï¼Œä½œä¸ºåç»­ä¼˜åŒ–æ¨¡å—ï¼Œé€šè¿‡ç‹¬ç«‹æœåŠ¡è°ƒç”¨æœç´¢ç»“æœã€‚ 21. æ€»ç»“\r#\rå¾®æœåŠ¡æ¶æ„é…åˆKubernetesæä¾›å¼¹æ€§ã€é«˜å¯ç”¨å’Œæ˜“éƒ¨ç½²ï¼› Go æˆ– Kotlin/Java ä½œä¸ºæ ¸å¿ƒæœåŠ¡è¯­è¨€ï¼Œæ»¡è¶³é«˜å¹¶å‘å’Œç”Ÿæ€éœ€æ±‚ï¼› PostgreSQL/CockroachDB ä½œä¸ºå…³ç³»å‹ä¸»åº“ï¼ŒæŒ‰å›½å®¶æˆ–åˆ†åŒºéƒ¨ç½²ï¼Œä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼› Elasticsearch ä½œä¸ºæœç´¢å¼•æ“ï¼Œæ”¯æŒåœ°ç†å’Œå±æ€§è¿‡æ»¤ï¼Œè¿‘å®æ—¶ç´¢å¼•æ›´æ–°ï¼› Redis ä½œä¸ºç¼“å­˜ä¸åˆ†å¸ƒå¼é”ï¼Œæå‡è¯»å–æ€§èƒ½ä¸å¹¶å‘æ§åˆ¶ï¼› Kafka ä½œä¸ºäº‹ä»¶æ€»çº¿ï¼Œè§£è€¦å¼‚æ­¥ä»»åŠ¡ï¼ˆç´¢å¼•æ›´æ–°ã€é€šçŸ¥ã€åˆ†æï¼‰ï¼› CI/CD + IaC å®ç°è‡ªåŠ¨åŒ–ã€é«˜æ•ˆä¸Šçº¿ä¸å¯å¤åˆ¶å¤šå›½å®¶éƒ¨ç½²ï¼› ç›‘æ§/Tracing/æ—¥å¿—ç¡®ä¿å¯è§‚å¯Ÿæ€§ä¸æ•…éšœå®šä½ï¼› å®‰å…¨ä¸åˆè§„è´¯ç©¿è®¾è®¡ï¼Œä¿æŠ¤ç”¨æˆ·éšç§å¹¶æ»¡è¶³æ³•è§„è¦æ±‚ï¼› å¯æ‰©å±•æ€§è®¾è®¡ï¼šæŒ‰å›½å®¶åˆ†åº“ã€åˆ†åŒºï¼Œæ°´å¹³æ‰©å®¹æœåŠ¡å®ä¾‹ï¼Œè‡ªåŠ¨ä¼¸ç¼©ï¼› ä¸€è‡´æ€§ç­–ç•¥ï¼šé¢„çº¦é‡‡ç”¨å•åˆ†åŒºäº‹åŠ¡æˆ–åˆ†å¸ƒå¼é”+Sagaï¼Œæœç´¢ç»“æœé‡‡ç”¨è¿‘å®æ—¶å¼±ä¸€è‡´ã€‚ è¯¥æ–¹æ¡ˆé¿å…å•ä½“æ¶æ„ï¼Œå°†åŠŸèƒ½æ‹†åˆ†åˆ°ç‹¬ç«‹å¾®æœåŠ¡ï¼Œä¾¿äºå›¢é˜Ÿå¹¶è¡Œè¿­ä»£ä¸æ‰©å±•ï¼›åŒæ—¶é€šè¿‡å¼‚æ­¥äº‹ä»¶é©±åŠ¨ä¿æŒå„ç»„ä»¶è§£è€¦ã€è¿‘å®æ—¶åŒæ­¥ã€‚å¤šåŒºåŸŸã€å¤šå›½å®¶ä¸Šçº¿é€šè¿‡é…ç½®ä¸­å¿ƒå’Œ IaC è‡ªåŠ¨åŒ–æ”¯æ’‘ï¼Œé™ä½è¿ç»´å¤æ‚åº¦ã€‚æ•´ä½“æŠ€æœ¯æ ˆé€‰å‹ä¸»æµæˆç†Ÿã€ç¤¾åŒºæ´»è·ƒï¼Œä¸”å„ç»„ä»¶ä¹‹é—´å¥‘çº¦æ¸…æ™°ã€æ˜“äºç»´æŠ¤ã€‚é€šè¿‡ä¸¥æ ¼çš„ç›‘æ§ã€æµ‹è¯•å’Œè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œä¿è¯ç”Ÿäº§ç¯å¢ƒä¸­ç³»ç»Ÿçš„ç¨³å®šã€å¯ç”¨å’Œå¯è§‚æµ‹ã€‚\n"},{"id":24,"href":"/docs/study/network/http-comparison/","title":"HTTP åè®®å„ç‰ˆæœ¬æ¯”è¾ƒ","section":"ç½‘ç»œ","content":" ç‰¹æ€§/ç‰ˆæœ¬ HTTP/1.0 HTTP/1.1 HTTP/2 HTTP/3 å‘å¸ƒæ—¶é—´ 1996 1997 2015 2022 è¿æ¥ç®¡ç† æ¯ä¸ªè¯·æ±‚å»ºç«‹æ–°è¿æ¥ï¼ˆçŸ­è¿æ¥ï¼‰ é»˜è®¤é•¿è¿æ¥ï¼ˆConnection: keep-aliveï¼‰ åŸºäºå•ä¸ª TCP è¿æ¥å¤šè·¯å¤ç”¨ åŸºäº QUICï¼ˆUDPï¼‰å¤šè·¯å¤ç”¨ è¯·æ±‚/å“åº”æ ¼å¼ æ–‡æœ¬åè®®ï¼Œæ˜æ–‡ æ–‡æœ¬åè®®ï¼Œæ˜æ–‡ äºŒè¿›åˆ¶åè®®ï¼Œå¤´å‹ç¼©ï¼ˆHPACKï¼‰ äºŒè¿›åˆ¶åè®®ï¼Œæ”¹è¿›å¤´å‹ç¼©ï¼ˆQPACKï¼‰ å¤šè·¯å¤ç”¨ ä¸æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒï¼Œå¤šä¸ªè¯·æ±‚å¤ç”¨ä¸€ä¸ªè¿æ¥ æ”¯æŒï¼Œä¸”åœ¨ UDP ä¸Šå‡å°‘å»¶è¿Ÿ è¯·æ±‚ä¼˜å…ˆçº§ ä¸æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒè¯·æ±‚ä¼˜å…ˆçº§å’Œæµé‡æ§åˆ¶ æ”¯æŒè¯·æ±‚ä¼˜å…ˆçº§å’Œæ›´çµæ´»çš„æµæ§ å¤´éƒ¨å‹ç¼© æ—  æ—  ä½¿ç”¨ HPACK å‹ç¼©å¤´éƒ¨ ä½¿ç”¨ QPACK æ”¹è¿›å¤´éƒ¨å‹ç¼© æœåŠ¡å™¨æ¨é€ ä¸æ”¯æŒ ä¸æ”¯æŒ æ”¯æŒæœåŠ¡å™¨æ¨é€ æ”¯æŒæœåŠ¡å™¨æ¨é€ ä¼ è¾“å±‚åè®® TCP TCP TCP åŸºäº QUICï¼ˆUDPï¼‰ å®‰å…¨æ€§ æ˜æ–‡ï¼Œé€šå¸¸æ­é… HTTPS æ˜æ–‡ï¼Œé€šå¸¸æ­é… HTTPS ä¾èµ– TLS 1.2 æˆ–æ›´é«˜ ä¾èµ– QUIC çš„å†…ç½®åŠ å¯† æ€§èƒ½æå‡ç‚¹ æ—  é•¿è¿æ¥å‡å°‘æ¡æ‰‹æˆæœ¬ å¤šè·¯å¤ç”¨å‡å°‘é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰ QUICå‡å°‘è¿æ¥å»ºç«‹æ—¶å»¶å’Œä¸¢åŒ…é‡ä¼ å»¶è¿Ÿ åº”ç”¨åœºæ™¯ ç®€å•é™æ€ç½‘é¡µ å¤§å¤šæ•°ç°æœ‰ç½‘ç«™å’ŒAPI é«˜å¹¶å‘ã€å¤šèµ„æºåŠ è½½ç½‘ç«™ã€è§†é¢‘æµ å¯¹å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼Œå¦‚æ¸¸æˆã€è§†é¢‘ ç‰ˆæœ¬è¯¦ç»†è¯´æ˜\r#\rHTTP/1.0\r#\ræ¯ä¸ªè¯·æ±‚éƒ½è¦å»ºç«‹ä¸€ä¸ªæ–°çš„ TCP è¿æ¥ï¼Œæ•ˆç‡ä½ã€‚ æ— æŒä¹…è¿æ¥ï¼Œä¸æ”¯æŒæµæ°´çº¿è¯·æ±‚ã€‚ HTTP/1.1\r#\rå¼•å…¥æŒä¹…è¿æ¥ï¼Œé»˜è®¤å¼€å¯é•¿è¿æ¥ï¼Œå‡å°‘è¿æ¥å»ºç«‹æ¬¡æ•°ã€‚ æ”¯æŒç®¡é“åŒ–è¯·æ±‚ï¼ˆpipeliningï¼‰ï¼Œä½†å®é™…åº”ç”¨æœ‰é™ã€‚ æ”¯æŒåˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked Transfer-Encodingï¼‰ï¼Œé€‚åˆæµå¼ä¼ è¾“ã€‚ ç¼ºç‚¹ï¼šå¤šä¸ªè¯·æ±‚ä¾ç„¶ä¸²è¡Œï¼Œå­˜åœ¨é˜Ÿå¤´é˜»å¡ï¼ˆHead-of-Line Blockingï¼‰é—®é¢˜ã€‚ HTTP/2\r#\råŸºäºäºŒè¿›åˆ¶åˆ†å¸§ï¼ˆframeï¼‰ä¼ è¾“ï¼Œå¤šè·¯å¤ç”¨å¤šä¸ªè¯·æ±‚åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸Šå¹¶å‘æ‰§è¡Œã€‚ å¤´éƒ¨ä½¿ç”¨ HPACK å‹ç¼©ï¼Œå‡å°‘å†—ä½™ã€‚ æ”¯æŒæœåŠ¡å™¨æ¨é€ï¼ŒæœåŠ¡å™¨ä¸»åŠ¨å‘é€èµ„æºã€‚ è§£å†³äº† HTTP/1.x çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä½†ä»å— TCP é˜Ÿå¤´é˜»å¡å½±å“ã€‚ HTTP/3\r#\råŸºäº QUIC åè®®ï¼ˆåŸºäº UDPï¼‰ï¼Œå‡å°‘è¿æ¥å»ºç«‹å»¶è¿Ÿå’Œé‡ä¼ å»¶è¿Ÿã€‚ QUIC å†…ç½®åŠ å¯†å’Œå¤šè·¯å¤ç”¨ï¼Œé¿å… TCP é˜Ÿå¤´é˜»å¡ã€‚ æ›´é€‚åˆç§»åŠ¨ç«¯å’Œé«˜ä¸¢åŒ…ç¯å¢ƒï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ "},{"id":25,"href":"/docs/introspection/juc/","title":"Java.util.concurrent åŒ…","section":"è‡ªçœ","content":"Java ä¸­çš„ JUCï¼ˆjava.util.concurrentï¼‰ æ˜¯å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒåŒ…ï¼Œæä¾›äº†å¤§é‡å¼ºå¤§ã€é«˜æ€§èƒ½çš„å·¥å…·ç±»æ¥ç®€åŒ–çº¿ç¨‹æ“ä½œå’Œå¹¶å‘æ§åˆ¶ã€‚\nä¸‹é¢æ˜¯å¯¹ JUC ä¸­æœ€å¸¸ç”¨ç±»å’Œæ¥å£çš„è¯¦ç»†åˆ†ç±»ä¸è§£æï¼Œå¸®åŠ©ä½ æ„å»ºå¯¹ Java å¹¶å‘ç¼–ç¨‹çš„å®Œæ•´è®¤è¯†ã€‚\nğŸŒ³ ä¸€ã€JUC æ ¸å¿ƒæ¨¡å—æ€»è§ˆ\r#\rjava.util.concurrent.* â”œâ”€â”€ Executor æ¡†æ¶ï¼ˆçº¿ç¨‹æ± ï¼‰ â”œâ”€â”€ åŒæ­¥å™¨ï¼ˆLocksã€CountDownLatchã€Semaphoreã€CyclicBarrierï¼‰ â”œâ”€â”€ å¹¶å‘é›†åˆï¼ˆConcurrentHashMapã€CopyOnWriteArrayList ç­‰ï¼‰ â”œâ”€â”€ åŸå­å˜é‡ï¼ˆAtomicXXXï¼‰ â”œâ”€â”€ Fork/Join æ¡†æ¶ â”œâ”€â”€ CompletableFutureã€Future â”œâ”€â”€ ScheduledExecutorã€BlockingQueue ç­‰ ğŸš€ äºŒã€Executor æ¡†æ¶ï¼ˆçº¿ç¨‹æ± ç›¸å…³ï¼‰\r#\rç±»/æ¥å£ è¯´æ˜ Executor æœ€åŸºç¡€çš„æ¥å£ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³• execute(Runnable) ExecutorService æä¾› submit()ã€shutdown() ç­‰é«˜çº§æ§åˆ¶ ThreadPoolExecutor å¯è‡ªå®šä¹‰çº¿ç¨‹æ± å‚æ•°çš„æ ¸å¿ƒå®ç°ç±» ScheduledExecutorService æ”¯æŒå®šæ—¶æˆ–å‘¨æœŸä»»åŠ¡æ‰§è¡Œ Executors å·¥å‚ç±»ï¼Œæä¾›å¸¸ç”¨çº¿ç¨‹æ± çš„åˆ›å»ºæ–¹æ³•ï¼ˆå¦‚ newFixedThreadPool()ï¼‰ â˜‘ï¸ æ¨èä½¿ç”¨æ–¹å¼\r#\ré¿å… Executors.newXxx() é™æ€æ–¹æ³•ï¼Œå»ºè®®è‡ªå·±æ„é€  ThreadPoolExecutorï¼š\nExecutorService pool = new ThreadPoolExecutor( 4, 8, 60, TimeUnit.SECONDS, new LinkedBlockingQueue\u0026lt;\u0026gt;(100) ); ğŸ§± ä¸‰ã€åŒæ­¥å™¨ï¼ˆLockã€ä¿¡å·é‡ã€æ …æ ç­‰ï¼‰\r#\r1. Lock/Condition\r#\rç±»/æ¥å£ è¯´æ˜ Lock æ¯” synchronized æ›´çµæ´»ï¼Œæ”¯æŒä¸­æ–­ã€éé˜»å¡è·å– ReentrantLock å¯é‡å…¥é”ï¼Œæ”¯æŒå…¬å¹³/éå…¬å¹³é” ReadWriteLock è¯»å†™åˆ†ç¦»ï¼Œæé«˜å¹¶å‘æ€§ Condition ç±»ä¼¼ Object.wait/notifyï¼Œé…åˆ Lock ä½¿ç”¨ ç¤ºä¾‹ï¼š\nLock lock = new ReentrantLock(); lock.lock(); try { // ä¸´ç•ŒåŒº } finally { lock.unlock(); } 2. çº¿ç¨‹åä½œå·¥å…·ç±»\r#\rç±» è¯´æ˜ CountDownLatch ä¸€ä¸ªæˆ–å¤šä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å®Œæˆ CyclicBarrier å¤šä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…ï¼Œåˆ°è¾¾å±éšœç‚¹åç»§ç»­ Semaphore æ§åˆ¶å¹¶å‘è®¿é—®çš„è®¸å¯è¯ï¼ˆé™æµï¼‰ Exchanger ä¸¤ä¸ªçº¿ç¨‹æ•°æ®äº¤æ¢ ç¤ºä¾‹ï¼šCountDownLatch\nCountDownLatch latch = new CountDownLatch(3); for (int i = 0; i \u0026lt; 3; i++) { new Thread(() -\u0026gt; { // do work latch.countDown(); }).start(); } latch.await(); // ä¸»çº¿ç¨‹ç­‰å¾…å­çº¿ç¨‹å®Œæˆ ğŸ’¥ å››ã€åŸå­ç±»ï¼ˆAtomicXXXï¼‰\r#\rç±» è¯´æ˜ AtomicInteger/AtomicLong åŸå­æ•´å‹æ“ä½œï¼ˆå¦‚é€’å¢ï¼‰ AtomicReference åŸå­æ›´æ–°å¯¹è±¡å¼•ç”¨ AtomicStampedReference é˜²æ­¢ ABA é—®é¢˜çš„å¼•ç”¨ç±» LongAdder / LongAccumulator é«˜å¹¶å‘ä¸‹æ¯” AtomicLong æ›´é«˜æ•ˆ ç¤ºä¾‹ï¼š\nAtomicInteger count = new AtomicInteger(); count.incrementAndGet(); // åŸå­ +1 ğŸ”„ äº”ã€å¹¶å‘é›†åˆç±»\r#\rç±» è¯´æ˜ ConcurrentHashMap æ”¯æŒé«˜å¹¶å‘è¯»å†™çš„ Mapï¼ˆJDK8 ä»¥åæ€§èƒ½å¤§å¹…æå‡ï¼‰ CopyOnWriteArrayList å†™æ—¶å¤åˆ¶ï¼Œè¯»å¤šå†™å°‘åœºæ™¯ ConcurrentLinkedQueue æ— é”é˜Ÿåˆ— BlockingQueueï¼ˆæ¥å£ï¼‰ æ”¯æŒé˜»å¡çš„é˜Ÿåˆ—ï¼Œå¦‚ ArrayBlockingQueueã€LinkedBlockingQueue ç¤ºä¾‹ï¼š\nConcurrentHashMap\u0026lt;String, Integer\u0026gt; map = new ConcurrentHashMap\u0026lt;\u0026gt;(); map.put(\u0026#34;key\u0026#34;, 1); âš™ï¸ å…­ã€é˜»å¡é˜Ÿåˆ—ï¼ˆç”¨äºç”Ÿäº§è€…-æ¶ˆè´¹è€…ï¼‰\r#\rç±» ç‰¹æ€§ ArrayBlockingQueue æœ‰ç•Œï¼Œæ•°ç»„ç»“æ„ï¼Œé€‚åˆå›ºå®šå®¹é‡ LinkedBlockingQueue æ— ç•Œæˆ–æœ‰ç•Œï¼Œé“¾è¡¨ç»“æ„ DelayQueue å¸¦å»¶è¿Ÿå…ƒç´ çš„é˜Ÿåˆ— SynchronousQueue ä¸å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ï¼ˆç”¨äºçº¿ç¨‹äº¤æ¥ï¼‰ å¸¸ç”¨äºçº¿ç¨‹æ± æˆ–ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ä¸­ã€‚\nğŸ§  ä¸ƒã€Futureã€CompletableFutureã€ForkJoin\r#\rFuture \u0026amp; Callable\r#\ræäº¤ä»»åŠ¡åè¿”å› Futureï¼Œå¯é€šè¿‡ get() é˜»å¡è·å–ç»“æœã€‚ Future\u0026lt;Integer\u0026gt; f = pool.submit(() -\u0026gt; 1 + 1); System.out.println(f.get()); CompletableFuture\r#\ræ”¯æŒé“¾å¼å¼‚æ­¥ä»»åŠ¡ã€å¼‚å¸¸å¤„ç†ã€ç»„åˆè®¡ç®—ï¼ˆJDK 8+ï¼‰ CompletableFuture.supplyAsync(() -\u0026gt; \u0026#34;Hello\u0026#34;) .thenApply(s -\u0026gt; s + \u0026#34; World\u0026#34;) .thenAccept(System.out::println); ForkJoinPool\r#\råˆ†è€Œæ²»ä¹‹çš„å¹¶è¡Œè®¡ç®—æ¡†æ¶ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®é€’å½’å¤„ç† ğŸ“Œ æ€»ç»“ç»“æ„å›¾ï¼ˆç»å…¸åˆ†ç±»ï¼‰\r#\rjava.util.concurrent\râ”œâ”€â”€ Executors / ThreadPoolExecutor â† çº¿ç¨‹æ± \râ”œâ”€â”€ Locks (Lock, ReadWriteLock) â† æ‰‹åŠ¨åŠ é”\râ”œâ”€â”€ Synchronizers (CountDownLatch, ...) â† åä½œ\râ”œâ”€â”€ Atomic variables (AtomicXXX) â† åŸå­ç±»\râ”œâ”€â”€ Concurrent collections â† é«˜å¹¶å‘å®¹å™¨\râ”œâ”€â”€ BlockingQueue / DelayQueue â† é˜»å¡é˜Ÿåˆ—\râ”œâ”€â”€ Future / CompletableFuture â† å¼‚æ­¥ç»“æœ\râ”œâ”€â”€ ForkJoinPool â† å¹¶è¡Œè®¡ç®—æ¡†æ¶ ğŸ“˜ æ¨èå­¦ä¹ é¡ºåº\r#\rExecutorService / ThreadPoolExecutor â† æ‰“åŸºç¡€ ReentrantLock / CountDownLatch / Semaphore â† å¹¶å‘æ§åˆ¶å·¥å…· ConcurrentHashMap / CopyOnWriteArrayList â† é›†åˆå¹¶å‘åŒ– AtomicInteger / LongAdder â† åŸå­ç±» CompletableFuture â† ç°ä»£å¼‚æ­¥æ–¹å¼ ForkJoinPool â† è¿›é˜¶ä»»åŠ¡åˆ†æ²»æ¨¡å‹ "},{"id":26,"href":"/docs/study/middleware/kafka/exactly-once/","title":"Kafka Exactly-Once","section":"Kafka","content":"\ræµç¨‹\r#\rå¹‚ç­‰ç”Ÿäº§è€…ï¼ˆç”Ÿäº§è€… Producer ID + åˆ†åŒºç»´æŠ¤ Sequence Numberï¼‰ äº‹åŠ¡åè°ƒè€…å¸¦ _transaction_stateï¼ˆç”¨æˆ· Transaction ID + ç”Ÿäº§è€… epoch + åˆ†åŒº Control Messages + æ¶ˆè´¹è€… LSOï¼‰ å®Œæ•´æµç¨‹ï¼š äº‹åŠ¡åˆå§‹åŒ– ç”Ÿäº§è€…å¯»æ‰¾äº‹åŠ¡åè°ƒè€…ï¼ˆTransactional Coordinatorï¼‰ã€‚ ç”Ÿäº§è€…å‘äº‹åŠ¡åè°ƒè€…è·å– PIDã€‚ äº‹åŠ¡å¼€å§‹ Consume-Process-Produceï¼š æ¶ˆè´¹è€…ï¼ˆæµå¤„ç†åº”ç”¨åŒæ—¶ä½œä¸ºæ¶ˆè´¹è€…å’Œç”Ÿäº§è€…ï¼‰ä»æº Topic æ¶ˆè´¹æ¶ˆæ¯å¹¶åšå¤„ç†ã€‚ ç”Ÿäº§è€…åŒæ­¥æ¶ˆæ¯æ‰€è¦å‘å¾€çš„ Topic-Partition ä¿¡æ¯ç»™äº‹åŠ¡åè°ƒè€…ã€‚ ç”Ÿäº§è€…å‘ç›®æ ‡ Topic-Partition å‘é€æ¶ˆæ¯ã€‚ ç”Ÿäº§è€…åŒæ­¥æäº¤ä½ç‚¹æ‰€è¦å‘å¾€çš„ Topic-Partition ï¼ˆå†…éƒ¨ Topic __consumer_offsetsï¼‰ä¿¡æ¯ç»™äº‹åŠ¡åè°ƒè€…ã€‚ ç”Ÿäº§è€…é€šçŸ¥ æ¶ˆè´¹ç»„åè°ƒè€…ï¼ˆGroup Coordinatorï¼ŒæœåŠ¡ç«¯è´Ÿè´£æ„ŸçŸ¥æ¶ˆè´¹ç»„å˜åŒ–çš„ Brokerï¼‰æäº¤ä½ç‚¹ï¼ˆä»…æŒä¹…åŒ–ä½ç‚¹ï¼Œä½†å¹¶ æœªæ›´æ–°ç¼“å­˜ï¼Œå› æ­¤ç›´åˆ°äº‹åŠ¡æäº¤å‰å¯¹æ¶ˆè´¹è€…ä¸å¯è§ï¼‰ æäº¤/å›æ»šäº‹åŠ¡ ç”Ÿäº§è€…å‘ŠçŸ¥äº‹åŠ¡åè°ƒè€…äº‹åŠ¡ æ‰§è¡Œç»“æœï¼ˆæäº¤/å›æ»šï¼‰ã€‚ äº‹åŠ¡åè°ƒè€…å‘äº‹åŠ¡æ‰€æ¶‰åŠçš„åˆ†åŒº Leader å‘é€ æ§åˆ¶æ¶ˆæ¯æ ‡è®°äº‹åŠ¡æ‰§è¡Œç»“æœï¼ŒåŒæ—¶äº‹åŠ¡åè°ƒè€…ç»™ç”Ÿäº§è€…å“åº”äº‹åŠ¡å·²æäº¤/å›æ»šæˆåŠŸã€‚ å¾…æ‰€æœ‰åˆ†åŒº Leader å°†æ§åˆ¶æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆä»»ä½•ä¸€ä¸ªå¤±è´¥éƒ½ä¼šè¿›è¡Œæ— é™é‡è¯•ï¼‰åï¼Œäº‹åŠ¡åè°ƒè€…å°†è¯¥äº‹åŠ¡çŠ¶æ€ä¿®æ”¹ä¸ºå·²æäº¤/å›æ»šï¼Œäº‹åŠ¡ç»“æŸã€‚ ä¸‹é¢åŸºäºä¸Šè¿° Exactly-Once è¯­ä¹‰å®ç°çš„å†…å®¹ï¼Œå¯¹â€œé‡è¦åœºæ™¯â€ä¸â€œå…³é”®è®¾è®¡â€åˆ†åˆ«è¿›è¡Œå½’çº³ä¸è§£é‡Šã€‚\nå½’çº³ä¸è§£é‡Š\r#\r1. é‡è¦åœºæ™¯åŠ Kafka åœ¨å…¶ä¸­çš„è§’è‰²\r#\rAt-Most-Once / At-Least-Once vs Exactly-Once æµå¤„ç†åœºæ™¯å¯¹æ¯”\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†é€šå¸¸æ¶‰åŠâ€œæ¶ˆè´¹-å¤„ç†-ç”Ÿäº§â€ï¼ˆConsume-Process-Produceï¼‰æµç¨‹ï¼›è‹¥ä»…ç”¨ At-Least-Once è¯­ä¹‰ï¼Œä¼šå› ç½‘ç»œæŠ–åŠ¨æˆ–è¿›ç¨‹å´©æºƒå¯¼è‡´æ¶ˆæ¯é‡å¤å¤„ç†ï¼›è‹¥ At-Most-Onceï¼Œåˆ™å¯èƒ½ä¸¢å¤±æ¶ˆæ¯ã€‚ Kafka è§’è‰²ï¼šæä¾›ç«¯åˆ°ç«¯ Exactly-Once èƒ½åŠ›ï¼ˆåœ¨æ¶ˆè´¹æ¥æºäº Kafkaï¼Œä¸”è¾“å‡ºå†™å› Kafka çš„åœºæ™¯ï¼‰ã€‚é€šè¿‡å¹‚ç­‰ç”Ÿäº§è€…ä¸äº‹åŠ¡æœºåˆ¶ï¼Œé¿å…é‡å¤æ¶ˆæ¯ä¸ä¸¢å¤±ï¼Œç¡®ä¿æ¯æ¡è¾“å…¥æ¶ˆæ¯â€œæ°å¥½ä¸€æ¬¡â€è¢«å¤„ç†å¹¶äº§å‡ºæ¶ˆæ¯ï¼ŒåŒæ—¶æäº¤ä½ç‚¹ä¹Ÿè¢«åŸå­åŒ–åœ°ä¸è¾“å‡ºæŒ‚é’©ã€‚ ç½‘ç»œ ACK ä¸¢å¤±å¯¼è‡´é‡è¯•çš„é‡å¤å†™å…¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šç”Ÿäº§è€…å‘é€æ¶ˆæ¯ï¼ŒBroker å®é™…å·²å†™å…¥ä½† ACK ä¸¢å¤±ï¼Œå®¢æˆ·ç«¯è¯¯ä»¥ä¸ºå¤±è´¥é‡è¯•ï¼Œå¯¼è‡´é‡å¤å†™å…¥ã€‚ Kafka è§’è‰²ï¼šåœ¨å¹‚ç­‰ç”Ÿäº§è€…ä¸­ï¼Œé€šè¿‡ Producer ID + åˆ†åŒºå†…åºåˆ—å·ã€æœåŠ¡ç«¯ç»´æŠ¤æœ€è¿‘ N æ¡æ‰¹æ¬¡ä¿¡æ¯ï¼Œåˆ¤é‡ä¸ä¹±åºæ£€æµ‹ï¼›å†ç»“åˆäº‹åŠ¡å¯ä¿è¯è·¨ä¼šè¯çš„å¹‚ç­‰ï¼Œé¿å…å›  ACK ä¸¢å¤±äº§ç”Ÿé‡å¤ã€‚ æ¶ˆè´¹ç«¯å·²å‘é€è¾“å‡ºä½†å°šæœªæäº¤ä½ç‚¹å‰å´©æºƒå¯¼è‡´é‡è¯»å¹¶é‡å¤å†™å…¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šåœ¨æµå¤„ç†åº”ç”¨ä¸­ï¼Œæ¶ˆæ¯å¤„ç†å®Œå¹¶å‘ç›®æ ‡ Topic å‘é€æˆåŠŸåï¼Œè‹¥åœ¨æäº¤ consumer offset ä¹‹å‰å´©æºƒï¼Œé‡å¯åä¼šå†æ¬¡æ¶ˆè´¹å¹¶é‡å¤å‘é€ã€‚ Kafka è§’è‰²ï¼šé€šè¿‡äº‹åŠ¡ï¼šæŠŠâ€œå‘é€æ¶ˆæ¯åˆ°ç›®æ ‡ Topicâ€ä¸â€œæäº¤æº Topic çš„ä½ç‚¹ï¼ˆ__consumer_offsetsï¼‰â€éƒ½çº³å…¥åŒä¸€äº‹åŠ¡ã€‚è‹¥äº‹åŠ¡æœ€ç»ˆæäº¤ï¼Œåˆ™ä¸¤è€…ä¸€èµ·ç”Ÿæ•ˆï¼›è‹¥ä¸­é€”å¤±è´¥æˆ–å´©æºƒæœªæäº¤ï¼Œåˆ™äº‹åŠ¡å›æ»šï¼Œè¾“å‡ºæ¶ˆæ¯ä¸å¯è§ä¸”ä½ç‚¹ä¹Ÿä¸ä¼šç”Ÿæ•ˆï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ã€‚ å¤šåˆ†åŒºæˆ–å¤šæ¬¡è¯»å†™æ“ä½œçš„åŸå­æ€§éœ€æ±‚åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†å¯èƒ½å¯¹å¤šä¸ªåˆ†åŒºå†™å…¥ï¼Œæˆ–åŒæ—¶éœ€è¦å‘å¤šä¸ª Topic-Partition å‘é€ç»“æœï¼Œå¹¶æäº¤å¤šä¸ªæ“ä½œï¼ˆå¦‚å†™ç»“æœã€æ›´æ–°çŠ¶æ€ topicã€æäº¤ä½ç‚¹ç­‰ï¼‰ã€‚éœ€è¦ä¿è¯è¿™äº›æ“ä½œè¦ä¹ˆéƒ½ç”Ÿæ•ˆï¼Œè¦ä¹ˆéƒ½ä¸ç”Ÿæ•ˆã€‚ Kafka è§’è‰²ï¼šå¼•å…¥äº‹åŠ¡åè°ƒè€…ï¼ˆTransaction Coordinatorï¼‰ï¼Œåœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­è·Ÿè¸ªæ¶‰åŠçš„æ‰€æœ‰åˆ†åŒºä¿¡æ¯ï¼›æœ€ç»ˆé€šè¿‡æ§åˆ¶æ¶ˆæ¯ï¼ˆWriteTxnMarkerï¼‰é€šçŸ¥å„åˆ†åŒº Leader æäº¤æˆ–å›æ»šï¼Œç¡®ä¿åŸå­æ€§ã€‚ è·¨ä¼šè¯æ¢å¤åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæµå¤„ç†åº”ç”¨æˆ–ç”Ÿäº§è€…è¿›ç¨‹é‡å¯åï¼Œè‹¥ä½¿ç”¨ç›¸åŒçš„äº‹åŠ¡ IDï¼Œåº”èƒ½è¯†åˆ«å‰ä¸€ä¼šè¯æœªå®Œæˆçš„äº‹åŠ¡å¹¶è¿›è¡Œæ°å½“å›æ»šæˆ–ç»§ç»­ã€‚ Kafka è§’è‰²ï¼šTransactional IDï¼ˆç”¨æˆ·æä¾›ï¼‰+ æœåŠ¡ç«¯åˆ†é…çš„ PID + epoch æœºåˆ¶ã€‚é‡å¯åå®¢æˆ·ç«¯ç”¨ç›¸åŒ Transactional ID æ‰¾åˆ°åè°ƒè€…ï¼Œåè°ƒè€…æ£€æµ‹åˆ°æ—§äº‹åŠ¡æœªå®Œæˆï¼Œä¼šå›æ»šæ—§äº‹åŠ¡ï¼Œç»™æ–°çš„ä¼šè¯åˆ†é…æ–°çš„ epochï¼Œä»è€Œä¿è¯å¹‚ç­‰ä¸æ­£ç¡®æ¢å¤ã€‚ Broker/åè°ƒè€…æ•…éšœæˆ–ç½‘ç»œåˆ†åŒºåœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šäº‹åŠ¡åè°ƒè€…æˆ–åˆ†åŒº Leader å´©æºƒã€åˆ‡æ¢ï¼›ç½‘ç»œæš‚æ—¶ä¸å¯è¾¾ç­‰ã€‚éœ€è¦ç¡®ä¿äº‹åŠ¡èƒ½åœ¨æ•…éšœåç»§ç»­æˆ–å›æ»šï¼Œä¸ä¼šå‡ºç°æ··ä¹±æˆ–æ•°æ®ä¸¢å¤±ã€‚\nKafka è§’è‰²ï¼š\näº‹åŠ¡åè°ƒè€… HAï¼šåè°ƒè€…å…ƒæ•°æ®æŒä¹…åŒ–äºå†…éƒ¨ __transaction_state compacted Topicï¼Œå¤šå‰¯æœ¬å¤åˆ¶ä¿éšœï¼›æ•…éšœåˆ‡æ¢åï¼Œæ–°åè°ƒè€…é€šè¿‡è¯»å–æ—¥å¿—æ¢å¤çŠ¶æ€å¹¶ç»§ç»­å‘é€æ§åˆ¶æ¶ˆæ¯æˆ–å›æ»šã€‚ åˆ†åŒº Leader HAï¼šPID Snapshotã€æ—¥å¿—æ¢å¤æœºåˆ¶ï¼Œè®©æœåŠ¡ç«¯æ¢å¤ Producer State æ˜ å°„ï¼Œç»§ç»­åˆ¤é‡ä¸ä¹±åºæ£€æµ‹ï¼›WriteTxnMarker é‡è¯•æœºåˆ¶ç¡®ä¿æ§åˆ¶æ¶ˆæ¯æœ€ç»ˆå†™å…¥ã€‚ é•¿äº‹åŠ¡ä¸ Last Stable Offset (LSO) ç­–ç•¥åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šæŸäº›äº‹åŠ¡å¯èƒ½è¾ƒå¤§ï¼Œæœªæäº¤æœŸé—´å¯èƒ½é˜»å¡åç»­å·²æäº¤æ¶ˆæ¯çš„å¯è¯»æ€§ï¼›æ¶ˆè´¹ç«¯ä¸åº”çœ‹åˆ°å°šæœªæäº¤çš„äº‹åŠ¡æ¶ˆæ¯ã€‚ Kafka è§’è‰²ï¼šå®¢æˆ·ç«¯é‡‡ç”¨ read_committed æ¨¡å¼ï¼ŒBroker åŸºäº LSO ç­–ç•¥åªè¿”å› â‰¤ LSO çš„æ¶ˆæ¯ï¼›LSO å®šä¹‰ä¸ºç¬¬ä¸€ä¸ªæœªå®Œæˆäº‹åŠ¡çš„èµ·å§‹ä½ç½®ï¼Œè¿‡æ»¤æ‰å°šæœªæäº¤çš„æ¶ˆæ¯ã€‚å·²æäº¤çš„ä½†ä½äº LSO ä¹‹åçš„çŸ­äº‹åŠ¡æ¶ˆæ¯ï¼Œå› è¢«é•¿äº‹åŠ¡é˜»å¡ï¼Œä¹Ÿæš‚æ—¶æ— æ³•è¿”å›ï¼›è¿™æ ·åšå…¼é¡¾æ­£ç¡®æ€§ä¸æ€§èƒ½/å†…å­˜å‹åŠ›ã€‚æ­¤å¤–ï¼ŒBroker ç»´æŠ¤ .txnindex è®°å½•å·²å›æ»šäº‹åŠ¡çš„åŒºé—´ï¼Œä»¥ä¾¿æ¶ˆè´¹ç«¯åœ¨æ‹‰å–æ—¶æå‰è¿‡æ»¤å›æ»šæ•°æ®ï¼Œå‡è½»å®¢æˆ·ç«¯ç¼“å­˜å‹åŠ›ã€‚ äº‹åŠ¡è¶…æ—¶ä¸æ¸…ç†åœºæ™¯\nåœºæ™¯è¯´æ˜ï¼šè‹¥ç”Ÿäº§è€…å¼€å¯äº‹åŠ¡åé•¿æœŸæ— è¿›å±•ï¼ˆè¶…æ—¶ï¼‰ï¼Œæˆ–äº‹åŠ¡ ID é•¿æœŸæœªä½¿ç”¨ï¼Œéœ€å›æ»šå¹¶å›æ”¶èµ„æºã€‚\nKafka è§’è‰²ï¼š\näº‹åŠ¡æ“ä½œè¶…æ—¶ï¼šå®¢æˆ·ç«¯è®¾å®š transaction.timeout.msï¼Œè‹¥è¶…æ—¶æœªæäº¤ï¼Œåè°ƒè€…ä¸»åŠ¨å›æ»šäº‹åŠ¡ï¼›æœåŠ¡ç«¯æœ‰ max.transaction.timeout.ms ä¸Šé™ã€‚ äº‹åŠ¡ ID è¿‡æœŸï¼šåè°ƒè€…å®šæœŸæ£€æŸ¥ transaction.id.expiration.msï¼Œè‹¥æŸäº‹åŠ¡ ID é•¿æœŸæ— è¯·æ±‚ï¼Œåˆ™æ¸…ç†å¯¹åº”å…ƒæ•°æ®ï¼Œé‡Šæ”¾ PID ç­‰èµ„æºã€‚ 2. å…³é”®è®¾è®¡åŠå…¶ç†å¿µã€è§£å†³é—®é¢˜å’Œä½œç”¨\r#\rä¸‹é¢æŒ‰é€»è¾‘æ¨¡å—æˆ–è§’è‰²é€ä¸€åˆ—ä¸¾ï¼Œå¹¶è¯´æ˜è®¾è®¡åˆè¡·ã€è§£å†³çš„é—®é¢˜åŠåœ¨ Exactly-Once æµåœºæ™¯ä¸­çš„ä½œç”¨ã€‚\nProducer ID (PID) ä¸åˆ†åŒºå†…åºåˆ—å· + å¹‚ç­‰ç”Ÿäº§è€…\nè®¾è®¡ç†å¿µï¼šé€šè¿‡ç»™æ¯ä¸ªç”Ÿäº§è€…ä¼šè¯åˆ†é…å”¯ä¸€ PIDï¼Œå¹¶åœ¨æ¯ä¸ª Topic-Partition ç»´åº¦ç»´æŠ¤åºåˆ—å·ï¼ŒæœåŠ¡ç«¯åªéœ€ä¿å­˜æœ‰é™æœ€è¿‘æ‰¹æ¬¡ä¿¡æ¯å³å¯åˆ¤é‡ä¸ä¹±åºï¼Œè€Œéä¿å­˜æ‰€æœ‰æ¶ˆæ¯ IDã€‚ è§£å†³é—®é¢˜ï¼šè§£å†³å•ä¼šè¯ä¸­ç”±äºç½‘ç»œ ACK ä¸¢å¤±æˆ–é‡è¯•å¯¼è‡´çš„é‡å¤å†™å…¥ä¸ä¹±åºå†™å…¥é—®é¢˜ï¼Œå®ç°å¹‚ç­‰æ€§ï¼ˆExactly-Once at least on single-session, single-partitionï¼‰ã€‚ ä½œç”¨ï¼šä¸ºåç»­è·¨ä¼šè¯å¹‚ç­‰ä¸äº‹åŠ¡æä¾›åŸºç¡€ï¼›åœ¨æ¯ä¸ª ProduceRequest ä¸­æºå¸¦ PID + epoch +åºåˆ—å·ï¼ŒBroker æ£€æµ‹é‡å¤æˆ–ä¹±åºå¹¶æ‹’ç»æˆ–å¿½ç•¥ï¼Œä»è€Œä¿è¯å•ä¼šè¯å•åˆ†åŒºå†™å…¥çš„å¹‚ç­‰æ€§ã€‚ Transactional ID + Epoch (Fencing) æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šç”¨æˆ·ä¸ºæµå¤„ç†åº”ç”¨æä¾›ä¸€ä¸ªç¨³å®šçš„ Transactional IDï¼›æœåŠ¡ç«¯ä¸ºè¯¥ ID åˆ†é… PIDï¼Œå¹¶åœ¨æ¯æ¬¡åˆå§‹åŒ–æˆ–é‡å¯æ—¶é€šè¿‡ epoch éš”ç¦»è¿‡æœŸä¼šè¯ï¼Œé¿å…â€œåƒµå°¸ç”Ÿäº§è€…â€æ··å…¥ã€‚ è§£å†³é—®é¢˜ï¼šè·¨ä¼šè¯æ¢å¤æ—¶ï¼Œè‹¥æ—§ä¼šè¯å´©æºƒï¼Œæ–°ä¼šè¯ä»èƒ½ä»¥åŒä¸€ Transactional ID ç»§ç»­æˆ–å›æ»šä¸Šæ¬¡æœªå®Œæˆäº‹åŠ¡ï¼›é˜²æ­¢å¤šä¸ªç”Ÿäº§è€…åŒæ—¶ç”¨åŒä¸€ Transactional ID å¯¼è‡´ç«æ€ï¼ˆfencingï¼‰ã€‚ ä½œç”¨ï¼šå®ç°è·¨ä¼šè¯å¹‚ç­‰å†™å…¥ï¼šæ—§äº‹åŠ¡è‹¥æœªå®Œæˆä¼šè¢«ä¸»åŠ¨å›æ»šï¼›æ–°ä¼šè¯è·å¾—æ›´é«˜ epochï¼Œæ—§ä¼šè¯è¯·æ±‚å›  epoch è¾ƒä½å°†è¢«æ‹’ç»ï¼Œä»è€Œä¿è¯åªæœ‰å½“å‰æ´»è·ƒä¼šè¯èƒ½æäº¤ã€‚ äº‹åŠ¡åè°ƒè€… (Transaction Coordinator)\nè®¾è®¡ç†å¿µï¼šé›†ä¸­ç®¡ç†äº‹åŠ¡å…ƒæ•°æ®ï¼ˆTransactional IDã€PIDã€epochã€æ¶‰åŠåˆ†åŒºåˆ—è¡¨ã€æ¶ˆè´¹ä½ç‚¹ä¿¡æ¯ç­‰ï¼‰ï¼Œå¹¶åœ¨äº‹åŠ¡å®Œæˆåç»Ÿä¸€è´Ÿè´£å¹¿æ’­æäº¤/å›æ»šæ§åˆ¶æ¶ˆæ¯ã€‚\nè§£å†³é—®é¢˜ï¼šåœ¨å¤šåˆ†åŒºå†™å…¥ã€å¤šä¸ªæ“ä½œåŸå­æ€§éœ€æ±‚ä¸‹ï¼Œé¿å…å®¢æˆ·ç«¯å¯¹æ¯ä¸ªåˆ†åŒº Leader é€ä¸€å‘é€â€œæäº¤/å›æ»šâ€å‘½ä»¤ï¼›ä¹Ÿä¾¿äºåœ¨åè°ƒè€…æ•…éšœåˆ‡æ¢æ—¶é€šè¿‡é›†ä¸­æ—¥å¿—æ¢å¤ã€‚\nä½œç”¨ï¼š\nåˆ†é…ä¸ç®¡ç† PIDï¼ˆä¸ ProducerIdManager äº¤äº’ï¼Œä» ZooKeeper æˆ–å†…éƒ¨æœºåˆ¶è·å– ID æ®µï¼Œå¹¶ç»´æŠ¤æœ€æ–°çŠ¶æ€ï¼‰ã€‚ è·Ÿè¸ªäº‹åŠ¡æ¶‰åŠçš„æ‰€æœ‰ Topic-Partitionï¼šåœ¨å‘é€äº‹åŠ¡æ¶ˆæ¯å‰ï¼Œå®¢æˆ·ç«¯é€šè¿‡ AddPartitionsToTxnRequest é€šçŸ¥åè°ƒè€…ï¼Œåè°ƒè€…æŒä¹…åŒ–åˆ° __transaction_stateã€‚ è·Ÿè¸ªæ¶ˆè´¹ä½ç‚¹æäº¤ä¿¡æ¯ï¼šé€šè¿‡ AddOffsetsToTxnRequest åŒæ­¥è¦æäº¤çš„ __consumer_offsets åˆ†åŒºä¿¡æ¯åˆ°äº‹åŠ¡å…ƒæ•°æ®ï¼Œå¹¶æœ€ç»ˆå‘ Group Coordinator æäº¤ã€‚ æäº¤/å›æ»šå†³ç­–ï¼šæ¥æ”¶ EndTxnRequest åï¼Œæ›´æ–° transaction_state åˆ° PREPARE* çŠ¶æ€ï¼Œå†å¼‚æ­¥å‘å„åˆ†åŒº Leader å‘é€ WriteTxnMarker æ§åˆ¶æ¶ˆæ¯ï¼›å¾…æ‰€æœ‰æ§åˆ¶æ¶ˆæ¯æˆåŠŸæŒä¹…åŒ–ï¼Œå†æ›´æ–°çŠ¶æ€åˆ° COMPLETE* å¹¶é‡Šæ”¾èµ„æºã€‚ HA ä¸æŒä¹…åŒ–ï¼šåˆ©ç”¨å†…éƒ¨ __transaction_state compacted Topicï¼Œå¤šå‰¯æœ¬ä¿è¯æ—¥å¿—ä¸ä¸¢å¤±ï¼›æ•…éšœåˆ‡æ¢åå¯ä»æ—¥å¿—æ¢å¤æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡çŠ¶æ€ã€‚ å®šæœŸå›æ»šè¶…æ—¶äº‹åŠ¡ã€æ¸…ç†è¿‡æœŸäº‹åŠ¡ IDã€‚ åœ¨æ•…éšœåœºæ™¯ä¸­æ¥ç®¡ï¼šè‹¥å®¢æˆ·ç«¯å´©æºƒä½† EndTxnRequest å·²åˆ°è¾¾åè°ƒè€…ï¼Œåè°ƒè€…å¯ç»§ç»­å®Œæˆæäº¤/å›æ»šæµç¨‹ï¼›è‹¥ EndTxnRequest æœªåˆ°è¾¾ï¼Œåˆ™è¶…æ—¶è‡ªåŠ¨å›æ»šã€‚ å†…éƒ¨äº‹åŠ¡çŠ¶æ€ Topic (__transaction_state)\nè®¾è®¡ç†å¿µï¼šæŒä¹…åŒ–äº‹åŠ¡å…ƒæ•°æ®ï¼ˆTransactional ID â†’ å½“å‰çŠ¶æ€ã€PID+epochã€æ¶‰åŠåˆ†åŒºé›†åˆã€æäº¤ä½ç‚¹ä¿¡æ¯ç­‰ï¼‰ï¼Œç±»ä¼¼ä¸€ä¸ªåˆ†å¸ƒå¼ KV å­˜å‚¨ã€‚ è§£å†³é—®é¢˜ï¼šæä¾› HA æ¢å¤èƒ½åŠ›ï¼šåè°ƒè€…æ•…éšœåå¯ä»è¯¥ Topic è¯»å–æœ€æ–°çŠ¶æ€ï¼›ä¿è¯äº‹åŠ¡çŠ¶æ€æœºåœ¨é›†ç¾¤é‡å¯æˆ–åˆ‡æ¢æ—¶ä¸ä¸¢å¤±ã€‚ ä½œç”¨ï¼šè®°å½•äº‹åŠ¡çŠ¶æ€è½¬ç§»ï¼ˆEMPTY â†’ ONGOING â†’ PREPARE_COMMIT/ABORT â†’ COMPLETE_COMMIT/ABORT â†’ DEADï¼‰ï¼Œå…³é”®èŠ‚ç‚¹æŒä¹…åŒ–ï¼›åè°ƒè€…é€šè¿‡è¯¥æ—¥å¿—é©±åŠ¨åç»­æ§åˆ¶æ¶ˆæ¯å‘é€ä¸èµ„æºæ¸…ç†ã€‚ æ§åˆ¶æ¶ˆæ¯ (Transaction Markers, WriteTxnMarkerRequest)\nè®¾è®¡ç†å¿µï¼šå°†â€œæäº¤â€æˆ–â€œå›æ»šâ€å†³ç­–ä»¥æ§åˆ¶æ¶ˆæ¯å½¢å¼å†™å…¥æ™®é€šæ—¥å¿—ï¼Œä¸ä¸šåŠ¡æ¶ˆæ¯å…±å­˜ï¼›æ¶ˆè´¹ç«¯è¯»å–åˆ°æ§åˆ¶æ¶ˆæ¯åï¼Œå¾—çŸ¥å¯¹åº”äº‹åŠ¡æ¶ˆæ¯æ˜¯å¦å¯è§ã€‚ è§£å†³é—®é¢˜ï¼šä¸€æ–¹é¢é¿å…åœ¨ Broker å†…å­˜ä¸­ä¸´æ—¶ç¼“å­˜å¤§é‡æœªå®Œæˆæ¶ˆæ¯ï¼›å¦ä¸€æ–¹é¢è®©æ¶ˆè´¹è€…é€šè¿‡è¯»å–æ—¥å¿—ä¸­çš„æ§åˆ¶æ¶ˆæ¯æ¥åˆ¤æ–­äº‹åŠ¡è¾¹ç•Œã€‚ ä½œç”¨ï¼šäº‹åŠ¡åè°ƒè€…åœ¨ PREPARE é˜¶æ®µå‘å„åˆ†åŒº Leader å‘é€ WriteTxnMarkerï¼ŒLeader å°†æ­¤å†™å…¥æ—¥å¿—ã€‚æ¶ˆè´¹è€…åœ¨ read_committed æ¨¡å¼ä¸‹ï¼Œè§åˆ°æ§åˆ¶æ¶ˆæ¯åå†å†³å®šå…è®¸çœ‹åˆ°ä¹‹å‰çš„æ¶ˆæ¯æˆ–å¿½ç•¥ï¼ˆä¾æ®æäº¤æˆ–å›æ»šï¼‰ã€‚åè°ƒè€…ä¼šä¸æ–­é‡è¯•ç›´åˆ°æ‰€æœ‰åˆ†åŒºæˆåŠŸå†™å…¥æ§åˆ¶æ¶ˆæ¯ï¼Œä¿è¯åŸå­æäº¤/å›æ»šã€‚ ProducerIdManager / PID Snapshot æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šæœåŠ¡ç«¯ç»´æŠ¤åˆ†é…ç»™å„ Transactional ID çš„ PID æ®µï¼Œå¹¶åœ¨å†…å­˜ä¸­è·Ÿè¸ªå½“å‰æ´»è·ƒ PID â†’ åˆ†åŒºå†…æœ€é«˜åºåˆ—å·æ˜ å°„ï¼›é€šè¿‡å®šæœŸå¿«ç…§å‡å°‘é‡å¯æ¢å¤æ—¶è¯»å–å…¨é‡æ—¥å¿—çš„å¼€é”€ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…æ¯æ¬¡ Broker é‡å¯æ—¶æ‰«æå…¨éƒ¨æ—¥å¿—ä»¥é‡å»º PID åºåˆ—å·æ˜ å°„ï¼›æå‡æ¢å¤é€Ÿåº¦ï¼›åŒæ—¶ç¡®ä¿åœ¨æ•…éšœæ¢å¤åä¾ç„¶èƒ½è¿›è¡Œå¹‚ç­‰åˆ¤é‡ã€‚ ä½œç”¨ï¼šåœ¨ Broker å¯åŠ¨æˆ– Leader åˆ‡æ¢æ—¶ï¼Œé€šè¿‡ PID Snapshot å’Œæ—¥å¿—ä¸­è®°å½•æ¢å¤ ProducerStateï¼›åœ¨è¿è¡Œæ—¶å¯¹ ProduceRequest è¿›è¡Œåºåˆ—å·æ ¡éªŒï¼›æ”¯æŒäº‹åŠ¡ä¸­å¯¹é‡å¤æ‰¹æ¬¡è¯†åˆ«ã€‚ Group Coordinator / __consumer_offsets ä¸ sendOffsetsToTransaction è®¾è®¡\nè®¾è®¡ç†å¿µï¼šåœ¨äº‹åŠ¡ä¸­ï¼Œæ¶ˆè´¹è€…æäº¤ offset éœ€ä¸è¾“å‡ºæ¶ˆæ¯ä¸€åŒåŸå­æäº¤ï¼›å€ŸåŠ© Producer ä½œä¸ºå®¢æˆ·ç«¯åœ¨äº‹åŠ¡ä¸Šä¸‹æ–‡ä¸­å…ˆå‘äº‹åŠ¡åè°ƒè€…åŒæ­¥å°†è¦æäº¤çš„ offset åˆ†åŒºï¼Œå†æ­£å¼å‘ Group Coordinator æäº¤ä½†ä¸æ›´æ–°ç¼“å­˜ï¼Œå¾…äº‹åŠ¡æäº¤åæ‰è®©æ¶ˆè´¹è€…çœ‹åˆ°æ–°ä½ç‚¹ã€‚\nè§£å†³é—®é¢˜ï¼šé¿å…å…ˆæäº¤ä½ç‚¹è€Œè¾“å‡ºæ¶ˆæ¯å›æ»šæ—¶å‡ºç°â€œä¸¢æ•°æ®â€æˆ–å…ˆè¾“å‡ºæ¶ˆæ¯è€Œä½ç‚¹æœªæäº¤æ—¶å´©æºƒå¯¼è‡´â€œé‡å¤å¤„ç†â€ã€‚\nä½œç”¨ï¼š\nç”Ÿäº§è€…è°ƒç”¨ sendOffsetsToTransaction()ï¼Œå…ˆå‘ AddOffsetsToTxnRequest ç»™äº‹åŠ¡åè°ƒè€…ï¼Œåè°ƒè€…å°†è¯¥ offset åˆ†åŒºä¿¡æ¯åŠ å…¥äº‹åŠ¡å…ƒæ•°æ®ï¼›æ”¶åˆ°å“åº”åï¼Œå†å‘ TxnOffsetCommitRequest ç»™ Group Coordinatorï¼Œå°† offset å†™å…¥ __consumer_offsets æ—¥å¿—ä½†ä¸æ›´æ–°ç¼“å­˜ï¼›åªæœ‰å½“äº‹åŠ¡æäº¤å®Œæˆï¼Œåè°ƒè€…æ‰èƒ½å°†è¯¥ä½ç‚¹å¯¹æ¶ˆè´¹è€…å¯è§ã€‚ Group Coordinator æ¥æ”¶åŒ…å« PID/epoch çš„ TxnOffsetCommitRequestï¼ŒæŒä¹…åŒ– offsetï¼›ä½†ç›´åˆ°äº‹åŠ¡å®Œæˆï¼Œä¸ä¼šæ›´æ–°æ¶ˆè´¹è¿›åº¦ç¼“å­˜ï¼Œä¿è¯åŸå­æ€§ã€‚ Last Stable Offset (LSO) ä¸ read_committed æ¶ˆè´¹æ¨¡å¼\nè®¾è®¡ç†å¿µï¼šåœ¨æ¶ˆè´¹ç«¯åªè¿”å›â€œå·²æäº¤ä¸”ç¨³å®šâ€çš„æ¶ˆæ¯ï¼Œå±è”½å°šæœªæäº¤çš„äº‹åŠ¡æ¶ˆæ¯ï¼›ç”¨ LSO æ ‡è®°é¦–ä¸ªæœªå®Œæˆäº‹åŠ¡çš„èµ·å§‹ä½ç½®ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…æ¶ˆè´¹è€…çœ‹åˆ°æœªå®Œæˆæˆ–å›æ»šäº‹åŠ¡çš„æ•°æ®ï¼›åŒæ—¶é¿å…æœåŠ¡å™¨æˆ–å®¢æˆ·ç«¯å› ç¼“å­˜æ‰€æœ‰æœªæäº¤æ¶ˆæ¯å¯¼è‡´ OOM æˆ–æ€§èƒ½ä¸‹é™ã€‚ ä½œç”¨ï¼šBroker åœ¨ read_committed æ¨¡å¼ä¸‹æ ¹æ®åˆ†åŒº LSOï¼Œåªè¿”å› â‰¤ LSO çš„æ¶ˆæ¯ï¼›å½“é•¿äº‹åŠ¡é˜»å¡åç»­çŸ­äº‹åŠ¡ï¼ŒçŸ­äº‹åŠ¡å³ä½¿å·²æäº¤ï¼Œä¹Ÿæš‚æ—¶ä¸è¢«è¿”å›ï¼Œä½†å¯åœ¨åç»­é‡æ–°è®¡ç®— LSO åæ¶ˆè´¹ï¼›ç»“åˆ .txnindex æå‰è¿‡æ»¤å›æ»šäº‹åŠ¡åŒºé—´ï¼Œå‡è½»å®¢æˆ·ç«¯å¤„ç†å‹åŠ›ã€‚ .txnindex å›æ»šäº‹åŠ¡ç´¢å¼•\nè®¾è®¡ç†å¿µï¼šBroker ä¸ºæ¯ä¸ªåˆ†åŒºç»´æŠ¤å·²å›æ»šäº‹åŠ¡å¯¹åº”çš„æ—¥å¿—èµ·æ­¢ä½ç‚¹ç´¢å¼•ï¼Œå¹¶æŒä¹…åŒ–äº .txnindex æ–‡ä»¶ã€‚ è§£å†³é—®é¢˜ï¼šè®©æ¶ˆè´¹ç«¯åœ¨æ‹‰å–æ—¶å¯ä»¥æå‰è·çŸ¥å“ªäº›åŒºé—´çš„æ•°æ®å±äºå·²å›æ»šäº‹åŠ¡ï¼Œä»è€Œè·³è¿‡ï¼Œæ— éœ€å®¢æˆ·ç«¯ç¼“å­˜åç»­ç­‰å¾…æ§åˆ¶æ¶ˆæ¯ã€‚ ä½œç”¨ï¼šæé«˜æ¶ˆè´¹æ•ˆç‡ï¼Œå‡å°‘å› ç­‰å¾…æ§åˆ¶æ¶ˆæ¯è€Œå ç”¨å†…å­˜æˆ–é‡å¤æ‹‰å–çš„å¼€é”€ã€‚ äº‹åŠ¡è¶…æ—¶ä¸è¿‡æœŸæ¸…ç†\nè®¾è®¡ç†å¿µï¼šè®¾ç½®äº‹åŠ¡è¶…æ—¶æ—¶é—´ï¼ˆtransaction.timeout.msï¼‰ä»¥é™åˆ¶å®¢æˆ·ç«¯å®Œæˆäº‹åŠ¡çš„æœ€é•¿æ—¶é™ï¼›åè°ƒè€…æœ‰æœ€å¤§å¯æ¥å—è¶…æ—¶ max.transaction.timeout.msï¼›æ­¤å¤–é€šè¿‡ transaction.id.expiration.ms æ¸…ç†é•¿æœŸä¸æ´»è·ƒçš„äº‹åŠ¡ IDã€‚ è§£å†³é—®é¢˜ï¼šé¿å…äº‹åŠ¡æ— é™æœŸæŒ‚èµ·å ç”¨èµ„æºï¼›ç¡®ä¿æ•…éšœæ¢å¤åèƒ½åŠæ—¶å›æ»šæˆ–é‡Šæ”¾ï¼›é‡Šæ”¾ PID èµ„æºï¼Œé˜²æ­¢å…ƒæ•°æ®è†¨èƒ€ã€‚ ä½œç”¨ï¼šåè°ƒè€…å®šæœŸæ‰«æå¹¶å›æ»šè¶…æ—¶äº‹åŠ¡ï¼›æ¸…ç†è¿‡æœŸäº‹åŠ¡ ID \u0026amp; PID æ˜ å°„ï¼Œä¿è¯ç³»ç»Ÿå¥åº·å’Œèµ„æºå›æ”¶ã€‚ å†…éƒ¨ HA ä¸æ•…éšœæ¢å¤è®¾è®¡\nè®¾è®¡ç†å¿µï¼šåˆ©ç”¨ Kafka æœ¬èº«å¤šå‰¯æœ¬ã€Leader é€‰ä¸¾æœºåˆ¶ï¼Œä»¥åŠå†…éƒ¨ compacted Topicsï¼ˆå¦‚ __transaction_stateã€__consumer_offsetsï¼‰ï¼Œä¿è¯åœ¨ Broker æˆ–åè°ƒè€…æ•…éšœåå¯å¿«é€Ÿæ¢å¤çŠ¶æ€ã€‚\nè§£å†³é—®é¢˜ï¼šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä»»ä½•èŠ‚ç‚¹å´©æºƒéƒ½ä¸åº”å¯¼è‡´äº‹åŠ¡çŠ¶æ€ä¸ä¸€è‡´æˆ–ä¸¢å¤±ï¼Œä¿è¯ Exactly-Once è¯­ä¹‰åœ¨æ•…éšœåœºæ™¯ä¸‹ä¾ç„¶æˆç«‹ã€‚\nä½œç”¨ï¼š\nåè°ƒè€…å¤±è´¥åï¼Œæ–°ä»»åè°ƒè€…è¯»å– __transaction_state æ¢å¤æ­£åœ¨è¿›è¡Œçš„äº‹åŠ¡çŠ¶æ€å¹¶ç»§ç»­å‘é€æ§åˆ¶æ¶ˆæ¯æˆ–å›æ»šã€‚ åˆ†åŒº Leader å¤±è´¥åï¼Œé€šè¿‡æ—¥å¿—ä¸ PID Snapshot æ¢å¤ ProducerStateï¼›åè°ƒè€…é‡è¯• WriteTxnMarkerï¼›æ¶ˆè´¹è€…ç»§ç»­æ¶ˆè´¹å·²æäº¤æ•°æ®ã€‚ Group Coordinator ç»´æŠ¤ __consumer_offsets å¤šå‰¯æœ¬ä»¥æ¢å¤ offset æäº¤ã€‚ å®¢æˆ·ç«¯çŠ¶æ€æœºç®¡ç†\nè®¾è®¡ç†å¿µï¼šåœ¨ Producer å®¢æˆ·ç«¯å†…éƒ¨ç»´æŠ¤ä¸€ç»„çŠ¶æ€ï¼ˆUNINITIALIZED â†’ INITIALIZING â†’ READY â†’ IN_TRANSACTION â†’ COMMITTING/ABORTING_TRANSACTION â†’ \u0026hellip;ï¼‰ï¼Œç¡®ä¿åœ¨ä¸åŒé˜¶æ®µåªæœ‰åˆæ³•æ“ä½œï¼Œå¹¶åœ¨å¼‚å¸¸æ—¶è¿›å…¥ ABORTABLE_ERROR æˆ– FATAL_ERRORï¼Œè§¦å‘å›æ»šæˆ–å…³é—­ã€‚ è§£å†³é—®é¢˜ï¼šé¿å…å®¢æˆ·ç«¯åœ¨ä¸åˆé€‚æ—¶æœºè°ƒç”¨äº‹åŠ¡ APIï¼›åœ¨å‡ºé”™æ—¶èƒ½åŠæ—¶å›æ»šå¹¶æ¸…ç†æœ¬åœ°çŠ¶æ€ï¼›é…åˆæœåŠ¡ç«¯çŠ¶æ€ä¸€è‡´æ€§ã€‚ ä½œç”¨ï¼šåœ¨è°ƒç”¨ initTransactionsã€beginTransactionã€send/sendOffsetsToTransactionã€commitTransaction/abortTransaction å„é˜¶æ®µï¼Œé€šè¿‡çŠ¶æ€è½¬æ¢ä¸æ ¡éªŒä¿è¯æ­£ç¡®è°ƒç”¨é¡ºåºï¼›åœ¨å¼‚å¸¸æˆ–è¶…æ—¶åœºæ™¯è‡ªåŠ¨å›æ»šæˆ–æŠ¥å‘Šé”™è¯¯ã€‚ æ¶ˆè´¹æ¨¡å¼åŒºåˆ†ï¼ˆread_uncommitted vs read_committedï¼‰\nè®¾è®¡ç†å¿µï¼šæä¾›ä¸¤ç§æ¶ˆè´¹è¯­ä¹‰ï¼šé»˜è®¤ read_uncommittedï¼ˆå¯è§æ‰€æœ‰æ¶ˆæ¯ï¼ŒåŒ…æ‹¬æœªæäº¤äº‹åŠ¡æ¶ˆæ¯ï¼‰ï¼›read_committedï¼ˆä»…è§å·²æäº¤ä¸”ç¨³å®šçš„ï¼‰ã€‚ è§£å†³é—®é¢˜ï¼šæ”¯æŒä¸åŒåº”ç”¨éœ€æ±‚ï¼šæŸäº›åœºæ™¯å¯èƒ½å®¹å¿çœ‹åˆ°æœªæäº¤æ¶ˆæ¯ï¼ˆå¦‚å†…éƒ¨åˆ†æï¼‰ï¼›å¤šæ•°åœºæ™¯éœ€è¦ Exactly-Once è¯­ä¹‰ï¼Œåˆ™ä½¿ç”¨ read_committedï¼Œå±è”½æœªæäº¤æˆ–å›æ»šæ•°æ®ã€‚ ä½œç”¨ï¼šåœ¨å®¢æˆ·ç«¯é…ç½®ä¸­è®¾ç½® isolation.level; Broker æ ¹æ® LSO åŠæ§åˆ¶æ¶ˆæ¯å†³å®šè¿”å›å“ªäº›æ¶ˆæ¯ã€‚ ç”Ÿäº§è€…ä¸åè°ƒè€…çš„äº¤äº’åè®®è®¾è®¡ï¼ˆå„ç§ Request ç±»å‹ï¼‰\nè®¾è®¡ç†å¿µï¼šé€šè¿‡ä¸€ç³»åˆ— Request/Responseï¼šFindCoordinatorRequestã€InitProducerIdRequestã€AddPartitionsToTxnRequestã€ProduceRequestï¼ˆæºå¸¦ PID+åºåˆ—å·+äº‹åŠ¡æ ‡è¯†ï¼‰ã€AddOffsetsToTxnRequestã€TxnOffsetCommitRequestã€EndTxnRequestã€WriteTxnMarkerRequestï¼ˆç”±åè°ƒè€…å‘èµ·ï¼‰ã€ç¡®ä¿æ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®ç›®çš„ã€å¯æŒä¹…åŒ–ä¸å¯é‡è¯•ã€‚ è§£å†³é—®é¢˜ï¼šç»“æ„åŒ–å®šä¹‰å„é˜¶æ®µäº¤äº’ï¼Œä½¿å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯¹äº‹åŠ¡å…ƒæ•°æ®æ›´æ–°ã€æ¶ˆæ¯å†™å…¥ã€ä½ç‚¹æäº¤ç­‰éƒ½æœ‰æ¸…æ™°æµç¨‹ï¼›æ”¯æŒé‡è¯•ä¸æ•…éšœæ¢å¤ï¼›é¿å…åè®®æ··ä¹±ã€‚ ä½œç”¨ï¼šå„è¯·æ±‚æºå¸¦å¿…è¦æ ‡è¯†ï¼ˆTransactional IDã€PIDã€epochã€åˆ†åŒºåˆ—è¡¨ã€offsetã€commit/abort æ ‡å¿—ç­‰ï¼‰ï¼ŒæœåŠ¡ç«¯å¯¹åº”å¤„ç†å¹¶æŒä¹…åŒ–ï¼Œåè°ƒè€…é›†ä¸­ç®¡ç†åç»­æ­¥éª¤ã€‚ ZooKeeper æˆ–å†…éƒ¨æœºåˆ¶ç®¡ç† PID æ®µåˆ†é…\nè®¾è®¡ç†å¿µï¼šä¸ºäº§ç”Ÿå…¨å±€å”¯ä¸€çš„ PIDï¼Œåè°ƒè€…é€šè¿‡ ProducerIdManager ä» ZooKeeperï¼ˆæˆ–æ–°ç‰ˆ Kafka å¯å†…ç½®æ›¿ä»£ï¼‰ç”³è¯· ID æ®µï¼›æ¯æ¬¡ç”³è¯·ä¸€æ®µï¼ˆå¦‚ 1000 IDsï¼‰ï¼Œå‡å°‘é¢‘ç¹äº¤äº’ã€‚ è§£å†³é—®é¢˜ï¼šç¡®ä¿ PID å”¯ä¸€ï¼›é«˜æ•ˆåˆ†é…ï¼›æ”¯æŒæ‰©å±•ä¸ HAã€‚ ä½œç”¨ï¼šåè°ƒè€…åœ¨ InitPidRequest é˜¶æ®µåˆ†é… PIDï¼Œå¹¶è®°å½•æœ€æ–°åˆ†é…åŒºé—´ï¼›å®¢æˆ·ç«¯è·å¾— PID åç”¨äºåç»­å¹‚ç­‰ä¸äº‹åŠ¡ï¼›Broker é‡å¯æ¢å¤æ—¶ä¹Ÿéœ€æ¢å¤ PID-åºåˆ—å·æ˜ å°„ã€‚ äº‹åŠ¡ Marker å‘é€ä¸é‡è¯•æœºåˆ¶\nè®¾è®¡ç†å¿µï¼šåè°ƒè€…åœ¨ PREPARE é˜¶æ®µå‘å‡º WriteTxnMarkerRequestï¼Œå¹¶ä¸æ–­é‡è¯•ç›´è‡³æ‰€æœ‰åˆ†åŒºç¡®è®¤æˆåŠŸåï¼Œæ‰æ›´æ–°çŠ¶æ€ä¸º COMPLETEï¼›ä»»ä½•å¤±è´¥å¯¼è‡´æ— é™é‡è¯•æˆ–æ•…éšœåˆ‡æ¢åç»§ç»­é‡è¯•ã€‚ è§£å†³é—®é¢˜ï¼šä¿è¯äº‹åŠ¡æ¶ˆæ¯çš„æäº¤æˆ–å›æ»šé€šçŸ¥å¯é é€è¾¾ï¼Œå³ä½¿åœ¨ç½‘ç»œæˆ– Broker æ•…éšœæ—¶äº¦å¯æœ€ç»ˆä¸€è‡´ï¼›é¿å…åŠæäº¤çŠ¶æ€å¯¼è‡´æ•°æ®å¯è§æ€§é”™è¯¯ã€‚ ä½œç”¨ï¼šåè°ƒè€…å†…éƒ¨ç»´æŠ¤å¾…å‘é€é˜Ÿåˆ—ï¼ˆmarkersQueuePerBrokerï¼‰ï¼Œå¯¹å¤±è´¥åˆ†åŒºé‡æ–° enqueueï¼›æ•´ä½“æˆåŠŸåè§¦å‘äº‹åŠ¡å®Œæˆæ¸…ç†ï¼›è‹¥åè°ƒè€…è‡ªèº«å¤±è´¥ï¼Œæ–°åè°ƒè€…ä» __transaction_state æ¢å¤å¹¶ç»§ç»­å‘é€ã€‚ äº‹åŠ¡çŠ¶æ€æœºä¸çŠ¶æ€è½¬ç§»\nè®¾è®¡ç†å¿µï¼šåœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯åˆ†åˆ«ç»´æŠ¤æ˜ç¡®çŠ¶æ€æœºï¼Œæè¿°ç”Ÿå‘½å‘¨æœŸï¼›çŠ¶æ€è½¬æ¢æ—¶ä¼´éšæŒä¹…åŒ–æˆ–å¿…è¦çš„äº¤äº’ã€‚\nè§£å†³é—®é¢˜ï¼šç¡®ä¿ä»…åœ¨åˆæ³•é˜¶æ®µæ‰§è¡Œå¯¹åº”æ“ä½œï¼›åœ¨å¼‚å¸¸æˆ–æ•…éšœæ—¶èƒ½æ ¹æ®å½“å‰çŠ¶æ€é‡‡å–å›æ»šã€é‡è¯•æˆ–æ¸…ç†ï¼›ä¾¿äºç†è§£å’Œç»´æŠ¤ã€‚\nä½œç”¨ï¼š\næœåŠ¡ç«¯çŠ¶æ€ï¼šEMPTY â†’ ONGOING â†’ PREPARE_COMMIT / PREPARE_ABORT â†’ COMPLETE_COMMIT / COMPLETE_ABORT â†’ DEAD â†’ (æ¸…ç†)ï¼›åè°ƒè€…æ ¹æ® EndTxnRequestã€è¶…æ—¶æ£€æµ‹ç­‰è¿›è¡ŒçŠ¶æ€è½¬ç§»å¹¶æŒä¹…åŒ–ã€‚ å®¢æˆ·ç«¯çŠ¶æ€ï¼šUNINITIALIZED â†’ INITIALIZING â†’ READY â†’ IN_TRANSACTION â†’ COMMITTING_TRANSACTION / ABORTING_TRANSACTION â†’ READY æˆ– ABORTABLE_ERROR / FATAL_ERRORï¼›ä¿è¯ API è°ƒç”¨é¡ºåºåŠå¼‚å¸¸å¤„ç†ã€‚ æ€»ç»“ï¼šKafka åœ¨æµå¤„ç†åœºæ™¯ä¸‹ç«¯åˆ°ç«¯ Exactly-Once èƒ½åŠ›ï¼Œæ ¸å¿ƒä¾èµ–äºå¹‚ç­‰ç”Ÿäº§è€…ï¼ˆPID+åºåˆ—å·+åˆ¤é‡ï¼‰ã€äº‹åŠ¡æœºåˆ¶ï¼ˆTransactional ID+Epoch+Transaction Coordinator+å†…éƒ¨ __transaction_state æ—¥å¿—+æ§åˆ¶æ¶ˆæ¯+LSO/read_committed+.txnindexï¼‰ã€ä»¥åŠæ¶ˆè´¹ç«¯é…åˆï¼ˆsendOffsetsToTransactionã€read_committedï¼‰ã€‚å„è®¾è®¡æ¨¡å—ç›¸äº’åä½œï¼Œé€šè¿‡åˆ†å±‚åè®®ä¸æŒä¹…åŒ–æœºåˆ¶ï¼Œåœ¨åˆ†å¸ƒå¼ã€æ•…éšœã€ç½‘ç»œæŠ–åŠ¨åœºæ™¯ä¸‹ä»èƒ½æä¾›æ­£ç¡®çš„æ°å¥½ä¸€æ¬¡å¤„ç†è¯­ä¹‰ã€‚\n"},{"id":27,"href":"/docs/shortcodes/katex/","title":"KaTeX","section":"Shortcodes","content":"\rKaTeX\r#\rKaTeX shortcode let you render math typesetting in markdown document. See KaTeX\nExample\r#\r{{\u0026lt; katex display=true \u0026gt;}} f(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi {{\u0026lt; /katex \u0026gt;}} \\[\rf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\r\\]\rDisplay Mode Example\r#\rHere is some inline example: \\(\\pi(x)\\)\r, rendered in the same line. And below is display example, having display: block \\[\rf(x) = \\int_{-\\infty}^\\infty\\hat f(\\xi)\\,e^{2 \\pi i \\xi x}\\,d\\xi\r\\]\rText continues here.\n"},{"id":28,"href":"/docs/study/middleware/netty/","title":"Netty è¯¦è§£","section":"ä¸­é—´ä»¶","content":"\r1. Netty ç®€ä»‹\r#\rNetty æ˜¯ä¸€ä¸ªåŸºäº Java çš„å¼‚æ­¥äº‹ä»¶é©±åŠ¨ç½‘ç»œåº”ç”¨æ¡†æ¶ï¼Œç®€åŒ–äº†ç½‘ç»œé€šä¿¡ç¨‹åºçš„å¼€å‘ã€‚å®ƒæä¾›é«˜æ€§èƒ½ã€é«˜å¯é æ€§çš„å¼‚æ­¥ç½‘ç»œé€šä¿¡èƒ½åŠ›ï¼Œæ”¯æŒå¤šç§åè®®ï¼Œå¹¿æ³›åº”ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€é«˜æ€§èƒ½æœåŠ¡å™¨ã€RPC æ¡†æ¶ç­‰åœºæ™¯ã€‚\n2. Netty æ¶æ„ä¸æ ¸å¿ƒç»„ä»¶\r#\r2.1 çº¿ç¨‹æ¨¡å‹\r#\rEventLoopGroupï¼šçº¿ç¨‹ç»„ï¼Œç®¡ç†ä¸€ç»„ EventLoopã€‚ EventLoopï¼šè´Ÿè´£å¤„ç† Channel çš„æ‰€æœ‰ I/O æ“ä½œï¼Œå•çº¿ç¨‹å¤„ç†å¤šä¸ª Channelï¼Œé¿å…å¤šçº¿ç¨‹åŒæ­¥å¼€é”€ã€‚ é€šå¸¸æœåŠ¡ç«¯æœ‰ä¸¤ç»„çº¿ç¨‹æ± ï¼š\nBossGroupï¼šè´Ÿè´£æ¥å—æ–°è¿æ¥ã€‚ WorkerGroupï¼šè´Ÿè´£å¤„ç†è¿æ¥è¯»å†™ã€‚ 2.2 Channel\r#\rè¡¨ç¤ºä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œå°è£…äº†åº•å±‚çš„ Socket é€šé“ã€‚ å¸¸ç”¨å®ç°æœ‰ï¼šNioSocketChannelï¼ˆåŸºäº NIOï¼‰ï¼ŒEpollSocketChannelï¼ˆLinux epollï¼‰ï¼ŒOioSocketChannelï¼ˆé˜»å¡ I/Oï¼‰ã€‚\n2.3 ChannelPipeline ä¸ ChannelHandler\r#\rChannelPipelineï¼šç›¸å½“äºè´£ä»»é“¾ï¼Œä¿å­˜ä¸€ç³»åˆ— ChannelHandlerã€‚ ChannelHandlerï¼šå¤„ç† I/O äº‹ä»¶å’Œæ•°æ®ï¼Œåˆ†ä¸ºå…¥ç«™ï¼ˆInboundï¼‰å’Œå‡ºç«™ï¼ˆOutboundï¼‰ä¸¤ç§ã€‚ æ¶ˆæ¯æµç» ChannelPipeline ä¾æ¬¡ä¼ é€’ç»™ ChannelHandler è¿›è¡Œå¤„ç†ï¼Œæ”¯æŒè§£ç ã€ç¼–ç ã€ä¸šåŠ¡é€»è¾‘ç­‰ã€‚\n2.4 Future ä¸ Promise\r#\rChannelFutureï¼šå¼‚æ­¥æ“ä½œç»“æœçš„è¡¨ç¤ºï¼Œæ‰€æœ‰ I/O æ“ä½œå‡å¼‚æ­¥è¿”å› ChannelFutureã€‚ Promiseï¼šå¯ä»¥å†™å…¥ç»“æœçš„ Futureï¼Œä¾¿äºå¼‚æ­¥æ“ä½œç»“æœé€šçŸ¥ã€‚ 3. Netty å·¥ä½œæµç¨‹\r#\rå¯åŠ¨ ServerBootstrapï¼Œç»‘å®šç«¯å£ã€‚ BossGroup ç›‘å¬å®¢æˆ·ç«¯è¿æ¥ï¼Œæ”¶åˆ°è¿æ¥åæ³¨å†Œåˆ° WorkerGroup çš„ EventLoopã€‚ WorkerGroup è´Ÿè´£ I/O è¯»å†™äº‹ä»¶ï¼Œè§¦å‘ ChannelPipeline ä¸­å¯¹åº”çš„ Handlerã€‚ æ•°æ®å¤„ç†ï¼šæ•°æ®ä»ç½‘ç»œè¯»å…¥ ByteBufï¼Œç»è¿‡è§£ç å™¨è½¬ä¸ºä¸šåŠ¡æ¶ˆæ¯ï¼Œä¸šåŠ¡ Handler å¤„ç†åç¼–ç è¿”å› ByteBuf å†™å›å®¢æˆ·ç«¯ã€‚ å¼‚æ­¥æ“ä½œï¼šæ‰€æœ‰ I/O æ“ä½œå‡éé˜»å¡ï¼Œè°ƒç”¨åç«‹å³è¿”å› ChannelFutureï¼Œå®Œæˆæ—¶è§¦å‘ç›‘å¬å™¨ã€‚ 4. å…³é”®ç‰¹æ€§\r#\rå¼‚æ­¥éé˜»å¡ï¼šåŸºäº Java NIOï¼Œæå‡é«˜å¹¶å‘åœºæ™¯æ€§èƒ½ã€‚ é›¶æ‹·è´ï¼šé€šè¿‡ ByteBuf å®ç°é›¶æ‹·è´å†…å­˜ç®¡ç†ï¼Œå‡å°‘ GC å‹åŠ›ã€‚ é«˜åº¦å¯å®šåˆ¶ï¼šæ”¯æŒè‡ªå®šä¹‰åè®®ç¼–è§£ç ã€å„ç§ä¼ è¾“åè®®ã€‚ äº‹ä»¶é©±åŠ¨ï¼šæ”¯æŒä¸°å¯Œäº‹ä»¶å›è°ƒï¼Œä¾¿äºæ‰©å±•ã€‚ è·¨å¹³å°æ”¯æŒï¼šæ”¯æŒ NIOã€EPOLLã€KQueue ç­‰å¤šç§ I/O æ¨¡å‹ã€‚ 5. å¸¸ç”¨æ¨¡å—\r#\rByteBufï¼šé«˜æ€§èƒ½çš„ç¼“å†²åŒºï¼Œæ›¿ä»£ Java NIO ByteBufferã€‚ Codecï¼šç¼–è§£ç å™¨ï¼Œå¦‚ StringDecoderã€ProtobufDecoderã€‚ Handlerï¼šä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚ Bootstrap / ServerBootstrapï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯åŠ¨ç±»ã€‚ 6. ä½¿ç”¨åœºæ™¯ä¸¾ä¾‹\r#\ré«˜æ€§èƒ½èŠå¤©ç³»ç»Ÿï¼ˆIMï¼‰ åˆ†å¸ƒå¼ RPC æ¡†æ¶ï¼ˆDubbo ç­‰ï¼‰ å®æ—¶æ¸¸æˆæœåŠ¡å™¨ é«˜å¹¶å‘ HTTP/2 å’Œ WebSocket æœåŠ¡ è‡ªå®šä¹‰åè®®é€šä¿¡æœåŠ¡ 7. ç®€å•ç¤ºä¾‹\r#\rpublic class EchoServer { public static void main(String[] args) throws Exception { EventLoopGroup bossGroup = new NioEventLoopGroup(1); EventLoopGroup workerGroup = new NioEventLoopGroup(); try { ServerBootstrap b = new ServerBootstrap(); b.group(bossGroup, workerGroup) .channel(NioServerSocketChannel.class) .childHandler(new ChannelInitializer\u0026lt;SocketChannel\u0026gt;() { @Override protected void initChannel(SocketChannel ch) { ChannelPipeline pipeline = ch.pipeline(); pipeline.addLast(new StringDecoder()); pipeline.addLast(new StringEncoder()); pipeline.addLast(new SimpleChannelInboundHandler\u0026lt;String\u0026gt;() { @Override protected void channelRead0(ChannelHandlerContext ctx, String msg) { System.out.println(\u0026#34;Received: \u0026#34; + msg); ctx.writeAndFlush(\u0026#34;Echo: \u0026#34; + msg); } }); } }); ChannelFuture f = b.bind(8080).sync(); f.channel().closeFuture().sync(); } finally { bossGroup.shutdownGracefully(); workerGroup.shutdownGracefully(); } } } "},{"id":29,"href":"/docs/introspection/trace/","title":"OpenTelemetry å…¨é“¾è·¯è¿½è¸ª","section":"è‡ªçœ","content":"åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ OpenTelemetry å®ç°å…¨é“¾è·¯è¿½è¸ªæ˜¯æå‡å¯ observabilityï¼ˆå¯è§‚æµ‹æ€§ï¼‰å’Œç³»ç»Ÿå¯ç»´æŠ¤æ€§çš„å…³é”®æ­¥éª¤ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æœ€ä½³å®è·µï¼Œæ¶µç›–ä»è®¾è®¡ã€å®ç°åˆ°éƒ¨ç½²è¿ç»´çš„å®Œæ•´è§†è§’ã€‚\nğŸŒ ä¸€ã€OpenTelemetry ç®€ä»‹\r#\rOpenTelemetry æ˜¯ç”± CNCFï¼ˆCloud Native Computing Foundationï¼‰æ‰˜ç®¡çš„å¼€æ”¾æ ‡å‡†ï¼Œæ”¯æŒ åˆ†å¸ƒå¼è¿½è¸ªï¼ˆTracingï¼‰ã€æŒ‡æ ‡ï¼ˆMetricsï¼‰ å’Œ æ—¥å¿—ï¼ˆLogsï¼‰ çš„é‡‡é›†ä¸å¯¼å‡ºã€‚å®ƒæ”¯æŒå¤šè¯­è¨€ï¼Œèƒ½å¤Ÿå°†æ•°æ®å¯¼å‡ºè‡³å¤šç§åç«¯ï¼ˆå¦‚ Jaegerã€Prometheusã€Grafana Tempoã€Datadogã€Zipkin ç­‰ï¼‰ã€‚\nğŸ“¦ äºŒã€å…¨é“¾è·¯è¿½è¸ªçš„æ ¸å¿ƒæ¦‚å¿µ\r#\rTraceï¼ˆè¿½è¸ªï¼‰ï¼šä¸€æ¬¡å®Œæ•´çš„è°ƒç”¨é“¾ï¼ˆå¦‚ç”¨æˆ·ä¸‹å•è¯·æ±‚ï¼‰ã€‚ Spanï¼ˆè·¨åº¦ï¼‰ï¼šè°ƒç”¨é“¾ä¸­çš„å•ä¸ªæ“ä½œï¼ˆå¦‚è®¢å•æœåŠ¡è°ƒç”¨åº“å­˜æœåŠ¡ï¼‰ã€‚ Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰ï¼šè·¨æœåŠ¡ä¼ é€’ trace çš„å…ƒä¿¡æ¯ï¼ˆå¦‚ trace idï¼‰ã€‚ ğŸ”§ ä¸‰ã€åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ä½¿ç”¨ OpenTelemetry çš„æœ€ä½³å®è·µ\r#\râœ… 1. ç»Ÿä¸€è§„èŒƒå’Œè‡ªåŠ¨åŒ–æ¥å…¥\r#\ré€‰æ‹©ç»Ÿä¸€çš„ SDK ç‰ˆæœ¬ï¼šæ‰€æœ‰æœåŠ¡ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ OpenTelemetry SDKã€‚ ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥çš„æ–¹å¼æ¥å…¥ HTTP / gRPC æ¡†æ¶ï¼šä¾‹å¦‚ Spring Boot + Spring Cloud Sleuthï¼ŒPython FastAPI + OpenTelemetry middlewareï¼ŒGo + OpenTelemetry HTTP æ’ä»¶ã€‚ å°½é‡é¿å…æ‰‹åŠ¨åˆ›å»º spanï¼Œä½¿ç”¨å°è£…çš„ middleware æˆ–æ¡†æ¶æ”¯æŒã€‚ ğŸ”— 2. ç»Ÿä¸€ä¸Šä¸‹æ–‡ä¼ é€’ï¼ˆContext Propagationï¼‰\r#\rä½¿ç”¨æ ‡å‡†åè®®ï¼ˆå¦‚ W3C Trace Contextï¼‰ä¼ é€’ trace ä¸Šä¸‹æ–‡ã€‚ åœ¨æ‰€æœ‰æœåŠ¡é—´è°ƒç”¨ï¼ˆREST/gRPC/Kafka/NATSï¼‰æ—¶ï¼Œæ˜¾å¼æˆ–è‡ªåŠ¨ä¼ é€’ traceparentã€baggage ç­‰ headersã€‚ ç¡®ä¿æ‰€æœ‰æœåŠ¡çš„ç½‘å…³ã€API å±‚ã€å¼‚æ­¥æ¶ˆæ¯ç³»ç»Ÿéƒ½èƒ½æ­£ç¡®ä¼ é€’ trace contextã€‚ ğŸ“¤ 3. é€‰æ‹©åˆé€‚çš„åç«¯ï¼ˆExporterï¼‰\r#\rå¸¸è§å¯¼å‡ºç›®æ ‡ï¼š\nJaeger / Zipkinï¼ˆè½»é‡éƒ¨ç½²ï¼‰ Grafana Tempoï¼ˆå¯ä¸ Lokiã€Prometheus é›†æˆï¼‰ Datadog / New Relic / AWS X-Ray / Google Cloud Traceï¼ˆSaaSï¼‰ å»ºè®®ï¼š\nå¼€å‘å’Œæµ‹è¯•ä½¿ç”¨ Jaegerï¼Œç”Ÿäº§å»ºè®®ä½¿ç”¨æ›´å…·å¯æ‰©å±•æ€§å’Œå¯é›†æˆæ€§çš„åç«¯ã€‚ å°† Trace æ•°æ®ä¸ Metricsã€Logs æ±‡èšåˆ°ç»Ÿä¸€å¹³å°ï¼ˆå¦‚ Grafana Stackï¼‰ã€‚ ğŸ§© 4. æ•´åˆæ—¥å¿—ä¸æŒ‡æ ‡ï¼ˆLogs \u0026amp; Metricsï¼‰\r#\rå°† TraceId æ³¨å…¥æ—¥å¿—ä¸Šä¸‹æ–‡ï¼ˆå¦‚ Logback / Log4j çš„ MDCï¼ŒPython çš„ logging filterï¼‰ã€‚\nå®ç°â€œä»æ—¥å¿—è·³è½¬åˆ° Traceâ€ï¼Œâ€œä» Trace è·³è½¬åˆ° Metricsâ€çš„é—­ç¯è§‚æµ‹ã€‚\nç¤ºä¾‹æ—¥å¿—æ ¼å¼ï¼š\n{ \u0026#34;timestamp\u0026#34;: \u0026#34;2025-07-07T10:10:00Z\u0026#34;, \u0026#34;level\u0026#34;: \u0026#34;INFO\u0026#34;, \u0026#34;trace_id\u0026#34;: \u0026#34;abc123\u0026#34;, \u0026#34;span_id\u0026#34;: \u0026#34;def456\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Order created successfully\u0026#34; } ğŸ“Š 5. é‡‡æ ·ç­–ç•¥ï¼ˆSamplingï¼‰è®¾è®¡\r#\rAlways onï¼šå¼€å‘è°ƒè¯•æ—¶ä½¿ç”¨ã€‚ Probabilistic samplingï¼šæŒ‰æ¦‚ç‡é‡‡æ ·ï¼Œé€‚åˆé«˜æµé‡ç”Ÿäº§ç¯å¢ƒã€‚ Tail-based samplingï¼šå…ˆæ”¶é›†ï¼Œå†åˆ¤æ–­æ˜¯å¦ä¿ç•™ï¼Œé€‚ç”¨äºé“¾è·¯åˆ†æã€‚ è‡ªå®šä¹‰ç­–ç•¥ï¼šå¯¹å…³é”®ä¸šåŠ¡è·¯å¾„ã€å¼‚å¸¸é“¾è·¯æé«˜é‡‡æ ·ç‡ã€‚ ğŸ§ª 6. å¼‚æ­¥è°ƒç”¨ä¸æ¶ˆæ¯é˜Ÿåˆ—æ”¯æŒ\r#\rKafkaã€RabbitMQ ç­‰ä¸­é—´ä»¶ä¹Ÿéœ€è¦ä¼ é€’ TraceContextã€‚\nä½¿ç”¨æ¶ˆæ¯å¤´ä¼ é€’ä¸Šä¸‹æ–‡ï¼Œå¹¶åœ¨æ¶ˆè´¹è€…æ‰‹åŠ¨åˆ›å»ºæ–°çš„ spanï¼Œå…³è” parent spanã€‚\nå»ºè®®ä½¿ç”¨å®˜æ–¹æˆ–ç¤¾åŒºæä¾›çš„ instrumentationï¼Œä¾‹å¦‚ï¼š\nopentelemetry-instrumentation-kafka opentelemetry-instrumentation-celery ğŸš€ 7. éƒ¨ç½²ä¸ç›‘æ§å»ºè®®\r#\rä½¿ç”¨ sidecar æˆ– agent æ¨¡å¼éƒ¨ç½² OTEL Collectorï¼ˆé‡‡é›†ã€è¿‡æ»¤ã€å¯¼å‡ºï¼‰ã€‚ å¯ç”¨èµ„æºæ£€æµ‹ï¼ˆhost name, container id, region ç­‰ï¼‰ä¾¿äºåˆ†æã€‚ é…ç½®ç†”æ–­æœºåˆ¶ï¼Œé˜²æ­¢è¿½è¸ªç³»ç»Ÿæ•…éšœå½±å“ä¸šåŠ¡æµã€‚ ğŸ§° å››ã€å·¥å…·é“¾æ¨è\r#\rå·¥å…·/ç»„ä»¶ åŠŸèƒ½ è¯´æ˜ OpenTelemetry SDK Traceã€Metricsã€Logs é‡‡é›† å¤šè¯­è¨€æ”¯æŒ OTEL Collector ä¸­è½¬ã€è½¬ç ã€è¿‡æ»¤ å¯éƒ¨ç½²ä¸º sidecar / DaemonSet / Gateway Jaeger / Zipkin å¯è§†åŒ–è¿½è¸ªé“¾è·¯ å¼€æºã€è½»é‡ã€æ˜“éƒ¨ç½² Grafana Tempo å¯æ‰©å±• Trace å­˜å‚¨ å¯ä¸ Lokiã€Prometheus é…åˆä½¿ç”¨ Grafana / Kibana å¯è§†åŒ–åˆ†æ å¤šæ•°æ®æºæ”¯æŒ ğŸ§  äº”ã€æ€»ç»“\r#\rå…³é”®ç‚¹ å»ºè®®åšæ³• ä¸Šä¸‹æ–‡ä¼ é€’ ä½¿ç”¨ W3C Trace Context / B3 SDK æ¥å…¥ ä½¿ç”¨ä¸­é—´ä»¶æˆ–æ¡†æ¶é›†æˆæ–¹å¼ Trace æ•°æ®å­˜å‚¨ é€‰æ‹©é«˜å¯ç”¨ã€é«˜å‹ç¼©æ¯”å­˜å‚¨æ–¹æ¡ˆ æ—¥å¿—å…³è” trace_id æ³¨å…¥æ—¥å¿—ä¸Šä¸‹æ–‡ æ€§èƒ½å¼€é”€æ§åˆ¶ é…ç½®é‡‡æ ·ç­–ç•¥ã€æ‰¹é‡å¯¼å‡ºæœºåˆ¶ å¼‚å¸¸é“¾è·¯ç›‘æ§ é‡ç‚¹æœåŠ¡é…ç½®é«˜é‡‡æ ·æˆ–å…¨é‡‡æ · å½“ç„¶å¯ä»¥ï¼Œä¸‹é¢æˆ‘ä¼šç”¨Javaï¼ˆSpring Bootï¼‰å’ŒPythonï¼ˆFastAPIï¼‰åˆ†åˆ«æ¼”ç¤ºå¦‚ä½•åŸºäº OpenTelemetry å®ç°å…¨é“¾è·¯è¿½è¸ªï¼Œå¹¶ç»“åˆæœ€ä½³å®è·µè¯´æ˜å…³é”®ç‚¹ã€‚ä½ ä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘æ˜¯å¦æ›´å…³æ³¨æŸç§è¯­è¨€æˆ–æ¡†æ¶ï¼Œæˆ‘å†è°ƒæ•´ã€‚\nâ˜• Java ç¤ºä¾‹ï¼ˆSpring Boot + OpenTelemetry + Jaegerï¼‰\r#\r1ï¸âƒ£ Maven ä¾èµ–ï¼ˆSpring Boot 3+ï¼‰\r#\r\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.opentelemetry.instrumentation\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;opentelemetry-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.30.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; 2ï¸âƒ£ application.yml é…ç½®\r#\rotel: exporter: otlp: endpoint: http://localhost:4317 resource: attributes: service.name: order-service tracing: enabled: true sampling: probability: 1.0 # å¼€å‘å…¨é‡‡æ ·ï¼Œç”Ÿäº§å»ºè®®è®¾ç½®ä¸º 0.1 æˆ–é…ç½® tail-based sampling 3ï¸âƒ£ æ§åˆ¶å™¨ + è°ƒç”¨å¤–éƒ¨æœåŠ¡ç¤ºä¾‹\r#\r@RestController public class OrderController { private final RestTemplate restTemplate; public OrderController(RestTemplateBuilder builder) { this.restTemplate = builder.build(); } @GetMapping(\u0026#34;/order\u0026#34;) public String createOrder() { // è‡ªåŠ¨åˆ›å»º span å¹¶å…³è” traceId String response = restTemplate.getForObject(\u0026#34;http://inventory-service/inventory\u0026#34;, String.class); return \u0026#34;Order placed. Inventory Response: \u0026#34; + response; } } 4ï¸âƒ£ æ—¥å¿—æ³¨å…¥ TraceId\r#\rä½¿ç”¨ Logback + MDC è‡ªåŠ¨æ³¨å…¥ï¼š\n\u0026lt;pattern\u0026gt;%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - traceId=%X{trace_id} spanId=%X{span_id} %msg%n\u0026lt;/pattern\u0026gt; ğŸ Python ç¤ºä¾‹ï¼ˆFastAPI + OpenTelemetryï¼‰\r#\r1ï¸âƒ£ å®‰è£…ä¾èµ–\r#\rpip install opentelemetry-sdk opentelemetry-instrumentation-fastapi \\ opentelemetry-exporter-otlp opentelemetry-instrumentation-requests 2ï¸âƒ£ åˆå§‹åŒ– OTELï¼ˆmain.pyï¼‰\r#\rfrom fastapi import FastAPI from opentelemetry import trace from opentelemetry.instrumentation.fastapi import FastAPIInstrumentor from opentelemetry.instrumentation.requests import RequestsInstrumentor from opentelemetry.sdk.trace import TracerProvider from opentelemetry.sdk.trace.export import BatchSpanProcessor from opentelemetry.exporter.otlp.proto.http.trace_exporter import OTLPSpanExporter from opentelemetry.sdk.resources import SERVICE_NAME, Resource # è®¾ç½® TracerProvider trace.set_tracer_provider( TracerProvider( resource=Resource.create({SERVICE_NAME: \u0026#34;inventory-service\u0026#34;}) ) ) # é…ç½®å¯¼å‡ºå™¨ trace.get_tracer_provider().add_span_processor( BatchSpanProcessor(OTLPSpanExporter(endpoint=\u0026#34;http://localhost:4318/v1/traces\u0026#34;)) ) app = FastAPI() # è‡ªåŠ¨æ³¨å…¥ä¸­é—´ä»¶ FastAPIInstrumentor.instrument_app(app) RequestsInstrumentor().instrument() @app.get(\u0026#34;/inventory\u0026#34;) def check_inventory(): return {\u0026#34;status\u0026#34;: \u0026#34;in-stock\u0026#34;} 3ï¸âƒ£ è°ƒç”¨é“¾ä¸Šä¸‹æ¸¸ä¼ æ’­\r#\rè°ƒç”¨ inventory-serviceï¼š\nimport requests @app.get(\u0026#34;/order\u0026#34;) def place_order(): r = requests.get(\u0026#34;http://localhost:8001/inventory\u0026#34;) return {\u0026#34;order_status\u0026#34;: \u0026#34;created\u0026#34;, \u0026#34;inventory\u0026#34;: r.json()} ä¸Šä¸‹æ–‡å°†é€šè¿‡ traceparent header è‡ªåŠ¨ä¼ é€’ã€‚\nğŸ¯ æœ€ä½³å®è·µä½“ç°\r#\rå®è·µç‚¹ å®ç°è¯´æ˜ è‡ªåŠ¨ instrumentation ä½¿ç”¨äº† FastAPIInstrumentor / Spring Boot Starter tracecontext ä¼ é€’ requests å’Œ RestTemplate å‡é€šè¿‡è‡ªåŠ¨é›†æˆä¼ é€’ traceparent trace-id æ³¨å…¥æ—¥å¿— Java é€šè¿‡ Logback çš„ %X{} ï¼›Python å¯ç”¨ structlog + è‡ªå®šä¹‰ processor æ‰¹é‡å¯¼å‡º + æ€§èƒ½ä¼˜åŒ– ä½¿ç”¨ BatchSpanProcessor é¿å…æ¯æ¬¡è¯·æ±‚ç«‹å³å¯¼å‡º å¯é…ç½®èµ„æºæ ‡ç­¾ ä½¿ç”¨ service.name æ ‡è¯†æœåŠ¡åï¼Œä¾¿äºè¿½è¸ªåˆ†æ å¯¼å‡ºåˆ°é›†ä¸­å¹³å° é…ç½® OTLP å¯¼å‡ºï¼Œå¯æ¥å…¥ Jaegerã€Tempoã€Datadog ç­‰ ğŸ“¦ æ¨èéƒ¨ç½²ç»„åˆ\r#\rç»„ä»¶ è¯´æ˜ OpenTelemetry Collector ç»Ÿä¸€é‡‡é›†ã€è½¬æ¢ã€è½¬å‘ trace æ•°æ® Jaeger / Grafana Tempo å¯è§†åŒ–é“¾è·¯è¿½è¸ªå›¾ Prometheus + Grafana æŒ‡æ ‡è§‚æµ‹ Loki / ELK æ—¥å¿—è§‚æµ‹ï¼ŒtraceId å…³è”åˆ†æ OpenTelemetry è¦å®ç°ä¸Šä¸‹æ–‡çš„è‡ªåŠ¨ä¼ é€’ï¼ˆContext Propagationï¼‰ï¼Œå…³é”®åœ¨äºä»¥ä¸‹å‡ ç‚¹ï¼š\nâœ… ä¸€ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡è‡ªåŠ¨ä¼ é€’ï¼Ÿ\r#\råœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªè¯·æ±‚é€šå¸¸ä¼šè·¨å¤šä¸ªæœåŠ¡ã€‚ä¾‹å¦‚ï¼š\nç”¨æˆ·è¯·æ±‚ â†’ ç½‘å…³ â†’ ç”¨æˆ·æœåŠ¡ â†’ è®¢å•æœåŠ¡ â†’ åº“å­˜æœåŠ¡ æˆ‘ä»¬å¸Œæœ›ä»ç”¨æˆ·å¼€å§‹çš„ä¸€æ¬¡è¯·æ±‚èƒ½è´¯ç©¿æ•´ä¸ªé“¾è·¯ï¼Œèƒ½åœ¨æ¯ä¸ªæœåŠ¡çœ‹åˆ°ç›¸åŒçš„ trace_idï¼Œè¿™å°±éœ€è¦ï¼š\nå°† trace ä¸Šä¸‹æ–‡ï¼ˆå¦‚ trace_idã€span_idï¼‰è‡ªåŠ¨ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªæœåŠ¡ï¼Œå¹¶è¢«è‡ªåŠ¨è¯†åˆ«å’Œç»§ç»­è¿½è¸ªã€‚\nğŸ”§ äºŒã€è‡ªåŠ¨ä¸Šä¸‹æ–‡ä¼ é€’çš„æ ¸å¿ƒæœºåˆ¶\r#\rOpenTelemetry ä½¿ç”¨æ ‡å‡†åè®®ï¼ˆå¦‚ W3C Trace Contextï¼‰æ¥åœ¨ä¸åŒæœåŠ¡ä¹‹é—´ä¼ é€’ traceã€‚\nğŸ’¡ å…³é”® Header ç¤ºä¾‹ï¼ˆW3C Trace Contextï¼‰\r#\rtraceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01 trace-id: æ•´ä¸ªè°ƒç”¨é“¾çš„å”¯ä¸€ ID span-id: å½“å‰è°ƒç”¨çš„å”¯ä¸€ ID trace-flags: é‡‡æ ·æ ‡è®° âš™ï¸ ä¸‰ã€å¦‚ä½•å¯ç”¨è‡ªåŠ¨ä¼ é€’ï¼ˆåˆ†è¯­è¨€è¯´æ˜ï¼‰\r#\râ˜• Javaï¼ˆSpring Boot / OpenTelemetryï¼‰\r#\râœ… ä½¿ç”¨ OpenTelemetry Starterï¼ˆæ¨èï¼‰\r#\r\u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;io.opentelemetry.instrumentation\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;opentelemetry-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.30.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å®ƒä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹å·¥ä½œï¼š\né€šè¿‡æ‹¦æˆªå™¨è‡ªåŠ¨è¯»å– traceparent header è‡ªåŠ¨åœ¨ä½¿ç”¨ RestTemplate, WebClient, gRPC æ—¶æ³¨å…¥ä¸Šä¸‹æ–‡ è‡ªåŠ¨å…³è” trace_id ä¸ MDC æ—¥å¿—ä¸Šä¸‹æ–‡ ğŸ“ä½ åªéœ€ç¡®ä¿è°ƒç”¨æ—¶ä½¿ç”¨æ¡†æ¶æ ‡å‡†ç»„ä»¶ï¼ˆå¦‚ RestTemplate, WebClientï¼‰ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨é™„å¸¦ trace headerã€‚\nğŸ Pythonï¼ˆFastAPI / Flaskï¼‰\r#\râœ… ä½¿ç”¨è‡ªåŠ¨ Instrumentationï¼š\r#\rpip install opentelemetry-instrumentation-fastapi opentelemetry-instrumentation-requests åˆå§‹åŒ–ï¼š\r#\rfrom opentelemetry.instrumentation.fastapi import FastAPIInstrumentor from opentelemetry.instrumentation.requests import RequestsInstrumentor app = FastAPI() FastAPIInstrumentor.instrument_app(app) RequestsInstrumentor().instrument() è‡ªåŠ¨ä¸º FastAPI è·¯ç”±åˆ›å»º spanï¼Œå¹¶æå– trace ä¸Šä¸‹æ–‡ï¼ˆtraceparentï¼‰ ä½¿ç”¨ requests.get() æ—¶è‡ªåŠ¨æ³¨å…¥ trace header ğŸ¹ Goï¼ˆHTTP æˆ– gRPCï¼‰\r#\râœ… ä½¿ç”¨ OTEL HTTP æ’ä»¶ï¼š\r#\rimport ( \u0026#34;go.opentelemetry.io/contrib/instrumentation/net/http/otelhttp\u0026#34; \u0026#34;net/http\u0026#34; ) handler := http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) { // handler è‡ªåŠ¨è·å– trace ä¸Šä¸‹æ–‡ }) http.Handle(\u0026#34;/my-api\u0026#34;, otelhttp.NewHandler(handler, \u0026#34;my-api-handler\u0026#34;)) è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼š\r#\rclient := http.Client{ Transport: otelhttp.NewTransport(http.DefaultTransport), } req, _ := http.NewRequest(\u0026#34;GET\u0026#34;, \u0026#34;http://other-service\u0026#34;, nil) client.Do(req) è¿™æ ·ä¼šè‡ªåŠ¨å°† tracecontext æ’å…¥ HTTP è¯·æ±‚å¤´ã€‚\nğŸ“¥ å››ã€åœ¨æ¶ˆæ¯é˜Ÿåˆ— / Kafka / gRPC ä¸­ä¼ é€’ä¸Šä¸‹æ–‡\r#\rğŸ“¨ Kafkaï¼ˆJava ç¤ºä¾‹ï¼‰\r#\råœ¨ Producer ä¸­æ·»åŠ  traceparent åˆ°æ¶ˆæ¯å¤´ï¼š\nProducerRecord\u0026lt;String, String\u0026gt; record = new ProducerRecord\u0026lt;\u0026gt;(topic, key, value); GlobalOpenTelemetry.getPropagators().getTextMapPropagator().inject( Context.current(), record.headers(), setter); åœ¨ Consumer ä¸­æå–å¹¶ç»§ç»­è¿½è¸ªï¼š\nContext extractedContext = propagators.extract(Context.current(), record.headers(), getter); Span span = tracer.spanBuilder(\u0026#34;kafka-consume\u0026#34;).setParent(extractedContext).startSpan(); âœ… äº”ã€éƒ¨ç½²ç¯å¢ƒè¦æ±‚\r#\ræ‰€æœ‰æœåŠ¡éƒ½è¦ç»Ÿä¸€ä½¿ç”¨æ”¯æŒ OpenTelemetry çš„ SDK å’Œä¼ æ’­æœºåˆ¶ å»ºè®®é€šè¿‡ OpenTelemetry Collector ä¸­è½¬ trace æ•°æ®ï¼Œç®€åŒ–é…ç½® åœ¨ Istio / Linkerd ç­‰æœåŠ¡ç½‘æ ¼ä¸­ä½¿ç”¨æ—¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ mesh è‡ªåŠ¨å¤„ç† trace header ğŸ§ª å…­ã€éªŒè¯è‡ªåŠ¨ä¸Šä¸‹æ–‡æ˜¯å¦ä¼ é€’æˆåŠŸ\r#\rä½ å¯ä»¥åœ¨æ¯ä¸ªæœåŠ¡æ‰“å°å½“å‰ trace_id æˆ–åœ¨æ—¥å¿—ä¸­è§‚å¯Ÿ trace_id æ˜¯å¦ä¸€è‡´ï¼š\nJava ç¤ºä¾‹ï¼ˆLogbackï¼‰ï¼š\n%X{trace_id} %X{span_id} %msg%n Python ç¤ºä¾‹ï¼ˆstructlogï¼‰ï¼š\nlog = structlog.get_logger().bind(trace_id=trace.get_current_span().get_span_context().trace_id) ğŸ§  ä¸ƒã€å°ç»“\r#\ré¡¹ç›® æœ€ä½³å®è·µ ä½¿ç”¨æ ‡å‡† Header å»ºè®®ä½¿ç”¨ W3C Trace Contextï¼ˆé»˜è®¤ï¼‰ HTTP è°ƒç”¨ ä½¿ç”¨æ¡†æ¶é›†æˆç»„ä»¶ï¼ˆå¦‚ RestTemplateã€requestsï¼‰ æ¶ˆæ¯é˜Ÿåˆ— / å¼‚æ­¥ é€šè¿‡ headers æ‰‹åŠ¨ä¼ é€’ä¸Šä¸‹æ–‡ æœåŠ¡ç»Ÿä¸€ SDK é…ç½® ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ OTEL SDK å’Œ propagator æ—¥å¿—ä¸è¿½è¸ªå…³è” å°† trace_id æ³¨å…¥æ—¥å¿—ä¸Šä¸‹æ–‡ å¦‚æœä½ æ„¿æ„æä¾›ä½ ä½¿ç”¨çš„è¯­è¨€å’Œé€šä¿¡æ–¹å¼ï¼ˆå¦‚ gRPCã€Kafkaã€HTTPï¼‰ï¼Œæˆ‘å¯ä»¥ç»™ä½ å…·ä½“çš„ä¸Šä¸‹æ–‡æ³¨å…¥/æå–ä»£ç æ¨¡æ¿ï¼Œè¦è¯•è¯•çœ‹å—ï¼Ÿ\n"},{"id":30,"href":"/docs/study/database/postgresql-mysql/","title":"PostgreSQL vs MySQL (InnoDB) é€‰å‹","section":"æ•°æ®åº“","content":"PostgreSQL å’Œ MySQL çš„é€‰å‹ï¼Œå¸¸è§äºåç«¯æ¶æ„è®¾è®¡ä¸­ã€‚ä¸¤è€…éƒ½æ˜¯ä¸»æµå¼€æºå…³ç³»å‹æ•°æ®åº“ï¼Œå„æœ‰ä¼˜åŠ¿ã€‚å†³å®šæ€§å› ç´ å¾€å¾€å–å†³äºé¡¹ç›®çš„éœ€æ±‚ã€å›¢é˜Ÿçš„ç»éªŒå’Œä½¿ç”¨åœºæ™¯ã€‚\nâœ… å†³å®š PostgreSQL vs MySQL çš„å…³é”®å‡ ç‚¹å¦‚ä¸‹ï¼š\r#\rå†³å®šç‚¹ PostgreSQL MySQL 1. æ ‡å‡†å…¼å®¹æ€§ \u0026amp; å¤æ‚æŸ¥è¯¢æ”¯æŒ âœ… ä¼˜ç§€çš„ SQL æ ‡å‡†å…¼å®¹æ€§ï¼Œæ”¯æŒå¤æ‚æŸ¥è¯¢ã€çª—å£å‡½æ•°ã€CTEã€å¹¶å‘å†™ä¼˜åŒ–ç­‰é«˜çº§ç‰¹æ€§ã€‚é€‚åˆå¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚ âŒ æŸ¥è¯¢åŠŸèƒ½ç¨å¼±ï¼Œå¯¹å¤æ‚æŸ¥è¯¢æ”¯æŒä¸å¦‚ Postgresã€‚æ›´é€‚åˆ CRUD ç±»å‹ç³»ç»Ÿã€‚ 2. JSON æ”¯æŒ âœ… å¼ºå¤§çš„ JSON / JSONB æ•°æ®ç±»å‹æ”¯æŒï¼Œå‡ ä¹ç­‰åŒäºæ–‡æ¡£æ•°æ®åº“åŠŸèƒ½ã€‚ âš ï¸ æœ‰ JSON æ”¯æŒï¼Œä½†åŠŸèƒ½è¾ƒå¼±ï¼Œä¸»è¦ç”¨äºå­˜å‚¨ï¼Œä¸åˆ©äºå¤æ‚æŸ¥è¯¢ã€‚ 3. ä¸€è‡´æ€§ä¸äº‹åŠ¡æ”¯æŒ âœ… çœŸæ­£çš„ MVCCï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼Œå®ç°çº§åˆ«çš„äº‹åŠ¡éš”ç¦»ï¼ˆæ”¯æŒ SERIALIZABLEï¼‰ï¼Œæ›´é€‚åˆé‡‘è/é«˜å¯é ç³»ç»Ÿã€‚ âš ï¸ InnoDB è™½æ”¯æŒäº‹åŠ¡ï¼Œä½†éš”ç¦»æ€§å’Œä¸€è‡´æ€§åœ¨é«˜å¹¶å‘æ—¶ç•¥é€Šä¸€ç­¹ã€‚ 4. æ’ä»¶/æ‰©å±•èƒ½åŠ› âœ… æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼‰ã€PostGISã€å…¨æ–‡æ£€ç´¢ç­‰å¼ºå¤§æ‰©å±•æœºåˆ¶ã€‚ âŒ æ‰©å±•æ€§ä¸å¦‚ Postgresï¼Œä¸»è¦é å†…ç½®åŠŸèƒ½ã€‚ 5. æ€§èƒ½ï¼ˆå•ç‚¹è¯»å†™ï¼‰ âš ï¸ æŸ¥è¯¢ä¼˜åŒ–èƒ½åŠ›å¼ºï¼Œä½†å•çº¯çš„ CRUD æ€§èƒ½ç•¥ä½äº MySQLã€‚ âœ… å¯¹ç®€å•æŸ¥è¯¢/å†™å…¥ä¼˜åŒ–å¾ˆå¥½ï¼ŒCRUD ç³»ç»Ÿæ€§èƒ½ä¼˜äº Postgresã€‚ 6. ç¤¾åŒºç”Ÿæ€/å­¦ä¹ æˆæœ¬ âš ï¸ åŠŸèƒ½å¤šä½†å¤æ‚ï¼Œå­¦ä¹ æ›²çº¿ç•¥é«˜ï¼Œæ–‡æ¡£ä¸°å¯Œã€‚ âœ… ä½¿ç”¨æ›´å¹¿æ³›ï¼Œç”Ÿæ€æˆç†Ÿï¼Œå­¦ä¹ ä¸Šæ‰‹å¿«ã€‚ 7. å…¼å®¹æ€§å’Œæ‰˜ç®¡æœåŠ¡ âœ… AWS RDS, Aurora, GCP, Azure å‡æ”¯æŒï¼Œå…¼å®¹è¾ƒå¥½ã€‚ âœ… æ‰€æœ‰ä¸»æµäº‘å¹³å°æ”¯æŒï¼Œéƒ¨åˆ†å¹³å°å¦‚é˜¿é‡Œäº‘/è…¾è®¯äº‘æ›´åå‘ MySQLã€‚ 8. æ•°æ®é‡ä¸æ‰©å±•æ€§ âœ… æ›´é€‚åˆå¤§æ•°æ®åœºæ™¯ï¼ˆä¾‹å¦‚ TB çº§åˆ«ï¼‰ï¼Œè¡¨åˆ†åŒºã€é€»è¾‘åˆ†åŒºåšå¾—è¾ƒå¥½ã€‚ âš ï¸ è¡¨ç»“æ„å¤§æ—¶ç®¡ç†ä¸å¦‚ PostgreSQL çµæ´»ã€‚ ğŸ ç»“è®ºå»ºè®®ï¼ˆå®é™…é€‰å‹å»ºè®®ï¼‰ï¼š\r#\râœ… é€‰æ‹© PostgreSQL çš„åœºæ™¯ï¼š\r#\rä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œéœ€è¦é«˜çº§æŸ¥è¯¢åŠŸèƒ½ï¼› å¤§é‡ä½¿ç”¨ JSON / åŠç»“æ„åŒ–æ•°æ®ï¼› éœ€è¦å¼ºä¸€è‡´æ€§äº‹åŠ¡ï¼› æ„å»ºå¤æ‚ç³»ç»Ÿï¼ˆå¦‚ BIã€ERPã€é‡‘èï¼‰ï¼› éœ€è¦ç©ºé—´æ•°æ®ã€å…¨æ–‡æœç´¢æˆ–å…¶ä»–æ‰©å±•åŠŸèƒ½ã€‚ âœ… é€‰æ‹© MySQL çš„åœºæ™¯ï¼š\r#\rWeb ç³»ç»Ÿã€è½»é‡ CRUD ç±»åº”ç”¨ï¼› å¯¹æ€§èƒ½è¦æ±‚é«˜ä½†äº‹åŠ¡éœ€æ±‚ä¸é«˜ï¼› å›¢é˜Ÿå·²æœ‰ MySQL ç»éªŒï¼› å¿«é€Ÿè¿­ä»£çš„åˆåˆ›é¡¹ç›®æˆ–ä¸­å°å‹ç³»ç»Ÿï¼› äº‘å¹³å°é»˜è®¤æä¾›ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘åå¥½ MySQLï¼‰ã€‚ âœ… ä¸€è‡´æ€§ä¸äº‹åŠ¡æ”¯æŒï¼šPostgreSQL vs MySQL\r#\rğŸ”¹ 1. PostgreSQLï¼šäº‹åŠ¡ä¸€è‡´æ€§æ›´å¼º\r#\râœ… çœŸæ­£çš„ MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰\r#\rPostgreSQL å¯¹æ¯ä¸ªäº‹åŠ¡ç”Ÿæˆè‡ªå·±çš„æ•°æ®å¿«ç…§ï¼Œå®ç°æ— é”è¯»å†™ã€‚ å†™å…¥æ—¶å¹¶ä¸ä¼šé˜»å¡è¯»å–ï¼Œå†²çªç”±äº‹åŠ¡éš”ç¦»ç­‰çº§æ§åˆ¶ï¼Œä¿è¯å¹¶å‘å®‰å…¨ã€‚ å®ç°æœºåˆ¶æ›´è´´è¿‘å­¦æœ¯å®šä¹‰ï¼Œäº‹åŠ¡éš”ç¦»æ›´ä¸¥æ ¼ã€å¯æ§æ€§æ›´å¥½ã€‚ âœ… æ”¯æŒå®Œæ•´çš„ SQL æ ‡å‡†éš”ç¦»çº§åˆ«ï¼š\r#\rREAD COMMITTEDï¼ˆé»˜è®¤ï¼‰ REPEATABLE READ SERIALIZABLEï¼ˆé€šè¿‡ Serializable Snapshot Isolation å®ç°ï¼Œéé”å®šå¼ï¼Œé€‚åˆé‡‘èç±»åº”ç”¨ï¼‰ âœ… é«˜åº¦å¯é çš„ WALï¼ˆé¢„å†™æ—¥å¿—ï¼‰æœºåˆ¶ï¼š\r#\ræ‰€æœ‰ä¿®æ”¹æ“ä½œå…ˆå†™æ—¥å¿—ï¼Œå†å†™ç£ç›˜ï¼Œå´©æºƒåå¯ä»¥ç²¾ç¡®æ¢å¤ã€‚ æ•°æ®æ¢å¤æœºåˆ¶æˆç†Ÿã€å®‰å…¨æ€§æ›´é«˜ã€‚ ğŸ” è¡ç”Ÿä¼˜åŠ¿ï¼š\r#\ræ›´é€‚åˆå¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜çš„ç³»ç»Ÿï¼Œå¦‚ï¼šé“¶è¡Œã€äº¤æ˜“æ‰€ã€è´¦æœ¬ç±»ç³»ç»Ÿã€‚ ğŸ”¹ 2. MySQLï¼šä¸€è‡´æ€§ä¸å¦‚ PostgreSQL ç¨³å¥\r#\râš ï¸ ä¾èµ– InnoDB å¼•æ“ï¼ˆé»˜è®¤ï¼‰æä¾›äº‹åŠ¡æ”¯æŒï¼š\r#\rä¹Ÿå®ç°äº† MVCCï¼Œä½†å®ç°ç»†èŠ‚ä¸ PostgreSQL ä¸åŒã€‚ REPEATABLE READ æ˜¯é»˜è®¤éš”ç¦»çº§åˆ«ï¼Œä½¿ç”¨**é—´éš™é”ï¼ˆGap Lockï¼‰**é¿å…å¹»è¯»ï¼Œä½†å®¹æ˜“å¼•å‘æ­»é”å’Œæ€§èƒ½ç“¶é¢ˆã€‚ âš ï¸ SERIALIZABLE æ”¯æŒæœ‰é™ï¼š\r#\ræ˜¯é€šè¿‡åŠ é”å®ç°ï¼Œæ€§èƒ½å¼€é”€å¤§ï¼Œä¸æ¨èåœ¨é«˜å¹¶å‘åœºæ™¯ä½¿ç”¨ã€‚ å®é™…ä¸­ï¼Œå¾ˆå°‘ç³»ç»Ÿç”¨ MySQL å¯ç”¨ SERIALIZABLE éš”ç¦»çº§åˆ«ã€‚ ğŸš¨ æ½œåœ¨é—®é¢˜ï¼š\r#\råœ¨é«˜å¹¶å‘ã€å¤æ‚äº‹åŠ¡åœºæ™¯ä¸‹ï¼Œä¸€è‡´æ€§å¯èƒ½å‡ºç°â€œè¾¹ç¼˜æ¡ˆä¾‹â€é—®é¢˜ï¼› ç‰¹åˆ«åœ¨ä¸»ä»å¤åˆ¶ä¸­ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥å¤åˆ¶ï¼Œä¼šå¯¼è‡´è¯»å†™å»¶è¿Ÿæˆ–è„è¯»ã€‚ âœ… æ•°æ®é‡ä¸æ‰©å±•æ€§ï¼šPostgreSQL vs MySQL\r#\rğŸ”¹ 1. PostgreSQLï¼šé¢å‘å¤§è§„æ¨¡æ•°æ®æ›´å…·ä¼˜åŠ¿\r#\râœ… è¡¨åˆ†åŒºï¼ˆPartitioningï¼‰èƒ½åŠ›æ›´å¼º\r#\ræ”¯æŒå£°æ˜å¼åˆ†åŒºï¼ˆPostgreSQL 10+ï¼‰ï¼› æ”¯æŒèŒƒå›´ã€åˆ—è¡¨ã€å“ˆå¸Œåˆ†åŒºï¼› æŸ¥è¯¢ä¼˜åŒ–å™¨å¯ä»¥è‡ªåŠ¨åˆ†åŒºè£å‰ªï¼ˆPartition Pruningï¼‰ï¼Œå¤§æ•°æ®é‡æ—¶æ€§èƒ½æ›´ç¨³å®šï¼› éå¸¸é€‚åˆæ—¥å¿—åº“ã€æ—¶é—´åºåˆ—åº“ã€å¤§è¡¨æ•°æ®å½’æ¡£åœºæ™¯ã€‚ âœ… å¹¶è¡ŒæŸ¥è¯¢èƒ½åŠ›\r#\ræ”¯æŒå¹¶è¡Œ Seq Scanã€å¹¶è¡Œèšåˆï¼ˆAggregateï¼‰ã€å¹¶è¡Œç´¢å¼•æ‰«æï¼› å¯¹ OLAP å‹å¥½ï¼ˆè™½ç„¶ä¸æ˜¯ä¸“é—¨ä¸º OLAP è®¾è®¡ï¼‰ï¼› å¤§æ•°æ®é›†æŸ¥è¯¢æ€§èƒ½æ˜æ˜¾ä¼˜äº MySQLã€‚ âœ… æ‰©å±•æ€§å¼ºï¼šå¯ä»¥å¤–æŒ‚æ’ä»¶ï¼ˆå¦‚ TimescaleDBï¼‰åšæ—¶é—´åºåˆ—ã€åˆ†å¸ƒå¼å¤„ç†ã€‚\r#\rğŸ”¹ 2. MySQLï¼šè½»é‡å¿«é€Ÿä½†æ‰©å±•èƒ½åŠ›æœ‰é™\r#\râš ï¸ åˆ†åŒºæ”¯æŒè¾ƒå¼±ï¼š\r#\ræ”¯æŒåˆ†åŒºè¡¨ï¼Œä½†åŠŸèƒ½å—é™ï¼Œä¸æ”¯æŒå¤–é”®ã€å…¨æ–‡ç´¢å¼•ç­‰ï¼› åˆ†åŒºä¼˜åŒ–å™¨èƒ½åŠ›è¾ƒå¼±ï¼Œå¾ˆå¤šæŸ¥è¯¢æ— æ³•è‡ªåŠ¨å‘½ä¸­åˆé€‚åˆ†åŒºï¼› å®é™…åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†å…¬å¸ä¼šé€‰æ‹©æ‰‹åŠ¨åšâ€œåˆ†åº“åˆ†è¡¨â€ è€Œéä½¿ç”¨åŸç”Ÿåˆ†åŒºã€‚ âš ï¸ æ‰©å±•èƒ½åŠ›é ä¸­é—´ä»¶å®ç°ï¼š\r#\ré‡åˆ° TB çº§åˆ«æˆ–çƒ­ç‚¹å¤§è¡¨ï¼Œå¸¸ä¾èµ– Sharding ä¸­é—´ä»¶ï¼ˆå¦‚ ShardingSphereã€Vitessï¼‰ï¼› æ¶æ„æ›´å¤æ‚ï¼Œç»´æŠ¤æˆæœ¬æ›´é«˜ï¼› å¾ˆéš¾åšåˆ° PostgreSQL é‚£ç§â€œå¼€ç®±å³ç”¨â€çš„åˆ†åŒºå’Œæ‰©å±•èƒ½åŠ›ã€‚ ğŸ“Œ æ€»ç»“å¯¹æ¯”ï¼ˆæ·±åº¦åœºæ™¯æ¨èï¼‰ï¼š\r#\rç»´åº¦ PostgreSQL MySQL äº‹åŠ¡éš”ç¦»èƒ½åŠ› å¼ºï¼šæ”¯æŒå¯ä¸²è¡ŒåŒ–éš”ç¦»ï¼ŒMVCC æœºåˆ¶ä¸¥è°¨ å¼±ï¼šSERIALIZABLE å®ç°ç²—ç³™ï¼Œå®¹æ˜“æ­»é” å†™å…¥ä¸€è‡´æ€§ä¿éšœ å¼ºï¼šWAL + MVCC + å¿«ç…§æœºåˆ¶ ä¸€èˆ¬ï¼šInnoDB MVCC æœ‰å±€é™ï¼Œå¤åˆ¶å¼‚æ­¥ å¹¶å‘æ€§èƒ½ é«˜å¹¶å‘ä¸‹æ›´ç¨³å¥ å¹¶å‘é«˜æ—¶å®¹æ˜“æ­»é”æˆ–é”ç­‰å¾… å¤§æ•°æ®åˆ†åŒº æ”¯æŒå¤šç§åˆ†åŒºæ–¹å¼ï¼Œè‡ªåŠ¨ä¼˜åŒ– åˆ†åŒºåŠŸèƒ½å¼±ï¼Œéœ€æ‰‹åŠ¨å®ç°æˆ–ä¾èµ–ä¸­é—´ä»¶ å¹¶è¡ŒæŸ¥è¯¢ æ”¯æŒï¼ŒOLAP å‹å¥½ ä¸æ”¯æŒå¹¶è¡ŒæŸ¥è¯¢ æ’ä»¶æ‰©å±• ä¸°å¯Œï¼Œå¦‚æ—¶åºåº“ã€åœ°ç†ç©ºé—´ç­‰ å°‘ï¼ŒåŠŸèƒ½ä¸»è¦é æ ¸å¿ƒåŠŸèƒ½æˆ–å¤–éƒ¨æ–¹æ¡ˆ âœ… æœ€ç»ˆå»ºè®®ï¼ˆäº‹åŠ¡+å¤§æ•°æ®åœºæ™¯ï¼‰ï¼š\r#\râœ… å¦‚æœä½ è¦æ„å»º é‡‘èç³»ç»Ÿã€å®¡è®¡ç³»ç»Ÿã€å¤æ‚è´¦æœ¬ç³»ç»Ÿï¼Œæˆ–å¤„ç† TB çº§å¤§è¡¨ã€å¤æ‚æŠ¥è¡¨åˆ†æ â†’ ä¼˜é€‰ PostgreSQL âš ï¸ å¦‚æœä½ æ˜¯ä»¥è¯»å†™æ€§èƒ½ä¼˜å…ˆçš„ä¸­å°å‹ç³»ç»Ÿã€å CRUD æ“ä½œã€å•è¡¨ä¸å¤§ï¼Œæˆ–è€…å·²æœ‰å¤§é‡ MySQL èµ„äº§ â†’ MySQL ä¾ç„¶å¯è¡Œ ä½ çš„è¿™äº›é—®é¢˜éƒ½éå¸¸å…³é”®ï¼Œæ¶‰åŠæ•°æ®åº“å†…æ ¸ã€äº‹åŠ¡æ¨¡å‹ä»¥åŠæ•°æ®åº“åœ¨ä¸åŒåœºæ™¯ä¸‹çš„è¡¨ç°ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹æ¯ä¸ªé—®é¢˜çš„è¯¦ç»†è§£æï¼Œé…åˆç±»æ¯”å’Œç¤ºæ„ï¼Œä¾¿äºç†è§£ã€‚\n1ï¸âƒ£ ä»€ä¹ˆæ˜¯é—´éš™é”ï¼ˆGap Lockï¼‰ï¼Ÿ\r#\rğŸ”¹ å®šä¹‰ï¼š\r#\ré—´éš™é”ï¼ˆGap Lockï¼‰æ˜¯ MySQL InnoDB å¼•æ“çš„ä¸€ç§é”æœºåˆ¶ï¼Œç”¨äºé˜²æ­¢â€œå¹»è¯»â€ï¼ˆphantom readï¼‰å‘ç”Ÿã€‚åœ¨æŸäº›éš”ç¦»çº§åˆ«ï¼ˆå¦‚ REPEATABLE READï¼‰ä¸‹ï¼Œå½“ä½ æŸ¥æ‰¾æ•°æ®æ—¶ï¼ŒMySQL ä¸ä»…é”ä½å·²æœ‰æ•°æ®è¡Œï¼Œè¿˜ä¼šé”ä½æ•°æ®ä¹‹é—´çš„â€œé—´éš™â€ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨é—´éš™ä¸­æ’å…¥æ–°æ•°æ®ã€‚\nğŸ” ä¸¾ä¾‹è¯´æ˜ï¼š\r#\rå‡è®¾æœ‰å¦‚ä¸‹æ•°æ®è¡¨ï¼ˆæœ‰åºï¼‰ï¼š\nid: 1, 3, 5 ä½ æ‰§è¡Œï¼š\nSELECT * FROM users WHERE id = 3 FOR UPDATE; InnoDB ä¼šï¼š\né”ä½ id=3ï¼› åŒæ—¶é”ä½ (1, 3) å’Œ (3, 5) çš„â€œé—´éš™â€ â†’ è¿™å°±æ˜¯ Gap Lockã€‚ âœ… ä½œç”¨ï¼š\r#\ré˜²æ­¢å…¶ä»–äº‹åŠ¡åœ¨è¿™äº›é—´éš™ä¸­æ’å…¥æ–°çš„è®°å½•ï¼› ä¿éšœå½“å‰äº‹åŠ¡çš„æ•°æ®å¿«ç…§ä¸è¢«â€œç¯¡æ”¹â€ã€‚ âš ï¸ å‰¯ä½œç”¨ï¼š\r#\ré”ç²’åº¦ç²—ï¼šé—´éš™é”å¯èƒ½é”ä½æ¯”éœ€è¦çš„èŒƒå›´æ›´å¤§çš„æ•°æ®åŒºé—´ï¼› å®¹æ˜“é€ æˆæ­»é”ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘åœºæ™¯ã€‚ 2ï¸âƒ£ ä»€ä¹ˆæ˜¯ Serializable Snapshot Isolationï¼ˆSSIï¼‰ï¼Ÿ\r#\rğŸ”¹ èƒŒæ™¯ï¼š\r#\rSerializable æ˜¯æœ€å¼ºçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚ä½†ä¼ ç»Ÿå®ç°ï¼ˆå¦‚ MySQLï¼‰é€šè¿‡åŠ é”å®ç°ï¼Œæ€§èƒ½å·®ã€‚è€Œ PostgreSQL å®ç°äº†ä¸€ä¸ªæ›´ä¼˜é›…ã€æ— é”çš„ä¸²è¡ŒåŒ–æœºåˆ¶ï¼šSerializable Snapshot Isolationï¼ˆSSIï¼‰ã€‚\nğŸ” å·¥ä½œåŸç†ï¼š\r#\ræ¯ä¸ªäº‹åŠ¡åŸºäºè‡ªå·±çš„å¿«ç…§è¯»å–æ•°æ®ï¼› PostgreSQL è®°å½•äº‹åŠ¡ä¹‹é—´çš„ä¾èµ–å†²çªå›¾ï¼› åœ¨æ£€æµ‹åˆ°â€œå¯èƒ½ç ´åä¸²è¡ŒåŒ–é¡ºåºâ€çš„å†²çªæ—¶ï¼Œä¸»åŠ¨å›æ»šå†²çªäº‹åŠ¡ï¼Œç¡®ä¿æœ€ç»ˆç»“æœä¸ä¸²è¡Œæ‰§è¡Œä¸€è‡´ã€‚ âœ… ä¼˜åŠ¿ï¼š\r#\ræ€§èƒ½å¥½äºä¼ ç»Ÿä¸²è¡ŒåŒ–ï¼ˆå› ä¸ºé¿å…å¤§é‡åŠ é”ï¼‰ï¼› å®ç°äº†çœŸæ­£çš„â€œå¯ä¸²è¡ŒåŒ–â€ï¼› éå¸¸é€‚åˆ é‡‘èã€èµ„é‡‘ç³»ç»Ÿã€å¼ºä¸€è‡´æ€§è¦æ±‚åœºæ™¯ã€‚ 3ï¸âƒ£ OLAP å’Œ OLTP çš„åŒºåˆ«ï¼Ÿ\r#\rç»´åº¦ OLTPï¼ˆè”æœºäº‹åŠ¡å¤„ç†ï¼‰ OLAPï¼ˆè”æœºåˆ†æå¤„ç†ï¼‰ åœºæ™¯ ç”µå•†ä¸‹å•ã€é“¶è¡Œè½¬è´¦ã€CRM ç³»ç»Ÿç­‰ æŠ¥è¡¨åˆ†æã€BI æŸ¥è¯¢ã€æ•°æ®ä»“åº“ æ“ä½œç±»å‹ é«˜é¢‘è¯»å†™ã€å•æ¡è®°å½•ã€äº‹åŠ¡å¼º å°‘é‡å†™å…¥ã€å¤§é‡èšåˆã€åˆ†æå‹æŸ¥è¯¢ æ•°æ®é‡ ä¸€èˆ¬è¡¨è¾ƒå°ã€æ•°æ®å®æ—¶å˜åŒ– æµ·é‡æ•°æ®ï¼ˆGB~TB çº§ï¼‰ï¼Œè¿½æ±‚æŸ¥è¯¢æ€§èƒ½ æŸ¥è¯¢ç»“æ„ ç®€å•ã€æ¡ä»¶æ˜ç¡® å¤šç»´èšåˆã€è¿æ¥å¤æ‚ã€ç»Ÿè®¡ç±» æ•°æ®ç»“æ„ æ­£è§„åŒ–è®¾è®¡ï¼ˆ3NFï¼‰ å»æ­£è§„åŒ–ã€æ˜Ÿå‹/é›ªèŠ±æ¨¡å‹ ğŸ¯ ç®€å•ç†è§£ï¼š\nOLTP æ˜¯â€œå¹²æ´»çš„ç³»ç»Ÿâ€ï¼ˆæ¯”å¦‚ä¸‹å•ã€æ”¯ä»˜ï¼‰ï¼› OLAP æ˜¯â€œçœ‹æŠ¥è¡¨çš„ç³»ç»Ÿâ€ï¼ˆæ¯”å¦‚è€æ¿çœ‹é”€å”®ç»Ÿè®¡ï¼‰ã€‚ 4ï¸âƒ£ PostgreSQL çš„åˆ†åŒºæ–¹å¼æœ‰å“ªäº›ï¼Ÿ\r#\rPostgreSQL ä» 10 å¼€å§‹å¼•å…¥ åŸç”Ÿåˆ†åŒºè¡¨ï¼ˆDeclarative Partitioningï¼‰ï¼Œæ”¯æŒä»¥ä¸‹å‡ ç§ï¼š\nğŸ”¹ 1. èŒƒå›´åˆ†åŒºï¼ˆRange Partitioningï¼‰ï¼š\r#\ræŒ‰æŸä¸ªå€¼åŒºé—´åˆ†åŒºï¼Œæ¯”å¦‚æ—¶é—´ï¼š\nCREATE TABLE logs ( log_time date, message text ) PARTITION BY RANGE (log_time); ğŸ”¹ 2. åˆ—è¡¨åˆ†åŒºï¼ˆList Partitioningï¼‰ï¼š\r#\ræŒ‰æšä¸¾å€¼åˆ’åˆ†ï¼Œä¾‹å¦‚å›½å®¶æˆ–åœ°åŒºï¼š\nCREATE TABLE users ( country text, name text ) PARTITION BY LIST (country); ğŸ”¹ 3. å“ˆå¸Œåˆ†åŒºï¼ˆHash Partitioningï¼‰ï¼š\r#\ræŒ‰å“ˆå¸Œå€¼åˆ†åŒºï¼Œé€‚åˆè´Ÿè½½å‡è¡¡ï¼š\nCREATE TABLE events ( id int, payload text ) PARTITION BY HASH (id); âœ… åˆ†åŒºä¼˜åŠ¿ï¼š\r#\rå¤§è¡¨å¯ä»¥åˆ†ç‰‡å­˜å‚¨ï¼Œæå‡æŸ¥è¯¢å’Œç®¡ç†æ•ˆç‡ï¼› æ”¯æŒ è‡ªåŠ¨åˆ†åŒºè£å‰ªï¼Œåªæ‰«æç›¸å…³åˆ†åŒºï¼› åˆ†åŒºå¯ç‹¬ç«‹å­˜å‚¨ã€ç´¢å¼•ã€ç»´æŠ¤ã€‚ 5ï¸âƒ£ å¹¶è¡ŒæŸ¥è¯¢ï¼ˆParallel Queryï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ\r#\rğŸ”¹ å®šä¹‰ï¼š\r#\rå¹¶è¡ŒæŸ¥è¯¢æ˜¯æŒ‡æ•°æ®åº“å¼•æ“åˆ©ç”¨å¤šä¸ª CPU æ ¸å¿ƒåŒæ—¶æ‰§è¡Œä¸€ä¸ª SQL æŸ¥è¯¢çš„å¤šä¸ªé˜¶æ®µï¼Œä»¥åŠ é€ŸæŸ¥è¯¢è¿‡ç¨‹ã€‚\nåœ¨ PostgreSQL ä¸­ï¼Œå¹¶è¡Œä¸»è¦å‘ç”Ÿåœ¨ï¼š\nå¹¶è¡Œé¡ºåºæ‰«æï¼ˆParallel Seq Scanï¼‰ å¹¶è¡Œèšåˆï¼ˆParallel Aggregationï¼‰ å¹¶è¡Œå“ˆå¸Œè¿æ¥ï¼ˆParallel Hash Joinï¼‰ ğŸ” ç¤ºä¾‹åœºæ™¯ï¼š\r#\rSELECT COUNT(*) FROM orders WHERE order_date \u0026gt; \u0026#39;2023-01-01\u0026#39;; å¦‚æœ orders è¡¨æœ‰ 1 äº¿è¡Œï¼ŒPostgreSQL ä¼šè‡ªåŠ¨åˆ‡åˆ†æ•°æ®å—ï¼Œå¤šä¸ªè¿›ç¨‹åŒæ—¶æ‰«æå„è‡ªè´Ÿè´£çš„éƒ¨åˆ†å¹¶èšåˆç»“æœã€‚ âœ… æ•ˆæœï¼š\r#\ræŸ¥è¯¢é€Ÿåº¦æ˜¾è‘—æå‡ï¼ˆ4 æ ¸ CPU å¯æé€Ÿ 3~4 å€ï¼‰ï¼› å¯¹å¤§è¡¨ã€ç»Ÿè®¡åˆ†æå‹æŸ¥è¯¢å°¤å…¶æœ‰æ•ˆã€‚ âœ… æ€»ç»“é€Ÿè§ˆï¼š\r#\ræ¦‚å¿µ æ ¸å¿ƒä»·å€¼ é—´éš™é” MySQL ä¸­é˜²æ­¢å¹»è¯»çš„æœºåˆ¶ï¼Œä½†å®¹æ˜“å¼•å‘é”å†²çª Serializable Snapshot Isolation PostgreSQL å®ç°ä¸²è¡ŒåŒ–çš„æ— é”æœºåˆ¶ï¼Œé«˜ä¸€è‡´æ€§ï¼Œæ€§èƒ½å¥½ OLAP vs OLTP ä¸€ä¸ªåšä¸šåŠ¡å†™å…¥ï¼ˆOLTPï¼‰ï¼Œä¸€ä¸ªåšåˆ†ææŸ¥è¯¢ï¼ˆOLAPï¼‰ PostgreSQL åˆ†åŒº æ”¯æŒèŒƒå›´ã€åˆ—è¡¨ã€å“ˆå¸Œä¸‰ç§åˆ†åŒºï¼ŒæŸ¥è¯¢è‡ªåŠ¨ä¼˜åŒ– å¹¶è¡ŒæŸ¥è¯¢ PostgreSQL è‡ªåŠ¨ä½¿ç”¨å¤šæ ¸æå‡å¤§æŸ¥è¯¢æ€§èƒ½ "},{"id":31,"href":"/docs/study/base/python/","title":"Python åŸºç¡€","section":"åŸºç¡€","content":"\r1. PythonåŸºç¡€çŸ¥è¯†ç­”æ¡ˆ\r#\ræ•°æ®ç±»å‹\r#\rPythonä¸­æœ‰å“ªäº›å†…ç½®æ•°æ®ç±»å‹ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ Pythonçš„å†…ç½®æ•°æ®ç±»å‹ä¸»è¦åŒ…æ‹¬ï¼š\næ•°å­—ï¼ˆNumbersï¼‰: int (æ•´æ•°), float (æµ®ç‚¹æ•°), complex (å¤æ•°)ã€‚ å¸ƒå°”å€¼ï¼ˆBooleanï¼‰: bool (True/False)ã€‚ å­—ç¬¦ä¸²ï¼ˆStringï¼‰: str (ä¸å¯å˜çš„å­—ç¬¦åºåˆ—)ã€‚ åˆ—è¡¨ï¼ˆListï¼‰: list (å¯å˜çš„æœ‰åºåºåˆ—ï¼Œå…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹)ã€‚ å…ƒç»„ï¼ˆTupleï¼‰: tuple (ä¸å¯å˜çš„æœ‰åºåºåˆ—ï¼Œå…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹)ã€‚ å­—å…¸ï¼ˆDictionaryï¼‰: dict (å¯å˜çš„æ— åºé”®å€¼å¯¹é›†åˆï¼Œé”®å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹)ã€‚ é›†åˆï¼ˆSetï¼‰: set (å¯å˜çš„æ— åºä¸é‡å¤å…ƒç´ é›†åˆ)ã€‚ ä¸å¯å˜é›†åˆï¼ˆFrozen Setï¼‰: frozenset (ä¸å¯å˜çš„æ— åºä¸é‡å¤å…ƒç´ é›†åˆ)ã€‚ ä¸»è¦åŒºåˆ«åœ¨äºï¼š\nå¯å˜æ€§ï¼ˆMutabilityï¼‰: åˆ—è¡¨ã€å­—å…¸ã€é›†åˆæ˜¯å¯å˜çš„ï¼Œåˆ›å»ºåå¯ä»¥ä¿®æ”¹ï¼›æ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ã€frozensetæ˜¯ä¸å¯å˜çš„ï¼Œåˆ›å»ºåä¸èƒ½ä¿®æ”¹ã€‚ æœ‰åºæ€§ï¼ˆOrderï¼‰: åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²æ˜¯æœ‰åºçš„ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®ï¼›å­—å…¸ï¼ˆPython 3.7+ ä¿è¯æ’å…¥é¡ºåºï¼Œ3.6åŠä»¥å‰ç‰ˆæœ¬æ˜¯æ— åºçš„ï¼‰ã€é›†åˆæ˜¯æ— åºçš„ã€‚ é‡å¤æ€§ï¼ˆDuplicationï¼‰: åˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²å¯ä»¥åŒ…å«é‡å¤å…ƒç´ ï¼›é›†åˆå’Œfrozensetä¸å…è®¸é‡å¤å…ƒç´ ã€‚ é”®å€¼å¯¹: åªæœ‰å­—å…¸æ˜¯é”®å€¼å¯¹å½¢å¼çš„ã€‚ ä»€ä¹ˆæ˜¯å¯å˜ï¼ˆmutableï¼‰å’Œä¸å¯å˜ï¼ˆimmutableï¼‰å¯¹è±¡ï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚\nä¸å¯å˜å¯¹è±¡ï¼ˆImmutable Objectsï¼‰: ä¸€æ—¦åˆ›å»ºï¼Œå…¶å†…å­˜ä¸­çš„å€¼å°±ä¸èƒ½è¢«æ”¹å˜ã€‚å¯¹ä¸å¯å˜å¯¹è±¡è¿›è¡Œä¿®æ”¹æ“ä½œï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ ä¾‹å­: æ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ã€frozensetã€‚ # å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ s = \u0026#34;hello\u0026#34; print(id(s)) # æŸ¥çœ‹å†…å­˜åœ°å€ s = s + \u0026#34; world\u0026#34; # çœ‹èµ·æ¥ä¿®æ”¹äº†sï¼Œä½†å®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¯¹è±¡ print(id(s)) # å†…å­˜åœ°å€å·²æ”¹å˜ # å…ƒç»„æ˜¯ä¸å¯å˜çš„ t = (1, 2, 3) # t[0] = 10 # è¿™ä¼šæŠ¥é”™ï¼šTypeError: \u0026#39;tuple\u0026#39; object does not support item assignment å¯å˜å¯¹è±¡ï¼ˆMutable Objectsï¼‰: åˆ›å»ºåï¼Œå¯ä»¥å¯¹å…¶å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ— éœ€æ”¹å˜å…¶å†…å­˜åœ°å€ã€‚ ä¾‹å­: åˆ—è¡¨ã€å­—å…¸ã€é›†åˆã€‚ # åˆ—è¡¨æ˜¯å¯å˜çš„ l = [1, 2, 3] print(id(l)) # æŸ¥çœ‹å†…å­˜åœ°å€ l.append(4) # ç›´æ¥åœ¨åŸå¯¹è±¡ä¸Šä¿®æ”¹ print(id(l)) # å†…å­˜åœ°å€ä¸å˜ æ·±æ‹·è´å’Œæµ…æ‹·è´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä½•æ—¶ä½¿ç”¨å®ƒä»¬ï¼Ÿ\næµ…æ‹·è´ï¼ˆShallow Copyï¼‰:\nåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡é‡ŒåŒ…å«çš„å…ƒç´ æ˜¯å¯¹åŸå¯¹è±¡ä¸­å­å¯¹è±¡ï¼ˆå¼•ç”¨ï¼‰çš„å¼•ç”¨ã€‚ å¦‚æœåŸå¯¹è±¡ä¸­çš„å…ƒç´ æ˜¯ä¸å¯å˜ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å…ƒç»„ï¼‰ï¼Œé‚£ä¹ˆæ‹·è´åçš„å¯¹è±¡å’ŒåŸå¯¹è±¡å…±äº«è¿™äº›ä¸å¯å˜å…ƒç´ çš„å€¼ã€‚ å¦‚æœåŸå¯¹è±¡ä¸­åŒ…å«å¯å˜ç±»å‹ï¼ˆåˆ—è¡¨ã€å­—å…¸ç­‰ï¼‰çš„å­å¯¹è±¡ï¼Œé‚£ä¹ˆæµ…æ‹·è´åçš„æ–°å¯¹è±¡å’ŒåŸå¯¹è±¡ä¼šå…±äº«è¿™äº›å¯å˜å­å¯¹è±¡ã€‚ä¿®æ”¹è¿™äº›å…±äº«çš„å¯å˜å­å¯¹è±¡ä¼šå½±å“åˆ°ä¸¤ä¸ªå¯¹è±¡ã€‚ å®ç°æ–¹å¼: list.copy(), dict.copy(), copy.copy()ï¼Œæˆ–ä½¿ç”¨åˆ‡ç‰‡ [:]ã€‚ import copy list1 = [[1, 2], 3] list2 = copy.copy(list1) # æµ…æ‹·è´ list1[0][0] = 99 # ä¿®æ”¹å†…éƒ¨å¯å˜åˆ—è¡¨ list1[1] = 88 # ä¿®æ”¹å¤–éƒ¨ä¸å¯å˜å…ƒç´  print(list1) # [[99, 2], 88] print(list2) # [[99, 2], 3] - æ³¨æ„list2çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿè¢«ä¿®æ”¹äº†ï¼Œç¬¬äºŒä¸ªæ²¡æœ‰ æ·±æ‹·è´ï¼ˆDeep Copyï¼‰:\né€’å½’åœ°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶ä¸”æ–°å¯¹è±¡ä¸­åŒ…å«çš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„æ–°å‰¯æœ¬ï¼Œä¸å†ä¸åŸå¯¹è±¡çš„ä»»ä½•å­å¯¹è±¡å…±äº«å†…å­˜ã€‚ ä¿®æ”¹æ·±æ‹·è´åçš„å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ï¼Œåä¹‹äº¦ç„¶ã€‚ å®ç°æ–¹å¼: copy.deepcopy()ã€‚ import copy list1 = [[1, 2], 3] list3 = copy.deepcopy(list1) # æ·±æ‹·è´ list1[0][0] = 99 list1[1] = 88 print(list1) # [[99, 2], 88] print(list3) # [[1, 2], 3] - list3å®Œå…¨ç‹¬ç«‹ ä½•æ—¶ä½¿ç”¨ï¼Ÿ\nå½“ä½ çš„æ•°æ®ç»“æ„ä¸­åªåŒ…å«ä¸å¯å˜å¯¹è±¡ï¼Œæˆ–è€…ä½ ä¸å…³å¿ƒå†…éƒ¨å¯å˜å¯¹è±¡æ˜¯å¦å…±äº«æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æµ…æ‹·è´ï¼Œå®ƒé€šå¸¸æ›´å¿«ã€‚ å½“ä½ éœ€è¦ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„æ–°å¯¹è±¡ï¼Œå…¶ä¸­æ‰€æœ‰å±‚çº§çš„å­å¯¹è±¡éƒ½ä¸åŸå¯¹è±¡åˆ†ç¦»ï¼Œå¹¶ä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡æ—¶ï¼Œå¿…é¡»ä½¿ç”¨æ·±æ‹·è´ã€‚ æ§åˆ¶æµ\r#\rif/elif/elseã€forå¾ªç¯å’Œwhileå¾ªç¯çš„ç”¨æ³•ã€‚\nif/elif/else: ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼Œæ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç å—ã€‚ score = 85 if score \u0026gt;= 90: print(\u0026#34;ä¼˜ç§€\u0026#34;) elif score \u0026gt;= 60: print(\u0026#34;åŠæ ¼\u0026#34;) else: print(\u0026#34;ä¸åŠæ ¼\u0026#34;) forå¾ªç¯: ç”¨äºéå†åºåˆ—ï¼ˆåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ï¼‰ã€é›†åˆæˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ä¸­çš„å…ƒç´ ã€‚ # éå†åˆ—è¡¨ fruits = [\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;cherry\u0026#34;] for fruit in fruits: print(fruit) # éå†æ•°å­—èŒƒå›´ for i in range(5): # ä»0åˆ°4 print(i) whileå¾ªç¯: å½“ç»™å®šæ¡ä»¶ä¸ºçœŸæ—¶ï¼Œé‡å¤æ‰§è¡Œä»£ç å—ã€‚ count = 0 while count \u0026lt; 3: print(f\u0026#34;Count is: {count}\u0026#34;) count += 1 breakã€continueå’Œpassè¯­å¥çš„ä½œç”¨ã€‚\nbreak: ç«‹å³ç»ˆæ­¢å½“å‰å¾ªç¯ï¼ˆforæˆ–whileï¼‰ï¼Œå¹¶è·³åˆ°å¾ªç¯ä½“åé¢çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚ for i in range(10): if i == 5: break # å½“iç­‰äº5æ—¶ï¼Œå¾ªç¯åœæ­¢ print(i) # è¾“å‡º 0 1 2 3 4 continue: ç»ˆæ­¢å½“å‰å¾ªç¯çš„æœ¬æ¬¡è¿­ä»£ï¼Œå¹¶è·³åˆ°ä¸‹ä¸€æ¬¡è¿­ä»£çš„å¼€å¤´ã€‚ for i in range(5): if i == 2: continue # å½“iç­‰äº2æ—¶ï¼Œè·³è¿‡æœ¬æ¬¡å¾ªç¯çš„å‰©ä½™éƒ¨åˆ†ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ print(i) # è¾“å‡º 0 1 3 4 pass: ç©ºæ“ä½œï¼Œä¸åšä»»ä½•äº‹æƒ…ã€‚å®ƒé€šå¸¸ç”¨ä½œå ä½ç¬¦ï¼Œå½“è¯­æ³•è¦æ±‚ä¸€ä¸ªè¯­å¥ä½†ä½ ä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œæ—¶ä½¿ç”¨ã€‚ def my_function(): pass # å ä½ç¬¦ï¼Œä»¥åå†å®ç°å‡½æ•°ä½“ if True: pass # å ä½ç¬¦ï¼Œä»¥åå†æ·»åŠ æ¡ä»¶é€»è¾‘ åˆ—è¡¨æ¨å¯¼å¼ï¼ˆlist comprehensionsï¼‰å’Œå­—å…¸æ¨å¯¼å¼ï¼ˆdictionary comprehensionsï¼‰çš„ä¼˜ç‚¹å’Œç”¨æ³•ã€‚\nä¼˜ç‚¹: ä»£ç ç®€æ´: ç”¨æ›´å°‘çš„ä»£ç å®ç°å¤æ‚é€»è¾‘ã€‚ æ•ˆç‡æ›´é«˜: é€šå¸¸æ¯”ä¼ ç»Ÿçš„forå¾ªç¯æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬åœ¨Cè¯­è¨€å±‚é¢å®ç°äº†ä¼˜åŒ–ã€‚ å¯è¯»æ€§å¼º: åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¨å¯¼å¼èƒ½è®©ä»£ç æ›´æ˜“äºç†è§£ã€‚ åˆ—è¡¨æ¨å¯¼å¼: å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œæ ¹æ®ç°æœ‰åˆ—è¡¨æˆ–å…¶ä»–å¯è¿­ä»£å¯¹è±¡ç”Ÿæˆã€‚ ç”¨æ³•: [expression for item in iterable if condition] # ç”Ÿæˆ1åˆ°5çš„å¹³æ–¹æ•°åˆ—è¡¨ squares = [x**2 for x in range(1, 6)] print(squares) # [1, 4, 9, 16, 25] # è¿‡æ»¤å¶æ•°å¹¶åŠ å€ even_doubled = [x * 2 for x in range(10) if x % 2 == 0] print(even_doubled) # [0, 4, 8, 12, 16] å­—å…¸æ¨å¯¼å¼: å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ã€‚ ç”¨æ³•: {key_expression: value_expression for item in iterable if condition} # åˆ›å»ºä¸€ä¸ªå­—å…¸ï¼Œé”®æ˜¯æ•°å­—ï¼Œå€¼æ˜¯å…¶å¹³æ–¹ squares_dict = {x: x**2 for x in range(1, 6)} print(squares_dict) # {1: 1, 2: 4, 3: 9, 4: 16, 5: 25} # ä»åˆ—è¡¨ä¸­åˆ›å»ºå­—å…¸ï¼Œç­›é€‰å‡ºé•¿åº¦å¤§äº3çš„å•è¯ words = [\u0026#34;apple\u0026#34;, \u0026#34;banana\u0026#34;, \u0026#34;cat\u0026#34;, \u0026#34;dog\u0026#34;] word_lengths = {word: len(word) for word in words if len(word) \u0026gt; 3} print(word_lengths) # {\u0026#39;apple\u0026#39;: 5, \u0026#39;banana\u0026#39;: 6} å‡½æ•°\r#\rå¦‚ä½•å®šä¹‰å‡½æ•°ï¼Ÿå‡½æ•°å‚æ•°çš„ç±»å‹ï¼ˆä½ç½®å‚æ•°ã€å…³é”®å­—å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ï¼‰ï¼Ÿ\nå®šä¹‰å‡½æ•°: ä½¿ç”¨defå…³é”®å­—ã€‚ def greet(name): \u0026#34;\u0026#34;\u0026#34;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é—®å€™å‡½æ•°\u0026#34;\u0026#34;\u0026#34; print(f\u0026#34;Hello, {name}!\u0026#34;) greet(\u0026#34;Alice\u0026#34;) å‡½æ•°å‚æ•°ç±»å‹: ä½ç½®å‚æ•°ï¼ˆPositional Argumentsï¼‰: æŒ‰ç…§å‚æ•°çš„é¡ºåºä¼ å…¥ã€‚ def add(a, b): return a + b print(add(10, 20)) # a=10, b=20 å…³é”®å­—å‚æ•°ï¼ˆKeyword Argumentsï¼‰: é€šè¿‡å‚æ•°åæ¥æŒ‡å®šï¼Œä¸ä¾èµ–ä½ç½®ã€‚ def show_info(name, age): print(f\u0026#34;Name: {name}, Age: {age}\u0026#34;) show_info(age=30, name=\u0026#34;Bob\u0026#34;) # é¡ºåºæ— å…³ é»˜è®¤å‚æ•°ï¼ˆDefault Argumentsï¼‰: å®šä¹‰æ—¶èµ‹æœ‰é»˜è®¤å€¼çš„å‚æ•°ã€‚å¦‚æœè°ƒç”¨æ—¶æ²¡æœ‰ä¼ å…¥ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ã€‚é»˜è®¤å‚æ•°å¿…é¡»æ”¾åœ¨éé»˜è®¤å‚æ•°çš„åé¢ã€‚ def say_hello(name=\u0026#34;World\u0026#34;): print(f\u0026#34;Hello, {name}!\u0026#34;) say_hello() # Hello, World! say_hello(\u0026#34;Python\u0026#34;) # Hello, Python! å¯å˜ä½ç½®å‚æ•°ï¼ˆArbitrary Positional Argumentsï¼‰: ä½¿ç”¨*argsã€‚å®ƒä¼šå°†ä¼ å…¥çš„æ‰€æœ‰ä½ç½®å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå…ƒç»„ä¸­ã€‚ def sum_all(*numbers): total = 0 for num in numbers: total += num return total print(sum_all(1, 2, 3, 4)) # 10 å¯å˜å…³é”®å­—å‚æ•°ï¼ˆArbitrary Keyword Argumentsï¼‰: ä½¿ç”¨**kwargsã€‚å®ƒä¼šå°†ä¼ å…¥çš„æ‰€æœ‰å…³é”®å­—å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå­—å…¸ä¸­ã€‚ def show_details(**details): for key, value in details.items(): print(f\u0026#34;{key}: {value}\u0026#34;) show_details(name=\u0026#34;Alice\u0026#34;, age=25, city=\u0026#34;New York\u0026#34;) # name: Alice # age: 25 # city: New York å‚æ•°é¡ºåº: å®šä¹‰æ—¶ï¼Œé€šå¸¸çš„é¡ºåºæ˜¯ï¼šä½ç½®å‚æ•° -\u0026gt; é»˜è®¤å‚æ•° -\u0026gt; *args -\u0026gt; å…³é”®å­—å‚æ•° -\u0026gt; **kwargsã€‚ *argså’Œ**kwargsçš„ç”¨æ³•å’ŒåŒºåˆ«ã€‚\n*args: ç”¨æ³•: ç”¨äºæ¥æ”¶ä»»æ„æ•°é‡çš„ä½ç½®å‚æ•°ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œ*argså‰çš„æ˜Ÿå·è¡¨ç¤ºå°†è¿™äº›å‚æ•°æ‰“åŒ…æˆä¸€ä¸ªå…ƒç»„ï¼ˆtupleï¼‰ã€‚ åœºæ™¯: å½“ä½ ä¸ç¡®å®šå‡½æ•°ä¼šè¢«ä¼ å…¥å¤šå°‘ä¸ªä½ç½®å‚æ•°æ—¶ã€‚ ä¾‹å­: def print_items(*items): for item in items: print(item) print_items(1, \u0026#34;hello\u0026#34;, True) **kwargs: ç”¨æ³•: ç”¨äºæ¥æ”¶ä»»æ„æ•°é‡çš„å…³é”®å­—å‚æ•°ã€‚åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œ**kwargså‰çš„åŒæ˜Ÿå·è¡¨ç¤ºå°†è¿™äº›å‚æ•°æ‰“åŒ…æˆä¸€ä¸ªå­—å…¸ï¼ˆdictionaryï¼‰ã€‚ åœºæ™¯: å½“ä½ ä¸ç¡®å®šå‡½æ•°ä¼šè¢«ä¼ å…¥å¤šå°‘ä¸ªå…³é”®å­—å‚æ•°ï¼Œæˆ–è€…æƒ³åœ¨å‡½æ•°å†…éƒ¨ä»¥é”®å€¼å¯¹çš„å½¢å¼è®¿é—®è¿™äº›å‚æ•°æ—¶ã€‚ ä¾‹å­: def process_config(**config): for key, value in config.items(): print(f\u0026#34;{key} = {value}\u0026#34;) process_config(host=\u0026#34;localhost\u0026#34;, port=8080, debug=True) åŒºåˆ«æ€»ç»“: *argsæ”¶é›†ä½ç½®å‚æ•°ï¼Œè¿”å›å…ƒç»„ã€‚ **kwargsæ”¶é›†å…³é”®å­—å‚æ•°ï¼Œè¿”å›å­—å…¸ã€‚ ä»€ä¹ˆæ˜¯lambdaå‡½æ•°ï¼Ÿå®ƒæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ\nlambdaå‡½æ•°ï¼ˆåŒ¿åå‡½æ•°ï¼‰: æ˜¯ä¸€ç§å°å‹ã€åŒ¿åã€å•è¡Œçš„å‡½æ•°ã€‚ å®ƒæ²¡æœ‰å‡½æ•°åï¼Œå› æ­¤è¢«ç§°ä¸ºâ€œåŒ¿åâ€ã€‚ åªèƒ½åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼çš„è®¡ç®—ç»“æœå°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ã€‚ è¯­æ³•: lambda arguments: expression åº”ç”¨åœºæ™¯: ä½œä¸ºé«˜é˜¶å‡½æ•°çš„å‚æ•°: lambdaå‡½æ•°å¸¸ç”¨äºé‚£äº›éœ€è¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼ˆé«˜é˜¶å‡½æ•°ï¼‰ï¼Œä¾‹å¦‚map(), filter(), sorted()çš„keyå‚æ•°ã€‚ # sorted() ä½¿ç”¨ lambda ä½œä¸º key data = [{\u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;age\u0026#39;: 30}, {\u0026#39;name\u0026#39;: \u0026#39;Bob\u0026#39;, \u0026#39;age\u0026#39;: 25}] sorted_data = sorted(data, key=lambda x: x[\u0026#39;age\u0026#39;]) print(sorted_data) # æŒ‰ageæ’åº # filter() ä½¿ç”¨ lambda numbers = [1, 2, 3, 4, 5, 6] even_numbers = list(filter(lambda x: x % 2 == 0, numbers)) print(even_numbers) # [2, 4, 6] ç®€å•çš„å›è°ƒå‡½æ•°: éœ€è¦ä¸€ä¸ªç®€å•çš„ã€ä¸€æ¬¡æ€§çš„å‡½æ•°æ¥å¤„ç†æŸä¸ªäº‹ä»¶æˆ–é€»è¾‘æ—¶ã€‚ ç®€æ´æ€§: å½“å‡½æ•°é€»è¾‘éå¸¸ç®€å•ï¼Œå¹¶ä¸”åªä½¿ç”¨ä¸€æ¬¡æ—¶ï¼Œä½¿ç”¨lambdaå¯ä»¥ä½¿ä»£ç æ›´ç®€æ´ã€‚ å±€é™æ€§: åªèƒ½æ˜¯å•è¡Œè¡¨è¾¾å¼ï¼Œä¸èƒ½åŒ…å«å¤æ‚çš„è¯­å¥ï¼ˆå¦‚if/elseåˆ†æ”¯ã€å¾ªç¯ç­‰ï¼‰ã€‚ ä½œç”¨åŸŸï¼ˆLEGBåŸåˆ™ï¼šLocal, Enclosing, Global, Built-inï¼‰çš„ç†è§£ã€‚ Pythonè§£æå˜é‡åæ—¶ï¼Œä¼šæŒ‰ç…§ç‰¹å®šçš„é¡ºåºæŸ¥æ‰¾å˜é‡ï¼Œè¿™ä¸ªé¡ºåºå°±æ˜¯LEGBåŸåˆ™ï¼š\nL (Local): å½“å‰å‡½æ•°å†…éƒ¨çš„ä½œç”¨åŸŸã€‚åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼ˆå½¢å‚ã€å±€éƒ¨å˜é‡ï¼‰ã€‚ def my_function(): x = 10 # xæ˜¯å±€éƒ¨å˜é‡ print(x) my_function() # print(x) # è¿™ä¼šæŠ¥é”™ï¼Œå› ä¸ºxä¸åœ¨å…¨å±€ä½œç”¨åŸŸ E (Enclosing): å¤–éƒ¨åµŒå¥—å‡½æ•°çš„ä½œç”¨åŸŸã€‚æŒ‡åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰äº†å¦ä¸€ä¸ªå‡½æ•°ï¼ˆåµŒå¥—å‡½æ•°ï¼‰ï¼Œå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„éå…¨å±€å˜é‡ã€‚ def outer_function(): x = 20 # xæ˜¯å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ def inner_function(): print(x) # inner_functionè®¿é—®outer_functionçš„x inner_function() outer_function() # è¾“å‡º 20 G (Global): å…¨å±€ä½œç”¨åŸŸã€‚æ¨¡å—çº§åˆ«å®šä¹‰çš„å˜é‡ï¼Œåœ¨æ•´ä¸ªæ–‡ä»¶ä¸­éƒ½å¯ä»¥è®¿é—®ã€‚ y = 30 # yæ˜¯å…¨å±€å˜é‡ def another_function(): print(y) another_function() # è¾“å‡º 30 B (Built-in): å†…ç½®ä½œç”¨åŸŸã€‚Pythonå†…ç½®çš„å‡½æ•°å’Œå¸¸é‡ï¼Œå¦‚print(), len(), True, Noneç­‰ã€‚å®ƒä»¬å§‹ç»ˆå¯ç”¨ã€‚ print(len(\u0026#34;hello\u0026#34;)) # lenæ˜¯å†…ç½®å‡½æ•° æŸ¥æ‰¾é¡ºåº: å½“PythonæŸ¥æ‰¾ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¼šé¦–å…ˆåœ¨Localä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™åœ¨Enclosingä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œç„¶åæ˜¯Globalä½œç”¨åŸŸï¼Œæœ€åæ˜¯Built-inä½œç”¨åŸŸã€‚å¦‚æœæ‰€æœ‰ä½œç”¨åŸŸéƒ½æ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŠ›å‡ºNameErrorã€‚\né—­åŒ…ï¼ˆclosuresï¼‰å’Œè£…é¥°å™¨ï¼ˆdecoratorsï¼‰çš„åŸç†å’Œåº”ç”¨ã€‚\né—­åŒ…ï¼ˆClosuresï¼‰: åŸç†: å½“ä¸€ä¸ªå†…éƒ¨å‡½æ•°å¼•ç”¨äº†å…¶å¤–éƒ¨ï¼ˆEnclosingï¼‰å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼ˆè€Œä¸æ˜¯å…¨å±€å˜é‡ï¼‰ï¼Œå¹¶ä¸”å¤–éƒ¨å‡½æ•°è¿”å›äº†è¿™ä¸ªå†…éƒ¨å‡½æ•°æ—¶ï¼Œè¿™ä¸ªå†…éƒ¨å‡½æ•°å°±å½¢æˆäº†é—­åŒ…ã€‚å³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œå…¶å†…éƒ¨å‡½æ•°ä»ç„¶èƒ½â€œè®°ä½â€å¹¶è®¿é—®å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚ åº”ç”¨: æ•°æ®éšè—/å°è£…: ä¿æŒæŸä¸ªçŠ¶æ€ï¼Œä¾‹å¦‚å·¥å‚å‡½æ•°ã€‚ å»¶è¿Ÿè®¡ç®—: åœ¨éœ€è¦æ—¶æ‰æ‰§è¡Œè®¡ç®—ã€‚ å‡½æ•°å·¥å‚: ç”Ÿæˆä¸€ç³»åˆ—è¡Œä¸ºç›¸ä¼¼ä½†å‚æ•°ä¸åŒçš„å‡½æ•°ã€‚ def make_multiplier(x): def multiplier(n): return x * n # å†…éƒ¨å‡½æ•°å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„x return multiplier # è¿”å›å†…éƒ¨å‡½æ•° times_5 = make_multiplier(5) times_3 = make_multiplier(3) print(times_5(10)) # 50 (5 * 10) print(times_3(10)) # 30 (3 * 10) è£…é¥°å™¨ï¼ˆDecoratorsï¼‰: åŸç†: è£…é¥°å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚å®ƒç”¨äºåœ¨ä¸ä¿®æ”¹åŸå‡½æ•°ä»£ç çš„æƒ…å†µä¸‹ï¼Œç»™åŸå‡½æ•°æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚æ—¥å¿—ã€æƒé™æ ¡éªŒã€æ€§èƒ½è®¡æ—¶ç­‰ï¼‰ã€‚Pythonä½¿ç”¨@è¯­æ³•ç³–æ¥åº”ç”¨è£…é¥°å™¨ã€‚ åº”ç”¨: æ—¥å¿—è®°å½•: åœ¨å‡½æ•°æ‰§è¡Œå‰åè®°å½•æ—¥å¿—ã€‚ æƒé™éªŒè¯: æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æŸä¸ªå‡½æ•°ã€‚ æ€§èƒ½åˆ†æ: æµ‹é‡å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚ ç¼“å­˜: ç¼“å­˜å‡½æ•°ç»“æœä»¥æé«˜æ€§èƒ½ã€‚ è·¯ç”±: Flask/Djangoç­‰Webæ¡†æ¶ä¸­ç”¨äºå®šä¹‰URLè·¯ç”±ã€‚ def log_function_call(func): def wrapper(*args, **kwargs): print(f\u0026#34;Calling function: {func.__name__} with args: {args}, kwargs: {kwargs}\u0026#34;) result = func(*args, **kwargs) print(f\u0026#34;Function {func.__name__} finished. Result: {result}\u0026#34;) return result return wrapper @log_function_call # ç­‰åŒäº my_add = log_function_call(my_add) def my_add(a, b): return a + b print(my_add(1, 2)) # è¾“å‡º: # Calling function: my_add with args: (1, 2), kwargs: {} # Function my_add finished. Result: 3 # 3 é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰\r#\rPythonä¸­é¢å‘å¯¹è±¡çš„åŸºæœ¬æ¦‚å¿µï¼šç±»ã€å¯¹è±¡ã€å±æ€§ã€æ–¹æ³•ã€‚\nç±»ï¼ˆClassï¼‰: å®šä¹‰äº†ä¸€ç»„å±æ€§ï¼ˆæ•°æ®ï¼‰å’Œæ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰çš„è“å›¾æˆ–æ¨¡æ¿ã€‚ å®ƒæè¿°äº†å°†è¦åˆ›å»ºçš„å¯¹è±¡çš„å…±åŒç‰¹å¾ã€‚ ä¾‹å¦‚ï¼šCarç±»å¯ä»¥å®šä¹‰è½¦çš„é¢œè‰²ã€å“ç‰Œï¼ˆå±æ€§ï¼‰å’Œå¯åŠ¨ã€åœæ­¢ï¼ˆæ–¹æ³•ï¼‰ã€‚ å¯¹è±¡ï¼ˆObjectï¼‰/å®ä¾‹ï¼ˆInstanceï¼‰: æ ¹æ®ç±»åˆ›å»ºçš„å…·ä½“å®ä½“ã€‚ æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å±æ€§å€¼ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼šmy_car = Car(\u0026quot;red\u0026quot;, \u0026quot;Tesla\u0026quot;)ï¼Œmy_carå°±æ˜¯ä¸€ä¸ªCarç±»çš„å¯¹è±¡ã€‚ å±æ€§ï¼ˆAttributeï¼‰: ç±»ä¸­å®šä¹‰çš„æ•°æ®æˆå‘˜ï¼Œè¡¨ç¤ºå¯¹è±¡çš„ç‰¹å¾æˆ–çŠ¶æ€ã€‚ å¯ä»¥æ˜¯ç±»å±æ€§ï¼ˆæ‰€æœ‰å®ä¾‹å…±äº«ï¼‰æˆ–å®ä¾‹å±æ€§ï¼ˆæ¯ä¸ªå®ä¾‹ç‹¬æœ‰ï¼‰ã€‚ ä¾‹å¦‚ï¼šCarç±»ä¸­çš„color, brandã€‚ æ–¹æ³•ï¼ˆMethodï¼‰: ç±»ä¸­å®šä¹‰çš„å‡½æ•°ï¼Œè¡¨ç¤ºå¯¹è±¡çš„è¡Œä¸ºæˆ–æ“ä½œã€‚ æ–¹æ³•å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªå‚æ•°selfï¼Œå®ƒæŒ‡å‘å½“å‰å¯¹è±¡å®ä¾‹ã€‚ ä¾‹å¦‚ï¼šCarç±»ä¸­çš„start(), stop()ã€‚ class Car: # ç±»å±æ€§ (æ‰€æœ‰å®ä¾‹å…±äº«) wheel_count = 4 def __init__(self, color, brand): # å®ä¾‹å±æ€§ (æ¯ä¸ªå®ä¾‹ç‹¬æœ‰) self.color = color self.brand = brand self.is_running = False # æ–¹æ³• def start(self): if not self.is_running: print(f\u0026#34;The {self.color} {self.brand} is starting.\u0026#34;) self.is_running = True else: print(\u0026#34;The car is already running.\u0026#34;) def stop(self): if self.is_running: print(f\u0026#34;The {self.color} {self.brand} is stopping.\u0026#34;) self.is_running = False else: print(\u0026#34;The car is already stopped.\u0026#34;) my_car = Car(\u0026#34;blue\u0026#34;, \u0026#34;BMW\u0026#34;) # åˆ›å»ºå¯¹è±¡/å®ä¾‹ your_car = Car(\u0026#34;red\u0026#34;, \u0026#34;Mercedes\u0026#34;) print(my_car.color) # è®¿é—®å±æ€§ my_car.start() # è°ƒç”¨æ–¹æ³• your_car.stop() print(Car.wheel_count) # è®¿é—®ç±»å±æ€§ ç»§æ‰¿ã€å¤šæ€å’Œå°è£…çš„å®ç°å’Œç†è§£ã€‚ è¿™ä¸‰è€…æ˜¯OOPçš„ä¸‰å¤§ç‰¹æ€§ã€‚\nç»§æ‰¿ï¼ˆInheritanceï¼‰: å®šä¹‰: å…è®¸ä¸€ä¸ªç±»ï¼ˆå­ç±»/æ´¾ç”Ÿç±»ï¼‰ç»§æ‰¿å¦ä¸€ä¸ªç±»ï¼ˆçˆ¶ç±»/åŸºç±»ï¼‰çš„å±æ€§å’Œæ–¹æ³•ã€‚å­ç±»å¯ä»¥é‡ç”¨çˆ¶ç±»çš„ä»£ç ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ æ–°çš„åŠŸèƒ½æˆ–ä¿®æ”¹æ—§åŠŸèƒ½ã€‚ å®ç°: å­ç±»å®šä¹‰æ—¶ï¼Œåœ¨æ‹¬å·ä¸­æŒ‡å®šçˆ¶ç±»ã€‚ ä¼˜ç‚¹: ä»£ç é‡ç”¨æ€§ï¼Œå‡å°‘å†—ä½™ï¼›å»ºç«‹æ¸…æ™°çš„å±‚æ¬¡ç»“æ„ã€‚ class Vehicle: # çˆ¶ç±» def __init__(self, brand): self.brand = brand def accelerate(self): print(f\u0026#34;{self.brand} is accelerating.\u0026#34;) class ElectricCar(Vehicle): # å­ç±»ç»§æ‰¿Vehicle def __init__(self, brand, battery_life): super().__init__(brand) # è°ƒç”¨çˆ¶ç±»çš„__init__ self.battery_life = battery_life def charge(self): # å­ç±»ç‰¹æœ‰çš„æ–¹æ³• print(f\u0026#34;Charging the {self.brand} electric car.\u0026#34;) def accelerate(self): # å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³• print(f\u0026#34;The electric {self.brand} is quietly accelerating.\u0026#34;) tesla = ElectricCar(\u0026#34;Tesla\u0026#34;, \u0026#34;Long\u0026#34;) tesla.accelerate() # è°ƒç”¨å­ç±»é‡å†™çš„æ–¹æ³• tesla.charge() å¤šæ€ï¼ˆPolymorphismï¼‰: å®šä¹‰: æŒ‡ä¸åŒç±»çš„å¯¹è±¡ï¼Œå¯¹åŒä¸€æ¶ˆæ¯ï¼ˆæ–¹æ³•è°ƒç”¨ï¼‰åšå‡ºä¸åŒçš„å“åº”ã€‚å³åŒä¸€ä¸ªæ–¹æ³•åï¼Œåœ¨ä¸åŒå¯¹è±¡ä¸Šè¡¨ç°å‡ºä¸åŒçš„è¡Œä¸ºã€‚è¿™ä¾èµ–äºç»§æ‰¿å’Œæ–¹æ³•é‡å†™ï¼ˆOverrideï¼‰ã€‚ å®ç°: å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ï¼Œæˆ–è€…å¤šä¸ªä¸ç›¸å…³çš„ç±»å®ç°ç›¸åŒçš„æ–¹æ³•åã€‚ ä¼˜ç‚¹: å¢åŠ ä»£ç çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡è€Œæ— éœ€çŸ¥é“å…¶å…·ä½“ç±»å‹ã€‚ def make_it_accelerate(vehicle): vehicle.accelerate() # è¿™é‡Œçš„vehicleå¯ä»¥æ˜¯Vehicleå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ElectricCarå¯¹è±¡ car_obj = Vehicle(\u0026#34;Toyota\u0026#34;) electric_car_obj = ElectricCar(\u0026#34;Nissan\u0026#34;, \u0026#34;Short\u0026#34;) make_it_accelerate(car_obj) # Toyota is accelerating. make_it_accelerate(electric_car_obj) # The electric Nissan is quietly accelerating. å°è£…ï¼ˆEncapsulationï¼‰: å®šä¹‰: å°†æ•°æ®ï¼ˆå±æ€§ï¼‰å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ï¼ˆæ–¹æ³•ï¼‰æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½¢æˆä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒï¼ˆç±»ï¼‰ï¼Œå¹¶å¯¹å¤–éƒ¨éšè—å†…éƒ¨å®ç°çš„ç»†èŠ‚ã€‚åªæš´éœ²å¿…è¦çš„æ¥å£ç»™å¤–éƒ¨ï¼Œé˜²æ­¢å¤–éƒ¨ç›´æ¥è®¿é—®å’Œä¿®æ”¹å¯¹è±¡å†…éƒ¨çŠ¶æ€ï¼Œä»è€Œä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚ å®ç°: Pythonæ²¡æœ‰ä¸¥æ ¼çš„privateå…³é”®å­—ï¼Œä½†çº¦å®šä½¿ç”¨å•ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰è¡¨ç¤ºå—ä¿æŠ¤æˆå‘˜ï¼ŒåŒä¸‹åˆ’çº¿ï¼ˆ__ï¼‰è¡¨ç¤ºç§æœ‰æˆå‘˜ï¼ˆä¼šè¢«åç§°ä¿®é¥°/mangllingï¼‰ã€‚ é€šè¿‡æä¾›å…¬å…±çš„getterå’Œsetteræ–¹æ³•æ¥æ§åˆ¶å¯¹å±æ€§çš„è®¿é—®ã€‚ ä¼˜ç‚¹: æé«˜ä»£ç çš„å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œæ¨¡å—åŒ–ã€‚ class BankAccount: def __init__(self, balance): self.__balance = balance # åŒä¸‹åˆ’çº¿è¡¨ç¤º\u0026#34;ç§æœ‰\u0026#34;å±æ€§ (åç§°ä¿®é¥°) def deposit(self, amount): if amount \u0026gt; 0: self.__balance += amount print(f\u0026#34;Deposited {amount}. New balance: {self.__balance}\u0026#34;) else: print(\u0026#34;Deposit amount must be positive.\u0026#34;) def withdraw(self, amount): if 0 \u0026lt; amount \u0026lt;= self.__balance: self.__balance -= amount print(f\u0026#34;Withdrew {amount}. New balance: {self.__balance}\u0026#34;) else: print(\u0026#34;Invalid withdrawal amount or insufficient balance.\u0026#34;) def get_balance(self): # å…¬å…±æ–¹æ³•æ¥è®¿é—®ç§æœ‰å±æ€§ return self.__balance account = BankAccount(100) account.deposit(50) account.withdraw(20) # print(account.__balance) # è¿™ä¼šæŠ¥é”™ï¼šAttributeError: \u0026#39;BankAccount\u0026#39; object has no attribute \u0026#39;__balance\u0026#39; # Pythonå°†å…¶å†…éƒ¨åç§°ä¿®æ”¹ä¸º _BankAccount__balance print(account.get_balance()) # é€šè¿‡å…¬å…±æ–¹æ³•è®¿é—® ç±»æ–¹æ³•ï¼ˆ@classmethodï¼‰ã€é™æ€æ–¹æ³•ï¼ˆ@staticmethodï¼‰å’Œå®ä¾‹æ–¹æ³•çš„åŒºåˆ«ã€‚ è¿™ä¸‰ç§æ–¹æ³•åœ¨ç±»ä¸­çš„å®šä¹‰å’Œè°ƒç”¨æ–¹å¼ä¸åŒï¼Œä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°å’Œåº”ç”¨åœºæ™¯ã€‚\nå®ä¾‹æ–¹æ³•ï¼ˆInstance Methodï¼‰:\nå®šä¹‰: ä¸éœ€è¦ç‰¹æ®Šè£…é¥°å™¨ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°: å¿…é¡»æ˜¯selfï¼ŒæŒ‡å‘å®ä¾‹å¯¹è±¡æœ¬èº«ã€‚ è®¿é—®: å¯ä»¥è®¿é—®å’Œä¿®æ”¹å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è®¿é—®ç±»å±æ€§å’Œç±»æ–¹æ³•ã€‚ è°ƒç”¨: é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨ã€‚ åœºæ™¯: æ“ä½œä¸ç‰¹å®šå®ä¾‹çŠ¶æ€ç›¸å…³çš„æ•°æ®æˆ–è¡Œä¸ºã€‚ class MyClass: def instance_method(self): print(f\u0026#34;è¿™æ˜¯å®ä¾‹æ–¹æ³•ï¼Œå¯ä»¥è®¿é—®å®ä¾‹ï¼š{self}\u0026#34;) # print(self.instance_attr) # å‡è®¾æœ‰å®ä¾‹å±æ€§ ç±»æ–¹æ³•ï¼ˆClass Methodï¼‰:\nå®šä¹‰: ä½¿ç”¨@classmethodè£…é¥°å™¨ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°: å¿…é¡»æ˜¯clsï¼ŒæŒ‡å‘ç±»æœ¬èº«ã€‚ è®¿é—®: å¯ä»¥è®¿é—®å’Œä¿®æ”¹ç±»å±æ€§ï¼Œå¯ä»¥è°ƒç”¨å…¶ä»–ç±»æ–¹æ³•ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®å®ä¾‹å±æ€§æˆ–å®ä¾‹æ–¹æ³•ï¼ˆé™¤éé€šè¿‡cls()åˆ›å»ºæ–°å®ä¾‹ï¼‰ã€‚ è°ƒç”¨: å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨ï¼ˆä½†ä¸æ¨èï¼Œå› ä¸ºæ²¡æœ‰å¿…è¦ï¼‰ã€‚ åœºæ™¯: æ“ä½œä¸ç±»çŠ¶æ€ç›¸å…³çš„æ•°æ®æˆ–è¡Œä¸ºï¼ˆå¦‚ä¿®æ”¹ç±»å±æ€§ï¼‰ã€‚ åˆ›å»ºå·¥å‚æ–¹æ³•ï¼Œç”¨äºæ ¹æ®ä¸åŒçš„å‚æ•°åˆ›å»ºç±»çš„ä¸åŒå®ä¾‹ã€‚ class MyClass: class_variable = 0 @classmethod def class_method(cls, value): print(f\u0026#34;è¿™æ˜¯ç±»æ–¹æ³•ï¼Œå¯ä»¥è®¿é—®ç±»ï¼š{cls}\u0026#34;) cls.class_variable = value # ä¿®æ”¹ç±»å±æ€§ print(f\u0026#34;ç±»å˜é‡æ›´æ–°ä¸ºï¼š{cls.class_variable}\u0026#34;) MyClass.class_method(10) # é€šè¿‡ç±»åè°ƒç”¨ print(MyClass.class_variable) # 10 é™æ€æ–¹æ³•ï¼ˆStatic Methodï¼‰:\nå®šä¹‰: ä½¿ç”¨@staticmethodè£…é¥°å™¨ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°: ä¸éœ€è¦selfæˆ–clså‚æ•°ã€‚ è®¿é—®: æ—¢ä¸èƒ½è®¿é—®å®ä¾‹å±æ€§ï¼Œä¹Ÿä¸èƒ½è®¿é—®ç±»å±æ€§ï¼ˆé™¤éé€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼Œä½†è¿™ä¸æ™®é€šå‡½æ•°æ— å¼‚ï¼‰ã€‚å®ƒä¸ç±»æˆ–å®ä¾‹çš„çŠ¶æ€æ— å…³ã€‚ è°ƒç”¨: å¯ä»¥é€šè¿‡ç±»åè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡è°ƒç”¨ã€‚ åœºæ™¯: å½“ä¸€ä¸ªæ–¹æ³•é€»è¾‘ä¸Šå±äºç±»ï¼Œä½†åˆä¸éœ€è¦è®¿é—®ç±»æˆ–å®ä¾‹çš„ä»»ä½•å±æ€§æ—¶ï¼ˆä¾‹å¦‚ï¼Œå·¥å…·å‡½æ•°ã€è¾…åŠ©å‡½æ•°ï¼‰ã€‚ å°†ç±»ç›¸å…³çš„çº¯å‡½æ•°æ”¾åœ¨ç±»ä¸­ï¼Œæé«˜ä»£ç çš„ç»„ç»‡æ€§ã€‚ class MyClass: @staticmethod def static_method(x, y): print(\u0026#34;è¿™æ˜¯é™æ€æ–¹æ³•ï¼Œä¸å®ä¾‹å’Œç±»æ— å…³\u0026#34;) return x + y print(MyClass.static_method(5, 3)) # é€šè¿‡ç±»åè°ƒç”¨ obj = MyClass() print(obj.static_method(2, 4)) # é€šè¿‡å®ä¾‹è°ƒç”¨ (ä¸æ¨è) æ€»ç»“è¡¨æ ¼:\nç‰¹æ€§ å®ä¾‹æ–¹æ³• ç±»æ–¹æ³• é™æ€æ–¹æ³• ç¬¬ä¸€ä¸ªå‚æ•° self (å®ä¾‹) cls (ç±») æ—  (self æˆ– cls) è®¿é—®å®ä¾‹å±æ€§ æ˜¯ å¦ (ç›´æ¥è®¿é—®) å¦ è®¿é—®ç±»å±æ€§ æ˜¯ æ˜¯ å¦ (ç›´æ¥è®¿é—®ç±»å) è°ƒç”¨æ–¹å¼ å®ä¾‹å¯¹è±¡è°ƒç”¨ ç±»åæˆ–å®ä¾‹å¯¹è±¡è°ƒç”¨ ç±»åæˆ–å®ä¾‹å¯¹è±¡è°ƒç”¨ å…¸å‹åœºæ™¯ æ“ä½œå®ä¾‹æ•°æ® åˆ›å»ºå·¥å‚æ–¹æ³•ï¼Œæ“ä½œç±»æ•°æ® å·¥å…·å‡½æ•°ï¼Œä¸ç±»æˆ–å®ä¾‹æ— å…³ ç‰¹æ®Šæ–¹æ³•ï¼ˆdunder methodsï¼Œå¦‚__init__, __str__, __len__ç­‰ï¼‰çš„ç”¨é€”ã€‚\nç‰¹æ®Šæ–¹æ³•ï¼ˆSpecial Methodsï¼‰ï¼Œä¹Ÿç§°ä¸ºé­”æœ¯æ–¹æ³•ï¼ˆMagic Methodsï¼‰æˆ–åŒä¸‹åˆ’çº¿æ–¹æ³•ï¼ˆDunder Methodsï¼‰ï¼Œæ˜¯Pythonä¸­ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„æ–¹æ³•ï¼ˆä¾‹å¦‚__method_name__ï¼‰ã€‚å®ƒä»¬æ˜¯Pythonå†…éƒ¨å®ç°çš„æœºåˆ¶ï¼Œå…è®¸æˆ‘ä»¬å®šä¹‰è‡ªå®šä¹‰ç±»å¦‚ä½•å“åº”å†…ç½®æ“ä½œæˆ–å‡½æ•°ï¼ˆå¦‚ç®—æœ¯è¿ç®—ã€è¿­ä»£ã€å±æ€§è®¿é—®ã€å­—ç¬¦ä¸²è¡¨ç¤ºç­‰ï¼‰ã€‚ ç”¨é€”: è‡ªå®šä¹‰è¡Œä¸º: è®©è‡ªå®šä¹‰ç±»çš„å¯¹è±¡èƒ½å¤Ÿåƒå†…ç½®ç±»å‹ä¸€æ ·ä½¿ç”¨ï¼Œä¾‹å¦‚æ”¯æŒ+è¿ç®—ç¬¦ã€len()å‡½æ•°ã€è¿­ä»£ç­‰ã€‚ å®ç°åè®®: å®ç°ç‰¹å®šçš„â€œåè®®â€ï¼ˆå¦‚è¿­ä»£å™¨åè®®ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨åè®®ï¼‰ï¼Œä»è€Œè®©ç±»çš„å¯¹è±¡èƒ½å¤Ÿä¸forå¾ªç¯ã€withè¯­å¥ç­‰Pythonç‰¹æ€§ååŒå·¥ä½œã€‚ æ›´æ¸…æ™°çš„ä»£ç : é€šè¿‡é‡è½½æ“ä½œç¬¦ï¼Œä½¿ä»£ç æ›´å…·è¡¨ç°åŠ›å’Œå¯è¯»æ€§ã€‚ å¸¸è§ç‰¹æ®Šæ–¹æ³•ç¤ºä¾‹:\n__init__(self, ...): æ„é€ æ–¹æ³•ã€‚ ç”¨é€”: åœ¨åˆ›å»ºç±»çš„æ–°å®ä¾‹æ—¶è¢«è‡ªåŠ¨è°ƒç”¨ã€‚ç”¨äºåˆå§‹åŒ–å®ä¾‹çš„å±æ€§ã€‚ class Point: def __init__(self, x, y): self.x = x self.y = y p = Point(1, 2) # è°ƒç”¨ __init__ __str__(self): å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆç”¨æˆ·å‹å¥½ï¼‰ã€‚ ç”¨é€”: å½“ä½¿ç”¨str()å‡½æ•°æˆ–print()å‡½æ•°å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶è¢«è°ƒç”¨ã€‚å®ƒåº”è¯¥è¿”å›ä¸€ä¸ªç”¨æˆ·å¯è¯»çš„ã€å¯¹è±¡çš„â€œéæ­£å¼â€å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ class Point: def __init__(self, x, y): self.x = x self.y = y def __str__(self): return f\u0026#34;Point({self.x}, {self.y})\u0026#34; p = Point(1, 2) print(p) # Point(1, 2) __repr__(self): å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆå¼€å‘è€…å‹å¥½ï¼‰ã€‚ ç”¨é€”: å½“ä½¿ç”¨repr()å‡½æ•°æˆ–åœ¨äº¤äº’å¼è§£é‡Šå™¨ä¸­ç›´æ¥è¾“å…¥å¯¹è±¡æ—¶è¢«è°ƒç”¨ã€‚å®ƒåº”è¯¥è¿”å›ä¸€ä¸ªæ˜ç¡®çš„ã€å¯é‡ç°å¯¹è±¡çš„â€œæ­£å¼â€å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œé€šå¸¸æ˜¯èƒ½å¤Ÿé‡æ–°åˆ›å»ºè¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²å½¢å¼ã€‚å¦‚æœ__str__æœªå®šä¹‰ï¼Œprint()ä¼šå›é€€åˆ°__repr__ã€‚ class Point: def __init__(self, x, y): self.x = x self.y = y def __repr__(self): return f\u0026#34;Point({self.x}, {self.y})\u0026#34; # å¯ä»¥é‡æ–°åˆ›å»ºå¯¹è±¡çš„å­—ç¬¦ä¸² p = Point(1, 2) print(repr(p)) # Point(1, 2) __len__(self): é•¿åº¦ã€‚ ç”¨é€”: å½“ä½¿ç”¨len()å‡½æ•°è·å–å¯¹è±¡çš„é•¿åº¦æ—¶è¢«è°ƒç”¨ã€‚å¿…é¡»è¿”å›ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚ class MyList: def __init__(self, data): self.data = data def __len__(self): return len(self.data) my_list = MyList([1, 2, 3, 4, 5]) print(len(my_list)) # 5 __add__(self, other): åŠ æ³•è¿ç®—ç¬¦ï¼ˆ+ï¼‰ã€‚ ç”¨é€”: å®šä¹‰å½“å¯¹è±¡ä½¿ç”¨+è¿ç®—ç¬¦æ—¶çš„è¡Œä¸ºã€‚ class Vector: def __init__(self, x, y): self.x = x self.y = y def __add__(self, other): return Vector(self.x + other.x, self.y + other.y) def __repr__(self): return f\u0026#34;Vector({self.x}, {self.y})\u0026#34; v1 = Vector(1, 2) v2 = Vector(3, 4) v3 = v1 + v2 print(v3) # Vector(4, 6) __getitem__(self, key): ç´¢å¼•è®¿é—®ï¼ˆ[]ï¼‰ã€‚ ç”¨é€”: å®šä¹‰å½“å¯¹è±¡ä½¿ç”¨ç´¢å¼•ï¼ˆå¦‚åˆ—è¡¨æˆ–å­—å…¸ï¼‰è®¿é—®å…ƒç´ æ—¶çš„è¡Œä¸ºã€‚ class MyContainer: def __init__(self, data): self.data = data def __getitem__(self, index): return self.data[index] mc = MyContainer([10, 20, 30]) print(mc[0]) # 10 print(mc[1:3]) # [20, 30] __iter__(self)å’Œ__next__(self): è¿­ä»£å™¨åè®®ã€‚ ç”¨é€”: å®ç°è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥ä½¿å¯¹è±¡æˆä¸ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œä»è€Œå¯ä»¥ä½¿ç”¨forå¾ªç¯è¿›è¡Œè¿­ä»£ã€‚ __iter__è¿”å›è¿­ä»£å™¨å¯¹è±¡æœ¬èº«ï¼ˆé€šå¸¸æ˜¯selfï¼‰ã€‚ __next__è¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šå…ƒç´ åˆ™æŠ›å‡ºStopIterationã€‚ class MyRange: def __init__(self, start, end): self.current = start self.end = end def __iter__(self): return self def __next__(self): if self.current \u0026lt; self.end: num = self.current self.current += 1 return num else: raise StopIteration for i in MyRange(1, 4): print(i) # 1, 2, 3 è¿˜æœ‰å¾ˆå¤šå…¶ä»–ç‰¹æ®Šæ–¹æ³•ï¼Œä¾‹å¦‚ç”¨äºæ¯”è¾ƒï¼ˆ__eq__, __lt__ï¼‰ã€å¸ƒå°”å€¼åˆ¤æ–­ï¼ˆ__bool__ï¼‰ã€å±æ€§è®¿é—®ï¼ˆ__getattr__, __setattr__ï¼‰ç­‰ã€‚\næ¨¡å—ä¸åŒ…\r#\rimportè¯­å¥çš„å·¥ä½œåŸç†ã€‚ å½“Pythonè§£é‡Šå™¨é‡åˆ°importè¯­å¥æ—¶ï¼Œå®ƒä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\næœç´¢æ¨¡å—: è§£é‡Šå™¨ä¼šæŒ‰ç…§ç‰¹å®šçš„è·¯å¾„ï¼ˆç”±sys.pathå®šä¹‰ï¼‰æœç´¢æ¨¡å—æ–‡ä»¶ã€‚è¿™äº›è·¯å¾„åŒ…æ‹¬ï¼š å½“å‰ç›®å½•ã€‚ PYTHONPATHç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•ã€‚ Pythonå®‰è£…ç›®å½•ä¸‹çš„æ ‡å‡†åº“ç›®å½•ã€‚ ç¬¬ä¸‰æ–¹åº“çš„site-packagesç›®å½•ã€‚ ç¼–è¯‘ï¼ˆå¦‚æœéœ€è¦ï¼‰: å¦‚æœæ‰¾åˆ°çš„æ˜¯.pyæ–‡ä»¶ï¼ŒPythonä¼šæ£€æŸ¥å…¶å¯¹åº”çš„.pycï¼ˆç¼–è¯‘åçš„å­—èŠ‚ç ï¼‰æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”æ˜¯å¦æœ€æ–°ã€‚å¦‚æœä¸å­˜åœ¨æˆ–å·²è¿‡æ—¶ï¼ŒPythonä¼šç¼–è¯‘.pyæ–‡ä»¶å¹¶ç”Ÿæˆ.pycæ–‡ä»¶ï¼Œä»¥æé«˜åç»­å¯¼å…¥é€Ÿåº¦ã€‚ æ‰§è¡Œæ¨¡å—ä»£ç : é¦–æ¬¡å¯¼å…¥æ¨¡å—æ—¶ï¼ŒPythonä¼šæ‰§è¡Œæ¨¡å—ä¸­çš„æ‰€æœ‰é¡¶å±‚ä»£ç ï¼ˆä¸åœ¨ä»»ä½•å‡½æ•°æˆ–ç±»å†…éƒ¨çš„ä»£ç ï¼‰ã€‚è¿™ä¼šå®šä¹‰æ¨¡å—ä¸­æ‰€æœ‰çš„å‡½æ•°ã€ç±»å’Œå˜é‡ã€‚ åˆ›å»ºæ¨¡å—å¯¹è±¡: æ‰§è¡Œå®Œä»£ç åï¼ŒPythonä¼šåˆ›å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨sys.moduleså­—å…¸ä¸­ã€‚sys.modulesæ˜¯ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«äº†å·²ç»å¯¼å…¥çš„æ¨¡å—çš„ç¼“å­˜ã€‚ åœ¨å½“å‰å‘½åç©ºé—´ä¸­ç»‘å®šåç§°: import module_name: å°†æ¨¡å—å¯¹è±¡ç»‘å®šåˆ°å½“å‰å‘½åç©ºé—´çš„module_nameå˜é‡ä¸Šã€‚ä½ å¯ä»¥é€šè¿‡module_name.function()æ¥è®¿é—®å…¶å†…å®¹ã€‚ from module_name import item: å°†æ¨¡å—ä¸­çš„itemç›´æ¥ç»‘å®šåˆ°å½“å‰å‘½åç©ºé—´ã€‚ä½ å¯ä»¥ç›´æ¥ä½¿ç”¨item()ã€‚ from module_name import *: å°†æ¨¡å—ä¸­æ‰€æœ‰éä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„å…¬å…±åç§°éƒ½ç»‘å®šåˆ°å½“å‰å‘½åç©ºé—´ã€‚ä¸æ¨èä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½å¯¼è‡´å‘½åå†²çªã€‚ é‡å¤å¯¼å…¥: å¦‚æœä¸€ä¸ªæ¨¡å—å·²ç»è¢«å¯¼å…¥è¿‡ï¼Œå†æ¬¡æ‰§è¡Œimportè¯­å¥æ—¶ï¼ŒPythonä¼šç›´æ¥ä»sys.modulesä¸­è·å–å·²ç¼“å­˜çš„æ¨¡å—å¯¹è±¡ï¼Œè€Œä¸ä¼šé‡æ–°æ‰§è¡Œæ¨¡å—ä»£ç ï¼Œè¿™æé«˜äº†æ•ˆç‡å¹¶é¿å…äº†é‡å¤å®šä¹‰ã€‚\nå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨æ¨¡å—åŠåŒ…ï¼Ÿ\næ¨¡å—ï¼ˆModuleï¼‰:\nåˆ›å»º: ä¸€ä¸ª.pyæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚ä½ å¯ä»¥å°†ç›¸å…³çš„å‡½æ•°ã€ç±»ã€å˜é‡ç­‰å®šä¹‰åœ¨å…¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºmy_module.pyçš„æ–‡ä»¶ï¼š # my_module.py def greet(name): return f\u0026#34;Hello, {name}!\u0026#34; PI = 3.14159 ä½¿ç”¨: # in another_script.py import my_module print(my_module.greet(\u0026#34;Alice\u0026#34;)) # Hello, Alice! print(my_module.PI) # 3.14159 from my_module import greet, PI print(greet(\u0026#34;Bob\u0026#34;)) # Hello, Bob! print(PI) # 3.14159 from my_module import greet as say_hi print(say_hi(\u0026#34;Charlie\u0026#34;)) # Hello, Charlie! åŒ…ï¼ˆPackageï¼‰:\næ¦‚å¿µ: åŒ…æ˜¯ä¸€ç§ç»„ç»‡æ¨¡å—çš„æ–¹å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«å…¶ä»–æ¨¡å—å’Œå­åŒ…çš„ç›®å½•ã€‚é€šè¿‡åŒ…ï¼Œå¯ä»¥æ›´å¥½åœ°ç®¡ç†å¤§å‹é¡¹ç›®ï¼Œé¿å…å‘½åå†²çªã€‚ åˆ›å»º: ä¸€ä¸ªç›®å½•å¦‚æœåŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„ç©ºæ–‡ä»¶__init__.pyï¼Œå°±è¢«è§†ä¸ºä¸€ä¸ªPythonåŒ…ã€‚ ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºmy_packageçš„åŒ…ç»“æ„ï¼š my_package/\râ”œâ”€â”€ __init__.py\râ”œâ”€â”€ module_a.py\râ””â”€â”€ sub_package/\râ”œâ”€â”€ __init__.py\râ””â”€â”€ module_b.py my_package/module_a.py: # module_a.py def func_a(): print(\u0026#34;Function A from module_a\u0026#34;) my_package/sub_package/module_b.py: # module_b.py def func_b(): print(\u0026#34;Function B from module_b\u0026#34;) ä½¿ç”¨: # in a script outside my_package import my_package.module_a my_package.module_a.func_a() # Function A from module_a from my_package.sub_package import module_b module_b.func_b() # Function B from module_b from my_package.module_a import func_a func_a() # Function A from module_a __init__.pyæ–‡ä»¶çš„ä½œç”¨ã€‚ __init__.pyæ–‡ä»¶åœ¨PythonåŒ…ä¸­æ‰®æ¼”ç€éå¸¸é‡è¦çš„è§’è‰²ï¼š\næ ‡è¯†åŒ…: å‘Šè¯‰Pythonè§£é‡Šå™¨ï¼ŒåŒ…å«å®ƒçš„ç›®å½•æ˜¯ä¸€ä¸ªPythonåŒ…ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šçš„ç›®å½•ã€‚å³ä½¿æ–‡ä»¶å†…å®¹ä¸ºç©ºï¼Œå…¶å­˜åœ¨ä¹Ÿè‡³å…³é‡è¦ï¼ˆPython 3.3+ å¼•å…¥äº†éšå¼å‘½åç©ºé—´åŒ…ï¼Œä¸å†ä¸¥æ ¼è¦æ±‚ç©º__init__.pyï¼Œä½†ä¸ºäº†å…¼å®¹æ€§å’Œæ˜ç¡®æ€§ï¼Œé€šå¸¸è¿˜æ˜¯ä¼šåˆ›å»ºï¼‰ã€‚ åŒ…åˆå§‹åŒ–: å½“åŒ…è¢«å¯¼å…¥æ—¶ï¼ˆä¾‹å¦‚import my_packageï¼‰ï¼Œ__init__.pyæ–‡ä»¶ä¸­çš„ä»£ç ä¼šè¢«æ‰§è¡Œã€‚ä½ å¯ä»¥åˆ©ç”¨å®ƒæ¥ï¼š åˆå§‹åŒ–åŒ…çº§åˆ«çš„æ•°æ®ã€‚ æ‰§è¡Œä»»ä½•åŒ…å¯¼å…¥æ—¶æ‰€éœ€çš„è®¾ç½®æˆ–å‰¯ä½œç”¨ã€‚ æ§åˆ¶from package import *çš„è¡Œä¸ºï¼šé€šè¿‡å®šä¹‰__all__åˆ—è¡¨ï¼Œå¯ä»¥æ˜ç¡®æŒ‡å®š*å¯¼å…¥æ—¶åº”å¯¼å…¥å“ªäº›æ¨¡å—æˆ–åç§°ã€‚ # my_package/__init__.py print(\u0026#34;Initializing my_package...\u0026#34;) # å¯¼å…¥åŒ…æ—¶ä¼šæ‰“å° from . import module_a # å°†module_aå¯¼å…¥åˆ°åŒ…çš„å‘½åç©ºé—´ from .sub_package import module_b # ä¹Ÿå¯ä»¥å¯¼å…¥å­åŒ…ä¸­çš„æ¨¡å— __all__ = [\u0026#39;module_a\u0026#39;] # å®šä¹‰from my_package import *æ—¶å¯¼å…¥çš„å†…å®¹ ç®€åŒ–å¯¼å…¥: å¯ä»¥åœ¨__init__.pyä¸­å¯¼å…¥å­æ¨¡å—çš„ç‰¹å®šå‡½æ•°æˆ–ç±»ï¼Œä»è€Œå…è®¸ç”¨æˆ·ç›´æ¥ä»åŒ…åå¯¼å…¥è¿™äº›å…ƒç´ ï¼Œè€Œæ— éœ€æŒ‡å®šå®Œæ•´çš„å­æ¨¡å—è·¯å¾„ã€‚ # my_package/__init__.py from .module_a import func_a ç„¶åç”¨æˆ·å¯ä»¥è¿™æ ·å¯¼å…¥ï¼š from my_package import func_a func_a() 2. é«˜çº§ç‰¹æ€§ä¸è¿›é˜¶æ¦‚å¿µç­”æ¡ˆ\r#\rè¿­ä»£å™¨ï¼ˆIteratorsï¼‰ä¸ç”Ÿæˆå™¨ï¼ˆGeneratorsï¼‰\r#\rå®ƒä»¬æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«å’Œä¼˜åŠ¿ï¼Ÿ\nè¿­ä»£å™¨ï¼ˆIteratorï¼‰ï¼š\næ˜¯ä»€ä¹ˆï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå®ç°äº†è¿­ä»£å™¨åè®®ï¼Œå³æ‹¥æœ‰ __iter__() å’Œ __next__() æ–¹æ³•ã€‚ __iter__() æ–¹æ³•è¿”å›è¿­ä»£å™¨å¯¹è±¡æœ¬èº«ã€‚ __next__() æ–¹æ³•è¿”å›åºåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚å½“æ²¡æœ‰æ›´å¤šå…ƒç´ æ—¶ï¼Œå®ƒä¼šæŠ›å‡º StopIteration å¼‚å¸¸ã€‚ ä½œç”¨ï¼šå®ƒæä¾›äº†ä¸€ç§æŒ‰éœ€è®¿é—®åºåˆ—å…ƒç´ çš„æ–¹å¼ï¼Œè€Œæ— éœ€ä¸€æ¬¡æ€§å°†æ‰€æœ‰å…ƒç´ åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ ä¼˜åŠ¿ï¼š å†…å­˜æ•ˆç‡ï¼šä¸€æ¬¡åªç”Ÿæˆä¸€ä¸ªæ•°æ®é¡¹ï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤§å‹æˆ–æ— é™åºåˆ—ã€‚ æƒ°æ€§æ±‚å€¼ï¼šåªæœ‰åœ¨éœ€è¦æ—¶æ‰è®¡ç®—ä¸‹ä¸€ä¸ªå€¼ã€‚ ä¾‹å­ï¼šåˆ—è¡¨ã€å…ƒç»„ã€å­—ç¬¦ä¸²ã€å­—å…¸ç­‰éƒ½æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå®ƒä»¬éƒ½å¯ä»¥é€šè¿‡ iter() å‡½æ•°è·å–ä¸€ä¸ªè¿­ä»£å™¨ã€‚ my_list = [1, 2, 3] my_iterator = iter(my_list) # è·å–è¿­ä»£å™¨ print(next(my_iterator)) # 1 print(next(my_iterator)) # 2 print(next(my_iterator)) # 3 # print(next(my_iterator)) # æŠ›å‡º StopIteration ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰ï¼š\næ˜¯ä»€ä¹ˆï¼šä¸€ç§ç‰¹æ®Šçš„è¿­ä»£å™¨ã€‚å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†ä¸æ˜¯é€šè¿‡ return è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯é€šè¿‡ yield å…³é”®å­—æš‚åœæ‰§è¡Œå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚å½“å†æ¬¡è°ƒç”¨ç”Ÿæˆå™¨æ—¶ï¼Œå®ƒä¼šä»ä¸Šæ¬¡ yield æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚ ä½œç”¨ï¼šä»¥æ›´ç®€æ´çš„æ–¹å¼åˆ›å»ºè¿­ä»£å™¨ï¼Œç‰¹åˆ«é€‚åˆç”Ÿæˆå¤§å‹æˆ–æ— é™åºåˆ—ï¼Œå› ä¸ºå®ƒé¿å…äº†åˆ›å»ºå®Œæ•´çš„åˆ—è¡¨æˆ–å…¶ä»–æ•°æ®ç»“æ„ã€‚ ä¼˜åŠ¿ï¼š ç®€æ´æ€§ï¼šä½¿ç”¨ yield è¯­æ³•æ¯”æ‰‹åŠ¨å®ç° __iter__() å’Œ __next__() æ–¹æ³•è¦ç®€å•å¾—å¤šã€‚ å†…å­˜æ•ˆç‡ï¼šä¸è¿­ä»£å™¨ç›¸åŒï¼Œä¹Ÿæ˜¯æƒ°æ€§ç”Ÿæˆï¼Œå†…å­˜å ç”¨æå°ã€‚ æ— é™åºåˆ—ï¼šå¯ä»¥è½»æ¾åœ°ç”Ÿæˆæ— é™åºåˆ—ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šä¸€æ¬¡æ€§å ç”¨æ‰€æœ‰å†…å­˜ã€‚ ä¾‹å­ï¼š def my_generator(): yield 1 yield 2 yield 3 gen = my_generator() # è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ï¼ˆè¿­ä»£å™¨ï¼‰ print(next(gen)) # 1 print(next(gen)) # 2 print(next(gen)) # 3 # print(next(gen)) # æŠ›å‡º StopIteration # ç”Ÿæˆå™¨æ¨å¯¼å¼ (ç±»ä¼¼äºåˆ—è¡¨æ¨å¯¼å¼ï¼Œä½†ç”¨æ‹¬å·) gen_expr = (x * x for x in range(5)) print(next(gen_expr)) # 0 print(list(gen_expr)) # [1, 4, 9, 16] (ä¼šè€—å°½ç”Ÿæˆå™¨) åŒºåˆ«æ€»ç»“ï¼š\nå®ç°æ–¹å¼ï¼šè¿­ä»£å™¨æ˜¯é€šè¿‡å®ç° __iter__() å’Œ __next__() æ–¹æ³•æ¥åˆ›å»ºçš„ç±»å¯¹è±¡ï¼›ç”Ÿæˆå™¨æ˜¯é€šè¿‡åŒ…å« yield å…³é”®å­—çš„å‡½æ•°åˆ›å»ºçš„ã€‚ ä»£ç å¤æ‚æ€§ï¼šç”Ÿæˆå™¨é€šå¸¸æ¯”æ‰‹åŠ¨å®ç°çš„è¿­ä»£å™¨æ›´ç®€æ´ã€‚ æœ¬è´¨ï¼šæ‰€æœ‰ç”Ÿæˆå™¨éƒ½æ˜¯è¿­ä»£å™¨ï¼Œä½†ä¸æ˜¯æ‰€æœ‰è¿­ä»£å™¨éƒ½æ˜¯ç”Ÿæˆå™¨ã€‚ yield å…³é”®å­—çš„ä½œç”¨ã€‚\nyield å…³é”®å­—ç”¨äºåœ¨ç”Ÿæˆå™¨å‡½æ•°ä¸­ã€‚å½“ yield è¯­å¥è¢«æ‰§è¡Œæ—¶ï¼Œå‡½æ•°ä¼šæš‚åœæ‰§è¡Œï¼Œå¹¶å°† yield åé¢çš„è¡¨è¾¾å¼çš„å€¼ä½œä¸ºç»“æœè¿”å›ç»™è°ƒç”¨è€…ã€‚ ä¸ return ä¸åŒçš„æ˜¯ï¼Œå½“å‡½æ•°è¢«å†æ¬¡è°ƒç”¨æ—¶ï¼ˆé€šè¿‡ next()ï¼‰ï¼Œå®ƒä¼šä»ä¸Šæ¬¡ yield è¯­å¥æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œè€Œä¸æ˜¯ä»å¤´å¼€å§‹ã€‚å‡½æ•°çš„çŠ¶æ€ï¼ˆåŒ…æ‹¬å±€éƒ¨å˜é‡çš„å€¼ï¼‰åœ¨æš‚åœæœŸé—´ä¼šè¢«ä¿ç•™ã€‚ è¿™ä½¿å¾—ç”Ÿæˆå™¨èƒ½å¤Ÿæƒ°æ€§åœ°ç”Ÿæˆå€¼ï¼Œè€Œæ— éœ€ä¸€æ¬¡æ€§æ„å»ºæ•´ä¸ªåºåˆ—ã€‚ å¦‚ä½•å®ç°è‡ªå®šä¹‰è¿­ä»£å™¨ï¼Ÿ è¦å®ç°è‡ªå®šä¹‰è¿­ä»£å™¨ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç±»ï¼Œå¹¶åœ¨è¿™ä¸ªç±»ä¸­å®ç°è¿­ä»£å™¨åè®®çš„ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š__iter__() å’Œ __next__()ã€‚\nclass MyRange: def __init__(self, start, end): self.current = start self.end = end def __iter__(self): \u0026#34;\u0026#34;\u0026#34; è¿”å›è¿­ä»£å™¨å¯¹è±¡æœ¬èº«ã€‚ å¯¹äºMyRangeç±»ï¼Œå…¶å®ä¾‹æœ¬èº«å°±æ˜¯è¿­ä»£å™¨ï¼Œæ‰€ä»¥è¿”å›selfã€‚ \u0026#34;\u0026#34;\u0026#34; print(\u0026#34;Calling __iter__\u0026#34;) return self def __next__(self): \u0026#34;\u0026#34;\u0026#34; è¿”å›åºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ å¦‚æœæ²¡æœ‰æ›´å¤šå…ƒç´ ï¼Œåˆ™æŠ›å‡º StopIteration å¼‚å¸¸ã€‚ \u0026#34;\u0026#34;\u0026#34; print(\u0026#34;Calling __next__\u0026#34;) if self.current \u0026lt; self.end: num = self.current self.current += 1 return num else: raise StopIteration # ä½¿ç”¨è‡ªå®šä¹‰è¿­ä»£å™¨ for i in MyRange(1, 4): print(i) # æˆ–è€…æ‰‹åŠ¨è°ƒç”¨ it = MyRange(1, 3) print(next(it)) # Calling __next__ -\u0026gt; 1 print(next(it)) # Calling __next__ -\u0026gt; 2 # print(next(it)) # Calling __next__ -\u0026gt; StopIteration ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆContext Managersï¼‰\r#\rwith è¯­å¥çš„å·¥ä½œåŸç†ã€‚\nwith è¯­å¥ç”¨äºç®€åŒ–èµ„æºç®¡ç†ï¼Œä¾‹å¦‚æ–‡ä»¶æ“ä½œã€æ•°æ®åº“è¿æ¥ã€é”ç­‰ã€‚å®ƒç¡®ä¿åœ¨è¿›å…¥å’Œç¦»å¼€ä»£ç å—æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œèµ„æºçš„è·å–å’Œé‡Šæ”¾æ“ä½œï¼Œå³ä½¿å‘ç”Ÿå¼‚å¸¸ä¹Ÿèƒ½æ­£ç¡®å¤„ç†ã€‚ å·¥ä½œåŸç†ï¼š with è¯­å¥é¦–å…ˆè°ƒç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„ __enter__() æ–¹æ³•ã€‚ __enter__() æ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæœ‰ï¼‰ä¼šè¢«èµ‹ç»™ as å…³é”®å­—åé¢çš„å˜é‡ã€‚ æ‰§è¡Œ with å—å†…éƒ¨çš„ä»£ç ã€‚ æ— è®º with å—ä¸­çš„ä»£ç æ˜¯æ­£å¸¸æ‰§è¡Œç»“æŸï¼Œè¿˜æ˜¯å› ä¸ºå¼‚å¸¸é€€å‡ºï¼Œä¸Šä¸‹æ–‡ç®¡ç†å™¨å¯¹è±¡çš„ __exit__() æ–¹æ³•éƒ½ä¼šè¢«è°ƒç”¨ã€‚ __exit__(exc_type, exc_val, exc_tb) æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«è¡¨ç¤ºå¼‚å¸¸ç±»å‹ã€å¼‚å¸¸å€¼å’Œå›æº¯ä¿¡æ¯ã€‚å¦‚æœ with å—ä¸­æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œè¿™ä¸‰ä¸ªå‚æ•°éƒ½ä¸º Noneã€‚ å¦‚æœ __exit__() æ–¹æ³•è¿”å› Trueï¼Œåˆ™è¡¨ç¤ºå®ƒå·²ç»å¤„ç†äº†å¼‚å¸¸ï¼Œå¼‚å¸¸ä¸ä¼šå†æ¬¡ä¼ æ’­ã€‚å¦‚æœè¿”å› False æˆ–ä¸è¿”å›å€¼ï¼Œåˆ™å¼‚å¸¸ä¼šç»§ç»­ä¼ æ’­ã€‚ __enter__ å’Œ __exit__ æ–¹æ³•çš„ä½œç”¨ã€‚\n__enter__(self): ä½œç”¨ï¼šåœ¨è¿›å…¥ with è¯­å¥å—æ—¶è¢«è°ƒç”¨ã€‚ è¿”å›å€¼ï¼šè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ä¼šè¢«èµ‹ç»™ with ... as var: ä¸­çš„ var å˜é‡ã€‚é€šå¸¸ç”¨äºè¿”å›éœ€è¦æ“ä½œçš„èµ„æºå¯¹è±¡ï¼ˆå¦‚æ–‡ä»¶å¯¹è±¡ã€æ•°æ®åº“è¿æ¥ï¼‰ã€‚ __exit__(self, exc_type, exc_val, exc_tb): ä½œç”¨ï¼šåœ¨é€€å‡º with è¯­å¥å—æ—¶è¢«è°ƒç”¨ï¼Œæ— è®ºæ­£å¸¸é€€å‡ºè¿˜æ˜¯å‘ç”Ÿå¼‚å¸¸ã€‚ å‚æ•°: exc_type: å¼‚å¸¸ç±»å‹ï¼ˆä¾‹å¦‚ TypeError, ValueErrorï¼‰ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸åˆ™ä¸º Noneã€‚ exc_val: å¼‚å¸¸å€¼ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸åˆ™ä¸º Noneã€‚ exc_tb: å¼‚å¸¸çš„å›æº¯ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸åˆ™ä¸º Noneã€‚ è¿”å›å€¼: å¦‚æœ __exit__ è¿”å› Trueï¼Œè¡¨ç¤ºå®ƒå·²ç»æˆåŠŸå¤„ç†äº† with å—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å°†ä¸ä¼šå‘ä¸Šå±‚ä¼ æ’­ã€‚ å¦‚æœ __exit__ è¿”å› Falseï¼ˆæˆ–ä¸è¿”å›ä»»ä½•å€¼ï¼Œå› ä¸ºé»˜è®¤è¿”å› Noneï¼Œç›¸å½“äº Falseï¼‰ï¼Œåˆ™è¡¨ç¤ºå®ƒæ²¡æœ‰å¤„ç†å¼‚å¸¸ï¼Œå¼‚å¸¸ä¼šç»§ç»­ä¼ æ’­ã€‚ å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼Ÿï¼ˆä¾‹å¦‚ä½¿ç”¨ contextlib æ¨¡å—ï¼‰ åˆ›å»ºè‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š\nå®ç° __enter__ å’Œ __exit__ æ–¹æ³•çš„ç±»ï¼š è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹å¼ï¼Œå¦‚ä¸Šæ‰€è¿°ã€‚\nclass FileHandler: def __init__(self, filename, mode): self.filename = filename self.mode = mode self.file = None def __enter__(self): print(f\u0026#34;Entering context: Opening {self.filename} in {self.mode} mode.\u0026#34;) self.file = open(self.filename, self.mode) return self.file # è¿”å›æ–‡ä»¶å¯¹è±¡ï¼Œèµ‹ç»™ \u0026#39;as\u0026#39; åé¢çš„å˜é‡ def __exit__(self, exc_type, exc_val, exc_tb): print(f\u0026#34;Exiting context: Closing {self.filename}.\u0026#34;) if self.file: self.file.close() if exc_type: print(f\u0026#34;An exception occurred: {exc_type.__name__}: {exc_val}\u0026#34;) # return True # å¦‚æœè¿”å›Trueï¼Œå¼‚å¸¸å°†è¢«æŠ‘åˆ¶ return False # å¼‚å¸¸ä¼šç»§ç»­ä¼ æ’­ # ä½¿ç”¨è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ with FileHandler(\u0026#34;my_file.txt\u0026#34;, \u0026#34;w\u0026#34;) as f: f.write(\u0026#34;Hello from context manager!\\n\u0026#34;) # raise ValueError(\u0026#34;Something went wrong!\u0026#34;) # å°è¯•æŠ›å‡ºå¼‚å¸¸ with FileHandler(\u0026#34;my_file.txt\u0026#34;, \u0026#34;r\u0026#34;) as f: content = f.read() print(f\u0026#34;File content: {content.strip()}\u0026#34;) ä½¿ç”¨ contextlib æ¨¡å—çš„ @contextmanager è£…é¥°å™¨ï¼š è¿™æ˜¯ä¸€ä¸ªæ›´ç®€æ´ã€æ›´Pythonicçš„æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯å½“ä½ çš„ä¸Šä¸‹æ–‡é€»è¾‘å¯ä»¥é€šè¿‡ç”Ÿæˆå™¨å‡½æ•°æ¥è¡¨è¾¾æ—¶ã€‚\nå®ƒå°†ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚ ç”Ÿæˆå™¨å‡½æ•°åœ¨ yield ä¹‹å‰çš„éƒ¨åˆ†å¯¹åº” __enter__ çš„é€»è¾‘ã€‚ yield è¿”å›çš„å€¼å°±æ˜¯ __enter__ çš„è¿”å›å€¼ã€‚ yield ä¹‹åçš„éƒ¨åˆ†ï¼ˆåŒ…æ‹¬ finally æˆ– except å—ï¼‰å¯¹åº” __exit__ çš„é€»è¾‘ã€‚ from contextlib import contextmanager @contextmanager def open_file_context(filename, mode): file = None try: file = open(filename, mode) print(f\u0026#34;Entering context (generator): Opening {filename} in {mode} mode.\u0026#34;) yield file # yield çš„å€¼ä¼šèµ‹ç»™ \u0026#39;as\u0026#39; åé¢çš„å˜é‡ except Exception as e: print(f\u0026#34;An exception occurred in context: {type(e).__name__}: {e}\u0026#34;) # å¼‚å¸¸å¤„ç†ï¼šè¿™é‡Œä¸é‡æ–°æŠ›å‡ºï¼Œé»˜è®¤å°±æ˜¯ä¸ä¼ æ’­ï¼Œæˆ–è€…å¯ä»¥return True finally: if file: file.close() print(f\u0026#34;Exiting context (generator): Closing {filename}.\u0026#34;) # ä½¿ç”¨ @contextmanager è£…é¥°å™¨åˆ›å»ºçš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨ with open_file_context(\u0026#34;another_file.txt\u0026#34;, \u0026#34;w\u0026#34;) as f: f.write(\u0026#34;Hello from generator context manager!\\n\u0026#34;) # raise TypeError(\u0026#34;Another error!\u0026#34;) # å°è¯•æŠ›å‡ºå¼‚å¸¸ with open_file_context(\u0026#34;another_file.txt\u0026#34;, \u0026#34;r\u0026#34;) as f: content = f.read() print(f\u0026#34;File content: {content.strip()}\u0026#34;) é€‰æ‹©å“ªç§æ–¹å¼ï¼Ÿ\nå¦‚æœä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„é€»è¾‘ç®€å•ï¼Œä¸”èƒ½ç”¨å•æ¬¡è¿›å…¥/é€€å‡ºçš„ç”Ÿæˆå™¨å‡½æ•°æè¿°ï¼Œ@contextmanager é€šå¸¸æ›´ç®€æ´å’Œæ¨èã€‚ å¦‚æœéœ€è¦æ›´å¤æ‚çš„åˆå§‹åŒ–é€»è¾‘ï¼Œæˆ–è€…éœ€è¦ç®¡ç†å¤šä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæˆ–è€…éœ€è¦æ›´ç²¾ç»†åœ°æ§åˆ¶å¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆå®ç°ç±»ï¼ˆ__enter__ å’Œ __exit__ï¼‰å¯èƒ½æ›´æ¸…æ™°ã€‚ å¼‚å¸¸å¤„ç†\r#\rtry/except/finally/else è¯­å¥çš„ç”¨æ³•ã€‚ è¿™ç»„è¯­å¥ç”¨äºåœ¨ç¨‹åºè¿è¡Œæ—¶å¤„ç†é”™è¯¯ï¼ˆå¼‚å¸¸ï¼‰ï¼Œä»¥é˜²æ­¢ç¨‹åºå´©æºƒï¼Œå¹¶æä¾›ä¼˜é›…çš„é”™è¯¯æ¢å¤æœºåˆ¶ã€‚\ntry: åŒ…å«å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç å—ã€‚ except: ç”¨äºæ•è·å’Œå¤„ç† try å—ä¸­å‘ç”Ÿçš„ç‰¹å®šç±»å‹æˆ–æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸ã€‚å¯ä»¥æœ‰å¤šä¸ª except å—æ¥å¤„ç†ä¸åŒç±»å‹çš„å¼‚å¸¸ã€‚ except ExceptionType as var:ï¼šæ•è·ç‰¹å®šç±»å‹çš„å¼‚å¸¸ï¼Œå¹¶å°†å…¶èµ‹å€¼ç»™ varã€‚ except:ï¼šæ•è·æ‰€æœ‰æœªè¢«å‰é¢ except æ•è·çš„å¼‚å¸¸ï¼ˆä¸æ¨èï¼Œå› ä¸ºå®ƒä¼šæ•è·æ‰€æœ‰é”™è¯¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé”™è¯¯ï¼Œä½¿è°ƒè¯•å›°éš¾ï¼‰ã€‚ else: ï¼ˆå¯é€‰ï¼‰å¦‚æœ try å—ä¸­çš„ä»£ç æ²¡æœ‰å¼•å‘ä»»ä½•å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œ else å—ä¸­çš„ä»£ç ã€‚ finally: ï¼ˆå¯é€‰ï¼‰æ— è®º try å—ä¸­æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œfinally å—ä¸­çš„ä»£ç æ€»ä¼šæ‰§è¡Œã€‚é€šå¸¸ç”¨äºæ‰§è¡Œæ¸…ç†æ“ä½œï¼ˆå¦‚å…³é—­æ–‡ä»¶ã€é‡Šæ”¾èµ„æºï¼‰ã€‚ def divide(a, b): try: result = a / b except ZeroDivisionError: print(\u0026#34;Error: Cannot divide by zero!\u0026#34;) return None # æˆ–è€…é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…è¿”å›ç‰¹å®šå€¼ except TypeError: print(\u0026#34;Error: Invalid argument type! Please provide numbers.\u0026#34;) return None except Exception as e: # æ•è·æ‰€æœ‰å…¶ä»–å¼‚å¸¸ print(f\u0026#34;An unexpected error occurred: {e}\u0026#34;) return None else: # å¦‚æœtryå—æ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œè¿™é‡Œ print(\u0026#34;Division successful!\u0026#34;) return result finally: # æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™é‡Œ print(\u0026#34;Division attempt finished.\u0026#34;) print(divide(10, 2)) print(\u0026#34;-\u0026#34; * 20) print(divide(10, 0)) print(\u0026#34;-\u0026#34; * 20) print(divide(10, \u0026#34;a\u0026#34;)) å¦‚ä½•è‡ªå®šä¹‰å¼‚å¸¸ï¼Ÿ\nè‡ªå®šä¹‰å¼‚å¸¸é€šå¸¸é€šè¿‡ç»§æ‰¿Pythonå†…ç½®çš„ Exception ç±»ï¼ˆæˆ–å…¶å­ç±»ï¼Œå¦‚ ValueError, TypeError ç­‰ï¼‰æ¥åˆ›å»ºã€‚ ç»§æ‰¿ Exception ç±»èƒ½ç¡®ä¿ä½ çš„è‡ªå®šä¹‰å¼‚å¸¸èƒ½å¤Ÿè¢«æ ‡å‡†çš„å¼‚å¸¸å¤„ç†æœºåˆ¶æ•è·ã€‚ ä½ å¯ä»¥ä¸ºè‡ªå®šä¹‰å¼‚å¸¸æ·»åŠ è‡ªå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•ï¼Œä»¥æä¾›æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ã€‚ class InvalidInputError(Exception): \u0026#34;\u0026#34;\u0026#34; è‡ªå®šä¹‰å¼‚å¸¸ï¼šè¡¨ç¤ºè¾“å…¥ä¸åˆæ³•ã€‚ \u0026#34;\u0026#34;\u0026#34; def __init__(self, message=\u0026#34;Invalid input provided.\u0026#34;, value=None): self.message = message self.value = value super().__init__(self.message) # è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³• def __str__(self): if self.value is not None: return f\u0026#34;{self.message} (Received: {self.value})\u0026#34; return self.message def process_data(data): if not isinstance(data, (int, float)): raise InvalidInputError(\u0026#34;Data must be a number.\u0026#34;, data) if data \u0026lt; 0: raise ValueError(\u0026#34;Data cannot be negative.\u0026#34;) # ä½¿ç”¨å†…ç½®å¼‚å¸¸ print(f\u0026#34;Processing data: {data}\u0026#34;) try: process_data(\u0026#34;hello\u0026#34;) except InvalidInputError as e: print(f\u0026#34;Caught custom error: {e}\u0026#34;) except ValueError as e: print(f\u0026#34;Caught ValueError: {e}\u0026#34;) except Exception as e: print(f\u0026#34;Caught generic error: {e}\u0026#34;) try: process_data(-5) except InvalidInputError as e: print(f\u0026#34;Caught custom error: {e}\u0026#34;) except ValueError as e: print(f\u0026#34;Caught ValueError: {e}\u0026#34;) except Exception as e: print(f\u0026#34;Caught generic error: {e}\u0026#34;) å¹¶å‘ç¼–ç¨‹\r#\rå¤šçº¿ç¨‹ï¼ˆthreadingï¼‰ä¸å¤šè¿›ç¨‹ï¼ˆmultiprocessingï¼‰çš„åŒºåˆ«ã€‚ Pythonä¸­å®ç°å¹¶å‘ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼šå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ã€‚\nå¤šçº¿ç¨‹ï¼ˆthreading æ¨¡å—ï¼‰:\nå®šä¹‰ï¼šåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­åˆ›å»ºå¤šä¸ªçº¿ç¨‹ã€‚æ‰€æœ‰çº¿ç¨‹å…±äº«åŒä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼ŒåŒ…æ‹¬å…¨å±€å˜é‡ã€‚ å¹¶å‘æ€§ï¼šåœ¨CPUå¯†é›†å‹ä»»åŠ¡ä¸­ï¼Œç”±äº å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰ çš„å­˜åœ¨ï¼ŒPythonå¤šçº¿ç¨‹æ— æ³•çœŸæ­£å®ç°å¹¶è¡Œè®¡ç®—ï¼ˆå³åŒæ—¶æ‰§è¡Œå¤šä¸ªCPUæ“ä½œï¼‰ï¼Œè€Œæ˜¯è¡¨ç°ä¸ºå¹¶å‘ï¼ˆé€šè¿‡æ—¶é—´ç‰‡è½®è½¬å¿«é€Ÿåˆ‡æ¢ï¼Œçœ‹ä¼¼åŒæ—¶æ‰§è¡Œï¼‰ã€‚åœ¨IOå¯†é›†å‹ä»»åŠ¡ä¸­ï¼ŒGILä¼šé‡Šæ”¾ï¼Œå› æ­¤å¤šçº¿ç¨‹å¯ä»¥æœ‰æ•ˆæé«˜æ•ˆç‡ã€‚ èµ„æºå…±äº«ï¼šçº¿ç¨‹ä¹‹é—´å…±äº«å†…å­˜ï¼Œæ•°æ®é€šä¿¡æ–¹ä¾¿ï¼Œä½†éœ€è¦åŠ é”ï¼ˆLockã€Semaphoreç­‰ï¼‰æ¥é¿å…ç«æ€æ¡ä»¶å’Œæ•°æ®ä¸ä¸€è‡´ã€‚ åˆ›å»ºå¼€é”€ï¼šåˆ›å»ºå’Œç®¡ç†çº¿ç¨‹çš„å¼€é”€ç›¸å¯¹è¾ƒå°ã€‚ è°ƒè¯•ï¼šç”±äºå…±äº«å†…å­˜å’ŒGILï¼Œå¤šçº¿ç¨‹è°ƒè¯•å¯èƒ½æ¯”è¾ƒå¤æ‚ã€‚ é€‚ç”¨åœºæ™¯ï¼šIOå¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ“ä½œï¼‰ï¼Œå› ä¸ºåœ¨ç­‰å¾…IOæ—¶GILä¼šè¢«é‡Šæ”¾ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥è¿è¡Œã€‚ å¤šè¿›ç¨‹ï¼ˆmultiprocessing æ¨¡å—ï¼‰:\nå®šä¹‰ï¼šåˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„è¿›ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œäº’ä¸å½±å“ã€‚ å¹¶å‘æ€§ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„Pythonè§£é‡Šå™¨å’Œç‹¬ç«‹çš„GILã€‚å› æ­¤ï¼Œå¤šè¿›ç¨‹å¯ä»¥å®ç°çœŸæ­£çš„å¹¶è¡Œè®¡ç®—ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„æ€§èƒ½ã€‚ èµ„æºå…±äº«ï¼šè¿›ç¨‹ä¹‹é—´ä¸å…±äº«å†…å­˜ã€‚æ•°æ®é€šä¿¡éœ€è¦é€šè¿‡ç‰¹å®šçš„æœºåˆ¶ï¼ˆå¦‚é˜Ÿåˆ— Queueã€ç®¡é“ Pipeã€å…±äº«å†…å­˜ Value/Arrayï¼‰è¿›è¡Œã€‚ åˆ›å»ºå¼€é”€ï¼šåˆ›å»ºå’Œç®¡ç†è¿›ç¨‹çš„å¼€é”€ç›¸å¯¹è¾ƒå¤§ï¼ˆå› ä¸ºéœ€è¦å¤åˆ¶æ•´ä¸ªè¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼‰ã€‚ è°ƒè¯•ï¼šç›¸å¯¹ç®€å•ï¼Œå› ä¸ºè¿›ç¨‹é—´éš”ç¦»ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å´©æºƒé€šå¸¸ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ã€‚ é€‚ç”¨åœºæ™¯ï¼šCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¤§é‡è®¡ç®—ã€å›¾åƒå¤„ç†ã€æ•°æ®åˆ†æï¼‰ï¼Œå› ä¸ºå¯ä»¥ç»•è¿‡GILï¼Œå®ç°çœŸæ­£çš„å¹¶è¡Œã€‚ æ€»ç»“è¡¨æ ¼:\nç‰¹æ€§ å¤šçº¿ç¨‹ï¼ˆThreadingï¼‰ å¤šè¿›ç¨‹ï¼ˆMultiprocessingï¼‰ æœ¬è´¨ åŒä¸€è¿›ç¨‹å†…çš„ä¸åŒæ‰§è¡Œæµ ç‹¬ç«‹çš„è¿›ç¨‹ å†…å­˜ç©ºé—´ å…±äº«åŒä¸€è¿›ç¨‹å†…å­˜ å„è‡ªç‹¬ç«‹çš„å†…å­˜ç©ºé—´ GILå½±å“ å—GILé™åˆ¶ï¼Œæ— æ³•çœŸæ­£å¹¶è¡Œï¼ˆCPUå¯†é›†å‹ï¼‰ æ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„GILï¼Œå¯å®ç°çœŸæ­£çš„å¹¶è¡Œï¼ˆCPUå¯†é›†å‹ï¼‰ æ•°æ®å…±äº« ç›´æ¥å…±äº«ï¼Œéœ€åŠ é”åŒæ­¥ ä¸å…±äº«ï¼Œéœ€è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶ åˆ›å»ºå¼€é”€ è¾ƒå° è¾ƒå¤§ ç¨³å®šæ€§ ä¸€ä¸ªçº¿ç¨‹å´©æºƒå¯èƒ½å½±å“æ•´ä¸ªè¿›ç¨‹ ä¸€ä¸ªè¿›ç¨‹å´©æºƒé€šå¸¸ä¸å½±å“å…¶ä»–è¿›ç¨‹ è°ƒè¯•éš¾åº¦ è¾ƒé«˜ (ç«æ€æ¡ä»¶ã€æ­»é”) ç›¸å¯¹è¾ƒä½ é€‚ç”¨åœºæ™¯ IOå¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œã€æ–‡ä»¶I/Oã€æ•°æ®åº“ï¼‰ CPUå¯†é›†å‹ä»»åŠ¡ï¼ˆç§‘å­¦è®¡ç®—ã€æ•°æ®å¤„ç†ï¼‰ å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå¯¹Pythonå¤šçº¿ç¨‹æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ\nGIL (Global Interpreter Lock)ï¼š\næ˜¯ä»€ä¹ˆï¼šGIL æ˜¯Pythonè§£é‡Šå™¨ï¼ˆCpythonæ˜¯ä¸»è¦çš„å®ç°ï¼‰çš„ä¸€ä¸ªäº’æ–¥é”ã€‚å®ƒç¡®ä¿åœ¨ä»»ä½•ç»™å®šæ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡ŒPythonå­—èŠ‚ç ã€‚ ä¸ºä»€ä¹ˆå­˜åœ¨ï¼šGIL çš„ä¸»è¦åŸå› æ˜¯ä¸ºäº†ç®€åŒ– CPython è§£é‡Šå™¨çš„å†…å­˜ç®¡ç†ã€‚CPython çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸ºäº†é¿å…å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…±äº«æ•°æ®ç»“æ„å¯¼è‡´ç«æ€æ¡ä»¶å’Œå´©æºƒï¼ŒGIL è¢«å¼•å…¥ä½œä¸ºä¿æŠ¤æœºåˆ¶ã€‚ å¹¶éPythonè¯­è¨€çš„ç‰¹æ€§ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGIL æ˜¯CPythonè§£é‡Šå™¨çš„ç‰¹æ€§ï¼Œè€Œä¸æ˜¯Pythonè¯­è¨€è§„èŒƒçš„ä¸€éƒ¨åˆ†ã€‚å…¶ä»–Pythonå®ç°ï¼ˆå¦‚Jythonã€IronPythonï¼‰å¯èƒ½æ²¡æœ‰GILã€‚ å¯¹Pythonå¤šçº¿ç¨‹çš„å½±å“ï¼š\nCPUå¯†é›†å‹ä»»åŠ¡æ— æ³•å¹¶è¡Œï¼š å¯¹äºæ‰§è¡Œå¤§é‡è®¡ç®—è€Œå¾ˆå°‘ç­‰å¾…å¤–éƒ¨I/Oçš„CPUå¯†é›†å‹ä»»åŠ¡ï¼Œå³ä½¿ä½ æœ‰å¤šä¸ªCPUæ ¸å¿ƒå’Œå¤šä¸ªçº¿ç¨‹ï¼Œç”±äºGILçš„å­˜åœ¨ï¼Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡ŒPythonå­—èŠ‚ç ã€‚å…¶ä»–çº¿ç¨‹å¤„äºç­‰å¾…GILé‡Šæ”¾çš„çŠ¶æ€ã€‚ è¿™å¯¼è‡´Pythonå¤šçº¿ç¨‹æ— æ³•å……åˆ†åˆ©ç”¨å¤šæ ¸CPUçš„ä¼˜åŠ¿æ¥å®ç°çœŸæ­£çš„å¹¶è¡Œè®¡ç®—ã€‚å¤šçº¿ç¨‹åœ¨CPUå¯†é›†å‹åœºæ™¯ä¸‹ç”šè‡³å¯èƒ½å› ä¸ºçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€è€Œæ¯”å•çº¿ç¨‹æ›´æ…¢ã€‚ IOå¯†é›†å‹ä»»åŠ¡å¯ä»¥å¹¶å‘ï¼š å¯¹äºéœ€è¦å¤§é‡ç­‰å¾…å¤–éƒ¨I/Oï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰çš„IOå¯†é›†å‹ä»»åŠ¡ï¼ŒGILä¼šåœ¨ç­‰å¾…I/Oæ“ä½œå®Œæˆæ—¶ä¸»åŠ¨é‡Šæ”¾ã€‚ è¿™æ„å‘³ç€å½“ä¸€ä¸ªçº¿ç¨‹å› ä¸ºI/Oæ“ä½œè€Œé˜»å¡æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–GILå¹¶æ‰§è¡ŒPythonå­—èŠ‚ç ã€‚è¿™æ ·ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥äº¤æ›¿æ‰§è¡Œï¼Œä»è€Œå®ç°å¹¶å‘ï¼Œæé«˜æ•´ä½“æ•ˆç‡ã€‚ å¹¶å‘è€Œéå¹¶è¡Œï¼š GILä½¿å¾—Pythonå¤šçº¿ç¨‹åœ¨å®è§‚ä¸Šçœ‹èµ·æ¥æ˜¯å¹¶å‘çš„ï¼ˆå¤šä¸ªä»»åŠ¡äº¤æ›¿è¿›è¡Œï¼‰ï¼Œä½†åœ¨å¾®è§‚ä¸Šï¼Œå®ƒä»¬ä»ç„¶æ˜¯ä¸²è¡Œæ‰§è¡ŒPythonå­—èŠ‚ç çš„ï¼ˆåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼‰ã€‚ ç»•è¿‡GILçš„æ–¹æ³•ï¼š ä½¿ç”¨å¤šè¿›ç¨‹ (multiprocessing)ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„Pythonè§£é‡Šå™¨å’ŒGILï¼Œå› æ­¤å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚ ä½¿ç”¨Cæ‰©å±•æ¨¡å—ï¼šç”¨C/C++ç¼–å†™çš„æ‰©å±•æ¨¡å—å¯ä»¥åœ¨æ‰§è¡ŒéPythonä»£ç æ—¶é‡Šæ”¾GILã€‚è®¸å¤šé«˜æ€§èƒ½åº“ï¼ˆå¦‚NumPyï¼‰å°±æ˜¯è¿™æ ·åšçš„ã€‚ ä½¿ç”¨å¼‚æ­¥I/O (asyncio)ï¼šé€šè¿‡åç¨‹å®ç°å•çº¿ç¨‹å¹¶å‘ï¼Œé¿å…äº†çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å’ŒGILçš„é™åˆ¶ã€‚ åç¨‹ï¼ˆasyncioï¼‰çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯ã€‚\nåç¨‹ï¼ˆCoroutinesï¼‰ï¼š\næ˜¯ä»€ä¹ˆï¼šåç¨‹æ˜¯ä¸€ç§ç”¨æˆ·æ€çš„è½»é‡çº§çº¿ç¨‹ï¼Œå®ƒåœ¨å•ä¸ªçº¿ç¨‹å†…å®ç°å¹¶å‘ã€‚ä¸çº¿ç¨‹ç”±æ“ä½œç³»ç»Ÿè°ƒåº¦ä¸åŒï¼Œåç¨‹çš„è°ƒåº¦æ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶çš„ï¼ˆå³â€œåä½œå¼å¤šä»»åŠ¡â€ï¼‰ã€‚ ç‰¹ç‚¹ï¼š éæŠ¢å å¼ï¼šåç¨‹ä¸ä¼šè¢«æ“ä½œç³»ç»Ÿå¼ºåˆ¶ä¸­æ–­ã€‚å®ƒä»¬å¿…é¡»æ˜¾å¼åœ°é€šè¿‡ await æˆ– yield from è¯­å¥å°†æ§åˆ¶æƒäº¤è¿˜ç»™äº‹ä»¶å¾ªç¯ã€‚ ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å°ï¼šåç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¯”çº¿ç¨‹æˆ–è¿›ç¨‹çš„åˆ‡æ¢å¼€é”€å°å¾—å¤šï¼Œå› ä¸ºå®ƒä»¬ä¸éœ€è¦ä¿å­˜å’Œæ¢å¤æ•´ä¸ªçº¿ç¨‹çš„å¯„å­˜å™¨ä¸Šä¸‹æ–‡ã€‚ é¿å…GILé™åˆ¶ï¼šç”±äºåç¨‹è¿è¡Œåœ¨å•ä¸€çº¿ç¨‹ä¸­ï¼Œå®ƒä»¬å®Œå…¨ä¸å—GILçš„é™åˆ¶ï¼Œå¯ä»¥åœ¨IOå¯†é›†å‹ä»»åŠ¡ä¸­è·å¾—æé«˜çš„æ€§èƒ½ã€‚ Pythonå®ç°ï¼šPython 3.5+ å¼•å…¥äº† async/await è¯­æ³•ç³–æ¥æ›´ä¼˜é›…åœ°ç¼–å†™åç¨‹ï¼Œå¹¶é€šè¿‡ asyncio åº“æä¾›äº†äº‹ä»¶å¾ªç¯ã€ä»»åŠ¡è°ƒåº¦ç­‰åŸºç¡€è®¾æ–½ã€‚ æ ¸å¿ƒæ¦‚å¿µ: async def: å®šä¹‰ä¸€ä¸ªåç¨‹å‡½æ•°ã€‚ await: ç”¨äºæš‚åœå½“å‰åç¨‹çš„æ‰§è¡Œï¼Œç­‰å¾…å¦ä¸€ä¸ªâ€œawaitableâ€å¯¹è±¡ï¼ˆå¦‚å¦ä¸€ä¸ªåç¨‹ã€ä¸€ä¸ªFutureæˆ–ä¸€ä¸ªTaskï¼‰å®Œæˆï¼Œå¹¶å°†æ§åˆ¶æƒäº¤è¿˜ç»™äº‹ä»¶å¾ªç¯ã€‚ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰: asyncio çš„æ ¸å¿ƒï¼Œè´Ÿè´£è°ƒåº¦å’Œç®¡ç†åç¨‹çš„æ‰§è¡Œã€‚å½“ä¸€ä¸ªåç¨‹ await å¦ä¸€ä¸ªæ“ä½œæ—¶ï¼Œäº‹ä»¶å¾ªç¯ä¼šåˆ‡æ¢åˆ°å…¶ä»–å‡†å¤‡å°±ç»ªçš„åç¨‹ã€‚ ä½¿ç”¨åœºæ™¯ï¼š\nIOå¯†é›†å‹æ“ä½œï¼šè¿™æ˜¯åç¨‹æœ€ä¸»è¦çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ã€‚å½“ç¨‹åºéœ€è¦ç­‰å¾…å¤§é‡I/Oæ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ã€æ–‡ä»¶I/Oï¼‰æ—¶ï¼Œä½¿ç”¨åç¨‹å¯ä»¥æ˜¾è‘—æé«˜æ•ˆç‡ã€‚ä¾‹å¦‚ï¼ŒåŒæ—¶å‘é€æ•°ç™¾ä¸ªHTTPè¯·æ±‚ï¼Œä¼ ç»Ÿçš„åŒæ­¥æ–¹å¼ä¼šä¾æ¬¡ç­‰å¾…ï¼Œè€Œåç¨‹å¯ä»¥åœ¨ç­‰å¾…ä¸€ä¸ªè¯·æ±‚å“åº”æ—¶å»å¤„ç†å…¶ä»–è¯·æ±‚ã€‚ WebæœåŠ¡å™¨å’ŒAPIæœåŠ¡ï¼šasyncio åŠå…¶ä¸Šå±‚çš„æ¡†æ¶ï¼ˆå¦‚ FastAPI, Starletteï¼‰éå¸¸é€‚åˆæ„å»ºé«˜æ€§èƒ½çš„WebæœåŠ¡å™¨ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é«˜æ•ˆåœ°å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚ ç½‘ç»œçˆ¬è™«ï¼šè¿›è¡Œå¤§é‡çš„å¹¶å‘ç½‘ç»œè¯·æ±‚ï¼Œæé«˜çˆ¬å–æ•ˆç‡ã€‚ æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹è€…ï¼šç­‰å¾…å’Œå¤„ç†æ¥è‡ªæ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ã€‚ é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰ï¼šå®æ—¶é€šä¿¡åº”ç”¨ã€‚ ä¾‹å­ï¼š\nimport asyncio import time async def fetch_data(delay, data): print(f\u0026#34;Start fetching {data} (delay: {delay}s)...\u0026#34;) await asyncio.sleep(delay) # æ¨¡æ‹ŸI/Oæ“ä½œï¼Œawaitä¼šé‡Šæ”¾æ§åˆ¶æƒç»™äº‹ä»¶å¾ªç¯ print(f\u0026#34;Finished fetching {data}.\u0026#34;) return f\u0026#34;Data: {data}\u0026#34; async def main(): start_time = time.time() # åˆ›å»ºå¤šä¸ªåç¨‹ä»»åŠ¡ task1 = asyncio.create_task(fetch_data(2, \u0026#34;User Info\u0026#34;)) task2 = asyncio.create_task(fetch_data(1, \u0026#34;Product List\u0026#34;)) task3 = asyncio.create_task(fetch_data(3, \u0026#34;Order History\u0026#34;)) # åŒæ—¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ results = await asyncio.gather(task1, task2, task3) print(\u0026#34;\\nAll tasks completed!\u0026#34;) print(f\u0026#34;Results: {results}\u0026#34;) end_time = time.time() print(f\u0026#34;Total time: {end_time - start_time:.2f} seconds\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: # è¿è¡Œäº‹ä»¶å¾ªç¯ asyncio.run(main()) ä¸Šè¿°ä»£ç ä¸­ï¼Œä¸‰ä¸ª fetch_data åç¨‹è™½ç„¶æœ‰ä¸åŒçš„å»¶è¿Ÿï¼Œä½†å®ƒä»¬ä¼šå¹¶å‘æ‰§è¡Œã€‚å½“ä¸€ä¸ªåç¨‹ await asyncio.sleep() æ—¶ï¼Œäº‹ä»¶å¾ªç¯ä¼šåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåç¨‹ï¼Œè€Œä¸æ˜¯ç­‰å¾…å½“å‰åç¨‹çš„ç¡çœ æ—¶é—´ç»“æŸã€‚æœ€ç»ˆæ€»è€—æ—¶å°†å–å†³äºæœ€é•¿çš„é‚£ä¸ªå»¶è¿Ÿï¼ˆçº¦3ç§’ï¼‰ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å»¶è¿Ÿä¹‹å’Œï¼ˆ2+1+3=6ç§’ï¼‰ã€‚\nå†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶\r#\rPythonçš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚ Pythonçš„å†…å­˜ç®¡ç†æ˜¯ç”±å…¶ç§æœ‰å †ç©ºé—´ï¼ˆPrivate Heap Spaceï¼‰æ¥å®Œæˆçš„ã€‚æ‰€æœ‰Pythonå¯¹è±¡å’Œæ•°æ®ç»“æ„éƒ½å­˜å‚¨åœ¨è¿™ä¸ªç§æœ‰å †ä¸­ã€‚è§£é‡Šå™¨è´Ÿè´£ç®¡ç†è¿™ä¸ªå †ï¼Œç¨‹åºå‘˜é€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ã€‚\nPythonå†…å­˜ç®¡ç†æœºåˆ¶ä¸»è¦åŒ…æ‹¬ï¼š\nå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ï¼šè¿™æ˜¯Pythonæœ€ä¸»è¦çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚ åƒåœ¾å›æ”¶å™¨ï¼ˆGarbage Collectorï¼‰ï¼šç”¨äºå¤„ç†å¾ªç¯å¼•ç”¨ï¼ˆReference Cyclesï¼‰ã€‚ å†…å­˜æ± ï¼ˆMemory Poolï¼‰ï¼šå¯¹å°å¯¹è±¡è¿›è¡Œä¼˜åŒ–åˆ†é…ã€‚ å¼•ç”¨è®¡æ•°ï¼ˆreference countingï¼‰å’Œå¾ªç¯å¼•ç”¨ï¼ˆcircular referencesï¼‰ã€‚\nå¼•ç”¨è®¡æ•°ï¼ˆReference Countingï¼‰ï¼š\nåŸç†ï¼šæ¯ä¸ªPythonå¯¹è±¡éƒ½ç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œè®°å½•æœ‰å¤šå°‘ä¸ªå˜é‡æˆ–å¯¹è±¡å¼•ç”¨äº†å®ƒã€‚ å·¥ä½œæ–¹å¼ï¼š å½“ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼ˆä¾‹å¦‚ï¼Œå°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæˆ–å°†å…¶ä½œä¸ºå…ƒç´ æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼‰ï¼Œå…¶å¼•ç”¨è®¡æ•°å™¨ä¼šå¢åŠ ã€‚ å½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¸å†å­˜åœ¨æ—¶ï¼ˆä¾‹å¦‚ï¼Œå˜é‡è¶…å‡ºä½œç”¨åŸŸï¼Œæˆ–ä»åˆ—è¡¨ä¸­åˆ é™¤ï¼‰ï¼Œå…¶å¼•ç”¨è®¡æ•°å™¨ä¼šå‡å°‘ã€‚ å½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å™¨é™ä¸ºé›¶æ—¶ï¼Œè¯´æ˜æ²¡æœ‰ä»»ä½•å˜é‡å†å¼•ç”¨å®ƒï¼Œè¯¥å¯¹è±¡å°±ä¼šè¢«Pythonè§£é‡Šå™¨ç«‹å³å›æ”¶å…¶å ç”¨çš„å†…å­˜ã€‚ ä¼˜ç‚¹ï¼š å®æ—¶æ€§ï¼šå†…å­˜å¯ä»¥ç«‹å³è¢«é‡Šæ”¾ï¼Œå‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡ã€‚ ç®€å•é«˜æ•ˆï¼šå¯¹äºå¤§å¤šæ•°æƒ…å†µéå¸¸æœ‰æ•ˆã€‚ ç¼ºç‚¹ï¼š æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ æ¯æ¬¡å¼•ç”¨è®¡æ•°å˜åŒ–éƒ½éœ€è¦é¢å¤–æ“ä½œï¼Œæœ‰è½»å¾®å¼€é”€ã€‚ import sys a = [1, 2, 3] print(sys.getrefcount(a)) # 2 (aæœ¬èº«å¼•ç”¨ä¸€æ¬¡ï¼Œgetrefcountå‡½æ•°å†…éƒ¨å¼•ç”¨ä¸€æ¬¡) b = a # bä¹Ÿå¼•ç”¨äº†åˆ—è¡¨ print(sys.getrefcount(a)) # 3 del b # bä¸å†å¼•ç”¨åˆ—è¡¨ print(sys.getrefcount(a)) # 2 # åˆ—è¡¨å¼•ç”¨è®¡æ•°é™ä¸º1 (å¦‚æœä¸æ˜¯è¢«getrefcountå¼•ç”¨ï¼Œå°±æ˜¯1) # å¦‚æœä¸å†æœ‰ä»»ä½•å¼•ç”¨ï¼Œåˆ—è¡¨å°±ä¼šè¢«å›æ”¶ å¾ªç¯å¼•ç”¨ï¼ˆCircular Referencesï¼‰ï¼š\né—®é¢˜æ‰€åœ¨ï¼šå½“ä¸¤ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆä¸€ä¸ªå¼•ç”¨é—­ç¯æ—¶ï¼Œå³ä½¿å¤–éƒ¨å·²ç»æ²¡æœ‰å¯¹è¿™äº›å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä»¬çš„å¼•ç”¨è®¡æ•°æ°¸è¿œä¸ä¼šé™ä¸ºé›¶ã€‚å› æ­¤ï¼Œå¼•ç”¨è®¡æ•°æœºåˆ¶æ— æ³•å›æ”¶è¿™éƒ¨åˆ†å†…å­˜ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ ä¾‹å­ï¼š class Node: def __init__(self, value): self.value = value self.next = None # æŒ‡å‘ä¸‹ä¸€ä¸ªNode node1 = Node(1) node2 = Node(2) node1.next = node2 # node1å¼•ç”¨node2 node2.next = node1 # node2å¼•ç”¨node1ï¼Œå½¢æˆå¾ªç¯å¼•ç”¨ # æ­¤æ—¶ï¼Œå³ä½¿ del node1 å’Œ del node2 # node1 å’Œ node2 çš„å¼•ç”¨è®¡æ•°ä»ç„¶ä¸ä¸ºé›¶ (å› ä¸ºå®ƒä»¬å†…éƒ¨ç›¸äº’å¼•ç”¨) # å®ƒä»¬å°†ä¸ä¼šè¢«å¼•ç”¨è®¡æ•°æœºåˆ¶å›æ”¶ del node1 del node2 # å†…å­˜ä»è¢«å ç”¨ Pythonå¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨ï¼š\nä¸ºäº†è§£å†³å¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼ï¼ŒPythonå¼•å…¥äº†åˆ†ä»£åƒåœ¾å›æ”¶å™¨ï¼ˆGenerational Garbage Collectorï¼‰ã€‚ åƒåœ¾å›æ”¶å™¨çš„å·¥ä½œæ–¹å¼ï¼š å®ƒä¼šå®šæœŸè¿è¡Œï¼Œæ£€æµ‹é‚£äº›å¼•ç”¨è®¡æ•°ä¸ä¸ºé›¶ä½†å®é™…ä¸Šå·²ä¸å¯è¾¾ï¼ˆä»æ ¹å¯¹è±¡æ— æ³•è®¿é—®ï¼‰çš„å¾ªç¯å¼•ç”¨å¯¹è±¡ã€‚ å®ƒå°†å¯¹è±¡åˆ†ä¸ºä¸‰ä»£ï¼šæ–°åˆ›å»ºçš„å¯¹è±¡å±äºç¬¬0ä»£ã€‚å¦‚æœå®ƒä»¬åœ¨åƒåœ¾å›æ”¶å‘¨æœŸä¸­å­˜æ´»ä¸‹æ¥ï¼Œå°±ä¼šå‡çº§åˆ°ç¬¬1ä»£ï¼›å†å­˜æ´»å°±å‡çº§åˆ°ç¬¬2ä»£ã€‚ åƒåœ¾å›æ”¶å™¨åœ¨ç¬¬0ä»£è¿è¡Œæœ€é¢‘ç¹ï¼Œåœ¨ç¬¬1ä»£å’Œç¬¬2ä»£è¿è¡Œé¢‘ç‡é€æ¸é™ä½ï¼Œå› ä¸ºé€šå¸¸è®¤ä¸ºè¶Šè€çš„å¯¹è±¡è¶Šç¨³å®šï¼Œè¶Šä¸å¯èƒ½æˆä¸ºåƒåœ¾ã€‚ å½“åƒåœ¾å›æ”¶å™¨è¯†åˆ«å‡ºå¾ªç¯å¼•ç”¨æ—¶ï¼Œå®ƒä¼šæ‰“ç ´è¿™äº›å¾ªç¯ï¼Œä½¿å¯¹è±¡çš„å¼•ç”¨è®¡æ•°é™ä¸ºé›¶ï¼Œä»è€Œå…è®¸å¼•ç”¨è®¡æ•°æœºåˆ¶å›æ”¶å†…å­˜ã€‚ å¯ä»¥ä½¿ç”¨ gc æ¨¡å—æ¥æ‰‹åŠ¨æ§åˆ¶æˆ–æ£€æŸ¥åƒåœ¾å›æ”¶å™¨ã€‚ import gc gc.collect() # æ‰‹åŠ¨è§¦å‘åƒåœ¾å›æ”¶ gc.set_threshold(700, 10, 10) # è®¾ç½®åƒåœ¾å›æ”¶çš„é˜ˆå€¼ (å¯¹è±¡åˆ†é…æ•°ã€ç¬¬0ä»£å­˜æ´»æ•°ã€ç¬¬1ä»£å­˜æ´»æ•°) 3. Pythonåº“ä¸æ¡†æ¶ç­”æ¡ˆ\r#\rå¸¸ç”¨æ ‡å‡†åº“\r#\rosã€sysã€datetimeã€jsonã€reã€collectionsç­‰ã€‚ os æ¨¡å—:\nä½œç”¨: æä¾›ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„åŠŸèƒ½ã€‚ å¸¸è§ç”¨æ³•: æ–‡ä»¶å’Œç›®å½•æ“ä½œï¼šos.path.join(), os.listdir(), os.mkdir(), os.remove(), os.rmdir(), os.rename()ã€‚ ç¯å¢ƒå˜é‡ï¼šos.environã€‚ æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼šos.system(), os.popen()ã€‚ è·å–å½“å‰å·¥ä½œç›®å½•ï¼šos.getcwd()ã€‚ æ”¹å˜å½“å‰å·¥ä½œç›®å½•ï¼šos.chdir()ã€‚ import os # print(os.getcwd()) # os.mkdir(\u0026#34;test_dir\u0026#34;) # print(os.listdir(\u0026#34;.\u0026#34;)) # os.rmdir(\u0026#34;test_dir\u0026#34;) sys æ¨¡å—:\nä½œç”¨: æä¾›å¯¹Pythonè§£é‡Šå™¨åŠå…¶ç¯å¢ƒçš„è®¿é—®ã€‚ å¸¸è§ç”¨æ³•: å‘½ä»¤è¡Œå‚æ•°ï¼šsys.argvã€‚ é€€å‡ºç¨‹åºï¼šsys.exit()ã€‚ è·å–Pythonç‰ˆæœ¬ä¿¡æ¯ï¼šsys.versionã€‚ æ¨¡å—æœç´¢è·¯å¾„ï¼šsys.pathã€‚ æ ‡å‡†è¾“å…¥/è¾“å‡º/é”™è¯¯æµï¼šsys.stdin, sys.stdout, sys.stderrã€‚ import sys # print(sys.argv) # å‘½ä»¤è¡Œå‚æ•°åˆ—è¡¨ # print(sys.version) # print(sys.path) datetime æ¨¡å—:\nä½œç”¨: ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´ã€‚ å¸¸è§ç”¨æ³•: è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´ï¼šdatetime.datetime.now()ã€‚ åˆ›å»ºæ—¥æœŸ/æ—¶é—´å¯¹è±¡ï¼šdatetime.date(), datetime.time(), datetime.datetime()ã€‚ æ—¶é—´é—´éš”ï¼šdatetime.timedelta()ã€‚ æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´ï¼šstrftime() (æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²), strptime() (ä»å­—ç¬¦ä¸²è§£æ)ã€‚ import datetime now = datetime.datetime.now() print(now) print(now.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;)) future_date = now + datetime.timedelta(days=7) print(future_date) json æ¨¡å—:\nä½œç”¨: ç”¨äºå¤„ç†JSONï¼ˆJavaScript Object Notationï¼‰æ•°æ®ï¼Œå®ç°Pythonå¯¹è±¡ä¸JSONå­—ç¬¦ä¸²ä¹‹é—´çš„è½¬æ¢ã€‚ å¸¸è§ç”¨æ³•: Pythonå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²ï¼šjson.dumps()ã€‚ JSONå­—ç¬¦ä¸²è½¬Pythonå¯¹è±¡ï¼šjson.loads()ã€‚ Pythonå¯¹è±¡å†™å…¥JSONæ–‡ä»¶ï¼šjson.dump()ã€‚ ä»JSONæ–‡ä»¶è¯»å–Pythonå¯¹è±¡ï¼šjson.load()ã€‚ import json data = {\u0026#39;name\u0026#39;: \u0026#39;Alice\u0026#39;, \u0026#39;age\u0026#39;: 30, \u0026#39;isStudent\u0026#39;: False} json_string = json.dumps(data, indent=4) # indentç”¨äºç¾åŒ–è¾“å‡º print(json_string) parsed_data = json.loads(json_string) print(parsed_data[\u0026#39;name\u0026#39;]) re æ¨¡å—:\nä½œç”¨: æä¾›æ­£åˆ™è¡¨è¾¾å¼æ“ä½œï¼Œç”¨äºå­—ç¬¦ä¸²çš„æ¨¡å¼åŒ¹é…å’ŒæŸ¥æ‰¾ã€æ›¿æ¢ç­‰ã€‚ å¸¸è§ç”¨æ³•: åŒ¹é…ï¼šre.match() (ä»å¼€å¤´åŒ¹é…), re.search() (æ‰«ææ•´ä¸ªå­—ç¬¦ä¸²åŒ¹é…)ã€‚ æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹ï¼šre.findall()ã€‚ æ›¿æ¢ï¼šre.sub()ã€‚ åˆ†å‰²ï¼šre.split()ã€‚ ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ï¼šre.compile() (æé«˜é‡å¤ä½¿ç”¨çš„æ•ˆç‡)ã€‚ import re text = \u0026#34;My phone number is 123-456-7890.\u0026#34; pattern = r\u0026#34;\\d{3}-\\d{3}-\\d{4}\u0026#34; # åŒ¹é…ç”µè¯å·ç  match = re.search(pattern, text) if match: print(f\u0026#34;Found phone number: {match.group(0)}\u0026#34;) collections æ¨¡å—:\nä½œç”¨: æä¾›äº†å¯¹å†…ç½®æ•°æ®ç±»å‹ï¼ˆå¦‚åˆ—è¡¨ã€å­—å…¸ã€å…ƒç»„ï¼‰çš„å¢å¼ºå’Œæ›¿ä»£ã€‚ å¸¸è§ç”¨æ³•: defaultdict: å­—å…¸çš„å­ç±»ï¼Œå½“è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é”®æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªé»˜è®¤å€¼ï¼Œè€Œä¸æ˜¯æŠ›å‡ºKeyErrorã€‚ from collections import defaultdict s = [(\u0026#39;yellow\u0026#39;, 1), (\u0026#39;blue\u0026#39;, 2), (\u0026#39;yellow\u0026#39;, 3), (\u0026#39;blue\u0026#39;, 4), (\u0026#39;red\u0026#39;, 1)] d = defaultdict(list) # é»˜è®¤å€¼æ˜¯ç©ºåˆ—è¡¨ for k, v in s: d[k].append(v) print(d) # defaultdict(\u0026lt;class \u0026#39;list\u0026#39;\u0026gt;, {\u0026#39;yellow\u0026#39;: [1, 3], \u0026#39;blue\u0026#39;: [2, 4], \u0026#39;red\u0026#39;: [1]}) Counter: å­—å…¸çš„å­ç±»ï¼Œç”¨äºè®¡æ•°å¯å“ˆå¸Œå¯¹è±¡ã€‚ from collections import Counter words = [\u0026#39;apple\u0026#39;, \u0026#39;banana\u0026#39;, \u0026#39;apple\u0026#39;, \u0026#39;orange\u0026#39;, \u0026#39;banana\u0026#39;, \u0026#39;apple\u0026#39;] word_counts = Counter(words) print(word_counts) # Counter({\u0026#39;apple\u0026#39;: 3, \u0026#39;banana\u0026#39;: 2, \u0026#39;orange\u0026#39;: 1}) print(word_counts.most_common(2)) # [(\u0026#39;apple\u0026#39;, 3), (\u0026#39;banana\u0026#39;, 2)] namedtuple: åˆ›å»ºå¸¦æœ‰å‘½åå­—æ®µçš„å…ƒç»„å­ç±»ï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚ from collections import namedtuple Point = namedtuple(\u0026#39;Point\u0026#39;, [\u0026#39;x\u0026#39;, \u0026#39;y\u0026#39;]) p = Point(11, y=22) print(p.x, p.y) # 11 22 deque (åŒç«¯é˜Ÿåˆ—): åˆ—è¡¨çš„çº¿ç¨‹å®‰å…¨æ›¿ä»£å“ï¼Œæ”¯æŒä»ä¸¤ç«¯å¿«é€Ÿæ·»åŠ å’Œåˆ é™¤å…ƒç´ ã€‚ from collections import deque d = deque([1, 2, 3]) d.appendleft(0) # [0, 1, 2, 3] d.append(4) # [0, 1, 2, 3, 4] d.popleft() # 0, deque([1, 2, 3, 4]) d.pop() # 4, deque([1, 2, 3]) Webå¼€å‘\r#\rå¦‚æœä½ æ˜¯Webå¼€å‘å²—ï¼Œå¯èƒ½ä¼šé—®åŠDjangoã€Flaskç­‰æ¡†æ¶çš„ä½¿ç”¨ç»éªŒï¼Œä»¥åŠRESTful APIã€ORMç­‰æ¦‚å¿µã€‚ Django:\nç‰¹ç‚¹: â€œå¤§è€Œå…¨â€çš„Webæ¡†æ¶ï¼Œæä¾›äº†ORMã€ç®¡ç†åå°ã€æ¨¡æ¿ç³»ç»Ÿã€è¡¨å•å¤„ç†ã€ä¼šè¯ç®¡ç†ç­‰å¼€ç®±å³ç”¨çš„åŠŸèƒ½ã€‚ ç†å¿µ: â€œBatteries includedâ€ï¼ˆå†…ç½®ç”µæ± ï¼‰ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å¤§å‹ã€å¤æ‚çš„Webåº”ç”¨ã€‚ MVC/MTVæ¨¡å¼: Djangoéµå¾ªMTVï¼ˆModel-Template-Viewï¼‰æ¨¡å¼ï¼Œä¸ä¼ ç»Ÿçš„MVCç±»ä¼¼ã€‚ Model: å¤„ç†æ•°æ®é€»è¾‘ï¼Œé€šå¸¸é€šè¿‡ORMä¸æ•°æ®åº“äº¤äº’ã€‚ Template: å¤„ç†ç”¨æˆ·ç•Œé¢ï¼Œè´Ÿè´£æ¸²æŸ“HTMLã€‚ View: å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œæ¥æ”¶è¯·æ±‚ï¼Œè°ƒç”¨Modelï¼Œé€‰æ‹©Templateå¹¶è¿”å›å“åº”ã€‚ ORM (Object-Relational Mapping): Djangoå†…ç½®å¼ºå¤§çš„ORMï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨Pythonå¯¹è±¡æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ— éœ€ç¼–å†™SQLè¯­å¥ã€‚ URLè·¯ç”±: é€šè¿‡urls.pyæ–‡ä»¶å®šä¹‰URLæ¨¡å¼åˆ°è§†å›¾å‡½æ•°çš„æ˜ å°„ã€‚ ç®¡ç†åå°: è‡ªåŠ¨ç”Ÿæˆå¼ºå¤§çš„ç®¡ç†ç•Œé¢ï¼Œæ–¹ä¾¿ç®¡ç†æ•°æ®åº“æ•°æ®ã€‚ Flask:\nç‰¹ç‚¹: â€œå°è€Œç²¾â€çš„å¾®æ¡†æ¶ï¼Œæ ¸å¿ƒåŠŸèƒ½ç®€æ´ï¼Œé«˜åº¦å¯æ‰©å±•ã€‚ ç†å¿µ: â€œDo one thing and do it wellâ€ï¼Œä¸å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç»„ä»¶ï¼Œå…è®¸å¼€å‘è€…è‡ªç”±é€‰æ‹©æ•°æ®åº“ã€æ¨¡æ¿å¼•æ“ç­‰ã€‚ æ ¸å¿ƒç»„ä»¶: è·¯ç”±ã€è¯·æ±‚/å“åº”å¯¹è±¡ã€æ¨¡æ¿æ¸²æŸ“ï¼ˆJinja2ï¼‰ã€‚ æ‰©å±•: é€šè¿‡å„ç§ç¤¾åŒºå¼€å‘çš„æ‰©å±•ï¼ˆå¦‚Flask-SQLAlchemy, Flask-Login, Flask-RESTfulï¼‰æ¥æ·»åŠ åŠŸèƒ½ã€‚ é€‚ç”¨åœºæ™¯: å°å‹é¡¹ç›®ã€APIæœåŠ¡ã€å¿«é€ŸåŸå‹å¼€å‘ã€‚ RESTful API:\næ¦‚å¿µ: ä¸€ç§è®¾è®¡ç½‘ç»œåº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰çš„æ¶æ„é£æ ¼ï¼ŒåŸºäºHTTPåè®®ã€‚å®ƒå°†æ‰€æœ‰äº‹ç‰©éƒ½è§†ä¸ºèµ„æºï¼Œå¹¶é€šè¿‡HTTPæ–¹æ³•ï¼ˆGET, POST, PUT, DELETEç­‰ï¼‰å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚ æ ¸å¿ƒåŸåˆ™: èµ„æºï¼ˆResourceï¼‰: APIä¸­çš„æ¯ä¸ªURIä»£è¡¨ä¸€ç§èµ„æºï¼ˆå¦‚/users, /products/123ï¼‰ã€‚ ç»Ÿä¸€æ¥å£ï¼ˆUniform Interfaceï¼‰: ä½¿ç”¨æ ‡å‡†çš„HTTPæ–¹æ³•ï¼ˆGETè·å–ã€POSTåˆ›å»ºã€PUT/PATCHæ›´æ–°ã€DELETEåˆ é™¤ï¼‰æ¥æ“ä½œèµ„æºã€‚ æ— çŠ¶æ€ï¼ˆStatelessï¼‰: æœåŠ¡å™¨ä¸ä¿å­˜å®¢æˆ·ç«¯çš„ä¼šè¯ä¿¡æ¯ã€‚æ¯æ¬¡è¯·æ±‚éƒ½å¿…é¡»åŒ…å«æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ã€‚ å¯ç¼“å­˜ï¼ˆCacheableï¼‰: å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜å“åº”ï¼Œæé«˜æ€§èƒ½ã€‚ åˆ†å±‚ç³»ç»Ÿï¼ˆLayered Systemï¼‰: å®¢æˆ·ç«¯æ— éœ€çŸ¥é“å®ƒè¿æ¥çš„æ˜¯æœ€ç»ˆæœåŠ¡å™¨è¿˜æ˜¯ä¸­é—´ä»£ç†ã€‚ ä¼˜ç‚¹: ç®€å•ã€æ˜“äºç†è§£å’Œå®ç°ï¼Œè·¨å¹³å°å…¼å®¹æ€§å¥½ï¼Œé€‚åˆå‰åç«¯åˆ†ç¦»å¼€å‘ã€‚ ORM (Object-Relational Mapping):\næ¦‚å¿µ: ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œç”¨äºåœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Pythonï¼‰å’Œå…³ç³»å‹æ•°æ®åº“ä¹‹é—´å»ºç«‹æ˜ å°„ã€‚å®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼ˆæ“ä½œPythonå¯¹è±¡ï¼‰æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œæ— éœ€ç›´æ¥ç¼–å†™SQLè¯­å¥ã€‚ å·¥ä½œåŸç†: ORMåº“ï¼ˆå¦‚SQLAlchemy, Django ORMï¼‰å°†æ•°æ®åº“è¡¨æ˜ å°„ä¸ºPythonç±»ï¼Œå°†è¡¨çš„è¡Œæ˜ å°„ä¸ºç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰ï¼Œå°†è¡¨çš„å­—æ®µæ˜ å°„ä¸ºå¯¹è±¡çš„å±æ€§ã€‚ ä¼˜ç‚¹: ç®€åŒ–æ•°æ®åº“æ“ä½œ: å¼€å‘è€…æ— éœ€å­¦ä¹ å¤æ‚çš„SQLè¯­æ³•ï¼Œåªéœ€ä½¿ç”¨Pythonä»£ç ã€‚ æé«˜å¼€å‘æ•ˆç‡: å‡å°‘äº†ç¼–å†™å’Œç»´æŠ¤SQLçš„å·¥ä½œé‡ã€‚ æ•°æ®åº“æ— å…³æ€§: è®¸å¤šORMæ”¯æŒå¤šç§æ•°æ®åº“åç«¯ï¼Œåˆ‡æ¢æ•°æ®åº“æ—¶ä»£ç æ”¹åŠ¨è¾ƒå°ã€‚ å®‰å…¨æ€§: é€šå¸¸å†…ç½®SQLæ³¨å…¥é˜²æŠ¤ã€‚ ç¼ºç‚¹: æ€§èƒ½å¼€é”€: å¯¹äºéå¸¸å¤æ‚çš„æŸ¥è¯¢ï¼ŒORMç”Ÿæˆçš„SQLå¯èƒ½ä¸å¦‚æ‰‹åŠ¨ä¼˜åŒ–çš„SQLé«˜æ•ˆã€‚ å­¦ä¹ æ›²çº¿: æŒæ¡ORMçš„å¤æ‚ç‰¹æ€§ä¹Ÿéœ€è¦æ—¶é—´ã€‚ æ•°æ®ç§‘å­¦/æœºå™¨å­¦ä¹ \r#\rå¯¹äºæ•°æ®ç§‘å­¦å²—ï¼Œä¼šè€ƒå¯ŸNumPyã€Pandasã€Matplotlibã€Scikit-learnç­‰åº“ã€‚ NumPy (Numerical Python):\nä½œç”¨: Pythonä¸­ç”¨äºç§‘å­¦è®¡ç®—çš„æ ¸å¿ƒåº“ï¼Œæä¾›äº†é«˜æ€§èƒ½çš„å¤šç»´æ•°ç»„å¯¹è±¡ï¼ˆndarrayï¼‰ä»¥åŠç”¨äºå¤„ç†è¿™äº›æ•°ç»„çš„å·¥å…·ã€‚ ç‰¹ç‚¹: ndarray: å¿«é€Ÿã€é«˜æ•ˆçš„æ•°ç»„æ“ä½œï¼Œæ¯”Pythonå†…ç½®åˆ—è¡¨åœ¨å¤„ç†å¤§é‡æ•°å€¼æ•°æ®æ—¶æ€§èƒ½ä¼˜è¶Šã€‚ å‘é‡åŒ–æ“ä½œ: æ”¯æŒå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ•°å­¦è¿ç®—ï¼Œæ— éœ€æ˜¾å¼å¾ªç¯ï¼Œå¤§å¤§æé«˜è®¡ç®—é€Ÿåº¦ã€‚ å¹¿æ’­ï¼ˆBroadcastingï¼‰: å…è®¸ä¸åŒå½¢çŠ¶çš„æ•°ç»„è¿›è¡Œç®—æœ¯è¿ç®—ã€‚ å¸¸è§ç”¨æ³•: æ•°ç»„åˆ›å»ºã€ç´¢å¼•ã€åˆ‡ç‰‡ã€æ•°å­¦è¿ç®—ã€çº¿æ€§ä»£æ•°ã€å‚…é‡Œå¶å˜æ¢ç­‰ã€‚ import numpy as np arr = np.array([[1, 2, 3], [4, 5, 6]]) print(arr * 2) # å‘é‡åŒ–æ“ä½œ print(arr.shape) # (2, 3) Pandas:\nä½œç”¨: åŸºäºNumPyæ„å»ºçš„æ•°æ®åˆ†æåº“ï¼Œæä¾›äº†é«˜æ€§èƒ½ã€æ˜“äºä½¿ç”¨çš„æ•°æ®ç»“æ„å’Œæ•°æ®åˆ†æå·¥å…·ã€‚ æ ¸å¿ƒæ•°æ®ç»“æ„: Series: ä¸€ç»´å¸¦æ ‡ç­¾æ•°ç»„ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å¸¦ç´¢å¼•çš„NumPyæ•°ç»„ã€‚ DataFrame: äºŒç»´å¸¦æ ‡ç­¾æ•°æ®ç»“æ„ï¼Œå¯ä»¥çœ‹ä½œæ˜¯è¡¨æ ¼ï¼Œæ¯åˆ—å¯ä»¥æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œç±»ä¼¼äºç”µå­è¡¨æ ¼æˆ–SQLè¡¨ã€‚ å¸¸è§ç”¨æ³•: æ•°æ®åŠ è½½ï¼ˆCSV, Excel, SQLï¼‰ã€æ•°æ®æ¸…æ´—ã€æ•°æ®è½¬æ¢ã€æ•°æ®èšåˆã€æ•°æ®åˆå¹¶ã€æ—¶é—´åºåˆ—åˆ†æç­‰ã€‚ import pandas as pd data = {\u0026#39;Name\u0026#39;: [\u0026#39;Alice\u0026#39;, \u0026#39;Bob\u0026#39;, \u0026#39;Charlie\u0026#39;], \u0026#39;Age\u0026#39;: [25, 30, 35]} df = pd.DataFrame(data) print(df) print(df[df[\u0026#39;Age\u0026#39;] \u0026gt; 28]) # æ•°æ®ç­›é€‰ Matplotlib:\nä½œç”¨: Pythonä¸­æœ€æµè¡Œçš„ç»˜å›¾åº“ï¼Œç”¨äºåˆ›å»ºé™æ€ã€åŠ¨æ€å’Œäº¤äº’å¼çš„å¯è§†åŒ–å›¾è¡¨ã€‚ ç‰¹ç‚¹: åŠŸèƒ½å¼ºå¤§ã€é«˜åº¦å¯å®šåˆ¶ï¼Œæ”¯æŒå„ç§å›¾è¡¨ç±»å‹ï¼ˆæŠ˜çº¿å›¾ã€æ•£ç‚¹å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰ï¼‰ã€‚ å¸¸è§ç”¨æ³•: pyplot æ¨¡å—æä¾›ç±»ä¼¼MATLABçš„ç»˜å›¾æ¥å£ã€‚ import matplotlib.pyplot as plt x = [1, 2, 3, 4] y = [1, 4, 2, 6] plt.plot(x, y) plt.xlabel(\u0026#34;X-axis\u0026#34;) plt.ylabel(\u0026#34;Y-axis\u0026#34;) plt.title(\u0026#34;Simple Plot\u0026#34;) plt.show() Scikit-learn:\nä½œç”¨: Pythonä¸­æœ€å…¨é¢ã€æœ€æµè¡Œçš„æœºå™¨å­¦ä¹ åº“ï¼Œæä¾›äº†å„ç§ç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ç®—æ³•ï¼Œä»¥åŠæ¨¡å‹é€‰æ‹©ã€é¢„å¤„ç†ç­‰å·¥å…·ã€‚ ç‰¹ç‚¹: ç»Ÿä¸€çš„APIè®¾è®¡ï¼Œæ˜“äºä½¿ç”¨å’Œå­¦ä¹ ã€‚ å¸¸è§ç®—æ³•/åŠŸèƒ½: åˆ†ç±»: é€»è¾‘å›å½’ã€æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰ã€å†³ç­–æ ‘ã€éšæœºæ£®æ—ã€Kè¿‘é‚»ï¼ˆKNNï¼‰ã€‚ å›å½’: çº¿æ€§å›å½’ã€å²­å›å½’ã€Lassoå›å½’ã€‚ èšç±»: K-Meansã€DBSCANã€‚ é™ç»´: PCAã€‚ æ¨¡å‹é€‰æ‹©: äº¤å‰éªŒè¯ã€ç½‘æ ¼æœç´¢ã€‚ é¢„å¤„ç†: ç‰¹å¾ç¼©æ”¾ï¼ˆæ ‡å‡†åŒ–ã€å½’ä¸€åŒ–ï¼‰ã€ç¼ºå¤±å€¼å¤„ç†ã€‚ å·¥ä½œæµç¨‹: é€šå¸¸åŒ…æ‹¬æ•°æ®é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€æ¨¡å‹è¯„ä¼°ã€æ¨¡å‹é¢„æµ‹ã€‚ from sklearn.linear_model import LinearRegression from sklearn.model_selection import train_test_split from sklearn.metrics import mean_squared_error import numpy as np # ç¤ºä¾‹æ•°æ® X = np.array([[1], [2], [3], [4], [5]]) y = np.array([2, 4, 5, 4, 5]) # åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›† X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42) # åˆ›å»ºå¹¶è®­ç»ƒæ¨¡å‹ model = LinearRegression() model.fit(X_train, y_train) # é¢„æµ‹ y_pred = model.predict(X_test) print(f\u0026#34;Predicted: {y_pred}, Actual: {y_test}\u0026#34;) print(f\u0026#34;MSE: {mean_squared_error(y_test, y_pred)}\u0026#34;) æ•°æ®åº“\r#\rå¦‚ä½•ä½¿ç”¨Pythonè¿æ¥æ•°æ®åº“ï¼ˆä¾‹å¦‚ï¼šsqlite3ã€psycopg2ã€SQLAlchemyï¼‰ï¼Ÿ Pythonè¿æ¥æ•°æ®åº“é€šå¸¸éµå¾ªDB-API 2.0ï¼ˆPython Database API Specification v2.0ï¼‰æ ‡å‡†ï¼Œè¿™ä½¿å¾—ä¸åŒæ•°æ®åº“çš„è¿æ¥æ–¹å¼å…·æœ‰ç›¸ä¼¼çš„æ¥å£ã€‚\nsqlite3 (å†…ç½®):\nç‰¹ç‚¹: Pythonæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚å®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€æ–‡ä»¶å‹çš„æ•°æ®åº“ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–ä½œä¸ºåº”ç”¨ç¨‹åºçš„æœ¬åœ°å­˜å‚¨ã€‚ è¿æ¥æ­¥éª¤: å¯¼å…¥ sqlite3 æ¨¡å—ã€‚ ä½¿ç”¨ sqlite3.connect() è¿æ¥åˆ°æ•°æ®åº“æ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼‰ã€‚ åˆ›å»ºæ¸¸æ ‡å¯¹è±¡ cursor()ã€‚ æ‰§è¡ŒSQLè¯­å¥ execute()ã€‚ æäº¤æ›´æ”¹ commit()ã€‚ å…³é—­è¿æ¥ close()ã€‚ import sqlite3 conn = None # åˆå§‹åŒ–è¿æ¥ä¸ºNone try: conn = sqlite3.connect(\u0026#39;example.db\u0026#39;) # è¿æ¥åˆ°æ•°æ®åº“æ–‡ä»¶ cursor = conn.cursor() # åˆ›å»ºè¡¨ cursor.execute(\u0026#39;\u0026#39;\u0026#39; CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY, name TEXT NOT NULL, age INTEGER ) \u0026#39;\u0026#39;\u0026#39;) # æ’å…¥æ•°æ® cursor.execute(\u0026#34;INSERT INTO users (name, age) VALUES (?, ?)\u0026#34;, (\u0026#34;Alice\u0026#34;, 30)) cursor.execute(\u0026#34;INSERT INTO users (name, age) VALUES (?, ?)\u0026#34;, (\u0026#34;Bob\u0026#34;, 25)) conn.commit() # æäº¤æ›´æ”¹ # æŸ¥è¯¢æ•°æ® cursor.execute(\u0026#34;SELECT * FROM users WHERE age \u0026gt; ?\u0026#34;, (28,)) rows = cursor.fetchall() for row in rows: print(row) # (1, \u0026#39;Alice\u0026#39;, 30) except sqlite3.Error as e: print(f\u0026#34;Database error: {e}\u0026#34;) finally: if conn: conn.close() # å…³é—­è¿æ¥ psycopg2 (PostgreSQL):\nç‰¹ç‚¹: ç”¨äºè¿æ¥PostgreSQLæ•°æ®åº“çš„æµè¡Œé€‚é…å™¨ã€‚éœ€è¦é€šè¿‡pip install psycopg2-binaryå®‰è£…ã€‚ è¿æ¥æ­¥éª¤: ç±»ä¼¼sqlite3ï¼Œä½†è¿æ¥å­—ç¬¦ä¸²å’Œå¼‚å¸¸ç±»å‹ä¸åŒã€‚ import psycopg2 # å‡è®¾PostgreSQLè¿è¡Œåœ¨æœ¬åœ°ï¼Œç”¨æˆ·åä¸ºpostgresï¼Œæ— å¯†ç ï¼Œæ•°æ®åº“åä¸ºmydatabase db_config = { \u0026#34;host\u0026#34;: \u0026#34;localhost\u0026#34;, \u0026#34;database\u0026#34;: \u0026#34;mydatabase\u0026#34;, \u0026#34;user\u0026#34;: \u0026#34;postgres\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;\u0026#34; } conn = None try: conn = psycopg2.connect(**db_config) cursor = conn.cursor() # åˆ›å»ºè¡¨ (å¦‚æœä¸å­˜åœ¨) cursor.execute(\u0026#39;\u0026#39;\u0026#39; CREATE TABLE IF NOT EXISTS products ( id SERIAL PRIMARY KEY, name VARCHAR(255) NOT NULL, price DECIMAL(10, 2) ) \u0026#39;\u0026#39;\u0026#39;) conn.commit() # æ’å…¥æ•°æ® cursor.execute(\u0026#34;INSERT INTO products (name, price) VALUES (%s, %s)\u0026#34;, (\u0026#34;Laptop\u0026#34;, 1200.50)) conn.commit() # æŸ¥è¯¢æ•°æ® cursor.execute(\u0026#34;SELECT * FROM products\u0026#34;) rows = cursor.fetchall() for row in rows: print(row) except psycopg2.Error as e: print(f\u0026#34;PostgreSQL error: {e}\u0026#34;) finally: if conn: conn.close() SQLAlchemy (ORM):\nç‰¹ç‚¹: Pythonä¸­æœ€å¼ºå¤§å’Œçµæ´»çš„ORMå’Œæ•°æ®åº“å·¥å…·åŒ…ã€‚å®ƒæä¾›äº†ä¸¤ç§ä¸»è¦çš„ä½¿ç”¨æ–¹å¼ï¼š ORM (Object Relational Mapper)ï¼šå°†Pythonç±»æ˜ å°„åˆ°æ•°æ®åº“è¡¨ï¼Œé€šè¿‡æ“ä½œPythonå¯¹è±¡æ¥æ“ä½œæ•°æ®åº“ã€‚ Core (SQL Expression Language)ï¼šå…è®¸ä½ ä»¥Pythonicçš„æ–¹å¼æ„å»ºSQLè¡¨è¾¾å¼ï¼Œä½†ä»ç„¶æ˜¯åŸºäºSQLçš„ã€‚ ä¼˜ç‚¹: æŠ½è±¡äº†åº•å±‚æ•°æ®åº“çš„å·®å¼‚ï¼Œæä¾›äº†æ›´é«˜çº§åˆ«çš„æŠ½è±¡ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚ éœ€è¦å®‰è£…: pip install sqlalchemyï¼Œä»¥åŠå¯¹åº”æ•°æ®åº“çš„é©±åŠ¨ï¼ˆå¦‚psycopg2 for PostgreSQL, mysqlclient for MySQLï¼‰ã€‚ ORMæ¨¡å¼ç¤ºä¾‹: from sqlalchemy import create_engine, Column, Integer, String, Float from sqlalchemy.orm import sessionmaker from sqlalchemy.ext.declarative import declarative_base # 1. å®šä¹‰æ•°æ®åº“è¿æ¥ # ä½¿ç”¨SQLiteå†…å­˜æ•°æ®åº“ä½œä¸ºç¤ºä¾‹ engine = create_engine(\u0026#39;sqlite:///:memory:\u0026#39;) # æˆ– \u0026#39;postgresql://user:pass@host:port/dbname\u0026#39; # 2. å£°æ˜åŸºç±» Base = declarative_base() # 3. å®šä¹‰æ¨¡å‹ (æ˜ å°„åˆ°æ•°æ®åº“è¡¨) class User(Base): __tablename__ = \u0026#39;users\u0026#39; id = Column(Integer, primary_key=True) name = Column(String) email = Column(String) def __repr__(self): return f\u0026#34;\u0026lt;User(id={self.id}, name=\u0026#39;{self.name}\u0026#39;, email=\u0026#39;{self.email}\u0026#39;)\u0026gt;\u0026#34; # 4. åˆ›å»ºè¡¨ Base.metadata.create_all(engine) # 5. åˆ›å»ºä¼šè¯ Session = sessionmaker(bind=engine) session = Session() # 6. æ·»åŠ æ•°æ® user1 = User(name=\u0026#39;Alice\u0026#39;, email=\u0026#39;alice@example.com\u0026#39;) user2 = User(name=\u0026#39;Bob\u0026#39;, email=\u0026#39;bob@example.com\u0026#39;) session.add_all([user1, user2]) session.commit() # æäº¤äº‹åŠ¡ # 7. æŸ¥è¯¢æ•°æ® # æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· all_users = session.query(User).all() print(\u0026#34;All users:\u0026#34;, all_users) # æŒ‰æ¡ä»¶æŸ¥è¯¢ alice = session.query(User).filter_by(name=\u0026#39;Alice\u0026#39;).first() print(\u0026#34;Alice:\u0026#34;, alice) # 8. æ›´æ–°æ•°æ® if alice: alice.email = \u0026#39;alice.new@example.com\u0026#39; session.commit() print(\u0026#34;Updated Alice:\u0026#34;, session.query(User).filter_by(name=\u0026#39;Alice\u0026#39;).first()) # 9. åˆ é™¤æ•°æ® # session.delete(user2) # session.commit() # print(\u0026#34;Users after deletion:\u0026#34;, session.query(User).all()) # 10. å…³é—­ä¼šè¯ session.close() 4. ç®—æ³•ä¸æ•°æ®ç»“æ„ç­”æ¡ˆ\r#\rå¸¸è§æ•°æ®ç»“æ„\r#\ræ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ ‘ã€å›¾ã€å“ˆå¸Œè¡¨ï¼ˆå­—å…¸ï¼‰ç­‰ã€‚ æ•°ç»„ï¼ˆPythonä¸­çš„åˆ—è¡¨ listï¼‰:\nç‰¹ç‚¹: å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œé€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®ï¼Œè®¿é—®é€Ÿåº¦å¿«ã€‚Pythonçš„åˆ—è¡¨æ˜¯åŠ¨æ€æ•°ç»„ï¼Œå¯ä»¥è‡ªåŠ¨æ‰©å®¹/ç¼©å®¹ã€‚ æ“ä½œ: æŸ¥æ‰¾ï¼ˆæŒ‰ç´¢å¼•ï¼‰: O(1) æ’å…¥/åˆ é™¤ï¼ˆæœ«å°¾ï¼‰: O(1) (å‡æ‘Š) æ’å…¥/åˆ é™¤ï¼ˆå¼€å¤´/ä¸­é—´ï¼‰: O(N) (éœ€è¦ç§»åŠ¨åç»­å…ƒç´ ) é€‚ç”¨åœºæ™¯: éœ€è¦å¿«é€Ÿéšæœºè®¿é—®å…ƒç´ ï¼Œå…ƒç´ æ•°é‡å˜åŒ–ä¸é¢‘ç¹ã€‚ é“¾è¡¨ï¼ˆPythonä¸­æ— å†…ç½®ï¼Œéœ€è‡ªå®šä¹‰æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼‰:\nç‰¹ç‚¹: å…ƒç´ åœ¨å†…å­˜ä¸­ä¸è¿ç»­å­˜å‚¨ï¼Œæ¯ä¸ªå…ƒç´ ï¼ˆèŠ‚ç‚¹ï¼‰åŒ…å«æ•°æ®å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªï¼ˆæˆ–ä¸Šä¸€ä¸ªï¼‰èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ æ“ä½œ: æŸ¥æ‰¾ï¼ˆæŒ‰å€¼ï¼‰: O(N) æ’å…¥/åˆ é™¤ï¼ˆå¼€å¤´/ä¸­é—´ï¼‰: O(1) (åªéœ€ä¿®æ”¹æŒ‡é’ˆ) è®¿é—®ï¼ˆæŒ‰ç´¢å¼•ï¼‰: O(N) é€‚ç”¨åœºæ™¯: é¢‘ç¹è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå¯¹éšæœºè®¿é—®æ€§èƒ½è¦æ±‚ä¸é«˜ã€‚ æ ˆï¼ˆStackï¼‰:\nç‰¹ç‚¹: LIFO (Last In, First Out)ï¼Œåè¿›å…ˆå‡ºã€‚åªå…è®¸åœ¨æ ˆé¡¶è¿›è¡Œæ’å…¥ï¼ˆpushï¼‰å’Œåˆ é™¤ï¼ˆpopï¼‰æ“ä½œã€‚ Pythonå®ç°: é€šå¸¸ä½¿ç”¨åˆ—è¡¨çš„ append() å’Œ pop() æ–¹æ³•æ¨¡æ‹Ÿã€‚ é€‚ç”¨åœºæ™¯: å‡½æ•°è°ƒç”¨æ ˆã€è¡¨è¾¾å¼æ±‚å€¼ã€æµè§ˆå™¨å†å²è®°å½•ï¼ˆåé€€ï¼‰ã€æ’¤é”€/é‡åšåŠŸèƒ½ã€‚ é˜Ÿåˆ—ï¼ˆQueueï¼‰:\nç‰¹ç‚¹: FIFO (First In, First Out)ï¼Œå…ˆè¿›å…ˆå‡ºã€‚åªå…è®¸åœ¨é˜Ÿå°¾æ’å…¥ï¼ˆenqueueï¼‰å’Œé˜Ÿå¤´åˆ é™¤ï¼ˆdequeueï¼‰æ“ä½œã€‚ Pythonå®ç°: é€šå¸¸ä½¿ç”¨ collections.deque æˆ– queue æ¨¡å—ã€‚ é€‚ç”¨åœºæ™¯: ä»»åŠ¡è°ƒåº¦ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ã€‚ æ ‘ï¼ˆTreeï¼‰:\nç‰¹ç‚¹: éçº¿æ€§æ•°æ®ç»“æ„ï¼Œç”±èŠ‚ç‚¹å’Œè¾¹ç»„æˆï¼Œæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ã€‚ å¸¸è§ç±»å‹: äºŒå‰æ ‘ã€äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰ã€å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLã€çº¢é»‘æ ‘ï¼‰ã€Bæ ‘ç­‰ã€‚ æ“ä½œ: æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ã€éå†ï¼ˆå‰åºã€ä¸­åºã€ååºï¼‰ã€‚ é€‚ç”¨åœºæ™¯: æ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ç´¢å¼•ã€ç»„ç»‡å±‚æ¬¡ç»“æ„ã€XML/HTMLè§£æã€‚ å›¾ï¼ˆGraphï¼‰:\nç‰¹ç‚¹: ç”±é¡¶ç‚¹ï¼ˆèŠ‚ç‚¹ï¼‰å’Œè¾¹ç»„æˆï¼Œè¾¹å¯ä»¥æœ‰æ–¹å‘ï¼ˆæœ‰å‘å›¾ï¼‰æˆ–æ— æ–¹å‘ï¼ˆæ— å‘å›¾ï¼‰ï¼Œå¯ä»¥æœ‰æƒé‡ã€‚ è¡¨ç¤ºæ–¹æ³•: é‚»æ¥çŸ©é˜µã€é‚»æ¥è¡¨ã€‚ æ“ä½œ: éå†ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢DFSã€å¹¿åº¦ä¼˜å…ˆæœç´¢BFSï¼‰ã€æŸ¥æ‰¾æœ€çŸ­è·¯å¾„ï¼ˆDijkstraã€Floyd-Warshallï¼‰ã€æœ€å°ç”Ÿæˆæ ‘ï¼ˆPrimã€Kruskalï¼‰ã€‚ é€‚ç”¨åœºæ™¯: ç¤¾äº¤ç½‘ç»œã€åœ°å›¾å¯¼èˆªã€ç½‘ç»œæ‹“æ‰‘ã€æ¨èç³»ç»Ÿã€‚ å“ˆå¸Œè¡¨ï¼ˆPythonä¸­çš„å­—å…¸ dictï¼‰:\nç‰¹ç‚¹: é€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°å­˜å‚¨ä½ç½®ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚é”®æ˜¯å”¯ä¸€çš„ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚ æ“ä½œ: æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾: å¹³å‡ O(1)ï¼Œæœ€å O(N) (å“ˆå¸Œå†²çªä¸¥é‡æ—¶)ã€‚ é€‚ç”¨åœºæ™¯: å¿«é€ŸæŸ¥æ‰¾ã€å»é‡ã€ç¼“å­˜ã€è®¡æ•°ã€‚ å¸¸è§ç®—æ³•\r#\ræ’åºç®—æ³•ï¼ˆå†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å¿«é€Ÿã€å½’å¹¶ç­‰ï¼‰ã€‚\nå†’æ³¡æ’åºï¼ˆBubble Sortï¼‰:\nåŸç†: é‡å¤éå†åˆ—è¡¨ï¼Œæ¯”è¾ƒç›¸é‚»å…ƒç´ ï¼Œå¦‚æœé¡ºåºé”™è¯¯å°±äº¤æ¢ï¼Œç›´åˆ°æ²¡æœ‰å…ƒç´ å¯ä»¥äº¤æ¢ä¸ºæ­¢ã€‚ æ—¶é—´å¤æ‚åº¦: æœ€å¥½O(N)ï¼Œå¹³å‡O(NÂ²)ï¼Œæœ€åO(NÂ²)ã€‚ ç©ºé—´å¤æ‚åº¦: O(1)ã€‚ ç¨³å®šæ€§: ç¨³å®šã€‚ ç‰¹ç‚¹: ç®€å•æ˜“æ‡‚ï¼Œæ•ˆç‡ä½ä¸‹ã€‚ é€‰æ‹©æ’åºï¼ˆSelection Sortï¼‰:\nåŸç†: æ¯æ¬¡éå†ä»æœªæ’åºéƒ¨åˆ†æ‰¾åˆ°æœ€å°ï¼ˆæˆ–æœ€å¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°å·²æ’åºéƒ¨åˆ†çš„æœ«å°¾ã€‚ æ—¶é—´å¤æ‚åº¦: å§‹ç»ˆO(NÂ²)ã€‚ ç©ºé—´å¤æ‚åº¦: O(1)ã€‚ ç¨³å®šæ€§: ä¸ç¨³å®šã€‚ ç‰¹ç‚¹: æ¯æ¬¡äº¤æ¢åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ ï¼Œäº¤æ¢æ¬¡æ•°æœ€å°‘ã€‚ æ’å…¥æ’åºï¼ˆInsertion Sortï¼‰:\nåŸç†: æ¯æ¬¡å–ä¸€ä¸ªæœªæ’åºå…ƒç´ ï¼Œæ’å…¥åˆ°å·²æ’åºéƒ¨åˆ†çš„æ­£ç¡®ä½ç½®ã€‚ æ—¶é—´å¤æ‚åº¦: æœ€å¥½O(N)ï¼Œå¹³å‡O(NÂ²)ï¼Œæœ€åO(NÂ²)ã€‚ ç©ºé—´å¤æ‚åº¦: O(1)ã€‚ ç¨³å®šæ€§: ç¨³å®šã€‚ ç‰¹ç‚¹: å¯¹äºéƒ¨åˆ†æœ‰åºçš„åˆ—è¡¨æ•ˆç‡è¾ƒé«˜ï¼Œå°è§„æ¨¡æ•°æ®è¡¨ç°è‰¯å¥½ã€‚ å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰:\nåŸç†: åˆ†æ²»æ³•ã€‚é€‰æ‹©ä¸€ä¸ªâ€œåŸºå‡†â€ï¼ˆpivotï¼‰å…ƒç´ ï¼Œå°†åˆ—è¡¨åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå°äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨å·¦è¾¹ï¼Œå¤§äºåŸºå‡†çš„å…ƒç´ æ”¾åœ¨å³è¾¹ï¼Œç„¶åå¯¹å·¦å³ä¸¤éƒ¨åˆ†é€’å½’åœ°è¿›è¡Œå¿«é€Ÿæ’åºã€‚ æ—¶é—´å¤æ‚åº¦: æœ€å¥½O(N log N)ï¼Œå¹³å‡O(N log N)ï¼Œæœ€åO(NÂ²) (å–å†³äºåŸºå‡†é€‰æ‹©)ã€‚ ç©ºé—´å¤æ‚åº¦: O(log N) (é€’å½’æ ˆç©ºé—´)ã€‚ ç¨³å®šæ€§: ä¸ç¨³å®šã€‚ ç‰¹ç‚¹: å¤§å¤šæ•°æƒ…å†µä¸‹æ€§èƒ½ä¼˜ç§€ï¼Œæ˜¯å®è·µä¸­å¸¸ç”¨çš„æ’åºç®—æ³•ã€‚ å½’å¹¶æ’åºï¼ˆMerge Sortï¼‰:\nåŸç†: åˆ†æ²»æ³•ã€‚å°†åˆ—è¡¨é€’å½’åœ°åˆ†æˆä¸¤åŠï¼Œç›´åˆ°æ¯ä¸ªå­åˆ—è¡¨åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆè‡ªç„¶æœ‰åºï¼‰ï¼Œç„¶åå°†æœ‰åºçš„å­åˆ—è¡¨åˆå¹¶ï¼ˆå½’å¹¶ï¼‰èµ·æ¥ã€‚ æ—¶é—´å¤æ‚åº¦: å§‹ç»ˆO(N log N)ã€‚ ç©ºé—´å¤æ‚åº¦: O(N) (éœ€è¦é¢å¤–ç©ºé—´è¿›è¡Œåˆå¹¶)ã€‚ ç¨³å®šæ€§: ç¨³å®šã€‚ ç‰¹ç‚¹: æ€§èƒ½ç¨³å®šï¼Œé€‚åˆå¤„ç†å¤§æ•°æ®é‡ï¼Œå¸¸ç”¨äºå¤–éƒ¨æ’åºã€‚ æŸ¥æ‰¾ç®—æ³•ï¼ˆçº¿æ€§æŸ¥æ‰¾ã€äºŒåˆ†æŸ¥æ‰¾ï¼‰ã€‚\nçº¿æ€§æŸ¥æ‰¾ï¼ˆLinear Searchï¼‰:\nåŸç†: ä»åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œé€ä¸ªæ¯”è¾ƒï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ æˆ–éå†å®Œæ•´ä¸ªåˆ—è¡¨ã€‚ æ—¶é—´å¤æ‚åº¦: æœ€å¥½O(1)ï¼Œå¹³å‡O(N)ï¼Œæœ€åO(N)ã€‚ é€‚ç”¨åœºæ™¯: åˆ—è¡¨æ— åºï¼Œæˆ–åˆ—è¡¨è§„æ¨¡è¾ƒå°ã€‚ äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰:\nåŸç†: é€‚ç”¨äºæœ‰åºåˆ—è¡¨ã€‚æ¯æ¬¡æ¯”è¾ƒä¸­é—´å…ƒç´ ä¸ç›®æ ‡å€¼ï¼Œå¦‚æœç›¸ç­‰åˆ™æ‰¾åˆ°ï¼›å¦‚æœç›®æ ‡å€¼å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨å·¦åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾ï¼›å¦‚æœç›®æ ‡å€¼å¤§äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨å³åŠéƒ¨åˆ†ç»§ç»­æŸ¥æ‰¾ã€‚æ¯æ¬¡å°†æœç´¢èŒƒå›´ç¼©å°ä¸€åŠã€‚ æ—¶é—´å¤æ‚åº¦: O(log N)ã€‚ é€‚ç”¨åœºæ™¯: åˆ—è¡¨æœ‰åºï¼Œä¸”éœ€è¦é«˜æ•ˆæŸ¥æ‰¾ã€‚ é€’å½’ä¸è¿­ä»£ã€‚\né€’å½’ï¼ˆRecursionï¼‰:\nå®šä¹‰: ä¸€ä¸ªå‡½æ•°ç›´æ¥æˆ–é—´æ¥è°ƒç”¨è‡ªèº«ã€‚ ç»„æˆéƒ¨åˆ†: åŸºçº¿æ¡ä»¶ï¼ˆBase Caseï¼‰: ç»ˆæ­¢é€’å½’çš„æ¡ä»¶ï¼Œé¿å…æ— é™å¾ªç¯ã€‚ é€’å½’è°ƒç”¨ï¼ˆRecursive Callï¼‰: å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œé—®é¢˜è§„æ¨¡ç¼©å°ã€‚ ä¼˜ç‚¹: ä»£ç ç®€æ´ã€é€»è¾‘æ¸…æ™°ï¼Œå°¤å…¶é€‚åˆè§£å†³å…·æœ‰åˆ†å½¢ç»“æ„çš„é—®é¢˜ï¼ˆå¦‚æ ‘çš„éå†ã€é˜¶ä¹˜ã€æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰ã€‚ ç¼ºç‚¹: æ ˆæº¢å‡º: é€’å½’æ·±åº¦è¿‡å¤§å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼ˆPythoné»˜è®¤é€’å½’æ·±åº¦æœ‰é™åˆ¶ï¼‰ã€‚ æ€§èƒ½å¼€é”€: æ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½ä¼šäº§ç”Ÿé¢å¤–çš„æ ˆå¸§å¼€é”€ã€‚ éš¾ä»¥è°ƒè¯•: è·Ÿè¸ªé€’å½’è¿‡ç¨‹å¯èƒ½æ¯”è¾ƒå¤æ‚ã€‚ def factorial_recursive(n): if n == 0 or n == 1: # åŸºçº¿æ¡ä»¶ return 1 else: return n * factorial_recursive(n - 1) # é€’å½’è°ƒç”¨ print(factorial_recursive(5)) # 120 è¿­ä»£ï¼ˆIterationï¼‰:\nå®šä¹‰: ä½¿ç”¨å¾ªç¯ï¼ˆfor æˆ– whileï¼‰é‡å¤æ‰§è¡Œä»£ç å—ï¼Œé€šè¿‡å˜é‡çš„æ›´æ–°æ¥é€æ­¥é€¼è¿‘é—®é¢˜çš„è§£ã€‚ ä¼˜ç‚¹: æ€§èƒ½ä¼˜è¶Š: é€šå¸¸æ¯”é€’å½’æ›´é«˜æ•ˆï¼Œæ²¡æœ‰å‡½æ•°è°ƒç”¨æ ˆçš„å¼€é”€ã€‚ é¿å…æ ˆæº¢å‡º: ä¸ä¼šå—é€’å½’æ·±åº¦é™åˆ¶ã€‚ æ˜“äºè°ƒè¯•: æµç¨‹æ›´ç›´è§‚ã€‚ ç¼ºç‚¹: å¯¹äºæŸäº›é—®é¢˜ï¼Œè¿­ä»£çš„é€»è¾‘å¯èƒ½æ¯”é€’å½’æ›´å¤æ‚ï¼Œä»£ç å¯è¯»æ€§å¯èƒ½ä¸‹é™ã€‚ def factorial_iterative(n): result = 1 for i in range(1, n + 1): result *= i return result print(factorial_iterative(5)) # 120 é€‰æ‹©: å¯¹äºå¤§å¤šæ•°æƒ…å†µï¼Œè¿­ä»£æ˜¯æ›´æ¨èçš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒæ›´é«˜æ•ˆä¸”ä¸æ˜“å‡ºé”™ã€‚ä½†å¯¹äºæŸäº›é—®é¢˜ï¼ˆå¦‚æ ‘çš„éå†ï¼‰ï¼Œé€’å½’çš„é€»è¾‘å¯èƒ½æ›´è‡ªç„¶å’Œç›´è§‚ã€‚\nåŠ¨æ€è§„åˆ’ã€è´ªå¿ƒç®—æ³•ç­‰ã€‚\nåŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰:\nåŸç†: è§£å†³å¤æ‚é—®é¢˜çš„ä¸€ç§æ–¹æ³•ï¼Œå®ƒå°†é—®é¢˜åˆ†è§£ä¸ºç›¸äº’é‡å çš„å­é—®é¢˜ï¼Œå¹¶é€šè¿‡å­˜å‚¨å­é—®é¢˜çš„è§£æ¥é¿å…é‡å¤è®¡ç®—ã€‚ æ ¸å¿ƒæ€æƒ³: æœ€ä¼˜å­ç»“æ„: é—®é¢˜çš„æœ€ä¼˜è§£åŒ…å«å…¶å­é—®é¢˜çš„æœ€ä¼˜è§£ã€‚ é‡å å­é—®é¢˜: è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¤šæ¬¡é‡åˆ°ç›¸åŒçš„å­é—®é¢˜ã€‚ å®ç°æ–¹å¼: é€šå¸¸ä½¿ç”¨**è‡ªåº•å‘ä¸Šï¼ˆBottom-upï¼‰çš„è¿­ä»£æ–¹å¼ï¼ˆå¡«å……DPè¡¨ï¼‰æˆ–è‡ªé¡¶å‘ä¸‹ï¼ˆTop-downï¼‰**çš„é€’å½’åŠ è®°å¿†åŒ–ï¼ˆMemoizationï¼‰æ–¹å¼ã€‚ é€‚ç”¨åœºæ™¯: æœ€çŸ­è·¯å¾„ã€èƒŒåŒ…é—®é¢˜ã€æœ€é•¿å…¬å…±å­åºåˆ—ã€æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆä¼˜åŒ–ï¼‰ã€‚ ä¾‹å­ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰: def fib_dp(n): if n \u0026lt;= 1: return n dp = [0] * (n + 1) dp[0] = 0 dp[1] = 1 for i in range(2, n + 1): dp[i] = dp[i-1] + dp[i-2] return dp[n] print(fib_dp(10)) # 55 è´ªå¿ƒç®—æ³•ï¼ˆGreedy Algorithmï¼‰:\nåŸç†: åœ¨æ¯ä¸€æ­¥é€‰æ‹©ä¸­éƒ½é‡‡å–åœ¨å½“å‰çŠ¶æ€ä¸‹æœ€å¥½æˆ–æœ€ä¼˜ï¼ˆå³æœ€æœ‰åˆ©ï¼‰çš„é€‰æ‹©ï¼Œä»è€Œå¸Œæœ›å¯¼è‡´ç»“æœæ˜¯å…¨å±€æœ€å¥½æˆ–æœ€ä¼˜çš„ã€‚ æ ¸å¿ƒæ€æƒ³: å±€éƒ¨æœ€ä¼˜è§£èƒ½å¤Ÿå¯¼è‡´å…¨å±€æœ€ä¼˜è§£ã€‚ ç‰¹ç‚¹: ä¸è€ƒè™‘æœªæ¥çš„å½±å“ï¼Œåªçœ‹å½“å‰æœ€ä¼˜ã€‚ å¹¶éæ‰€æœ‰é—®é¢˜éƒ½é€‚ç”¨è´ªå¿ƒç®—æ³•ï¼Œåªæœ‰å½“é—®é¢˜å…·æœ‰è´ªå¿ƒé€‰æ‹©æ€§è´¨å’Œæœ€ä¼˜å­ç»“æ„æ€§è´¨æ—¶ï¼Œè´ªå¿ƒç®—æ³•æ‰èƒ½å¾—åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚ é€‚ç”¨åœºæ™¯: æ‰¾é›¶é—®é¢˜ã€æ´»åŠ¨é€‰æ‹©é—®é¢˜ã€éœå¤«æ›¼ç¼–ç ã€æœ€å°ç”Ÿæˆæ ‘ï¼ˆPrimã€Kruskalï¼‰ã€‚ ä¾‹å­ï¼ˆæ‰¾é›¶é—®é¢˜ï¼Œå‡è®¾æœ‰1, 5, 10, 25é¢å€¼çš„ç¡¬å¸ï¼‰: def find_change(amount, coins=[25, 10, 5, 1]): result = {} for coin in coins: if amount \u0026gt;= coin: count = amount // coin result[coin] = count amount %= coin return result print(find_change(63)) # {25: 2, 10: 1, 5: 0, 1: 3} -\u0026gt; 2ä¸ª25, 1ä¸ª10, 3ä¸ª1 ç¼–ç¨‹é¢˜\r#\rå­—ç¬¦ä¸²æ“ä½œã€æ•°ç»„æ“ä½œã€æ ‘çš„éå†ã€å›¾çš„æœç´¢ç­‰ã€‚\nå­—ç¬¦ä¸²æ“ä½œ:\nåè½¬å­—ç¬¦ä¸²: s[::-1] åˆ¤æ–­å›æ–‡: s == s[::-1] æŸ¥æ‰¾å­ä¸²: s.find(), s.index(), in è¿ç®—ç¬¦ æ›¿æ¢: s.replace() åˆ†å‰²/è¿æ¥: s.split(), \u0026quot;\u0026quot;.join(list_of_strings) å¤§å°å†™è½¬æ¢: s.lower(), s.upper() å»é™¤ç©ºç™½: s.strip(), s.lstrip(), s.rstrip() åˆ¤æ–­ç±»å‹: s.isalpha(), s.isdigit(), s.isalnum() å­—ç¬¦ä¸²æ ¼å¼åŒ–: f-string, format() ä¾‹ï¼šç»Ÿè®¡å­—ç¬¦å‡ºç°æ¬¡æ•° from collections import Counter text = \u0026#34;hello world\u0026#34; counts = Counter(text) print(counts) æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰æ“ä½œ:\nå¢åˆ æ”¹æŸ¥: append(), insert(), pop(), remove(), ç´¢å¼•è®¿é—® [] æ’åº: list.sort(), sorted() åˆ‡ç‰‡: my_list[start:end:step] åˆ—è¡¨æ¨å¯¼å¼: é«˜æ•ˆåˆ›å»ºæ–°åˆ—è¡¨ ä¾‹ï¼šä¸¤æ•°ä¹‹å’Œï¼ˆLeetCodeç»å…¸é¢˜ï¼‰ def two_sum(nums, target): num_map = {} # å€¼ -\u0026gt; ç´¢å¼• for i, num in enumerate(nums): complement = target - num if complement in num_map: return [num_map[complement], i] num_map[num] = i return [] print(two_sum([2, 7, 11, 15], 9)) # [0, 1] æ ‘çš„éå†ï¼ˆä»¥äºŒå‰æ ‘ä¸ºä¾‹ï¼‰:\nèŠ‚ç‚¹å®šä¹‰: class TreeNode: def __init__(self, val=0, left=None, right=None): self.val = val self.left = left self.right = right å‰åºéå†ï¼ˆPre-order Traversalï¼‰: æ ¹ -\u0026gt; å·¦ -\u0026gt; å³ def preorder_traversal(root): if not root: return [] result = [] result.append(root.val) result.extend(preorder_traversal(root.left)) result.extend(preorder_traversal(root.right)) return result ä¸­åºéå†ï¼ˆIn-order Traversalï¼‰: å·¦ -\u0026gt; æ ¹ -\u0026gt; å³ (å¯¹äºBSTï¼Œå¾—åˆ°æœ‰åºåºåˆ—) def inorder_traversal(root): if not root: return [] result = [] result.extend(inorder_traversal(root.left)) result.append(root.val) result.extend(inorder_traversal(root.right)) return result ååºéå†ï¼ˆPost-order Traversalï¼‰: å·¦ -\u0026gt; å³ -\u0026gt; æ ¹ def postorder_traversal(root): if not root: return [] result = [] result.extend(postorder_traversal(root.left)) result.extend(postorder_traversal(root.right)) result.append(root.val) return result å±‚åºéå†ï¼ˆLevel-order Traversal / BFSï¼‰: from collections import deque def levelorder_traversal(root): if not root: return [] result = [] queue = deque([root]) while queue: node = queue.popleft() result.append(node.val) if node.left: queue.append(node.left) if node.right: queue.append(node.right) return result å›¾çš„æœç´¢ï¼ˆä»¥é‚»æ¥è¡¨è¡¨ç¤ºçš„æ— å‘å›¾ä¸ºä¾‹ï¼‰:\né‚»æ¥è¡¨è¡¨ç¤º: graph = { 'A': ['B', 'C'], 'B': ['A', 'D'], ... } æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰: åŸç†: å°½å¯èƒ½æ·±åœ°æ¢ç´¢å›¾çš„åˆ†æ”¯ï¼Œç›´åˆ°ä¸èƒ½å†æ·±å…¥ä¸ºæ­¢ï¼Œç„¶åå›æº¯ã€‚ å®ç°: é€šå¸¸ä½¿ç”¨é€’å½’æˆ–æ ˆã€‚ def dfs(graph, start_node, visited=None): if visited is None: visited = set() visited.add(start_node) print(start_node, end=\u0026#34; \u0026#34;) # è®¿é—®èŠ‚ç‚¹ for neighbor in graph.get(start_node, []): if neighbor not in visited: dfs(graph, neighbor, visited) # graph = {\u0026#39;A\u0026#39;: [\u0026#39;B\u0026#39;, \u0026#39;C\u0026#39;], \u0026#39;B\u0026#39;: [\u0026#39;A\u0026#39;, \u0026#39;D\u0026#39;, \u0026#39;E\u0026#39;], \u0026#39;C\u0026#39;: [\u0026#39;A\u0026#39;, \u0026#39;F\u0026#39;], \u0026#39;D\u0026#39;: [\u0026#39;B\u0026#39;], \u0026#39;E\u0026#39;: [\u0026#39;B\u0026#39;, \u0026#39;F\u0026#39;], \u0026#39;F\u0026#39;: [\u0026#39;C\u0026#39;, \u0026#39;E\u0026#39;]} # dfs(graph, \u0026#39;A\u0026#39;) # A B D E F C å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰: åŸç†: ä»èµ·å§‹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚å‘å¤–æ¢ç´¢æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ï¼Œç„¶åæ˜¯é‚»å±…çš„é‚»å±…ï¼Œä»¥æ­¤ç±»æ¨ã€‚ å®ç°: é€šå¸¸ä½¿ç”¨é˜Ÿåˆ—ã€‚ from collections import deque def bfs(graph, start_node): visited = set() queue = deque([start_node]) visited.add(start_node) while queue: node = queue.popleft() print(node, end=\u0026#34; \u0026#34;) # è®¿é—®èŠ‚ç‚¹ for neighbor in graph.get(node, []): if neighbor not in visited: visited.add(neighbor) queue.append(neighbor) # bfs(graph, \u0026#39;A\u0026#39;) # A B C D E F é€šå¸¸ä¼šè¦æ±‚ä½ å†™å‡ºå¯è¿è¡Œçš„ä»£ç ï¼Œå¹¶åˆ†ææ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚\næ—¶é—´å¤æ‚åº¦ï¼ˆTime Complexityï¼‰:\nè¡¡é‡ç®—æ³•è¿è¡Œæ—¶é—´ä¸è¾“å…¥è§„æ¨¡çš„å…³ç³»ã€‚ ä½¿ç”¨å¤§Oè¡¨ç¤ºæ³•ï¼ˆBig O notationï¼‰è¡¨ç¤ºï¼Œä¾‹å¦‚O(1), O(log N), O(N), O(N log N), O(NÂ²), O(2^N), O(N!)ã€‚ åªå…³æ³¨ç®—æ³•æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿ï¼Œå¿½ç•¥å¸¸æ•°é¡¹å’Œä½é˜¶é¡¹ã€‚ åˆ†ææ–¹æ³•: æ‰¾å‡ºä»£ç ä¸­æ‰§è¡Œæ¬¡æ•°æœ€å¤šçš„æ“ä½œï¼Œè®¡ç®—å…¶æ‰§è¡Œæ¬¡æ•°ä¸è¾“å…¥è§„æ¨¡Nçš„å…³ç³»ã€‚ å¾ªç¯: å•å±‚å¾ªç¯é€šå¸¸O(N)ï¼ŒåµŒå¥—å¾ªç¯O(NÂ²)ã€‚ é€’å½’: è€ƒè™‘é€’å½’æ·±åº¦å’Œæ¯æ¬¡é€’å½’æ“ä½œçš„å¤æ‚åº¦ã€‚ å“ˆå¸Œè¡¨æ“ä½œ: å¹³å‡O(1)ã€‚ æ’åº: æ ¹æ®å…·ä½“ç®—æ³•è€Œå®šã€‚ ç©ºé—´å¤æ‚åº¦ï¼ˆSpace Complexityï¼‰:\nè¡¡é‡ç®—æ³•è¿è¡Œæ‰€éœ€å­˜å‚¨ç©ºé—´ä¸è¾“å…¥è§„æ¨¡çš„å…³ç³»ã€‚ åŒæ ·ä½¿ç”¨å¤§Oè¡¨ç¤ºæ³•ã€‚ åªå…³æ³¨é¢å¤–ä½¿ç”¨çš„ç©ºé—´ï¼ˆä¸åŒ…æ‹¬è¾“å…¥æœ¬èº«å ç”¨çš„ç©ºé—´ï¼‰ã€‚ åˆ†ææ–¹æ³•: æ‰¾å‡ºç®—æ³•ä¸­ä½¿ç”¨çš„é¢å¤–æ•°æ®ç»“æ„ï¼ˆå¦‚æ ˆã€é˜Ÿåˆ—ã€å“ˆå¸Œè¡¨ã€é¢å¤–æ•°ç»„ï¼‰çš„å¤§å°ä¸è¾“å…¥è§„æ¨¡Nçš„å…³ç³»ã€‚ O(1): å¸¸æ•°ç©ºé—´ï¼Œä¸éšè¾“å…¥è§„æ¨¡å˜åŒ–ã€‚ O(N): çº¿æ€§ç©ºé—´ï¼Œä¸è¾“å…¥è§„æ¨¡æˆæ­£æ¯”ã€‚ O(log N): å¯¹æ•°ç©ºé—´ï¼Œå¦‚äºŒåˆ†æŸ¥æ‰¾çš„é€’å½’æ ˆã€‚ ç¤ºä¾‹åˆ†æï¼ˆäºŒåˆ†æŸ¥æ‰¾ï¼‰:\ndef binary_search(arr, target): left, right = 0, len(arr) - 1 # O(1) while left \u0026lt;= right: # å¾ªç¯æ¬¡æ•°ï¼šæ¯æ¬¡æœç´¢èŒƒå›´å‡åŠï¼Œlog N æ¬¡ mid = (left + right) // 2 # O(1) if arr[mid] == target: # O(1) return mid elif arr[mid] \u0026lt; target: # O(1) left = mid + 1 else: # O(1) right = mid - 1 return -1 æ—¶é—´å¤æ‚åº¦: å¾ªç¯ä½“å†…çš„æ“ä½œéƒ½æ˜¯O(1)ï¼Œå¾ªç¯æ¬¡æ•°æ˜¯log Nã€‚æ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦æ˜¯ O(log N)ã€‚ ç©ºé—´å¤æ‚åº¦: åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡ï¼ˆleft, right, mid, targetï¼‰ï¼Œè¿™äº›å˜é‡çš„æ•°é‡ä¸éšè¾“å…¥æ•°ç»„å¤§å°Nçš„å˜åŒ–è€Œå˜åŒ–ã€‚æ‰€ä»¥ç©ºé—´å¤æ‚åº¦æ˜¯ O(1)ã€‚ è¿™æ˜¯ç¬¬ä¸‰éƒ¨åˆ†çš„ç­”æ¡ˆã€‚æœ€åä¸€éƒ¨åˆ†æ˜¯å…³äºé¡¹ç›®ç»éªŒä¸å®è·µã€‚\n5. é¡¹ç›®ç»éªŒä¸å®è·µç­”æ¡ˆ\r#\rè¿™éƒ¨åˆ†é—®é¢˜æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå› ä¸ºå®ƒä»¬æ˜¯å…³äºä½ ä¸ªäººç»å†å’Œèƒ½åŠ›çš„é—®é¢˜ã€‚æˆ‘å°†æä¾›ä¸€äº›æŒ‡å¯¼åŸåˆ™å’Œå»ºè®®ï¼Œå¸®åŠ©ä½ å‡†å¤‡è¿™äº›é—®é¢˜çš„å›ç­”ã€‚\né¡¹ç›®ç»å†ä¸å®è·µ\r#\ré¡¹ç›®ç»å†ï¼šä»‹ç»ä½ åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²ã€é‡åˆ°çš„æŒ‘æˆ˜ä»¥åŠå¦‚ä½•è§£å†³çš„ã€‚\nå‡†å¤‡è¦ç‚¹: é€‰æ‹©ç›¸å…³é¡¹ç›®: æŒ‘é€‰ä¸é¢è¯•å²—ä½æœ€ç›¸å…³ã€æœ€èƒ½ä½“ç°ä½ æŠ€èƒ½çš„é¡¹ç›®ã€‚ STARæ³•åˆ™: ç»“æ„åŒ–ä½ çš„å›ç­”ï¼Œä½¿ç”¨STARæ³•åˆ™ï¼ˆSituation, Task, Action, Resultï¼‰ã€‚ Situation (æƒ…å¢ƒ): æè¿°é¡¹ç›®çš„èƒŒæ™¯å’Œç›®æ ‡ã€‚ ä¾‹å¦‚: â€œæˆ‘å‚ä¸äº†ä¸€ä¸ªå¼€å‘åœ¨çº¿ç”µå•†å¹³å°çš„é¡¹ç›®ï¼Œè´Ÿè´£åç«¯APIçš„å¼€å‘ã€‚â€ Task (ä»»åŠ¡): æè¿°ä½ åœ¨é¡¹ç›®ä¸­å…·ä½“è´Ÿè´£çš„ä»»åŠ¡å’ŒèŒè´£ã€‚ ä¾‹å¦‚: â€œæˆ‘çš„ä»»åŠ¡æ˜¯è®¾è®¡å’Œå®ç°å•†å“ç®¡ç†æ¨¡å—çš„RESTful APIï¼ŒåŒ…æ‹¬å•†å“çš„å¢åˆ æ”¹æŸ¥å’Œåº“å­˜ç®¡ç†ã€‚â€ Action (è¡ŒåŠ¨): è¯¦ç»†è¯´æ˜ä½ ä¸ºäº†å®Œæˆä»»åŠ¡æ‰€é‡‡å–çš„å…·ä½“è¡ŒåŠ¨ã€æŠ€æœ¯é€‰æ‹©å’Œé‡åˆ°çš„å›°éš¾ã€‚ ä¾‹å¦‚: â€œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†é«˜å¹¶å‘ä¸‹åº“å­˜æ‰£å‡çš„åŸå­æ€§é—®é¢˜ã€‚æˆ‘ç ”ç©¶äº†å¤šç§è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆå†³å®šé‡‡ç”¨æ•°æ®åº“äº‹åŠ¡å’Œæ‚²è§‚é”ï¼ˆæˆ–ä¹è§‚é”ï¼‰ç»“åˆçš„æ–¹å¼æ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚æˆ‘è¿˜å¼•å…¥äº†æ¶ˆæ¯é˜Ÿåˆ—æ¥å¼‚æ­¥å¤„ç†è®¢å•ï¼Œå‡è½»äº†æ•°æ®åº“å‹åŠ›ã€‚â€ Result (ç»“æœ): æè¿°ä½ è¡ŒåŠ¨çš„ç»“æœå’Œå½±å“ï¼Œé‡åŒ–ä½ çš„è´¡çŒ®ï¼ˆå¦‚æœå¯èƒ½ï¼‰ã€‚ ä¾‹å¦‚: â€œé€šè¿‡è¿™äº›ä¼˜åŒ–ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†å•†å“åº“å­˜çš„å¹¶å‘å¤„ç†èƒ½åŠ›æå‡äº†30%ï¼Œå¹¶ä¸”ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹çš„ç¨³å®šæ€§å¾—åˆ°äº†æ˜¾è‘—æé«˜ã€‚æˆ‘çš„ä»£ç é€šè¿‡äº†ä»£ç å®¡æŸ¥ï¼Œå¹¶æˆåŠŸä¸Šçº¿ã€‚â€ çªå‡ºä½ çš„è´¡çŒ®: å¼ºè°ƒä½ åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ä»¥åŠä½ ä¸ªäººå¯¹é¡¹ç›®çš„ä»·å€¼ã€‚ æŠ€æœ¯ç»†èŠ‚: æåŠä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„å…·ä½“PythonæŠ€æœ¯ã€åº“ã€æ¡†æ¶ã€æ•°æ®åº“ç­‰ã€‚ å­¦ä¹ ä¸æˆé•¿: å³ä½¿é¡¹ç›®ä¸­æœ‰å¤±è´¥æˆ–ä¸è¶³ï¼Œä¹Ÿè¦è¯´æ˜ä½ ä»ä¸­å¸å–äº†ä»€ä¹ˆæ•™è®­ï¼Œå­¦åˆ°äº†ä»€ä¹ˆã€‚ è°ƒè¯•ä¸æµ‹è¯•ï¼šä½ å¦‚ä½•è°ƒè¯•Pythonä»£ç ï¼Ÿäº†è§£å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å—ï¼Ÿ\nè°ƒè¯•Pythonä»£ç :\nprint() è¯­å¥: æœ€ç®€å•ç›´æ¥çš„æ–¹å¼ï¼Œç”¨äºè¾“å‡ºå˜é‡å€¼ã€æ£€æŸ¥ä»£ç æ‰§è¡Œæµç¨‹ã€‚ Pythonå†…ç½®è°ƒè¯•å™¨ pdb: import pdb; pdb.set_trace(): åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ã€‚ å¸¸ç”¨å‘½ä»¤: n (nextï¼Œä¸‹ä¸€æ­¥), s (stepï¼Œè¿›å…¥å‡½æ•°), c (continueï¼Œç»§ç»­æ‰§è¡Œ), p var (printå˜é‡), l (listï¼ŒæŸ¥çœ‹ä»£ç )ã€‚ IDEé›†æˆè°ƒè¯•å™¨: PyCharmã€VS Codeç­‰IDEéƒ½æä¾›äº†å¼ºå¤§çš„å›¾å½¢åŒ–è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥è®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œã€æŸ¥çœ‹å˜é‡ã€è°ƒç”¨å †æ ˆç­‰ã€‚ æ—¥å¿—ï¼ˆLoggingï¼‰: ä½¿ç”¨ logging æ¨¡å—è®°å½•ç¨‹åºè¿è¡Œæ—¶çš„ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ï¼Œæ¯” print() æ›´çµæ´»å’Œå¼ºå¤§ï¼Œå¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æŒç»­è¿è¡Œã€‚ å¼‚å¸¸å¤„ç†: åˆ©ç”¨ try-except å—æ•è·å’Œå¤„ç†å¼‚å¸¸ï¼Œäº†è§£é”™è¯¯ç±»å‹å’Œå›æº¯ä¿¡æ¯ã€‚ å•å…ƒæµ‹è¯•ï¼ˆUnit Testingï¼‰:\næ¦‚å¿µ: å¯¹è½¯ä»¶ä¸­æœ€å°çš„å¯æµ‹è¯•å•å…ƒï¼ˆé€šå¸¸æ˜¯å‡½æ•°ã€æ–¹æ³•æˆ–ç±»ï¼‰è¿›è¡Œç‹¬ç«‹æµ‹è¯•ï¼ŒéªŒè¯å…¶è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚ ç›®çš„: ç¡®ä¿æ¯ä¸ªç»„ä»¶å•ç‹¬å·¥ä½œæ­£å¸¸ï¼Œå¿«é€Ÿå‘ç°ä»£ç ä¸­çš„ç¼ºé™·ã€‚ Pythonå·¥å…·: unittest (Pythonæ ‡å‡†åº“), pytest (æ›´æµè¡Œã€åŠŸèƒ½æ›´å¼ºå¤§)ã€‚ ç‰¹ç‚¹: ç‹¬ç«‹æ€§å¼ºï¼Œæµ‹è¯•ç²’åº¦å°ï¼Œè¿è¡Œé€Ÿåº¦å¿«ã€‚ é›†æˆæµ‹è¯•ï¼ˆIntegration Testingï¼‰:\næ¦‚å¿µ: å°†å¤šä¸ªå·²é€šè¿‡å•å…ƒæµ‹è¯•çš„æ¨¡å—ç»„åˆåœ¨ä¸€èµ·ï¼Œæµ‹è¯•å®ƒä»¬ä¹‹é—´çš„æ¥å£å’Œäº¤äº’æ˜¯å¦æ­£ç¡®ã€‚ ç›®çš„: éªŒè¯ä¸åŒæ¨¡å—ååŒå·¥ä½œæ—¶æ˜¯å¦äº§ç”Ÿé¢„æœŸç»“æœï¼Œå‘ç°æ¨¡å—é—´æ¥å£é—®é¢˜ã€‚ ç‰¹ç‚¹: æµ‹è¯•ç²’åº¦æ¯”å•å…ƒæµ‹è¯•å¤§ï¼Œé€šå¸¸éœ€è¦æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼ˆå¦‚æ•°æ®åº“ã€APIæœåŠ¡ï¼‰ã€‚ ä»£ç é£æ ¼ï¼šäº†è§£PEP 8è§„èŒƒå—ï¼Ÿ\nPEP 8æ˜¯ä»€ä¹ˆï¼Ÿ PEP 8 æ˜¯ Python å®˜æ–¹çš„ä»£ç é£æ ¼æŒ‡å—ï¼ˆPython Enhancement Proposal 8ï¼‰ã€‚ å®ƒæä¾›äº†ä¸€å¥—å…³äºå¦‚ä½•ç¼–å†™æ¸…æ™°ã€ä¸€è‡´ã€æ˜“è¯»çš„Pythonä»£ç çš„å»ºè®®å’Œçº¦å®šã€‚ ç›®çš„: æé«˜Pythonä»£ç çš„å¯è¯»æ€§ï¼Œä»è€Œæé«˜ä»£ç çš„ç»´æŠ¤æ€§ã€‚å½“æ‰€æœ‰äººéƒ½éµå¾ªç›¸åŒçš„é£æ ¼æ—¶ï¼Œé˜…è¯»å’Œç†è§£ä»–äººçš„ä»£ç ä¼šå˜å¾—æ›´å®¹æ˜“ã€‚ PEP 8 åŒ…å«å“ªäº›å†…å®¹ï¼Ÿ å‘½åçº¦å®š: å˜é‡ã€å‡½æ•°ã€ç±»ã€æ¨¡å—ã€å¸¸é‡ç­‰çš„å‘½åè§„åˆ™ï¼ˆå¦‚snake_caseç”¨äºå‡½æ•°å’Œå˜é‡ï¼ŒCamelCaseç”¨äºç±»ï¼‰ã€‚ ç¼©è¿›: ç»Ÿä¸€ä½¿ç”¨4ä¸ªç©ºæ ¼è¿›è¡Œç¼©è¿›ã€‚ è¡Œé•¿åº¦: æ¯è¡Œä»£ç ä¸è¶…è¿‡79ä¸ªå­—ç¬¦ï¼ˆæˆ–88ä¸ªå­—ç¬¦ï¼Œå¯¹äºæŸäº›å·¥å…·å¦‚Blackï¼‰ã€‚ ç©ºè¡Œ: åœ¨å‡½æ•°ã€ç±»å®šä¹‰ä¹‹é—´ä½¿ç”¨ç©ºè¡Œè¿›è¡Œåˆ†éš”ï¼Œæé«˜å¯è¯»æ€§ã€‚ å¯¼å…¥: å¯¼å…¥è¯­å¥åº”æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼ŒæŒ‰æ ‡å‡†åº“ã€ç¬¬ä¸‰æ–¹åº“ã€æœ¬åœ°æ¨¡å—çš„é¡ºåºåˆ†ç»„ï¼Œå¹¶æŒ‰å­—æ¯é¡ºåºæ’åºã€‚ æ³¨é‡Š: ç¼–å†™æ¸…æ™°ã€ç®€æ´çš„æ³¨é‡Šã€‚ ç©ºæ ¼: åœ¨è¿ç®—ç¬¦ã€é€—å·ç­‰å‘¨å›´ä½¿ç”¨é€‚å½“çš„ç©ºæ ¼ã€‚ ä½ å¦‚ä½•éµå¾ªPEP 8ï¼Ÿ æ‰‹åŠ¨éµå¾ª: åœ¨ç¼–å†™ä»£ç æ—¶æœ‰æ„è¯†åœ°éµå¾ªè¿™äº›è§„èŒƒã€‚ ä½¿ç”¨ä»£ç æ ¼å¼åŒ–å·¥å…·: Black (ä¸å¦¥åçš„æ ¼å¼åŒ–ç¨‹åº), autopep8, yapf ç­‰å·¥å…·å¯ä»¥è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ä»¥ç¬¦åˆPEP 8ã€‚ ä½¿ç”¨Linter: Flake8, Pylint ç­‰å·¥å…·å¯ä»¥æ£€æŸ¥ä»£ç æ˜¯å¦ç¬¦åˆPEP 8ä»¥åŠå…¶ä»–æ½œåœ¨çš„ä»£ç è´¨é‡é—®é¢˜ï¼Œå¹¶åœ¨IDEä¸­ç»™å‡ºæç¤ºã€‚ ç‰ˆæœ¬æ§åˆ¶ï¼šGitçš„åŸºæœ¬æ“ä½œå’Œå·¥ä½œæµç¨‹ã€‚\nGitæ˜¯ä»€ä¹ˆï¼Ÿ\nGit æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆDistributed Version Control System, DVCSï¼‰ã€‚ å®ƒç”¨äºè·Ÿè¸ªæ–‡ä»¶å’Œä»£ç çš„æ›´æ”¹ï¼Œåè°ƒå¤šäººåœ¨åŒä¸€é¡¹ç›®ä¸Šçš„å·¥ä½œï¼Œå¹¶å…è®¸å›æº¯åˆ°ä»»ä½•å†å²ç‰ˆæœ¬ã€‚ GitåŸºæœ¬æ“ä½œ:\ngit init: åœ¨å½“å‰ç›®å½•åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Gitä»“åº“ã€‚ git clone [url]: å…‹éš†ä¸€ä¸ªè¿œç¨‹ä»“åº“åˆ°æœ¬åœ°ã€‚ git add \u0026lt;file\u0026gt; / git add .: å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆStaging Areaï¼‰ã€‚ git commit -m \u0026quot;commit message\u0026quot;: å°†æš‚å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶é™„å¸¦ä¸€æ¡æäº¤æ¶ˆæ¯ã€‚ git status: æŸ¥çœ‹å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€ã€‚ git diff: æŸ¥çœ‹æ–‡ä»¶ä¿®æ”¹çš„å·®å¼‚ã€‚ git log: æŸ¥çœ‹æäº¤å†å²ã€‚ git branch: æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤åˆ†æ”¯ã€‚ git checkout \u0026lt;branch_name\u0026gt; / git switch \u0026lt;branch_name\u0026gt;: åˆ‡æ¢åˆ†æ”¯ã€‚ git merge \u0026lt;branch_name\u0026gt;: åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚ git pull: ä»è¿œç¨‹ä»“åº“æ‹‰å–ï¼ˆfetchå¹¶mergeï¼‰æœ€æ–°ä»£ç ã€‚ git push: å°†æœ¬åœ°æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ git remote: ç®¡ç†è¿œç¨‹ä»“åº“ã€‚ git reset / git revert: å›æ»šç‰ˆæœ¬ã€‚ git stash: æš‚æ—¶ä¿å­˜å½“å‰å·¥ä½œåŒºä¿®æ”¹ï¼Œä»¥ä¾¿åˆ‡æ¢åˆ†æ”¯ã€‚ Gitå·¥ä½œæµç¨‹ï¼ˆå¸¸è§å¦‚Git Flowæˆ–GitHub Flowï¼‰:\nGitHub Flow (æ›´ç®€å•):\nmain åˆ†æ”¯æ˜¯å¯éƒ¨ç½²çš„ï¼šæ‰€æœ‰ä»£ç éƒ½ä» main åˆ†æ”¯å¼€å§‹ã€‚ åˆ›å»ºæ–°åˆ†æ”¯: ä» main åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç‰¹æ€§åˆ†æ”¯ï¼ˆfeature branchï¼‰ï¼Œå‘½åæ¸…æ™°ã€‚ git checkout -b feature/my-new-feature å¼€å‘ä¸æäº¤: åœ¨ç‰¹æ€§åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¹¶é¢‘ç¹æäº¤ä»£ç ã€‚ git add . git commit -m \u0026quot;feat: implement new feature X\u0026quot; æ¨é€åˆ°è¿œç¨‹: å°†ç‰¹æ€§åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ git push origin feature/my-new-feature åˆ›å»ºPull Request (PR): åœ¨GitHub/GitLabç­‰å¹³å°ä¸Šåˆ›å»ºPRï¼Œè¯·æ±‚å°†ç‰¹æ€§åˆ†æ”¯åˆå¹¶åˆ° mainã€‚ ä»£ç å®¡æŸ¥: å›¢é˜Ÿæˆå‘˜å®¡æŸ¥ä»£ç ï¼Œæå‡ºä¿®æ”¹æ„è§ã€‚ åˆå¹¶ä¸éƒ¨ç½²: PRé€šè¿‡å®¡æŸ¥åï¼Œåˆå¹¶åˆ° main åˆ†æ”¯ï¼Œé€šå¸¸ä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ã€‚ åˆ é™¤åˆ†æ”¯: åˆå¹¶åå¯ä»¥åˆ é™¤ç‰¹æ€§åˆ†æ”¯ã€‚ Git Flow (æ›´å¤æ‚ï¼Œé€‚ç”¨äºå¤§å‹é¡¹ç›®):\nå¼•å…¥äº† develop åˆ†æ”¯ï¼ˆå¼€å‘ä¸»çº¿ï¼‰ã€feature åˆ†æ”¯ï¼ˆç‰¹æ€§å¼€å‘ï¼‰ã€release åˆ†æ”¯ï¼ˆå‘å¸ƒå‡†å¤‡ï¼‰ã€hotfix åˆ†æ”¯ï¼ˆç´§æ€¥ä¿®å¤ï¼‰ç­‰ï¼Œæœ‰æ›´ä¸¥æ ¼çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ è§£å†³å†²çª: å½“å¤šäººä¿®æ”¹åŒä¸€æ–‡ä»¶åŒä¸€è¡Œæ—¶ï¼ŒGitæ— æ³•è‡ªåŠ¨åˆå¹¶ï¼Œä¼šäº§ç”Ÿå†²çªã€‚éœ€è¦æ‰‹åŠ¨ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çªåé‡æ–°æäº¤ã€‚\n"},{"id":32,"href":"/docs/study/frontend/react-knowledge/","title":"React çŸ¥è¯†","section":"å‰ç«¯","content":"This is an extensive list covering almost every aspect of React development! I\u0026rsquo;ll provide concise, effective answers for each, suitable for an interview context. Remember to personalize these answers with your own project examples and specific experiences to make them more impactful.\nğŸ’¡ React æ ¸å¿ƒåŸºç¡€\r#\rReact çš„æ ¸å¿ƒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ\r#\rReact çš„æ ¸å¿ƒåŸç†æ˜¯å£°æ˜å¼ UI å’Œç»„ä»¶åŒ–ã€‚æˆ‘ä»¬é€šè¿‡å£°æ˜å¼åœ°æè¿° UI åº”è¯¥é•¿ä»€ä¹ˆæ ·ï¼ˆç»™å®šçŠ¶æ€ï¼‰ï¼ŒReact ä¼šè´Ÿè´£æ›´æ–° UI ä»¥åŒ¹é…è¿™ä¸ªå£°æ˜ã€‚å®ƒå°† UI æ‹†åˆ†æˆç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶ç®¡ç†è‡ªå·±çš„çŠ¶æ€å¹¶æ¸²æŸ“ç‰¹å®šçš„ UI ç‰‡æ®µã€‚é€šè¿‡è™šæ‹Ÿ DOM å’Œ Diff ç®—æ³•ï¼ŒReact é«˜æ•ˆåœ°æ›´æ–°çœŸå® DOMï¼Œåªä¿®æ”¹å¿…è¦çš„éƒ¨åˆ†ï¼Œä»è€Œæå‡æ€§èƒ½ã€‚\nä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼Ÿå®ƒæ€ä¹ˆæå‡æ€§èƒ½ï¼Ÿ\r#\rè™šæ‹Ÿ DOM (Virtual DOM) æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript å¯¹è±¡æ ‘ï¼Œå®ƒæ˜¯çœŸå® DOM ç»“æ„çš„ä¸€ä¸ªå†…å­˜è¡¨ç¤ºã€‚å½“ç»„ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šå…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼Œç„¶åå°†æ–°æ—§ä¸¤æ£µè™šæ‹Ÿ DOM æ ‘è¿›è¡Œ Diff ç®—æ³•æ¯”è¾ƒï¼Œæ‰¾å‡ºä¸¤è€…ä¹‹é—´çš„æœ€å°å·®å¼‚ã€‚æœ€åï¼ŒReact åªå°†è¿™äº›å·®å¼‚åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚\nè™šæ‹Ÿ DOM æå‡æ€§èƒ½ä½“ç°åœ¨ï¼š\nå‡å°‘ç›´æ¥æ“ä½œçœŸå® DOM çš„æ¬¡æ•°ï¼š çœŸå® DOM æ“ä½œéå¸¸æ˜‚è´µï¼Œè™šæ‹Ÿ DOM å…è®¸æ‰¹é‡æ›´æ–°ã€‚ æœ€å°åŒ– DOM æ“ä½œèŒƒå›´ï¼š Diff ç®—æ³•ç¡®ä¿åªæ›´æ–°å‘ç”Ÿå˜åŒ–çš„æœ€å°éƒ¨åˆ†ï¼Œé¿å…ä¸å¿…è¦çš„é‡ç»˜å’Œå›æµã€‚ è·¨å¹³å°èƒ½åŠ›ï¼š è™šæ‹Ÿ DOM ä¸ä¾èµ–äºç‰¹å®šçš„æ¸²æŸ“ç¯å¢ƒï¼Œä½¿å…¶èƒ½ç”¨äº Nativeã€WebGL ç­‰ã€‚ React ç»„ä»¶æœ‰å“ªäº›ï¼Ÿå‡½æ•°ç»„ä»¶ vs ç±»ç»„ä»¶åŒºåˆ«ï¼Ÿ\r#\rReact ç»„ä»¶ä¸»è¦æœ‰å‡½æ•°ç»„ä»¶ (Functional Components) å’Œ ç±»ç»„ä»¶ (Class Components)ã€‚\nå‡½æ•°ç»„ä»¶ vs ç±»ç»„ä»¶åŒºåˆ«ï¼š\nç‰¹ç‚¹ å‡½æ•°ç»„ä»¶ (Hooks ä¹‹å‰) å‡½æ•°ç»„ä»¶ (Hooks ä¹‹å) ç±»ç»„ä»¶ å®šä¹‰ çº¯å‡½æ•°ï¼Œæ¥æ”¶ props è¿”å› JSX çº¯å‡½æ•°ï¼Œæ¥æ”¶ props è¿”å› JSX ES6 Classï¼Œç»§æ‰¿ React.Component çŠ¶æ€ æ— çŠ¶æ€ (Stateless) é€šè¿‡ useState Hook ç®¡ç†çŠ¶æ€ é€šè¿‡ this.state å’Œ this.setState ç®¡ç† ç”Ÿå‘½å‘¨æœŸ æ— ç”Ÿå‘½å‘¨æœŸæ–¹æ³• é€šè¿‡ useEffect Hook æ¨¡æ‹Ÿç”Ÿå‘½å‘¨æœŸæ–¹æ³• æ‹¥æœ‰ componentDidMount ç­‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸæ–¹æ³• this æ—  this (ç®­å¤´å‡½æ•°é™¤å¤–) æ—  this å­˜åœ¨ thisï¼Œéœ€è¦å¤„ç† this ç»‘å®š æ€§èƒ½ ç†è®ºä¸Šæ›´è½»é‡ï¼Œæ½œåœ¨æ€§èƒ½ä¼˜åŒ–ï¼ˆå¦‚è‡ªåŠ¨è®°å¿†åŒ–ï¼‰ ç†è®ºä¸Šæ›´è½»é‡ï¼Œé…åˆ useCallback/useMemo ä¼˜åŒ– ç›¸å¯¹é‡ï¼Œä¼˜åŒ–éœ€ shouldComponentUpdate ä»£ç é£æ ¼ æ›´ç®€æ´ï¼Œæ˜“äºæµ‹è¯•å’Œç†è§£ æ›´ç®€æ´ï¼Œæ˜“äºæµ‹è¯•å’Œç†è§£ ç›¸å¯¹ç¹çï¼Œéœ€è¦ç¼–å†™æ›´å¤šæ ·æ¿ä»£ç  æ¨èï¼š åœ¨ React 16.8 å¼•å…¥ Hooks åï¼Œå‡½æ•°ç»„ä»¶æˆä¸ºä¸»æµï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†åŒæ ·çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä»£ç æ›´ç®€æ´ã€å¯è¯»æ€§æ›´é«˜ï¼Œä¸”æ›´å®¹æ˜“è¿›è¡Œé€»è¾‘å¤ç”¨ï¼ˆè‡ªå®šä¹‰ Hookï¼‰ã€‚\nä»€ä¹ˆæ˜¯ JSXï¼Ÿå®ƒå¦‚ä½•è¢«å¤„ç†ï¼Ÿ\r#\rJSX (JavaScript XML) æ˜¯ä¸€ç§ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ JavaScript ä»£ç ä¸­ç¼–å†™ç±»ä¼¼ HTML çš„ç»“æ„ã€‚å®ƒå¹¶ä¸æ˜¯çœŸæ­£çš„ HTMLï¼Œè€Œæ˜¯ React æä¾›çš„ä¸€ç§è¯­æ³•ç³–ï¼Œç”¨äºæè¿° UI çš„ç»“æ„å’Œç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚\nJSX çš„å¤„ç†è¿‡ç¨‹ï¼š JSX ä¸ä¼šè¢«æµè§ˆå™¨ç›´æ¥è¯†åˆ«ã€‚å®ƒä¼šè¢« Babel ç­‰è½¬è¯‘å·¥å…·ç¼–è¯‘æˆæ™®é€šçš„ JavaScript å‡½æ•°è°ƒç”¨ã€‚ä¾‹å¦‚ï¼š \u0026lt;h1\u0026gt;Hello, {name}!\u0026lt;/h1\u0026gt; ä¼šè¢«ç¼–è¯‘æˆ React.createElement('h1', null, 'Hello, ', name, '!'); è¿™äº› React.createElement è°ƒç”¨ä¼šè¿”å›ä¸€ä¸ª JavaScript å¯¹è±¡ï¼ˆå³ React å…ƒç´ ï¼‰ï¼Œæè¿°äº† UI ç»“æ„ã€‚React å†æ ¹æ®è¿™äº› React å…ƒç´ æ„å»ºè™šæ‹Ÿ DOMã€‚\nReact ä¸­çš„çŠ¶æ€å’Œ props æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\r#\rProps (Properties) å’Œ State (çŠ¶æ€) æ˜¯ React ç»„ä»¶ä¸­ç”¨äºå­˜å‚¨æ•°æ®å¹¶é©±åŠ¨ UI æ›´æ–°çš„ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä½†å®ƒä»¬æœ‰æœ¬è´¨åŒºåˆ«ï¼š\nç‰¹ç‚¹ Props State æ‰€æœ‰è€… ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ ç»„ä»¶è‡ªèº«ç®¡ç† å¯å˜æ€§ ä¸å¯å˜ (Immutable)ï¼šå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’çš„ props å¯å˜ (Mutable)ï¼šç»„ä»¶å†…éƒ¨å¯ä»¥æ›´æ–°è‡ªå·±çš„ state ä¼ é€’æ–¹å¼ ä½œä¸ºå‚æ•°ä¼ é€’ç»™ç»„ä»¶ é€šè¿‡ useState (å‡½æ•°ç»„ä»¶) æˆ– this.setState (ç±»ç»„ä»¶) æ›´æ–° ç›®çš„ ç”¨äºç»„ä»¶é—´é€šä¿¡ï¼Œé…ç½®ç»„ä»¶å¤–è§‚å’Œè¡Œä¸º å­˜å‚¨ç»„ä»¶å†…éƒ¨éšæ—¶é—´å˜åŒ–çš„æ•°æ®ï¼Œé©±åŠ¨è‡ªèº« UI æ›´æ–° key çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç”¨ indexï¼Ÿ\r#\råœ¨ React æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œkey æ˜¯ç”¨äºå”¯ä¸€æ ‡è¯†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„ç‰¹æ®Šå­—ç¬¦ä¸²å±æ€§ã€‚ å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å¸®åŠ© React é«˜æ•ˆåœ°è¯†åˆ«å“ªäº›å…ƒç´ å‘ç”Ÿäº†å˜åŒ–ã€è¢«æ·»åŠ æˆ–è¢«ç§»é™¤ã€‚\nkey çš„å·¥ä½œåŸç†ï¼š å½“åˆ—è¡¨é‡æ–°æ¸²æŸ“æ—¶ï¼ŒReact ä¼šä½¿ç”¨ key æ¥åŒ¹é…æ—§åˆ—è¡¨ä¸­çš„å…ƒç´ å’Œæ–°åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚å¦‚æœ key ç›¸åŒï¼ŒReact å°±è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªç»„ä»¶/å…ƒç´ ï¼Œä¼šå°è¯•å¤ç”¨å®ƒå¹¶åªæ›´æ–°å…¶å†…éƒ¨å±æ€§ï¼›å¦‚æœ key ä¸åŒï¼Œåˆ™ä¼šé”€æ¯æ—§ç»„ä»¶å¹¶åˆ›å»ºæ–°ç»„ä»¶ã€‚\nä¸ºä»€ä¹ˆä¸èƒ½ç”¨ index ä½œä¸º keyï¼Ÿ å½“åˆ—è¡¨é¡¹çš„é¡ºåºå¯èƒ½ä¼šæ”¹å˜ã€æ–°å¢æˆ–åˆ é™¤æ—¶ï¼Œä½¿ç”¨æ•°ç»„ç´¢å¼• (index) ä½œä¸º key ä¼šå¯¼è‡´é—®é¢˜ï¼š\næ€§èƒ½é—®é¢˜ï¼š å½“åˆ—è¡¨ä¸­é—´çš„æŸä¸ªå…ƒç´ è¢«åˆ é™¤æˆ–æ’å…¥æ—¶ï¼Œåç»­å…ƒç´ çš„ç´¢å¼•ä¼šå‘ç”Ÿå˜åŒ–ã€‚React ä¼šé”™è¯¯åœ°è®¤ä¸ºè¿™äº›å…ƒç´ æ˜¯æ–°çš„ï¼Œä»è€Œé”€ç”¨æ—§å…ƒç´ å¹¶é‡æ–°åˆ›å»ºæ–°å…ƒç´ ï¼Œå¯¼è‡´ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œå½±å“æ€§èƒ½ã€‚ çŠ¶æ€é”™ä¹±ï¼š å¦‚æœåˆ—è¡¨é¡¹å†…éƒ¨æœ‰è‡ªå·±çš„çŠ¶æ€ï¼ˆå¦‚è¾“å…¥æ¡†çš„ valueï¼‰ï¼Œä½¿ç”¨ index ä½œä¸º key å¯èƒ½ä¼šå¯¼è‡´çŠ¶æ€æ··æ·†ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ä¸­é—´é¡¹åï¼ŒåŸå…ˆæ’åœ¨åé¢çš„å…ƒç´ ä¼šâ€œæ¥æ›¿â€å‰é¢å…ƒç´ çš„ç´¢å¼•ï¼Œå¯èƒ½é”™è¯¯åœ°ç»§æ‰¿äº†å‰é¢å…ƒç´ çš„çŠ¶æ€ã€‚ æœ€ä½³å®è·µï¼š å§‹ç»ˆä½¿ç”¨ç¨³å®šä¸”å”¯ä¸€çš„ keyï¼Œé€šå¸¸æ˜¯æ•°æ®é¡¹æœ¬èº«çš„å”¯ä¸€ IDï¼ˆå¦‚æ•°æ®åº“ IDï¼‰ã€‚åªæœ‰å½“åˆ—è¡¨æ˜¯é™æ€çš„ã€æ°¸ä¸æ”¹å˜é¡ºåºå’Œå†…å®¹çš„ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ index ä½œä¸º keyï¼Œä½†é€šå¸¸ä¸æ¨èã€‚\nä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶ï¼Ÿ\r#\rè¿™ä¸¤ä¸ªæ¦‚å¿µä¸»è¦ç”¨äº è¡¨å•å…ƒç´  çš„å¤„ç†ã€‚\nå—æ§ç»„ä»¶ (Controlled Components)ï¼š\nå®šä¹‰ï¼š è¡¨å•å…ƒç´ çš„å€¼ç”± React ç»„ä»¶çš„çŠ¶æ€ (State) æ¥æ§åˆ¶ã€‚æ¯æ¬¡è¾“å…¥æ¡†çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šé€šè¿‡ onChange äº‹ä»¶æ›´æ–°ç»„ä»¶çš„çŠ¶æ€ï¼Œç„¶åçŠ¶æ€çš„æ”¹å˜å†åæ˜ åˆ°è¾“å…¥æ¡†ä¸Šã€‚ ç‰¹ç‚¹ï¼š è¡¨å•æ•°æ®ç”± React ç»„ä»¶ç®¡ç†ï¼Œå€¼å®Œå…¨åŒæ­¥ã€‚ æ›´æ˜“äºå®ç°å³æ—¶æ ¡éªŒã€æ¡ä»¶ç¦ç”¨ã€æ ¼å¼åŒ–è¾“å…¥ç­‰åŠŸèƒ½ã€‚ ä»£ç ç›¸å¯¹æ›´å¤æ‚ä¸€äº›ï¼Œå› ä¸ºéœ€è¦ä¸ºæ¯ä¸ªè¾“å…¥æ¡†ç»´æŠ¤çŠ¶æ€å’Œ onChange å¤„ç†å‡½æ•°ã€‚ ä¾‹å­ï¼š \u0026lt;input type=\u0026quot;text\u0026quot; value={this.state.name} onChange={this.handleChange} /\u0026gt; éå—æ§ç»„ä»¶ (Uncontrolled Components)ï¼š\nå®šä¹‰ï¼š è¡¨å•å…ƒç´ çš„å€¼ä¸ç”± React ç»„ä»¶çš„çŠ¶æ€æ§åˆ¶ï¼Œè€Œæ˜¯ç”± DOM è‡ªèº«æ¥ç®¡ç†ã€‚é€šå¸¸é€šè¿‡ ref æ¥ç›´æ¥è®¿é—® DOM å…ƒç´ å¹¶è·å–å…¶å€¼ã€‚ ç‰¹ç‚¹ï¼š è¡¨å•æ•°æ®ç”± DOM è‡ªèº«ç®¡ç†ã€‚ æ›´æ¥è¿‘ä¼ ç»Ÿçš„ HTML è¡¨å•è¡Œä¸ºã€‚ ä»£ç ç›¸å¯¹ç®€å•ï¼Œå› ä¸ºä¸éœ€è¦ç»´æŠ¤å¤§é‡çŠ¶æ€ã€‚ ä½†åœ¨å¤æ‚äº¤äº’åœºæ™¯ä¸‹ï¼Œæ§åˆ¶èƒ½åŠ›è¾ƒå¼±ã€‚ ä¾‹å­ï¼š \u0026lt;input type=\u0026quot;text\u0026quot; ref={inputRef} /\u0026gt;ï¼Œç„¶åé€šè¿‡ inputRef.current.value è·å–å€¼ã€‚ é€‰æ‹©ï¼š å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå—æ§ç»„ä»¶æ›´å¸¸ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¼ºå¤§çš„æ§åˆ¶èƒ½åŠ›å’Œæ›´æ¸…æ™°çš„æ•°æ®æµã€‚éå—æ§ç»„ä»¶é€‚ç”¨äºä¸€äº›ç®€å•çš„åœºæ™¯ï¼Œæˆ–è€…éœ€è¦é›†æˆé React çš„ DOM åº“æ—¶ã€‚\nâš™ï¸ Hooks\r#\ruseState å’Œ useEffect çš„ç”¨æ³•ä¸æ³¨æ„äº‹é¡¹ï¼Ÿ\r#\r1. useStateï¼š\nç”¨æ³•ï¼š ```javascript const [state, setState] = useState(initialState); * `state`: å½“å‰çš„çŠ¶æ€å€¼ã€‚\r* `setState`: æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚\r* `initialState`: çŠ¶æ€çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ï¼ˆç”¨äºå»¶è¿Ÿåˆå§‹åŒ–æˆ–å¤æ‚è®¡ç®—ï¼‰ã€‚ æ³¨æ„äº‹é¡¹ï¼š ä¸å¯å˜æ›´æ–°ï¼š setState æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶ä¸”åº”è¯¥å§‹ç»ˆç”¨æ–°å€¼æ›¿æ¢æ—§å€¼ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ—§å€¼ï¼ˆå³ä¸å¯å˜æ›´æ–°ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ›´æ–°æ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œåº”åˆ›å»ºæ–°æ•°ç»„/å¯¹è±¡ï¼šsetArray([...array, newItem]) æˆ– setObject({...object, key: value})ã€‚ å‡½æ•°å¼æ›´æ–°ï¼š å½“æ–°çŠ¶æ€ä¾èµ–äºæ—§çŠ¶æ€æ—¶ï¼Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ç»™ setState æ›´å®‰å…¨ï¼Œå¯ä»¥é¿å…é—­åŒ…é™·é˜±ï¼šsetCount(prevCount =\u0026gt; prevCount + 1)ã€‚ æ‰¹å¤„ç† (Batching)ï¼š åœ¨ React 18 ä¹‹å‰ï¼ŒsetState åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ˜¯æ‰¹é‡æ›´æ–°çš„ï¼Œåœ¨å¼‚æ­¥ä»£ç ä¸­æ˜¯åŒæ­¥çš„ã€‚React 18 å¼€å§‹ï¼Œæ‰€æœ‰ setState è°ƒç”¨é»˜è®¤éƒ½æ˜¯æ‰¹é‡æ›´æ–°çš„ï¼ˆè‡ªåŠ¨æ‰¹å¤„ç†ï¼‰ï¼Œæ— è®ºæ˜¯åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è¿˜æ˜¯å¼‚æ­¥ä»£ç ä¸­ï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚ 2. useEffectï¼š\nç”¨æ³•ï¼š ç”¨äºå¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ (side effects)ï¼Œå¦‚æ•°æ®è·å–ã€è®¢é˜…ã€æ‰‹åŠ¨æ”¹å˜ DOMã€å®šæ—¶å™¨ç­‰ã€‚ useEffect(() =\u0026gt; { // å‰¯ä½œç”¨ä»£ç  return () =\u0026gt; { // æ¸…ç†å‡½æ•° (å¯é€‰)ï¼Œåœ¨ç»„ä»¶å¸è½½æˆ–ä¾èµ–é¡¹æ”¹å˜å‰æ‰§è¡Œ }; }, [dependencies]); // ä¾èµ–æ•°ç»„ (å¯é€‰) æ³¨æ„äº‹é¡¹ï¼š æ‰§è¡Œæ—¶æœºï¼š useEffect åœ¨æ¯æ¬¡æ¸²æŸ“åï¼ˆåŒ…æ‹¬åˆæ¬¡æ¸²æŸ“å’Œæ›´æ–°ï¼‰æ‰§è¡Œï¼Œä½†ä¼šåœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€å’Œç»˜åˆ¶ä¹‹åã€‚ æ¸…ç†å‡½æ•°ï¼š è¿”å›çš„å‡½æ•°ç”¨äºæ¸…ç†å‰¯ä½œç”¨ï¼Œä¾‹å¦‚å–æ¶ˆè®¢é˜…ã€æ¸…é™¤å®šæ—¶å™¨ã€ç§»é™¤äº‹ä»¶ç›‘å¬ã€‚å®ƒä¼šåœ¨ç»„ä»¶å¸è½½æ—¶æˆ–ä¸‹æ¬¡ useEffect æ‰§è¡Œå‰ï¼ˆä¾èµ–é¡¹å˜åŒ–æ—¶ï¼‰æ‰§è¡Œã€‚ ä¾èµ–æ•°ç»„ï¼š ç©ºæ•°ç»„ []ï¼š å‰¯ä½œç”¨åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ¸…ç†å‡½æ•°åœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚æ¨¡æ‹Ÿ componentDidMount å’Œ componentWillUnmountã€‚ æ— ä¾èµ–æ•°ç»„ï¼š å‰¯ä½œç”¨åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½æ‰§è¡Œã€‚æ…ç”¨ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ æœ‰ä¾èµ–é¡¹ [dep1, dep2]ï¼š å‰¯ä½œç”¨åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œï¼Œæ¸…ç†å‡½æ•°åœ¨ä¸‹æ¬¡ä¾èµ–é¡¹å˜åŒ–å‰æˆ–ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚æ¨¡æ‹Ÿ componentDidUpdate å’Œ componentWillUnmountã€‚ é—­åŒ…é—®é¢˜ï¼š å¦‚æœ useEffect å†…éƒ¨ä½¿ç”¨äº†ç»„ä»¶å¤–éƒ¨çš„å˜é‡æˆ–å‡½æ•°ï¼Œä½†æ²¡æœ‰å°†å…¶åŒ…å«åœ¨ä¾èµ–æ•°ç»„ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½¿ç”¨åˆ°æ—§çš„å˜é‡å€¼ï¼Œäº§ç”Ÿéš¾ä»¥è°ƒè¯•çš„ bugã€‚ å¦‚ä½•æ¨¡æ‹Ÿ componentDidMount / DidUpdate / WillUnmountï¼Ÿ\r#\rcomponentDidMountï¼š ä½¿ç”¨ useEffectï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºä¾èµ–é¡¹ã€‚ useEffect(() =\u0026gt; { console.log(\u0026#39;ç»„ä»¶å·²æŒ‚è½½ï¼Œåªæ‰§è¡Œä¸€æ¬¡\u0026#39;); // æ•°æ®è¯·æ±‚ã€è®¢é˜…ç­‰ }, []); componentDidUpdateï¼š ä½¿ç”¨ useEffectï¼Œå¹¶ä¼ å…¥åŒ…å«æ‰€æœ‰éœ€è¦ç›‘å¬å˜åŒ–çš„ä¾èµ–é¡¹ã€‚ useEffect(() =\u0026gt; { console.log(\u0026#39;ç»„ä»¶å·²æ›´æ–°ï¼Œæˆ–è€… count/name æ”¹å˜äº†\u0026#39;); // å½“ count æˆ– name æ”¹å˜æ—¶æ‰§è¡Œé€»è¾‘ }, [count, name]); componentWillUnmountï¼š ä½¿ç”¨ useEffectï¼Œå¹¶åœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ã€‚å½“ä¾èµ–æ•°ç»„ä¸ºç©ºæ—¶ï¼Œæ¸…ç†å‡½æ•°åªåœ¨ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œã€‚ useEffect(() =\u0026gt; { const timer = setInterval(() =\u0026gt; { console.log(\u0026#39;å®šæ—¶å™¨è¿è¡Œä¸­...\u0026#39;); }, 1000); return () =\u0026gt; { clearInterval(timer); // åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ console.log(\u0026#39;ç»„ä»¶å³å°†å¸è½½ï¼Œæ¸…ç†å·¥ä½œå·²å®Œæˆ\u0026#39;); }; }, []); useEffect ä¾èµ–æ•°ç»„ä¸ºä»€ä¹ˆä¸èƒ½éšä¾¿çœç•¥ï¼Ÿ\r#\ruseEffect çš„ä¾èµ–æ•°ç»„ç”¨äºå‘Šè¯‰ React ä½•æ—¶é‡æ–°è¿è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚å¦‚æœçœç•¥ä¾èµ–æ•°ç»„ï¼ˆå³ä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼ŒuseEffect ä¼šåœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½æ‰§è¡Œï¼Œè¿™é€šå¸¸ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜å’Œé€»è¾‘é”™è¯¯ï¼Œå› ä¸ºå‰¯ä½œç”¨å¯èƒ½ä¼šä¸å¿…è¦åœ°é¢‘ç¹è¿è¡Œã€‚\næ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœå‰¯ä½œç”¨å‡½æ•°å†…éƒ¨ä½¿ç”¨äº†ç»„ä»¶çŠ¶æ€ã€props æˆ–å‡½æ•°ï¼Œä½†æ²¡æœ‰å°†å®ƒä»¬åˆ—åœ¨ä¾èµ–æ•°ç»„ä¸­ï¼Œå°±ä¼šå¯¼è‡´â€œé—­åŒ…é™·é˜±â€ï¼š å‰¯ä½œç”¨å‡½æ•°ä¼šæ•è·åˆ°é¦–æ¬¡æ¸²æŸ“æ—¶çš„æ—§å€¼ï¼Œå³ä½¿è¿™äº›å€¼åœ¨åç»­æ¸²æŸ“ä¸­å·²ç»æ›´æ–°ã€‚è¿™å¯èƒ½å¯¼è‡´ï¼š\nä½¿ç”¨è¿‡æœŸçš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚ è®¢é˜…æˆ–ç›‘å¬äº†æ—§çš„äº‹ä»¶æºã€‚ å†…å­˜æ³„æ¼ï¼ˆæ¸…ç†å‡½æ•°å¯èƒ½æ²¡æœ‰æ­£ç¡®åœ°æ¸…ç†æ‰æ—§çš„èµ„æºï¼‰ã€‚ ç¤ºä¾‹ï¼š\nfunction Counter() { const [count, setCount] = useState(0); // é”™è¯¯ï¼šçœç•¥äº†ä¾èµ–æ•°ç»„ï¼Œeffect ä¼šä½¿ç”¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„ count = 0 // å¯¼è‡´æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œlog éƒ½ä¼šæ˜¯ 0ï¼Œè€Œä¸æ˜¯æœ€æ–°çš„ count useEffect(() =\u0026gt; { console.log(\u0026#39;Count is:\u0026#39;, count); // æ°¸è¿œæ˜¯ 0 }); // âŒ ç¼ºå°‘ä¾èµ–æ•°ç»„ // æ­£ç¡®ï¼šæ˜ç¡®å‘Šè¯‰ React ä¾èµ– countï¼Œå½“ count å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ useEffect(() =\u0026gt; { console.log(\u0026#39;Count is:\u0026#39;, count); // æ˜¾ç¤ºæœ€æ–°çš„ count }, [count]); // âœ… åŒ…å«äº†ä¾èµ–é¡¹ return \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt;; } ç»“è®ºï¼š ä¸¥æ ¼éµå¾ª useEffect çš„ä¾èµ–é¡¹è§„åˆ™æ˜¯é¿å…å„ç§éš¾ä»¥è°ƒè¯•çš„ bug å’Œæ€§èƒ½é—®é¢˜çš„å…³é”®ã€‚\nå¦‚ä½•ç”¨ useRef å®ç°é˜²æŠ–æˆ–ä¿å­˜æ—§çŠ¶æ€ï¼Ÿ\r#\r1. ç”¨ useRef å®ç°é˜²æŠ– (Debounce)ï¼š useRef å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸€ä¸ªåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´æŒä¹…å­˜åœ¨çš„å¯å˜å€¼ï¼Œè€Œä¸ä¼šå¼•èµ·ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å…¶éå¸¸é€‚åˆå­˜å‚¨å®šæ—¶å™¨ IDï¼Œä»¥ä¾¿åœ¨åç»­æ¸²æŸ“ä¸­æ¸…é™¤å®ƒã€‚\nimport React, { useRef, useEffect } from \u0026#39;react\u0026#39;; function DebouncedInput() { const [value, setValue] = useState(\u0026#39;\u0026#39;); const timerRef = useRef(null); // å­˜å‚¨å®šæ—¶å™¨IDçš„ref useEffect(() =\u0026gt; { // æ¸…ç†å‡½æ•°ï¼Œåœ¨æ¯æ¬¡ effect æ‰§è¡Œå‰å’Œç»„ä»¶å¸è½½æ—¶æ¸…é™¤å®šæ—¶å™¨ return () =\u0026gt; { if (timerRef.current) { clearTimeout(timerRef.current); } }; }, []); // ç©ºæ•°ç»„ï¼Œç¡®ä¿åªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶å¤„ç† const handleChange = (e) =\u0026gt; { const inputValue = e.target.value; setValue(inputValue); // æ¸…é™¤ä¸Šæ¬¡çš„å®šæ—¶å™¨ if (timerRef.current) { clearTimeout(timerRef.current); } // è®¾ç½®æ–°çš„å®šæ—¶å™¨ timerRef.current = setTimeout(() =\u0026gt; { console.log(\u0026#39;Debounced value:\u0026#39;, inputValue); // åœ¨è¿™é‡Œæ‰§è¡Œå®é™…çš„æœç´¢æˆ–APIè°ƒç”¨ }, 500); }; return \u0026lt;input type=\u0026#34;text\u0026#34; value={value} onChange={handleChange} placeholder=\u0026#34;Type to debounce...\u0026#34; /\u0026gt;; } 2. ç”¨ useRef ä¿å­˜æ—§çŠ¶æ€ï¼š useRef ä¹Ÿå¯ä»¥ç”¨æ¥ä¿å­˜ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„çŠ¶æ€å€¼ï¼Œå› ä¸º ref.current åœ¨æ¸²æŸ“ä¹‹é—´æ˜¯æŒä¹…çš„ã€‚\nimport React, { useState, useEffect, useRef } from \u0026#39;react\u0026#39;; function PreviousValueDisplay() { const [count, setCount] = useState(0); const prevCountRef = useRef(0); // åˆå§‹åŒ–refæ¥å­˜å‚¨æ—§å€¼ // åœ¨æ¯æ¬¡æ¸²æŸ“åï¼Œå°†å½“å‰ count å­˜å‚¨åˆ° ref ä¸­ useEffect(() =\u0026gt; { prevCountRef.current = count; }); // æ²¡æœ‰ä¾èµ–æ•°ç»„ï¼Œæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œ const prevCount = prevCountRef.current; // è·å–ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„å€¼ return ( \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;Current Count: {count}\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Previous Count: {prevCount}\u0026lt;/p\u0026gt; {/* è¿™é‡Œçš„ prevCount æ˜¯ä¸Šä¸€æ¬¡æ¸²æŸ“çš„ count */} \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ); } åœ¨ React 16.8+ ä¸­ï¼Œä½¿ç”¨ useRef æ˜¯ä¿å­˜è·¨æ¸²æŸ“å‘¨æœŸå¯å˜å€¼çš„æ ‡å‡†æ–¹å¼ã€‚\nuseCallback vs useMemo åŒºåˆ«ï¼Ÿ\r#\ruseCallback å’Œ useMemo éƒ½æ˜¯ React Hooksï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œé€šè¿‡è®°å¿†åŒ– (memoization) é¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ã€‚\nuseCallbackï¼š\nç›®çš„ï¼š è®°å¿†åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«è®°å¿†åŒ–çš„å›è°ƒå‡½æ•°ã€‚ è¯­æ³•ï¼š const memoizedCallback = useCallback(() =\u0026gt; { /* ... */ }, [dependencies]); ä½œç”¨ï¼š å½“ä¾èµ–é¡¹æ•°ç»„ä¸­çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseCallback ä¼šè¿”å›ä¸Šæ¬¡æ¸²æŸ“æ—¶åˆ›å»ºçš„å‡½æ•°å®ä¾‹ã€‚è¿™å¯¹äºå°†å‡½æ•°ä½œä¸º props ä¼ é€’ç»™å­ç»„ä»¶ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨äº† React.memo ä¼˜åŒ–çš„å­ç»„ä»¶ï¼‰éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥é˜²æ­¢å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚ ä½¿ç”¨åœºæ™¯ï¼š ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€useEffect çš„ä¾èµ–é¡¹ï¼ˆå½“å‡½æ•°æœ¬èº«æ˜¯ useEffect çš„ä¾èµ–æ—¶ï¼‰ã€‚ useMemoï¼š\nç›®çš„ï¼š è®°å¿†åŒ–ä¸€ä¸ªå€¼ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼ŒåŒ…æ‹¬ä¸€ä¸ª JSX ç‰‡æ®µã€ä¸€ä¸ªå¯¹è±¡ã€ä¸€ä¸ªè®¡ç®—ç»“æœç­‰ï¼‰ï¼Œè¿”å›ä¸€ä¸ªè¢«è®°å¿†åŒ–çš„å€¼ã€‚ è¯­æ³•ï¼š const memoizedValue = useMemo(() =\u0026gt; computeExpensiveValue(a, b), [a, b]); ä½œç”¨ï¼š å½“ä¾èµ–é¡¹æ•°ç»„ä¸­çš„å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseMemo ä¼šè¿”å›ä¸Šæ¬¡è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œé¿å…é‡å¤æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ˜‚è´µçš„è®¡ç®—ç»“æœã€æ´¾ç”ŸçŠ¶æ€ã€å¤æ‚çš„ JSX æ¸²æŸ“ã€ä¼ é€’ç»™å­ç»„ä»¶çš„å¤æ‚å¯¹è±¡ã€‚ æ€»ç»“åŒºåˆ«ï¼š\nuseCallback è®°å¿†çš„æ˜¯ä¸€ä¸ªå‡½æ•°**ã€‚ useMemo è®°å¿†çš„æ˜¯ä¸€ä¸ªå€¼**ã€‚ ä¾‹å­ï¼š\nimport React, { useState, useCallback, useMemo } from \u0026#39;react\u0026#39;; // å­ç»„ä»¶ï¼Œå‡è®¾å®ƒè¢« React.memo ä¼˜åŒ–ï¼Œåªæœ‰ props æ”¹å˜æ—¶æ‰æ¸²æŸ“ const ChildComponent = React.memo(({ onClick, data }) =\u0026gt; { console.log(\u0026#39;ChildComponent re-rendered\u0026#39;); return ( \u0026lt;div\u0026gt; \u0026lt;button onClick={onClick}\u0026gt;Click me\u0026lt;/button\u0026gt; \u0026lt;p\u0026gt;{data}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; ); }); function ParentComponent() { const [count, setCount] = useState(0); const [name, setName] = useState(\u0026#39;Alice\u0026#39;); // ä½¿ç”¨ useCallback è®°å¿†å‡½æ•°ï¼šåªæœ‰å½“ count æ”¹å˜æ—¶ï¼ŒhandleClick æ‰é‡æ–°åˆ›å»º const handleClick = useCallback(() =\u0026gt; { setCount(c =\u0026gt; c + 1); }, [count]); // å¦‚æœ count æ˜¯ä¾èµ–é¡¹ï¼Œå½“ count å˜åŒ–æ—¶ï¼ŒhandleClick ä¼šè¢«é‡æ–°åˆ›å»º // ä½¿ç”¨ useMemo è®°å¿†å€¼ï¼šåªæœ‰å½“ name æ”¹å˜æ—¶ï¼ŒexpensiveData æ‰é‡æ–°è®¡ç®— const expensiveData = useMemo(() =\u0026gt; { console.log(\u0026#39;Calculating expensive data...\u0026#39;); return `Hello, ${name}! The count is ${count}.`; }, [name, count]); // å¦‚æœ name æˆ– count æ”¹å˜ï¼ŒexpensiveData ä¼šé‡æ–°è®¡ç®— return ( \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;Count: {count}\u0026lt;/p\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; value={name} onChange={e =\u0026gt; setName(e.target.value)} /\u0026gt; {/* å³ä½¿ ParentComponent é‡æ–°æ¸²æŸ“ï¼Œå¦‚æœ handleClick æ²¡æœ‰å˜ï¼ŒChildComponent ä¹Ÿä¸ä¼šæ¸²æŸ“ */} \u0026lt;ChildComponent onClick={handleClick} data={expensiveData} /\u0026gt; \u0026lt;/div\u0026gt; ); } è‡ªå®šä¹‰ Hook æ€ä¹ˆå†™ï¼Ÿå®é™…é¡¹ç›®ä¸­å†™è¿‡å“ªäº›ï¼Ÿ\r#\rè‡ªå®šä¹‰ Hook æ˜¯ä¸€ç§å°†ç»„ä»¶é€»è¾‘æŠ½å–å‡ºæ¥å¹¶åœ¨å‡½æ•°ç»„ä»¶ä¹‹é—´å…±äº«çš„æœºåˆ¶ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª JavaScript å‡½æ•°ï¼Œå…¶åç§°çº¦å®šä»¥ use å¼€å¤´ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶ä¸­è°ƒç”¨å…¶ä»– Hookï¼ˆå¦‚ useState, useEffect, useRef ç­‰ï¼‰ã€‚\næ€ä¹ˆå†™ï¼Ÿ\nåˆ›å»ºä¸€ä¸ª JavaScript å‡½æ•°ï¼š åç§°ä»¥ use å¼€å¤´ï¼ˆè¿™æ˜¯ React çš„çº¦å®šï¼Œç”¨äºè®© Linter è¯†åˆ«å¹¶éµå¾ª Hook è§„åˆ™ï¼‰ã€‚ åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨å…¶ä»– Hookï¼š ä¾‹å¦‚ useState æ¥ç®¡ç†å†…éƒ¨çŠ¶æ€ï¼ŒuseEffect æ¥å¤„ç†å‰¯ä½œç”¨ç­‰ã€‚ è¿”å›éœ€è¦å…±äº«çš„çŠ¶æ€å’Œæ–¹æ³•ï¼š å¯ä»¥è¿”å›ä¸€ä¸ªæ•°ç»„ã€å¯¹è±¡æˆ–ä»»ä½•å€¼ã€‚ ç¤ºä¾‹ï¼šuseToggle\nimport { useState, useCallback } from \u0026#39;react\u0026#39;; function useToggle(initialValue = false) { const [value, setValue] = useState(initialValue); const toggle = useCallback(() =\u0026gt; { setValue(prevValue =\u0026gt; !prevValue); }, []); // ä¾èµ–é¡¹ä¸ºç©ºæ•°ç»„ï¼Œç¡®ä¿ toggle å‡½æ•°å¼•ç”¨ä¸å˜ return [value, toggle]; } // å¦‚ä½•ä½¿ç”¨ï¼š // function MyComponent() { // const [isOn, toggle] = useToggle(false); // return \u0026lt;button onClick={toggle}\u0026gt;{isOn ? \u0026#39;On\u0026#39; : \u0026#39;Off\u0026#39;}\u0026lt;/button\u0026gt;; // } å®é™…é¡¹ç›®ä¸­å†™è¿‡å“ªäº›ï¼Ÿ ï¼ˆè¿™é‡Œä½ éœ€è¦æ ¹æ®ä½ è‡ªå·±çš„é¡¹ç›®ç»éªŒæ¥å›ç­”ï¼Œä¸‹é¢æ˜¯å¸¸è§çš„ä¸€äº›ä¾‹å­ï¼‰\nuseLocalStorage / useSessionStorageï¼š ç”¨äºå°†çŠ¶æ€ä¸æµè§ˆå™¨æœ¬åœ°å­˜å‚¨åŒæ­¥ã€‚ useDebounce / useThrottleï¼š ç”¨äºå¯¹è¾“å…¥ã€æ»šåŠ¨ç­‰äº‹ä»¶è¿›è¡Œé˜²æŠ–/èŠ‚æµå¤„ç†ã€‚ usePreviousï¼š ç”¨äºè·å–ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„æŸä¸ªçŠ¶æ€æˆ– prop çš„å€¼ã€‚ useForm / useFormValidationï¼š å°è£…è¡¨å•çš„çŠ¶æ€ç®¡ç†ã€æ ¡éªŒé€»è¾‘ã€‚ useClickOutsideï¼š æ£€æµ‹å…ƒç´ å¤–éƒ¨ç‚¹å‡»äº‹ä»¶ï¼Œå¸¸ç”¨äºå®ç°ä¸‹æ‹‰èœå•æˆ–å¼¹çª—çš„ç‚¹å‡»å¤–éƒ¨å…³é—­åŠŸèƒ½ã€‚ useFetch / useApiï¼š å°è£…æ•°æ®è¯·æ±‚é€»è¾‘ï¼ŒåŒ…æ‹¬åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ã€ç¼“å­˜ç­‰ã€‚ useIntersectionObserverï¼š ç”¨äºå®ç°å›¾ç‰‡æ‡’åŠ è½½ã€æ— é™æ»šåŠ¨ç­‰ã€‚ useClipboardï¼š å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿ã€‚ è‡ªå®šä¹‰ Hook çš„å¥½å¤„ï¼š\né€»è¾‘å¤ç”¨ï¼š é¿å…åœ¨ä¸åŒç»„ä»¶ä¸­é‡å¤ç¼–å†™ç›¸åŒçš„çŠ¶æ€é€»è¾‘ã€‚ å…³æ³¨ç‚¹åˆ†ç¦»ï¼š å°†çŠ¶æ€é€»è¾‘ä» UI æ¸²æŸ“ä¸­åˆ†ç¦»ï¼Œä½¿ç»„ä»¶æ›´ä¸“æ³¨äºæ¸²æŸ“ã€‚ æé«˜å¯è¯»æ€§ï¼š ç»„ä»¶ä»£ç æ›´ç®€æ´ï¼Œæ˜“äºç†è§£ã€‚ æ˜“äºæµ‹è¯•ï¼š ç‹¬ç«‹çš„é€»è¾‘æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ ğŸš€ æ€§èƒ½ä¼˜åŒ–ä¸æ¶æ„\r#\rReact ä¸­æœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Ÿ\r#\rReact æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„è¯¾é¢˜ï¼Œæ¶‰åŠå¤šä¸ªå±‚é¢ï¼š\nå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ (Re-renders)ï¼š\nReact.memo (å‡½æ•°ç»„ä»¶) / PureComponent (ç±»ç»„ä»¶)ï¼š å¯¹ç»„ä»¶è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œå¦‚æœ props æ²¡æœ‰å˜åŒ–ï¼Œåˆ™è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ useCallback å’Œ useMemo Hooksï¼š è®°å¿†åŒ–å‡½æ•°å’Œè®¡ç®—ç»“æœï¼Œé¿å…å­ç»„ä»¶å› çˆ¶ç»„ä»¶ä¼ é€’çš„å‡½æ•°/å¯¹è±¡å¼•ç”¨å˜åŒ–è€Œé‡å¤æ¸²æŸ“ã€‚ åˆç†ä½¿ç”¨ shouldComponentUpdate (ç±»ç»„ä»¶)ï¼š æ‰‹åŠ¨æ§åˆ¶ç»„ä»¶æ˜¯å¦é‡æ–°æ¸²æŸ“ï¼ˆä½† Hooks æ—¶ä»£æ›´æ¨è React.memoï¼‰ã€‚ çŠ¶æ€æå‡å’Œç»„ä»¶æ‹†åˆ†ï¼š å°†ä¸å½±å“æŸä¸ªç»„ä»¶æ¸²æŸ“çš„çŠ¶æ€å’Œé€»è¾‘æå‡åˆ°çˆ¶ç»„ä»¶æˆ–æ‹†åˆ†åˆ°æ›´å°çš„ã€ç‹¬ç«‹çš„ç»„ä»¶ä¸­ï¼Œå‡å°‘å•ä¸ªç»„ä»¶çš„æ¸²æŸ“èŒƒå›´ã€‚ Key çš„æ­£ç¡®ä½¿ç”¨ï¼š åœ¨æ¸²æŸ“åˆ—è¡¨æ—¶ä½¿ç”¨ç¨³å®šä¸”å”¯ä¸€çš„ keyï¼Œå¸®åŠ© React æ­£ç¡®è¯†åˆ«å’Œå¤ç”¨å…ƒç´ ã€‚ æ•°æ®å±‚ä¼˜åŒ–ï¼š\næ•°æ®ä¸å¯å˜æ€§ (Immutable Data)ï¼š é¿å…ç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼Œå§‹ç»ˆåˆ›å»ºæ–°çš„æ•°æ®å‰¯æœ¬è¿›è¡Œæ›´æ–°ã€‚è¿™ä½¿å¾— React çš„ Diff ç®—æ³•èƒ½å¤Ÿè¿›è¡Œæ›´é«˜æ•ˆçš„æµ…æ¯”è¾ƒã€‚å¯ä»¥ä½¿ç”¨ Immer ç­‰åº“ç®€åŒ–ä¸å¯å˜æ›´æ–°ã€‚ åˆç†ä½¿ç”¨ç¼“å­˜ï¼š åœ¨æ•°æ®è¯·æ±‚å±‚ï¼ˆå¦‚ä½¿ç”¨ react-queryï¼‰æˆ–åº”ç”¨å±‚ä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘é‡å¤çš„ç½‘ç»œè¯·æ±‚ã€‚ é¦–æ¬¡åŠ è½½æ€§èƒ½ä¼˜åŒ–ï¼š\nä»£ç åˆ†å‰² (Code Splitting) å’Œæ‡’åŠ è½½ (Lazy Loading)ï¼š ä½¿ç”¨ React.lazy å’Œ Suspense æˆ–åŠ¨æ€ import()ï¼ŒæŒ‰éœ€åŠ è½½ç»„ä»¶å’Œä»£ç ï¼Œå‡å°‘åˆå§‹åŒ…ä½“ç§¯ã€‚ å›¾ç‰‡ä¼˜åŒ–ï¼š å‹ç¼©å›¾ç‰‡ã€ä½¿ç”¨ WebP æ ¼å¼ã€å›¾ç‰‡æ‡’åŠ è½½ã€‚ CDNï¼š é™æ€èµ„æºä½¿ç”¨ CDN åŠ é€Ÿã€‚ Gzip/Brotli å‹ç¼©ï¼š æœåŠ¡å™¨ç«¯å¼€å¯èµ„æºå‹ç¼©ã€‚ UI æ¸²æŸ“ä¼˜åŒ–ï¼š\nåˆ—è¡¨è™šæ‹ŸåŒ– (Virtualization) / çª—å£åŒ– (Windowing)ï¼š å¯¹äºåŒ…å«å¤§é‡æ•°æ®é¡¹çš„é•¿åˆ—è¡¨ï¼Œåªæ¸²æŸ“å¯è§åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œå¤§å¹…æå‡æ€§èƒ½ã€‚ é¿å…åœ¨æ¸²æŸ“å‡½æ•°ä¸­æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ï¼š å°†æ˜‚è´µçš„è®¡ç®—æ”¾å…¥ useMemo æˆ–ç§»åˆ°ç»„ä»¶å¤–éƒ¨ã€‚ é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºç»„ä»¶ï¼š å°½å¯èƒ½é¿å…åœ¨å¾ªç¯å†…å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼Œè¿™ä¼šå¯¼è‡´ä¸å¿…è¦çš„åˆ›å»ºå’Œé‡æ–°æ¸²æŸ“ã€‚ å…¶ä»–ï¼š\nä½¿ç”¨ç”Ÿäº§ç¯å¢ƒæ„å»ºï¼š ç”Ÿäº§ç¯å¢ƒçš„ React æ„å»ºä¼šç§»é™¤å¼€å‘ç¯å¢ƒçš„è°ƒè¯•ä»£ç å’Œè­¦å‘Šï¼Œä½“ç§¯æ›´å°ï¼Œè¿è¡Œæ›´å¿«ã€‚ Lighthouse / React DevTools Profilerï¼š ä½¿ç”¨è¿™äº›å·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æï¼Œæ‰¾å‡ºç“¶é¢ˆã€‚ ä»€ä¹ˆæ˜¯è™šæ‹ŸåŒ–ï¼ˆvirtualizationï¼‰ï¼Ÿç”¨è¿‡å“ªäº›åº“ï¼Ÿ\r#\rè™šæ‹ŸåŒ–ï¼ˆVirtualizationï¼‰ï¼Œä¹Ÿç§°ä¸ºâ€œçª—å£åŒ–ï¼ˆWindowingï¼‰â€ï¼Œæ˜¯ä¸€ç§é’ˆå¯¹é•¿åˆ—è¡¨ï¼ˆåŒ…å«å¤§é‡æ•°æ®é¡¹çš„åˆ—è¡¨ï¼‰çš„æ€§èƒ½ä¼˜åŒ–æŠ€æœ¯ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šåªæ¸²æŸ“å½“å‰åœ¨ç”¨æˆ·è§†å£ï¼ˆå³å±å¹•å¯è§åŒºåŸŸï¼‰å†…çš„åˆ—è¡¨é¡¹ï¼Œå¯¹äºè§†å£å¤–çš„å¤§é‡åˆ—è¡¨é¡¹ï¼Œåªè®¡ç®—å…¶å ä½é«˜åº¦ï¼Œè€Œä¸å®é™…æ¸²æŸ“å®ƒä»¬çš„å†…å®¹ã€‚ å½“ç”¨æˆ·æ»šåŠ¨æ—¶ï¼ŒåŠ¨æ€åœ°æ¸²æŸ“å’Œé”€æ¯åˆ—è¡¨é¡¹ã€‚\nä¼˜åŠ¿ï¼š å¤§å¹…å‡å°‘ DOM èŠ‚ç‚¹çš„æ•°é‡ï¼Œé™ä½æµè§ˆå™¨æ¸²æŸ“å‹åŠ›ï¼Œæå‡é•¿åˆ—è¡¨çš„æ»šåŠ¨æ€§èƒ½å’Œé¡µé¢å“åº”é€Ÿåº¦ã€‚\nç”¨è¿‡çš„åº“ï¼š\nreact-windowï¼š è½»é‡çº§ã€é«˜æ€§èƒ½çš„ React åˆ—è¡¨è™šæ‹ŸåŒ–åº“ï¼Œç”± react-virtualized ä½œè€…å¼€å‘ã€‚å®ƒæä¾›äº†å›ºå®šé«˜åº¦/å®½åº¦åˆ—è¡¨ã€å¯å˜é«˜åº¦/å®½åº¦åˆ—è¡¨ã€ç½‘æ ¼ç­‰ç»„ä»¶ã€‚æˆ‘ç»å¸¸ç”¨å®ƒæ¥å¤„ç†éœ€è¦å±•ç¤ºå‡ ç™¾åˆ°å‡ ä¸‡æ¡æ•°æ®çš„è¡¨æ ¼æˆ–åˆ—è¡¨ï¼Œæ•ˆæœéå¸¸æ˜¾è‘—ã€‚ react-virtualizedï¼š åŠŸèƒ½æ›´å¼ºå¤§ã€æ›´å…¨é¢çš„è™šæ‹ŸåŒ–åº“ï¼Œä½†ç›¸å¯¹ react-window æ›´é‡ä¸€äº›ã€‚å®ƒæä¾›äº†æ›´å¤šé«˜çº§åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨è°ƒæ•´è¡Œé«˜ã€æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ç­‰ã€‚ å®é™…åº”ç”¨åœºæ™¯ï¼š\næ•°æ®è¡¨æ ¼ï¼ˆå¦‚å±•ç¤ºå¤§é‡ç”¨æˆ·æ•°æ®ã€æ—¥å¿—è®°å½•ï¼‰ã€‚ èŠå¤©è®°å½•ã€ä¿¡æ¯æµã€‚ è‚¡ç¥¨è¡Œæƒ…ã€ç›‘æ§é¢æ¿ç­‰å®æ—¶æ•°æ®å±•ç¤ºã€‚ å¦‚ä½•é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“ï¼Ÿ\r#\ré¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“æ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç‚¹ä¹‹ä¸€ã€‚ä¸»è¦æ–¹æ³•åŒ…æ‹¬ï¼š\nä½¿ç”¨ React.memo (é’ˆå¯¹å‡½æ•°ç»„ä»¶)ï¼š\nè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚React.memo æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ (HOC)ï¼Œå®ƒä¼šæµ…å±‚æ¯”è¾ƒç»„ä»¶çš„ propsã€‚å¦‚æœ props æ²¡æœ‰æ”¹å˜ï¼Œç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š const MyMemoizedComponent = React.memo(MyComponent); æ³¨æ„äº‹é¡¹ï¼š å¯¹äº props ä¸­çš„å‡½æ•°å’Œå¯¹è±¡ï¼Œå¦‚æœå®ƒä»¬åœ¨çˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½é‡æ–°åˆ›å»ºï¼Œé‚£ä¹ˆ React.memo ä»ç„¶ä¼šåˆ¤æ–­ props æ”¹å˜ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚æ­¤æ—¶éœ€è¦é…åˆ useCallback å’Œ useMemoã€‚ ä½¿ç”¨ useCallback å’Œ useMemo (é’ˆå¯¹å‡½æ•°ç»„ä»¶çš„ props)ï¼š\nuseCallbackï¼š è®°å¿†åŒ–ä¼ é€’ç»™å­ç»„ä»¶çš„å›è°ƒå‡½æ•°ã€‚ç¡®ä¿å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¦‚æœå‡½æ•°çš„ä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œå‡½æ•°å¼•ç”¨ä¸ä¼šæ”¹å˜ï¼Œä»è€Œé¿å… React.memo çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ useMemoï¼š è®°å¿†åŒ–ä¼ é€’ç»™å­ç»„ä»¶çš„å¯¹è±¡ã€æ•°ç»„æˆ–æ˜‚è´µçš„è®¡ç®—ç»“æœã€‚ç¡®ä¿å½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¦‚æœå€¼çš„ä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œå¯¹è±¡/æ•°ç»„å¼•ç”¨ä¸ä¼šæ”¹å˜ï¼Œä»è€Œé¿å… React.memo çš„å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š const handleClick = useCallback(() =\u0026gt; { /* ... */ }, [dependency]); const data = useMemo(() =\u0026gt; ({ /* ... */ }), [dependency]); \u0026lt;MemoizedChild onClick={handleClick} data={data} /\u0026gt; ä½¿ç”¨ PureComponent (é’ˆå¯¹ç±»ç»„ä»¶)ï¼š\nPureComponent å®ç°äº† shouldComponentUpdate æ–¹æ³•ï¼Œå®ƒä¹Ÿä¼šå¯¹ props å’Œ state è¿›è¡Œæµ…å±‚æ¯”è¾ƒã€‚å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰æ”¹å˜ï¼Œç»„ä»¶å°†ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚ æ³¨æ„äº‹é¡¹ï¼š ä¸ React.memo ç±»ä¼¼ï¼Œä¹Ÿå­˜åœ¨å‡½æ•°å’Œå¯¹è±¡å¼•ç”¨å¯¼è‡´çš„é—®é¢˜ã€‚ çŠ¶æ€æå‡å’Œç»„ä»¶æ‹†åˆ†ï¼š\nå°†ä¸å½±å“å­ç»„ä»¶æ¸²æŸ“çš„çŠ¶æ€å’Œé€»è¾‘å‘ä¸Šæå‡åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ï¼Œæˆ–è€…å°†å¤æ‚ç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„ã€ç‹¬ç«‹çš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œå½“å±€éƒ¨çŠ¶æ€å˜åŒ–æ—¶ï¼Œåªä¼šå¼•èµ·ç›¸å…³çš„å°ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè€Œä¸æ˜¯æ•´ä¸ªå¤§ç»„ä»¶æ ‘ã€‚ é¿å…åœ¨æ¸²æŸ“æ–¹æ³•ä¸­å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼š\nåœ¨ render æ–¹æ³•ï¼ˆç±»ç»„ä»¶ï¼‰æˆ–å‡½æ•°ç»„ä»¶å†…éƒ¨ç›´æ¥å®šä¹‰å‡½æ•°æˆ–ç»„ä»¶ï¼Œä¼šå¯¼è‡´æ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„å¼•ç”¨ï¼Œå³ä½¿å®ƒä»¬é€»è¾‘ç›¸åŒï¼Œä¹Ÿä¼šå¯¼è‡´ props å˜åŒ–ï¼Œä»è€Œå¼ºåˆ¶å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ ä»€ä¹ˆæ˜¯ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ï¼Ÿ\r#\rä»£ç åˆ†å‰² (Code Splitting) æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå®ƒå°†åº”ç”¨ç¨‹åºçš„ä»£ç æ‹†åˆ†æˆæ›´å°çš„ã€æŒ‰éœ€åŠ è½½çš„å— (chunks)ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åŠ è½½æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç ã€‚è¿™æœ‰åŠ©äºæ˜¾è‘—å‡å°‘åˆå§‹åŠ è½½æ—¶ä¸‹è½½çš„ä»£ç é‡ï¼Œä»è€Œæå‡åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ã€‚\nåŸç†ï¼š é€šå¸¸ä¸æ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackã€Rollupï¼‰é…åˆä½¿ç”¨ï¼Œå®ƒä»¬åœ¨æ‰“åŒ…æ—¶ä¼šæ ¹æ®é…ç½®æˆ–è¯­æ³•çº¦å®šå°†ä»£ç åˆ†å‰²æˆå¤šä¸ªç‹¬ç«‹çš„ JavaScript æ–‡ä»¶ã€‚\nä¼˜åŠ¿ï¼š\næ›´å¿«çš„åˆå§‹åŠ è½½æ—¶é—´ (TTI)ï¼š ç”¨æˆ·åªéœ€ä¸‹è½½å½“å‰é¡µé¢æ‰€éœ€çš„ä»£ç ã€‚ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š é¡µé¢æ›´å¿«å“åº”ï¼Œå°¤å…¶åœ¨ç½‘ç»œæ¡ä»¶ä¸ä½³æ—¶ã€‚ æœ‰æ•ˆåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ï¼š ä¸åŒçš„ä»£ç å—å¯ä»¥ç‹¬ç«‹ç¼“å­˜ï¼Œå½“ä»£ç æ›´æ–°æ—¶ï¼Œç”¨æˆ·åªéœ€è¦ä¸‹è½½å‘ç”Ÿå˜åŒ–çš„å—ã€‚ ç»„ä»¶æ‡’åŠ è½½å¦‚ä½•å®ç°ï¼ŸReact.lazy vs åŠ¨æ€å¯¼å…¥\r#\rç»„ä»¶æ‡’åŠ è½½ æ˜¯ä»£ç åˆ†å‰²çš„ä¸€ç§å…·ä½“å®ç°ï¼Œå®ƒå…è®¸æˆ‘ä»¬å»¶è¿ŸåŠ è½½ç»„ä»¶çš„ä»£ç ï¼Œç›´åˆ°å®ƒä»¬å®é™…è¢«æ¸²æŸ“æ—¶æ‰å»ä¸‹è½½ã€‚\nå®ç°æ–¹å¼ï¼š\nReact.lazy (æ¨èç”¨äº React ç»„ä»¶)ï¼š\nReact.lazy æ˜¯ React æä¾›çš„ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œå®ƒå…è®¸ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·æ¸²æŸ“ä¸€ä¸ªåŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Promiseï¼Œè¯¥ Promise resolve ä¸ºä¸€ä¸ª React ç»„ä»¶ï¼ˆå³ default exportï¼‰ã€‚ é€šå¸¸ä¸ Suspense ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼ŒSuspense å¯ä»¥åœ¨æ‡’åŠ è½½ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºä¸€ä¸ªå›é€€ UIï¼ˆå¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰ã€‚ è¯­æ³•ï¼š import React, { lazy, Suspense } from \u0026#39;react\u0026#39;; const MyLazyComponent = lazy(() =\u0026gt; import(\u0026#39;./MyComponent\u0026#39;)); // åŠ¨æ€å¯¼å…¥ function App() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Welcome\u0026lt;/h1\u0026gt; \u0026lt;Suspense fallback={\u0026lt;div\u0026gt;Loading MyLazyComponent...\u0026lt;/div\u0026gt;}\u0026gt; \u0026lt;MyLazyComponent /\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;/div\u0026gt; ); } ç‰¹ç‚¹ï¼š ä¸“é—¨ä¸º React ç»„ä»¶è®¾è®¡ï¼Œæ˜“äºé›†æˆï¼Œä¸”ä¸ React çš„å¹¶å‘æ¨¡å¼å…¼å®¹ã€‚ åŠ¨æ€ import() (é€šå¸¸ä¸ Webpack ç­‰æ„å»ºå·¥å…·é…åˆ)ï¼š\nimport() æ˜¯ ECMAScript çš„ä¸€ä¸ªææ¡ˆï¼Œå®ƒå…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å¯¼å…¥æ¨¡å—ã€‚å®ƒè¿”å›ä¸€ä¸ª Promiseï¼ŒPromise resolved åä¼šå¾—åˆ°æ¨¡å—å¯¹è±¡ã€‚ è™½ç„¶ React.lazy åœ¨åº•å±‚å°±æ˜¯ä½¿ç”¨äº†åŠ¨æ€ import()ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ import() æ¥å®ç°æ›´é€šç”¨çš„ä»£ç åˆ†å‰²ï¼Œä¾‹å¦‚åŠ è½½éç»„ä»¶çš„æ¨¡å—ã€å·¥å…·å‡½æ•°æˆ–è·¯ç”±çº§åˆ«ä»£ç ã€‚ è¯­æ³•ï¼š // åŠ¨æ€å¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¸ä¸€å®šæ˜¯Reactç»„ä»¶ import(\u0026#39;./utils\u0026#39;).then(module =\u0026gt; { const { someFunction } = module; someFunction(); }); ä¸ React.lazy ç»“åˆï¼š React.lazy çš„å‚æ•° () =\u0026gt; import('./MyComponent') å°±æ˜¯ä¸€ä¸ªåŠ¨æ€å¯¼å…¥ã€‚ é€‰æ‹©ï¼š\nå¯¹äºReact ç»„ä»¶çš„æ‡’åŠ è½½ï¼ŒReact.lazy + Suspense æ˜¯é¦–é€‰ï¼Œå®ƒæä¾›äº†ç®€æ´çš„ API å’Œå†…ç½®çš„å›é€€æœºåˆ¶ã€‚ å¯¹äºéç»„ä»¶çš„ JavaScript æ¨¡å—çš„æŒ‰éœ€åŠ è½½ï¼Œæˆ–è€…éœ€è¦æ›´ç»†ç²’åº¦æ§åˆ¶åŠ è½½æ—¶æœºçš„åœºæ™¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŠ¨æ€ import()ã€‚ ğŸ”„ çŠ¶æ€ç®¡ç†\r#\rä½ é¡¹ç›®ä¸­å¦‚ä½•ç®¡ç†ç»„ä»¶é—´çŠ¶æ€ï¼Ÿ\r#\råœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œç»„ä»¶é—´çŠ¶æ€ç®¡ç†ä¼šæ ¹æ®é¡¹ç›®çš„è§„æ¨¡å’Œå¤æ‚æ€§é‡‡å–ä¸åŒçš„ç­–ç•¥ï¼š\nå°±è¿‘åŸåˆ™ / çŠ¶æ€æå‡ (State Hoisting)ï¼š å¯¹äºç®€å•çš„çˆ¶å­ç»„ä»¶é€šä¿¡ï¼Œæˆ‘ä¼šä¼˜å…ˆå°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒç¥–å…ˆç»„ä»¶ä¸­ï¼Œç„¶åé€šè¿‡ props ä¼ é€’ç»™å­ç»„ä»¶ã€‚è¿™é€‚ç”¨äºå±€éƒ¨æ€§å¼ºã€è·¨ç»„ä»¶å±‚çº§ä¸æ·±çš„çŠ¶æ€ã€‚ Context API (useContext)ï¼š å¯¹äºä¸€äº›éœ€è¦å…¨å±€å…±äº«ä½†å˜åŒ–ä¸é¢‘ç¹çš„çŠ¶æ€ï¼ˆå¦‚ä¸»é¢˜æ¨¡å¼ã€ç”¨æˆ·ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ï¼‰ï¼Œæˆ‘ä¼šä½¿ç”¨ React çš„ Context APIã€‚å®ƒé¿å…äº† props drillingï¼ˆå±‚å±‚ä¼ é€’ propsï¼‰çš„é—®é¢˜ï¼Œä½¿çŠ¶æ€åœ¨ç»„ä»¶æ ‘ä¸­â€œç›´è¾¾â€éœ€è¦å®ƒçš„ç»„ä»¶ã€‚ Redux (æˆ–å…¶å˜ä½“ï¼Œå¦‚ Redux Toolkit)ï¼š å¯¹äºä¸­å¤§å‹ã€å¤æ‚çš„åº”ç”¨ï¼Œæˆ–è€…éœ€è¦å¤„ç†å¤§é‡å¼‚æ­¥æ“ä½œã€å¯é¢„æµ‹çŠ¶æ€ç®¡ç†ã€æ—¶é—´æ—…è¡Œè°ƒè¯•ç­‰åœºæ™¯ï¼Œæˆ‘ä¼šé‡‡ç”¨ Reduxã€‚å®ƒæä¾›äº†ä¸€ä¸ªå•ä¸€çš„ã€é›†ä¸­çš„çŠ¶æ€æ ‘ï¼Œé€šè¿‡ action å’Œ reducer ä¸¥æ ¼æ§åˆ¶çŠ¶æ€çš„å˜æ›´ã€‚ æˆ‘é€šå¸¸ä¼šä½¿ç”¨ Redux Toolkitï¼Œå› ä¸ºå®ƒç®€åŒ–äº† Redux çš„é…ç½®å’Œæ ·æ¿ä»£ç ï¼Œå†…ç½®äº† RTK Queryï¼Œèƒ½æ›´å¥½åœ°å¤„ç†æ•°æ®è¯·æ±‚å’Œç¼“å­˜ã€‚ Hooks ç»“åˆè‡ªå®šä¹‰ Hookï¼š å¯¹äºä¸€äº›å¯å¤ç”¨çš„ã€å…·æœ‰ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„çŠ¶æ€ï¼ˆå¦‚è¡¨å•æ ¡éªŒã€æ•°æ®è¯·æ±‚çŠ¶æ€ï¼‰ï¼Œæˆ‘ä¼šå°†å…¶å°è£…æˆè‡ªå®šä¹‰ Hookï¼Œä»¥ä¾¿åœ¨ä¸åŒç»„ä»¶ä¸­å…±äº«é€»è¾‘ï¼Œè€Œä¸éœ€è¦å…±äº«å…¨å±€çŠ¶æ€ã€‚ ç»„ä»¶å†…éƒ¨çŠ¶æ€ (useState)ï¼š å¯¹äºç»„ä»¶ç§æœ‰çš„ã€ä¸ä¸å…¶ä»–ç»„ä»¶å…±äº«çš„çŠ¶æ€ï¼Œå°±ç›´æ¥ä½¿ç”¨ useStateã€‚ æˆ‘çš„é€‰æ‹©é€»è¾‘æ˜¯ï¼š ä¼˜å…ˆé€‰æ‹©æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œå½“å¤æ‚åº¦å¢åŠ æ—¶ï¼Œé€æ­¥å‡çº§çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚é¿å…è¿‡åº¦è®¾è®¡ï¼Œä½†ä¹Ÿè¦ä¸ºæœªæ¥çš„æ‰©å±•ç•™æœ‰ä½™åœ°ã€‚\nRedux å·¥ä½œåŸç†ï¼Ÿ\r#\rRedux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çš„ JavaScript çŠ¶æ€å®¹å™¨ï¼Œä¸»è¦ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„å…¨å±€çŠ¶æ€ã€‚å®ƒçš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼šå•ä¸€æ•°æ®æºã€çŠ¶æ€åªè¯»ã€çº¯å‡½æ•°å˜æ›´ã€‚\nRedux çš„æ ¸å¿ƒç»„ä»¶å’Œå·¥ä½œåŸç†ï¼š\nStore (å•ä¸€æ•°æ®æº)ï¼š\næ•´ä¸ªåº”ç”¨ç¨‹åºçš„ æ‰€æœ‰çŠ¶æ€ éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„ JavaScript å¯¹è±¡æ ‘ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡æ ‘å°±æ˜¯ Storeã€‚ å®ƒç”± createStore åˆ›å»ºã€‚ Store åŒ…å« getState()ã€dispatch(action) å’Œ subscribe(listener) ç­‰æ–¹æ³•ã€‚ Action (æ„å›¾çš„æè¿°)ï¼š\næ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œç”¨äºæè¿°å‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶ã€‚ å¿…é¡»åŒ…å«ä¸€ä¸ª type å­—æ®µï¼Œè¡¨ç¤ºäº‹ä»¶ç±»å‹ã€‚ å¯ä»¥åŒ…å«å…¶ä»–ä»»æ„æ•°æ®ï¼Œå³ payloadã€‚ ä¾‹å­ï¼š { type: 'ADD_TODO', payload: { id: 1, text: 'Learn Redux' } } Reducer (çº¯å‡½æ•°)ï¼š\næ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶å½“å‰ state å’Œä¸€ä¸ª action ä½œä¸ºå‚æ•°ã€‚ æ ¹æ® action.type æ¥è®¡ç®—å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ stateã€‚ æ ¸å¿ƒåŸåˆ™ï¼š å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼ˆä¸ä¿®æ”¹åŸå§‹ stateï¼Œæ— å‰¯ä½œç”¨ï¼‰ï¼Œå¯¹ç›¸åŒçš„è¾“å…¥æ°¸è¿œè¿”å›ç›¸åŒçš„è¾“å‡ºã€‚ ä¾‹å­ï¼š function todosReducer(state = [], action) { switch (action.type) { case \u0026#39;ADD_TODO\u0026#39;: return [...state, action.payload]; // è¿”å›æ–°æ•°ç»„ï¼Œä¸ä¿®æ”¹åŸæ•°ç»„ default: return state; } } Dispatch (è§¦å‘æ›´æ–°)ï¼š\næ˜¯ Store çš„ä¸€ä¸ªæ–¹æ³•ã€‚ç”¨äºå‘é€ (dispatch) ä¸€ä¸ª actionã€‚ è¿™æ˜¯å”¯ä¸€èƒ½è§¦å‘çŠ¶æ€æ›´æ–°çš„æ–¹å¼ã€‚ å·¥ä½œæµç¨‹ï¼š\nç”¨æˆ·äº¤äº’ï¼ˆä¾‹å¦‚ï¼Œç‚¹å‡»æŒ‰é’®ï¼‰ã€‚ ç»„ä»¶è°ƒç”¨ store.dispatch(action) å‘é€ä¸€ä¸ª Actionã€‚ Store æ¥æ”¶åˆ° Action åï¼Œä¼šå°†å½“å‰ State å’Œè¯¥ Action ä¸€èµ·ä¼ é€’ç»™ Reducerã€‚ Reducer æ ¹æ® Action ç±»å‹ï¼Œè®¡ç®—å‡ºæ–°çš„ Stateï¼Œå¹¶è¿”å›æ–°çš„ Stateã€‚ Store æ¥æ”¶åˆ°æ–°çš„ State åï¼Œä¼šæ›´æ–°å…¶å†…éƒ¨çŠ¶æ€ï¼Œå¹¶é€šçŸ¥æ‰€æœ‰ è®¢é˜…è€… (subscribers)ã€‚ è®¢é˜…è€…ï¼ˆé€šå¸¸æ˜¯ React ç»„ä»¶ï¼‰æ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šè·å–æ–°çš„ Stateï¼Œå¹¶è§¦å‘è‡ªèº«é‡æ–°æ¸²æŸ“ï¼Œæ›´æ–° UIã€‚ æ€»ç»“ï¼š Redux å¼ºåˆ¶å•å‘æ•°æ®æµå’Œä¸¥æ ¼çš„çŠ¶æ€å˜æ›´æ¨¡å¼ï¼Œä½¿å¾—çŠ¶æ€çš„å˜åŒ–å¯é¢„æµ‹ã€å¯è¿½è¸ªï¼Œä¾¿äºè°ƒè¯•å’Œç»´æŠ¤ã€‚\nuseContext æœ‰å“ªäº›é€‚ç”¨åœºæ™¯ï¼Ÿèƒ½æ›¿ä»£ Redux å—ï¼Ÿ\r#\ruseContext çš„é€‚ç”¨åœºæ™¯ï¼š useContext Hook ç»“åˆ React.createContext æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶æ ‘ä¸­å…±äº«æ•°æ®çš„æ–¹å¼ï¼Œè€Œæ— éœ€é€šè¿‡ props é€å±‚æ‰‹åŠ¨ä¼ é€’ã€‚å®ƒä¸»è¦é€‚ç”¨äºï¼š\nå…¨å±€ä¸é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼š ä¾‹å¦‚ä¸»é¢˜ï¼ˆäº®/æš—æ¨¡å¼ï¼‰ã€ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ã€å…¨å±€é…ç½®ç­‰ã€‚ é¿å… Props Drilling (å±æ€§é€å±‚ä¼ é€’)ï¼š å½“ä½ éœ€è¦åœ¨ç»„ä»¶æ ‘ä¸­æ·±å±‚åµŒå¥—çš„å­ç»„ä»¶è®¿é—®æŸä¸ªæ•°æ®æ—¶ï¼Œé¿å…äº†çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶ä¸€å±‚å±‚ä¼ é€’ props çš„ç¹çã€‚ ç»„ä»¶åº“/UI æ¡†æ¶å†…éƒ¨çš„çŠ¶æ€ç®¡ç†ï¼š è®¸å¤šç»„ä»¶åº“ä¼šä½¿ç”¨ Context æ¥ç®¡ç†å…¶å†…éƒ¨ç»„ä»¶çš„ä¸»é¢˜ã€å°ºå¯¸ç­‰é…ç½®ã€‚ useContext èƒ½æ›¿ä»£ Redux å—ï¼Ÿ é€šå¸¸æƒ…å†µä¸‹ï¼ŒuseContext éš¾ä»¥å®Œå…¨æ›¿ä»£ Reduxï¼Œå°¤å…¶æ˜¯åœ¨ä¸­å¤§å‹å’Œå¤æ‚åº”ç”¨ä¸­ã€‚ å®ƒä»¬è§£å†³çš„é—®é¢˜å’Œä¾§é‡ç‚¹æœ‰æ‰€ä¸åŒï¼š\nuseContext ä¼˜åŠ¿ï¼š\nAPI ç®€å•ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚ é€‚ç”¨äºå…±äº«ç›¸å¯¹é™æ€æˆ–ä¸é¢‘ç¹å˜åŒ–çš„æ•°æ®ã€‚ ä»£ç é‡å°‘ï¼Œé€‚åˆå°å‹é¡¹ç›®æˆ–ç‰¹å®šåŠŸèƒ½çš„å±€éƒ¨çŠ¶æ€å…±äº«ã€‚ useContext çš„å±€é™æ€§ï¼ˆç›¸å¯¹äº Reduxï¼‰ï¼š\næ€§èƒ½é—®é¢˜ï¼š å½“ Context Provider ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰€æœ‰æ¶ˆè´¹è¯¥ Context çš„ç»„ä»¶ï¼ˆå³ä½¿å…¶ props æˆ– state æ²¡æœ‰ç›´æ¥å˜åŒ–ï¼‰éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å¦‚æœ Context ä¸­åŒ…å«é¢‘ç¹å˜åŒ–çš„æ•°æ®ï¼Œä¼šå¯¼è‡´å¤§é‡ä¸å¿…è¦çš„æ¸²æŸ“ã€‚Redux é€šå¸¸ä¼šé…åˆ react-redux çš„ connect æˆ– useSelector è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ï¼Œåªåœ¨å®é™…éœ€è¦çš„çŠ¶æ€éƒ¨åˆ†å˜åŒ–æ—¶æ‰è§¦å‘ç»„ä»¶æ¸²æŸ“ã€‚ çŠ¶æ€å˜æ›´é€»è¾‘åˆ†æ•£ï¼š Context æœ¬èº«åªè´Ÿè´£ä¼ é€’æ•°æ®ï¼Œä¸æä¾›å¼ºåˆ¶çš„çŠ¶æ€å˜æ›´æ¨¡å¼ï¼ˆå¦‚ Reducerï¼‰ã€‚å½“çŠ¶æ€é€»è¾‘å˜å¾—å¤æ‚æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´å˜æ›´é€»è¾‘åˆ†æ•£åœ¨å¤šä¸ªç»„ä»¶ä¸­ï¼Œéš¾ä»¥è¿½è¸ªå’Œè°ƒè¯•ã€‚ ç¼ºä¹å¼€å‘è€…å·¥å…·æ”¯æŒï¼š Redux æœ‰å¼ºå¤§çš„å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥æ—¶é—´æ—…è¡Œè°ƒè¯•ã€æŸ¥çœ‹æ¯æ¬¡çŠ¶æ€å˜æ›´ï¼Œè¿™åœ¨å¤§å‹åº”ç”¨ä¸­æ˜¯å·¨å¤§çš„ä¼˜åŠ¿ã€‚Context æ²¡æœ‰å¼€ç®±å³ç”¨çš„ç±»ä¼¼å·¥å…·ã€‚ å¼‚æ­¥æ“ä½œå¤æ‚ï¼š Context å¤„ç†å¼‚æ­¥æ“ä½œç›¸å¯¹ä¸ä¾¿ï¼Œé€šå¸¸éœ€è¦ç»“åˆ useEffect å’Œ useState æ¥æ‰‹åŠ¨ç®¡ç†åŠ è½½ã€é”™è¯¯ç­‰çŠ¶æ€ã€‚Redux æœ‰ redux-thunk æˆ– redux-saga ç­‰ä¸­é—´ä»¶æ¥å¤„ç†å¤æ‚çš„å¼‚æ­¥æµã€‚ ç»“è®ºï¼š\nå°å‹åº”ç”¨æˆ–ç®€å•å…¨å±€çŠ¶æ€ï¼š useContext æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ï¼Œå®ƒç®€å•é«˜æ•ˆã€‚ ä¸­å¤§å‹æˆ–å¤æ‚åº”ç”¨ï¼š Reduxï¼ˆå°¤å…¶æ˜¯ Redux Toolkitï¼‰ä»ç„¶æ˜¯æ›´å¥å£®ã€å¯ç»´æŠ¤æ€§æ›´é«˜ã€è°ƒè¯•æ›´æ–¹ä¾¿çš„é€‰æ‹©ã€‚ æœ€ä½³å®è·µï¼š å¯ä»¥å°†ä¸¤è€…ç»“åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œç”¨ useContext ç®¡ç†ä¸»é¢˜ç­‰ä¸å¸¸å˜ä¸”æ€§èƒ½å½±å“å°çš„æ•°æ®ï¼›ç”¨ Redux ç®¡ç†æ ¸å¿ƒä¸šåŠ¡æ•°æ®å’Œå¤æ‚çš„å¼‚æ­¥çŠ¶æ€ã€‚ Redux ä¸­ thunk / saga çš„ä½œç”¨ï¼Ÿ\r#\råœ¨ Redux ä¸­ï¼Œthunk å’Œ saga éƒ½æ˜¯å¤„ç†å¼‚æ­¥å‰¯ä½œç”¨ (Side Effects) çš„ä¸­é—´ä»¶ï¼Œå› ä¸º Redux çš„ Reducer å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œä¸èƒ½ç›´æ¥å¤„ç†å¼‚æ­¥æ“ä½œã€‚\nRedux Thunk (redux-thunk)ï¼š\nä½œç”¨ï¼š å…è®¸ dispatch ä¸€ä¸ªå‡½æ•°ï¼ˆè€Œä¸æ˜¯æ™®é€šå¯¹è±¡ actionï¼‰ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ dispatch å’Œ getState ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œå¹¶åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåå†æ¬¡ dispatch æ™®é€šçš„ action æ¥æ›´æ–°çŠ¶æ€ã€‚ åŸç†ï¼š å®ƒéå¸¸ç®€å•ï¼Œé€šè¿‡æ£€æµ‹ dispatch çš„å‚æ•°æ˜¯å¦æ˜¯å‡½æ•°ã€‚å¦‚æœæ˜¯å‡½æ•°ï¼Œå°±æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶å°† dispatch å’Œ getState ä¼ å…¥ï¼›å¦‚æœä¸æ˜¯å‡½æ•°ï¼Œå°±ç›´æ¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ– Reducerã€‚ ç‰¹ç‚¹ï¼š ç®€å•æ˜“å­¦ï¼š ä»£ç é‡å°‘ï¼Œç†è§£æˆæœ¬ä½ã€‚ ç›´æ¥ï¼š å¼‚æ­¥é€»è¾‘ç›´æ¥å†™åœ¨ thunk å‡½æ•°ä¸­ï¼Œç¬¦åˆ JavaScript ä¹ æƒ¯ã€‚ é€‚åˆï¼š ç®€å•çš„å¼‚æ­¥æ“ä½œï¼ˆå¦‚å•ä¸ª API è°ƒç”¨ï¼‰ã€ä¸€æ¬¡æ€§çš„å¼‚æ­¥æµç¨‹ã€‚ ç¼ºç‚¹ï¼š éšç€å¼‚æ­¥é€»è¾‘å¤æ‚ï¼ˆå¦‚å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ä¸²è”ã€å–æ¶ˆæ“ä½œï¼‰ï¼Œä»£ç å¯èƒ½å˜å¾—éš¾ä»¥ç»´æŠ¤å’Œæµ‹è¯•ï¼ˆå›è°ƒåœ°ç‹±ï¼‰ã€‚ Redux Saga (redux-saga)ï¼š\nä½œç”¨ï¼š ä½¿ç”¨ ES6 çš„ Generator å‡½æ•°æ¥å¤„ç†å¼‚æ­¥å‰¯ä½œç”¨ã€‚å®ƒå°†å¼‚æ­¥æ“ä½œè§†ä¸ºä¸€ç³»åˆ—çš„ Effectsï¼ˆå¦‚ callã€putã€takeã€selectï¼‰ï¼Œè¿™äº› Effects æ˜¯çº¯ JS å¯¹è±¡ï¼Œç”± Saga Middleware è§£é‡Šæ‰§è¡Œã€‚ åŸç†ï¼š redux-saga åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„â€œè¿›ç¨‹â€ï¼ˆGenerator å‡½æ•°ï¼‰ï¼Œä¸ä¸»åº”ç”¨è¿›ç¨‹å¹¶è¡Œè¿è¡Œï¼Œé€šè¿‡ç›‘å¬ Redux Actions æ¥è§¦å‘å¼‚æ­¥ä»»åŠ¡ã€‚å®ƒä½¿ç”¨ yield å…³é”®å­—æ¥æš‚åœå’Œæ¢å¤å¼‚æ­¥æ“ä½œï¼Œä½¿å¾—å¼‚æ­¥æµç¨‹çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ã€‚ ç‰¹ç‚¹ï¼š å£°æ˜å¼ã€å‘½ä»¤å¼å…¼é¡¾ï¼š å¼‚æ­¥æµç¨‹æ›´æ˜“äºé˜…è¯»å’Œæµ‹è¯•ï¼ˆå› ä¸º Effects éƒ½æ˜¯çº¯ JS å¯¹è±¡ï¼‰ã€‚ å¼ºå¤§çš„åŠŸèƒ½ï¼š æä¾›å¼ºå¤§çš„å¹¶å‘æ§åˆ¶ã€ä»»åŠ¡å–æ¶ˆã€ç«æ€æ¡ä»¶å¤„ç†ã€é”™è¯¯å¤„ç†ç­‰æœºåˆ¶ã€‚ å¤æ‚æ€§ï¼š å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ï¼Œéœ€è¦ç†è§£ Generator å‡½æ•°å’Œ Saga Effectã€‚ é€‚åˆï¼š å¤æ‚çš„å¼‚æ­¥æµç¨‹ã€éœ€è¦ç²¾ç»†æ§åˆ¶å¹¶å‘å’Œå–æ¶ˆçš„åœºæ™¯ã€é•¿æ—¶é—´è¿è¡Œçš„åå°ä»»åŠ¡ã€‚ ç¼ºç‚¹ï¼š å¼•å…¥äº†æ–°çš„æ¦‚å¿µï¼ˆGeneratorã€Effectsï¼‰ï¼Œå¢åŠ äº†é¡¹ç›®å¤æ‚åº¦ã€‚ é€‰æ‹©ï¼š\nThunkï¼š é€‚åˆå°å‹é¡¹ç›®æˆ–å¼‚æ­¥é€»è¾‘ç®€å•çš„åœºæ™¯ï¼Œè¿½æ±‚å¿«é€Ÿå®ç°ã€‚ Sagaï¼š é€‚åˆä¸­å¤§å‹é¡¹ç›®ï¼Œå¼‚æ­¥é€»è¾‘å¤æ‚ã€éœ€è¦é«˜å¯æ§æ€§ã€å¯æµ‹è¯•æ€§å¼ºçš„åœºæ™¯ã€‚ Zustandã€Recoilã€Jotai ç”¨è¿‡å—ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ\r#\rï¼ˆä½ éœ€è¦æ ¹æ®ä½ æ˜¯å¦æœ‰å®é™…ä½¿ç”¨ç»éªŒæ¥å›ç­”ï¼‰\næˆ‘ç”¨è¿‡çš„ï¼š\nZustand (æˆ‘ç”¨è¿‡): ä¼˜ç‚¹ï¼š æç®€ä¸”è½»é‡ï¼š API æå…¶ç®€æ´ï¼Œå‡ è¡Œä»£ç å°±èƒ½æå®šçŠ¶æ€ç®¡ç†ï¼Œæ¯” Redux ç®€å•å¤ªå¤šã€‚ æ— éœ€ Providerï¼š æ— éœ€åƒ Context æˆ– Redux é‚£æ ·åŒ…è£¹ Providerï¼Œç»„ä»¶å¯ä»¥ç›´æ¥ä» Store è¯»å–çŠ¶æ€ã€‚ å“åº”å¼æ›´æ–°ï¼š é€šè¿‡ selector æœºåˆ¶ï¼Œåªæœ‰è¢«é€‰æ‹©çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚ åŸºäº Hooksï¼š ä¸ React Hooks å¤©ç„¶é›†æˆã€‚ å¯ç»„åˆæ€§å¼ºï¼š æ˜“äºä¸å…¶ä»– Hookã€å·¥å…·ç»“åˆã€‚ ç¼ºç‚¹ï¼š ä¸å¼ºåˆ¶ä¸¥æ ¼çš„å•ä¸€æ•°æ®æºå’Œçº¯å‡½æ•°æ›´æ–°ï¼Œåœ¨å¤§å‹å›¢é˜Ÿåä½œæ—¶å¯èƒ½éœ€è¦é¢å¤–çš„è§„èŒƒã€‚ ç¼ºå°‘åƒ Redux DevTools é‚£æ ·å¼€ç®±å³ç”¨çš„æ—¶é—´æ—…è¡Œè°ƒè¯•åŠŸèƒ½ï¼ˆä½†æœ‰ç¤¾åŒºæ’ä»¶ï¼‰ã€‚ å¼‚æ­¥æ“ä½œç›¸å¯¹ç®€å•ï¼Œéœ€è¦æ‰‹åŠ¨ç»“åˆ async/await æˆ– fetchã€‚ é€‚ç”¨åœºæ™¯ï¼š å°å‹åˆ°ä¸­å‹é¡¹ç›®ã€å¯¹åŒ…ä½“ç§¯å’Œå­¦ä¹ æˆæœ¬è¦æ±‚é«˜çš„é¡¹ç›®ã€éœ€è¦å¿«é€ŸåŸå‹å¼€å‘ã€‚ æˆ‘äº†è§£ä½†æœªæ·±å…¥ä½¿ç”¨çš„ (æˆ–è€…åªåœ¨å° demo ä¸­ä½“éªŒè¿‡)ï¼š\nRecoil (Facebook æ¨å‡º)ï¼š\nä¼˜ç‚¹ï¼š åŸå­åŒ–çŠ¶æ€ï¼š å°†çŠ¶æ€æ‹†åˆ†æˆç»†ç²’åº¦çš„â€œåŸå­ (Atoms)â€ï¼Œæ¯ä¸ªç»„ä»¶åªè®¢é˜…å…¶æ‰€éœ€çš„åŸå­ã€‚ æ€§èƒ½ä¼˜åŒ–ï¼š åªæœ‰è®¢é˜…äº†ç‰¹å®šåŸå­çš„ç»„ä»¶åœ¨åŸå­å˜åŒ–æ—¶æ‰ä¼šæ¸²æŸ“ï¼Œå¤©ç„¶çš„æ€§èƒ½ä¼˜åŒ–ã€‚ æ´¾ç”ŸçŠ¶æ€ (Selectors)ï¼š å¼ºå¤§çš„ Selector æœºåˆ¶ç”¨äºä» Atoms æ´¾ç”Ÿè®¡ç®—çŠ¶æ€ï¼Œå¹¶ä¸”æ˜¯å¯ç¼“å­˜çš„ã€‚ ä¸ React Concurrent Mode å…¼å®¹ï¼š è®¾è®¡ä¹‹åˆå°±è€ƒè™‘äº† React çš„å¹¶å‘ç‰¹æ€§ã€‚ ç¼ºç‚¹ï¼š å­¦ä¹ æ›²çº¿æ¯” Zustand ç¨é™¡å³­ï¼Œå¼•å…¥äº† Atoms å’Œ Selectors æ¦‚å¿µã€‚ æ–‡æ¡£å’Œç¤¾åŒºæ´»è·ƒåº¦ç›¸å¯¹ Redux å’Œ Zustand ç¨å¼±ä¸€äº›ï¼ˆä½†ä¹Ÿåœ¨å¿«é€Ÿå‘å±•ï¼‰ã€‚ ç›¸å¯¹æ¯”è¾ƒæ–°ï¼Œæˆç†Ÿåº¦å°šä¸å¦‚ Reduxã€‚ é€‚ç”¨åœºæ™¯ï¼š å¤§å‹å¤æ‚åº”ç”¨ã€éœ€è¦é«˜æ€§èƒ½å’Œç»†ç²’åº¦çŠ¶æ€æ§åˆ¶ã€è¿½æ±‚ä¸ React æœ€æ–°ç‰¹æ€§ç´§å¯†ç»“åˆã€‚ Jotai (å— Recoil å¯å‘)ï¼š\nä¼˜ç‚¹ï¼š åŸå­åŒ–ä¸”æ›´å°ï¼š æ¯” Recoil æ›´è½»é‡ï¼Œæ›´å°çš„åŒ…ä½“ç§¯ã€‚ æç®€ APIï¼š API ç”šè‡³æ¯” Recoil æ›´ç®€å•ï¼Œæ ¸å¿ƒæ˜¯ atom å’Œ useAtomã€‚ Typescript å‹å¥½ï¼š å¤©ç„¶æ”¯æŒ TypeScriptã€‚ é«˜åº¦å¯ç»„åˆï¼š åŸå­å¯ä»¥äº’ç›¸ç»„åˆã€‚ ç¼ºç‚¹ï¼š æ¦‚å¿µæŠ½è±¡ï¼Œåˆæ¬¡ç†è§£å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ã€‚ ç¤¾åŒºç”Ÿæ€å’Œå·¥å…·é“¾ç›¸å¯¹è¾ƒæ–°ã€‚ é€‚ç”¨åœºæ™¯ï¼š è¿½æ±‚æè‡´è½»é‡å’Œé«˜æ€§èƒ½ã€é«˜åº¦ TypeScript åŒ–çš„é¡¹ç›®ã€éœ€è¦ç»†ç²’åº¦çŠ¶æ€æ§åˆ¶ã€‚ æ€»ç»“ï¼š å¯¹äºå·¥å…·é“¾å¹³å°è¿™æ ·çš„é¡¹ç›®ï¼Œå¦‚æœä¸éœ€è¦å¤æ‚çš„å¼‚æ­¥æµå’Œæ—¶é—´æ—…è¡Œè°ƒè¯•ï¼ŒZustand æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒè½»é‡ã€ç®€å•ï¼Œèƒ½å¿«é€Ÿå®ç°åŠŸèƒ½ã€‚å¦‚æœé¡¹ç›®éå¸¸åºå¤§ï¼Œå¯¹çŠ¶æ€ç»†ç²’åº¦æ§åˆ¶å’Œæœªæ¥æ‰©å±•æ€§æœ‰æé«˜è¦æ±‚ï¼Œå¯èƒ½ä¼šè€ƒè™‘ Recoilã€‚Redux Toolkit ä»ç„¶æ˜¯ç¨³å¥çš„é€‰æ‹©ï¼Œå°¤å…¶æ˜¯æœ‰ Redux ç»éªŒçš„å›¢é˜Ÿã€‚\nğŸŒ å¼‚æ­¥ä¸ç½‘ç»œè¯·æ±‚\r#\rReact ä¸­å¦‚ä½•å‘é€å¼‚æ­¥è¯·æ±‚ï¼Ÿ\r#\råœ¨ React ä¸­å‘é€å¼‚æ­¥è¯·æ±‚ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š\nåœ¨ useEffect Hook ä¸­å‘é€ï¼ˆå‡½æ•°ç»„ä»¶ï¼Œæœ€å¸¸ç”¨ï¼‰ï¼š\nè¿™æ˜¯å¤„ç†æ•°æ®è·å–å‰¯ä½œç”¨çš„æ ‡å‡†æ–¹å¼ã€‚ é€šå¸¸ä¼šç»“åˆ useState æ¥ç®¡ç†è¯·æ±‚çš„åŠ è½½çŠ¶æ€ (isLoading)ã€é”™è¯¯çŠ¶æ€ (isError) å’Œæ•°æ®æœ¬èº«ã€‚ éœ€è¦æ³¨æ„ä¾èµ–æ•°ç»„å’Œæ¸…ç†å‡½æ•°ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼å’Œç«æ€æ¡ä»¶ã€‚ import React, { useState, useEffect } from \u0026#39;react\u0026#39;; function MyComponent() { const [data, setData] = useState(null); const [loading, setLoading] = useState(true); const [error, setError] = useState(null); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { try { const response = await fetch(\u0026#39;/api/data\u0026#39;); if (!response.ok) { throw new Error(`HTTP error! status: ${response.status}`); } const result = await response.json(); setData(result); } catch (err) { setError(err); } finally { setLoading(false); } }; fetchData(); // å¦‚æœæœ‰éœ€è¦æ¸…ç†çš„è®¢é˜…æˆ–å®šæ—¶å™¨ï¼Œåœ¨è¿™é‡Œè¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•° return () =\u0026gt; { // ä¾‹å¦‚ï¼Œå–æ¶ˆè¯·æ±‚ï¼ˆå¦‚æœä½¿ç”¨ abort controllerï¼‰ }; }, []); // ç©ºæ•°ç»„è¡¨ç¤ºåªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡ if (loading) return \u0026lt;div\u0026gt;Loading...\u0026lt;/div\u0026gt;; if (error) return \u0026lt;div\u0026gt;Error: {error.message}\u0026lt;/div\u0026gt;; return \u0026lt;div\u0026gt;Data: {JSON.stringify(data)}\u0026lt;/div\u0026gt;; } åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å‘é€ï¼š\nå½“å¼‚æ­¥è¯·æ±‚æ˜¯ç”±ç”¨æˆ·äº¤äº’ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰è§¦å‘æ—¶ï¼Œç›´æ¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ã€‚ function MyForm() { const handleSubmit = async (e) =\u0026gt; { e.preventDefault(); try { const response = await fetch(\u0026#39;/api/submit\u0026#39;, { method: \u0026#39;POST\u0026#39;, body: \u0026#39;...\u0026#39; }); // å¤„ç†å“åº” } catch (error) { // å¤„ç†é”™è¯¯ } }; return \u0026lt;form onSubmit={handleSubmit}\u0026gt;...\u0026lt;/form\u0026gt;; } ä½¿ç”¨è‡ªå®šä¹‰ Hook å°è£…ï¼š\nä¸ºäº†å¤ç”¨æ•°æ®è¯·æ±‚é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†ï¼Œé€šå¸¸ä¼šå°† useEffect ä¸­çš„è¯·æ±‚é€»è¾‘å°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰ Hookã€‚ // ä¾‹å¦‚ï¼šuseFetch.js import { useState, useEffect } from \u0026#39;react\u0026#39;; function useFetch(url) { const [data, setData] = useState(null); const [loading, setLoading] = useState(true); const [error, setError] = useState(null); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { try { const response = await fetch(url); const result = await response.json(); setData(result); } catch (err) { setError(err); } finally { setLoading(false); } }; fetchData(); }, [url]); return { data, loading, error }; } // åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š // const { data, loading, error } = useFetch(\u0026#39;/api/users\u0026#39;); ä½¿ç”¨ä¸“é—¨çš„æ•°æ®è¯·æ±‚åº“/Hooks (å¦‚ react-query, SWR)ï¼š\nè¿™äº›åº“æä¾›äº†æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå¦‚ç¼“å­˜ã€åå°é‡æ–°éªŒè¯ã€é”™è¯¯é‡è¯•ã€åˆ†é¡µã€æ•°æ®åŒæ­¥ç­‰ã€‚ æ€ä¹ˆå¤„ç†åŠ è½½ä¸­ã€é”™è¯¯å’Œå–æ¶ˆè¯·æ±‚ï¼Ÿ\r#\r1. åŠ è½½ä¸­ (Loading State)ï¼š\nå®ç°ï¼š ä½¿ç”¨ä¸€ä¸ª boolean ç±»å‹çš„çŠ¶æ€å˜é‡ï¼ˆå¦‚ isLoading æˆ– loadingï¼‰ã€‚åœ¨è¯·æ±‚å¼€å§‹å‰è®¾ä¸º trueï¼Œè¯·æ±‚æˆåŠŸæˆ–å¤±è´¥åè®¾ä¸º falseã€‚ ç”¨æˆ·ä½“éªŒï¼š åœ¨ UI ä¸Šæ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼ˆSpinnerï¼‰ã€éª¨æ¶å± (Skeleton Screen)ã€ç¦ç”¨æŒ‰é’®ç­‰ã€‚ 2. é”™è¯¯ (Error Handling)ï¼š\nå®ç°ï¼š ä½¿ç”¨ä¸€ä¸ªçŠ¶æ€å˜é‡æ¥å­˜å‚¨é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚ errorï¼Œå¯ä»¥æ˜¯ null æˆ– Error å¯¹è±¡ï¼‰ã€‚åœ¨ try-catch å—ä¸­æ•è· fetch æˆ– axios æŠ›å‡ºçš„å¼‚å¸¸ã€‚ ç”¨æˆ·ä½“éªŒï¼š æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ã€é‡è¯•æŒ‰é’®ã€é”™è¯¯æ—¥å¿—è®°å½•ã€‚ 3. å–æ¶ˆè¯·æ±‚ (Request Cancellation)ï¼š\né‡è¦æ€§ï¼š é¿å…åœ¨ç»„ä»¶å¸è½½åå¯¹å·²å¸è½½ç»„ä»¶çš„çŠ¶æ€è¿›è¡Œæ›´æ–°ï¼ˆå¯¼è‡´â€œå†…å­˜æ³„æ¼â€è­¦å‘Šï¼‰ï¼Œä»¥åŠé¿å…ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ç»§ç»­æ‰§è¡Œã€‚ å®ç°æ–¹å¼ï¼š AbortController (Fetch API)ï¼š è¿™æ˜¯ç°ä»£æµè§ˆå™¨åŸç”Ÿçš„æ–¹å¼ã€‚åœ¨ useEffect çš„æ¸…ç†å‡½æ•°ä¸­ï¼Œå¯ä»¥è°ƒç”¨ AbortController çš„ abort() æ–¹æ³•æ¥å–æ¶ˆè¯·æ±‚ã€‚ useEffect(() =\u0026gt; { const controller = new AbortController(); const signal = controller.signal; const fetchData = async () =\u0026gt; { try { const response = await fetch(\u0026#39;/api/data\u0026#39;, { signal }); // ... } catch (err) { if (err.name === \u0026#39;AbortError\u0026#39;) { console.log(\u0026#39;Fetch aborted\u0026#39;); } else { setError(err); } } finally { setLoading(false); } }; fetchData(); return () =\u0026gt; { controller.abort(); // ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè¯·æ±‚ }; }, []); Axios çš„å–æ¶ˆä»¤ç‰Œ (Cancellation Token)ï¼š Axios æä¾›äº†è‡ªå·±çš„å–æ¶ˆè¯·æ±‚æœºåˆ¶ã€‚ è¯·æ±‚åº“/Hooks çš„å†…ç½®æ”¯æŒï¼š react-query å’Œ SWR ç­‰åº“é€šå¸¸ä¼šå†…ç½®å¤„ç†è¯·æ±‚å–æ¶ˆå’Œç¼“å­˜ï¼Œç®€åŒ–å¼€å‘ã€‚ é¡¹ç›®ä¸­å¦‚ä½•åšæ¥å£ç¼“å­˜ / åˆ†é¡µåŠ è½½ï¼Ÿ\r#\r1. æ¥å£ç¼“å­˜ (API Caching)ï¼š æ¥å£ç¼“å­˜æ˜¯æé«˜ç”¨æˆ·ä½“éªŒå’Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½çš„å…³é”®ã€‚\nå®¢æˆ·ç«¯ç¼“å­˜ (å‰ç«¯ç¼“å­˜)ï¼š HTTP ç¼“å­˜ï¼š åˆ©ç”¨ HTTP å“åº”å¤´ï¼ˆCache-Control, ETag, Last-Modifiedï¼‰è®©æµè§ˆå™¨ç¼“å­˜èµ„æºã€‚å¯¹äº GET è¯·æ±‚ï¼Œå¦‚æœèµ„æºæœªæ”¹å˜ï¼Œæµè§ˆå™¨å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜ã€‚ å†…å­˜ç¼“å­˜ï¼š çŠ¶æ€ç®¡ç†åº“ï¼š åœ¨ Redux Store ä¸­ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç¼“å­˜å±‚ï¼Œæˆ–è€…ä½¿ç”¨ Context API æ¥å­˜å‚¨å·²è¯·æ±‚è¿‡çš„æ•°æ®ã€‚ ä¸“é—¨çš„æ•°æ®è¯·æ±‚åº“ï¼š react-query (æˆ– SWR) æ˜¯å¤„ç†æ•°æ®è¯·æ±‚å’Œç¼“å­˜çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä»¬æä¾›äº†è‡ªåŠ¨ç¼“å­˜ã€åå°é‡æ–°éªŒè¯ã€æ•°æ®è¿‡æœŸã€ä¹è§‚æ›´æ–°ç­‰åŠŸèƒ½ã€‚è¿™æ˜¯æˆ‘å®é™…é¡¹ç›®ä¸­å®ç°æ¥å£ç¼“å­˜çš„é¦–é€‰ã€‚ è‡ªå®šä¹‰ Hookï¼š å°è£…ä¸€ä¸ª useCacheFetchï¼Œå†…éƒ¨ä½¿ç”¨ Map æˆ– localStorage å­˜å‚¨æ•°æ®ã€‚ æœåŠ¡å™¨ç«¯ç¼“å­˜ (CDN / Reverse Proxy / åº”ç”¨çº§ç¼“å­˜)ï¼š å¯¹äºå…¬å…±ä¸”ä¸ç»å¸¸å˜åŒ–çš„æ¥å£ï¼Œå¯ä»¥åœ¨ CDNã€Nginx æˆ–åç«¯åº”ç”¨å±‚ï¼ˆå¦‚ Redisï¼‰è¿›è¡Œç¼“å­˜ã€‚ 2. åˆ†é¡µåŠ è½½ (Pagination / Infinite Scroll)ï¼š å¯¹äºå¤§é‡æ•°æ®çš„åˆ—è¡¨ï¼Œé€šå¸¸é‡‡ç”¨åˆ†é¡µåŠ è½½æ¥é¿å…ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰æ•°æ®å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚\nä¼ ç»Ÿåˆ†é¡µ (Pagination)ï¼š\nåŸç†ï¼š æ¯æ¬¡è¯·æ±‚æŒ‡å®šé¡µç å’Œæ¯é¡µæ•°é‡çš„æ•°æ®ï¼ˆpage=1\u0026amp;size=10ï¼‰ã€‚åç«¯è¿”å›è¯¥é¡µçš„æ•°æ®å’Œæ€»é¡µæ•°ã€‚ å®ç°ï¼š å‰ç«¯ç»´æŠ¤å½“å‰é¡µç  currentPage å’Œæ¯é¡µæ•°é‡ pageSize çŠ¶æ€ã€‚ç”¨æˆ·ç‚¹å‡»é¡µç æ—¶ï¼Œæ›´æ–° currentPage å¹¶é‡æ–°å‘é€è¯·æ±‚ã€‚ ä¼˜ç‚¹ï¼š ç”¨æˆ·å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ä»»ä½•é¡µï¼Œæ€»æ•°æ˜ç¡®ã€‚ ç¼ºç‚¹ï¼š æ¯æ¬¡ç¿»é¡µéƒ½éœ€è¦é‡æ–°è¯·æ±‚æ•°æ®ã€‚ æ— é™æ»šåŠ¨ (Infinite Scroll / Load More)ï¼š\nåŸç†ï¼š åˆå§‹åŠ è½½å°‘é‡æ•°æ®ã€‚å½“ç”¨æˆ·æ»šåŠ¨åˆ°åˆ—è¡¨åº•éƒ¨æ—¶ï¼Œè§¦å‘åŠ è½½æ›´å¤šæ•°æ®çš„è¯·æ±‚ï¼ˆoffset=X\u0026amp;limit=Y æˆ– lastId=Z\u0026amp;limit=Yï¼‰ã€‚æ–°æ•°æ®è¿½åŠ åˆ°ç°æœ‰åˆ—è¡¨ã€‚ å®ç°ï¼š å‰ç«¯ç»´æŠ¤ dataList å’Œ page æˆ– offset çŠ¶æ€ã€‚ ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œåˆ¤æ–­æ˜¯å¦æ»šåŠ¨åˆ°åº•éƒ¨ã€‚ å¯ä»¥ä½¿ç”¨ Intersection Observer API æ£€æµ‹ä¸€ä¸ªå ä½å…ƒç´ æ˜¯å¦è¿›å…¥è§†å£ï¼Œä»è€Œè§¦å‘åŠ è½½æ›´å¤šã€‚ åœ¨è¯·æ±‚æ—¶æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼Œè¯·æ±‚å¤±è´¥æ—¶æ˜¾ç¤ºé‡è¯•æŒ‰é’®ã€‚ ä¼˜ç‚¹ï¼š æå‡ç”¨æˆ·ä½“éªŒï¼Œæ„Ÿè§‰æ•°æ®æºæºä¸æ–­ã€‚ ç¼ºç‚¹ï¼š æ— æ³•ç›´æ¥è·³è½¬åˆ°ç‰¹å®šé¡µç ï¼Œå›æ»šåˆ°é¡¶éƒ¨å¯èƒ½éœ€è¦é‡æ–°åŠ è½½æˆ–è¿›è¡Œç¼“å­˜ä¼˜åŒ–ã€‚ ç»“åˆä½¿ç”¨ï¼š\nreact-query / SWR çš„åˆ†é¡µ Hookï¼š è¿™äº›åº“é€šå¸¸æä¾›äº†ä¸“é—¨çš„ Hooksï¼ˆå¦‚ useInfiniteQueryï¼‰æ¥ç®€åŒ–æ— é™æ»šåŠ¨çš„å®ç°ï¼Œå¤„ç†äº†åŠ è½½çŠ¶æ€ã€é”™è¯¯ã€ç¼“å­˜å’Œæ•°æ®åˆå¹¶ã€‚ ç”¨è¿‡ react-query å—ï¼Ÿæ ¸å¿ƒç‰¹æ€§ï¼Ÿ\r#\rï¼ˆå¦‚æœä½ ç”¨è¿‡ï¼Œå¯ä»¥è¯¦ç»†è¯´ï¼›æ²¡ç”¨è¿‡ï¼Œå°±è¯´äº†è§£å’Œå…¶ä¼˜åŠ¿ï¼‰\næˆ‘ç”¨è¿‡ react-query (ç°åœ¨å« TanStack Query)ã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ•°æ®è·å–å’ŒçŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒå°†æœåŠ¡å™¨ç«¯æ•°æ®ï¼ˆå¼‚æ­¥æ•°æ®ï¼‰çš„ç®¡ç†ä»ç»„ä»¶çŠ¶æ€ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå¹¶æä¾›äº†å¤§é‡å¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œæå¤§åœ°ç®€åŒ–äº†æ•°æ®è¯·æ±‚é€»è¾‘ã€‚\næ ¸å¿ƒç‰¹æ€§ï¼š\næ•°æ®ç¼“å­˜ (Caching)ï¼š é»˜è®¤å¼€å¯ç¼“å­˜ï¼Œå‡å°‘ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚ æ•°æ®åœ¨åå°â€œstaleâ€åä¼šè‡ªåŠ¨é‡æ–°è·å–ï¼ˆstale-while-revalidate ç­–ç•¥ï¼‰ï¼Œç¡®ä¿æ•°æ®æ–°é²œåº¦ã€‚ cacheTime å’Œ staleTimeï¼š ç»†ç²’åº¦æ§åˆ¶æ•°æ®åœ¨ç¼“å­˜ä¸­ä¿ç•™å¤šä¹…ä»¥åŠå¤šä¹…åå˜ä¸ºâ€œè¿‡æœŸâ€çŠ¶æ€ã€‚ åå°é‡æ–°éªŒè¯ (Background Re-fetching)ï¼š å½“çª—å£é‡æ–°è·å¾—ç„¦ç‚¹ã€ç½‘ç»œé‡æ–°è¿æ¥ã€æˆ–é€šè¿‡ç‰¹å®šäº‹ä»¶è§¦å‘æ—¶ï¼Œä¼šè‡ªåŠ¨åœ¨åå°é‡æ–°è·å–æ•°æ®ï¼Œç¡®ä¿æ˜¾ç¤ºçš„æ˜¯æœ€æ–°æ•°æ®ã€‚ æŸ¥è¯¢çŠ¶æ€ç®¡ç†ï¼š æä¾›äº†ä¸€è‡´çš„æŸ¥è¯¢çŠ¶æ€ (isLoading, isFetching, isError, isSuccess) å’Œé”™è¯¯å¤„ç†ï¼Œä½¿ç»„ä»¶çš„ UI é€»è¾‘æ›´æ¸…æ™°ã€‚ è‡ªåŠ¨é‡è¯• (Automatic Retries)ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤±è´¥çš„æŸ¥è¯¢ä¼šè‡ªåŠ¨é‡è¯•å‡ æ¬¡ï¼Œæé«˜äº†è¯·æ±‚çš„å¥å£®æ€§ã€‚ åˆ†é¡µå’Œæ— é™æ»šåŠ¨æŸ¥è¯¢ (useInfiniteQuery)ï¼š ç®€åŒ–äº†åˆ†é¡µå’Œæ— é™æ»šåŠ¨åˆ—è¡¨çš„å®ç°ï¼Œè‡ªåŠ¨å¤„ç†æ•°æ®çš„åˆå¹¶å’ŒåŠ è½½æ›´å¤šçŠ¶æ€ã€‚ ä¹è§‚æ›´æ–° (Optimistic Updates)ï¼š å…è®¸åœ¨æ•°æ®æ›´æ–°è¯·æ±‚å‘é€æˆåŠŸä¹‹å‰ï¼Œå°±ç«‹å³æ›´æ–° UIï¼Œç»™ç”¨æˆ·å³æ—¶åé¦ˆï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œå†å›æ»š UIã€‚ ä¾èµ–æŸ¥è¯¢ (Dependent Queries)ï¼š å¯ä»¥æ–¹ä¾¿åœ°å®šä¹‰æŸ¥è¯¢ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿æŸä¸ªæŸ¥è¯¢åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢æˆåŠŸåæ‰æ‰§è¡Œã€‚ å¼€å‘è€…å·¥å…·ï¼š æä¾›äº†å¼ºå¤§çš„ DevToolsï¼Œç”¨äºæ£€æŸ¥æŸ¥è¯¢çŠ¶æ€ã€ç¼“å­˜ã€è¯·æ±‚ç­‰ï¼Œæå¤§åœ°æå‡äº†è°ƒè¯•æ•ˆç‡ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æˆ‘åœ¨é¡¹ç›®ä¸­ä¸»è¦ç”¨ react-query æ¥ç®¡ç†å„ç§ API è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¾‹å¦‚ç”¨æˆ·åˆ—è¡¨çš„å±•ç¤ºã€è¡¨å•æ•°æ®çš„æäº¤ã€å®æ—¶æ•°æ®çš„æ›´æ–°ç­‰ã€‚å®ƒæå¤§åœ°å‡å°‘äº†æˆ‘åœ¨ useEffect ä¸­æ‰‹åŠ¨ç®¡ç† loadingã€errorã€data çŠ¶æ€çš„æ ·æ¿ä»£ç ï¼Œå¹¶å¤©ç„¶è§£å†³äº†è®¸å¤šæ€§èƒ½å’Œç”¨æˆ·ä½“éªŒé—®é¢˜ã€‚\nğŸ“¦ ç»„ä»¶é€šä¿¡ä¸å¤ç”¨\r#\rçˆ¶å­ç»„ä»¶å¦‚ä½•é€šä¿¡ï¼Ÿå…„å¼Ÿç»„ä»¶æ€ä¹ˆé€šä¿¡ï¼Ÿ\r#\r1. çˆ¶å­ç»„ä»¶é€šä¿¡ï¼š\nçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ å€¼ï¼šé€šè¿‡ Props è¿™æ˜¯æœ€ç›´æ¥å’Œå¸¸ç”¨çš„æ–¹å¼ã€‚çˆ¶ç»„ä»¶å°†æ•°æ®ä½œä¸ºå±æ€§ï¼ˆpropsï¼‰ä¼ é€’ç»™å­ç»„ä»¶ã€‚å­ç»„ä»¶é€šè¿‡å…¶ props å¯¹è±¡è®¿é—®è¿™äº›æ•°æ®ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const message = \u0026#34;Hello from Parent!\u0026#34;; return \u0026lt;ChildComponent data={message} /\u0026gt;; } // ChildComponent.js function ChildComponent(props) { return \u0026lt;p\u0026gt;{props.data}\u0026lt;/p\u0026gt;; // æˆ– { data } è§£æ„ } å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ å€¼ï¼šé€šè¿‡å›è°ƒå‡½æ•° (Callback Functions) çˆ¶ç»„ä»¶å°†ä¸€ä¸ªå‡½æ•°ä½œä¸º prop ä¼ é€’ç»™å­ç»„ä»¶ã€‚å­ç»„ä»¶åœ¨éœ€è¦å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®æˆ–è§¦å‘çˆ¶ç»„ä»¶è¡Œä¸ºæ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠæ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’è¿‡å»ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const handleChildClick = (dataFromChild) =\u0026gt; { console.log(\u0026#39;Received from child:\u0026#39;, dataFromChild); }; return \u0026lt;ChildButton onClick={handleChildClick} /\u0026gt;; } // ChildButton.js function ChildButton(props) { return \u0026lt;button onClick={() =\u0026gt; props.onClick(\u0026#39;Data sent!\u0026#39;)}\u0026gt;Click me\u0026lt;/button\u0026gt;; } useRef (ç‰¹æ®Šæƒ…å†µ)ï¼š çˆ¶ç»„ä»¶é€šè¿‡ ref ç›´æ¥è®¿é—®å­ç»„ä»¶çš„ DOM èŠ‚ç‚¹æˆ–å®ä¾‹ï¼ˆç±»ç»„ä»¶ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ useImperativeHandle æš´éœ²å­ç»„ä»¶çš„ç‰¹å®šæ–¹æ³•ç»™çˆ¶ç»„ä»¶è°ƒç”¨ã€‚è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºéå£°æ˜å¼çš„äº¤äº’ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒæ‰“ç ´äº†å•å‘æ•°æ®æµã€‚ 2. å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼š\nå…„å¼Ÿç»„ä»¶ä¹‹é—´ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œéœ€è¦é€šè¿‡å®ƒä»¬çš„å…±åŒçˆ¶ç»„ä»¶ä½œä¸ºâ€œä¸­é—´äººâ€è¿›è¡Œé€šä¿¡ã€‚\né€šè¿‡å…±åŒçˆ¶ç»„ä»¶ (çŠ¶æ€æå‡)ï¼š å°†å…±äº«çš„çŠ¶æ€æå‡åˆ°å…±åŒçš„çˆ¶ç»„ä»¶ä¸­ç®¡ç†ã€‚ çˆ¶ç»„ä»¶å°†çŠ¶æ€é€šè¿‡ props ä¼ é€’ç»™ä¸€ä¸ªå…„å¼Ÿç»„ä»¶ï¼ˆæ¥æ”¶è€…ï¼‰ã€‚ çˆ¶ç»„ä»¶å°†æ›´æ–°çŠ¶æ€çš„å›è°ƒå‡½æ•°é€šè¿‡ props ä¼ é€’ç»™å¦ä¸€ä¸ªå…„å¼Ÿç»„ä»¶ï¼ˆå‘é€è€…ï¼‰ã€‚ å‘é€è€…å…„å¼Ÿç»„ä»¶è°ƒç”¨å›è°ƒå‡½æ•°æ¥æ›´æ–°çˆ¶ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå½±å“æ¥æ”¶è€…å…„å¼Ÿç»„ä»¶çš„æ¸²æŸ“ã€‚ ç¤ºä¾‹ï¼š // ParentComponent.js function ParentComponent() { const [sharedData, setSharedData] = useState(\u0026#39;\u0026#39;); return ( \u0026lt;div\u0026gt; \u0026lt;SiblingA onDataChange={setSharedData} /\u0026gt; \u0026lt;SiblingB data={sharedData} /\u0026gt; \u0026lt;/div\u0026gt; ); } // SiblingA.js function SiblingA({ onDataChange }) { return \u0026lt;button onClick={() =\u0026gt; onDataChange(\u0026#39;Hello from A\u0026#39;)}\u0026gt;Send Data to B\u0026lt;/button\u0026gt;; } // SiblingB.js function SiblingB({ data }) { return \u0026lt;p\u0026gt;Received in B: {data}\u0026lt;/p\u0026gt;; } Context API (useContext)ï¼š å¯¹äºéœ€è¦è·¨è¶Šå¤šä¸ªå±‚çº§æˆ–å¤šä¸ªå…„å¼Ÿç»„ä»¶å…±äº«çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ Context APIã€‚å…±åŒçˆ¶ç»„ä»¶ä½œä¸º Providerï¼Œæä¾›å…±äº«æ•°æ®å’Œæ›´æ–°å‡½æ•°ï¼›å…„å¼Ÿç»„ä»¶ä½œä¸º Consumerï¼ˆé€šè¿‡ useContext Hookï¼‰ï¼Œè·å–æ‰€éœ€æ•°æ®ã€‚ å…¨å±€çŠ¶æ€ç®¡ç†åº“ (Redux, Zustand, etc.)ï¼š å¯¹äºæ›´å¤æ‚ã€éœ€è¦é›†ä¸­ç®¡ç†å’Œåè°ƒçš„å…¨å±€çŠ¶æ€ï¼Œä½¿ç”¨ Reduxã€Zustand ç­‰çŠ¶æ€ç®¡ç†åº“æ˜¯æœ€ä½³é€‰æ‹©ã€‚å…„å¼Ÿç»„ä»¶éƒ½ä» Store ä¸­è®¢é˜…æ‰€éœ€çš„çŠ¶æ€ï¼Œå¹¶ dispatch action æ¥æ›´æ–°çŠ¶æ€ã€‚ ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Ÿ\r#\ré«˜é˜¶ç»„ä»¶ (Higher-Order Component, HOC) æ˜¯ React ä¸­ç”¨äºç»„ä»¶é€»è¾‘å¤ç”¨çš„ä¸€ç§é«˜çº§æŠ€æœ¯ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ï¼ˆå¢å¼ºå‹ï¼‰ç»„ä»¶ã€‚\nå®šä¹‰ï¼š HOC æ˜¯ä¸€ç§çº¦å®šä¿—æˆçš„æ¨¡å¼ï¼Œå®ƒä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„ç»“æ„é€šå¸¸æ˜¯ï¼šconst EnhancedComponent = higherOrderComponent(WrappedComponent);\nHOC çš„ä½œç”¨ï¼š\né€»è¾‘å¤ç”¨ï¼š æå–å’Œå¤ç”¨å…¬å…±çš„çŠ¶æ€é€»è¾‘æˆ–è¡Œä¸ºï¼Œé¿å…åœ¨å¤šä¸ªç»„ä»¶ä¸­é‡å¤ç¼–å†™ã€‚ ä»£ç è§£è€¦ï¼š å°†å¢å¼ºé€»è¾‘ä¸ UI æ¸²æŸ“é€»è¾‘åˆ†ç¦»ã€‚ Props åŠ«æŒ/æ³¨å…¥ï¼š å¯ä»¥ä¿®æ”¹ã€æ·»åŠ æˆ–åˆ é™¤ä¼ é€’ç»™è¢«åŒ…è£…ç»„ä»¶çš„ propsã€‚ æ¸²æŸ“åŠ«æŒï¼š å¯ä»¥æ§åˆ¶è¢«åŒ…è£…ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹ï¼ˆä¾‹å¦‚ï¼Œæ¡ä»¶æ¸²æŸ“ã€åŒ…è£…é¢å¤–çš„å…ƒç´ ï¼‰ã€‚ ç¤ºä¾‹ï¼šwithLoading HOC (æ·»åŠ åŠ è½½çŠ¶æ€é€»è¾‘)\nimport React, { useState, useEffect } from \u0026#39;react\u0026#39;; function withLoading(WrappedComponent) { return function WithLoadingComponent(props) { const [loading, setLoading] = useState(true); useEffect(() =\u0026gt; { // æ¨¡æ‹Ÿæ•°æ®åŠ è½½ setTimeout(() =\u0026gt; { setLoading(false); }, 2000); }, []); if (loading) { return \u0026lt;div\u0026gt;Loading...\u0026lt;/div\u0026gt;; } return \u0026lt;WrappedComponent {...props} /\u0026gt;; // ä¼ é€’åŸå§‹ props }; } // å¦‚ä½•ä½¿ç”¨ï¼š // const MyDataDisplay = ({ data }) =\u0026gt; \u0026lt;p\u0026gt;{data}\u0026lt;/p\u0026gt;; // const MyDataDisplayWithLoading = withLoading(MyDataDisplay); // \u0026lt;MyDataDisplayWithLoading data=\u0026#34;Some important data\u0026#34; /\u0026gt; HOC çš„ä¼˜ç¼ºç‚¹ï¼š\nä¼˜ç‚¹ï¼š é€»è¾‘å¤ç”¨æ€§å¼ºï¼Œå¯¹åŸå§‹ç»„ä»¶ä¾µå…¥æ€§å°ã€‚ ç¼ºç‚¹ï¼š å‘½åå†²çªï¼š å¦‚æœå¤šä¸ª HOC æ³¨å…¥åŒå propsï¼Œå¯èƒ½ä¼šè¦†ç›–ã€‚ Props æ¥æºä¸æ˜ç¡®ï¼š å¾ˆéš¾çœ‹å‡ºæŸä¸ª prop æ˜¯ä»å“ªä¸ª HOC æ³¨å…¥çš„ã€‚ Wrapper Hellï¼š å¤šä¸ª HOC åµŒå¥—å¯èƒ½å¯¼è‡´ç»„ä»¶æ ‘å±‚çº§è¿‡æ·±ï¼Œè°ƒè¯•å›°éš¾ã€‚ ä¸å…¼å®¹ Hooks (æ—©æœŸ)ï¼š åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼ŒHOC æ˜¯ä¸»è¦çš„é€»è¾‘å¤ç”¨æ–¹å¼ã€‚Hooks å‡ºç°åï¼Œè‡ªå®šä¹‰ Hook æˆä¸ºæ›´æ¨èçš„æ–¹å¼ï¼Œå› ä¸ºå®ƒä»¬è§£å†³äº† HOC çš„ä¸€äº›ç—›ç‚¹ã€‚ ä»€ä¹ˆæ˜¯ render props æ¨¡å¼ï¼Ÿ\r#\rRender Props æ˜¯ä¸€ç§ React ä¸­ç”¨äºç»„ä»¶é€»è¾‘å¤ç”¨çš„æ¨¡å¼ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸€ä¸ªç»„ä»¶çš„ props æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼ˆè¿™ä¸ªå‡½æ•°è¿”å› React å…ƒç´ ï¼Œå³æ¸²æŸ“å†…å®¹ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å› React å…ƒç´ ã€‚ å­ç»„ä»¶åœ¨å†…éƒ¨è°ƒç”¨è¿™ä¸ªå‡½æ•° prop æ¥å†³å®šå®ƒè¦æ¸²æŸ“ä»€ä¹ˆã€‚\nå®šä¹‰ï¼š ä»»ä½•ä½¿ç”¨ render prop æ¥å‘Šè¯‰ç»„ä»¶è¦æ¸²æŸ“ä»€ä¹ˆï¼Œè€Œä¸æ˜¯è‡ªå·±æ¸²æŸ“çš„ç»„ä»¶ï¼Œéƒ½å¯ä»¥ç§°ä¸ºä½¿ç”¨äº† render props æ¨¡å¼ã€‚å°½ç®¡åå­—å« render propsï¼Œä½†è¿™ä¸ª prop çš„åç§°ä¸ä¸€å®šæ˜¯ renderï¼Œå¯ä»¥æ˜¯ä»»ä½•å‡½æ•°ç±»å‹çš„ propï¼ˆå¦‚ children, renderHeader ç­‰ï¼‰ã€‚\nç¤ºä¾‹ï¼šMouseTracker ç»„ä»¶ (è¿½è¸ªé¼ æ ‡ä½ç½®å¹¶æ¸²æŸ“ä»»æ„å†…å®¹)\nimport React, { useState } from \u0026#39;react\u0026#39;; class MouseTracker extends React.Component { constructor(props) { super(props); this.state = { x: 0, y: 0 }; this.handleMouseMove = this.handleMouseMove.bind(this); } handleMouseMove(event) { this.setState({ x: event.clientX, y: event.clientY }); } render() { return ( \u0026lt;div style={{ height: \u0026#39;100vh\u0026#39; }} onMouseMove={this.handleMouseMove}\u0026gt; {/* è°ƒç”¨ä¼ å…¥çš„ render propï¼Œå¹¶å°†å½“å‰é¼ æ ‡ä½ç½®ä½œä¸ºå‚æ•°ä¼ é€’ */} {this.props.render(this.state)} \u0026lt;/div\u0026gt; ); } } // å¦‚ä½•ä½¿ç”¨ï¼š function App() { return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;Move the mouse around!\u0026lt;/h1\u0026gt; \u0026lt;MouseTracker render={({ x, y }) =\u0026gt; ( // Render props æ¥æ”¶ MouseTracker ä¼ é€’çš„çŠ¶æ€ï¼Œå¹¶å†³å®šæ¸²æŸ“ä»€ä¹ˆ \u0026lt;p\u0026gt;The mouse position is ({x}, {y})\u0026lt;/p\u0026gt; )}/\u0026gt; {/* ä¹Ÿå¯ä»¥æ¸²æŸ“å…¶ä»–å†…å®¹ï¼Œåªè¦æä¾›ä¸åŒçš„ render prop */} \u0026lt;MouseTracker render={({ x, y }) =\u0026gt; ( \u0026lt;img src=\u0026#34;https://example.com/cat.png\u0026#34; style={{ position: \u0026#39;absolute\u0026#39;, left: x, top: y }} alt=\u0026#34;Cat\u0026#34; /\u0026gt; )}/\u0026gt; \u0026lt;/div\u0026gt; ); } Render Props çš„ä¼˜ç¼ºç‚¹ï¼š\nä¼˜ç‚¹ï¼š çµæ´»çš„ UI æ¸²æŸ“ï¼š è¢«åŒ…è£…çš„ç»„ä»¶å®Œå…¨æ§åˆ¶æ¸²æŸ“å†…å®¹ã€‚ é€»è¾‘å¤ç”¨ï¼š è¡Œä¸ºé€»è¾‘ï¼ˆå¦‚é¼ æ ‡è¿½è¸ªã€æ•°æ®è·å–ï¼‰å¯ä»¥åœ¨ä¸åŒç»„ä»¶é—´å¤ç”¨ã€‚ é¿å…å‘½åå†²çªï¼š ä¸åƒ HOC å¯èƒ½ä¼šæœ‰ props å‘½åå†²çªã€‚ æ¸…æ™°çš„æ•°æ®æµï¼š æ˜ç¡®åœ°çŸ¥é“å“ªäº›æ•°æ®ä»çˆ¶ç»„ä»¶ï¼ˆè¿™é‡Œæ˜¯ MouseTrackerï¼‰ä¼ é€’ç»™äº†å­ç»„ä»¶ï¼ˆrender prop è¿”å›çš„ç»„ä»¶ï¼‰ã€‚ ç¼ºç‚¹ï¼š åµŒå¥—åœ°ç‹± (Wrapper Hell)ï¼š å¦‚æœä½¿ç”¨å¤šä¸ª render propsï¼Œå¯èƒ½ä¼šå¯¼è‡´ JSX åµŒå¥—è¿‡æ·±ï¼Œä»£ç å¯è¯»æ€§ä¸‹é™ã€‚ æ€§èƒ½é—®é¢˜ï¼š æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œå¦‚æœ render prop æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼ˆä¸ React.memo ç»“åˆæ—¶éœ€è¦æ³¨æ„ï¼‰ã€‚ Hooks ä¸ Render Propsï¼š åœ¨ Hooks å‡ºç°åï¼Œè®¸å¤šåŸæœ¬é€šè¿‡ render props å®ç°çš„é€»è¾‘å¤ç”¨åœºæ™¯ç°åœ¨å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Hook æ›´ç®€æ´åœ°å®ç°ï¼Œä¸”æ²¡æœ‰åµŒå¥—åœ°ç‹±çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œä¸Šè¿°çš„ MouseTracker é€»è¾‘å°±å¯ä»¥å°è£…æˆä¸€ä¸ª useMousePosition è‡ªå®šä¹‰ Hookã€‚å°½ç®¡å¦‚æ­¤ï¼ŒRender Props åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚éœ€è¦åŠ¨æ€æä¾›æ¸²æŸ“å†…å®¹ï¼‰ä»ç„¶æ˜¯ä¸€ç§æœ‰æ•ˆçš„æ¨¡å¼ã€‚\nç»„ä»¶å¤ç”¨æœ‰å“ªäº›æ–¹å¼ï¼Ÿä½ å®é™…é¡¹ç›®æ€ä¹ˆåšçš„ï¼Ÿ\r#\rç»„ä»¶å¤ç”¨æ˜¯æé«˜å¼€å‘æ•ˆç‡ã€ä»£ç è´¨é‡å’Œç»´æŠ¤æ€§çš„é‡è¦æ–¹é¢ã€‚ä¸»è¦æ–¹å¼æœ‰ï¼š\né«˜é˜¶ç»„ä»¶ (HOC)ï¼š\næ–¹å¼ï¼š å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶ã€‚ é€‚ç”¨åœºæ™¯ï¼š æ³¨å…¥å…¬å…± propsã€æ·»åŠ å…¬å…±é€»è¾‘ï¼ˆå¦‚åŠ è½½çŠ¶æ€ã€æƒé™æ ¡éªŒã€æ•°æ®è¯·æ±‚ï¼‰ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘åœ¨é¡¹ç›®ä¸­æ›¾ç”¨ HOC å®ç°è¿‡ç»Ÿä¸€çš„æƒé™æ ¡éªŒ (withAuth) æˆ–åŠ è½½çŠ¶æ€å±•ç¤º (withLoading)ï¼Œå°†è¿™äº›éä¸šåŠ¡é€»è¾‘ä»ä¸šåŠ¡ç»„ä»¶ä¸­å‰¥ç¦»ã€‚ Render Props æ¨¡å¼ï¼š\næ–¹å¼ï¼š ç»„ä»¶çš„ prop æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å› JSXã€‚ é€‚ç”¨åœºæ™¯ï¼š éœ€è¦å¤ç”¨é€»è¾‘ä½† UI è¡¨ç°å½¢å¼çµæ´»å¤šæ ·çš„æƒ…å†µï¼ˆå¦‚é¼ æ ‡è¿½è¸ªã€å¼¹çª—ã€è¡¨å•å­—æ®µï¼‰ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘æ›¾ç”¨å®ƒæ¥å®ç°ä¸€ä¸ªå¯å¤ç”¨çš„ DataFetcher ç»„ä»¶ï¼Œå®ƒè´Ÿè´£æ•°æ®çš„åŠ è½½ã€é”™è¯¯å¤„ç†ï¼Œç„¶åé€šè¿‡ render prop æŠŠæ•°æ®å’ŒçŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶æ¥æ¸²æŸ“ä¸åŒå½¢å¼çš„ UIã€‚ è‡ªå®šä¹‰ Hook (Custom Hooks)ï¼š\næ–¹å¼ï¼š ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œå†…éƒ¨è°ƒç”¨å…¶ä»– Hookï¼Œå°è£…å¹¶å¤ç”¨çŠ¶æ€é€»è¾‘ã€‚ é€‚ç”¨åœºæ™¯ï¼š è¿™æ˜¯ React å®˜æ–¹æ¨èçš„ã€åœ¨å‡½æ•°ç»„ä»¶ä¸­æœ€ä¸»è¦çš„é€»è¾‘å¤ç”¨æ–¹å¼ã€‚ å‡ ä¹æ‰€æœ‰éœ€è¦å…±äº«çŠ¶æ€é€»è¾‘çš„åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘åœ¨é¡¹ç›®ä¸­å¤§é‡ä½¿ç”¨äº†è‡ªå®šä¹‰ Hookï¼Œä¾‹å¦‚ useFormValidationï¼ˆå°è£…è¡¨å•éªŒè¯é€»è¾‘ï¼‰ã€useInfiniteScrollï¼ˆå®ç°æ— é™æ»šåŠ¨åˆ—è¡¨ï¼‰ã€useDebounceï¼ˆé˜²æŠ–å‡½æ•°ï¼‰ã€‚è¿™æå¤§åœ°å‡å°‘äº†ç»„ä»¶å†…éƒ¨çš„æ ·æ¿ä»£ç ï¼Œæé«˜äº†é€»è¾‘çš„å†…èšæ€§å’Œå¯æµ‹è¯•æ€§ã€‚ ç»„ä»¶ç»„åˆ (Composition)ï¼š\næ–¹å¼ï¼š å°†å¤šä¸ªå°ç»„ä»¶ç»„åˆæˆä¸€ä¸ªå¤§ç»„ä»¶ï¼Œé€šè¿‡ props.children æˆ–å…¶ä»–å‘½å props æ¥ä¼ é€’ JSX ç‰‡æ®µã€‚ é€‚ç”¨åœºæ™¯ï¼š æ„å»ºå¤æ‚ UI ç»“æ„ï¼Œä¾‹å¦‚å¸ƒå±€ç»„ä»¶ã€å¡ç‰‡ç»„ä»¶ã€æ¨¡æ€æ¡†ç»„ä»¶ã€‚ é¡¹ç›®å®è·µï¼š æˆ‘ä¼šåˆ›å»ºåƒ Card, Modal, Layout è¿™æ ·çš„é€šç”¨ UI ç»„ä»¶ã€‚ä¾‹å¦‚ï¼ŒCard ç»„ä»¶å¯èƒ½æœ‰ä¸€ä¸ª header å’Œ body propï¼Œå…è®¸ä¼ å…¥ä¸åŒçš„ JSX æ¥æ¸²æŸ“ä¸åŒçš„å†…å®¹ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç è¿™äº›å†…å®¹ã€‚ // Card.js function Card({ header, children, footer }) { return ( \u0026lt;div className=\u0026#34;card\u0026#34;\u0026gt; {header \u0026amp;\u0026amp; \u0026lt;div className=\u0026#34;card-header\u0026#34;\u0026gt;{header}\u0026lt;/div\u0026gt;} \u0026lt;div className=\u0026#34;card-body\u0026#34;\u0026gt;{children}\u0026lt;/div\u0026gt; {footer \u0026amp;\u0026amp; \u0026lt;div className=\u0026#34;card-footer\u0026#34;\u0026gt;{footer}\u0026lt;/div\u0026gt;} \u0026lt;/div\u0026gt; ); } // Usage // \u0026lt;Card header={\u0026lt;h2\u0026gt;Title\u0026lt;/h2\u0026gt;} footer={\u0026lt;button\u0026gt;More\u0026lt;/button\u0026gt;}\u0026gt; // \u0026lt;p\u0026gt;Card content here\u0026lt;/p\u0026gt; // \u0026lt;/Card\u0026gt; æˆ‘å®é™…é¡¹ç›®æ€ä¹ˆåšçš„ï¼Ÿ åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œè‡ªå®šä¹‰ Hook æ˜¯æˆ‘æœ€ä¸»è¦å’Œæœ€æ¨èçš„é€»è¾‘å¤ç”¨æ–¹å¼ï¼Œå› ä¸ºå®ƒç®€æ´ã€å¼ºå¤§ä¸”ç¬¦åˆ Hooks çš„è®¾è®¡å“²å­¦ã€‚å¯¹äº UI ç»“æ„ä¸Šçš„å¤ç”¨ï¼Œæˆ‘ä¸»è¦ä½¿ç”¨ç»„ä»¶ç»„åˆï¼Œåˆ›å»ºé€šç”¨ä¸”å¯é…ç½®çš„ UI ç»„ä»¶ã€‚HOC å’Œ Render Props åœ¨ Hooks å‡ºç°åä½¿ç”¨é¢‘ç‡æœ‰æ‰€ä¸‹é™ï¼Œä½†å¦‚æœé¢å¯¹æ—§é¡¹ç›®æˆ–ç‰¹å®šéœ€æ±‚ï¼Œå®ƒä»¬ä»æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ã€‚ä¾‹å¦‚ï¼Œåœ¨æ—§ç‰ˆç±»ç»„ä»¶è¾ƒå¤šçš„é¡¹ç›®é‡Œï¼ŒHOC ä»ç„¶æ˜¯æœ‰æ•ˆçš„å¤ç”¨æ–¹æ¡ˆã€‚\nä»€ä¹ˆæ˜¯ç»„åˆä¼˜äºç»§æ‰¿ï¼ŸReact å¦‚ä½•ä½“ç°ï¼Ÿ\r#\râ€œç»„åˆä¼˜äºç»§æ‰¿â€ (Composition over Inheritance) æ˜¯ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå®ƒå»ºè®®åœ¨è®¾è®¡å¯å¤ç”¨ä»£ç æ—¶ï¼Œåº”ä¼˜å…ˆè€ƒè™‘é€šè¿‡ç»„åˆçš„æ–¹å¼æ¥å®ç°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é€šè¿‡ç»§æ‰¿ã€‚\nç»§æ‰¿çš„ç¼ºç‚¹ï¼š\nç´§è€¦åˆï¼š å­ç±»ä¸çˆ¶ç±»ç´§å¯†è€¦åˆï¼Œå­ç±»ä¼šç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§ï¼Œå³ä½¿å®ƒä¸éœ€è¦ã€‚ è„†å¼±çš„åŸºç±»é—®é¢˜ï¼š çˆ¶ç±»çš„æ”¹å˜å¯èƒ½ä¼šæ„å¤–åœ°å½±å“æ‰€æœ‰å­ç±»ï¼Œå¯¼è‡´éš¾ä»¥è°ƒè¯•çš„é—®é¢˜ã€‚ å¤šé‡ç»§æ‰¿é—®é¢˜ï¼š è®¸å¤šè¯­è¨€ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œé™åˆ¶äº†ä»£ç å¤ç”¨çš„çµæ´»æ€§ã€‚ å…³æ³¨ç‚¹æ··åˆï¼š çˆ¶ç±»å¯èƒ½åŒ…å«ä¸å­ç±»æ— å…³çš„é€»è¾‘ã€‚ ç»„åˆçš„ä¼˜ç‚¹ï¼š\næ¾è€¦åˆï¼š ç»„ä»¶ä¹‹é—´é€šè¿‡ props è¿›è¡Œé€šä¿¡ï¼Œä¾èµ–å…³ç³»æ˜ç¡®ã€‚ é«˜å†…èšä½è€¦åˆï¼š æ¯ä¸ªç»„ä»¶åªå…³æ³¨è‡ªå·±çš„èŒè´£ã€‚ æ›´çµæ´»ï¼š å¯ä»¥æ ¹æ®éœ€è¦ç»„åˆä¸åŒçš„åŠŸèƒ½ã€‚ æ›´æ˜“æµ‹è¯•ï¼š ç‹¬ç«‹çš„ç»„ä»¶æ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ React å¦‚ä½•ä½“ç°â€œç»„åˆä¼˜äºç»§æ‰¿â€ï¼š\nå‡½æ•°ç»„ä»¶å’Œ Hooksï¼š\nReact æ¨èä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œå®ƒæ›´åƒä¸€ä¸ªâ€œçº¯å‡½æ•°â€ï¼Œæ¥æ”¶ props å¹¶è¿”å› UIã€‚ è‡ªå®šä¹‰ Hook æ˜¯ç»„åˆæ€æƒ³çš„å®Œç¾ä½“ç°ã€‚å®ƒå…è®¸ä½ å°†ç‹¬ç«‹çš„çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨å°è£…èµ·æ¥ï¼Œç„¶ååœ¨å¤šä¸ªç»„ä»¶ä¸­â€œç»„åˆâ€ä½¿ç”¨è¿™äº›é€»è¾‘ï¼Œè€Œä¸éœ€è¦é€šè¿‡ç»§æ‰¿æ¥å…±äº«ã€‚ä¾‹å¦‚ï¼ŒuseToggle å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­ç»„åˆä½¿ç”¨ï¼Œè€Œä¸éœ€è¦ç»„ä»¶ç»§æ‰¿ä¸€ä¸ª ToggleableComponentã€‚ props.children å’Œå…¶ä»– props ä¼ é€’ JSXï¼š\nè¿™æ˜¯ React ä¸­æœ€å¸¸è§çš„ç»„åˆæ–¹å¼ã€‚çˆ¶ç»„ä»¶é€šè¿‡ props.childrenï¼ˆæˆ–è‡ªå®šä¹‰çš„ propsï¼Œå¦‚ leftSidebar, footerï¼‰æ¥æ¸²æŸ“å…¶å†…éƒ¨çš„å†…å®¹ã€‚çˆ¶ç»„ä»¶åªæä¾›ç»“æ„å’Œå¸ƒå±€ï¼Œä¸å…³å¿ƒå­ç»„ä»¶çš„å…·ä½“æ¸²æŸ“é€»è¾‘ã€‚ ç¤ºä¾‹ï¼š Modal ç»„ä»¶åªè´Ÿè´£æ¨¡æ€æ¡†çš„æ˜¾ç¤ºã€éšè—ã€é®ç½©å’Œå…³é—­æŒ‰é’®ï¼Œè€Œæ¨¡æ€æ¡†çš„å…·ä½“å†…å®¹åˆ™æ˜¯é€šè¿‡ props.children ä¼ é€’è¿›æ¥çš„ã€‚ function Modal({ children, isOpen, onClose }) { if (!isOpen) return null; return ( \u0026lt;div className=\u0026#34;modal-overlay\u0026#34;\u0026gt; \u0026lt;div className=\u0026#34;modal-content\u0026#34;\u0026gt; {children} {/* ç»„åˆè¿›å»çš„å†…å®¹ */} \u0026lt;button onClick={onClose}\u0026gt;Close\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ); } // Usage: \u0026lt;Modal isOpen={true} onClose={() =\u0026gt; {}}\u0026gt;\u0026lt;MyForm /\u0026gt;\u0026lt;/Modal\u0026gt; Modal ç»„ä»¶å¹¶ä¸çŸ¥é“ MyForm æ˜¯ä»€ä¹ˆï¼Œå®ƒåªçŸ¥é“è¦æ¸²æŸ“ childrenã€‚ é«˜é˜¶ç»„ä»¶ (HOC) å’Œ Render Props (ä¼ ç»Ÿæ–¹å¼)ï¼š\nè™½ç„¶ç°åœ¨è‡ªå®šä¹‰ Hook æ›´æµè¡Œï¼Œä½† HOC å’Œ Render Props æ¨¡å¼æœ¬èº«ä¹Ÿæ˜¯ç»„åˆçš„ä½“ç°ã€‚å®ƒä»¬é€šè¿‡åŒ…è£…æˆ–æ³¨å…¥å‡½æ•°æ¥â€œç»„åˆâ€é¢å¤–çš„è¡Œä¸ºï¼Œè€Œä¸æ˜¯è®©ç»„ä»¶ç»§æ‰¿ä¸€ä¸ªåŸºç±»ã€‚ æ€»ç»“ï¼š React çš„è®¾è®¡å“²å­¦é¼“åŠ±æˆ‘ä»¬åˆ›å»ºå°çš„ã€ç‹¬ç«‹çš„ã€èŒè´£å•ä¸€çš„ç»„ä»¶ï¼Œå¹¶é€šè¿‡ propsã€children å’Œè‡ªå®šä¹‰ Hook å°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œæ„å»ºå‡ºå¤æ‚çš„åº”ç”¨ç¨‹åºã€‚è¿™ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å¼ºè°ƒçš„â€œç»„åˆä¼˜äºç»§æ‰¿â€åŸåˆ™ä¸è°‹è€Œåˆï¼Œä½¿å¾— React åº”ç”¨æ›´å…·çµæ´»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¯æµ‹è¯•æ€§ã€‚\nğŸ“„ è·¯ç”±ä¸è¡¨å•\r#\rReact Router çš„æ ¸å¿ƒåŸç†ï¼Ÿ\r#\rReact Router æ˜¯ä¸€ä¸ªæµè¡Œçš„å£°æ˜å¼è·¯ç”±åº“ï¼Œç”¨äºåœ¨ React åº”ç”¨ä¸­ç®¡ç† URL å’Œ UI çš„åŒæ­¥ã€‚\næ ¸å¿ƒåŸç†ï¼š\nå†å²ç®¡ç† (History Management)ï¼š\nReact Router çš„æ ¸å¿ƒæ˜¯åŸºäº History APIï¼ˆpushState, replaceState, popstate äº‹ä»¶ï¼‰æˆ– Hash Historyï¼ˆwindow.location.hashï¼‰æ¥ç®¡ç† URL çš„å˜åŒ–ã€‚ å®ƒæä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾— URL çš„å˜åŒ–ä¸ä¼šå¯¼è‡´æµè§ˆå™¨è¿›è¡Œé¡µé¢åˆ·æ–°ï¼Œè€Œæ˜¯é€šè¿‡ JavaScript æ¥åŠ¨æ€æ›´æ–° UIã€‚ BrowserRouter ä½¿ç”¨ History API (HTML5 Pushstate)ã€‚ HashRouter ä½¿ç”¨ URL çš„å“ˆå¸Œéƒ¨åˆ†ï¼ˆ#/pathï¼‰ã€‚ å£°æ˜å¼è·¯ç”±é…ç½®ï¼š\næˆ‘ä»¬ä½¿ç”¨ Route ç»„ä»¶æ¥å£°æ˜è·¯ç”±è§„åˆ™ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„é›†ä¸­å¼è·¯ç”±é…ç½®ã€‚ æ¯ä¸ª Route ç»„ä»¶éƒ½å®šä¹‰äº†å½“ URL åŒ¹é…ç‰¹å®š path æ—¶åº”è¯¥æ¸²æŸ“å“ªä¸ªç»„ä»¶ã€‚ path å‚æ•°ï¼š å¯ä»¥æ˜¯ç²¾ç¡®åŒ¹é…ï¼Œä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€å‚æ•°ï¼ˆå¦‚ /users/:idï¼‰ã€‚ åµŒå¥—è·¯ç”±ï¼š å…è®¸ç»„ä»¶å†…éƒ¨å®šä¹‰è‡ªå·±çš„å­è·¯ç”±ï¼Œå½¢æˆå±‚çº§ç»“æ„ã€‚ ç»„ä»¶ä¸ URL çš„å…³è”ï¼š\nRoute ç»„ä»¶ä¼šç›‘å¬ URL çš„å˜åŒ–ã€‚å½“ URL ä¸å…¶ path åŒ¹é…æ—¶ï¼Œå®ƒä¼šæ¸²æŸ“æŒ‡å®šçš„ç»„ä»¶ï¼Œå¹¶å‘è¯¥ç»„ä»¶æ³¨å…¥è·¯ç”±ç›¸å…³çš„ propsï¼ˆå¦‚ match, location, historyï¼‰ã€‚ Hooks (useParams, useLocation, useNavigate, useMatch) æä¾›äº†æ›´ç®€æ´çš„æ–¹å¼æ¥è·å–è·¯ç”±ä¿¡æ¯å’Œè¿›è¡Œå¯¼èˆªã€‚ å¯¼èˆªï¼š\nLink ç»„ä»¶ï¼šç”¨äºå£°æ˜å¼å¯¼èˆªï¼Œæ¸²æŸ“æˆä¸€ä¸ªå¸¦æœ‰ href çš„ \u0026lt;a\u0026gt; æ ‡ç­¾ï¼Œç‚¹å‡»æ—¶ä¼šé€šè¿‡ History API æ›´æ–° URLï¼Œè€Œä¸è§¦å‘é¡µé¢åˆ·æ–°ã€‚ useNavigate Hook (React Router v6+)ï¼šç”¨äºç¼–ç¨‹å¼å¯¼èˆªï¼Œå¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°æˆ–å‰¯ä½œç”¨ä¸­è¿›è¡Œé¡µé¢è·³è½¬ã€‚ æ¸²æŸ“æœºåˆ¶ï¼š\nå½“ URL å˜åŒ–æ—¶ï¼ŒReact Router ä¼šæ¯”è¾ƒæ–°çš„ URL å’Œå·²æœ‰çš„è·¯ç”±é…ç½®ï¼Œæ‰¾å‡ºåŒ¹é…çš„ Route ç»„ä»¶ã€‚ åŒ¹é…åˆ°çš„ Route ç»„ä»¶ä¼šè§¦å‘å…¶å†…éƒ¨ç»„ä»¶çš„æ¸²æŸ“ã€‚è¿™ä¸ªè¿‡ç¨‹ä»ç„¶éµå¾ª React çš„ Diff ç®—æ³•å’Œè™šæ‹Ÿ DOM æ›´æ–°æœºåˆ¶ã€‚ æ€»ç»“ï¼š React Router çš„æ ¸å¿ƒåœ¨äºå°†æµè§ˆå™¨çš„ URL å˜åŒ–ä¸ React ç»„ä»¶çš„æ¸²æŸ“çŠ¶æ€è¿›è¡ŒåŒæ­¥ï¼Œé€šè¿‡å£°æ˜å¼é…ç½®å’Œ History API å®ç°äº†å•é¡µé¢åº”ç”¨ (SPA) ä¸­çš„æ— åˆ·æ–°è·¯ç”±è·³è½¬å’Œ UI æ›´æ–°ã€‚\nè·¯ç”±æ‡’åŠ è½½æ€ä¹ˆåšï¼Ÿ\r#\rReact Router ä¸­çš„è·¯ç”±æ‡’åŠ è½½é€šå¸¸ç»“åˆ React.lazy å’Œ Suspense æ¥å®ç°ã€‚\næ­¥éª¤ï¼š\nä½¿ç”¨ React.lazy åŠ¨æ€å¯¼å…¥è·¯ç”±ç»„ä»¶ï¼š\nå°†éœ€è¦è¿›è¡Œæ‡’åŠ è½½çš„è·¯ç”±å¯¹åº”çš„ç»„ä»¶ä½¿ç”¨ React.lazy åŒ…è£¹ã€‚React.lazy æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè°ƒç”¨ import() åŠ¨æ€å¯¼å…¥ç»„ä»¶ã€‚ import React, { lazy, Suspense } from \u0026#39;react\u0026#39;; import { BrowserRouter, Routes, Route } from \u0026#39;react-router-dom\u0026#39;; // æ‡’åŠ è½½ç»„ä»¶ const HomePage = lazy(() =\u0026gt; import(\u0026#39;./pages/HomePage\u0026#39;)); const AboutPage = lazy(() =\u0026gt; import(\u0026#39;./pages/AboutPage\u0026#39;)); const DashboardPage = lazy(() =\u0026gt; import(\u0026#39;./pages/DashboardPage\u0026#39;)); ä½¿ç”¨ Suspense åŒ…è£¹ Route ç»„ä»¶ï¼š\nå°†åŒ…å«æ‡’åŠ è½½ç»„ä»¶çš„ Route æˆ– Routes æ•´ä½“ç”¨ Suspense ç»„ä»¶åŒ…è£¹èµ·æ¥ã€‚ Suspense ç»„ä»¶éœ€è¦ä¸€ä¸ª fallback propï¼Œç”¨äºåœ¨æ‡’åŠ è½½ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­æ˜¾ç¤ºå›é€€å†…å®¹ï¼ˆå¦‚åŠ è½½æŒ‡ç¤ºå™¨ï¼‰ã€‚ function App() { return ( \u0026lt;BrowserRouter\u0026gt; \u0026lt;Suspense fallback={\u0026lt;div\u0026gt;Loading page...\u0026lt;/div\u0026gt;}\u0026gt; \u0026lt;Routes\u0026gt; \u0026lt;Route path=\u0026#34;/\u0026#34; element={\u0026lt;HomePage /\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/about\u0026#34; element={\u0026lt;AboutPage /\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/dashboard\u0026#34; element={\u0026lt;DashboardPage /\u0026gt;} /\u0026gt; \u0026lt;/Routes\u0026gt; \u0026lt;/Suspense\u0026gt; \u0026lt;/BrowserRouter\u0026gt; ); } åŸç†ï¼š å½“ç”¨æˆ·è®¿é—®ä¸€ä¸ªæ‡’åŠ è½½è·¯ç”±æ—¶ï¼Œæµè§ˆå™¨ä¸ä¼šç«‹å³ä¸‹è½½è¯¥è·¯ç”±ç»„ä»¶åŠå…¶æ‰€æœ‰ä¾èµ–çš„ä»£ç ã€‚åªæœ‰å½“ç”¨æˆ·å¯¼èˆªåˆ°è¯¥è·¯ç”±æ—¶ï¼ŒReact.lazy æ‰ä¼šè§¦å‘ç›¸åº”çš„ import() åŠ¨æ€å¯¼å…¥ï¼Œæ„å»ºå·¥å…·ï¼ˆå¦‚ Webpackï¼‰ä¼šè¯†åˆ«åˆ°è¿™ä¸ªåŠ¨æ€å¯¼å…¥ï¼Œå¹¶å°†å…¶æ‹†åˆ†æˆä¸€ä¸ªå•ç‹¬çš„ JavaScript bundleã€‚æµè§ˆå™¨ä¼šå¼‚æ­¥ä¸‹è½½è¿™ä¸ª bundleï¼Œå¹¶åœ¨ä¸‹è½½å®Œæˆåæ¸²æŸ“ç»„ä»¶ã€‚åœ¨æ­¤æœŸé—´ï¼ŒSuspense çš„ fallback å†…å®¹ä¼šæ˜¾ç¤ºç»™ç”¨æˆ·ã€‚\nä¼˜åŠ¿ï¼š\nå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ï¼š åº”ç”¨ç¨‹åºçš„åˆå§‹ bundle ä½“ç§¯æ›´å°ã€‚ æŒ‰éœ€åŠ è½½ï¼š åªæœ‰å½“ç”¨æˆ·éœ€è¦è®¿é—®æŸä¸ªé¡µé¢æ—¶ï¼Œæ‰åŠ è½½è¯¥é¡µé¢å¯¹åº”çš„ä»£ç ã€‚ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š é¡µé¢åŠ è½½æ›´å¿«ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹å•é¡µåº”ç”¨ä¸­ã€‚ è¡¨å•åº“ä½ ç”¨è¿‡å“ªäº›ï¼ŸFormik / React Hook Formï¼Ÿ\r#\rï¼ˆæ ¹æ®ä½ çš„å®é™…ä½¿ç”¨ç»éªŒå›ç­”ï¼Œä¸‹é¢ä»¥éƒ½ç”¨è¿‡ä¸ºä¾‹ï¼‰\næˆ‘åœ¨é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨è¿‡ Formik å’Œ React Hook Formã€‚\nFormikï¼š\nä¼˜ç‚¹ï¼š åŠŸèƒ½å…¨é¢ï¼š å†…ç½®äº†è¡¨å•å€¼ã€é”™è¯¯ã€è§¦æ§çŠ¶æ€ (touched) çš„ç®¡ç†ï¼Œä»¥åŠæäº¤å¤„ç†ã€éªŒè¯ç­‰ä¸€æ•´å¥—è§£å†³æ–¹æ¡ˆã€‚ æ˜“äºä¸Šæ‰‹ï¼š å¯¹äºä¸ç†Ÿæ‚‰ Hooks çš„å¼€å‘è€…æ¥è¯´ï¼ŒFormik æä¾›äº† Formik ç»„ä»¶å’Œ Field ç»„ä»¶ï¼Œå°è£…äº†å¤§éƒ¨åˆ†é€»è¾‘ï¼Œå¼€ç®±å³ç”¨ã€‚ ç”Ÿæ€å¥å…¨ï¼š ç¤¾åŒºæ´»è·ƒï¼Œæœ‰ä¸°å¯Œçš„é›†æˆæ–¹æ¡ˆï¼ˆå¦‚ä¸ Yup é…åˆè¿›è¡Œæ ¡éªŒï¼‰ã€‚ ç¼ºç‚¹ï¼š æ¸²æŸ“æ€§èƒ½ï¼š åœ¨è¾“å…¥æ—¶å¯èƒ½ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œå› ä¸º Formik ä¼šæ›´æ–°å†…éƒ¨çŠ¶æ€ï¼Œè¿™ä¼šå¼•èµ·æ•´ä¸ª Formik ä¸Šä¸‹æ–‡çš„æ¶ˆè´¹è€…ï¼ˆåŒ…æ‹¬æ‰€æœ‰ Fieldï¼‰é‡æ–°æ¸²æŸ“ã€‚ å­¦ä¹ æ›²çº¿ï¼š è™½ç„¶æ¯”æ‰‹åŠ¨å†™è¡¨å•ç®€å•ï¼Œä½†å…¶ render props æˆ– HOC æ¨¡å¼åœ¨ Hooks æµè¡Œåæ˜¾å¾—ç•¥å¾®å¤æ‚ã€‚ é€‚ç”¨åœºæ™¯ï¼š å¯¹æ€§èƒ½è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜ã€åå¥½ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆã€æˆ–å›¢é˜Ÿä¹ æƒ¯ç±»ç»„ä»¶æ¨¡å¼çš„é¡¹ç›®ã€‚ React Hook Formï¼š\nä¼˜ç‚¹ï¼š æ€§èƒ½ä¼˜å¼‚ï¼š é‡‡ç”¨éå—æ§ç»„ä»¶çš„æ€è·¯ï¼Œé€šè¿‡ ref ç›´æ¥æ“ä½œ DOMï¼Œé¿å…äº†ç»„ä»¶åœ¨æ¯æ¬¡è¾“å…¥æ—¶éƒ½é‡æ–°æ¸²æŸ“ã€‚è¿™ä½¿å¾—å®ƒåœ¨æ€§èƒ½ä¸Šè¡¨ç°å“è¶Šï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹æˆ–å¤æ‚è¡¨å•ä¸­ã€‚ å°å·§è½»é‡ï¼š åŒ…ä½“ç§¯éå¸¸å°ï¼Œæ— é¢å¤–çš„ä¾èµ–ã€‚ åŸºäº Hooksï¼š å®Œå…¨åˆ©ç”¨ React Hooks çš„ç‰¹æ€§ï¼ŒAPI ç®€æ´ç›´è§‚ã€‚ æ›´å°‘é‡æ¸²æŸ“ï¼š åªæœ‰åœ¨è¡¨å•çŠ¶æ€ï¼ˆå¦‚ isValid, isDirtyï¼‰çœŸæ­£å˜åŒ–æ—¶æ‰ä¼šè§¦å‘ç»„ä»¶é‡æ¸²æŸ“ï¼Œè€Œè¾“å…¥å€¼çš„å˜åŒ–ç›´æ¥ç”± DOM å¤„ç†ã€‚ æ˜“äºé›†æˆï¼š æ ¡éªŒåº“ï¼ˆå¦‚ Zod, Yupï¼‰é›†æˆç®€å•ã€‚ ç¼ºç‚¹ï¼š å¯¹å—æ§ç»„ä»¶çš„æ”¯æŒç›¸å¯¹å¼±ä¸€äº›ï¼ˆéœ€è¦ä½¿ç”¨ Controller ç»„ä»¶ï¼‰ã€‚ å¯¹äºä¹ æƒ¯å—æ§ç»„ä»¶çš„å¼€å‘è€…æ¥è¯´ï¼Œå¯èƒ½éœ€è¦é€‚åº”å…¶éå—æ§çš„å“²å­¦ã€‚ é€‚ç”¨åœºæ™¯ï¼š å¯¹è¡¨å•æ€§èƒ½è¦æ±‚é«˜ã€å¤§å‹å¤æ‚è¡¨å•ã€è¿½æ±‚è½»é‡çº§å’Œ Hook å‹å¥½çš„é¡¹ç›®ã€‚ æˆ‘çš„é€‰æ‹©ï¼š åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ React Hook Formã€‚å®ƒåœ¨æ€§èƒ½æ–¹é¢çš„ä¼˜åŠ¿éå¸¸æ˜æ˜¾ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…å¤§å‹è¡¨å•å¸¦æ¥çš„å¡é¡¿é—®é¢˜ã€‚å…¶ Hooks åŒ–çš„ API ä¹Ÿæ›´ç¬¦åˆç°ä»£ React å¼€å‘çš„ä¹ æƒ¯ï¼Œä»£ç ä¹Ÿæ›´ç®€æ´ã€‚å¯¹äºéœ€è¦é›†æˆç¬¬ä¸‰æ–¹å—æ§ç»„ä»¶çš„åœºæ™¯ï¼ŒController ç»„ä»¶ä¹Ÿèƒ½å¾ˆå¥½åœ°è§£å†³ã€‚\nè¡¨å•æ ¡éªŒæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\r#\rè¡¨å•æ ¡éªŒæ˜¯ç¡®ä¿ç”¨æˆ·è¾“å…¥æ•°æ®æœ‰æ•ˆæ€§çš„å…³é”®ã€‚æˆ‘é€šå¸¸ç»“åˆä»¥ä¸‹æ–¹å¼æ¥å®ç°ï¼š\nå†…ç½® HTML5 æ ¡éªŒï¼š\næ–¹å¼ï¼š åˆ©ç”¨ HTML5 è‡ªèº«çš„å±æ€§ï¼Œå¦‚ required, minlength, maxlength, type=\u0026quot;email\u0026quot;, pattern ç­‰ã€‚ ä¼˜ç‚¹ï¼š ç®€å•æ˜“ç”¨ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤– JavaScriptã€‚ ç¼ºç‚¹ï¼š æ ¡éªŒè§„åˆ™æœ‰é™ï¼Œé”™è¯¯æç¤ºæ ·å¼ä¸å¯æ§ï¼Œç”¨æˆ·ä½“éªŒè¾ƒå·®ã€‚ æ‰‹åŠ¨æ ¡éªŒ (åœ¨ onChange æˆ– onSubmit äº‹ä»¶ä¸­)ï¼š\næ–¹å¼ï¼š åœ¨ input çš„ onChange äº‹ä»¶ä¸­å®æ—¶æ ¡éªŒï¼Œæˆ–è€…åœ¨è¡¨å•æäº¤ (onSubmit) æ—¶é›†ä¸­æ ¡éªŒã€‚ ä¼˜ç‚¹ï¼š çµæ´»ï¼Œå¯ä»¥å®ç°ä»»æ„å¤æ‚çš„æ ¡éªŒé€»è¾‘ã€‚ ç¼ºç‚¹ï¼š éœ€è¦æ‰‹åŠ¨ç®¡ç†å¤§é‡é”™è¯¯çŠ¶æ€ï¼Œä»£ç é‡å¤§ï¼Œé€»è¾‘åˆ†æ•£ã€‚ ä½¿ç”¨ç¬¬ä¸‰æ–¹æ ¡éªŒåº“ (ç»“åˆè¡¨å•åº“)ï¼š\næ–¹å¼ï¼š è¿™æ˜¯æœ€æ¨èçš„æ–¹å¼ã€‚ç»“åˆ Formik æˆ– React Hook Form è¿™æ ·çš„è¡¨å•åº“ï¼Œå†é›†æˆä¸“é—¨çš„æ ¡éªŒåº“ã€‚ å¸¸ç”¨æ ¡éªŒåº“ï¼š Yupï¼š å£°æ˜å¼æ ¡éªŒåº“ï¼Œä½¿ç”¨ schema å®šä¹‰æ ¡éªŒè§„åˆ™ï¼Œè¯­æ³•ç›´è§‚ã€‚ Zodï¼š TypeScript ä¼˜å…ˆçš„å£°æ˜å¼æ ¡éªŒåº“ï¼Œæä¾›äº†æ›´å¼ºå¤§çš„ç±»å‹æ¨æ–­èƒ½åŠ›ã€‚ Joiï¼š å¦ä¸€ä¸ªæµè¡Œçš„å£°æ˜å¼æ ¡éªŒåº“ï¼ˆå¸¸ç”¨äº Node.jsï¼Œä½†å‰ç«¯ä¹Ÿå¯ç”¨ï¼‰ã€‚ å®ç°æµç¨‹ (ä»¥ React Hook Form + Yup ä¸ºä¾‹)ï¼š å®šä¹‰ Yup çš„ schemaï¼ŒåŒ…å«æ‰€æœ‰è¡¨å•å­—æ®µçš„æ ¡éªŒè§„åˆ™ï¼ˆå¦‚ string().required('å¿…å¡«'), number().min(0)ï¼‰ã€‚ åœ¨ useForm Hook ä¸­ï¼Œå°† schema ä¼ å…¥ resolver é…ç½®é¡¹ï¼ˆå¦‚ resolver: yupResolver(schema)ï¼‰ã€‚ React Hook Form ä¼šè‡ªåŠ¨å¤„ç†è¡¨å•çš„æ ¡éªŒé€»è¾‘ï¼Œå¹¶åœ¨é”™è¯¯æ—¶æä¾› errors å¯¹è±¡ã€‚ åœ¨ UI å±‚ï¼Œæ ¹æ® errors å¯¹è±¡æ˜¾ç¤ºç›¸åº”çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚ ä¼˜ç‚¹ï¼š ä»£ç ç®€æ´ï¼š æ ¡éªŒé€»è¾‘ä¸ UI åˆ†ç¦»ï¼Œé€šè¿‡ Schema é›†ä¸­å®šä¹‰ã€‚ å¯å¤ç”¨æ€§ï¼š æ ¡éªŒ Schema å¯ä»¥å¤ç”¨ã€‚ ç”¨æˆ·ä½“éªŒï¼š å¯ä»¥å®ç°å®æ—¶çš„å­—æ®µçº§æ ¡éªŒã€æäº¤æ—¶é›†ä¸­æ ¡éªŒã€è‡ªå®šä¹‰é”™è¯¯æç¤ºã€‚ æ€§èƒ½ï¼š è¡¨å•åº“ä¼šä¼˜åŒ–æ ¡éªŒè§¦å‘æ—¶æœºï¼Œé¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€‚ åç«¯æ ¡éªŒï¼š\né‡è¦æ€§ï¼š ä»»ä½•å‰ç«¯æ ¡éªŒéƒ½ä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼å‰ç«¯æ ¡éªŒæ˜¯ä¸ºäº†æå‡ç”¨æˆ·ä½“éªŒï¼Œåç«¯æ ¡éªŒæ˜¯ç¡®ä¿æ•°æ®å®‰å…¨å’Œå®Œæ•´æ€§çš„æœ€åä¸€é“é˜²çº¿ã€‚ æ–¹å¼ï¼š åç«¯æ¥æ”¶åˆ°æ•°æ®åï¼Œå†æ¬¡è¿›è¡Œä¸¥æ ¼çš„ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æ ¼å¼æ ¡éªŒã€‚ æˆ‘çš„å®è·µï¼š åœ¨æˆ‘çš„é¡¹ç›®ä¸­ï¼Œæˆ‘é€šå¸¸ä¼šä½¿ç”¨ React Hook Form ç»“åˆ Yup æˆ– Zod æ¥å®ç°å‰ç«¯çš„è¡¨å•æ ¡éªŒã€‚ è¿™å¥—ç»„åˆèƒ½æä¾›æä½³çš„å¼€å‘ä½“éªŒå’Œè¿è¡Œæ—¶æ€§èƒ½ã€‚åŒæ—¶ï¼Œåç«¯æ¥å£ä¹Ÿä¼šæœ‰å¯¹åº”çš„æ ¡éªŒé€»è¾‘ï¼Œç¡®ä¿æ•°æ®çš„æœ€ç»ˆæ­£ç¡®æ€§ã€‚å¯¹äºä¸€äº›å¤æ‚æˆ–éœ€è¦åŠ¨æ€å˜åŒ–çš„æ ¡éªŒè§„åˆ™ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨ Yup Schema ä¸­ç»“åˆæ¡ä»¶æ ¡éªŒï¼Œæˆ–è€…åœ¨ React Hook Form çš„ watch æœºåˆ¶ä¸­æ‰‹åŠ¨è§¦å‘ä¸€äº›å‰¯ä½œç”¨æ¥ç®¡ç†ã€‚\nğŸ§ª æµ‹è¯•ä¸å·¥å…·é“¾\r#\rå¦‚ä½•å¯¹ React ç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Ÿ\r#\rå¯¹ React ç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•é€šå¸¸æ¶‰åŠåˆ°ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š\næµ‹è¯•è¿è¡Œå™¨ï¼š ä½¿ç”¨ Jest ä½œä¸ºæµ‹è¯•è¿è¡Œå™¨å’Œæ–­è¨€åº“ã€‚ æ¸²æŸ“åº“ï¼š ä½¿ç”¨ React Testing Library (RTL) æˆ– Enzymeï¼ˆç°åœ¨ RTL æ›´æ¨èï¼‰æ¥æ¸²æŸ“å’Œä¸ç»„ä»¶äº¤äº’ã€‚ æ¨¡æ‹Ÿ (Mocking)ï¼š ä½¿ç”¨ Jest çš„æ¨¡æ‹ŸåŠŸèƒ½æ¥æ¨¡æ‹Ÿç»„ä»¶çš„ä¾èµ–é¡¹ï¼ˆå¦‚ API è¯·æ±‚ã€å¤–éƒ¨æ¨¡å—ã€DOM APIï¼‰ã€‚ å•å…ƒæµ‹è¯•çš„æ ¸å¿ƒåŸåˆ™ï¼š\næµ‹è¯•ç»„ä»¶çš„å…¬å…±æ¥å£ï¼š è€Œä¸æ˜¯å…¶å†…éƒ¨å®ç°ç»†èŠ‚ã€‚ æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼š è€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ç»„ä»¶æ–¹æ³•ã€‚ å…³æ³¨è¾“å‡ºï¼š éªŒè¯ç»„ä»¶æ¸²æŸ“çš„ UIã€è§¦å‘çš„äº‹ä»¶ã€å¯¹çŠ¶æ€çš„æ›´æ–°ç­‰ã€‚ åŸºæœ¬æ­¥éª¤å’Œç¤ºä¾‹ (ä½¿ç”¨ Jest + React Testing Library)ï¼š\nå®‰è£…ä¾èµ–ï¼š npm install --save-dev @testing-library/react @testing-library/jest-dom jest ç¼–å†™æµ‹è¯•æ–‡ä»¶ï¼š é€šå¸¸æ”¾åœ¨ç»„ä»¶æ–‡ä»¶æ—è¾¹æˆ–ç‹¬ç«‹çš„ __tests__ ç›®å½•ä¸­ã€‚ // MyComponent.test.js import React from \u0026#39;react\u0026#39;; import { render, screen, fireEvent } from \u0026#39;@testing-library/react\u0026#39;; import \u0026#39;@testing-library/jest-dom\u0026#39;; // å¼•å…¥æ–­è¨€æ‰©å±• import MyComponent from \u0026#39;./MyComponent\u0026#39;; // å¾…æµ‹è¯•ç»„ä»¶ describe(\u0026#39;MyComponent\u0026#39;, () =\u0026gt; { // æµ‹è¯•ç»„ä»¶æ˜¯å¦æ­£ç¡®æ¸²æŸ“ test(\u0026#39;renders correctly with default props\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent /\u0026gt;); expect(screen.getByText(/Hello, World!/i)).toBeInTheDocument(); }); // æµ‹è¯•ç‚¹å‡»äº‹ä»¶å’ŒçŠ¶æ€æ›´æ–° test(\u0026#39;increments count on button click\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent /\u0026gt;); const button = screen.getByRole(\u0026#39;button\u0026#39;, { name: /Increment/i }); expect(screen.getByText(/Count: 0/i)).toBeInTheDocument(); fireEvent.click(button); // æ¨¡æ‹Ÿç‚¹å‡» expect(screen.getByText(/Count: 1/i)).toBeInTheDocument(); }); // æµ‹è¯• props çš„ä¼ é€’ test(\u0026#39;renders custom greeting based on prop\u0026#39;, () =\u0026gt; { render(\u0026lt;MyComponent greeting=\u0026#34;Hi there!\u0026#34; /\u0026gt;); expect(screen.getByText(/Hi there!/i)).toBeInTheDocument(); }); // æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚çš„æµ‹è¯•ï¼ˆå¦‚æœç»„ä»¶æœ‰æ•°æ®è·å–ï¼‰ test(\u0026#39;fetches data and displays it\u0026#39;, async () =\u0026gt; { // æ¨¡æ‹Ÿ fetch API jest.spyOn(global, \u0026#39;fetch\u0026#39;).mockImplementation(() =\u0026gt; Promise.resolve({ ok: true, json: () =\u0026gt; Promise.resolve({ title: \u0026#39;Test Data\u0026#39; }), }) ); render(\u0026lt;MyComponent /\u0026gt;); expect(screen.getByText(/Loading.../i)).toBeInTheDocument(); // ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ await screen.findByText(/Title: Test Data/i); expect(screen.queryByText(/Loading.../i)).not.toBeInTheDocument(); global.fetch.mockRestore(); // æ¢å¤åŸå§‹ fetch }); }); // MyComponent.js (ç¤ºä¾‹å¾…æµ‹è¯•ç»„ä»¶) import React, { useState, useEffect } from \u0026#39;react\u0026#39;; function MyComponent({ greeting = \u0026#34;Hello, World!\u0026#34; }) { const [count, setCount] = useState(0); const [data, setData] = useState(null); const [loading, setLoading] = useState(true); useEffect(() =\u0026gt; { const fetchData = async () =\u0026gt; { setLoading(true); const res = await fetch(\u0026#39;/api/data\u0026#39;); const json = await res.json(); setData(json); setLoading(false); }; fetchData(); }, []); return ( \u0026lt;div\u0026gt; \u0026lt;h1\u0026gt;{greeting}\u0026lt;/h1\u0026gt; \u0026lt;p\u0026gt;Count: {count}\u0026lt;/p\u0026gt; \u0026lt;button onClick={() =\u0026gt; setCount(count + 1)}\u0026gt;Increment\u0026lt;/button\u0026gt; {loading ? \u0026lt;p\u0026gt;Loading...\u0026lt;/p\u0026gt; : data \u0026amp;\u0026amp; \u0026lt;p\u0026gt;Title: {data.title}\u0026lt;/p\u0026gt;} \u0026lt;/div\u0026gt; ); } export default MyComponent; å…³é”®ç‚¹ï¼š\nrenderï¼š æ¸²æŸ“ç»„ä»¶åˆ°è™šæ‹Ÿ DOMã€‚ screenï¼š æŸ¥è¯¢ DOM èŠ‚ç‚¹ï¼Œæ¨èä½¿ç”¨ç”¨æˆ·å¯è§çš„æŸ¥è¯¢æ–¹å¼ï¼ˆå¦‚ getByText, getByRoleï¼‰ã€‚ fireEventï¼š æ¨¡æ‹Ÿç”¨æˆ·äº‹ä»¶ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ã€‚ expect(...).toBeInTheDocument()ï¼š æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨äº DOM ä¸­ã€‚ å¼‚æ­¥æµ‹è¯•ï¼š ä½¿ç”¨ async/await å’Œ findBy* æŸ¥è¯¢ï¼ˆfindByText, findByRoleï¼‰ï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ç­‰å¾…å…ƒç´ å‡ºç°ã€‚ æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼š ä½¿ç”¨ jest.mock æˆ– jest.spyOnã€‚ jestã€react-testing-library ç”¨è¿‡å—ï¼Ÿ\r#\ræ˜¯çš„ï¼Œæˆ‘ç”¨è¿‡ Jest å’Œ React Testing Library (RTL)ï¼Œå®ƒä»¬æ˜¯æˆ‘åœ¨ React é¡¹ç›®ä¸­è¿›è¡Œå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•çš„ä¸»è¦å·¥å…·ã€‚\nJestï¼š\nè§’è‰²ï¼š å®ƒæ˜¯ä¸€ä¸ªJavaScript æµ‹è¯•è¿è¡Œå™¨ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ–­è¨€åº“ï¼ˆexpect APIï¼‰ã€æ¨¡æ‹Ÿæ¡†æ¶ (jest.mock, jest.spyOn)ã€‚ æ ¸å¿ƒç‰¹ç‚¹ï¼š é›¶é…ç½®ï¼š å¯¹äºå¤§å¤šæ•° React é¡¹ç›®ï¼ŒJest å¼€ç®±å³ç”¨ï¼Œæ— éœ€å¤æ‚é…ç½®ã€‚ å¿«ç…§æµ‹è¯•ï¼š å¯ä»¥æ–¹ä¾¿åœ°å¯¹æ¯” UI å¿«ç…§ï¼Œæ£€æµ‹æ„å¤–çš„ UI å˜åŒ–ã€‚ å¼ºå¤§çš„æ¨¡æ‹Ÿï¼š è½»æ¾æ¨¡æ‹Ÿæ¨¡å—ã€å‡½æ•°å’Œå®šæ—¶å™¨ã€‚ ä»£ç è¦†ç›–ç‡æŠ¥å‘Šï¼š æä¾›è¯¦ç»†çš„æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šã€‚ ç”¨æ³•ï¼š æˆ‘ç”¨ Jest æ¥ç»„ç»‡æµ‹è¯•å¥—ä»¶ (describe)ã€å®šä¹‰æµ‹è¯•ç”¨ä¾‹ (test/it)ã€ç¼–å†™æ–­è¨€ (expect) å’Œè¿›è¡Œæ¨¡æ‹Ÿã€‚ React Testing Library (RTL)ï¼š\nè§’è‰²ï¼š å®ƒæ˜¯ä¸€ä¸ªæ¸²æŸ“åº“ï¼Œç”¨äºæ¸²æŸ“ React ç»„ä»¶å¹¶æä¾›å·¥å…·æ¥æŸ¥è¯¢å’Œä¸è¿™äº›ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚ æ ¸å¿ƒç†å¿µï¼š â€œè¶Šåƒç”¨æˆ·ä½¿ç”¨ä½ çš„è½¯ä»¶ï¼Œä½ çš„æµ‹è¯•å°±è¶Šæœ‰ä¿¡å¿ƒã€‚â€ å®ƒé¼“åŠ±æˆ‘ä»¬ä»ç”¨æˆ·çš„è§’åº¦æ¥æµ‹è¯•ç»„ä»¶ï¼Œè€Œä¸æ˜¯å…³æ³¨å†…éƒ¨å®ç°ã€‚ æ ¸å¿ƒç‰¹ç‚¹ï¼š å…³æ³¨ç”¨æˆ·è¡Œä¸ºï¼š ä¼˜å…ˆæä¾›åŸºäºå¯è®¿é—®æ€§ï¼ˆAccessibilityï¼‰çš„æŸ¥è¯¢æ–¹æ³•ï¼ˆgetByRole, getByLabelText, getByText ç­‰ï¼‰ï¼Œæ¨¡æ‹Ÿç”¨æˆ·å¦‚ä½•ä¸é¡µé¢äº’åŠ¨ã€‚ ä¸å…³æ³¨å®ç°ç»†èŠ‚ï¼š é¼“åŠ±æµ‹è¯•ç»„ä»¶çš„æœ€ç»ˆæ¸²æŸ“ç»“æœå’Œè¡Œä¸ºï¼Œè€Œä¸æ˜¯å†…éƒ¨çŠ¶æ€æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ æ›´æ¥è¿‘çœŸå®æµè§ˆå™¨ç¯å¢ƒï¼š æ¸²æŸ“ç»„ä»¶åˆ°ä¸€ä¸ªè½»é‡çº§çš„ DOM ç¯å¢ƒä¸­ã€‚ ç”¨æ³•ï¼š æˆ‘ç”¨ render å‡½æ•°æ¥æ¸²æŸ“ç»„ä»¶ï¼Œç”¨ screen å¯¹è±¡ä¸Šçš„æŸ¥è¯¢æ–¹æ³•æ¥è·å– DOM å…ƒç´ ï¼Œç”¨ fireEvent æ¥æ¨¡æ‹Ÿç”¨æˆ·äº‹ä»¶ã€‚ æˆ‘çš„å®è·µï¼š æˆ‘é€šå¸¸ä¼šç»“åˆ Jest å’Œ RTL æ¥å¯¹æˆ‘çš„ React ç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚\næˆ‘ä¼šä¸ºæ¯ä¸ªæ ¸å¿ƒä¸šåŠ¡ç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿å…¶åœ¨ä¸åŒ props å’Œ state ä¸‹çš„æ¸²æŸ“æ­£ç¡®æ€§ï¼Œä»¥åŠç”¨æˆ·äº¤äº’ï¼ˆç‚¹å‡»ã€è¾“å…¥ï¼‰çš„é¢„æœŸè¡Œä¸ºã€‚ å¯¹äºå¸¦æœ‰å¼‚æ­¥æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ï¼‰çš„ç»„ä»¶ï¼Œæˆ‘ä¼šä½¿ç”¨ Jest æ¨¡æ‹Ÿ fetch æˆ– axiosï¼Œç„¶åä½¿ç”¨ RTL çš„ findBy æŸ¥è¯¢ç­‰å¾…å¼‚æ­¥ UI æ›´æ–°ã€‚ æˆ‘ä¼šç¡®ä¿å…³é”®ç»„ä»¶çš„æµ‹è¯•è¦†ç›–ç‡ï¼Œå¹¶é€šè¿‡ CI/CD æµæ°´çº¿è‡ªåŠ¨åŒ–è¿è¡Œæµ‹è¯•ã€‚ ç”¨ä»€ä¹ˆå·¥å…·è°ƒè¯• React åº”ç”¨ï¼Ÿ\r#\ræˆ‘ä¸»è¦ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¥è°ƒè¯• React åº”ç”¨ï¼š\nReact DevTools (æµè§ˆå™¨æ‰©å±•)ï¼š\næ ¸å¿ƒè°ƒè¯•åˆ©å™¨ã€‚ å®ƒæ˜¯ Chrome/Firefox çš„æµè§ˆå™¨æ‰©å±•ã€‚ åŠŸèƒ½ï¼š Components Tabï¼š æŸ¥çœ‹ç»„ä»¶æ ‘ã€æ£€æŸ¥ç»„ä»¶çš„ propsã€stateã€Contextã€‚å¯ä»¥å®æ—¶ä¿®æ”¹ props å’Œ state æ¥è§‚å¯Ÿ UI å˜åŒ–ã€‚ Profiler Tabï¼š è®°å½•ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ï¼Œåˆ†ææ¸²æŸ“æ€§èƒ½ï¼Œæ‰¾å‡ºä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“æˆ–æ€§èƒ½ç“¶é¢ˆã€‚ Hooks æ£€æŸ¥ï¼š å¯ä»¥æŸ¥çœ‹ Hook çš„å†…éƒ¨å€¼ï¼ˆå¦‚ useState çš„å€¼ã€useRef.current çš„å€¼ï¼‰ã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ£€æŸ¥ç»„ä»¶çŠ¶æ€ã€å®šä½ props ä¼ é€’é”™è¯¯ã€åˆ†ææ¸²æŸ“æ€§èƒ½ã€‚ æµè§ˆå™¨å¼€å‘è€…å·¥å…· (DevTools - Console, Network, Elements)ï¼š\nConsoleï¼š æŸ¥çœ‹ console.log è¾“å‡ºã€é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯ã€‚è¿™æ˜¯æ’æŸ¥ JavaScript è¿è¡Œæ—¶é”™è¯¯æœ€ç›´æ¥çš„æ–¹å¼ã€‚ Networkï¼š ç›‘æ§æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼ˆAPI è¯·æ±‚ã€å›¾ç‰‡ã€è„šæœ¬åŠ è½½ï¼‰ï¼Œæ£€æŸ¥è¯·æ±‚å¤´ã€å“åº”ä½“ã€çŠ¶æ€ç ã€åŠ è½½æ—¶é—´ç­‰ã€‚å¯¹äºæ’æŸ¥æ¥å£é—®é¢˜ã€è·¨åŸŸé—®é¢˜ã€åŠ è½½æ€§èƒ½é—®é¢˜è‡³å…³é‡è¦ã€‚ Elementsï¼š æ£€æŸ¥å’Œä¿®æ”¹é¡µé¢çš„çœŸå® DOM ç»“æ„å’Œæ ·å¼ï¼ŒæŸ¥çœ‹å…ƒç´ è®¡ç®—æ ·å¼ã€å¸ƒå±€ç­‰ã€‚ Sourcesï¼š è®¾ç½®æ–­ç‚¹ã€å•æ­¥è°ƒè¯• JavaScript ä»£ç ï¼ŒæŸ¥çœ‹å˜é‡å€¼ã€è°ƒç”¨å †æ ˆã€‚ VS Code è°ƒè¯•å™¨ï¼š\nåŠŸèƒ½ï¼š å¦‚æœæ˜¯åœ¨ VS Code ä¸­å¼€å‘ï¼Œå¯ä»¥é…ç½®å†…ç½®çš„ JavaScript è°ƒè¯•å™¨ï¼Œç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­è®¾ç½®æ–­ç‚¹ï¼Œå•æ­¥æ‰§è¡Œä»£ç ï¼ŒæŸ¥çœ‹å˜é‡ï¼Œæ¯”æµè§ˆå™¨ DevTools æ›´æ–¹ä¾¿ã€‚ ä½¿ç”¨åœºæ™¯ï¼š è°ƒè¯•å¤æ‚çš„ JavaScript é€»è¾‘ï¼Œç‰¹åˆ«æ˜¯å½“é—®é¢˜ä¸æ˜¯ç›´æ¥å‘ç”Ÿåœ¨ React æ¸²æŸ“å±‚æ—¶ã€‚ Redux DevTools (å¦‚æœä½¿ç”¨ Redux)ï¼š\nåŠŸèƒ½ï¼š å¼ºå¤§çš„ Redux ä¸“å±è°ƒè¯•å·¥å…·ï¼Œå¯ä»¥æ—¶é—´æ—…è¡Œè°ƒè¯•ï¼ˆå›æº¯ Action å’Œ State çš„å˜åŒ–ï¼‰ã€æŸ¥çœ‹æ¯ä¸ª Action çš„è¯¦æƒ…ã€State çš„å‰åå¯¹æ¯”ã€ç”šè‡³æ´¾å‘ Actionã€‚ ä½¿ç”¨åœºæ™¯ï¼š æ’æŸ¥ Redux çŠ¶æ€ç®¡ç†é—®é¢˜ï¼Œç†è§£æ•°æ®æµï¼Œè°ƒè¯•å¤æ‚çš„å¼‚æ­¥ Actionã€‚ è‡ªå®šä¹‰æ—¥å¿— (console.log / console.warn / console.error)ï¼š\nåœ¨å¼€å‘é˜¶æ®µï¼Œåˆç†åœ°æ’å…¥ console.log æ˜¯å¿«é€ŸæŸ¥çœ‹å˜é‡å€¼å’Œä»£ç æ‰§è¡Œæµç¨‹çš„æœ‰æ•ˆæ–¹æ³•ã€‚ è°ƒè¯•ç­–ç•¥ï¼š æˆ‘é€šå¸¸ä¼šä» React DevTools å¼€å§‹ï¼Œæ£€æŸ¥ç»„ä»¶çš„ props å’Œ state æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¦‚æœå‘ç°æ•°æ®æœ‰é—®é¢˜ï¼Œå†ç»“åˆç½‘ç»œé¢æ¿æ£€æŸ¥ API è¯·æ±‚æˆ–æ§åˆ¶å°æŸ¥çœ‹ JavaScript é”™è¯¯ã€‚å¯¹äºæ›´æ·±å±‚æ¬¡çš„é€»è¾‘é”™è¯¯ï¼Œä¼šåˆ©ç”¨ VS Code çš„è°ƒè¯•å™¨æˆ–åœ¨å…³é”®ä»£ç å¤„æ·»åŠ  console.log è¿›è¡Œç»†è‡´æ’æŸ¥ã€‚\nWebpack / Vite é…ç½®ä½ äº†è§£å—ï¼Ÿ\r#\ræˆ‘äº†è§£ Webpack å’Œ Viteï¼Œå¹¶åœ¨é¡¹ç›®ä¸­å®é™…é…ç½®å’Œä½¿ç”¨è¿‡ã€‚\nWebpack (ä¼ ç»Ÿæ‰“åŒ…å·¥å…·)\r#\ræ ¸å¿ƒæ¦‚å¿µï¼š\nEntry (å…¥å£)ï¼š æŒ‡ç¤º Webpack ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾ã€‚ Output (è¾“å‡º)ï¼š å‘Šè¯‰ Webpack åœ¨å“ªé‡Œè¾“å‡ºæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œä»¥åŠå¦‚ä½•å‘½åã€‚ Loader (åŠ è½½å™¨)ï¼š Webpack è‡ªèº«åªèƒ½ç†è§£ JavaScript å’Œ JSON æ–‡ä»¶ã€‚Loader å…è®¸ Webpack å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚ CSSã€å›¾ç‰‡ã€å­—ä½“ã€TypeScriptã€JSXï¼‰ï¼Œå°†å®ƒä»¬è½¬æ¢æˆæœ‰æ•ˆçš„æ¨¡å—ã€‚ å¸¸è§ Loaderï¼š babel-loader (å¤„ç† ES6+/JSX)ã€css-loader (è§£æ CSS)ã€style-loader (å°† CSS æ³¨å…¥ DOM)ã€sass-loader (å¤„ç† Sass)ã€file-loader/url-loader (å¤„ç†æ–‡ä»¶)ã€‚ Plugin (æ’ä»¶)ï¼š æ’ä»¶ç”¨äºæ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡ï¼Œä¾‹å¦‚æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€æ³¨å…¥ç¯å¢ƒå˜é‡ç­‰ã€‚å®ƒä»¬å¯ä»¥æ‹¦æˆª Webpack æ„å»ºæµç¨‹ä¸­çš„å„ç§äº‹ä»¶ã€‚ å¸¸è§ Pluginï¼š HtmlWebpackPlugin (ç”Ÿæˆ HTML æ–‡ä»¶å¹¶æ³¨å…¥æ‰“åŒ…åçš„ JS/CSS)ã€MiniCssExtractPlugin (æå– CSS åˆ°å•ç‹¬æ–‡ä»¶)ã€CleanWebpackPlugin (æ¸…ç†è¾“å‡ºç›®å½•)ã€DefinePlugin (å®šä¹‰å…¨å±€å¸¸é‡)ã€‚ Mode (æ¨¡å¼)ï¼š development (å¼€å‘æ¨¡å¼ï¼Œä¼˜åŒ–æ„å»ºé€Ÿåº¦ï¼Œæä¾›è°ƒè¯•ä¿¡æ¯) æˆ– production (ç”Ÿäº§æ¨¡å¼ï¼Œä¼˜åŒ–è¾“å‡ºä½“ç§¯å’Œè¿è¡Œæ€§èƒ½)ã€‚ å¸¸è§é…ç½®ï¼š\næ¨¡å—è§£æ (resolve)ï¼š é…ç½®æ¨¡å—å¦‚ä½•è¢«è§£æï¼Œä¾‹å¦‚è®¾ç½®åˆ«å (alias) ç®€åŒ–å¯¼å…¥è·¯å¾„ã€‚ ä¼˜åŒ– (optimization)ï¼š splitChunksï¼š ä»£ç åˆ†å‰²ï¼Œå°†å…¬å…±ä¾èµ–æˆ–ç¬¬ä¸‰æ–¹åº“æå–åˆ°å•ç‹¬çš„ chunkï¼Œåˆ©ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚ minimizerï¼š å‹ç¼©ä»£ç ï¼ˆå¦‚ TerserWebpackPlugin å‹ç¼© JSï¼ŒCssMinimizerWebpackPlugin å‹ç¼© CSSï¼‰ã€‚ DevServerï¼š å¼€å‘æœåŠ¡å™¨é…ç½®ï¼Œå®ç°çƒ­æ¨¡å—æ›¿æ¢ (HMR)ã€ä»£ç† (proxy)ã€‚ æˆ‘çš„äº†è§£å’Œå®è·µï¼š\næˆ‘ç†Ÿæ‚‰ webpack.config.js çš„åŸºæœ¬ç»“æ„å’Œå¸¸ç”¨é…ç½®é¡¹ã€‚ åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘é…ç½®è¿‡ babel-loader æ¥ç¼–è¯‘ React/JSX å’Œ ESNext è¯­æ³•ã€‚ é…ç½®è¿‡ css-loader å’Œ style-loader æ¥å¤„ç†æ ·å¼æ–‡ä»¶ï¼Œä¹Ÿç”¨ MiniCssExtractPlugin æå–è¿‡ CSSã€‚ åˆ©ç”¨ HtmlWebpackPlugin è‡ªåŠ¨åŒ–ç”Ÿæˆ HTML æ–‡ä»¶ã€‚ åˆ©ç”¨ splitChunks ä¼˜åŒ–åŒ…ä½“ç§¯å’Œç¼“å­˜ç­–ç•¥ã€‚ é…ç½® webpack-dev-server å®ç°çƒ­æ›´æ–°å’Œ API ä»£ç†ã€‚ Vite (æ–°ä¸€ä»£æ„å»ºå·¥å…·)\r#\ræ ¸å¿ƒç†å¿µï¼š åŸºäºæµè§ˆå™¨ ESM (ES Modules) çš„å¼€å‘æ¨¡å¼ å’Œ Rollup ç”Ÿäº§æ‰“åŒ…ã€‚\nå¼€å‘æ¨¡å¼ (Dev Server)ï¼š\næŒ‰éœ€ç¼–è¯‘ï¼š Vite åœ¨å¼€å‘æ¨¡å¼ä¸‹ä¸éœ€è¦æ‰“åŒ…æ•´ä¸ªåº”ç”¨ã€‚å®ƒåˆ©ç”¨æµè§ˆå™¨å¯¹ ES Modules çš„åŸç”Ÿæ”¯æŒï¼Œåªåœ¨æµè§ˆå™¨è¯·æ±‚æŸä¸ªæ¨¡å—æ—¶æ‰å¯¹å…¶è¿›è¡Œè½¬æ¢å’Œæä¾›ã€‚ å†·å¯åŠ¨æå¿«ï¼š è¿™ç§æŒ‰éœ€ç¼–è¯‘çš„æ¨¡å¼ä½¿å¾— Vite çš„å¼€å‘æœåŠ¡å™¨å¯åŠ¨é€Ÿåº¦æå¿«ã€‚ çƒ­æ¨¡å—æ›¿æ¢ (HMR) æå¿«ï¼š HMR çš„æ›´æ–°åªä½œç”¨äºå‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼Œå¹¶é€šè¿‡ WebSocket å°†æ›´æ–°æ¨é€åˆ°æµè§ˆå™¨ï¼Œè€Œä¸æ˜¯é‡æ–°æ„å»ºæ•´ä¸ªæ¨¡å—å›¾ï¼Œä½¿å¾— HMR é€Ÿåº¦é£å¿«ã€‚ ç”Ÿäº§æ‰“åŒ…ï¼š\nVite ä½¿ç”¨ Rollup è¿›è¡Œç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…ã€‚Rollup åœ¨æ‰“åŒ… JS åº“æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œå…¶ Tree Shaking èƒ½åŠ›å¼ºã€‚ ç‰¹ç‚¹ï¼š\nå¿«ï¼š å¼€å‘ä½“éªŒçš„æ ¸å¿ƒä¼˜åŠ¿ã€‚ å¼€ç®±å³ç”¨ï¼š å¯¹äºå¤§å¤šæ•°é¡¹ç›®ï¼ŒVite å‡ ä¹æ˜¯é›¶é…ç½®ã€‚ æ’ä»¶åŒ–ï¼š åŸºäº Rollup æ’ä»¶æ¥å£ï¼Œç¤¾åŒºæä¾›äº†ä¸°å¯Œçš„æ’ä»¶ã€‚ TypeScript / JSX / CSS æ”¯æŒï¼š å†…ç½®æ”¯æŒï¼Œæ— éœ€é¢å¤–é…ç½® Loaderã€‚ æˆ‘çš„äº†è§£å’Œå®è·µï¼š\næˆ‘è®¤è¯†åˆ° Vite è§£å†³äº† Webpack åœ¨å¤§å‹é¡¹ç›®å†·å¯åŠ¨æ…¢ã€HMR æ›´æ–°æ…¢çš„ç—›ç‚¹ã€‚ æˆ‘äº†è§£ Vite é€šè¿‡ vite.config.js è¿›è¡Œé…ç½®ï¼Œç›¸æ¯” Webpack ç®€æ´å¾—å¤šã€‚ æˆ‘ä½¿ç”¨è¿‡ Vite çš„ proxy é…ç½®è¿›è¡Œ API è½¬å‘ã€‚ å¯¹äºæ–°é¡¹ç›®ï¼Œæˆ‘æ›´å€¾å‘äºé€‰æ‹© Viteï¼Œå› ä¸ºå®ƒèƒ½æä¾›æ›´æµç•…çš„å¼€å‘ä½“éªŒã€‚ æ€»ç»“ï¼š Webpack å¼ºå¤§ä¸”çµæ´»ï¼Œé€‚åˆå„ç§å¤æ‚çš„åœºæ™¯ï¼Œä½†é…ç½®ç›¸å¯¹ç¹çï¼Œå¼€å‘æ¨¡å¼é€Ÿåº¦è¾ƒæ…¢ã€‚Vite åˆ™æ˜¯åèµ·ä¹‹ç§€ï¼Œä»¥å…¶æå¿«çš„å¼€å‘æ¨¡å¼å’Œæç®€é…ç½®èµ¢å¾—äº†å¼€å‘è€…é’çï¼Œå°¤å…¶é€‚åˆç°ä»£å‰ç«¯é¡¹ç›®ã€‚\nğŸ› ï¸ é¡¹ç›®å®æˆ˜ç»éªŒ\r#\ræè¿°ä½ åšè¿‡çš„ä¸€ä¸ªå¤æ‚ React é¡¹ç›®ï¼Ÿ\r#\rï¼ˆè¿™é‡Œéœ€è¦ä½ ç»“åˆä½ ç®€å†ä¸­â€œæ±‡ä¸°è½¯ä»¶å¼€å‘ï¼ˆå¹¿ä¸œï¼‰æœ‰é™å…¬å¸ä¸Šæµ·åˆ†å…¬å¸â€çš„ç»éªŒæ¥ç»„ç»‡ç­”æ¡ˆï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„ç¤ºä¾‹æ¡†æ¶ï¼Œä½ å¡«å……å…·ä½“ç»†èŠ‚ï¼‰\né¡¹ç›®åç§°ï¼š \u0026ldquo;æˆ‘ä»¬ä¹‹å‰åœ¨æ±‡ä¸°å‚ä¸è®¾è®¡å¹¶å®ç°äº†ä¸€ä¸ªåŸºäº Java Spring Boot å’Œ React çš„äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°ï¼Œç”¨äºæ”¯æ’‘é“¶è¡Œå†…éƒ¨çš„æŸé¡¹æ ¸å¿ƒä¸šåŠ¡ï¼ˆä¾‹å¦‚ï¼šé«˜é¢‘äº¤æ˜“æ•°æ®å¤„ç† / é‡‘èäº§å“é£é™©è¯„ä¼° / å®¢æˆ·æ•°æ®ç®¡ç†å¹³å°ç­‰ï¼‰ã€‚\u0026rdquo;\né¡¹ç›®èƒŒæ™¯å’Œå¤æ‚æ€§ï¼š\né«˜å¹¶å‘/é«˜å¯ç”¨ï¼š è¿™æ˜¯ä¸€ä¸ªå…³é”®ä¸šåŠ¡ç³»ç»Ÿï¼Œè¦æ±‚èƒ½å¤Ÿæ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼Œä¸”ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ã€‚è¿™æ„å‘³ç€å‰ç«¯ç»„ä»¶è¦èƒ½é«˜æ•ˆæ¸²æŸ“ï¼ŒåŒæ—¶åç«¯æœåŠ¡è¦èƒ½å¿«é€Ÿå“åº”ï¼Œæ•´ä¸ªç³»ç»Ÿè¦å…·å¤‡æé«˜çš„å®¹é”™èƒ½åŠ›ã€‚ æ•°æ®é‡å¤§ï¼š éœ€è¦å¤„ç†å’Œå±•ç¤ºå¤§é‡å®æ—¶æˆ–å‡†å®æ—¶æ•°æ®ï¼Œæ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆã€‚ å®‰å…¨æ€§/åˆè§„æ€§ï¼š ä½œä¸ºé“¶è¡Œç³»ç»Ÿï¼Œå¯¹æ•°æ®åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒã€å®¡è®¡æ—¥å¿—æœ‰ä¸¥æ ¼çš„å®‰å…¨åˆè§„è¦æ±‚ã€‚ å¾®æœåŠ¡æ¶æ„ï¼š æ•´ä¸ªç³»ç»Ÿæ˜¯åŸºäºäº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„ï¼Œå‰ç«¯éœ€è¦ä¸å¤šä¸ªåç«¯æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œå¹¶å¤„ç†å¤æ‚çš„è·¨æœåŠ¡æ•°æ®æµã€‚ å‰åç«¯ååŒï¼š ä½œä¸ºä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæˆ‘ä¸ä»…è´Ÿè´£å‰ç«¯ï¼Œä¹Ÿæ·±å…¥å‚ä¸äº†åç«¯å’Œéƒ¨ç½²è¿ç»´ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­æ‰®æ¼”çš„è§’è‰²å’ŒèŒè´£ï¼š\nå‰ç«¯æ–¹é¢ï¼š è´Ÿè´£æ ¸å¿ƒä¸šåŠ¡æ¨¡å—ï¼ˆä¾‹å¦‚ï¼šäº¤æ˜“è¯¦æƒ…å±•ç¤ºã€é£é™©æŒ‡æ ‡å›¾è¡¨ã€ç”¨æˆ·é…ç½®ç•Œé¢ï¼‰çš„ React ç»„ä»¶è®¾è®¡å’Œå¼€å‘ã€‚ é’ˆå¯¹å¤§é‡æ•°æ®åˆ—è¡¨ï¼Œå¼•å…¥äº†**è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆå¦‚ react-windowï¼‰**æ¥æå‡æ¸²æŸ“æ€§èƒ½ã€‚ å®ç°äº†å¤æ‚çš„è¡¨å•é€»è¾‘å’Œæ ¡éªŒï¼ˆå¯èƒ½ä½¿ç”¨äº† React Hook Formï¼‰ï¼Œç¡®ä¿æ•°æ®è¾“å…¥çš„å‡†ç¡®æ€§ã€‚ å°è£…äº†é€šç”¨çš„æ•°æ®è¯·æ±‚ Hookï¼Œç»Ÿä¸€å¤„ç†åŠ è½½ã€é”™è¯¯å’Œå–æ¶ˆè¯·æ±‚ï¼Œå¹¶å®ç°äº†æ¥å£ç¼“å­˜å’Œåˆ†é¡µåŠ è½½ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ å‚ä¸äº†å‰ç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œå¦‚ç»„ä»¶æ‡’åŠ è½½å’Œä»£ç åˆ†å‰²ï¼Œå‡å°‘åˆå§‹åŠ è½½æ—¶é—´ã€‚ åç«¯æ–¹é¢ï¼š è®¾è®¡å’Œå®ç°äº†åŸºäº Spring Boot çš„å¾®æœåŠ¡ API æ¥å£ï¼Œè´Ÿè´£æ•°æ®å¤„ç†å’Œä¸šåŠ¡é€»è¾‘ã€‚ å‚ä¸äº†æ•°æ®åº“åˆ†ç‰‡å’Œåˆ†å¸ƒå¼äº‹åŠ¡çš„è®¾è®¡ä¸å®ç°ï¼Œä»¥åº”å¯¹é«˜å¹¶å‘åœºæ™¯ã€‚ åœ¨æ¶æ„ä¸­åµŒå…¥äº†åŠ å¯†ä¼ è¾“ã€ç»†ç²’åº¦æƒé™æ ¡éªŒï¼ˆRBACï¼‰å’Œå®¡è®¡æ—¥å¿—ï¼Œç¡®ä¿å®‰å…¨åˆè§„ã€‚ DevOps/æ¶æ„æ–¹é¢ï¼š å‚ä¸äº†äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°çš„æ¶æ„è®¾è®¡å’Œé€‰å‹ï¼ˆKubernetes, Dockerï¼‰ã€‚ ååŠ©æ­å»ºå’Œä¼˜åŒ– CI/CD æµæ°´çº¿ï¼ˆGitLab CI/Jenkins, Terraform IaCï¼‰ï¼Œå®ç°äº†å¤šç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œæ˜¾è‘—æå‡äº†ç ”å‘å’Œå‘å¸ƒæ•ˆç‡ã€‚ ååŠ©æ­å»ºäº† Prometheus + Grafana ç›‘æ§å¹³å°ï¼Œå®ç°ç³»ç»Ÿå®æ—¶ç›‘æ§ã€å‘Šè­¦å’Œæ•…éšœå®šä½ã€‚ é¡¹ç›®æˆæœï¼ˆé‡åŒ–æ•°æ®ï¼‰ï¼š\næ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ã€‚ ç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ã€‚ å¹³å‡å“åº”æ—¶å»¶é™ä½ 50% ä»¥ä¸Šã€‚ æ•…éšœå®šä½æ•ˆç‡æå‡ 100%ã€‚ CI/CD æµæ°´çº¿æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Œå‘å¸ƒé¢‘ç‡æå‡æ•°å€ã€‚ é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼š (æŒ‘ä¸€ä¸ªæœ€å…¸å‹çš„æŒ‘æˆ˜æ¥å±•å¼€è¯´ï¼Œä¾‹å¦‚ï¼šé«˜å¹¶å‘ä¸‹çš„æ•°æ®ä¸€è‡´æ€§/æ€§èƒ½ä¼˜åŒ–)\næŒ‘æˆ˜ï¼š ä¾‹å¦‚ï¼Œåœ¨å¤„ç†é«˜å¹¶å‘äº¤æ˜“æ•°æ®æ—¶ï¼Œå¦‚ä½•ç¡®ä¿æ•°æ®åœ¨åˆ†å¸ƒå¼æ•°æ®åº“ï¼ˆåˆ†ç‰‡ï¼‰ä¸­çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œå¹¶ä¿è¯äº¤æ˜“çš„åŸå­æ€§ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼š æˆ‘ä»¬é‡‡ç”¨äº†åŸºäºæ¶ˆæ¯é˜Ÿåˆ—çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼ˆå¦‚ Kafkaï¼‰ã€‚äº¤æ˜“æ•°æ®é¦–å…ˆå†™å…¥ Kafkaï¼Œç„¶åç”±æ¶ˆè´¹è€…å¼‚æ­¥å¤„ç†å¹¶å†™å…¥åˆ°ä¸åŒçš„æ•°æ®åº“åˆ†ç‰‡ã€‚å¯¹äºæ ¸å¿ƒæµç¨‹ï¼Œæˆ‘ä»¬ç»“åˆäº†åˆ†å¸ƒå¼é”ï¼ˆåŸºäº Redisï¼‰æ¥é¿å…å¹¶å‘å†²çªã€‚åŒæ—¶ï¼Œä½¿ç”¨ @Transactional ç»“åˆ Spring Boot çš„äº‹åŠ¡ä¼ æ’­æœºåˆ¶æ¥æ§åˆ¶å•åº“äº‹åŠ¡ï¼Œå¯¹äºè·¨åº“äº‹åŠ¡ï¼Œåˆ™å€¾å‘äºé‡‡ç”¨æŸ”æ€§äº‹åŠ¡ï¼ˆå¦‚ TCC æˆ– Saga æ¨¡å¼ï¼‰ï¼Œç¡®ä¿åœ¨å¤æ‚ä¸šåŠ¡æµç¨‹ä¸­çš„æ•°æ®ä¸€è‡´æ€§ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­çš„æ€è€ƒå’Œè´¡çŒ®ï¼š\nä½œä¸ºé«˜çº§å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæˆ‘ä¸ä»…å…³æ³¨ä»£ç å®ç°ï¼Œä¹Ÿç§¯æå‚ä¸äº†æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨é€‰æ‹©çŠ¶æ€ç®¡ç†æ–¹æ¡ˆæ—¶ï¼Œæˆ‘ä¸»å¯¼äº†å¯¹ Redux Toolkit å’Œ react-query çš„è°ƒç ”å’Œå¼•å…¥ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®å±‚çš„ç®¡ç†æ•ˆç‡å’Œç»„ä»¶çš„å¼€å‘ä½“éªŒã€‚ æˆ‘æ³¨é‡ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼Œæ¨è¡Œäº†ä»£ç å®¡æŸ¥å’Œå•å…ƒæµ‹è¯•ï¼Œå¹¶ç§¯æç¼–å†™æŠ€æœ¯æ–‡æ¡£ã€‚ é¡¹ç›®ä¸­é‡åˆ°è¿‡å“ªäº›æ€§èƒ½é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³çš„ï¼Ÿ\r#\rï¼ˆç»“åˆä½ åœ¨æ±‡ä¸°çš„ç»éªŒï¼Œä»å‰ç«¯å’Œåç«¯æŒ‘1-2ä¸ªå…·ä½“ä¾‹å­ï¼‰\næˆ‘åœ¨å¤šä¸ªé¡¹ç›®ä¸­éƒ½é‡åˆ°è¿‡æ€§èƒ½é—®é¢˜ï¼Œè§£å†³è¿™äº›é—®é¢˜æ˜¯æå‡ç”¨æˆ·ä½“éªŒå’Œç³»ç»Ÿç¨³å®šæ€§çš„å…³é”®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªæˆ‘è®°å¿†æ·±åˆ»çš„ä¾‹å­ï¼š\næ¡ˆä¾‹ï¼šé•¿åˆ—è¡¨æ¸²æŸ“æ€§èƒ½é—®é¢˜\né—®é¢˜æè¿°ï¼š åœ¨ä¸€ä¸ªå±•ç¤ºå¤§é‡äº¤æ˜“æ˜ç»†ï¼ˆå¯èƒ½è¾¾åˆ°å‡ åƒç”šè‡³ä¸Šä¸‡æ¡è®°å½•ï¼‰çš„é¡µé¢ä¸­ï¼Œç”¨æˆ·åœ¨åŠ è½½æˆ–æ»šåŠ¨æ—¶ä¼šæ˜æ˜¾æ„Ÿè§‰åˆ°é¡µé¢å¡é¡¿ã€å“åº”è¿Ÿé’ã€‚åˆæ­¥åˆ†æå‘ç°ï¼Œé¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´å¾ˆé•¿ï¼Œå¹¶ä¸”æ»šåŠ¨æ—¶ CPU ä½¿ç”¨ç‡é£™å‡ã€‚ è¯Šæ–­è¿‡ç¨‹ï¼š é¦–å…ˆï¼Œä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆPerformance Tabï¼‰è¿›è¡Œæ€§èƒ½åˆ†æã€‚ å‘ç°å¤§é‡çš„è„šæœ¬æ‰§è¡Œæ—¶é—´å’Œå¸ƒå±€/é‡ç»˜æ—¶é—´ã€‚ React DevTools çš„ Profiler Tab æ˜¾ç¤ºï¼Œæ¯æ¬¡æ»šåŠ¨æˆ–æ•°æ®æ›´æ–°æ—¶ï¼Œæ•´ä¸ªåŒ…å«å¤§é‡åˆ—è¡¨é¡¹çš„çˆ¶ç»„ä»¶éƒ½åœ¨è¿›è¡Œä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œå¹¶ä¸”ç”Ÿæˆäº†å¤§é‡çš„ DOM èŠ‚ç‚¹ã€‚ åˆæ­¥åˆ¤æ–­ï¼š ä¸»è¦ç“¶é¢ˆåœ¨äºä¸€æ¬¡æ€§æ¸²æŸ“äº†è¿‡å¤šçš„ DOM èŠ‚ç‚¹ï¼Œä»¥åŠ React åœ¨å¤„ç†è¿™äº›èŠ‚ç‚¹æ—¶è¿›è¡Œäº†å¤§é‡çš„ Diff å’Œ DOM æ“ä½œã€‚ è§£å†³æ–¹æ¡ˆï¼š å¼•å…¥åˆ—è¡¨è™šæ‹ŸåŒ– (Virtualization)ï¼š å†³å®šä½¿ç”¨ react-window åº“ã€‚å®ƒåªæ¸²æŸ“ç”¨æˆ·å½“å‰å¯è§åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œå¹¶å¯¹ä¸å¯è§åŒºåŸŸçš„åˆ—è¡¨é¡¹è¿›è¡Œé«˜åº¦å ä½ã€‚ å°†æ•°æ®æºå’Œæ¸²æŸ“é€»è¾‘é€‚é… FixedSizeList æˆ– VariableSizeList ç»„ä»¶ã€‚ æ•ˆæœï¼š é¡µé¢ DOM èŠ‚ç‚¹æ•°é‡ä»ä¸Šä¸‡ä¸ªéª¤é™åˆ°å‡ åä¸ªï¼ˆå–å†³äºè§†å£å¤§å°ï¼‰ï¼Œæ»šåŠ¨æ€§èƒ½ç¬é—´æµç•…ï¼ŒCPU å ç”¨ç‡å¤§å¹…ä¸‹é™ã€‚ ä¼˜åŒ–æ•°æ®æºå’Œæ›´æ–°ç­–ç•¥ï¼š ç»“åˆåˆ†é¡µåŠ è½½ï¼š å¦‚æœæ˜¯æ— é™æ»šåŠ¨ï¼Œç¡®ä¿ä¸æ˜¯ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ•°æ®éƒ½åŠ è½½åˆ°å‰ç«¯ï¼Œè€Œæ˜¯æ ¹æ®æ»šåŠ¨ä½ç½®æ‡’åŠ è½½æ›´å¤šæ•°æ®ã€‚ æ•°æ®ä¸å¯å˜æ€§ï¼š ç¡®ä¿æ›´æ–°åˆ—è¡¨æ•°æ®æ—¶ï¼Œå§‹ç»ˆåˆ›å»ºæ–°çš„æ•°ç»„å¼•ç”¨ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼Œä»¥ä¾¿ React çš„ Diff ç®—æ³•èƒ½æ­£ç¡®è¿›è¡Œæµ…æ¯”è¾ƒã€‚ key çš„æ­£ç¡®ä½¿ç”¨ï¼š ç¡®ä¿æ¯ä¸ªåˆ—è¡¨é¡¹éƒ½æœ‰ä¸€ä¸ªç¨³å®šä¸”å”¯ä¸€çš„ keyï¼ˆé€šå¸¸æ˜¯åç«¯è¿”å›çš„å”¯ä¸€ IDï¼‰ï¼Œé¿å…è™šæ‹ŸåŒ–åº“å†…éƒ¨å›  key å˜åŒ–è€Œå¯¼è‡´çš„é”™è¯¯å¤ç”¨å’Œé‡æ–°æ¸²æŸ“ã€‚ æˆæœï¼š é¡µé¢é¦–æ¬¡åŠ è½½æ—¶é—´ç¼©çŸ­äº†çº¦ 60%ã€‚ æ»šåŠ¨æµç•…åº¦æ˜¾è‘—æå‡ï¼Œä»è‚‰çœ¼å¯è§çš„å¡é¡¿å˜ä¸ºå¹³æ»‘æ»šåŠ¨ã€‚ æµè§ˆå™¨ CPU å’Œå†…å­˜å ç”¨å¤§å¹…é™ä½ã€‚ ç”¨æˆ·ä½“éªŒå¾—åˆ°æå¤§æ”¹å–„ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°æµè§ˆå’Œåˆ†æå¤§é‡æ•°æ®ã€‚ å…¶ä»–å¯èƒ½é‡åˆ°çš„æ€§èƒ½é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼ˆå¯ä½œä¸ºå¤‡é€‰æ¡ˆä¾‹ï¼‰ï¼š\nåç«¯ API å“åº”æ…¢ï¼š æ£€æŸ¥åç«¯æ—¥å¿—ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ã€å¼•å…¥ Redis ç¼“å­˜ã€ä¼˜åŒ– SQLã€è¯»å†™åˆ†ç¦»ã€æ•°æ®åº“åˆ†ç‰‡ã€‚ ç½‘ç»œè¯·æ±‚è¿‡å¤š/è¿‡å¤§ï¼š æ¥å£åˆå¹¶ã€æ•°æ®å‹ç¼©ã€å›¾ç‰‡æ‡’åŠ è½½ã€CDN åŠ é€Ÿã€HTTP ç¼“å­˜ã€‚ ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼š ä½¿ç”¨ React.memo / useCallback / useMemoã€‚ JS é€»è¾‘è®¡ç®—è€—æ—¶ï¼š å°†å¤æ‚è®¡ç®—æ”¾å…¥ Web Workerã€æˆ–ä½¿ç”¨ useMemo è®°å¿†åŒ–ã€‚ ä½ æ˜¯å¦‚ä½•ç»„ç»‡ç»„ä»¶ç»“æ„å’Œæ¨¡å—çš„ï¼Ÿ\r#\ræˆ‘é€šå¸¸é‡‡ç”¨ä¸€ç§åŠŸèƒ½å¯¼å‘ï¼ˆæˆ–é¢†åŸŸé©±åŠ¨ï¼‰ä¸èŒè´£åˆ†ç¦»ç›¸ç»“åˆçš„ç»„ä»¶å’Œæ¨¡å—ç»„ç»‡æ–¹å¼ï¼Œä»¥æé«˜é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å’Œå¼€å‘æ•ˆç‡ã€‚\næ ¸å¿ƒæ€æƒ³ï¼š\né«˜å†…èšï¼Œä½è€¦åˆï¼š ç»„ä»¶å’Œæ¨¡å—å†…éƒ¨åŠŸèƒ½ç´§å¯†ç›¸å…³ï¼Œç›¸äº’ä¹‹é—´çš„ä¾èµ–å°½å¯èƒ½å°‘ã€‚ å¯è¯»æ€§ä¸å¯æŸ¥æ‰¾æ€§ï¼š ç›®å½•ç»“æ„æ¸…æ™°ï¼Œæ˜“äºå›¢é˜Ÿæˆå‘˜ç†è§£å’Œæ‰¾åˆ°ç›¸å…³ä»£ç ã€‚ å¯å¤ç”¨æ€§ï¼š å°½å¯èƒ½æå–é€šç”¨ç»„ä»¶å’Œé€»è¾‘ã€‚ å…·ä½“çš„ç»„ç»‡ç»“æ„ï¼ˆç¤ºä¾‹ï¼‰ï¼š\nsrc/\râ”œâ”€â”€ assets/ # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ã€å…¨å±€æ ·å¼ï¼‰\râ”‚ â”œâ”€â”€ images/\râ”‚ â”œâ”€â”€ fonts/\râ”‚ â””â”€â”€ styles/\râ”‚ â”œâ”€â”€ _variables.scss # Sass å˜é‡\râ”‚ â”œâ”€â”€ _mixins.scss # Sass æ··å…¥\râ”‚ â””â”€â”€ global.scss # å…¨å±€æ ·å¼\râ”‚\râ”œâ”€â”€ components/ # é€šç”¨/UIç»„ä»¶ (Dumb Components)\râ”‚ â”œâ”€â”€ Button/\râ”‚ â”‚ â”œâ”€â”€ Button.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â”œâ”€â”€ Modal/\râ”‚ â”‚ â”œâ”€â”€ Modal.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â”œâ”€â”€ Table/\râ”‚ â”‚ â”œâ”€â”€ Table.jsx\râ”‚ â”‚ â””â”€â”€ index.js\râ”‚ â””â”€â”€ LoadingSpinner/\râ”‚ â””â”€â”€ LoadingSpinner.jsx\râ”‚\râ”œâ”€â”€ features/ # ä¸šåŠ¡åŠŸèƒ½æ¨¡å— (Smart Components / Containers) - æŒ‰ä¸šåŠ¡é¢†åŸŸåˆ’åˆ†\râ”‚ â”œâ”€â”€ UserManagement/ # ç”¨æˆ·ç®¡ç†æ¨¡å—\râ”‚ â”‚ â”œâ”€â”€ components/ # è¯¥æ¨¡å—å†…éƒ¨çš„UIç»„ä»¶\râ”‚ â”‚ â”‚ â”œâ”€â”€ UserListTable.jsx\râ”‚ â”‚ â”‚ â””â”€â”€ UserForm.jsx\râ”‚ â”‚ â”œâ”€â”€ hooks/ # è¯¥æ¨¡å—å†…éƒ¨çš„è‡ªå®šä¹‰Hook\râ”‚ â”‚ â”‚ â””â”€â”€ useUsersData.js\râ”‚ â”‚ â”œâ”€â”€ pages/ # è·¯ç”±é¡µé¢ç»„ä»¶\râ”‚ â”‚ â”‚ â””â”€â”€ UserListPage.jsx\râ”‚ â”‚ â”œâ”€â”€ services/ # æ¨¡å—ç›¸å…³çš„APIæœåŠ¡\râ”‚ â”‚ â”‚ â””â”€â”€ userService.js\râ”‚ â”‚ â””â”€â”€ index.js # å¯¼å‡ºæ¨¡å—å…¬å…±æ¥å£\râ”‚ â”œâ”€â”€ ProductCatalog/ # äº§å“ç›®å½•æ¨¡å—\râ”‚ â”‚ â””â”€â”€ ...\râ”‚ â””â”€â”€ OrderProcessing/ # è®¢å•å¤„ç†æ¨¡å—\râ”‚ â””â”€â”€ ...\râ”‚\râ”œâ”€â”€ hooks/ # é€šç”¨è‡ªå®šä¹‰Hook (è·¨æ¨¡å—å¤ç”¨)\râ”‚ â”œâ”€â”€ useDebounce.js\râ”‚ â”œâ”€â”€ useLocalStorage.js\râ”‚ â””â”€â”€ useClickOutside.js\râ”‚\râ”œâ”€â”€ services/ # å…¨å±€æˆ–é€šç”¨çš„ API æœåŠ¡\râ”‚ â”œâ”€â”€ authService.js\râ”‚ â””â”€â”€ apiClient.js # å°è£… Axios æˆ– Fetch\râ”‚\râ”œâ”€â”€ store/ # å…¨å±€çŠ¶æ€ç®¡ç† (Redux/Zustandç­‰)\râ”‚ â”œâ”€â”€ index.js # Store é…ç½®\râ”‚ â”œâ”€â”€ userSlice.js # Redux Toolkit çš„ Slice\râ”‚ â”œâ”€â”€ authSlice.js\râ”‚ â””â”€â”€ ...\râ”‚\râ”œâ”€â”€ utils/ # å·¥å…·å‡½æ•°å’Œå¸¸é‡\râ”‚ â”œâ”€â”€ constants.js\râ”‚ â”œâ”€â”€ helpers.js\râ”‚ â”œâ”€â”€ validators.js\râ”‚ â””â”€â”€ dateUtils.js\râ”‚\râ”œâ”€â”€ router/ # è·¯ç”±é…ç½®\râ”‚ â”œâ”€â”€ index.js # ä¸»è·¯ç”±é…ç½®\râ”‚ â””â”€â”€ routes.js # è·¯ç”±å®šä¹‰\râ”‚\râ”œâ”€â”€ App.jsx # åº”ç”¨æ ¹ç»„ä»¶\râ”œâ”€â”€ index.js # å…¥å£æ–‡ä»¶\râ””â”€â”€ reportWebVitals.js æˆ‘çš„å®è·µå’ŒåŸåˆ™ï¼š\næŒ‰åŠŸèƒ½/é¢†åŸŸåˆ’åˆ† (Feature-based)ï¼š è¿™æ˜¯æœ€é‡è¦çš„åŸåˆ™ã€‚å°†ä¸ç‰¹å®šä¸šåŠ¡åŠŸèƒ½ç›¸å…³çš„ç»„ä»¶ã€Hookã€æœåŠ¡ã€é¡µé¢ç­‰éƒ½æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„ features ç›®å½•ä¸‹ã€‚è¿™ä½¿å¾—å›¢é˜Ÿæ›´å®¹æ˜“ç†è§£æŸä¸ªåŠŸèƒ½çš„å…¨éƒ¨ä»£ç ï¼Œä¹Ÿæ–¹ä¾¿æœªæ¥è¿›è¡Œæ‹†åˆ†æˆ–ç‹¬ç«‹éƒ¨ç½²ã€‚ UI ç»„ä»¶ä¸ä¸šåŠ¡ç»„ä»¶åˆ†ç¦»ï¼š components ç›®å½•å­˜æ”¾å¯å¤ç”¨çš„ã€ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„å“‘ç»„ä»¶ (Dumb Components)ï¼Œå®ƒä»¬åªè´Ÿè´£æ¸²æŸ“ UI å’Œæ¥æ”¶ propsã€‚features ç›®å½•ä¸‹çš„ç»„ä»¶ï¼ˆé€šå¸¸æ˜¯é¡µé¢ç»„ä»¶æˆ–å®¹å™¨ç»„ä»¶ï¼‰åˆ™åŒ…å«ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ï¼Œå®ƒä»¬ä¼šç»„åˆä½¿ç”¨ components ç›®å½•ä¸‹çš„ UI ç»„ä»¶ã€‚ Hooks é›†ä¸­ç®¡ç†ï¼š åˆ†ä¸º hooks/ï¼ˆé€šç”¨ Hookï¼‰å’Œ features/*/hooks/ï¼ˆç‰¹å®šä¸šåŠ¡ Hookï¼‰ï¼Œæ¸…æ™°åœ°è¡¨è¾¾å…¶å¤ç”¨èŒƒå›´ã€‚ æœåŠ¡å±‚æŠ½è±¡ï¼š æ‰€æœ‰çš„ API è¯·æ±‚éƒ½å°è£…åœ¨ services ç›®å½•ä¸‹ï¼Œä¸ç»„ä»¶è§£è€¦ã€‚å¯ä»¥è¿›ä¸€æ­¥æŒ‰ä¸šåŠ¡æ¨¡å—ç»†åˆ†ã€‚ å…¨å±€çŠ¶æ€ï¼š store ç›®å½•é›†ä¸­ç®¡ç†å…¨å±€çŠ¶æ€ï¼ˆå¦‚ Redux storeï¼‰ï¼Œå¹¶æŒ‰æ¨¡å— (slice) è¿›è¡Œåˆ’åˆ†ã€‚ è·¯ç”±é›†ä¸­ï¼š ç‹¬ç«‹çš„ router ç›®å½•ç®¡ç†è·¯ç”±é…ç½®ï¼Œä¾¿äºç»´æŠ¤å’Œå®ç°è·¯ç”±æ‡’åŠ è½½ã€‚ å…¥å£æ–‡ä»¶ï¼š App.jsx å’Œ index.js ä¿æŒç®€æ´ï¼Œä¸»è¦ç”¨äºåˆå§‹åŒ–åº”ç”¨å’ŒæŒ‚è½½æ ¹ç»„ä»¶ã€‚ è¿™ç§ç»“æ„åœ¨æˆ‘çš„é¡¹ç›®ä¸­è¡¨ç°è‰¯å¥½ï¼Œç‰¹åˆ«æ˜¯åœ¨å›¢é˜Ÿåä½œå’Œé¡¹ç›®è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°åˆ’åˆ†èŒè´£ï¼Œé™ä½æ²Ÿé€šæˆæœ¬ï¼Œå¹¶æœ‰æ•ˆæ”¯æ’‘é¡¹ç›®çš„æ‰©å±•ã€‚\nåœ¨ React é¡¹ç›®ä¸­åšè¿‡å“ªäº›æŠ½è±¡/å°è£…ï¼Ÿ\r#\råœ¨ React é¡¹ç›®ä¸­ï¼Œæˆ‘ä¸»è¦åœ¨ä»¥ä¸‹å‡ ä¸ªå±‚é¢è¿›è¡ŒæŠ½è±¡å’Œå°è£…ï¼Œä»¥æé«˜ä»£ç å¤ç”¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ï¼š\nè‡ªå®šä¹‰ Hook å°è£…ï¼ˆé€»è¾‘å¤ç”¨æ ¸å¿ƒï¼‰ï¼š\nèŒè´£ï¼š è¿™æ˜¯æˆ‘æœ€ä¸»è¦çš„æŠ½è±¡æ–¹å¼ï¼Œç”¨äºå°è£…å’Œå¤ç”¨çŠ¶æ€é€»è¾‘å’Œå‰¯ä½œç”¨ã€‚ ä¾‹å­ï¼š useFetchData / useApiï¼š å°è£…æ•°æ®è¯·æ±‚ã€åŠ è½½çŠ¶æ€ã€é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ã€ç¼“å­˜ç­‰ã€‚ useForm / useValidationï¼š å°è£…è¡¨å•å­—æ®µçš„çŠ¶æ€ç®¡ç†ã€éªŒè¯é€»è¾‘ã€æäº¤å¤„ç†ã€‚ useLocalStorageï¼š å°è£…ä¸æµè§ˆå™¨æœ¬åœ°å­˜å‚¨çš„äº¤äº’ã€‚ useDebounce / useThrottleï¼š å°è£…é˜²æŠ–/èŠ‚æµé€»è¾‘ã€‚ useClickOutsideï¼š å°è£…ç‚¹å‡»ç»„ä»¶å¤–éƒ¨çš„äº‹ä»¶ç›‘å¬ã€‚ æ•ˆæœï¼š æå¤§åœ°å‡å°‘äº†ç»„ä»¶å†…éƒ¨çš„æ ·æ¿ä»£ç ï¼Œä½¿ç»„ä»¶æ›´ä¸“æ³¨äº UI æ¸²æŸ“ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼Œä¹Ÿæ›´å®¹æ˜“è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ UI ç»„ä»¶/é€šç”¨ç»„ä»¶å°è£…ï¼š\nèŒè´£ï¼š å°è£…ä¸ä¸šåŠ¡é€»è¾‘æ— å…³çš„ã€å¯å¤ç”¨çš„ UI å…ƒç´ ã€‚ ä¾‹å­ï¼š Buttonã€Inputã€Modalã€Tableã€LoadingSpinnerã€DatePicker ç­‰ã€‚è¿™äº›ç»„ä»¶é€šå¸¸æ˜¯â€œå“‘ç»„ä»¶â€æˆ–â€œå±•ç¤ºå‹ç»„ä»¶â€ï¼Œåªæ¥æ”¶ props æ¥æ§åˆ¶å¤–è§‚å’Œè¡Œä¸ºã€‚ æ•ˆæœï¼š ç¡®ä¿ UI é£æ ¼çš„ä¸€è‡´æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œé™ä½ç»´æŠ¤æˆæœ¬ã€‚ API è¯·æ±‚å±‚å°è£…ï¼š\nèŒè´£ï¼š ç»Ÿä¸€ç®¡ç†æ‰€æœ‰åç«¯ API è¯·æ±‚ï¼Œå¤„ç†å…¬å…±é€»è¾‘ã€‚ ä¾‹å­ï¼š å°è£… axios æˆ– fetchã€‚ ç»Ÿä¸€çš„è¯·æ±‚é…ç½®ï¼š åŸºç¡€ URLã€è¯·æ±‚å¤´ï¼ˆå¦‚ Authorization Tokenã€Content-Typeï¼‰ã€‚ è¯·æ±‚æ‹¦æˆªå™¨ï¼š æ·»åŠ è®¤è¯ Tokenã€è®°å½•è¯·æ±‚æ—¥å¿—ã€å¤„ç†å…¨å±€ loading çŠ¶æ€ã€‚ å“åº”æ‹¦æˆªå™¨ï¼š ç»Ÿä¸€å¤„ç†é”™è¯¯ç ï¼ˆå¦‚ 401 æœªè®¤è¯ã€403 æ— æƒé™ï¼‰ã€è§£æå“åº”æ•°æ®ã€ç»Ÿä¸€é”™è¯¯æç¤ºã€‚ å–æ¶ˆè¯·æ±‚æœºåˆ¶ï¼š å°è£… AbortControllerã€‚ æ•ˆæœï¼š é›†ä¸­ç®¡ç†ç½‘ç»œè¯·æ±‚é€»è¾‘ï¼Œæé«˜ä»£ç å¥å£®æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œå‡å°‘æ¯ä¸ªä¸šåŠ¡æ¨¡å—å¯¹è¯·æ±‚ç»†èŠ‚çš„å…³æ³¨ã€‚ çŠ¶æ€ç®¡ç†æ¨¡å—æŠ½è±¡ï¼ˆå¦‚æœä½¿ç”¨ Redux/Zustandï¼‰ï¼š\nèŒè´£ï¼š æŠ½è±¡ Redux çš„ reducerã€actionã€selector æˆ– Zustand çš„ store å®šä¹‰ã€‚ ä¾‹å­ï¼š åœ¨ä½¿ç”¨ Redux Toolkit æ—¶ï¼Œæˆ‘ä¼šå°†æ¯ä¸ªä¸šåŠ¡æ¨¡å—çš„çŠ¶æ€å®šä¹‰ä¸ºä¸€ä¸ª sliceï¼Œå…¶ä¸­åŒ…å«äº† reducerã€action creator å’Œ selectorï¼Œå®ç°äº†çŠ¶æ€çš„æ¨¡å—åŒ–å°è£…ã€‚ åœ¨ä½¿ç”¨ Zustand æ—¶ï¼Œæˆ‘ä¼šå°† store çš„å®šä¹‰ã€å…¶ä¸­çš„ state å’Œ actions å°è£…åœ¨ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚ æ•ˆæœï¼š æ¸…æ™°åœ°å®šä¹‰äº†æ¯ä¸ªä¸šåŠ¡é¢†åŸŸçš„çŠ¶æ€å’ŒçŠ¶æ€å˜æ›´é€»è¾‘ï¼Œæé«˜äº†çŠ¶æ€ç®¡ç†çš„å¯é¢„æµ‹æ€§å’Œå¯æµ‹è¯•æ€§ã€‚ å·¥å…·å‡½æ•°åº“ï¼š\nèŒè´£ï¼š å°è£…ä¸ä¸šåŠ¡æ— å…³çš„ã€é€šç”¨çš„ JavaScript å·¥å…·å‡½æ•°ã€‚ ä¾‹å­ï¼š æ—¥æœŸæ ¼å¼åŒ–ã€å­—ç¬¦ä¸²å¤„ç†ã€æ•°æ®éªŒè¯è¾…åŠ©å‡½æ•°ã€æ•°å€¼è®¡ç®—ç­‰ã€‚ æ•ˆæœï¼š é¿å…ä»£ç é‡å¤ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ è¿™äº›æŠ½è±¡å’Œå°è£…ç­–ç•¥ä½¿å¾—æˆ‘çš„ React é¡¹ç›®èƒ½å¤Ÿä»ä¸€ä¸ªå°å‹çš„ Demo æ‰©å±•åˆ°ä¸€ä¸ªå¤æ‚çš„ä¼ä¸šçº§åº”ç”¨ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚\nå’Œåç«¯å¦‚ä½•å¯¹æ¥ï¼Ÿæœ‰æ²¡æœ‰å°è£…è¯·æ±‚åº“ï¼Ÿ\r#\råœ¨æˆ‘çš„ React é¡¹ç›®ä¸­ï¼Œä¸åç«¯å¯¹æ¥æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç¯èŠ‚ï¼Œæˆ‘é€šå¸¸ä¼šé‡‡å–ä»¥ä¸‹ç­–ç•¥å’Œæ­¥éª¤ï¼š\næ˜ç¡® API æ–‡æ¡£å’Œæ¥å£è§„èŒƒï¼š\nåœ¨é¡¹ç›®å¼€å§‹é˜¶æ®µï¼Œä¼šä¸åç«¯å›¢é˜Ÿå…±åŒå®šä¹‰è¯¦ç»†çš„ API æ–‡æ¡£ï¼ˆå¦‚ä½¿ç”¨ Swagger/OpenAPIã€Postman Collectionsï¼‰ã€‚è¿™åŒ…æ‹¬æ¥å£ URLã€è¯·æ±‚æ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰ã€è¯·æ±‚å‚æ•°ï¼ˆQuery Params, Request Bodyï¼‰ã€å“åº”ç»“æ„ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ã€é”™è¯¯ç å®šä¹‰ç­‰ã€‚ æ˜ç¡®å‰åç«¯æ•°æ®ä¼ è¾“æ ¼å¼ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰ã€‚ å°è£…è¯·æ±‚åº“ (Service Layer)ï¼š\næ˜¯çš„ï¼Œæˆ‘ä¸€å®šä¼šå°è£…è¯·æ±‚åº“ã€‚ è¿™æ˜¯å‰ç«¯é¡¹ç›®å·¥ç¨‹åŒ–å’Œæé«˜å¯ç»´æŠ¤æ€§çš„é‡è¦ä¸€ç¯ã€‚ é€‰æ‹©ï¼š æˆ‘ä¸»è¦ä½¿ç”¨ axios ä½œä¸º HTTP å®¢æˆ·ç«¯ï¼Œå› ä¸ºå®ƒæä¾›äº†å¼ºå¤§çš„æ‹¦æˆªå™¨ã€å–æ¶ˆè¯·æ±‚ã€è¶…æ—¶è®¾ç½®ç­‰åŠŸèƒ½ã€‚ å°è£…å†…å®¹ï¼š åŸºæœ¬é…ç½®ï¼š è®¾ç½® baseURLï¼ˆå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒï¼‰ã€timeoutã€‚ è¯·æ±‚æ‹¦æˆªå™¨ (Request Interceptors)ï¼š æ·»åŠ è®¤è¯ Tokenï¼š è‡ªåŠ¨åœ¨æ¯ä¸ªè¯·æ±‚å¤´ä¸­åŠ å…¥ Authorization Token (å¦‚ JWT)ã€‚ ç»Ÿä¸€å‚æ•°å¤„ç†ï¼š ä¾‹å¦‚ï¼Œç»Ÿä¸€å¯¹ GET è¯·æ±‚çš„å‚æ•°è¿›è¡Œåºåˆ—åŒ–ã€‚ å…¨å±€ Loading çŠ¶æ€ï¼š åœ¨è¯·æ±‚å¼€å§‹æ—¶æ˜¾ç¤ºå…¨å±€ loading åŠ¨ç”»ã€‚ æ—¥å¿—è®°å½•ï¼š è®°å½•è¯·æ±‚ URLã€æ–¹æ³•ç­‰ä¿¡æ¯ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚ å“åº”æ‹¦æˆªå™¨ (Response Interceptors)ï¼š ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼š æ ¹æ®åç«¯è¿”å›çš„ HTTP çŠ¶æ€ç æˆ–ä¸šåŠ¡é”™è¯¯ç è¿›è¡Œç»Ÿä¸€å¤„ç†ï¼ˆå¦‚ 401 æœªè®¤è¯æ—¶è·³è½¬ç™»å½•é¡µï¼Œ403 æ— æƒé™æ—¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ï¼‰ã€‚ æ•°æ®ç»“æ„è§£æ„ï¼š å¦‚æœåç«¯å“åº”ä½“æœ‰ç»Ÿä¸€çš„å°è£…ï¼ˆå¦‚ { code: 0, message: 'Success', data: {} }ï¼‰ï¼Œåˆ™åœ¨æ‹¦æˆªå™¨ä¸­ç›´æ¥è¿”å› data éƒ¨åˆ†ã€‚ å…¨å±€é”™è¯¯æç¤ºï¼š å¯¹æŸäº›é”™è¯¯ç ï¼Œè‡ªåŠ¨å¼¹å‡ºç»Ÿä¸€çš„é”™è¯¯æç¤ºæ¶ˆæ¯ï¼ˆå¦‚ Toastï¼‰ã€‚ å…¨å±€ Loading çŠ¶æ€ç»“æŸã€‚ å–æ¶ˆè¯·æ±‚ï¼š å°è£… AbortController æœºåˆ¶ï¼Œå…è®¸ç»„ä»¶åœ¨å¸è½½æˆ–è¯·æ±‚è¿‡æœŸæ—¶å–æ¶ˆæœªå®Œæˆçš„è¯·æ±‚ã€‚ ç¤ºä¾‹ä»£ç ç»“æ„ï¼š // src/services/apiClient.js import axios from \u0026#39;axios\u0026#39;; const apiClient = axios.create({ baseURL: process.env.REACT_APP_API_BASE_URL || \u0026#39;/api\u0026#39;, // ç¯å¢ƒå˜é‡é…ç½® timeout: 10000, // 10ç§’è¶…æ—¶ headers: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, }, }); // è¯·æ±‚æ‹¦æˆªå™¨ apiClient.interceptors.request.use( (config) =\u0026gt; { // ä» localStorage æˆ– Redux store è·å– token const token = localStorage.getItem(\u0026#39;authToken\u0026#39;); if (token) { config.headers.Authorization = `Bearer ${token}`; } // å¯ä»¥æ·»åŠ å…¨å±€ loading çŠ¶æ€ // showGlobalLoading(); return config; }, (error) =\u0026gt; { return Promise.reject(error); } ); // å“åº”æ‹¦æˆªå™¨ apiClient.interceptors.response.use( (response) =\u0026gt; { // hideGlobalLoading(); // å¦‚æœåç«¯æœ‰ç»Ÿä¸€çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œå¯ä»¥åªè¿”å›å®é™…çš„æ•°æ®éƒ¨åˆ† if (response.data \u0026amp;\u0026amp; response.data.code === 0) { return response.data.data; // è¿”å›ä¸šåŠ¡æ•°æ® } else if (response.data \u0026amp;\u0026amp; response.data.message) { // å¤„ç†ä¸šåŠ¡é”™è¯¯ // showToast(response.data.message, \u0026#39;error\u0026#39;); return Promise.reject(new Error(response.data.message)); } return response; }, (error) =\u0026gt; { // hideGlobalLoading(); if (error.response) { const { status, data } = error.response; if (status === 401) { // å¤„ç†æœªè®¤è¯ï¼Œä¾‹å¦‚è·³è½¬åˆ°ç™»å½•é¡µ // redirectToLogin(); // showToast(\u0026#39;è®¤è¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•\u0026#39;, \u0026#39;error\u0026#39;); } else if (status === 403) { // å¤„ç†æ— æƒé™ // showToast(\u0026#39;æ— è®¿é—®æƒé™\u0026#39;, \u0026#39;error\u0026#39;); } else { // showToast(data.message || \u0026#39;è¯·æ±‚å¤±è´¥\u0026#39;, \u0026#39;error\u0026#39;); } } else if (error.request) { // è¯·æ±‚å·²å‘é€ä½†æœªæ”¶åˆ°å“åº” // showToast(\u0026#39;ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨æ— å“åº”\u0026#39;, \u0026#39;error\u0026#39;); } else { // è¯·æ±‚è®¾ç½®æ—¶å‘ç”Ÿé”™è¯¯ // showToast(\u0026#39;è¯·æ±‚é…ç½®é”™è¯¯\u0026#39;, \u0026#39;error\u0026#39;); } return Promise.reject(error); } ); export default apiClient; ä¸šåŠ¡ API æœåŠ¡æ¨¡å—ï¼š\nå¯¹äºæ¯ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œæˆ‘ä¼šåˆ›å»ºç‹¬ç«‹çš„ API æœåŠ¡æ–‡ä»¶ï¼Œç»Ÿä¸€ç®¡ç†è¯¥æ¨¡å—ç›¸å…³çš„æ¥å£ã€‚ ä¾‹å­ï¼š src/services/userService.js, src/services/productService.js è¿™äº›æ–‡ä»¶ä¼šå¯¼å…¥ä¸Šé¢å°è£…çš„ apiClientï¼Œå¹¶æä¾›å…·ä½“çš„ä¸šåŠ¡æ–¹æ³•ã€‚ // src/services/userService.js import apiClient from \u0026#39;./apiClient\u0026#39;; export const getUsers = (params) =\u0026gt; apiClient.get(\u0026#39;/users\u0026#39;, { params }); export const getUserById = (id) =\u0026gt; apiClient.get(`/users/${id}`); export const createUser = (data) =\u0026gt; apiClient.post(\u0026#39;/users\u0026#39;, data); // ... åœ¨ç»„ä»¶æˆ– Hook ä¸­è°ƒç”¨ï¼š\nç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook ä¼šè°ƒç”¨è¿™äº›ä¸šåŠ¡ API æœåŠ¡æ–¹æ³•æ¥è·å–æˆ–æäº¤æ•°æ®ã€‚ æˆ‘å€¾å‘äºä½¿ç”¨è‡ªå®šä¹‰ Hook (å¦‚ useQuery from react-query æˆ–è‡ªå®šä¹‰ useFetchData ) æ¥å°è£…æ•°æ®è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬åŠ è½½ã€é”™è¯¯ã€æ•°æ®çŠ¶æ€ç®¡ç†ï¼Œå¹¶åœ¨æ­¤å¤„è°ƒç”¨ userService.getUsers() ç­‰æ–¹æ³•ã€‚ é€šè¿‡è¿™ç§åˆ†å±‚çš„å¯¹æ¥æ–¹å¼ï¼Œæˆ‘èƒ½å¤Ÿç¡®ä¿å‰ç«¯ä¸åç«¯äº¤äº’çš„å¥å£®æ€§ã€å¯ç»´æŠ¤æ€§å’Œé«˜æ•ˆç‡ã€‚\nğŸ§  è¿›é˜¶ä¸æ¡†æ¶åŸç†\r#\rReact ä¸­ setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ\r#\råœ¨ React ä¸­ï¼ŒsetStateï¼ˆåŒ…æ‹¬å‡½æ•°ç»„ä»¶çš„ useState æ›´æ–°å‡½æ•°ï¼‰æ—¢å¯ä»¥æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„ï¼Œè¿™å–å†³äºå®ƒåœ¨ä»€ä¹ˆä¸Šä¸‹æ–‡è¢«è°ƒç”¨ã€‚\næ¦‚æ‹¬ï¼š\nåœ¨ React å†…éƒ¨çš„äº‹ä»¶å¤„ç†å‡½æ•°å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼ŒsetState æ˜¯å¼‚æ­¥çš„ï¼ˆæ‰¹å¤„ç†ï¼‰ã€‚ åœ¨ åŸç”Ÿäº‹ä»¶å¤„ç†å‡½æ•°æˆ–å¼‚æ­¥ä»£ç ï¼ˆå¦‚ setTimeoutã€Promise å›è°ƒï¼‰ä¸­ï¼ŒsetState æ˜¯åŒæ­¥çš„ã€‚ React 18 ä¹‹åï¼Œæ‰€æœ‰ setState è°ƒç”¨é»˜è®¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆè‡ªåŠ¨æ‰¹å¤„ç†ï¼‰ï¼Œæ— è®ºåœ¨ä½•ç§ä¸Šä¸‹æ–‡ã€‚ ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿï¼ˆReact 18 ä¹‹å‰çš„æœºåˆ¶ï¼‰ è¿™æ˜¯å› ä¸º React æœ‰ä¸€ä¸ªæ‰¹å¤„ç† (Batching) æœºåˆ¶ã€‚\nä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼š å¦‚æœæ¯æ¬¡ setState è°ƒç”¨éƒ½ç«‹å³æ›´æ–° DOMï¼Œä¼šå¯¼è‡´é¢‘ç¹çš„é‡ç»˜å’Œå›æµï¼Œæ€§èƒ½æå·®ã€‚ é˜²æ­¢ä¸ä¸€è‡´çš„ UI çŠ¶æ€ï¼š åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼Œå¦‚æœå¤šä¸ªçŠ¶æ€æ›´æ–°æ˜¯åŒæ­¥çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸­é—´çŠ¶æ€çš„ UI é—ªçƒã€‚ æ‰¹å¤„ç†æœºåˆ¶ï¼š å½“ä½ åœ¨ React å†…éƒ¨çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆä¾‹å¦‚ onClickã€onChange ç­‰åˆæˆäº‹ä»¶ï¼‰ä¸­å¤šæ¬¡è°ƒç”¨ setState æ—¶ï¼ŒReact ä¼šå°†è¿™äº›æ›´æ–°åˆå¹¶ (batch) èµ·æ¥ï¼Œåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸæ—¶ç»Ÿä¸€æ‰§è¡Œä¸€æ¬¡çœŸå®çš„ DOM æ›´æ–°ã€‚è¿™ç¡®ä¿äº†ï¼š\næ›´å°‘çš„ DOM æ“ä½œï¼š æ‰€æœ‰çš„ setState è°ƒç”¨åªè§¦å‘ä¸€æ¬¡ DOM æ¸²æŸ“ã€‚ æ›´å¥½çš„æ€§èƒ½ï¼š é¿å…äº†ä¸å¿…è¦çš„é‡å¤è®¡ç®—å’Œæ¸²æŸ“ã€‚ çŠ¶æ€ä¸€è‡´æ€§ï¼š ä¿è¯åœ¨ä¸€ä¸ªäº‹ä»¶å†…ï¼Œç»„ä»¶çš„ props å’Œ state å¤„äºä¸€ä¸ªä¸€è‡´çš„æœ€ç»ˆçŠ¶æ€ã€‚ ç¤ºä¾‹ï¼ˆReact 18 ä¹‹å‰ï¼‰ï¼š\n// React 18 ä¹‹å‰ function MyComponent() { const [count, setCount] = useState(0); const handleClick = () =\u0026gt; { setCount(count + 1); // ç¬¬ä¸€æ¬¡è°ƒç”¨ console.log(count); // 0 (æ—§å€¼ï¼Œå› ä¸º setState å¼‚æ­¥) setCount(prev =\u0026gt; prev + 1); // ç¬¬äºŒæ¬¡è°ƒç”¨ (å‡½æ•°å¼æ›´æ–°ï¼Œä¼šè¢«åˆå¹¶) console.log(count); // 0 (æ—§å€¼) // ä¸Šè¿°ä¸¤ä¸ª setCount ä¼šè¢«æ‰¹å¤„ç†ï¼Œæœ€ç»ˆ count ä¼šå˜æˆ 2ï¼Œä½† console.log çœ‹åˆ°çš„æ˜¯æ—§å€¼ }; const handleAsyncClick = () =\u0026gt; { setTimeout(() =\u0026gt; { setCount(count + 1); // ç¬¬ä¸€æ¬¡è°ƒç”¨ console.log(count); // å¯èƒ½æ˜¯ 0 æˆ– 1 (å–å†³äº timingï¼Œä½†è¿™é‡Œé€šå¸¸æ˜¯åŒæ­¥æ›´æ–°) setCount(prev =\u0026gt; prev + 1); // ç¬¬äºŒæ¬¡è°ƒç”¨ console.log(count); // å¯èƒ½æ˜¯ 1 æˆ– 2 (åŒæ­¥æ›´æ–°) // åœ¨ setTimeout ä¸­ï¼Œæ¯ä¸ª setState éƒ½ä¼šåŒæ­¥æ›´æ–°å¹¶è§¦å‘æ¸²æŸ“ }, 0); }; } React 18 åçš„å˜åŒ–ï¼šè‡ªåŠ¨æ‰¹å¤„ç† (Automatic Batching) React 18 å¼•å…¥äº†è‡ªåŠ¨æ‰¹å¤„ç†ã€‚ç°åœ¨ï¼Œæ— è®º setState æ˜¯åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ã€åŸç”Ÿäº‹ä»¶ã€setTimeout è¿˜æ˜¯ Promise å›è°ƒä¸­è°ƒç”¨ï¼Œå®ƒéƒ½å°†é»˜è®¤è¢«æ‰¹å¤„ç†ã€‚è¿™æ„å‘³ç€æ‰€æœ‰è¿™äº›æ›´æ–°éƒ½å°†åœ¨ä¸‹ä¸€ä¸ªæ¸²æŸ“ä¸­ä¸€èµ·å¤„ç†ï¼Œé™¤éä½ æ˜ç¡®é€‰æ‹©é€€å‡ºæ‰¹å¤„ç†ï¼ˆä½¿ç”¨ ReactDOM.flushSyncï¼‰ã€‚\nå¥½å¤„ï¼š è¿›ä¸€æ­¥ç®€åŒ–äº†å¼€å‘è€…å¯¹ setState è¡Œä¸ºçš„ç†è§£ï¼Œå¹¶æå‡äº†åº”ç”¨åœ¨æ›´å¤šåœºæ™¯ä¸‹çš„æ€§èƒ½ã€‚\nä»€ä¹ˆæ˜¯è°ƒå’Œï¼ˆReconciliationï¼‰ï¼Ÿ\r#\rè°ƒå’Œï¼ˆReconciliationï¼‰ æ˜¯ React çš„æ ¸å¿ƒç®—æ³•ã€‚å®ƒæŒ‡çš„æ˜¯ React åœ¨ç»„ä»¶çŠ¶æ€ï¼ˆæˆ– propsï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–° UI çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå°†æ–°çš„ React å…ƒç´ æ ‘ï¼ˆè™šæ‹Ÿ DOMï¼‰ä¸ä¹‹å‰çš„ React å…ƒç´ æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå¯¹çœŸå® DOM åšå‡ºå“ªäº›æœ€å°çš„æ›´æ”¹ã€‚\nè°ƒå’Œè¿‡ç¨‹çš„æ­¥éª¤ï¼š\nè§¦å‘æ›´æ–°ï¼š å½“ç»„ä»¶çš„ state æˆ– props å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚ ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼š React ä¼šè°ƒç”¨ç»„ä»¶çš„ render æ–¹æ³•ï¼ˆæˆ–å‡½æ•°ç»„ä»¶çš„ä½“ï¼‰ï¼Œç”Ÿæˆä¸€æ£µæ–°çš„ React å…ƒç´ æ ‘ï¼ˆä¹Ÿå°±æ˜¯æ–°çš„è™šæ‹Ÿ DOMï¼‰ã€‚ Diff ç®—æ³•æ¯”è¾ƒï¼š React ä¼šå°†è¿™æ£µæ–°çš„è™šæ‹Ÿ DOM æ ‘ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“çš„è™šæ‹Ÿ DOM æ ‘è¿›è¡Œé€’å½’æ¯”è¾ƒã€‚è¿™å°±æ˜¯æ‰€è°“çš„ Diff ç®—æ³•ã€‚ æ ¸å¿ƒè§„åˆ™ï¼š å…ƒç´ ç±»å‹ä¸åŒï¼š å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ç±»å‹ä¸åŒï¼ˆä¾‹å¦‚ï¼Œ\u0026lt;div\u0026gt; å˜ä¸º \u0026lt;span\u0026gt;ï¼‰ï¼ŒReact ä¼šé”€æ¯æ—§æ ‘ï¼Œå¹¶ä»å¤´å¼€å§‹æ„å»ºæ–°æ ‘ã€‚ å…ƒç´ ç±»å‹ç›¸åŒï¼š å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ç±»å‹ç›¸åŒï¼ŒReact ä¼šæ¯”è¾ƒå®ƒä»¬çš„å±æ€§ã€‚åªæœ‰å‘ç”Ÿæ”¹å˜çš„å±æ€§ä¼šè¢«æ›´æ–°åˆ°çœŸå® DOM ä¸Šã€‚ åˆ—è¡¨æ¯”è¾ƒï¼ˆé€šè¿‡ keyï¼‰ï¼š å¯¹äºåˆ—è¡¨ï¼ŒReact ä½¿ç”¨ key å±æ€§æ¥è¯†åˆ«å…ƒç´ ã€‚å¦‚æœ key ç›¸åŒï¼Œåˆ™è®¤ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªç»„ä»¶ï¼Œä¼šå°è¯•å¤ç”¨ï¼›å¦‚æœ key ä¸åŒï¼Œåˆ™é”€æ¯é‡å»ºã€‚ ç”Ÿæˆæ›´æ–°é˜Ÿåˆ— (Patch)ï¼š Diff ç®—æ³•ä¼šè®¡ç®—å‡ºæœ€å°çš„æ›´æ–°é›†åˆï¼Œå½¢æˆä¸€ä¸ªâ€œè¡¥ä¸â€ (patch) æˆ–â€œæ›´æ–°é˜Ÿåˆ—â€ã€‚ æ›´æ–°çœŸå® DOMï¼š React å°†è¿™ä¸ªè¡¥ä¸åº”ç”¨åˆ°çœŸå®çš„ DOM ä¸Šï¼Œåªæ‰§è¡Œå¿…è¦çš„ DOM æ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤ã€æ›´æ–°å±æ€§ï¼‰ã€‚è¿™ä½¿å¾— React èƒ½å¤Ÿé«˜æ•ˆåœ°æ›´æ–° UIï¼Œé¿å…äº†ä»£ä»·æ˜‚è´µçš„æ•´ä½“ DOM é‡ç»˜ã€‚ ä¸ºä»€ä¹ˆå«â€œè°ƒå’Œâ€è€Œä¸æ˜¯â€œæ¸²æŸ“â€ï¼Ÿ â€œæ¸²æŸ“â€é€šå¸¸æŒ‡å°†æ•°æ®è½¬åŒ–ä¸ºå¯è§†åŒ–å½¢å¼çš„è¿‡ç¨‹ã€‚è€Œâ€œè°ƒå’Œâ€æ›´å¼ºè°ƒçš„æ˜¯æ¯”è¾ƒå’Œåè°ƒæ—§çš„ UI çŠ¶æ€ä¸æ–°çš„ UI çŠ¶æ€ï¼Œå¹¶æ‰¾å‡ºæœ€å°çš„å·®å¼‚ä»¥è¾¾åˆ°æœ€ç»ˆçŠ¶æ€çš„è¿‡ç¨‹ã€‚\nFiber æ¶æ„è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ\r#\rFiber æ˜¯ React 16 å¼•å…¥çš„ä¸€ä¸ªå…¨æ–°çš„æ ¸å¿ƒç®—æ³•çš„é‡å†™ã€‚å®ƒè§£å†³äº†ä¹‹å‰ React Stack Reconcilerï¼ˆæ ˆè°ƒå’Œå™¨ï¼‰å­˜åœ¨çš„ä¸»è¦é—®é¢˜ï¼šé•¿ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚\nStack Reconciler çš„é—®é¢˜ (React 15 åŠä»¥å‰)ï¼š\né€’å½’æ‰§è¡Œï¼š è°ƒå’Œè¿‡ç¨‹æ˜¯åŒæ­¥çš„ã€é€’å½’æ‰§è¡Œçš„ã€‚ä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šä¸€å£æ°”å¤„ç†å®Œæ•´ä¸ªç»„ä»¶æ ‘çš„ Diff è¿‡ç¨‹ï¼Œç›´åˆ°å®Œæˆã€‚ é˜»å¡ä¸»çº¿ç¨‹ï¼š å¦‚æœç»„ä»¶æ ‘éå¸¸æ·±ã€ç»„ä»¶æ•°é‡éå¸¸å¤šï¼Œæˆ–è€…æŸä¸ªç»„ä»¶çš„ render è¿‡ç¨‹è®¡ç®—é‡å¾ˆå¤§ï¼Œæ•´ä¸ª Diff è¿‡ç¨‹å¯èƒ½ä¼šæŒç»­å¾ˆé•¿æ—¶é—´ã€‚ç”±äº JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™ä¼šé˜»å¡æµè§ˆå™¨çš„ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´é¡µé¢é•¿æ—¶é—´æ— å“åº”ï¼Œç”¨æˆ·æ— æ³•è¿›è¡Œæ“ä½œï¼Œå‡ºç°å¡é¡¿ã€‚ Fiber æ¶æ„å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼š\nå¯ä¸­æ–­å’Œå¯æ¢å¤çš„æ›´æ–°ï¼š\nFiber å°† React å†…éƒ¨çš„åè°ƒå·¥ä½œåˆ†è§£æˆä¸€ä¸ªä¸ªå°çš„**â€œå·¥ä½œå•å…ƒâ€ï¼ˆFiberï¼‰**ã€‚ æ¯ä¸ª Fiber ä»£è¡¨ä¸€ä¸ªç»„ä»¶æˆ–ä¸€ä¸ª DOM èŠ‚ç‚¹ã€‚ åè°ƒè¿‡ç¨‹ä¸å†æ˜¯åŒæ­¥é€’å½’ï¼Œè€Œæ˜¯å¯ä»¥æš‚åœå’Œæ¢å¤çš„ã€‚React å¯ä»¥åœ¨å®Œæˆä¸€éƒ¨åˆ†å·¥ä½œåï¼Œå°†æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ï¼Œè®©æµè§ˆå™¨å¤„ç†ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ï¼‰ï¼Œç„¶åå†ç»§ç»­ä¹‹å‰ä¸­æ–­çš„å·¥ä½œã€‚ è¿™ç§èƒ½åŠ›ç§°ä¸º**â€œå¯ä¸­æ–­æ¸²æŸ“â€ (Interruptible Rendering)**ï¼Œæ˜¯å®ç° Concurrent Mode å’Œ Suspense çš„åŸºç¡€ã€‚ ä¼˜å…ˆçº§è°ƒåº¦ (Prioritization)ï¼š\nFiber å¼•å…¥äº†ä»»åŠ¡ä¼˜å…ˆçº§çš„æ¦‚å¿µã€‚React å¯ä»¥æ ¹æ®ä¸åŒçš„æ›´æ–°ç±»å‹ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰åˆ†é…ä¸åŒçš„ä¼˜å…ˆçº§ã€‚ é«˜ä¼˜å…ˆçº§çš„æ›´æ–°å¯ä»¥ä¸­æ–­ä½ä¼˜å…ˆçº§çš„æ›´æ–°ï¼Œä¼˜å…ˆå¾—åˆ°æ‰§è¡Œå’Œæ¸²æŸ“ï¼Œç¡®ä¿å…³é”®ç”¨æˆ·äº¤äº’çš„åŠæ—¶å“åº”ã€‚ åŒç¼“å†²æœºåˆ¶ (Double Buffering)ï¼š\nFiber ç»´æŠ¤ä¸¤æ£µ Fiber æ ‘ï¼šâ€œCurrentâ€æ ‘ï¼ˆå½“å‰åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„çŠ¶æ€ï¼‰å’Œ**â€œWorkInProgressâ€æ ‘**ï¼ˆæ­£åœ¨æ„å»ºçš„ã€å³å°†å˜æˆä¸‹ä¸€ä¸ª Current æ ‘çš„è‰ç¨¿ï¼‰ã€‚ æ‰€æœ‰çš„æ›´æ–°æ“ä½œéƒ½åœ¨ WorkInProgress æ ‘ä¸Šè¿›è¡Œã€‚å½“ WorkInProgress æ ‘æ„å»ºå®Œæˆåï¼Œå¹¶ä¸”æ‰€æœ‰å‰¯ä½œç”¨éƒ½å¤„ç†å®Œæ¯•ï¼ŒReact ä¼šé€šè¿‡ä¸€ä¸ªç®€å•çš„æŒ‡é’ˆåˆ‡æ¢ï¼Œå°† WorkInProgress æ ‘å˜ä¸ºæ–°çš„ Current æ ‘ï¼Œä¸€æ¬¡æ€§æäº¤åˆ°çœŸå® DOMã€‚ è¿™ä¿è¯äº† UI æ›´æ–°çš„åŸå­æ€§å’Œä¸€è‡´æ€§ï¼Œç”¨æˆ·ä¸ä¼šçœ‹åˆ°ä¸­é—´çŠ¶æ€æˆ–ä¸å®Œæ•´çš„ UIã€‚ æ€»ç»“ï¼š Fiber æ¶æ„å°† React çš„åè°ƒè¿‡ç¨‹ä»åŒæ­¥çš„ã€ä¸å¯ä¸­æ–­çš„é€’å½’æ¨¡å‹ï¼Œè½¬å˜ä¸ºå¼‚æ­¥çš„ã€å¯ä¸­æ–­çš„å¢é‡æ›´æ–°æ¨¡å‹ã€‚è¿™ä½¿å¾— React èƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´ï¼Œå“åº”ç”¨æˆ·äº¤äº’ï¼Œå¹¶ä¸ºæœªæ¥çš„å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰å’Œ Suspense ç­‰é«˜çº§ç‰¹æ€§å¥ å®šäº†åŸºç¡€ï¼Œä»è€Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚\nConcurrent Mode å’Œ Suspense çŸ¥é“å¤šå°‘ï¼Ÿ\r#\rConcurrent Mode (å¹¶å‘æ¨¡å¼) å’Œ Suspense æ˜¯ React 18 å¼•å…¥çš„å¼ºå¤§æ–°ç‰¹æ€§ï¼Œå®ƒä»¬åŸºäº Fiber æ¶æ„ï¼Œæ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒå’Œåº”ç”¨æ€§èƒ½ã€‚\n1. Concurrent Mode (å¹¶å‘æ¨¡å¼)ï¼š\næ ¸å¿ƒæ€æƒ³ï¼š å…è®¸ React åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·è¾“å…¥äº‹ä»¶å’Œä¸€ä¸ªæ•°æ®è·å–ï¼‰ã€‚å®ƒé€šè¿‡å¯ä¸­æ–­æ¸²æŸ“å’Œä¼˜å…ˆçº§è°ƒåº¦æ¥å®ç°ã€‚ è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š è§£å†³äº† React 15 åŠå…¶ä»¥å‰ç‰ˆæœ¬ä¸­ç”±äºåŒæ­¥æ¸²æŸ“å¯èƒ½å¯¼è‡´é¡µé¢å¡é¡¿çš„é—®é¢˜ã€‚åœ¨å¹¶å‘æ¨¡å¼ä¸‹ï¼Œå³ä½¿æœ‰å¤§é‡æˆ–æ˜‚è´µçš„æ›´æ–°ï¼ŒReact ä¹Ÿèƒ½åœ¨åå°å‡†å¤‡æ–°çš„ UIï¼ŒåŒæ—¶ä¸é˜»å¡ç”¨æˆ·äº¤äº’ã€‚ å·¥ä½œåŸç†ï¼š React ä¼šåœ¨åå°æ„å»ºæ–°çš„ Fiber æ ‘ï¼ˆâ€œWorkInProgressâ€æ ‘ï¼‰ã€‚ åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰åˆ°æ¥ï¼ŒReact å¯ä»¥æš‚åœå½“å‰æ­£åœ¨è¿›è¡Œçš„ä½ä¼˜å…ˆçº§æ¸²æŸ“ä»»åŠ¡ï¼Œä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼Œç­‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡å®Œæˆåå†ç»§ç»­ä¹‹å‰çš„ä½ä¼˜å…ˆçº§ä»»åŠ¡ã€‚ åªæœ‰å½“æ–°çš„ UI å‡†å¤‡å¥½å¹¶å®Œå…¨ä¸€è‡´æ—¶ï¼ŒReact æ‰ä¼šå°†å…¶ä¸€æ¬¡æ€§æäº¤åˆ°çœŸå®çš„ DOMã€‚ çŠ¶æ€ï¼š åœ¨ React 18 ä¸­ï¼ŒConcurrent Mode å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„â€œæ¨¡å¼â€å¼€å…³ï¼Œè€Œæ˜¯ä½œä¸º React çš„é»˜è®¤è¡Œä¸ºå’Œåº•å±‚ä¼˜åŒ–è‡ªåŠ¨å¯ç”¨ã€‚ä¾‹å¦‚ï¼ŒstartTransition API å…è®¸ä½ æ ‡è®°æ›´æ–°ä¸ºâ€œå¯ä¸­æ–­çš„è¿‡æ¸¡â€ã€‚ ä¼˜åŠ¿ï¼š æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒï¼š åº”ç”¨ç¨‹åºåœ¨å¤„ç†å¤§é‡æˆ–è®¡ç®—å¯†é›†å‹ä»»åŠ¡æ—¶ä»èƒ½ä¿æŒå“åº”ã€‚ æ›´å¥½çš„äº¤äº’æ€§ï¼š ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ç­‰é«˜ä¼˜å…ˆçº§ä»»åŠ¡å¯ä»¥ä¼˜å…ˆå“åº”ã€‚ 2. Suspenseï¼š\næ ¸å¿ƒæ€æƒ³ï¼š å…è®¸ç»„ä»¶â€œç­‰å¾…â€æŸä¸ªå¼‚æ­¥æ“ä½œå®Œæˆï¼Œå¹¶åœ¨ç­‰å¾…æœŸé—´æ˜¾ç¤ºä¸€ä¸ªå›é€€ (fallback) UIã€‚å®ƒè®©æ•°æ®è·å–ç­‰å¼‚æ­¥æ“ä½œçš„åŠ è½½çŠ¶æ€ç®¡ç†å˜å¾—å£°æ˜å¼ï¼Œè€Œä¸æ˜¯å‘½ä»¤å¼ã€‚ è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼š è§£å†³äº†ä¼ ç»Ÿæ•°æ®è·å–ä¸­â€œç€‘å¸ƒå¼è¯·æ±‚â€å’Œæ‰‹åŠ¨ç®¡ç† isLoading çŠ¶æ€çš„ç¹çé—®é¢˜ã€‚ å·¥ä½œåŸç†ï¼š å½“ä¸€ä¸ªç»„ä»¶ï¼ˆæˆ–å…¶å†…éƒ¨çš„å­ç»„ä»¶ï¼‰â€œæŒ‚èµ·â€ (suspends) æ—¶ï¼ˆä¾‹å¦‚ï¼Œå®ƒå†…éƒ¨çš„æ•°æ®è¯·æ±‚å°šæœªå®Œæˆï¼‰ï¼ŒReact ä¼šæ•è·è¿™ä¸ªæŒ‚èµ·ï¼Œå¹¶æ¸²æŸ“æœ€è¿‘çš„ \u0026lt;Suspense\u0026gt; ç¥–å…ˆç»„ä»¶çš„ fallback propã€‚ ä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œç»„ä»¶æ•°æ®å‡†å¤‡å°±ç»ªï¼ŒReact å°±ä¼šæ›¿æ¢ fallback UIï¼Œæ¸²æŸ“çœŸå®çš„ç»„ä»¶å†…å®¹ã€‚ å¸¸è§ç”¨é€”ï¼š ç»„ä»¶æ‡’åŠ è½½ï¼š React.lazy å’Œ Suspense ç»“åˆå®ç°ä»£ç åˆ†å‰²å’ŒæŒ‰éœ€åŠ è½½ã€‚ æ•°æ®è·å–ï¼š (æœªæ¥çš„ä¸»è¦ç”¨ä¾‹) ç»“åˆæ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ react-query çš„ experimental Suspense æ¨¡å¼ï¼‰ï¼Œå¯ä»¥ç›´æ¥åœ¨ç»„ä»¶ä¸­è°ƒç”¨æ•°æ®è·å–é€»è¾‘ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç®¡ç† loading çŠ¶æ€ã€‚ ä¼˜åŠ¿ï¼š å£°æ˜å¼æ•°æ®åŠ è½½ï¼š ç®€åŒ–äº†å¼‚æ­¥æ•°æ®åŠ è½½çš„ UI é€»è¾‘ã€‚ æ”¹å–„ç”¨æˆ·ä½“éªŒï¼š é¿å…äº†ç»„ä»¶åŠ è½½æ—¶çš„é—ªçƒå’Œä¸ä¸€è‡´æ€§ï¼Œæä¾›æ›´å¹³æ»‘çš„åŠ è½½è¿‡æ¸¡ã€‚ é¿å…ç€‘å¸ƒå¼è¯·æ±‚ï¼š ç†è®ºä¸Šèƒ½æ›´å¥½åœ°åè°ƒå¹¶è¡Œæ•°æ®è·å–ã€‚ æ€»ç»“ï¼š Concurrent Mode æ˜¯ React å†…éƒ¨çš„è°ƒåº¦èƒ½åŠ›ï¼Œä½¿å¾— React èƒ½å¤Ÿæ›´æ™ºèƒ½åœ°å¤„ç†å’Œæ¸²æŸ“æ›´æ–°ã€‚Suspense æ˜¯æš´éœ²ç»™å¼€å‘è€…çš„ä¸€ç§èƒ½åŠ›ï¼Œè®©æˆ‘ä»¬å¯ä»¥å£°æ˜å¼åœ°å¤„ç†å¼‚æ­¥èµ„æºçš„åŠ è½½çŠ¶æ€ï¼Œå¹¶åˆ©ç”¨ Concurrent Mode çš„åº•å±‚èƒ½åŠ›æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚å®ƒä»¬å…±åŒæ˜¯ React æœªæ¥å‘å±•çš„é‡è¦æ–¹å‘ã€‚\nReact 18 å¼•å…¥äº†å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ\r#\rReact 18 å¸¦æ¥äº†è®¸å¤šé‡è¦çš„æ›´æ–°ï¼Œä¸»è¦å…³æ³¨æ€§èƒ½ä¼˜åŒ–ã€ç”¨æˆ·ä½“éªŒæå‡å’Œæ–°çš„å¹¶å‘ç‰¹æ€§ã€‚æ ¸å¿ƒæ–°ç‰¹æ€§åŒ…æ‹¬ï¼š\nè‡ªåŠ¨æ‰¹å¤„ç† (Automatic Batching)ï¼š\nä½œç”¨ï¼š æ— è®º setState è°ƒç”¨åœ¨ä½•å¤„ï¼ˆåŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€Promise å›è°ƒã€setTimeout ç­‰ï¼‰ï¼ŒReact éƒ½ä¼šè‡ªåŠ¨å°†å¤šä¸ªçŠ¶æ€æ›´æ–°åˆå¹¶æˆä¸€ä¸ªæ‰¹æ¬¡ï¼Œåœ¨ä¸€æ¬¡æ¸²æŸ“ä¸­å®Œæˆæ‰€æœ‰æ›´æ–°ã€‚ ä¼˜åŠ¿ï¼š å‡å°‘äº†ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼Œæå‡äº†åº”ç”¨æ€§èƒ½ï¼Œç®€åŒ–äº†å¼€å‘è€…å¯¹ setState è¡Œä¸ºçš„ç†è§£ã€‚åœ¨ React 18 ä¹‹å‰ï¼Œåªæœ‰åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ setState æ‰æ˜¯æ‰¹å¤„ç†çš„ã€‚ startTransition (å¯ä¸­æ–­æ›´æ–°)ï¼š\nä½œç”¨ï¼š å…è®¸ä½ å°†æŸäº›ä¸ç´§æ€¥çš„çŠ¶æ€æ›´æ–°æ ‡è®°ä¸ºâ€œè¿‡æ¸¡ (transitions)â€ã€‚è¿™äº›è¿‡æ¸¡æ›´æ–°æ˜¯å¯ä¸­æ–­çš„ï¼ŒReact ä¼šä¼˜å…ˆå¤„ç†ç´§æ€¥æ›´æ–°ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰ï¼Œè€Œè¿‡æ¸¡æ›´æ–°å¯ä»¥åœ¨åå°è¿›è¡Œï¼Œç”šè‡³è¢«æ›´ç´§æ€¥çš„æ›´æ–°ä¸­æ–­ã€‚ ç”¨æ³•ï¼š import { startTransition } from \u0026#39;react\u0026#39;; // ... const handleChange = (e) =\u0026gt; { setInputValue(e.target.value); // ç´§æ€¥æ›´æ–°ï¼Œç«‹å³æ˜¾ç¤ºè¾“å…¥å†…å®¹ startTransition(() =\u0026gt; { // è¿™ä¸ªæ›´æ–°è¢«æ ‡è®°ä¸ºéç´§æ€¥ï¼Œå¯ä»¥è¢«ä¸­æ–­ setSearchResults(filterData(e.target.value)); }); }; ä¼˜åŠ¿ï¼š å³ä½¿æœ‰å¤§é‡æ•°æ®è®¡ç®—æˆ–æ¸²æŸ“ï¼Œä¹Ÿèƒ½ç¡®ä¿ UI çš„å“åº”æ€§ï¼Œé¿å…å¡é¡¿ã€‚ Suspense for Data Fetching (ç”¨äºæ•°æ®è·å–çš„ Suspense)ï¼š\nè™½ç„¶åœ¨ React 16.6 ä¸­å·²ç»å¼•å…¥äº† Suspense ç”¨äºä»£ç åˆ†å‰² (React.lazy)ï¼Œä½† React 18 æ‰©å±•äº†å…¶èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿç”¨äºæ•°æ®è·å–ã€‚ ä½œç”¨ï¼š å½“ç»„ä»¶çš„æ•°æ®å°šæœªå‡†å¤‡å¥½æ—¶ï¼Œå®ƒå¯ä»¥â€œæŒ‚èµ·â€ (suspend)ï¼Œå¹¶è®©æœ€è¿‘çš„ Suspense è¾¹ç•Œæ˜¾ç¤º fallback UIã€‚å½“æ•°æ®åŠ è½½å®Œæˆåï¼Œå†æ¸²æŸ“ç»„ä»¶å†…å®¹ã€‚ ä¼˜åŠ¿ï¼š ç®€åŒ–äº†æ•°æ®è·å–çš„åŠ è½½çŠ¶æ€ç®¡ç†ï¼Œé¿å…äº†â€œç€‘å¸ƒå¼è¯·æ±‚â€ï¼Œæ”¹å–„äº†ç”¨æˆ·ä½“éªŒã€‚éœ€è¦æ­é…æ”¯æŒ Suspense çš„æ•°æ®è·å–åº“ï¼ˆå¦‚ react-query çš„å®éªŒæ€§æ¨¡å¼æˆ–æœªæ¥çš„ React Server Componentsï¼‰ã€‚ æ–°çš„ Root API (createRoot)ï¼š\nä½œç”¨ï¼š React 18 å¼•å…¥äº†æ–°çš„æ ¹ API ReactDOM.createRoot() æ¥æ›¿ä»£æ—§çš„ ReactDOM.render()ã€‚ ç”¨æ³•ï¼š // æ—§ç‰ˆ // import ReactDOM from \u0026#39;react-dom\u0026#39;; // ReactDOM.render(\u0026lt;App /\u0026gt;, document.getElementById(\u0026#39;root\u0026#39;)); // æ–°ç‰ˆ import ReactDOM from \u0026#39;react-dom/client\u0026#39;; const root = ReactDOM.createRoot(document.getElementById(\u0026#39;root\u0026#39;)); root.render(\u0026lt;App /\u0026gt;); ä¼˜åŠ¿ï¼š æ–°çš„ Root API æ˜¯å¯ç”¨æ‰€æœ‰å¹¶å‘ç‰¹æ€§ï¼ˆåŒ…æ‹¬è‡ªåŠ¨æ‰¹å¤„ç†å’Œ startTransitionï¼‰çš„å‰æã€‚ useDeferredValue Hookï¼š\nä½œç”¨ï¼š å…è®¸ä½ â€œå»¶è¿Ÿâ€æ›´æ–°æŸä¸ªå€¼ã€‚å½“å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šè¿”å›è¯¥å€¼çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä½†ä¼šç»™ React ä¸€ä¸ªæç¤ºï¼Œè¿™ä¸ªæ›´æ–°å¯ä»¥è¢«å»¶è¿Ÿï¼Œä¸ä¼šç«‹å³é˜»å¡ä¸»çº¿ç¨‹ã€‚ ä¼˜åŠ¿ï¼š ç±»ä¼¼äº startTransitionï¼Œä½†ç²’åº¦æ›´ç»†ï¼Œé€šå¸¸ç”¨äºä¼˜åŒ–å®æ—¶æœç´¢æ¡†æˆ–è¾“å…¥æ¡†çš„å“åº”æ€§ï¼Œå½“ç”¨æˆ·å¿«é€Ÿè¾“å…¥æ—¶ï¼Œåªæ˜¾ç¤ºéƒ¨åˆ†æ›´æ–°ç»“æœï¼Œè€Œåœ¨ç©ºé—²æ—¶å†æ˜¾ç¤ºå®Œæ•´ç»“æœã€‚ Server Components (å¤„äºå®éªŒé˜¶æ®µï¼Œä¸æ˜¯ React 18 æ ¸å¿ƒå‘å¸ƒå†…å®¹ä½†ç›¸å…³)ï¼š\nä½œç”¨ï¼š å…è®¸å¼€å‘è€…åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“å’Œè·å–æ•°æ®ï¼Œå¹¶å°†ç»„ä»¶ç›´æ¥å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œå‡å°‘å®¢æˆ·ç«¯ JavaScript çš„æ•°é‡ã€‚ ä¼˜åŠ¿ï¼š æå‡åˆå§‹åŠ è½½æ€§èƒ½ï¼Œé™ä½å®¢æˆ·ç«¯èµ„æºæ¶ˆè€—ã€‚ æ€»ç»“ï¼š React 18 çš„æ ¸å¿ƒåœ¨äºå¼•å…¥äº†å¹¶å‘æ¸²æŸ“çš„æ¦‚å¿µï¼Œä½¿å¾— React åº”ç”¨åœ¨å¤„ç†å¤æ‚å’Œå¤§æ•°æ®é‡æ›´æ–°æ—¶èƒ½å¤Ÿä¿æŒæ›´é«˜çš„å“åº”æ€§ã€‚å®ƒé€šè¿‡è‡ªåŠ¨æ‰¹å¤„ç†ã€å¯ä¸­æ–­æ›´æ–°ï¼ˆstartTransitionï¼‰å’Œæ›´å¼ºå¤§çš„ Suspense æœºåˆ¶æ¥æå‡ç”¨æˆ·ä½“éªŒå’Œå¼€å‘æ•ˆç‡ã€‚\n"},{"id":33,"href":"/docs/study/system-design/rpc/","title":"RPC æ¡†æ¶","section":"ç³»ç»Ÿè®¾è®¡","content":"è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨ä¸”é«˜æ€§èƒ½çš„ RPC æ¡†æ¶éœ€è¦ä»ä½“ç³»ç»“æ„ã€é€šä¿¡æœºåˆ¶ã€å®‰å…¨ä¸å¯è§‚æµ‹æ€§ç­‰å¤šæ–¹é¢è¿›è¡Œè®¾è®¡ã€‚ä»¥ä¸‹æ˜¯ä¸­è‹±æ–‡ç‰ˆæœ¬çš„ç»¼åˆå»ºè®®ã€‚\nâœ… ä¸­æ–‡ç‰ˆ\r#\r1. æ¥å£å®šä¹‰ä¸åè®® (IDL + åºåˆ—åŒ–)\r#\rä½¿ç”¨ Interface Definition Languageï¼ˆå¦‚ Protocol Buffers / Thrift IDLï¼‰æ¸…æ™°å®šä¹‰æœåŠ¡æ¥å£ï¼Œå®ç°è·¨è¯­è¨€æ”¯æŒå¹¶ç”Ÿæˆç±»å‹å®‰å…¨çš„ä»£ç  (\rbulbapp.io, en.wikipedia.org)ã€‚ åºåˆ—åŒ–å»ºè®®ä½¿ç”¨é«˜æ•ˆäºŒè¿›åˆ¶æ ¼å¼ï¼ˆå¦‚ Protobufã€Capâ€™n Protoï¼‰ï¼‹å¯é€‰å‹ç¼©ï¼ˆå¦‚ Snappy/LZ4ï¼‰ï¼Œæå‡ä¼ è¾“æ•ˆç‡(\ren.wikipedia.org)ã€‚ 2. ä¼ è¾“å±‚ \u0026amp; ç½‘ç»œé€šä¿¡\r#\råŸºäº HTTP/2 æˆ–åŸå§‹ TCPï¼Œæ”¯æŒåŒå‘æµï¼ˆgRPCï¼‰ä¸å¼‚æ­¥è°ƒç”¨æ¨¡å‹ï¼ˆå¦‚ Nettyã€éé˜»å¡ IOï¼‰ã€‚ è¿æ¥æ± ä¸ä¼šè¯ç®¡ç†ï¼šä½¿ç”¨è¿æ¥å¤ç”¨ã€å¿ƒè·³æ£€æµ‹ï¼Œç¡®ä¿è¿æ¥ç¨³å®šå’Œé«˜å¹¶å‘æ€§èƒ½ã€‚ 3. å®¢æˆ·ç«¯ Stub ä¸ Server éª¨æ¶\r#\rå®¢æˆ·ç«¯ç”Ÿæˆ Stubï¼Œå°è£…åºåˆ—åŒ–ã€ç½‘ç»œè°ƒç”¨ã€è¶…æ—¶å’Œé‡è¯•é€»è¾‘ï¼ˆå»ºè®®æ”¯æŒå¹‚ç­‰é‡è¯•ã€è¶…æ—¶æ§åˆ¶ï¼‰ã€‚ æœåŠ¡ç«¯ä½¿ç”¨æ‹¦æˆªå™¨é“¾ï¼ˆInterceptorï¼‰æ¨¡å¼å¤„ç†å¼ºåˆ¶è®¤è¯ã€é™æµã€æ—¥å¿—ã€ç›‘æ§åŸ‹ç‚¹ç­‰äº‹åŠ¡ï¼Œè§£è€¦å…³æ³¨ç‚¹(\rgoogle.github.io)ã€‚ 4. æœåŠ¡æ³¨å†Œä¸å‘ç°\r#\ré›†æˆæ³¨å†Œä¸­å¿ƒï¼ˆå¦‚ Consulã€Nacosã€Eurekaã€Zookeeperï¼‰ï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡ã€å¥åº·æ£€æŸ¥ã€‚ å®¢æˆ·ç«¯æ”¯æŒè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆè½®è¯¢ã€ä¸€è‡´æ€§å“ˆå¸Œã€æƒé‡ï¼‰ï¼Œå¹¶è‡ªåŠ¨æ„ŸçŸ¥æœåŠ¡å¢åˆ ã€‚ 5. é”™è¯¯å¤„ç†ä¸å®¹é”™\r#\rå®šä¹‰ç»Ÿä¸€çš„é”™è¯¯ç å’Œé‡è¯•ç­–ç•¥ï¼ˆåŸºäºå¹‚ç­‰æ€§ + æŒ‡æ•°é€€é¿ + å‰¯ä½œç”¨é‡è¯•ï¼‰ã€‚ å®ç°æ–­è·¯å™¨ï¼ˆcircuit breakerï¼‰ã€é™çº§ç­–ç•¥ï¼Œé˜²æ­¢é”™è¯¯æ‰©æ•£(\rprogramming.vip)ã€‚ 6. å®‰å…¨ä¸æˆæƒ\r#\ræ”¯æŒ TLS åŠ å¯†ã€åŒå‘è®¤è¯åŠ OAuth/JWT è®¤è¯æ–¹å¼ã€‚ æ’é™¤æ³¨å…¥å¼å®‰å…¨æ¼æ´ï¼Œç¡®ä¿ä¼ è¾“ä¸æ¥å£è®¿é—®å®‰å…¨ã€‚ 7. æ€§èƒ½ä¼˜åŒ–ä¸å¯è§‚æµ‹æ€§\r#\rå®¢æˆ·ç«¯ Stub æ”¯æŒå‹ç¼©ä¸æ‰¹é‡è¯·æ±‚ï¼Œé™ä½å»¶è¿Ÿä¸å¹¶å‘è¿æ¥æ•°ã€‚ é›†æˆç›‘æ§ç³»ç»Ÿï¼ˆPrometheusã€Grafanaã€Opentelemetryï¼‰ï¼Œè®°å½•è¯·æ±‚è€—æ—¶ã€é”™è¯¯ç‡ã€QPSã€çº¿ç¨‹æ± çŠ¶å†µç­‰ã€‚ æ”¯æŒåˆ†å¸ƒå¼ Tracingï¼ˆå¦‚ OpenTracing/Jaegerï¼‰ï¼Œä¾¿äºæ•…éšœåˆ†æä¸å»¶è¿Ÿè¿½è¸ªã€‚ 8. æµ‹è¯•ä¸éƒ¨ç½²\r#\ræä¾›å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œæ€§èƒ½å‹æµ‹è„šæœ¬ï¼ˆä¾‹å¦‚åŸºäº gRPC æ¡†æ¶æˆ– HTTP2ï¼‰ã€‚ å¼•å…¥ CI/CD å’Œå®¹å™¨éƒ¨ç½²ï¼ˆDocker + Kubernetesï¼‰ï¼Œé…å¥—å¥åº·æ£€æŸ¥å’Œæ»šåŠ¨å‡çº§æœºåˆ¶ã€‚ âœ… English Version\r#\r1. Interface Definition \u0026amp; Serialization\r#\rUse an IDL (e.g., Protobuf or Thrift) to define service contracts, enabling cross-language support and codegen for type-safe client/server stubsÂ (\ren.wikipedia.org). Opt for efficient binary serialization (Protobuf, Capâ€™n Proto) with optional compression (Snappy/LZ4) to optimize payload size and speedÂ (\ren.wikipedia.org). 2. Transport Layer \u0026amp; Communication\r#\rLeverage HTTP/2 or raw TCP with bidirectional streaming (gRPC) or custom async I/O for high concurrency. Implement connection pooling and heartbeats to manage resource usage and reduce latency. 3. Client Stub \u0026amp; Server Skeleton\r#\rClient stubs wrap serialization, network calls, timeouts, and retry mechanisms (with idempotent retries and timeout support)Â (\rbulbapp.io). Use interceptor chains on the server to handle auth, logging, rate-limiting, metrics, and tracingâ€”enabling clear separation of concernsÂ . 4. Service Discovery \u0026amp; Load Balancing\r#\rIntegrate with service registries (Consul, Nacos, Eureka, ZooKeeper) for auto-discovery and LB. Implement client-side load balancing (round-robin, consistent hashing, weighted) and support dynamic updates. 5. Error Handling \u0026amp; Resilience\r#\rDefine consistent error codes; support retry strategies with exponential backoff, focusing on idempotent operations. Incorporate circuit breakers and fallback mechanisms to prevent cascading failuresÂ (\rprogramming.vip, bulbapp.io). 6. Security \u0026amp; Authentication\r#\rSupport TLS encryption, mTLS, and token-based authentication (OAuth2/JWT). Enforce strict validation to protect against injection and unauthorized access. 7. Performance \u0026amp; Observability\r#\rEnable payload compression and batch requests to lower latency and throughput overhead. Instrument with Prometheus/Grafana/OpenTelemetry to monitor QPS, latency, errors, thread metrics. Integrate distributed tracing (OpenTelemetry, Jaeger) for end-to-end request visibilityÂ . 8. Testing \u0026amp; Deployment\r#\rProvide unit/integration tests and benchmark tools to validate correctness and performance. Package with Docker/Kubernetes, including health checks and rolling upgrades, integrated via CI/CD pipelines. ğŸ§  æ€»ç»“\r#\rè®¾è®¡ä¸€ä¸ªé«˜è´¨é‡ RPC æ¡†æ¶åº”èšç„¦ä»¥ä¸‹æ–¹å‘ï¼š\nå¯é é€šä¿¡ï¼ˆIDL + åºåˆ—åŒ– + ä¼ è¾“å±‚ï¼‰ æœåŠ¡æ³¨å†Œä¸æ²»ç† å¯æ’æ‹”çš„æ‹¦æˆªæœºåˆ¶ é”™è¯¯å®¹å¿èƒ½åŠ› å®‰å…¨ä¸è®¤è¯ ç›‘æ§+Tracing å…¨é“¾è·¯å¯è§‚æµ‹ è‰¯å¥½çš„æµ‹è¯•å’Œéƒ¨ç½²æ”¯æŒ é‡‡ç”¨è¿™äº›åŸåˆ™ï¼Œå¹¶å‚è€ƒæˆç†Ÿæ¡†æ¶ï¼ˆå¦‚ gRPCã€Thriftã€Dubboï¼‰çš„å®ç°æ–¹å¼ä¸è®¾è®¡ï¼Œå¯ä»¥å¸®åŠ©ä½ ä»é›¶æ„å»ºä¸€ä¸ªç¨³å®šé«˜æ•ˆã€æ˜“ç»´æŠ¤çš„ RPC å¹³å°ã€‚\n"},{"id":34,"href":"/docs/study/base/saga-best-practices/","title":"Saga æ¨¡å¼æœ€ä½³å®è·µ","section":"åŸºç¡€","content":"\rSaga æœåŠ¡è®¾è®¡çš„å®è·µç»éªŒ\r#\rå…è®¸ç©ºè¡¥å¿ ç©ºè¡¥å¿ï¼šåŸæœåŠ¡æœªæ‰§è¡Œï¼Œè¡¥å¿æœåŠ¡æ‰§è¡Œäº† å‡ºç°åŸå› ï¼š åŸæœåŠ¡ è¶…æ—¶ï¼ˆä¸¢åŒ…ï¼‰ Saga äº‹åŠ¡è§¦å‘ å›æ»š æœªæ”¶åˆ° åŸæœåŠ¡è¯·æ±‚ï¼Œå…ˆæ”¶åˆ° è¡¥å¿è¯·æ±‚ æ‰€ä»¥æœåŠ¡è®¾è®¡æ—¶éœ€è¦å…è®¸ç©ºè¡¥å¿, å³æ²¡æœ‰æ‰¾åˆ°è¦è¡¥å¿çš„ä¸šåŠ¡ä¸»é”®æ—¶è¿”å›è¡¥å¿æˆåŠŸå¹¶å°†åŸä¸šåŠ¡ä¸»é”®è®°å½•ä¸‹æ¥\né˜²æ‚¬æŒ‚æ§åˆ¶ æ‚¬æŒ‚ï¼šè¡¥å¿æœåŠ¡ æ¯” åŸæœåŠ¡ å…ˆæ‰§è¡Œ å‡ºç°åŸå› ï¼š åŸæœåŠ¡ è¶…æ—¶ï¼ˆæ‹¥å µï¼‰ Saga äº‹åŠ¡å›æ»šï¼Œè§¦å‘ å›æ»š æ‹¥å µçš„ åŸæœåŠ¡ åˆ°è¾¾ æ‰€ä»¥è¦æ£€æŸ¥å½“å‰ä¸šåŠ¡ä¸»é”®æ˜¯å¦å·²ç»åœ¨ç©ºè¡¥å¿è®°å½•ä¸‹æ¥çš„ä¸šåŠ¡ä¸»é”®ä¸­å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™è¦æ‹’ç»æœåŠ¡çš„æ‰§è¡Œ\nå¹‚ç­‰æ§åˆ¶ åŸæœåŠ¡ä¸è¡¥å¿æœåŠ¡éƒ½éœ€è¦ä¿è¯å¹‚ç­‰æ€§, ç”±äºç½‘ç»œå¯èƒ½è¶…æ—¶, å¯ä»¥è®¾ç½®é‡è¯•ç­–ç•¥ï¼Œé‡è¯•å‘ç”Ÿæ—¶è¦é€šè¿‡å¹‚ç­‰æ§åˆ¶é¿å…ä¸šåŠ¡æ•°æ®é‡å¤æ›´æ–° ç¼ºä¹éš”ç¦»æ€§çš„åº”å¯¹\r#\rç”±äº Saga äº‹åŠ¡ä¸ä¿è¯éš”ç¦»æ€§, åœ¨æç«¯æƒ…å†µä¸‹å¯èƒ½ç”±äºè„å†™æ— æ³•å®Œæˆå›æ»šæ“ä½œ, æ¯”å¦‚ä¸¾ä¸€ä¸ªæç«¯çš„ä¾‹å­, åˆ†å¸ƒå¼äº‹åŠ¡å†…å…ˆç»™ç”¨æˆ· A å……å€¼, ç„¶åç»™ç”¨æˆ· B æ‰£å‡ä½™é¢, å¦‚æœåœ¨ç»™ A ç”¨æˆ·å……å€¼æˆåŠŸ, åœ¨äº‹åŠ¡æäº¤ä»¥å‰, A ç”¨æˆ·æŠŠä½™é¢æ¶ˆè´¹æ‰äº†, å¦‚æœäº‹åŠ¡å‘ç”Ÿå›æ»š, è¿™æ—¶åˆ™æ²¡æœ‰åŠæ³•è¿›è¡Œè¡¥å¿äº†ã€‚è¿™å°±æ˜¯ç¼ºä¹éš”ç¦»æ€§é€ æˆçš„å…¸å‹çš„é—®é¢˜, å®è·µä¸­ä¸€èˆ¬çš„åº”å¯¹æ–¹æ³•æ˜¯ï¼š ä¸šåŠ¡æµç¨‹è®¾è®¡æ—¶éµå¾ªâ€œå®å¯é•¿æ¬¾, ä¸å¯çŸ­æ¬¾â€çš„åŸåˆ™, é•¿æ¬¾æ„æ€æ˜¯å®¢æˆ·å°‘äº†é’±æœºæ„å¤šäº†é’±, ä»¥æœºæ„ä¿¡èª‰å¯ä»¥ç»™å®¢æˆ·é€€æ¬¾, åä¹‹åˆ™æ˜¯çŸ­æ¬¾, å°‘çš„é’±å¯èƒ½è¿½ä¸å›æ¥äº†ã€‚æ‰€ä»¥åœ¨ä¸šåŠ¡æµç¨‹è®¾è®¡ä¸Šä¸€å®šæ˜¯å…ˆæ‰£æ¬¾ã€‚ æœ‰äº›ä¸šåŠ¡åœºæ™¯å¯ä»¥å…è®¸è®©ä¸šåŠ¡æœ€ç»ˆæˆåŠŸ, åœ¨å›æ»šä¸äº†çš„æƒ…å†µä¸‹å¯ä»¥ç»§ç»­é‡è¯•å®Œæˆåé¢çš„æµç¨‹, æ‰€ä»¥çŠ¶æ€æœºå¼•æ“é™¤äº†æä¾›â€œå›æ»šâ€èƒ½åŠ›è¿˜éœ€è¦æä¾›â€œå‘å‰â€æ¢å¤ä¸Šä¸‹æ–‡ç»§ç»­æ‰§è¡Œçš„èƒ½åŠ›, è®©ä¸šåŠ¡æœ€ç»ˆæ‰§è¡ŒæˆåŠŸ, è¾¾åˆ°æœ€ç»ˆä¸€è‡´æ€§çš„ç›®çš„ã€‚ æ€§èƒ½ä¼˜åŒ–\r#\ré…ç½®å®¢æˆ·ç«¯å‚æ•°client.rm.report.success.enable=falseï¼Œå¯ä»¥åœ¨å½“åˆ†æ”¯äº‹åŠ¡æ‰§è¡ŒæˆåŠŸæ—¶ä¸ä¸ŠæŠ¥åˆ†æ”¯çŠ¶æ€åˆ° serverï¼Œä»è€Œæå‡æ€§èƒ½ã€‚ å½“ä¸Šä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€è¿˜æ²¡æœ‰ä¸ŠæŠ¥çš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªåˆ†æ”¯äº‹åŠ¡å·²æ³¨å†Œï¼Œå¯ä»¥è®¤ä¸ºä¸Šä¸€ä¸ªå®é™…å·²æˆåŠŸ\n"},{"id":35,"href":"/docs/study/cache/solution/","title":"æ–¹æ¡ˆ","section":"ç¼“å­˜","content":"\râœ… ä¸€ã€å¸¸è§ç¼“å­˜æ–¹æ¡ˆå¯¹æ¯”\r#\rç¼“å­˜ç­–ç•¥ ç‰¹ç‚¹ é€‚åˆåœºæ™¯ ä¼˜ç¼ºç‚¹ Redis é›†ç¾¤ åˆ†å¸ƒå¼å†…å­˜æ•°æ®åº“ï¼Œæ”¯æŒå¤šæ•°æ®ç»“æ„ã€æŒä¹…åŒ–ã€åˆ†ç‰‡ é«˜é¢‘è®¿é—®ã€åˆ†å¸ƒå¼ç³»ç»Ÿã€è·¨æœåŠ¡ç¼“å­˜ âœ… åŠŸèƒ½å¼ºï¼Œæ”¯æŒè¿‡æœŸç­–ç•¥ã€å‘å¸ƒè®¢é˜…ã€Lua è„šæœ¬\nâŒ æˆæœ¬è¾ƒé«˜ã€å¤æ‚åº¦è¾ƒå¤§ Memcached é«˜æ€§èƒ½ key-value å†…å­˜ç¼“å­˜ï¼Œæ— æŒä¹…åŒ– ç®€å• kv ç¼“å­˜ã€å¤§é‡è¯»ã€æ— æ•°æ®ç»“æ„éœ€æ±‚ âœ… é€Ÿåº¦å¿«ï¼Œè½»é‡çº§\nâŒ ä¸æ”¯æŒå¤æ‚æ•°æ®ç»“æ„ã€æ•°æ®æ˜“ä¸¢å¤± æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚ Guava Cacheï¼‰ æœåŠ¡è¿›ç¨‹å†…å­˜ç¼“å­˜ çƒ­ç‚¹æ•°æ®ã€æœ¬åœ°é…ç½®ã€å°è§„æ¨¡ç¼“å­˜ âœ… æå¿«è®¿é—®ã€æ— ç½‘ç»œå»¶è¿Ÿ\nâŒ ä¸å…±äº«ã€æ˜“è¿‡æœŸä¸ä¸€è‡´ CDN ç¼“å­˜ï¼ˆå¦‚ Cloudflareã€AWS CloudFrontï¼‰ åŸºäº HTTP é™æ€æ–‡ä»¶ç¼“å­˜ å›¾ç‰‡ã€è§†é¢‘ã€å‰ç«¯é™æ€èµ„æº âœ… å…¨çƒåŠ é€Ÿï¼Œç”¨æˆ·ç«¯å°±è¿‘è·å–\nâŒ ä¸é€‚ç”¨äºåŠ¨æ€æ•°æ® âœ… äºŒã€å¦‚ä½•é€‰æ‹©æœ€ç»ˆæ–¹æ¡ˆï¼Ÿ\r#\ré€‰æ‹©ç¼“å­˜æ–¹æ¡ˆçš„ä¾æ®ï¼Œé€šå¸¸å›´ç»• ä¸€è‡´æ€§éœ€æ±‚ + çƒ­ç‚¹ç¨‹åº¦ + æˆæœ¬ + æŠ€æœ¯å¤æ‚åº¦ è¿™å‡ æ–¹é¢å±•å¼€ã€‚\nç¤ºä¾‹ï¼šæŸ SaaS å¹³å°æ¥å£ç¼“å­˜é€‰æ‹©è·¯å¾„\r#\ré€‰é¡¹ åŸå›  âŒ æœ¬åœ°ç¼“å­˜ æ•°æ®åœ¨å¤šæœåŠ¡å®ä¾‹é—´ä¸å…±äº«ï¼Œä¸é€‚ç”¨äºé«˜ä¸€è‡´æ€§ âŒ Memcached ä¸æ”¯æŒæŒä¹…åŒ–ã€é›†ç¾¤åŒ–ä¸æ–¹ä¾¿ï¼Œæ•°æ®ç»“æ„èƒ½åŠ›å¼± âœ… Redis é›†ç¾¤ æ”¯æŒ key è¿‡æœŸã€LRU æ·˜æ±°ç­–ç•¥ã€æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå¯æ”¯æ’‘é«˜å¹¶å‘ âœ… CDNï¼ˆæ­é…ä½¿ç”¨ï¼‰ ç”¨äºå‰ç«¯é™æ€èµ„æºã€å…¬å…± API GET ç¼“å­˜ï¼Œå‡è½»åç«¯å‹åŠ› æœ€ç»ˆæ–¹æ¡ˆï¼š\nRedis Cluster + CDN + æœ¬åœ°çƒ­ç‚¹ç¼“å­˜ï¼ˆç»„åˆç­–ç•¥ï¼‰\nâœ… ä¸‰ã€å¦‚æœä¸šåŠ¡å¢é•¿ 10 å€ï¼Œç¼“å­˜å±‚å¦‚ä½•æ‰©å±•ï¼Ÿ\r#\rå‡è®¾ä½ å½“å‰ QPS ä¸º 1,000ï¼Œç›®æ ‡æ˜¯æ”¯æ’‘ QPS 10,000 ç”šè‡³æ›´é«˜ã€‚\nğŸ”¹ 1. Redis ç¼“å­˜å±‚æ‰©å±•ç­–ç•¥\r#\ræªæ–½ è¯´æ˜ æ°´å¹³æ‰©å±• Redis Cluster å¢åŠ åˆ†ç‰‡èŠ‚ç‚¹ï¼ŒRedis è‡ªåŠ¨åš key çš„ slot åˆ†é… ä¸»ä»å¤åˆ¶ + å“¨å…µ æé«˜è¯»èƒ½åŠ›ï¼Œæ•…éšœè‡ªåŠ¨åˆ‡æ¢ï¼ˆSentinelï¼‰ å†·çƒ­åˆ†ç¦»ç¼“å­˜ç­–ç•¥ é«˜é¢‘æ•°æ®æ”¾ Redisï¼Œä½é¢‘æ•°æ®è€ƒè™‘è¯»å– DB æˆ–é¢„çƒ­ç¼“å­˜ è°ƒæ•´ TTL + è®¾ç½®æ·˜æ±°ç­–ç•¥ é¿å…ç¼“å­˜æ’‘çˆ†å†…å­˜ï¼Œé‡‡ç”¨ LRU æˆ– LFU å¼•å…¥äºŒçº§ç¼“å­˜ å¦‚æœ¬åœ°ç¼“å­˜ + Redisï¼Œå‡å°‘çƒ­ç‚¹ key çš„è®¿é—®å‹åŠ› åŠ å‹æµ‹è¯• + é¢„çƒ­æœºåˆ¶ æœåŠ¡å¯åŠ¨æ—¶åŠ è½½çƒ­ç‚¹æ•°æ®ï¼Œé¿å…ç¼“å­˜ç©¿é€ ğŸ”¹ 2. CDN å±‚æ‰©å±•ç­–ç•¥\r#\rç­–ç•¥ è¯´æ˜ Cache-Control ä¼˜åŒ– æ§åˆ¶ç¼“å­˜æ—¶é•¿ã€æ›´æ–°ç­–ç•¥ï¼Œå‡å°‘è¯·æ±‚å›æºé¢‘ç‡ å†…å®¹ç‰ˆæœ¬åŒ– é™æ€èµ„æºå¢åŠ  hash é¿å… CDN ç¼“å­˜ä¸ä¸€è‡´ è¾¹ç¼˜å‡½æ•°ï¼ˆEdge Functionï¼‰ å¦‚ Cloudflare Workersï¼Œåœ¨è¾¹ç¼˜èŠ‚ç‚¹å¤„ç†è¯·æ±‚é€»è¾‘ï¼Œè¿›ä¸€æ­¥é™ä½å»¶è¿Ÿ ğŸ”¹ 3. ç¼“å­˜å¤±æ•ˆä¸ç©¿é€é˜²æŠ¤\r#\ré—®é¢˜ è§£å†³ç­–ç•¥ ç¼“å­˜å‡»ç©¿ çƒ­ç‚¹ key è®¾ç½®è¾ƒé•¿ TTL + åŠ é”æ›´æ–° ç¼“å­˜é›ªå´© è®¾ç½® TTL æ—¶åŠ å…¥éšæœºæ³¢åŠ¨ï¼Œé¿å…å¤§è§„æ¨¡åŒæ—¶å¤±æ•ˆ ç¼“å­˜ç©¿é€ æŸ¥è¯¢å‰åˆ¤æ–­å‚æ•°åˆæ³•æ€§ + å¯¹ç©ºç»“æœä¹Ÿç¼“å­˜ï¼ˆçŸ­æœŸ TTLï¼‰ âœ… å››ã€æ€»ç»“é€‰å‹ä¸æ‰©å±•æ€è·¯\r#\ré€‰æ‹©æ–¹æ¡ˆç†ç”±ï¼ˆä»¥ Redis ä¸ºä¾‹ï¼‰ï¼š\r#\råˆ†å¸ƒå¼èƒ½åŠ›å¼ºï¼Œæ”¯æŒé›†ç¾¤æ¨ªå‘æ‰©å±•ï¼› æ•°æ®ç»“æ„ä¸°å¯Œï¼Œæ”¯æŒæ’è¡Œæ¦œã€å¸ƒéš†è¿‡æ»¤å™¨ã€é˜Ÿåˆ—ç­‰ï¼› æ”¯æŒ key è¿‡æœŸã€æŒä¹…åŒ–ã€å¤‡ä»½ã€ç›‘æ§ï¼› å¼€å‘ç”Ÿæ€å¹¿ï¼Œè¯­è¨€ SDK æˆç†Ÿã€‚ æ‰©å±•ç­–ç•¥ï¼š\r#\ré¢„ä¼°å³°å€¼æµé‡ â†’ åˆç†åˆ†ç‰‡ï¼› è¯»å¤šå†™å°‘ï¼šä¸»ä» + è¯»å†™åˆ†ç¦»ï¼› çƒ­ç‚¹å¤„ç†ï¼šåˆ†å¸ƒå¼é” + æœ¬åœ°ç¼“å­˜ï¼› æ¥å…¥ç›‘æ§æŠ¥è­¦ç³»ç»Ÿï¼ˆRedis ç›‘æ§ã€å‘½ä¸­ç‡ã€å†…å­˜ä½¿ç”¨ç­‰ï¼‰ï¼› å¢åŠ å¼‚åœ°å¤šæ´»ä¸å®¹ç¾ç­–ç•¥ï¼ˆé«˜çº§åœºæ™¯ï¼‰ã€‚ "},{"id":36,"href":"/docs/study/system-design/high-availability/","title":"é«˜å¯ç”¨æ€§","section":"ç³»ç»Ÿè®¾è®¡","content":"\ræœåŠ¡å®•æœºä¸ç½‘ç»œåˆ†åŒºæ—¶ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§ \u0026amp; CAP åŸåˆ™è§£æ\r#\rä¸€ã€æœåŠ¡å®•æœºæˆ–ç½‘ç»œåˆ†åŒºæ—¶å¦‚ä½•ä¿è¯ç³»ç»Ÿæ•´ä½“å¯ç”¨ï¼Ÿ\r#\r1. å¤šå‰¯æœ¬å†—ä½™éƒ¨ç½²\r#\rå¯¹å…³é”®æœåŠ¡éƒ¨ç½²å¤šå®ä¾‹ï¼Œåˆ†å¸ƒåœ¨ä¸åŒèŠ‚ç‚¹æˆ–å¯ç”¨åŒºï¼Œé˜²æ­¢å•ç‚¹æ•…éšœå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚ é€šè¿‡è´Ÿè½½å‡è¡¡è‡ªåŠ¨åˆ‡æ¢åˆ°å¥åº·å®ä¾‹ã€‚ 2. å¥åº·æ£€æŸ¥ä¸è‡ªåŠ¨æ•…éšœè½¬ç§»\r#\råˆ©ç”¨å¥åº·æ¢é’ˆï¼ˆLiveness/Readiness Probeï¼‰æ£€æµ‹æœåŠ¡çŠ¶æ€ï¼Œå¼‚å¸¸è‡ªåŠ¨å‰”é™¤ã€‚ K8sã€æœåŠ¡ç½‘æ ¼ç­‰æ”¯æŒè‡ªåŠ¨æµé‡è·¯ç”±è°ƒæ•´ã€‚ 3. é™æµã€ç†”æ–­å’Œé™çº§\r#\ré˜²æ­¢æ•…éšœä¼ æ’­ï¼Œå‡å°‘æ•…éšœæ‰©æ•£èŒƒå›´ï¼Œä¿éšœæ ¸å¿ƒæœåŠ¡å¯ç”¨ã€‚ åœ¨éƒ¨åˆ†ä¾èµ–ä¸å¯ç”¨æ—¶ï¼Œæä¾›é™çº§åŠŸèƒ½ç»´æŒæ ¸å¿ƒä½“éªŒã€‚ 4. æ•°æ®å‰¯æœ¬ä¸å¼‚æ­¥å¤åˆ¶\r#\rä¿è¯æ•°æ®å¤šå‰¯æœ¬å­˜å‚¨ï¼Œé¿å…å•ç‚¹æ•°æ®ä¸¢å¤±ã€‚ å¼‚æ­¥å¤åˆ¶å‡å°‘åŒæ­¥é˜»å¡ï¼Œæé«˜å¯ç”¨æ€§ï¼Œä½†å­˜åœ¨ä¸€å®šæ•°æ®ä¸€è‡´æ€§é£é™©ã€‚ 5. è®¾è®¡å¹‚ç­‰å’Œé‡è¯•æœºåˆ¶\r#\rä¿éšœè¯·æ±‚å®‰å…¨é‡è¯•ï¼Œé¿å…å› ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çš„æ•°æ®é”™è¯¯ã€‚ äºŒã€CAP åŸåˆ™ç®€ä»‹\r#\rCAP å®šç†æŒ‡å‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸èƒ½åŒæ—¶å®Œç¾æ»¡è¶³ï¼š\nCï¼ˆä¸€è‡´æ€§ Consistencyï¼‰ï¼šæ‰€æœ‰èŠ‚ç‚¹è¯»åˆ°çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œæœ€æ–°çš„å†™å…¥ç«‹å³å¯è§ã€‚ Aï¼ˆå¯ç”¨æ€§ Availabilityï¼‰ï¼šæ¯ä¸ªè¯·æ±‚éƒ½èƒ½å¾—åˆ°å“åº”ï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œç³»ç»Ÿå¯¹æ‰€æœ‰èŠ‚ç‚¹æŒç»­å¯ç”¨ã€‚ Pï¼ˆåˆ†åŒºå®¹å¿æ€§ Partition Toleranceï¼‰ï¼šç³»ç»Ÿèƒ½åœ¨ç½‘ç»œåˆ†åŒºï¼ˆèŠ‚ç‚¹é—´æ¶ˆæ¯ä¸¢å¤±æˆ–å»¶è¿Ÿï¼‰æ—¶ç»§ç»­è¿è¡Œã€‚ ç”±äºç½‘ç»œåˆ†åŒºä¸å¯é¿å…ï¼Œç³»ç»Ÿè®¾è®¡æ—¶éœ€åœ¨ä¸€è‡´æ€§å’Œå¯ç”¨æ€§ä¹‹é—´æƒè¡¡ã€‚\nä¸‰ã€å®é™…ç³»ç»Ÿä¸­çš„ CAP å–èˆ\r#\rå–èˆæ–¹å‘ è¯´æ˜ å…¸å‹åœºæ™¯æˆ–æŠ€æœ¯ CPï¼ˆä¼˜å…ˆä¸€è‡´æ€§ï¼‰ ä¿è¯æ•°æ®å¼ºä¸€è‡´æ€§ï¼Œåˆ†åŒºæ—¶ç‰ºç‰²å¯ç”¨æ€§ï¼ˆéƒ¨åˆ†è¯·æ±‚å¯èƒ½å¤±è´¥ï¼‰ ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ã€åˆ†å¸ƒå¼äº‹åŠ¡ç³»ç»Ÿ APï¼ˆä¼˜å…ˆå¯ç”¨æ€§ï¼‰ ä¿è¯ç³»ç»ŸæŒç»­å“åº”ï¼Œå…è®¸çŸ­æš‚æ•°æ®ä¸ä¸€è‡´ï¼Œåç»­è¿›è¡Œæ•°æ®åŒæ­¥ä¿®æ­£ å¤§è§„æ¨¡äº’è”ç½‘åº”ç”¨ã€ç¼“å­˜ç³»ç»Ÿã€éƒ¨åˆ† NoSQL CAï¼ˆç†è®ºä¸Šçš„ç†æƒ³ï¼‰ ä¸è€ƒè™‘ç½‘ç»œåˆ†åŒºï¼Œåªåœ¨å•èŠ‚ç‚¹æˆ–å¼ºåŒæ­¥åœºæ™¯ä¸‹èƒ½å®ç° å•æœºç³»ç»Ÿæˆ–ç½‘ç»œç¨³å®šç¯å¢ƒ å››ã€ç»“åˆåœºæ™¯çš„å®è·µå»ºè®®\r#\ræ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚æ”¯ä»˜ã€è®¢å•ï¼‰ï¼šæ›´å€¾å‘äºCPï¼Œç¡®ä¿æ•°æ®å‡†ç¡®ï¼Œå…è®¸éƒ¨åˆ†è¯·æ±‚å¤±è´¥æˆ–å»¶è¿Ÿã€‚ ç”¨æˆ·ä½“éªŒç›¸å…³ï¼ˆå¦‚æµè§ˆã€æ¨èï¼‰ï¼šå¯åå‘APï¼Œä¿è¯å“åº”é€Ÿåº¦å’Œå¯ç”¨æ€§ï¼Œå…è®¸çŸ­æš‚çš„æ•°æ®ä¸ä¸€è‡´ã€‚ é‡‡ç”¨å¼‚æ­¥è¡¥å¿å’Œæœ€ç»ˆä¸€è‡´æ€§è®¾è®¡ï¼šç”¨ Saga æ¨¡å¼ç­‰å®ç°ä¸šåŠ¡æµç¨‹çš„è¡¥å¿ï¼Œæå‡ç³»ç»Ÿå¯ç”¨æ€§ã€‚ äº”ã€æ€»ç»“\r#\rå…³æ³¨ç‚¹ è®¾è®¡ç­–ç•¥ å®•æœº/åˆ†åŒºå®¹å¿ å¤šå‰¯æœ¬å†—ä½™ã€å¥åº·æ£€æŸ¥ã€è‡ªåŠ¨æ•…éšœè½¬ç§»ã€é™çº§é™æµ CAPæƒè¡¡ æ ¹æ®ä¸šåŠ¡ä¼˜å…ˆçº§é€‰CPæˆ–APï¼Œè®¾è®¡å¹‚ç­‰ä¸è¡¥å¿æœºåˆ¶ ç³»ç»Ÿå¼¹æ€§ åˆ©ç”¨å¼‚æ­¥æœºåˆ¶ä¸æœ€ç»ˆä¸€è‡´æ€§ï¼Œæå‡å¯ç”¨æ€§åŒæ—¶ä¿è¯æ•°æ®æ­£ç¡®æ€§ "},{"id":37,"href":"/docs/study/system-design/cache-consistency/","title":"ç¼“å­˜ä¸€è‡´æ€§","section":"ç³»ç»Ÿè®¾è®¡","content":"\rå»¶è¿ŸåŒåˆ  vs Kafka\r#\rå¯¹æ¯”ç»´åº¦ å»¶è¿ŸåŒåˆ  Kafka ç¼“å­˜å¤±æ•ˆé€šçŸ¥ å®ç°éš¾åº¦ ç®€å•ï¼Œä»£ç å†…å®ç° éœ€è¦æ¥å…¥ Kafka + æ¶ˆè´¹æœºåˆ¶ ç¼“å­˜ä¸€è‡´æ€§æ§åˆ¶åŠ› ä¸ç¨³å®šï¼ˆå»¶è¿ŸæœŸé—´ä»å¯èƒ½è¢«è¦†ç›–ï¼‰ å¼ºä¸€è‡´ï¼ˆé€šçŸ¥æ‰€æœ‰æ¶ˆè´¹è€…å®æ—¶å¤±æ•ˆï¼‰ é€‚åº”å¤šæœåŠ¡ / å¤šå‰¯æœ¬ å·®ï¼Œéœ€æ¯ä¸ªæœåŠ¡éƒ½å®ç° å¼ºï¼Œå¤šæœåŠ¡å¯ç»Ÿä¸€è®¢é˜…é€šçŸ¥ å¼‚æ­¥è§£è€¦èƒ½åŠ› å¼±ï¼Œç´§è€¦åˆåœ¨ä¸šåŠ¡é€»è¾‘ä¸­ å¼ºï¼Œæ•°æ®åº“å˜æ›´ â†’ å¼‚æ­¥é€šçŸ¥ æ•…éšœå¯è¿½æº¯æ€§ å·®ï¼Œåˆ å¤±è´¥éš¾å®šä½ å¼ºï¼ŒKafka ç•™å­˜æ¶ˆæ¯å¯å›æº¯ ç½‘ç»œå¼‚å¸¸å®¹é”™æ€§ å·®ï¼Œå¤±è´¥åä¸æ˜“é‡è¯• å¥½ï¼Œå¯æ¶ˆè´¹å¤±è´¥åé‡è¯• "},{"id":38,"href":"/docs/example/introduction/","title":"ä»‹ç»","section":"Example Site","content":"\rä¸­æ–‡ç´¢å¼•é¡µ\r#\rAstris ipse furtiva\r#\rEst in vagis et Pittheus tu arge accipiter regia iram vocatur nurus. Omnes ut olivae sensit arma sorori deducit, inesset crudus, ego vetuere aliis, modo arsit? Utinam rapta fiducia valuere litora adicit cursu, ad facies\nSuis quot vota\r#\rEa furtique risere fratres edidit terrae magis. Colla tam mihi tenebat: miseram excita suadent es pecudes iam. Concilio quam velatus posset ait quod nunc! Fragosis suae dextra geruntur functus vulgata.\nTempora nisi nunc\r#\rLorem markdownum emicat gestu. Cannis sol pressit ducta. Est Idaei, tremens ausim se tutaeque, illi ulnis hausit, sed, lumina cutem. Quae avis sequens!\nvar panel = ram_design;\rif (backup + system) {\rfile.readPoint = network_native;\rsidebar_engine_device(cell_tftp_raster,\rdual_login_paper.adf_vci.application_reader_design(\rgraphicsNvramCdma, lpi_footer_snmp, integer_model));\r}\rpublic_keyboard_docking += error.controller_gibibyte_plug.ip(4,\rasciiPetaflops, software(supercomputer_compatible_status + 4));\rdynamic_disk.indexModeLaptop = bufferTftpReality;\rvar export_vlog_sequence = trinitron_flowchart + supercomputer_cluster_rj(\r-1, toolbar_powerpoint_query, -2 / multiprocessing_impression);\rLocis suis novi cum suoque decidit eadem\r#\rIdmoniae ripis, at aves, ali missa adest, ut et autem, et ab? Venit spes versus finis sermonibus patefecit murum nec est sine oculis. Ille inmota macies domoque caelestia cadit tantummodo scelus procul, corde!\nDolentem capi parte rostro alvum habentem pudor Fulgentia sanguine paret E punior consurgit lentus Vox hasta eras micantes Facibus pharetrae indetonsusque indulsit sic incurrite foliis\r#\rNefandam et prisci palmas! Blandita cutis flectitur montis macies, te nati Latiis; turbaque inferias. Virginis tibi peracta avidusque facies caper nec, e at ademptae, mira.\ndirect *= font(inputScareware(sliHome), crossplatform.byte(\rppl_encryption.excel_e_rte(integratedModelModifier), timeVirtual,\rfloating_speakers.media_printer(us, yahoo, primaryPhp)));\rfriendly_metal_flatbed(cd, isoPrimaryStorage(reader), dmaMirrored);\rif (parse_flash_cron.metalGif(1, adServiceDevice, utility)) {\radf -= operation_cdma_samba;\rimapGif.switch += torrent;\r} else {\rpmu.disk_captcha = digital_ppp_pci + recursionTransistor(5, dram);\rajax_service += grayscalePythonLock;\rgoogle_scroll_capacity = ftp + engine_dslam_sidebar / tape - 1;\r}\rdrive_rw = zipTftp;\rvar suffix = software_router_extension.dimm_ddr(-5,\rkernel_digital_minisite);\rVocavit toto; alas mitis maestus in liquidarum ab legi finitimosque dominam tibi subitus; Orionis vertitur nota. Currere alti etiam seroque cernitis innumeris miraturus amplectique collo sustinet quemque! Litora ante turba?\n"},{"id":39,"href":"/docs/hidden/meituan-1/","title":"ç¾å›¢-1","section":"éšè—","content":"ä»¥ä¸‹æŒ‰ä½ çš„ç®€å†ç»å†å’Œå…³é”®æŠ€æœ¯ç‚¹ï¼Œé’ˆå¯¹æ¯æ¡èŒè´£å’Œæˆå°±ï¼Œåˆ—å‡ºé¢è¯•å®˜å¯èƒ½è¿½é—®çš„ç»†èŠ‚é—®é¢˜ï¼Œå¹¶ç»™å‡ºç¤ºèŒƒæ€§å›ç­”æ€è·¯ã€‚å›ç­”æ€è·¯å¯ç»“åˆä½ ä¸ªäººçœŸå®ç»éªŒè¡¥å……å…·ä½“æ•°å­—æˆ–å·¥å…·ç»†èŠ‚ã€‚\nä¸€ã€2022.05 â€“ 2025.05 æ±‡ä¸°è½¯ä»¶å¼€å‘ï¼ˆå¹¿ä¸œï¼‰æœ‰é™å…¬å¸ä¸Šæµ·åˆ†å…¬å¸ é«˜çº§å…¨æ ˆå·¥ç¨‹å¸ˆ\r#\r1. â€œè®¾è®¡å¹¶å®ç°åŸºäº Java + Spring Boot çš„äº‘åŸç”Ÿå¾®æœåŠ¡å¹³å°ï¼šåœ¨ Kubernetes + Docker ç¯å¢ƒä¸­éƒ¨ç½²æ— çŠ¶æ€æœåŠ¡ï¼Œç»“åˆè‡ªåŠ¨æ‰©å®¹ä¸è´Ÿè½½å‡è¡¡ï¼Œé€šè¿‡æ•°æ®åº“åˆ†ç‰‡ä¸äº‹åŠ¡æ§åˆ¶æ”¯æ’‘ 5,000+ TPSã€å³°å€¼å¯æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼Œç³»ç»Ÿå¯ç”¨æ€§è¾¾åˆ° 99.9%+ï¼Œå¹¶åœ¨æ¶æ„ä¸­åµŒå…¥åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒä¸å®¡è®¡æ—¥å¿—ç­‰æªæ–½ï¼Œç¬¦åˆé“¶è¡Œå®‰å…¨åˆè§„æ ‡å‡†ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\ræ¶æ„æ•´ä½“è®¾è®¡\né—®ï¼šè¯·ç”»ä¸€ä¸‹è¯¥å¾®æœåŠ¡å¹³å°çš„æ•´ä½“æ¶æ„å›¾ï¼Œé‡ç‚¹ç»„ä»¶å¦‚ä½•äº¤äº’ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næè¿° API ç½‘å…³æˆ– ingressï¼ˆå¦‚ Kong/Nginx/Envoyï¼‰è´Ÿè´£æµé‡å…¥å£ï¼›åç«¯ Spring Boot å¾®æœåŠ¡é€šè¿‡ Service Meshï¼ˆå¦‚ Istio/Linkerdï¼‰æˆ–è‡ªç ”æ–¹æ¡ˆè¿›è¡ŒæœåŠ¡å‘ç°ä¸è°ƒç”¨ï¼› æ•°æ®å±‚ï¼šåˆ†ç‰‡åçš„ MySQL é›†ç¾¤ã€è¯»å†™åˆ†ç¦»æ–¹æ¡ˆï¼›Redis ç¼“å­˜å±‚ï¼›æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ Kafkaï¼‰ç”¨äºå¼‚æ­¥è§£è€¦ï¼› éƒ¨ç½²å±‚ï¼šDocker å®¹å™¨æ‰“åŒ…ï¼ŒKubernetes é›†ç¾¤éƒ¨ç½²ï¼›Horizontal Pod Autoscalerã€Cluster Autoscalerï¼›è´Ÿè½½å‡è¡¡ï¼ˆK8s Serviceã€äº‘ LBï¼‰ï¼› å®‰å…¨å±‚ï¼šTLS è¯ä¹¦ç®¡ç†ã€æœåŠ¡é—´ mTLSï¼›æƒé™æ ¡éªŒï¼ˆOAuth2/JWT æˆ–å†…éƒ¨ IAMï¼‰ï¼›å®¡è®¡æ—¥å¿—ç»„ä»¶ï¼ˆæ—¥å¿—æ”¶é›†åˆ° ELK æˆ–é›†ä¸­å®¡è®¡ç³»ç»Ÿï¼‰ï¼› ç›‘æ§ä¸é¢„è­¦ï¼šPrometheus + Grafana æˆ–å†…éƒ¨ç›‘æ§å¹³å°ï¼Œå‘Šè­¦è§„åˆ™ï¼›é“¾è·¯è¿½è¸ªï¼ˆZipkin/Sleuth æˆ–å†…éƒ¨ APMï¼‰ã€‚ æ³¨æ„ï¼šç»“åˆé“¶è¡Œåœºæ™¯è¦æåŠåˆè§„è¦æ±‚ï¼ˆåŠ å¯†ä¼ è¾“ã€å®¡è®¡ã€è®¿é—®æ§åˆ¶ã€éš”ç¦»ç­–ç•¥ç­‰ï¼‰ã€‚\nKubernetes + Docker éƒ¨ç½²ç»†èŠ‚\né—®ï¼šä½ å¦‚ä½•è®¾è®¡ Docker é•œåƒä»¥ä¿è¯å¿«é€Ÿå¯åŠ¨å’Œå®‰å…¨æ€§ï¼Ÿæœ‰å“ªäº›ä¼˜åŒ–æ‰‹æ®µï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¤šé˜¶æ®µæ„å»ºï¼šç¼–è¯‘æ‰“åŒ…é˜¶æ®µä»…åŒ…å«å¿…è¦ä¾èµ–ï¼›è¿è¡Œé•œåƒä»…åŒ…å« JRE + åº”ç”¨ jarï¼Œå‡å°ä½“ç§¯ï¼› é•œåƒå®‰å…¨æ‰«æï¼šå®šæœŸæ‰«æåŸºç¡€é•œåƒæ¼æ´ï¼›ä½¿ç”¨å®˜æ–¹æˆ–å†…éƒ¨å—ä¿¡ä»»é•œåƒï¼›æœ€å°æƒé™å®¹å™¨ç”¨æˆ·ï¼› å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼šå‰”é™¤ä¸å¿…è¦çš„åº“ï¼Œæå‰è¿›è¡Œç±»é¢„çƒ­ï¼ˆå¦‚æœé€‚ç”¨ï¼‰ï¼›JVM å‚æ•°è°ƒæ•´ï¼› é…ç½®ç®¡ç†ï¼šConfigMap/Secret æŒ‚è½½ï¼›Secrets ç®¡ç†åŠ å¯†æ•æ„Ÿä¿¡æ¯ï¼› å¥åº·æ£€æŸ¥ï¼šé…ç½® readinessProbe/livenessProbeï¼Œé¿å…æµé‡æ‰“åˆ°æœªå°±ç»ªå®ä¾‹ï¼› æ—¥å¿—ä¸æŒ‡æ ‡ï¼šå®¹å™¨å†…è¾“å‡ºç»“æ„åŒ–æ—¥å¿—ï¼Œæ–¹ä¾¿ä¾§è½¦æˆ– DaemonSet æ”¶é›†ï¼›Metrics exporter æš´éœ² JVM/åº”ç”¨æŒ‡æ ‡ã€‚ é—®ï¼šå¦‚ä½•é…ç½®è‡ªåŠ¨æ‰©å®¹ï¼Ÿæœ‰å“ªäº›æŒ‡æ ‡è§¦å‘ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nHorizontal Pod Autoscaler (HPA)ï¼šåŸºäº CPU åˆ©ç”¨ç‡ã€å†…å­˜æˆ–è‡ªå®šä¹‰æŒ‡æ ‡ï¼ˆå¦‚é˜Ÿåˆ—é•¿åº¦ã€è¯·æ±‚é€Ÿç‡ï¼‰è§¦å‘ï¼›ç»“åˆ Kubernetes Metrics Server æˆ– Prometheus Adapter ä¸ŠæŠ¥è‡ªå®šä¹‰æŒ‡æ ‡ï¼› Cluster Autoscalerï¼šå½“èŠ‚ç‚¹èµ„æºä¸è¶³æ—¶åŠ¨æ€æ·»åŠ èŠ‚ç‚¹ï¼› å¦‚ä½•é¿å…æŠ–åŠ¨ï¼šè®¾ç½®åˆé€‚çš„é˜ˆå€¼ã€å†·å´æ—¶é—´ï¼›å¯¹çªå¢æµé‡åšé™æµæˆ–é¢„çƒ­ç­–ç•¥ï¼› æµé‡å³°å€¼é¢„æ¡ˆï¼šä¸ä¸šåŠ¡åŒå­¦æ²Ÿé€šæ´»åŠ¨æ’æœŸï¼Œæå‰é¢„ç•™èµ„æºæˆ–æµé‡å‰Šå³°ç­–ç•¥ï¼ˆé™æµã€æ’é˜Ÿï¼‰ã€‚ æ”¯æ’‘ 5,000+ TPSï¼Œå³°å€¼ä¸‡çº§å¹¶å‘\né—®ï¼šå¦‚ä½•è¿›è¡Œå‹æµ‹ä»¥éªŒè¯ TPS å’Œå¹¶å‘èƒ½åŠ›ï¼Ÿç”¨åˆ°å“ªäº›å·¥å…·ï¼Œæµç¨‹å¦‚ä½•ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‹æµ‹å·¥å…·ï¼šJMeter/Gatling/Locust æˆ–å†…éƒ¨å‹æµ‹å¹³å°ï¼›ç¼–å†™è„šæœ¬æ¨¡æ‹ŸçœŸå®æµé‡ç‰¹å¾ï¼ˆçŸ­è¿æ¥/é•¿è¿æ¥ã€å¹¶å‘ç”¨æˆ·æ•°ã€è¯·æ±‚åˆ†å¸ƒï¼‰ï¼› æ•°æ®å‡†å¤‡ï¼šæ¨¡æ‹ŸçœŸå®ä¸šåŠ¡æ•°æ®ï¼Œå¦‚å¤šç§è¯·æ±‚å‚æ•°ã€ç”¨æˆ·çŠ¶æ€ã€é‰´æƒï¼› ç¯å¢ƒæ­å»ºï¼šåœ¨æ¥è¿‘ç”Ÿäº§çš„ç¯å¢ƒåšå‹æµ‹ï¼ˆæˆ–é¢„ç•™å‹æµ‹ç¯å¢ƒï¼‰ï¼Œä¿è¯è§„æ¨¡å¯æ‰©å±•ï¼› åˆ†æç“¶é¢ˆï¼šç›‘æ§ CPUã€å†…å­˜ã€GCã€çº¿ç¨‹æ± ã€æ•°æ®åº“è¿æ¥æ± ã€ç½‘ç»œå¸¦å®½ã€Redis/Kafka æ€§èƒ½æŒ‡æ ‡ï¼› ä¼˜åŒ–æªæ–½ï¼šè°ƒæ•´çº¿ç¨‹æ± å¤§å°ã€è¿æ¥æ± å¤§å°ï¼›æ•°æ®åº“ç´¢å¼•ã€åˆ†ç‰‡ç­–ç•¥ã€æŸ¥è¯¢ä¼˜åŒ–ï¼›ç¼“å­˜å‘½ä¸­ç‡ä¼˜åŒ–ï¼›æ¶ˆæ¯é˜Ÿåˆ—å¹¶å‘æ¶ˆè´¹ä¼˜åŒ–ï¼›JVM GC å‚æ•°è°ƒä¼˜ï¼›IO æ¨¡å‹ï¼ˆNIOã€å¼‚æ­¥è°ƒç”¨ç­‰ï¼‰ï¼› éªŒè¯ï¼šæ¯è½®ä¼˜åŒ–åå¤æµ‹ï¼Œç›´è‡³æ»¡è¶³ç›®æ ‡æˆ–è¯„ä¼°æˆæœ¬æ”¶ç›Šã€‚ é—®ï¼šå½“æ•°æ®åº“æˆä¸ºç“¶é¢ˆï¼Œä½ å¦‚ä½•æ‰©å±•ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‚ç›´æ‰©å±• vs æ°´å¹³æ‰©å±•ï¼šæ°´å¹³åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼›è¯»å†™åˆ†ç¦»ï¼šMaster/Replicaï¼›åŸºäºä¸šåŠ¡ç»´åº¦æˆ–ç”¨æˆ· ID è¿›è¡Œè·¯ç”±ï¼› åˆ†ç‰‡å®ç°ï¼šä½¿ç”¨ä¸­é—´ä»¶å¦‚ ShardingSphereï¼Œæˆ–è‡ªç ”è·¯ç”±ï¼›å¤„ç†è·¨åˆ†ç‰‡äº‹åŠ¡ï¼šé¿å…åˆ†å¸ƒå¼äº‹åŠ¡å¼€é”€ï¼Œæˆ–ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆï¼› ç¼“å­˜é™çº§ï¼šçƒ­ç‚¹æ•°æ®æ”¾ Redisï¼›äºŒçº§ç¼“å­˜è®¾è®¡ï¼› é™ä½äº‹åŠ¡èŒƒå›´ï¼šå°½é‡ç¼©çŸ­äº‹åŠ¡æŒæœ‰é”æ—¶é—´ï¼›ä½¿ç”¨ä¹è§‚é”ã€è¡Œçº§é”ï¼› å¼‚æ­¥åŒ–ï¼šæŸäº›éå¼ºä¸€è‡´æ“ä½œå¼‚æ­¥å¤„ç†ã€‚ æ•°æ®åº“åˆ†ç‰‡ä¸äº‹åŠ¡æ§åˆ¶\né—®ï¼šåœ¨åˆ†ç‰‡åå¦‚ä½•ä¿è¯äº‹åŠ¡ä¸€è‡´æ€§ï¼Ÿæœ‰æ²¡æœ‰ä½¿ç”¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå¦‚ä½•é¿å…ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\né¿å…è·¨åˆ†ç‰‡å¼ºäº‹åŠ¡ï¼šè®¾è®¡æ—¶å°½é‡è®©ä¸šåŠ¡è¯·æ±‚åªè§¦åŠå•ä¸€åˆ†ç‰‡ï¼› è¡¥å¿å¼äº‹åŠ¡æˆ–æœ€ç»ˆä¸€è‡´æ€§ï¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ— + çŠ¶æ€æœºï¼Œå®ç°å¼‚æ­¥è¡¥å¿ï¼› å¦‚æœå¿…é¡»åˆ†å¸ƒå¼äº‹åŠ¡ï¼šè¯„ä¼°æ€§èƒ½å¼€é”€ï¼Œä½¿ç”¨ä¸¤é˜¶æ®µæäº¤æˆ– TCCï¼Œä½†åœ¨é«˜ TPS åœºæ™¯ä¸‹è°¨æ…ï¼› ä¸¾ä¾‹ï¼šæŸåœºæ™¯ä¸‹å°†ç”¨æˆ·ä¸»è¡¨ä¸å…³è”è¡¨æ”¾åŒåˆ†ç‰‡ï¼›è·¨ä¸šåŠ¡åœºæ™¯æ‹†åˆ†æˆå¤šä¸ªå­æµç¨‹ï¼Œå„è‡ªç”¨æœ¬åœ°äº‹åŠ¡å¹¶é€šè¿‡å¼‚æ­¥æ¶ˆæ¯åè°ƒã€‚ é—®ï¼šæ•°æ®åº“åˆ‡åˆ†ç­–ç•¥å¦‚ä½•é€‰ï¼Ÿæ°´å¹³åˆ‡åˆ†è¿˜æ˜¯å‚ç›´åˆ‡åˆ†ï¼Ÿä¾æ®æ˜¯ä»€ä¹ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå‚ç›´åˆ‡åˆ†ï¼šæŒ‰æ¨¡å—æˆ–åŠŸèƒ½æ‹†åˆ†æœåŠ¡ï¼Œå‡å°‘è¡¨å¤§å°ï¼›æ°´å¹³åˆ‡åˆ†ï¼šæŒ‰ç”¨æˆ· IDã€ä¸šåŠ¡ ID ç­‰å‡åŒ€åˆ†å¸ƒï¼›éœ€è€ƒè™‘çƒ­ç‚¹æ•°æ®ã€æ•°æ®å€¾æ–œï¼› åˆ†ç‰‡é”®é€‰å–ï¼šå°½é‡ä¿è¯æ•£åˆ—å‡åŒ€ã€æ˜“ç”¨äºæŸ¥è¯¢è·¯ç”±ï¼› ç›‘æ§åˆ†ç‰‡åè´Ÿè½½ï¼šé¿å…å•åˆ†ç‰‡è¿‡çƒ­ï¼›åŠ¨æ€æ‰©å®¹ç­–ç•¥ï¼› ç‰ˆæœ¬è¿­ä»£ä¸­å¦‚ä½•åœ¨çº¿æ‹†åˆ†æˆ–åˆå¹¶åˆ†ç‰‡ã€‚ åŠ å¯†ä¼ è¾“ã€æƒé™æ ¡éªŒä¸å®¡è®¡æ—¥å¿—\né—®ï¼šä½ å¦‚ä½•å®ç°æœåŠ¡é—´æˆ–å®¢æˆ·ç«¯åˆ°æœåŠ¡çš„åŠ å¯†ä¼ è¾“ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nTLSï¼šIngress/TLS Terminationï¼ŒæœåŠ¡é—´ mTLSï¼›è¯ä¹¦ç®¡ç†ï¼ˆè‡ªç­¾ vs CA æœºæ„ï¼‰ï¼›è‡ªåŠ¨ç»­æœŸï¼ˆå¦‚ä½¿ç”¨ cert-managerï¼‰ï¼› æ•°æ®åº“åŠ å¯†ï¼šä¼ è¾“åŠ å¯† (SSL/TLS)ã€é™æ€åŠ å¯† (TDE)ï¼› æ¶ˆæ¯é˜Ÿåˆ—åŠ å¯†é…ç½®ï¼› åŠ å¯†æ€§èƒ½å½±å“åŠä¼˜åŒ–ï¼šç¡¬ä»¶åŠ é€Ÿã€TLS åå•†ä¼˜åŒ–ã€‚ é—®ï¼šæƒé™æ ¡éªŒæ–¹æ¡ˆï¼Ÿå¦‚ä½•è®¾è®¡ç»Ÿä¸€é‰´æƒä½“ç³»ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nèº«ä»½è®¤è¯ï¼šOAuth2/JWT æˆ–å†…éƒ¨ SSOï¼›API Gateway éªŒè¯ Tokenï¼›æœåŠ¡é—´è°ƒç”¨å¸¦ Token/è¯ä¹¦ï¼› æˆæƒï¼šè§’è‰²/æƒé™æ¨¡å‹ï¼›åœ¨å¾®æœåŠ¡ä¸­ä½¿ç”¨ç»Ÿä¸€åº“æˆ–ç½‘å…³ä¾§å†³ç­–ï¼›RBAC æˆ– ABACï¼›åŠ¨æ€æƒé™ç®¡ç†ï¼› å®¡è®¡æ—¥å¿—ï¼šå“ªäº›æ“ä½œè¦è®°å½•ï¼Ÿæ—¥å¿—æ ¼å¼ç»“æ„åŒ–ï¼Œé›†ä¸­æ±‡æ€»ï¼›å¦‚ä½•ä¿è¯ä¸å¯ç¯¡æ”¹ï¼Ÿå¦‚ä½•æŸ¥è¯¢å’Œåˆ†æï¼Ÿ åˆè§„è¦æ±‚ï¼šæ—¥å¿—ä¿ç•™æ—¶é•¿ã€è®¿é—®æ§åˆ¶ã€è„±æ•å¤„ç†ã€‚ é—®ï¼šé‡åˆ°å®‰å…¨åˆè§„å†²çªå¦‚ä½•å¤„ç†ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nä¸¾ä¾‹ï¼šæŸç‰¹æ€§å½±å“åŠ å¯†æˆ–å®¡è®¡å¼€é”€ï¼Œä¸ä¸šåŠ¡å›¢é˜Ÿæ²Ÿé€šæƒè¡¡ï¼›é€šè¿‡æ€§èƒ½æµ‹è¯•è¯„ä¼°å½±å“ï¼Œæå‡ºæ”¹è¿›æ–¹æ¡ˆï¼›ä¸åˆè§„/å®‰å…¨å›¢é˜Ÿå¯¹é½ï¼›è®°å½•å†³ç­–è¿‡ç¨‹ã€‚ 2. Redis ç¼“å­˜ç­–ç•¥ã€Kafka å¼‚æ­¥è§£è€¦ã€æ•°æ®åº“åˆ†ç‰‡ä¸è¯»å†™åˆ†ç¦»ï¼Œå°†å¹³å‡å“åº”æ—¶å»¶é™ä½ 50% ä»¥ä¸Šï¼›Prometheus + Grafana æ­å»ºç›‘æ§ä¸æ•°æ®å¯è§†åŒ–å¹³å°ï¼Œæ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆï¼Œæ•…éšœå®šä½æ•ˆç‡æå‡ 100%ã€‚\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rRedis ç¼“å­˜ç­–ç•¥\né—®ï¼šå“ªäº›åœºæ™¯ç”¨ç¼“å­˜ï¼Ÿç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©å¦‚ä½•é˜²èŒƒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç¼“å­˜åœºæ™¯ï¼šçƒ­ç‚¹æ•°æ®ã€é¢‘ç¹è¯»ã€è®¡ç®—ç»“æœï¼›å¯¹éœ€è¦å¿«é€Ÿå“åº”çš„æŸ¥è¯¢åšç¼“å­˜ï¼› é˜²ç©¿é€ï¼šæå‰æ ¡éªŒå‚æ•°ã€ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼›ç¼“å­˜ç©ºå€¼ï¼› é˜²å‡»ç©¿ï¼šåŠ é”æˆ–ä½¿ç”¨äº’æ–¥é”ã€è¯·æ±‚æ’é˜Ÿï¼› é˜²é›ªå´©ï¼šè®¾ç½®ä¸åŒè¿‡æœŸæ—¶é—´ã€äºŒçº§ç¼“å­˜ï¼›å¼€å¯ Redis é«˜å¯ç”¨ï¼ˆå“¨å…µ/é›†ç¾¤ï¼‰ï¼› ç¼“å­˜ä¸€è‡´æ€§ï¼šæ›´æ–°ç­–ç•¥ï¼ˆä¸»åŠ¨å¤±æ•ˆã€å»¶è¿ŸåŒåˆ ã€æ¶ˆæ¯é€šçŸ¥ï¼‰ï¼›è€ƒè™‘ä¸šåŠ¡å¯å®¹å¿çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚ é—®ï¼šå¦‚ä½•ç›‘æ§å’Œä¼˜åŒ– Redis æ€§èƒ½ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç›‘æ§æŒ‡æ ‡ï¼šå‘½ä¸­ç‡ã€å†…å­˜ä½¿ç”¨ã€æ…¢æŸ¥è¯¢ã€è¿æ¥æ•°ã€CPUã€ç½‘ç»œå¸¦å®½ï¼› ä¼˜åŒ–ï¼šåˆç†æ•°æ®ç»“æ„ï¼ˆhashã€set ç­‰ï¼‰ï¼Œé¿å…å¤§ keyï¼›ä½¿ç”¨ pipeline/batchï¼›é…ç½®å†…å­˜æ·˜æ±°ç­–ç•¥ï¼›åˆ†ç‰‡æˆ– Cluster æ¨¡å¼ï¼›è¿ç»´ï¼šå†…å­˜é¢„ç•™ã€æŒä¹…åŒ–é…ç½®ï¼ˆAOF/RDBï¼‰å¯¹æ€§èƒ½å½±å“ã€‚ Kafka å¼‚æ­¥è§£è€¦\né—®ï¼šåœ¨ä»€ä¹ˆåœºæ™¯ä½¿ç”¨ Kafkaï¼Ÿå¦‚ä½•ä¿è¯æ¶ˆæ¯å¯é æ€§ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nåœºæ™¯ï¼šè§£è€¦é«˜å³°å†™å…¥ï¼›å¼‚æ­¥é€šçŸ¥ã€æ—¥å¿—æµï¼›æµå¼å¤„ç†ï¼› é…ç½®ï¼šacks=allï¼Œå‰¯æœ¬æ•° \u0026gt;= 2ï¼›ISR é…ç½®ï¼›ä¿æŒåˆé€‚çš„åˆ†åŒºæ•°ä»¥æ”¯æŒå¹¶å‘ï¼› æ¶ˆè´¹è€…ï¼šæ¶ˆè´¹ä½ç‚¹ç®¡ç†ï¼ˆæ‰‹åŠ¨æäº¤ vs è‡ªåŠ¨ï¼‰ï¼›å¹‚ç­‰æ¶ˆè´¹æ–¹æ¡ˆï¼›å¤„ç†å¤±è´¥é‡è¯•ä¸æ­»ä¿¡é˜Ÿåˆ—ï¼› å»¶è¿Ÿä¸ååå¹³è¡¡ï¼šæ‰¹é‡å‘é€ã€å‹ç¼©ï¼›åˆ†åŒºé”®ä¸è´Ÿè½½å‡è¡¡ï¼› ç›‘æ§ï¼šLagã€ååé‡ã€å»¶è¿Ÿã€é”™è¯¯ç‡ã€‚ é—®ï¼šå¦‚ä½•å¤„ç†æ¶ˆæ¯ä¸¢å¤±æˆ–é‡å¤ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¹‚ç­‰è®¾è®¡ï¼šä¸šåŠ¡å¤„ç†æ¥å£å…·å¤‡å¹‚ç­‰æ€§ï¼›ä½¿ç”¨å”¯ä¸€ ID æˆ–å¹‚ç­‰é”®ï¼› é‡è¯•ç­–ç•¥ï¼šé™æ¬¡é‡è¯•åå†™æ­»ä¿¡ï¼›äººå·¥æˆ–è‡ªåŠ¨è¡¥å¿æµç¨‹ï¼› äº‹åŠ¡æ¶ˆæ¯ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼šKafka äº‹åŠ¡æ”¯æŒæˆ–å¤–éƒ¨åè°ƒï¼›è°¨æ…ä½¿ç”¨ï¼› ç›‘æ§å‘Šè­¦ï¼šLag çªå¢ã€æ¶ˆè´¹å¤±è´¥å‘Šè­¦ã€‚ ç›‘æ§ä¸æ•°æ®å¯è§†åŒ–\né—®ï¼šPrometheus + Grafana å¦‚ä½•éƒ¨ç½²ä¸ä½¿ç”¨ï¼Ÿç›‘æ§å“ªäº›å…³é”®æŒ‡æ ‡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\néƒ¨ç½²æ–¹å¼ï¼šPrometheus server + exportersï¼ˆJVM exporterã€Node exporterã€è‡ªå®šä¹‰ exporterï¼‰ï¼›Alertmanager é…ç½®ï¼›Grafana Dashboard åˆ›å»ºï¼› æŒ‡æ ‡ï¼šåº”ç”¨å±‚ï¼ˆè¯·æ±‚é€Ÿç‡ã€é”™è¯¯ç‡ã€å“åº”æ—¶å»¶åˆ†å¸ƒï¼‰ã€JVMï¼ˆheap, GCï¼‰ã€å®¹å™¨ï¼ˆCPU/å†…å­˜ï¼‰ã€æ•°æ®åº“è¿æ¥æ± ã€Redis/Kafka æŒ‡æ ‡ã€å¤–éƒ¨ä¾èµ–è°ƒç”¨æ—¶å»¶ï¼›ä¸šåŠ¡æŒ‡æ ‡ï¼šTPSã€ç”¨æˆ·è¡Œä¸ºæŒ‡æ ‡ï¼›AI æ¨¡å‹è°ƒç”¨å»¶è¿Ÿ/æˆåŠŸç‡ç­‰ï¼› æŠ¥è­¦ï¼šè®¾ç½®é˜ˆå€¼æŠ¥è­¦ã€èšåˆæŠ¥è­¦ï¼Œé¿å…å‘Šè­¦é£æš´ï¼›å‘Šè­¦æ¸ é“ï¼ˆé‚®ä»¶ã€é’‰é’‰ã€Slackï¼‰ï¼› æ•°æ®å¯è§†åŒ–ï¼šä¸ºä¸åŒè§’è‰²ï¼ˆå¼€å‘ã€è¿ç»´ã€äº§å“ï¼‰å®šåˆ¶ Dashboardï¼›å†å²è¶‹åŠ¿åˆ†æç”¨äºå®¹é‡è§„åˆ’ã€‚ æ”¯æŒ 20,000+ ç”¨æˆ·çš„æ•°æ®åˆ†æå’Œ AI æ¨¡å‹é›†æˆï¼Œæ•…éšœå®šä½æ•ˆç‡æå‡ 100%\né—®ï¼šå…·ä½“å¦‚ä½•æ”¯æŒ AI æ¨¡å‹é›†æˆï¼Ÿæ•°æ®æµå’Œæµç¨‹å¦‚ä½•è®¾è®¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ•°æ®é‡‡é›†ï¼šåœ¨ä¸šåŠ¡è°ƒç”¨é“¾æˆ–æ—¥å¿—ä¸­åŸ‹ç‚¹ï¼Œç»“æ„åŒ–æ—¥å¿—æˆ–äº‹ä»¶ï¼Œsink åˆ° Kafka/æ¶ˆæ¯æ€»çº¿ï¼› æ•°æ®å­˜å‚¨ï¼šå®æ—¶å…¥åº“æˆ–æ‰¹é‡å…¥åº“åˆ°æ•°æ®ä»“åº“ (Hive/ClickHouse/æ•°æ®åº“)ã€æˆ–è€…ç›´æ¥ä¾›æ¨¡å‹è®­ç»ƒï¼› ç‰¹å¾è®¡ç®—ï¼šå®æ—¶ç‰¹å¾ä» Redis/NoSQL æå–ï¼Œç¦»çº¿ç‰¹å¾ç¦»çº¿è®¡ç®—ï¼› æ¨¡å‹æœåŠ¡ï¼šæš´éœ²æ¨¡å‹æ¨ç†æ¥å£ï¼Œé›†æˆåˆ°ä¸šåŠ¡è°ƒç”¨é“¾ï¼›è€ƒè™‘å¹¶å‘å’Œå»¶è¿Ÿï¼› å¹³å°æ”¯æŒï¼šç»Ÿä¸€æ•°æ®æ¥å…¥æ¡†æ¶ã€æ¨¡å‹ç®¡ç†æœåŠ¡ï¼ˆç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒï¼‰ã€ç›‘æ§æ¨¡å‹æ€§èƒ½ï¼ˆçº¿ä¸Šç²¾åº¦ã€å»¶è¿Ÿï¼‰ï¼› æ•…éšœå®šä½æ•ˆç‡æå‡ï¼šåˆ©ç”¨é“¾è·¯è¿½è¸ªã€ç»“æ„åŒ–æ—¥å¿—ã€æ—¥å¿—èšåˆæŸ¥è¯¢ã€é”™è¯¯åˆ†ç±»å‘Šè­¦ã€è‡ªåŠ¨åŒ–è¯Šæ–­è„šæœ¬æˆ–å¹³å°ï¼›æ¡ˆä¾‹ï¼šæŸæ¬¡çº¿ä¸Šå¼‚å¸¸ï¼Œé€šè¿‡é“¾è·¯è¿½è¸ªå¿«é€Ÿå®šä½åˆ°ä¸‹æ¸¸æœåŠ¡å»¶è¿Ÿï¼› ä¸¾ä¾‹ï¼šå¼€å‘ä¸€å¥—è‡ªåŠ©æŸ¥è¯¢å·¥å…·æˆ–è„šæœ¬ï¼Œæå‡è¯Šæ–­é€Ÿåº¦ï¼›å®Œå–„æ–‡æ¡£å’ŒçŸ¥è¯†åº“ã€‚ 3. CI/CD æµæ°´çº¿æ­å»ºä¸ä¼˜åŒ–ï¼šåŸºäº GitLab CI/Jenkinsã€Docker ä¸ Kubernetesï¼Œç»“åˆ Terraform å®ç° IaCï¼Œå®ç°å¤šç¯å¢ƒè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œå°†æµæ°´çº¿æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Œå‘å¸ƒé¢‘ç‡æå‡æ•°å€ã€å›æ»šç‡é™è‡³æä½æ°´å¹³ã€‚\r#\ré—®ï¼šè¯·æè¿°å®Œæ•´çš„ CI/CD æµç¨‹ï¼Œä»ä»£ç æäº¤åˆ°ç”Ÿäº§ä¸Šçº¿çš„å„æ­¥éª¤ã€‚\nå›ç­”æ€è·¯ï¼š\nä»£ç ç®¡ç†ï¼šGit åˆ†æ”¯ç­–ç•¥ï¼ˆGitFlow/Trunk-basedï¼‰ï¼›Merge Request å®¡æŸ¥æµç¨‹ï¼› é™æ€æ£€æŸ¥ï¼šä»£ç é£æ ¼ã€é™æ€å®‰å…¨æ‰«æã€å•å…ƒæµ‹è¯•ï¼› æ„å»ºæ‰“åŒ…ï¼šMaven/Gradle æ„å»ºï¼ŒDocker é•œåƒæ‰“åŒ…ï¼›é•œåƒæ¨åˆ°ç§æœ‰é•œåƒä»“åº“ï¼› éƒ¨ç½²ï¼šTerraform ç®¡ç†åŸºç¡€è®¾æ–½ï¼ˆK8s é›†ç¾¤ã€ç½‘ç»œã€å®‰å…¨ç»„ï¼‰ï¼›Helm Chart æˆ– Kustomize éƒ¨ç½²å¾®æœåŠ¡åˆ°ä¸åŒç¯å¢ƒï¼ˆdev/test/stage/prodï¼‰ï¼› è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šé›†æˆæµ‹è¯•ã€æ¥å£æµ‹è¯•ã€å‹æµ‹è„šæœ¬è§¦å‘ï¼›æµ‹è¯•é€šè¿‡åè‡ªåŠ¨æ¨è¿›ï¼› å‘å¸ƒç­–ç•¥ï¼šæ»šåŠ¨å‡çº§ã€è“ç»¿/é‡‘ä¸é›€å‘å¸ƒï¼›ç›‘æ§æ–°ç‰ˆæœ¬æŒ‡æ ‡ï¼ŒçŸ­æœŸå›æ»šè§¦å‘æ¡ä»¶ï¼› å›æ»šï¼šè‡ªåŠ¨åŒ–æˆ–æ‰‹åŠ¨å›æ»šæµç¨‹ï¼›ä¿æŒæ•°æ®åº“å…¼å®¹ï¼› å‘å¸ƒåéªŒè¯ï¼šSmoke testã€å¥åº·æ£€æŸ¥ï¼›å‘Šè­¦ä¸è§‚å¯Ÿï¼› æ—¶é—´ä¼˜åŒ–ï¼šå¹¶è¡Œæ„å»ºã€ç¼“å­˜ä¾èµ–ã€æ„å»ºé•œåƒåˆ†å±‚ä¼˜åŒ–ã€å…±äº«runneræˆ–èŠ‚ç‚¹ï¼›å‡å°‘å†—ä½™æ­¥éª¤ï¼› å›æ»šç‡é™ä½æªæ–½ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•è¦†ç›–ã€é¢„å‘å¸ƒç¯å¢ƒéªŒè¯ã€ç°åº¦å‘å¸ƒè§‚å¯Ÿã€å¿«é€Ÿå›æ»šè„šæœ¬ï¼› å›¢é˜Ÿåä½œï¼šå¦‚ä½•ä¸æµ‹è¯•ã€è¿ç»´ã€äº§å“ååŒç¡®å®šè‡ªåŠ¨åŒ–æµç¨‹ï¼›æ–‡æ¡£å’Œè¿è¡Œæ‰‹å†Œã€‚ é—®ï¼šTerraform åœ¨è¿™é‡Œå¦‚ä½•ä½¿ç”¨ï¼Ÿæœ‰å“ªäº›æŒ‘æˆ˜ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nTerraform ç®¡ç†äº‘èµ„æºï¼ˆé›†ç¾¤ã€ç½‘ç»œã€å®‰å…¨ç»„ã€å­˜å‚¨ï¼‰ã€Kubernetes èµ„æºï¼ˆå¦‚ CRDã€Namespaceï¼‰ï¼› çŠ¶æ€ç®¡ç†ï¼šRemote state å­˜å‚¨ã€é”å®šï¼›å¤šäººåä½œæ—¶å¦‚ä½•é¿å…å†²çªï¼› æ¨¡å—åŒ–ï¼šç¼–å†™å¯å¤ç”¨æ¨¡å—ï¼›ç¯å¢ƒéš”ç¦»ï¼›å‚æ•°åŒ–ï¼› å˜æ›´ç®¡ç†ï¼šReview Terraform planï¼›å¤„ç†ç ´åæ€§å˜æ›´ï¼›å›æ»šç­–ç•¥ï¼› æŒ‘æˆ˜ï¼šçŠ¶æ€ driftã€èµ„æºä¾èµ–å…³ç³»ã€æƒé™ç®¡ç†ã€Terraform ç‰ˆæœ¬å‡çº§å…¼å®¹ï¼› ç¤ºèŒƒï¼šæŸæ¬¡å˜æ›´å¯¼è‡´é›†ç¾¤ç½‘ç»œé…ç½®å˜æ›´ï¼Œå¦‚ä½•æ’æŸ¥å¹¶ä¿®å¤ã€‚ é—®ï¼šå¦‚ä½•å°†æµæ°´çº¿æ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¹¶è¡ŒåŒ–æ­¥éª¤ï¼šåŒæ—¶æ„å»ºå¤šä¸ªæœåŠ¡é•œåƒï¼›å¹¶è¡Œè¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼› ç¼“å­˜ä¾èµ–ï¼šMaven/Gradle æœ¬åœ°ç¼“å­˜ã€Docker layer ç¼“å­˜ï¼› è½»é‡åŒ–æµ‹è¯•ï¼šåŒºåˆ†å¿«æµ‹å’Œå…¨é‡æµ‹è¯•ï¼Œå°†å¿«æµ‹æ”¾åœ¨æäº¤é˜¶æ®µï¼›å…¨é‡æµ‹è¯•åœ¨åˆå¹¶åæˆ–å¤œé—´å®Œæˆï¼› ä¼˜åŒ–é•œåƒå¤§å°å’Œæ¨é€é€Ÿåº¦ï¼›æ¨é€åˆ°åŒæœºæˆ¿æˆ–åŠ é€Ÿçš„é•œåƒä»“åº“ï¼› è‡ªåŠ¨åŒ–èµ„æºå‡†å¤‡ï¼šåŸºç¡€ç¯å¢ƒé¢„çƒ­ï¼›åŠ¨æ€åˆ†é… runnerï¼Œæé«˜åˆ©ç”¨ç‡ï¼› ç›‘æ§ç“¶é¢ˆï¼šåˆ†ææµæ°´çº¿å„é˜¶æ®µè€—æ—¶ï¼Œé’ˆå¯¹æ€§ä¼˜åŒ–ï¼› é£é™©æ§åˆ¶ï¼šåœ¨ä¿è¯è´¨é‡å‰æä¸‹ï¼Œé¿å…å†—ä½™æ­¥éª¤ï¼›å¯¹é‡è¦æ­¥éª¤å¢åŠ æ¡ä»¶è§¦å‘ï¼Œä¾‹å¦‚ä»…åœ¨å…³é”®åˆ†æ”¯æˆ–æ ‡ç­¾æ—¶è¿›è¡Œå®Œæ•´æµç¨‹ã€‚ é—®ï¼šå‘å¸ƒé¢‘ç‡æå‡å¸¦æ¥çš„æŒ‘æˆ˜å¦‚ä½•åº”å¯¹ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næœåŠ¡æ²»ç†ï¼šå¾®æœåŠ¡ç‰ˆæœ¬å…¼å®¹ï¼›API å…¼å®¹æ€§ç­–ç•¥ï¼›ç°åº¦å‘å¸ƒï¼›å‘å¸ƒæ–‡æ¡£ä¸å˜æ›´é€šçŸ¥ï¼› æ•°æ®åº“å˜æ›´ï¼šåœ¨çº¿å˜æ›´ç­–ç•¥ï¼ˆè“ç»¿è¡¨ã€å›æ»šæ–¹æ¡ˆï¼‰ï¼›DB migration å·¥å…·ï¼ˆFlyway/Liquibaseï¼‰ï¼›é¢„æ¼”ç¯å¢ƒéªŒè¯ï¼› ç›‘æ§å‘Šè­¦ï¼šè‡ªåŠ¨åŒ–æ£€æµ‹æ–°ç‰ˆæœ¬å¼‚å¸¸ï¼›å¿«é€Ÿå®šä½å’Œå›æ»šï¼› å›¢é˜Ÿåä½œæ–‡åŒ–ï¼šDevOps æ–‡åŒ–æ¨åŠ¨ï¼›å¼€å‘è€…è‡ªåŠ©å‘å¸ƒèƒ½åŠ›ï¼›åˆ¶å®šå‘å¸ƒè§„èŒƒä¸ SLOï¼› é£é™©ç®¡ç†ï¼šæµé‡åˆ‡åˆ†ã€é™æµå¼€å…³ã€Feature Flagã€‚ äºŒã€2019.02 â€“ 2022.05 ä¸Šæµ·æ ¸å·¥ç¨‹ç ”ç©¶è®¾è®¡é™¢æœ‰é™å…¬å¸ å…¨æ ˆå·¥ç¨‹å¸ˆ\r#\r1. â€œä½¿ç”¨ Spring Boot ä¸ Spring Cloud ç°ä»£å¾®æœåŠ¡æ¶æ„é‡æ„å·¥ä¸šç³»ç»Ÿï¼šå°†å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºæ¨¡å—åŒ–æœåŠ¡ï¼Œç¡®ä¿æœåŠ¡å‘ç°ã€é…ç½®ç®¡ç†å’Œå®‰å…¨é›†æˆï¼Œå°†å¼€å‘ä¸æµ‹è¯•æ—¶é—´ç¼©çŸ­è‡³å°‘ 75%ï¼Œæ˜¾è‘—æå‡å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rå•ä½“æ‹†åˆ†æ€è·¯\né—®ï¼šæ‹†åˆ†å‰å¦‚ä½•è¯„ä¼°å•ä½“ç³»ç»Ÿç—›ç‚¹ï¼Ÿæ‹†åˆ†åå¦‚ä½•éªŒè¯æˆæ•ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç—›ç‚¹è°ƒç ”ï¼šæ€§èƒ½ç“¶é¢ˆã€éƒ¨ç½²éš¾åº¦ã€å›¢é˜Ÿåä½œå†²çªã€ä»£ç è€¦åˆåº¦é«˜ã€å‘å¸ƒå‘¨æœŸé•¿ï¼› æ‹†åˆ†åŸåˆ™ï¼šæŒ‰ä¸šåŠ¡åŸŸåˆ’åˆ†è¾¹ç•Œï¼ˆDDD é¢†åŸŸé©±åŠ¨è®¾è®¡æ€è·¯ï¼‰ï¼Œæˆ–æŒ‰å›¢é˜ŸèŒè´£åˆ’åˆ†ï¼› æœåŠ¡å‘ç°ï¼šSpring Cloud Eureka/Nacos æˆ–ä¼ä¸šå†…éƒ¨æ–¹æ¡ˆï¼› é…ç½®ç®¡ç†ï¼šSpring Cloud Config æˆ– Apollo ç­‰ï¼› å®‰å…¨é›†æˆï¼šç»Ÿä¸€è®¤è¯é‰´æƒï¼ˆOAuth2/OIDCã€JWTï¼‰ï¼›é›†ä¸­å®¡è®¡ï¼› éªŒè¯ï¼šæ‹†åˆ†å‰åéƒ¨ç½²æ—¶é—´å¯¹æ¯”ã€å•æ¬¡å‘å¸ƒé£é™©é™ä½ã€å›¢é˜Ÿå¹¶è¡Œå¼€å‘æ•ˆç‡ã€æµ‹è¯•æ—¶é—´ç¼©çŸ­æŒ‡æ ‡ã€ç³»ç»Ÿç¨³å®šæ€§æŒ‡æ ‡ã€å¯æ‰©å±•èƒ½åŠ›ï¼ˆå¯ç‹¬ç«‹æ‰©å®¹æŸæœåŠ¡ï¼‰ã€‚ é—®ï¼šå¦‚ä½•å¤„ç†è·¨æœåŠ¡è°ƒç”¨å’Œäº‹åŠ¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nåŒæ­¥è°ƒç”¨ï¼šREST/gRPCï¼›é™çº§ä¸å®¹é”™ï¼ˆFeign + Hystrix æˆ– Resilience4jï¼‰ï¼›è¶…æ—¶è®¾ç½®ã€é‡è¯•ç­–ç•¥ï¼› å¼‚æ­¥è°ƒç”¨ï¼šæ¶ˆæ¯é˜Ÿåˆ—è§£è€¦ï¼› åˆ†å¸ƒå¼äº‹åŠ¡ï¼šå°è¯•é¿å…æˆ–ä½¿ç”¨è¡¥å¿/æœ€ç»ˆä¸€è‡´æ€§ï¼›è¯´æ˜å…·ä½“åœºæ™¯å¦‚ä½•å¤„ç†ï¼› API è®¾è®¡ï¼šç‰ˆæœ¬ç®¡ç†ã€å‘åå…¼å®¹ï¼›å¥‘çº¦æµ‹è¯•ï¼› é—®ï¼šæ‹†åˆ†è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸»è¦æŒ‘æˆ˜åŠè§£å†³æ–¹æ¡ˆï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ—§æœ‰åº“ä¾èµ–ï¼šå¦‚ä½•æ‹†åˆ†å…±äº«åº“ï¼›é‡æ„å…¬å…±ç»„ä»¶ï¼› æ•°æ®åº“æ‹†åˆ†æˆ–å…±äº«åº“è¡¨ï¼šåœ¨æ‹†åˆ†å‰åå¦‚ä½•ä¿è¯æ•°æ®ä¸€è‡´ï¼› éƒ¨ç½²æµç¨‹ï¼šæ„å»º CI/CD æ”¯æŒå¾®æœåŠ¡ï¼› å›¢é˜Ÿæ²Ÿé€šï¼šåŸ¹è®­å¼€å‘ã€æ›´æ–°æ–‡æ¡£ä¸è§„èŒƒï¼›å¼•å¯¼åŒäº‹é€‚åº”æ–°æ¶æ„ï¼› ä¸¾ä¾‹å…·ä½“å›°éš¾ï¼šæŸä¸ªä¸šåŠ¡æ¨¡å—è€¦åˆå¤ªæ·±ï¼Œå¦‚ä½•é€æ­¥æŠ½ç¦»ï¼›è§£å†³æ€è·¯ä¸æ­¥éª¤ï¼› æˆæœï¼šå¼€å‘/æµ‹è¯•æ—¶é—´ç¼©çŸ­ 75% çš„å…·ä½“è¡¡é‡æ–¹å¼ï¼ˆä¾‹å¦‚å¹¶è¡Œæµ‹è¯•ã€ç‹¬ç«‹éƒ¨ç½²ã€ç¯å¢ƒéš”ç¦»ç­‰æŒ‡æ ‡ï¼‰ã€‚ æœåŠ¡å‘ç°ä¸é…ç½®ç®¡ç†\né—®ï¼šä½ ä½¿ç”¨äº†å“ªäº›å…·ä½“æŠ€æœ¯/æ¡†æ¶ï¼Ÿå¦‚ä½•ä¿è¯é«˜å¯ç”¨ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nSpring Cloud Eureka/Consul/Nacosï¼šé›†ç¾¤éƒ¨ç½²ä¿è¯é«˜å¯ç”¨ï¼›å®¢æˆ·ç«¯ç¼“å­˜ä¸å¿ƒè·³æœºåˆ¶ï¼› é…ç½®ä¸­å¿ƒï¼šSpring Cloud Config/Git-backed æˆ– Apolloï¼›é…ç½®æ›´æ–°æ¨é€ä¸å›æ»šæ”¯æŒï¼› å®‰å…¨ï¼šé…ç½®æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼Œè®¿é—®æ§åˆ¶ï¼› ç›‘æ§æœåŠ¡å®ä¾‹å¥åº·ï¼šè‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼›è‡ªåŠ¨å‰”é™¤ä¸å¯ç”¨å®ä¾‹ï¼› ç°åº¦å‘å¸ƒé…ç½®ï¼šåŠ¨æ€è°ƒæ•´å‚æ•°å½±å“èŒƒå›´ã€‚ å®‰å…¨é›†æˆ\né—®ï¼šå¦‚ä½•åœ¨å¾®æœåŠ¡æ¶æ„ä¸­å®ç°ç»Ÿä¸€è®¤è¯æˆæƒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè®¤è¯ä¸­å¿ƒï¼šOAuth2 Authorization Server æˆ–ä¼ä¸š SSOï¼›å®¢æˆ·ç«¯å‡­è¯æµæˆ–æˆæƒç æµï¼› å¾®æœåŠ¡é—´ä¿¡ä»»ï¼šJWT Token éªŒè¯ã€æœåŠ¡é—´ mTLSï¼› æƒé™ç®¡ç†ï¼šRole/Permission è®¾è®¡ã€é›†ä¸­ç­–ç•¥å†³ç­–æˆ–ç½‘å…³ä¾§é‰´æƒï¼›åŠ¨æ€æƒé™æ›´æ–°ï¼› æ—¥å¿—ä¸å®¡è®¡ï¼šè®°å½•ç”¨æˆ·æ“ä½œå’Œç³»ç»Ÿè°ƒç”¨ï¼›åˆè§„è¦æ±‚ã€‚ é—®ï¼šå·¥ä¸šç³»ç»Ÿä¸­æœ‰å“ªäº›ç‰¹æœ‰å®‰å…¨è¦æ±‚ï¼Ÿå¦‚ä½•æ»¡è¶³ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå·¥ä¸šæ§åˆ¶æˆ–æ ¸å·¥ç¨‹èƒŒæ™¯ï¼šå¯èƒ½æœ‰å¯¹å®æ—¶æ€§å’Œå¯é æ€§æ›´é«˜è¦æ±‚ï¼›å¯¹æ—¥å¿—å’Œå®¡è®¡æ›´ä¸¥æ ¼ï¼›å¯èƒ½éœ€éš”ç¦»ç½‘ç»œç¯å¢ƒï¼› åˆè§„æ ‡å‡†ï¼šå†…éƒ¨æˆ–è¡Œä¸šå®‰å…¨æ ‡å‡†ï¼›åŠ å¯†å­˜å‚¨ã€èº«ä»½ç®¡ç†ï¼›è®¿é—®å®¡è®¡ã€‚ å¼€å‘ä¸æµ‹è¯•æ—¶é—´ç¼©çŸ­ 75%\né—®ï¼šå…·ä½“å¦‚ä½•è¡¡é‡â€œå¼€å‘ä¸æµ‹è¯•æ—¶é—´â€ï¼Ÿé‡‡å–äº†å“ªäº›è‡ªåŠ¨åŒ–æ‰‹æ®µï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næŒ‡æ ‡ï¼šä»éœ€æ±‚ç¡®è®¤åˆ°ä¸Šçº¿çš„å¹³å‡å‘¨æœŸï¼›CI/CD è§¦å‘åˆ°æµ‹è¯•æŠ¥å‘Šçš„æ—¶é—´ï¼›ç¯å¢ƒå‡†å¤‡æ—¶é—´ï¼›å›å½’æµ‹è¯•è¦†ç›–ï¼› è‡ªåŠ¨åŒ–ï¼šè‡ªåŠ¨éƒ¨ç½²æµ‹è¯•ç¯å¢ƒï¼›è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒã€é›†æˆã€æ¥å£æµ‹è¯•è„šæœ¬ï¼‰ï¼›Mock ç¯å¢ƒæ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–ï¼›å¥‘çº¦æµ‹è¯•ï¼›å®¹å™¨åŒ–ç¯å¢ƒåˆå§‹åŒ–ï¼› å›¢é˜Ÿåä½œï¼šé‡‡ç”¨ DevOps æ–‡åŒ–ï¼Œè®©å¼€å‘æ›´å¤šå…³æ³¨ä¸šåŠ¡å®ç°ï¼›æå‰ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼›æŒç»­é›†æˆä¿è¯å¿«é€Ÿåé¦ˆï¼› ä¸¾ä¾‹ï¼šæŸæ¨¡å—æµ‹è¯•ç¯å¢ƒä»æ‰‹åŠ¨æ•°å°æ—¶æ­å»ºåˆ°è‡ªåŠ¨åŒ–æ•°åˆ†é’Ÿï¼›API æµ‹è¯•è„šæœ¬è¦†ç›–ç‡æå‡ç­‰ã€‚ 2. â€œé›†æˆ Kafkaï¼Œå®ç°ä¸ Siemens ç³»ç»Ÿçš„æ¯«ç§’çº§é›¶æ•°æ®ä¸¢å¤±ä¼ è¾“ï¼›åŒæ—¶æ¥å…¥ ELK æ—¥å¿—é‡‡é›†ä¸ç›‘æ§å¹³å°ï¼Œæä¾›å®æ—¶ç›‘æ§ä¸å‘Šè­¦ï¼Œå°†å¹³å‡æ•…éšœå®šä½æ—¶é—´ç¼©çŸ­ 50%ï¼Œæ”¯æŒåŸºäºæ•°æ®çš„æŒç»­ä¼˜åŒ–ï¼Œå…‹æœå·¥ä¸šç³»ç»Ÿæ¥å£å­¦ä¹ ä¸è°ƒè¯•æŒ‘æˆ˜ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\rKafka é›†æˆä¸ Siemens ç³»ç»Ÿå¯¹æ¥\né—®ï¼šSiemens ç³»ç»Ÿå¦‚ä½•äº§ç”Ÿæˆ–æä¾›æ•°æ®ï¼Ÿä½¿ç”¨ä½•ç§åè®®æˆ–æ ¼å¼ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè¯´æ˜ Siemens ç³»ç»Ÿè¾“å‡ºæ•°æ®çš„æ–¹å¼ï¼ˆå¦‚ OPC UAã€æ–‡ä»¶ã€REST æ¥å£æˆ–ä¸“æœ‰åè®®ï¼‰ï¼›å¦‚ä½•æŠ“å–æ•°æ®å¹¶æ¨é€åˆ° Kafkaï¼› è‹¥é€šè¿‡é€‚é…å™¨æˆ–ä¸­é—´ä»¶ï¼šè‡ªç ”é€‚é…å™¨æˆ–ä½¿ç”¨å·²æœ‰ SDKï¼Œå°† Siemens è¾“å‡ºè½¬æˆ Kafka æ¶ˆæ¯ï¼› æ¶ˆæ¯æ ¼å¼ï¼šJSON/Avro/Protobufï¼Œå¦‚ä½•åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼› é›¶æ•°æ®ä¸¢å¤±ï¼šKafka é…ç½®ï¼ˆacks=allã€åˆé€‚å‰¯æœ¬æ•°ã€åŒæ­¥å†™å…¥ï¼‰ï¼›å¹‚ç­‰ç”Ÿäº§è€…ï¼›äº‹åŠ¡æˆ–å¤–éƒ¨åè°ƒï¼›ç›‘æ§å‰¯æœ¬åŒæ­¥çŠ¶æ€ï¼› æ¯«ç§’çº§å»¶è¿Ÿï¼šæ‰¹é‡å‘é€ vs å®æ—¶å‘é€çš„æƒè¡¡ï¼›ç”Ÿäº§è€… flush ç­–ç•¥ã€åˆ†åŒºé€‰æ‹©ï¼›ç½‘ç»œå’Œ Kafka é›†ç¾¤æ€§èƒ½ä¼˜åŒ–ï¼›æ¶ˆè´¹è€…ä¾§å®æ—¶å¤„ç†èƒ½åŠ›ï¼› æ•…éšœæ¢å¤ï¼šè‹¥ Kafka èŠ‚ç‚¹æˆ–ç½‘ç»œæ•…éšœï¼Œå¦‚ä½•ä¿è¯æ•°æ®æ¢å¤ï¼›Consumer åç§»ç®¡ç†ï¼›é‡è¯•æˆ–è¡¥æ•°æ®æœºåˆ¶ã€‚ é—®ï¼šå¦‚ä½•éªŒè¯â€œé›¶æ•°æ®ä¸¢å¤±â€ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç«¯åˆ°ç«¯æµ‹è¯•ï¼šåœ¨æ¨¡æ‹Ÿç½‘ç»œæŠ–åŠ¨æˆ–èŠ‚ç‚¹æ•…éšœæƒ…å†µä¸‹ï¼ŒéªŒè¯æ¶ˆæ¯å®Œæ•´æ€§ï¼› ç›‘æ§ï¼šOffset å·®å¼‚ç›‘æ§ã€Kafka æ¶ˆæ¯å †ç§¯/æ»åç›‘æ§ï¼› æ•°æ®æ ¡éªŒï¼šåœ¨æ¶ˆè´¹ç«¯å­˜å‚¨æ•°æ®åï¼Œä¸æºç³»ç»Ÿå®šæœŸå¯¹æ¯”è®¡æ•°æˆ–æ ¡éªŒæ‘˜è¦ï¼› ç¾éš¾æ¢å¤æ¼”ç»ƒï¼šæ–­å¼€è¿æ¥ã€é‡å¯é›†ç¾¤æ—¶çš„æ•°æ®æ¢å¤æµ‹è¯•ã€‚ ELK æ—¥å¿—é‡‡é›†ä¸ç›‘æ§\né—®ï¼šå¦‚ä½•éƒ¨ç½² ELKï¼Ÿæ—¥å¿—é‡‡é›†æ¶æ„å¦‚ä½•è®¾è®¡ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ—¥å¿—é‡‡é›†ï¼šä½¿ç”¨ Filebeat/Fluentd/Logstash Agent éƒ¨ç½²åœ¨å„æœåŠ¡èŠ‚ç‚¹ï¼Œè¯»å–åº”ç”¨æ—¥å¿—æˆ–å®¹å™¨ stdoutï¼›ç»“æ„åŒ–æ—¥å¿—(JSON æ ¼å¼)ï¼›RPC é“¾è·¯æ—¥å¿—åŸ‹ç‚¹ï¼› æ—¥å¿—ä¼ è¾“ï¼šç»è¿‡ Logstash è§£æåå‘é€åˆ° Elasticsearchï¼›è®¾ç½®ç´¢å¼•ç­–ç•¥ï¼ˆæŒ‰å¤©/æŒ‰é¡¹ç›®ï¼‰ï¼› å¯è§†åŒ–ï¼šKibana Dashboardï¼Œå®šä¹‰æœç´¢å’Œå¯è§†åŒ–è§†å›¾ï¼›å‘Šè­¦ï¼šWatcher æˆ–ç»“åˆå¤–éƒ¨å‘Šè­¦ç»„ä»¶ï¼› é«˜å¯ç”¨ï¼šElasticsearch é›†ç¾¤é…ç½®ã€Shard/Replica è®¾ç½®ï¼›Storage è€ƒè™‘ä¸å½’æ¡£ï¼›æ—¥å¿—ä¿ç•™ç­–ç•¥ï¼› æ€§èƒ½ï¼šæ—¥å¿—é‡å¤§æ—¶å¦‚ä½•å‹ç¼©ã€åˆ†æµã€å†·å­˜ï¼›é¿å…æ—¥å¿—ç³»ç»Ÿè¿‡è½½ï¼› æ•…éšœå®šä½ï¼šå¦‚ä½•å¿«é€Ÿä»æ—¥å¿—ä¸­å®šä½é—®é¢˜ï¼Ÿä¾‹å¦‚é€šè¿‡ Trace ID æˆ–è¯·æ±‚ ID å…³è”å¤šæœåŠ¡æ—¥å¿—ï¼›è‡ªåŠ¨åŒ–è„šæœ¬æˆ– Kibana æŸ¥è¯¢æ¨¡æ¿ã€‚ é—®ï¼šå¦‚ä½•å°†æ•…éšœå®šä½æ—¶é—´ç¼©çŸ­ 50%ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå¼•å…¥å”¯ä¸€è¯·æ±‚ IDï¼ˆTrace IDï¼‰ï¼Œåœ¨å„æœåŠ¡æ—¥å¿—ä¸­ä¼ é€’å¹¶æ‰“å°ï¼› é“¾è·¯è¿½è¸ªï¼šä½¿ç”¨åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿï¼Œé…åˆæ—¥å¿—ï¼›å¿«é€Ÿå®šä½æ€§èƒ½ç“¶é¢ˆæˆ–å¼‚å¸¸æœåŠ¡ï¼› æ—¥å¿—ç»“æ„åŒ–ï¼šç»Ÿä¸€å­—æ®µï¼Œæ–¹ä¾¿æœç´¢å’Œè¿‡æ»¤ï¼›é¢„å…ˆå®šä¹‰å¸¸è§åœºæ™¯çš„æŸ¥è¯¢æ¨¡æ¿ï¼› å‘Šè­¦è‡ªåŠ¨åŒ–ï¼šå½“ Key Metric å¼‚å¸¸æ—¶è‡ªåŠ¨è§¦å‘æŠ¥è­¦å’Œè¯Šæ–­è„šæœ¬ï¼› æ–‡æ¡£ä¸çŸ¥è¯†åº“ï¼šæ•…éšœç»éªŒæ²‰æ·€ï¼›å›¢é˜ŸååŒæµç¨‹ï¼› ä¸¾ä¾‹ï¼šæ›¾æŸæ¬¡çº¿ä¸Šæ¥å£å¼‚å¸¸ï¼Œé€šè¿‡ Trace ID å’Œæ—¥å¿—å¿«é€Ÿå®šä½åˆ°æŸä¸‹æ¸¸è°ƒç”¨å¼‚å¸¸ï¼Œä»å‰éœ€æ•°å°æ—¶ï¼Œç°åœ¨å‡ åˆ†é’Ÿã€‚ å…‹æœå·¥ä¸šç³»ç»Ÿæ¥å£å­¦ä¹ ä¸è°ƒè¯•æŒ‘æˆ˜\né—®ï¼šå…·ä½“é‡åˆ°å“ªäº›æ¥å£å­¦ä¹ æˆ–è°ƒè¯•éš¾ç‚¹ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nå·¥ä¸šåè®®å¯èƒ½æ–‡æ¡£ä¸å®Œå–„æˆ–ä¸“æœ‰åè®®ï¼›éœ€è¦é˜…è¯»æ–‡æ¡£ã€æŠ“åŒ…åˆ†ææˆ–ä¸ç¡¬ä»¶å›¢é˜Ÿ/ä¾›åº”å•†æ²Ÿé€šï¼› ç¼–å†™æµ‹è¯•å·¥å…·æˆ–æ¨¡æ‹Ÿå™¨ï¼šæ¨¡æ‹Ÿ Siemens æ¥å£è¯·æ±‚è¿›è¡Œè”è°ƒï¼› è°ƒè¯•ç¯å¢ƒï¼šéƒ¨ç½²æµ‹è¯•ç¯å¢ƒæˆ–æ²™ç®±ï¼›ä½¿ç”¨æ—¥å¿—å’Œç›‘æ§å®šä½æ•°æ®æ ¼å¼æˆ–äº¤äº’é—®é¢˜ï¼› ä¸é¢†åŸŸä¸“å®¶åä½œï¼šç†è§£ä¸šåŠ¡æµç¨‹å’Œæ—¶åºè¦æ±‚ï¼›è®°å½•æ¥å£çº¦å®šå¹¶å½¢æˆæ–‡æ¡£ï¼› ä¸¾ä¾‹ï¼šæŸ Siemens è®¾å¤‡æ•°æ®æ ¼å¼å˜åŒ–å¯¼è‡´æ¶ˆæ¯è§£æå¼‚å¸¸ï¼Œé€šè¿‡æŠ“åŒ…å®šä½å¹¶æ›´æ–°è§£æé€»è¾‘ã€‚ 3. â€œç»´æŠ¤å¹¶ä¼˜åŒ–é—ç•™å‰åç«¯ç³»ç»Ÿï¼šè¿ç”¨ Reactã€Angular å‰ç«¯æ¡†æ¶å’Œ PHP åç«¯æŠ€æœ¯ï¼Œä¼˜å…ˆä¿®å¤å…³é”®ç¼ºé™·å¹¶å®Œå–„ä»£ç æ–‡æ¡£ã€‚â€\r#\rå¯èƒ½é¢è¯•å®˜æé—®\r#\ré—ç•™ç³»ç»Ÿç»´æŠ¤ç»éªŒ\né—®ï¼šå¦‚ä½•è¯„ä¼°é—ç•™ç³»ç»Ÿè´¨é‡ä¸é£é™©ï¼Ÿå¦‚ä½•å†³å®šä¿®å¤ã€é‡æ„æˆ–æ›¿æ¢ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nè¯„ä¼°æŒ‡æ ‡ï¼šç¼ºé™·é¢‘æ¬¡ã€ä»£ç è€¦åˆåº¦ã€æŠ€æœ¯æ ˆè€æ—§ã€å®‰å…¨æ¼æ´ã€æ€§èƒ½ç“¶é¢ˆï¼›ä¸šåŠ¡ä»·å€¼ï¼šæ˜¯å¦æ ¸å¿ƒåŠŸèƒ½ï¼›ç»´æŠ¤æˆæœ¬ï¼› å†³ç­–ï¼šå°èŒƒå›´é‡æ„ vs å¤§è§„æ¨¡é‡å†™ï¼›ä½¿ç”¨æŠ€æœ¯å€ºåŠ¡è¯„ä¼°è¡¨ï¼›ä¸ä¸šåŠ¡æ–¹æ²Ÿé€šï¼šæŠ•å…¥äº§å‡ºæ¯”ï¼› ä¸¾ä¾‹ï¼šæŸæ¨¡å—é¢‘å‘é”™è¯¯ï¼Œä½†é‡å†™æˆæœ¬é«˜ï¼Œé‡‡ç”¨è¡¥ä¸å¼ä¿®å¤å¹¶ç¼–å†™å•å…ƒæµ‹è¯•ï¼›åŒæ—¶è®°å½•é‡æ„è®¡åˆ’ã€‚ é—®ï¼šå‰ç«¯æ¡†æ¶ React/Angular çš„ç»´æŠ¤æŒ‘æˆ˜åŠä¼˜åŒ–ç»éªŒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nç‰ˆæœ¬å‡çº§ï¼šå¦‚ä½•å¹³æ»‘å‡çº§ React æˆ– Angular ç‰ˆæœ¬ï¼Ÿé‡åˆ°ç ´åæ€§å˜æ›´å¦‚ä½•é€‚é…ï¼Ÿ æ€§èƒ½ä¼˜åŒ–ï¼šå‰ç«¯æ¸²æŸ“æ€§èƒ½ã€bundle å¤§å°ä¼˜åŒ–ã€æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²ï¼› çŠ¶æ€ç®¡ç†ï¼šå¦‚æœä½¿ç”¨ Reduxã€MobX æˆ– Angular Serviceï¼›å¦‚ä½•é‡æ„æ··ä¹±çŠ¶æ€é€»è¾‘ï¼› æµ‹è¯•ï¼šå‰ç«¯å•å…ƒæµ‹è¯•ä¸ç«¯åˆ°ç«¯æµ‹è¯•ï¼›è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼› æ–‡æ¡£å®Œå–„ï¼šç¼–å†™ç»„ä»¶åº“æ–‡æ¡£ã€æ¥å£æ–‡æ¡£ï¼›æ–¹ä¾¿åç»­ç»´æŠ¤ã€‚ é—®ï¼šPHP åç«¯ç»´æŠ¤ç»éªŒï¼Ÿ\nå›ç­”æ€è·¯ï¼š\nä»£ç è´¨é‡ï¼šé‡æ„ä¸è§„èŒƒä»£ç ã€å¼•å…¥æˆ–æ”¹è¿› MVC æ¡†æ¶ï¼›ç¼–å†™å•å…ƒæµ‹è¯•ï¼› æ€§èƒ½é—®é¢˜ï¼šæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ã€Session ç®¡ç†ï¼› å®‰å…¨é—®é¢˜ï¼šé˜²æ­¢ SQL æ³¨å…¥ã€XSSã€CSRF ç­‰ï¼›å‡çº§ PHP ç‰ˆæœ¬åŠä¾èµ–åŒ…ï¼› æ–‡æ¡£ä¸è§„èŒƒï¼šè¡¥å……æ³¨é‡Šã€API æ–‡æ¡£ï¼ˆå¦‚ Swaggerï¼‰ï¼›å»ºç«‹ä»£ç è§„èŒƒæ£€æŸ¥æµç¨‹ï¼› éƒ¨ç½²æµç¨‹ï¼šæ”¹è¿›éƒ¨ç½²è„šæœ¬æˆ–æµç¨‹ï¼Œå‡å°‘äººå·¥æ“ä½œã€‚ é—®ï¼šå¦‚ä½•åè°ƒåŒæ—¶å¤„ç†å¤šä¸ªé—ç•™æ¨¡å—çš„è¿ç»´ä¼˜å…ˆçº§ï¼Ÿ\nå›ç­”æ€è·¯ï¼š\næ ¹æ®ä¸šåŠ¡å½±å“ã€æ•…éšœé¢‘ç‡ã€å®‰å…¨é£é™©æ’åºï¼›ä¸ä¸šåŠ¡å›¢é˜Ÿåå•†ï¼›ä¿è¯é«˜ä¼˜å…ˆçº§é—®é¢˜åŠæ—¶ä¿®å¤ï¼›åˆ¶å®šè§„èŒƒç¼“æ…¢æ”¹è¿›è®¡åˆ’ï¼› è®¾å®š SLAsï¼›ç›‘æ§é—ç•™ç³»ç»Ÿå…³é”®æŒ‡æ ‡ï¼›åœ¨ä¿®å¤æ—¶å…¼é¡¾å›å½’æµ‹è¯•ï¼› ä¸¾ä¾‹ï¼šæŸé—ç•™åŠŸèƒ½å½±å“æ ¸å¿ƒæµç¨‹ï¼Œç´§æ€¥ä¿®å¤åŒæ—¶ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¹¶è®¡åˆ’ä¸‹ä¸ªç‰ˆæœ¬é‡æ„ã€‚ ä¸‰ã€é€šç”¨æ·±æŒ–ä¸è¡Œä¸ºé—®é¢˜\r#\ré™¤äº†é’ˆå¯¹ä¸Šè¿°æŠ€æœ¯ç‚¹ï¼Œé¢è¯•å®˜è¿˜ä¼šæŒ–æ˜ä»¥ä¸‹æ–¹é¢ï¼š\nç»†èŠ‚éªŒè¯\nâ€œä½ è¯´ç³»ç»Ÿå¯ç”¨æ€§ 99.9%+ï¼Œå…·ä½“å¦‚ä½•æµ‹ç®—ï¼Ÿâ€\nå›ç­”ï¼šç»Ÿè®¡ SLA æŒ‡æ ‡ï¼Œå®šä¹‰å¯ç”¨æ€§æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚æˆåŠŸç‡ã€æœåŠ¡å¯è®¿é—®æ€§ï¼‰ï¼Œä½¿ç”¨ç›‘æ§å¹³å°æ•°æ®ï¼Œè®¡ç®—ä¸€æ®µæ—¶é—´å†…å¯ç”¨ç™¾åˆ†æ¯”ã€‚ â€œä½ æåˆ°æ•…éšœå®šä½æ•ˆç‡æå‡ 100%ï¼Œæ˜¯ä»€ä¹ˆåŸºå‡†ï¼Ÿå¦‚ä½•è¡¡é‡ï¼Ÿâ€\nå›ç­”ï¼šä¾‹å¦‚åŸæ¥å¹³å‡æ•…éšœå®šä½è€—æ—¶ 4 å°æ—¶ï¼Œä¼˜åŒ–å 2 å°æ—¶ï¼›æŒ‡æ ‡æ¥æºäºç›‘æ§å·¥å•ç³»ç»Ÿæˆ–å›¢é˜Ÿè®°å½•ã€‚ â€œæ•°æ®åº“åˆ†ç‰‡æ”¯æ’‘ 5,000+ TPSï¼Œå…·ä½“éªŒè¯è¿‡ç¨‹ï¼Ÿâ€\nå›ç­”ï¼šå‹æµ‹ç»“æœã€ç›‘æ§æ•°æ®ã€ç”Ÿäº§æµé‡ç›‘æ§å¯¹é½ï¼›æ˜¯å¦æ¨¡æ‹ŸçœŸå®åœºæ™¯åšå‹æµ‹ã€‚ å†³ç­–åŠ¨æœºä¸æƒè¡¡\nâ€œä¸ºä»€ä¹ˆé€‰ç”¨ Kafka è€Œä¸æ˜¯ RabbitMQï¼Ÿåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ä¼˜ç¼ºç‚¹ï¼Ÿâ€\nå›ç­”ï¼šKafka æ›´é€‚åˆå¤§ååã€æŒä¹…åŒ–æ—¥å¿—ã€æµå¼å¤„ç†ï¼Œä¸”å‰¯æœ¬æœºåˆ¶ä¿è¯å¯é ï¼›RabbitMQ æ›´é€‚åˆå¤æ‚è·¯ç”±æˆ–ä½å»¶è¿Ÿå•æ¶ˆæ¯åœºæ™¯ï¼›ç»“åˆä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©ã€‚ â€œä¸ºä»€ä¹ˆç”¨ Spring Cloud è€Œéå…¶ä»–å¾®æœåŠ¡æ¡†æ¶ï¼Ÿæ˜¯å¦è€ƒè™‘è¿‡è½»é‡æ–¹æ¡ˆï¼Ÿâ€\nå›ç­”ï¼šè¯´æ˜é€‰å‹èƒŒæ™¯ï¼šå›¢é˜Ÿç†Ÿæ‚‰åº¦ã€ç”Ÿæ€æ”¯æŒã€å…¬å¸å·²æœ‰å¹³å°ï¼›åŒæ—¶åœ¨è½»é‡æˆ–é«˜æ€§èƒ½åœºæ™¯ä¼šè€ƒè™‘è‡ªç ”æˆ–æ›´ç®€æ´æ–¹æ¡ˆã€‚ â€œä¸ºä»€ä¹ˆç”¨ Prometheus + Grafanaï¼Ÿæ˜¯å¦è¯„ä¼°è¿‡å…¶ä»–ç›‘æ§æ–¹æ¡ˆï¼Ÿâ€\nå›ç­”ï¼šå¼€æºã€ç¤¾åŒºä¸°å¯Œã€è‡ªå®šä¹‰æŒ‡æ ‡æ–¹ä¾¿ï¼›å¦‚æœå…¬å¸æœ‰å†…éƒ¨ç›‘æ§å¹³å°ï¼Œå¦‚ä½•å¯¹æ¥æˆ–æ‰©å±•ï¼›è€ƒè™‘æ¥å…¥æ—¥å¿—ç›‘æ§æˆ– APMã€‚ â€œä¸ºä»€ä¹ˆæ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼Ÿåœ¨é«˜å¹¶å‘å†™åœºæ™¯å¦‚ä½•ä¿è¯è¯»åˆ°æœ€æ–°æ•°æ®ï¼Ÿâ€\nå›ç­”ï¼šè¯»å†™åˆ†ç¦»å‡è½»ä¸»åº“è¯»å‹åŠ›ï¼Œä½†éœ€å¤„ç†è¯»å»¶è¿Ÿï¼šå¯¹å®æ—¶å¼ºä¸€è‡´è¯»å¯ç›´è¯»ä¸»åº“æˆ–åšç­–ç•¥ï¼›å¯¹æœ€ç»ˆä¸€è‡´æ€§åœºæ™¯å¯è¯»ä»åº“ï¼›ä½¿ç”¨ç¼“å­˜ä¼˜åŒ–ã€‚ æŒ‘æˆ˜ä¸æ•™è®­\nâ€œæåˆ°æŸæ¬¡é‡æ„å¤±è´¥æˆ–é‡åˆ°ç“¶é¢ˆï¼Œä½ æ˜¯å¦‚ä½•åº”å¯¹çš„ï¼Ÿâ€\nå›ç­”ï¼šæè¿°å…·ä½“åœºæ™¯ï¼ˆå¦‚æ€§èƒ½æå‡ä¸æ˜æ˜¾æˆ–æ–°æ–¹æ¡ˆå¼•å…¥é—®é¢˜ï¼‰ï¼Œå¦‚ä½•å›é€€æˆ–è°ƒæ•´ï¼›å­¦åˆ°çš„ç»éªŒï¼ˆå¦‚å…ˆå°èŒƒå›´éªŒè¯ã€å‹åŠ›æµ‹è¯•æ›´å……åˆ†ã€æ³¨æ„å…¼å®¹æ€§ï¼‰ã€‚ â€œåœ¨è·¨å›¢é˜Ÿåä½œæ—¶é‡åˆ°å†²çªå¦‚ä½•è§£å†³ï¼Ÿâ€\nå›ç­”ï¼šä¸¾ä¾‹ï¼šä¸è¿ç»´æˆ–å®‰å…¨å›¢é˜Ÿå¯¹æ¥æ—¶å› è§„èŒƒå·®å¼‚å¯¼è‡´å»¶è¿Ÿï¼Œç”¨æ•°æ®å’Œå°èŒƒå›´ PoC è¯´æœï¼›å»ºç«‹æ²Ÿé€šæœºåˆ¶ï¼›æ–‡æ¡£å¯¹é½ï¼›å®šæœŸå¯¹é½ä¼šã€‚ â€œå¦‚ä½•å¹³è¡¡æ–°åŠŸèƒ½äº¤ä»˜é€Ÿåº¦ä¸æ¶æ„ä¼˜åŒ–æŠ•å…¥ï¼Ÿâ€\nå›ç­”ï¼šæ ¹æ®ä¸šåŠ¡ç´§æ€¥åº¦è®¾å®šä¼˜å…ˆçº§ï¼›å¯¹æ ¸å¿ƒæ¨¡å—åšé•¿æœŸæŠ€æœ¯å€ºå¿è¿˜ï¼›åœ¨äº¤ä»˜ä¸­åµŒå…¥å¯ç»´æŠ¤æ€§è€ƒè™‘ï¼›ç”¨ Demo/PoC éªŒè¯æ–°æŠ€æœ¯ã€‚ é¡¹ç›®ç»†èŠ‚ä¸é‡åŒ–\né¢è¯•å®˜å¾€å¾€è¦æ±‚ä½ ç»™å‡ºå…·ä½“æ•°å­—ã€æ—¶é—´èŠ‚ç‚¹ã€å›¢é˜Ÿè§„æ¨¡ç­‰ç»†èŠ‚ï¼š\nâ€œä½ è¿™ä¸ªé¡¹ç›®å›¢é˜Ÿå¤šå¤§ï¼Ÿä½ è´Ÿè´£å¤šå¤§æ¯”ä¾‹å·¥ä½œï¼Ÿâ€ â€œé¡¹ç›®ä¸Šçº¿åå¸¦æ¥å“ªäº›ä¸šåŠ¡æˆ–æ€§èƒ½æå‡ï¼Ÿæœ‰å…·ä½“æ•°æ®å—ï¼Ÿâ€ â€œå¦‚æœç”¨ 5,000+ TPSï¼Œå³°å€¼ä¸‡çº§å¹¶å‘ï¼Œè¿™ä¸ªå³°å€¼æ˜¯å¤šä¹…æŒç»­ï¼Ÿå¦‚ä½•åšå®¹é‡é¢„ä¼°ï¼Ÿâ€ â€œCI/CD æµç¨‹æ”¹å˜åæ¯å¤©å¹³å‡å‘å¸ƒé¢‘ç‡æ˜¯å¤šå°‘ï¼Ÿå›æ»šæ¡ˆä¾‹å¦‚ä½•ä½“ç°ä½å›æ»šç‡ï¼Ÿâ€ å›ç­”æ—¶å‡†å¤‡å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°æ®ï¼Œé¿å…ç©ºæ³›ã€‚\nè½¯æŠ€èƒ½ä¸åä½œ\nâ€œä½ åœ¨å›¢é˜Ÿä¸­å¦‚ä½•æŒ‡å¯¼æ–°äººæˆ–åˆ†äº«çŸ¥è¯†ï¼Ÿâ€\nå›ç­”ï¼šå®šæœŸæŠ€æœ¯åˆ†äº«ä¼šã€ç¼–å†™æ–‡æ¡£ã€Code Review æŒ‡å¯¼ï¼›Pair programmingï¼›Mentoringï¼›åŸ¹è®­ææ–™ï¼›ç»„ç»‡ Hackathon æˆ–å†…éƒ¨åŸ¹è®­ã€‚ â€œå¦‚ä½•å¼€å±•æŠ€æœ¯è¯„å®¡ï¼Ÿâ€\nå›ç­”ï¼šæ’°å†™è®¾è®¡æ–‡æ¡£ã€åˆ—å‡ºéœ€æ±‚ä¸éåŠŸèƒ½éœ€æ±‚ã€ç»™å‡ºæ–¹æ¡ˆé€‰é¡¹åŠä¼˜ç¼ºç‚¹åˆ†æï¼›å¬å¼€è¯„å®¡ä¼šï¼Œæ”¶é›†æ„è§åæ›´æ–°ï¼›æ˜ç¡®å†³ç­–è®°å½•ä¸è½åœ°è®¡åˆ’ã€‚ â€œå¦‚ä½•å¤„ç†ç´§æ€¥æ•…éšœï¼Ÿâ€\nå›ç­”ï¼šç´§æ€¥å“åº”æµç¨‹ï¼šå¿«é€Ÿå®šä½ã€åˆ†å·¥åä½œã€å›æ»šæˆ–é™çº§æ–¹æ¡ˆã€äº‹åå¤ç›˜ï¼›ç¼–å†™ Runbookï¼›å»ºç«‹å€¼ç­ä¸å‘Šè­¦ç³»ç»Ÿã€‚ å››ã€ç¤ºèŒƒå›ç­”æ¨¡æ¿ä¸å‡†å¤‡å»ºè®®\r#\ré’ˆå¯¹æŠ€æœ¯æ·±æŒ–é—®é¢˜ï¼š\nå…ˆç®€è¦å›ç­”æ ¸å¿ƒç»“è®ºï¼Œå†åˆ†å±‚å±•å¼€ï¼šè®¾è®¡æ€è·¯ â†’ å…³é”®æŠ€æœ¯ç‚¹ â†’ å®ç°ç»†èŠ‚ â†’ é‡åˆ°çš„æŒ‘æˆ˜ä¸è§£å†³åŠæ³• â†’ ç»“æœåŠæ•°æ®æ”¯æ’‘ â†’ ç»éªŒæ•™è®­ã€‚ å¦‚è°ˆæ¶æ„ï¼Œæœ€å¥½ç”»å›¾ï¼ˆåœ¨çº¿é¢è¯•å¯ç”¨ç™½æ¿å·¥å…·ï¼Œæœ¬åœ°é¢è¯•å¯ç°åœºç”»ï¼‰ï¼Œçªå‡ºç»„ä»¶å’Œæ•°æ®æµã€å¤±è´¥åœºæ™¯å¤„ç†ã€‚ å¦‚è°ˆæ€§èƒ½ä¼˜åŒ–ï¼Œæ˜ç¡®ç“¶é¢ˆå®šä½æ–¹æ³•ï¼ˆç›‘æ§æŒ‡æ ‡ã€æ—¥å¿—ã€å‹æµ‹ï¼‰ï¼Œç„¶åä¼˜åŒ–æ–¹æ¡ˆï¼Œæœ€åéªŒè¯æ•ˆæœã€‚ å¦‚è°ˆå®‰å…¨ä¸åˆè§„ï¼Œè¯´æ˜è§„èŒƒä¾æ®ï¼ˆå…¬å¸/è¡Œä¸šæ ‡å‡†ï¼‰ã€è½åœ°ç»†èŠ‚ï¼ˆåŠ å¯†ã€å®¡è®¡ã€æƒé™ï¼‰ã€éªŒè¯æ–¹å¼ï¼ˆæµ‹è¯•ã€å®¡è®¡æµç¨‹ï¼‰ã€‚ å¦‚è°ˆå¾®æœåŠ¡æ‹†åˆ†æˆ–é‡æ„ï¼Œé‡ç‚¹åœ¨è¯„ä¼°ã€æ¸è¿›å¼æ‹†åˆ†ã€ä¿è¯ç¨³å®šå’Œå…¼å®¹æ€§ã€å›æ»šæ–¹æ¡ˆã€å›¢é˜Ÿåä½œã€‚ å¦‚è°ˆ CI/CDï¼Œå±•ç¤ºæµç¨‹è‡ªåŠ¨åŒ–ç¨‹åº¦ã€å…³é”®ç¯èŠ‚å¦‚ä½•ä¿è¯è´¨é‡ã€å¦‚ä½•ç¼©çŸ­æ—¶é—´ã€å¦‚ä½•åº”å¯¹é¢‘ç¹å‘å¸ƒã€‚ é’ˆå¯¹â€œä¸ºä»€ä¹ˆé€‰ X æŠ€æœ¯â€ï¼š\nç®€è¿°èƒŒæ™¯å’Œéœ€æ±‚ï¼Œå†æ¯”è¾ƒä¸åŒæ–¹æ¡ˆä¼˜ç¼ºç‚¹ï¼Œæœ€åè¯´æ˜ä¸ºä½•å½“å‰é€‰å‹æœ€åˆé€‚ï¼Œå¹¶æåˆ°æœªæ¥è‹¥å¤§é‡å˜åŒ–ä¼šå¦‚ä½•è¯„ä¼°æ–°æŠ€æœ¯ã€‚ é’ˆå¯¹é‡åŒ–æŒ‡æ ‡ï¼š\næå‰å‡†å¤‡å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°å­—ï¼›è¯´æ˜åº¦é‡æ–¹å¼å’Œç›‘æ§å·¥å…·æ¥æºï¼›åŒºåˆ†ä¸šåŠ¡æŒ‡æ ‡ vs æŠ€æœ¯æŒ‡æ ‡ï¼›å±•ç¤ºå› æœå…³ç³»ï¼ˆå¦‚ä¼˜åŒ–æªæ–½â†’æŒ‡æ ‡æå‡ï¼‰ã€‚ è¡Œä¸ºä¸åä½œé—®é¢˜ï¼š\nä½¿ç”¨ STAR æ–¹æ³•ï¼šSituationï¼ˆèƒŒæ™¯ï¼‰ã€Taskï¼ˆä»»åŠ¡ï¼‰ã€Actionï¼ˆè¡ŒåŠ¨ï¼‰ã€Resultï¼ˆç»“æœï¼‰ï¼›çªå‡ºè‡ªå·±åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ä¸è´¡çŒ®ã€å­¦åˆ°çš„ç»éªŒã€‚ é‡åˆ°ä¸ç†Ÿæ‚‰é¢†åŸŸæ—¶çš„å›ç­”ï¼š\nè¯šå®æ‰¿è®¤ï¼Œä½†ç»™å‡ºå¿«é€Ÿå­¦ä¹ æ€è·¯ï¼šå¦‚æ›¾å¦‚ä½•å¿«é€Ÿä¸Šæ‰‹æ–°æŠ€æœ¯ï¼›å¦‚ä½•é€šè¿‡é˜…è¯»æ–‡æ¡£ã€PoCã€å°è§„æ¨¡å®éªŒéªŒè¯ï¼›å¦‚ä½•å€ŸåŠ©å›¢é˜Ÿèµ„æºã€‚ å‡†å¤‡ç¤ºä¾‹ï¼š\né’ˆå¯¹ä¸Šè¿°å„é¡¹ï¼Œå‡†å¤‡ 2-3 ä¸ªä¸ä½ ç»å†æœ€è´´è¿‘çš„å…·ä½“æ¡ˆä¾‹ï¼›å¹¶åœ¨å›ç­”ä¸­ç»“åˆè¿™äº›æ¡ˆä¾‹å±•å¼€ï¼Œæ—¢èƒ½ä½“ç°æ·±åº¦ä¹Ÿæ˜¾å¾—çœŸå®å¯ä¿¡ã€‚ äº”ã€ç¤ºä¾‹é—®ç­”èŠ‚é€‰\r#\rä¸‹é¢ä¸¾å‡ ä¸ªç¤ºä¾‹é—®é¢˜ä¸ç¤ºèŒƒå›ç­”è¦ç‚¹ï¼Œä¾›ä½ è¿›ä¸€æ­¥æ¼”ç»ƒï¼š\nç¤ºä¾‹é—®ï¼šè¯·è¯¦ç»†æè¿°ä½ åœ¨æ±‡ä¸°é¡¹ç›®ä¸­ï¼Œå¦‚ä½•å®ç°æ•°æ®åº“åˆ†ç‰‡å’Œäº‹åŠ¡æ§åˆ¶æ¥æ”¯æ’‘ 5,000+ TPSï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\nèƒŒæ™¯ä¸éœ€æ±‚ï¼šéšç€ä¸šåŠ¡å¢é•¿ï¼Œå•åº“è¾¾ä¸åˆ°æ€§èƒ½è¦æ±‚ï¼Œéœ€è¦æ°´å¹³æ‰©å±•ï¼›TPS ç›®æ ‡å’Œå¹¶å‘ç‰¹å¾ï¼ˆè¯·æ±‚åˆ†å¸ƒã€è¯»å†™æ¯”ä¾‹ï¼‰å¦‚ä½•è¯„ä¼°ï¼› åˆ†ç‰‡æ–¹æ¡ˆï¼šåŸºäºç”¨æˆ· ID hash åˆ†ç‰‡åˆ°å¤šä¸ª MySQL å®ä¾‹ï¼›ä½¿ç”¨ ShardingSphereï¼ˆæˆ–è‡ªç ”ä¸­é—´ä»¶ï¼‰åšè·¯ç”±ï¼› äº‹åŠ¡å¤„ç†ï¼šé¼“åŠ±å•åˆ†ç‰‡äº‹åŠ¡ï¼›å¯¹è·¨åˆ†ç‰‡åœºæ™¯ä½¿ç”¨å¼‚æ­¥è¡¥å¿ï¼›ä¸¾ä¾‹æŸä¸šåŠ¡å¦‚ä½•æ‹†åˆ†æˆæœ¬åœ°äº‹åŠ¡ + æ¶ˆæ¯é©±åŠ¨çš„è¡¥å¿æµç¨‹ï¼› å‹æµ‹ä¸éªŒè¯ï¼šä½¿ç”¨ JMeter æ¨¡æ‹Ÿå¹¶å‘ï¼Œå¯¹åˆ†åº“åçš„æ€§èƒ½è¿›è¡Œå‹æµ‹ï¼›ç›‘æ§æ•°æ®åº“å“åº”æ—¶å»¶ã€è¿æ¥æ± ä½¿ç”¨ç‡ï¼› ä¼˜åŒ–ï¼šç´¢å¼•ä¼˜åŒ–ã€è¿æ¥æ± è°ƒå‚ã€ç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼›å¯¹æ…¢æŸ¥è¯¢é‡å†™ï¼› ç»“æœï¼šå‹æµ‹è¾¾åˆ° 5,000 TPSï¼›ç”Ÿäº§éªŒè¯å³°å€¼èƒ½æ‰©å±•è‡³ä¸‡çº§å¹¶å‘ï¼›ç³»ç»Ÿç¨³å®šæ€§å’Œå¯ç”¨æ€§è¾¾æ ‡ï¼› æ•™è®­ï¼šåˆ†ç‰‡åéœ€æ³¨æ„ç›‘æ§å„åˆ†ç‰‡è´Ÿè½½å‡è¡¡ï¼Œé¿å…æ•°æ®å€¾æ–œï¼›æå‰è®¾è®¡æ‰©å®¹æ–¹æ¡ˆã€‚ ç¤ºä¾‹é—®ï¼šåœ¨ Kafka ä¸ Siemens ç³»ç»Ÿé›†æˆæ—¶ï¼Œä½ å¦‚ä½•ç¡®ä¿æ¯«ç§’çº§é›¶æ•°æ®ä¸¢å¤±ï¼Ÿé‡åˆ°è¿‡å“ªäº›æ•…éšœï¼Œä½ å¦‚ä½•å¤„ç†ï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\né›†æˆæ–¹å¼ï¼šæè¿° Siemens ç³»ç»Ÿè¾“å‡ºæœºåˆ¶ï¼Œç”¨é€‚é…å™¨ï¼ˆæˆ– SDKï¼‰è¯»å–æ•°æ®å¹¶åŒæ­¥æ¨é€åˆ° Kafkaï¼› ä¿è¯é›¶ä¸¢å¤±ï¼šKafka ç”Ÿäº§è€…é…ç½® acks=allã€å‰¯æœ¬ \u0026gt;=2ï¼›å¹‚ç­‰ç”Ÿäº§è€…é…ç½®ï¼›ç½‘ç»œæˆ–èŠ‚ç‚¹æ•…éšœæ—¶é‡è¯•é€»è¾‘ï¼›ç›‘æ§ ISR ä¸å‰¯æœ¬åŒæ­¥ï¼› å»¶è¿Ÿä¼˜åŒ–ï¼šåˆç† batch.sizeã€linger.ms è°ƒæ•´ï¼›ç½‘ç»œä¼˜åŒ–ï¼›ç”Ÿäº§è€…çº¿ç¨‹æ¨¡å‹ï¼›æ¶ˆè´¹è€…å¤„ç†èƒ½åŠ›ä¿è¯åŠæ—¶ ackï¼› æ•…éšœåœºæ™¯ï¼šå¦‚æŸæ¬¡ Kafka broker çŸ­æš‚å®•æœºï¼Œå¦‚ä½•é€šè¿‡é‡è¯•å’Œå¤‡ä»½é˜Ÿåˆ—ä¿è¯æ•°æ®ä¸ä¸¢ï¼›å¦‚ä½•é€šè¿‡ç›‘æ§å¿«é€Ÿå‘ç°å¹¶æ¢å¤ï¼› éªŒè¯æ–¹æ³•ï¼šå®šæœŸå¯¹æ¯”æºç³»ç»Ÿå’Œç›®æ ‡æ•°æ®é‡ã€æ ¡éªŒæ‘˜è¦ï¼›ç¾éš¾æ¼”ç»ƒï¼›æ—¥å¿—ä¸ç›‘æ§å‘Šè­¦ï¼› ç»“æœä¸ç»éªŒï¼šå®ç°ç¨³å®šæ¥å…¥ï¼›è‹¥å‡ºç°å»¶è¿Ÿæˆ–ä¸¢å¤±æ€€ç–‘ï¼Œé€šè¿‡ç›‘æ§æŠ¥è­¦å’Œè¡¥å¿æµç¨‹å¿«é€Ÿä¿®å¤ï¼›å­¦åˆ°è¦ä¸ä¸‹æ¸¸æˆ–ä¸Šæ¸¸ç³»ç»Ÿçº¦å®šå¥½é‡è¯•ã€å»é‡ç­–ç•¥ã€‚ ç¤ºä¾‹é—®ï¼šä½ çš„ CI/CD æµæ°´çº¿å¦‚ä½•è®¾è®¡ï¼Œå¦‚ä½•å°†æ‰§è¡Œæ—¶é—´ç¼©çŸ­è‡³ 5 åˆ†é’Ÿï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\næµæ°´çº¿å„é˜¶æ®µï¼šæ‹‰ä»£ç  â†’ é™æ€æ£€æŸ¥ â†’ å•å…ƒæµ‹è¯• â†’ æ„å»º Docker é•œåƒ â†’ æ¨é•œåƒ â†’ éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ â†’ é›†æˆæµ‹è¯• â†’ éƒ¨ç½²åˆ°ç°åº¦/ç”Ÿäº§ï¼› å¹¶è¡Œä¸ç¼“å­˜ï¼šå¹¶è¡Œè¿è¡Œå¤šä¸ªæ¨¡å—çš„æ„å»º/æµ‹è¯•ï¼›Maven/Gradle ä¾èµ–ç¼“å­˜ï¼›Docker layer ç¼“å­˜ï¼›CI Runner æ± åŒ–ï¼› åˆ†çº§æµ‹è¯•ç­–ç•¥ï¼šæäº¤é˜¶æ®µä¸»è¦è·‘å•å…ƒæµ‹è¯•å’Œå…³é”®é›†æˆæµ‹è¯•ï¼›å…¨é‡å›å½’å¯ä»¥åœ¨åˆå¹¶åæˆ–å¤œé—´ï¼›å‡å°‘é˜»å¡æ—¶é—´ï¼› å¿«é€Ÿåé¦ˆï¼šå¤±è´¥æ—©åœï¼›å¤±è´¥æ—¥å¿—æ¸…æ™°ï¼›æ¨é€æµ‹è¯•ç¯å¢ƒåè‡ªåŠ¨åŒ– Smoke Testï¼› éƒ¨ç½²ä¼˜åŒ–ï¼šé‡‡ç”¨è“ç»¿æˆ–æ»šåŠ¨å‘å¸ƒï¼›æå‰å‡†å¤‡ç¯å¢ƒï¼›è‡ªåŠ¨åŒ–å¥åº·æ£€æŸ¥ï¼›å¿«é€Ÿå›æ»šè„šæœ¬ï¼› åº¦é‡ä¸æ”¹è¿›ï¼šæŒç»­ç›‘æ§å„é˜¶æ®µè€—æ—¶ï¼Œå®šæœŸä¼˜åŒ–ç“¶é¢ˆï¼›å›¢é˜Ÿåä½œä¿è¯æµç¨‹é¡ºç•…ï¼› ç»“æœï¼šå‘å¸ƒé¢‘ç‡ç”±æ¯æ—¥å‡ æ¬¡æå‡è‡³æ¯æ—¥åå‡ æ¬¡ï¼›é”™è¯¯ç‡ä¸‹é™ï¼›å¼€å‘åé¦ˆæ›´åŠæ—¶ï¼› æ³¨æ„äº‹é¡¹ï¼šç°åº¦å‘å¸ƒè¦åšå¥½æµé‡åˆ†é…ï¼›æ•°æ®åº“å˜æ›´è°¨æ…ï¼Œæå‰åšå¥½è¿ç§»è„šæœ¬ï¼›ç‰ˆæœ¬å…¼å®¹æ€§è€ƒè™‘ã€‚ ç¤ºä¾‹é—®ï¼šåœ¨å‰ç«¯ç»´æŠ¤ä¸­ï¼Œå½“ä½ è¦å‡çº§ React æˆ– Angular ç‰ˆæœ¬æ—¶ï¼Œå¦‚ä½•è¯„ä¼°å’Œæ‰§è¡Œï¼Ÿ\nå›ç­”è¦ç‚¹ï¼š\nè¯„ä¼°é£é™©ï¼šå…ˆæŸ¥çœ‹ç‰ˆæœ¬å‘å¸ƒè¯´æ˜ã€ç ´åæ€§å˜æ›´åˆ—è¡¨ï¼›ç¡®å®šæ ¸å¿ƒä¾èµ–çš„å…¼å®¹æ€§ï¼›åˆ—å‡ºå—å½±å“ç»„ä»¶ï¼› å‡†å¤‡æµ‹è¯•ï¼šç¼–å†™è‡ªåŠ¨åŒ– UI æµ‹è¯•æˆ–æ‰‹åŠ¨æµ‹è¯•ç”¨ä¾‹ï¼›åœ¨ç‹¬ç«‹åˆ†æ”¯åšå‡çº§éªŒè¯ï¼› åˆ†é˜¶æ®µå‡çº§ï¼šå…ˆå‡çº§ä¾èµ–åº“ï¼Œå†æ”¹ä»£ç ï¼›æˆ–å…ˆåœ¨å­æ¨¡å—å°è¯•ï¼› å¤„ç†ç ´åæ€§å˜æ›´ï¼šæ ¹æ®å®˜æ–¹æ–‡æ¡£æˆ–ç¤¾åŒºå»ºè®®é‡æ„ä»£ç ï¼›ä½¿ç”¨ polyfill æˆ–å…¼å®¹å±‚ï¼› å›é€€æ–¹æ¡ˆï¼šå¦‚éªŒè¯å¤±è´¥å¯å¿«é€Ÿå›é€€ï¼›ç¡®ä¿ç‰ˆæœ¬æ§åˆ¶ä¸ CI/CD æ”¯æŒå›æ»šï¼› ç»“æœï¼šå‡çº§åæ€§èƒ½æˆ–å®‰å…¨æ”¹è¿›ï¼Œæ–‡æ¡£æ›´æ–°ï¼›è‹¥é‡åˆ°ç¬¬ä¸‰æ–¹åº“ä¸å…¼å®¹ï¼Œå¦‚ä½•åè°ƒæˆ–æ›¿æ¢ï¼› ç»éªŒï¼šå®šæœŸå…³æ³¨æ¡†æ¶æ¼”è¿›ï¼Œä¿æŒä¾èµ–ä¸è¿‡æœŸå¤ªä¹…ï¼›ç¼–å†™è‰¯å¥½æµ‹è¯•è¦†ç›–é™ä½å‡çº§é£é™©ã€‚ å…­ã€å‡†å¤‡å»ºè®®\r#\ræ¢³ç†ç»†èŠ‚ï¼šé’ˆå¯¹ä»¥ä¸Šæ¯ä¸ªé—®ç­”æ€è·¯ï¼Œç»“åˆä½ çœŸå®çš„å·¥å…·é€‰æ‹©ã€ç‰ˆæœ¬å·ã€å›¢é˜Ÿè§„æ¨¡ã€å…·ä½“æ•°å­—å’Œé‡åˆ°çš„é—®é¢˜ï¼Œå‡†å¤‡æ¸…æ™°ã€ç»“æ„åŒ–çš„å›ç­”è¦ç‚¹ã€‚ æ¼”ç»ƒè¡¨è¾¾ï¼šç”¨ç™½æ¿/çº¸æˆ–åœ¨çº¿å·¥å…·ç”»æ¶æ„å›¾å¹¶å£å¤´æ¼”ç»ƒæè¿°ï¼›ç”¨ STAR æ¨¡å‹ç»ƒä¹ è¡Œä¸ºé—®é¢˜ï¼›æ¨¡æ‹Ÿé¢è¯•æ—¶è‡ªé—®è‡ªç­”æˆ–ä¸åŒäº‹æ¼”ç»ƒã€‚ æ•°æ®å‡†å¤‡ï¼šæ•´ç†å¥½çœŸå®æˆ–å¯è¿‘ä¼¼çš„æ•°æ®æŒ‡æ ‡ï¼ˆå¦‚å‹æµ‹ç»“æœã€ç›‘æ§æ•°æ®ã€å‘å¸ƒæ—¶é—´é¢‘ç‡ã€æ•…éšœå¤„ç†æ—¶é—´ç­‰ï¼‰ï¼Œä»¥å¤‡é¢è¯•æ—¶å¼•ç”¨ã€‚ ææ–™æ”¯æŒï¼šå¯å‡†å¤‡ä¸€ä»½ç®€çŸ­çš„æŠ€æœ¯è®¾è®¡ç¤ºä¾‹ï¼ˆå¦‚æ•°æ®åº“åˆ†ç‰‡æ–¹æ¡ˆæ–‡æ¡£ç‰‡æ®µã€CI/CD æµç¨‹å›¾ã€ç›‘æ§ Dashboard æˆªå›¾ç­‰ï¼‰ï¼Œé¢è¯•æ—¶è§†æƒ…å†µåˆ†äº«ï¼ˆçº¿ä¸Šå¯é€šè¿‡å±å¹•å…±äº«ï¼‰ã€‚ å…³æ³¨å²—ä½åŒ¹é…ï¼šé’ˆå¯¹â€œå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘â€ï¼Œåœ¨å›ç­”ä¸­å¯æœ‰æ„èå…¥ä½ åœ¨ä¸Šè¿°é¡¹ç›®ç»éªŒä¸­å¯è¿ç§»çš„èƒ½åŠ›ï¼Œå¦‚é«˜å¹¶å‘æ¶æ„ã€ç›‘æ§ä¸æ•°æ®å¹³å°ã€å¼‚æ­¥è§£è€¦ã€å¾®æœåŠ¡æ²»ç†ã€CI/CD ç»éªŒï¼Œéƒ½èƒ½å¸®åŠ©å¿«é€Ÿè½åœ°æ–°æ–¹å‘ï¼›å¦‚æœä½ æœ‰ AI/è¯­éŸ³æˆ–å¿«é€Ÿå­¦ä¹ æ–°é¢†åŸŸçš„ç»éªŒï¼Œå¯å¼ºè°ƒå­¦ä¹ æ–¹æ³•å’Œè½åœ°æ€è·¯ã€‚ å‡†å¤‡æé—®ï¼šé’ˆå¯¹ä½ è¿‡å¾€ç»éªŒä¸è¯¥å²—ä½çš„æŠ€æœ¯æ ˆç»“åˆï¼Œæå‡ºæœ‰æ·±åº¦çš„é—®é¢˜ï¼Œå¦‚â€œåœ¨å¤§æ¨¡å‹ç”µè¯åœºæ™¯ä¸‹ï¼Œå¦‚ä½•è¯„ä¼°å’Œæ‰©å±•å¾®æœåŠ¡å¹³å°ä»¥æ”¯æŒå®æ—¶è¯­éŸ³æµé‡ï¼Ÿâ€ï¼Œâ€œå›¢é˜Ÿè¿‡å»åœ¨ CI/CD æˆ–ç›‘æ§å¹³å°ä¸Šé‡åˆ°å“ªäº›ç‰¹æ®ŠæŒ‘æˆ˜ï¼Ÿâ€ï¼Œâ€œé“¶è¡Œé¡¹ç›®çš„å®‰å…¨åˆè§„å®è·µæœ‰ä»€ä¹ˆå¯å€Ÿé‰´åˆ°ç”µè¯ç³»ç»Ÿå®‰å…¨ä¸­ï¼Ÿâ€ã€‚ æ€»ç»“\r#\rå¯¹æ¯æ¡ç®€å†ä¸­çš„æŠ€æœ¯æˆ–æˆå°±ï¼Œé¢è¯•å®˜ä¼šæ·±æŒ–â€œä¸ºä»€ä¹ˆè¿™ä¹ˆåšâ€â€œæ€ä¹ˆåšçš„â€â€œæ•ˆæœå¦‚ä½•â€â€œé‡åˆ°å“ªäº›é—®é¢˜â€â€œå¦‚ä½•è§£å†³â€çš„ç»†èŠ‚ã€‚ å›ç­”è¦ç»“æ„åŒ–ï¼šå…ˆèƒŒæ™¯ä¸ç›®æ ‡ï¼Œå†æ–¹æ¡ˆè®¾è®¡ã€å®ç°ç»†èŠ‚ã€é‡åˆ°æŒ‘æˆ˜åŠè§£å†³ã€æœ€ç»ˆæ•ˆæœä¸é‡åŒ–æŒ‡æ ‡ã€ç»éªŒæ•™è®­ã€‚ å‡†å¤‡å¥½å…·ä½“æ•°å­—ã€å·¥å…·/ç‰ˆæœ¬ã€å›¢é˜Ÿè§’è‰²ã€æ—¶é—´èŠ‚ç‚¹ç­‰ç»†èŠ‚ï¼Œä½¿å›ç­”çœŸå®å¯ä¿¡ã€‚ å¤šæ¼”ç»ƒã€ç»“åˆâ€œå¤§æ¨¡å‹ç”µè¯åº”ç”¨â€æ–¹å‘æ€è€ƒï¼Œç”¨è¿‡å¾€ç»éªŒå±•ç°è¿ç§»èƒ½åŠ›ä¸å¿«é€Ÿå­¦ä¹ èƒ½åŠ›ã€‚ è¡Œä¸ºä¸åä½œæ–¹é¢ï¼Œç”¨ STAR æ¨¡å‹ï¼Œçªå‡ºæ²Ÿé€šã€å¸¦é¢†ã€å†²çªè§£å†³ã€å¿«é€Ÿå“åº”ç­‰è½¯æŠ€èƒ½ã€‚ å¸Œæœ›è¿™äº›é—®é¢˜æ¸…å•å’Œå›ç­”æ€è·¯èƒ½å¸®åŠ©ä½ å…¨é¢å‡†å¤‡ã€‚å¦‚æœéœ€è¦é’ˆå¯¹æŸä¸ªé—®é¢˜æ·±å…¥æ¨¡æ‹Ÿæˆ–æ’°å†™æ›´è¯¦ç»†çš„å›ç­”ç¤ºä¾‹ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼ç¥é¢è¯•é¡ºåˆ©ï¼\n"},{"id":40,"href":"/docs/hidden/fangxiang/","title":"ç¾å›¢æ–¹å‘","section":"éšè—","content":"ä»¥ä¸‹å†…å®¹åˆ†ä¸ºè‹¥å¹²éƒ¨åˆ†ï¼Œå¸®åŠ©ä½ é’ˆå¯¹ç¾å›¢â€œJAVAé«˜çº§å¼€å‘å·¥ç¨‹å¸ˆï¼ˆå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘ï¼‰â€å²—ä½è¿›è¡Œå……åˆ†å‡†å¤‡ï¼ŒåŒ…æ‹¬èƒŒæ™¯è°ƒç ”ã€æŠ€æœ¯è¦ç‚¹ã€ç³»ç»Ÿè®¾è®¡æ€è·¯ã€å¯èƒ½é¢è¯•é¢˜åŠå›ç­”æ€è·¯ã€è½¯æŠ€èƒ½ä¸å›¢é˜Ÿåä½œç­‰ã€‚æ‰€æœ‰è§‚ç‚¹å°½é‡ç»“åˆå…¬å¼€èµ„æ–™ï¼Œå¹¶åœ¨å…³é”®é™ˆè¿°åæä¾›å¼•ç”¨ã€‚\nä¸€ã€å…¬å¸ä¸ä¸šåŠ¡èƒŒæ™¯è°ƒç ”\r#\rç¾å›¢AIæˆ˜ç•¥åŠå¤§æ¨¡å‹èƒ½åŠ› ç¾å›¢è¿‘å¹´æ¥åœ¨AIé¢†åŸŸæŒç»­åŠ ç ï¼Œè‡ªç ”å¤§æ¨¡å‹â€œé¾™çŒ«â€ï¼Œå¹¶åœ¨å†…éƒ¨æé«˜å¼€å‘æ•ˆç‡ä¸å®¢æœæ•ˆç‡ï¼Œå¦‚è´¢æŠ¥ç”µè¯ä¼šæåˆ°â€œAIå®¢æœæ•ˆç‡æå‡è¶…20%â€å’Œâ€œè®¡åˆ’æ¨å‡ºè¦†ç›–æ‰€æœ‰æœåŠ¡çš„AIåŠ©æ‰‹â€ (\rwallstreetcn.com, letsclouds.com)ã€‚\né¢è¯•ä¸­å¯ä»¥æåˆ°ï¼šå¯¹å¤§æ¨¡å‹åœ¨å®¢æœã€ç”µè¯åº”ç”¨åœºæ™¯çš„æ„ä¹‰ã€æœ‰ä½•æŠ€æœ¯æŒ‘æˆ˜ã€ä»¥åŠå¦‚ä½•ä¸ä¸šåŠ¡ç»“åˆã€‚ å¯å…³æ³¨ç¾å›¢AIåº”ç”¨çš„å¤šå±‚æ¬¡ï¼šåŸºç¡€è®¾æ–½ã€äº§å“ä¸­çš„AIã€å·¥ä½œä¸­çš„AIä¸‰å±‚(\rwallstreetcn.com)ã€‚ ç¾å›¢ç”µè¯/è¯­éŸ³äº¤äº’ç°çŠ¶\nç¾å›¢å·²æœ‰æ™ºèƒ½è¯­éŸ³æœåŠ¡å®è·µï¼Œå¦‚é€šè¿‡ MRCP åè®®ä¸ FreeSWITCH å¯¹æ¥ï¼Œå®ç°å®æ—¶ ASR/TTS è½¬æ¢ï¼Œç”¨äºå‘¼å«ä¸­å¿ƒä¸šåŠ¡(\rtech.meituan.com)ã€‚ ä¹Ÿæœ‰æ™ºèƒ½å¤–å‘¼æœºå™¨äººåœ¨å‚¬å•ã€ç¡®è®¤ç­‰åœºæ™¯çš„å®è·µï¼Œå¹¶æœ‰å®Œæ•´çš„æ„å›¾è®­ç»ƒä¸ä¼˜åŒ–æµç¨‹(\rblog.csdn.net)ã€‚ å¯åœ¨é¢è¯•ä¸­å±•ç¤ºä½ å¯¹ç”µè¯äº¤äº’ç³»ç»Ÿï¼ˆå‘¼å«ä¸­å¿ƒæ¥å…¥ã€ASR/TTSã€æ„å›¾è¯†åˆ«ã€å¯¹è¯ç®¡ç†ã€æœºå™¨äººå¤–å‘¼/å‘¼å…¥æµç¨‹ï¼‰çš„ç†è§£å’Œæ€è€ƒã€‚ ä¸šåŠ¡ä»·å€¼ä¸ç›®æ ‡\nå¤§æ¨¡å‹ç”µè¯åº”ç”¨æ–¹å‘ï¼Œæ ¸å¿ƒæ˜¯æå‡ç”¨æˆ·ä½“éªŒã€é™ä½äººåŠ›æˆæœ¬ã€æé«˜å‘¼å«è´¨é‡å’Œè½¬åŒ–ç‡ï¼› éœ€è¦å…¼é¡¾é«˜å¯ç”¨ã€é«˜å¹¶å‘ã€å®æ—¶æ€§ã€ç¨³å®šæ€§ã€å®‰å…¨åˆè§„ï¼ˆç”¨æˆ·éšç§ã€è¯­éŸ³æ•°æ®å®‰å…¨ç­‰ï¼‰ï¼› æ•°æ®èƒ½åŠ›: å¤§é‡é€šè¯ã€æ„å›¾ã€å¯¹è¯ç»“æœæ•°æ®ï¼Œéœ€è¦æ„å»ºæ•°æ®å¤§ç›˜ã€ç›‘æ§ã€æŒ‡æ ‡è¯„ä¼°ä¸ä¼˜åŒ–é—­ç¯ã€‚ è·¨å›¢é˜Ÿåˆä½œ: éœ€ä¸é£æ§ã€è·¯ç”±ã€ç”¨æˆ·åˆ†å±‚ç­‰å›¢é˜Ÿå¯¹æ¥ï¼Œä¸ºç”µè¯å†³ç­–æä¾›èƒ½åŠ›æ”¯æŒï¼Œéœ€ç†è§£ä¸šåŠ¡éœ€æ±‚ã€æ•°æ®æµåŠè”åŠ¨æ–¹å¼ã€‚ äºŒã€æ ¸å¿ƒæŠ€æœ¯è¦ç‚¹ä¸èƒ½åŠ›å‡†å¤‡\r#\r1. åˆ†å¸ƒå¼ç³»ç»Ÿä¸é«˜å¹¶å‘æ¶æ„\r#\ré«˜å¯ç”¨ä¸å¯æ‰©å±•è®¾è®¡\nç†Ÿæ‚‰å¸¸è§å¾®æœåŠ¡æ¶æ„æ¨¡å¼ï¼šæœåŠ¡æ‹†åˆ†åŸåˆ™ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€ç†”æ–­é™çº§ã€é™æµã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡æ²»ç†ã€‚ äº†è§£å¦‚ä½•åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹è¿›è¡Œå®¹é‡è§„åˆ’ï¼ˆå¦‚å‘¼å…¥/å¤–å‘¼æ½®æ±æµé‡ï¼‰ã€å¼¹æ€§ä¼¸ç¼©ï¼ˆKubernetesã€å®¹å™¨åŒ–éƒ¨ç½²ã€è‡ªåŠ¨æ‰©å®¹ç­–ç•¥ï¼‰ã€‚ è®¾è®¡æ—¶è€ƒè™‘æ— çŠ¶æ€æœåŠ¡ä¸çŠ¶æ€æŒä¹…åŒ–åˆ†ç¦»ï¼Œåˆ©ç”¨ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—è§£è€¦å³°å€¼æµé‡ã€‚ ä¸­é—´ä»¶ä¸å¼‚æ­¥å¤„ç†\nç†Ÿæ‚‰ Redisï¼ˆç¼“å­˜ã€åˆ†å¸ƒå¼é”ï¼‰ã€Kafkaï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€æµå¼å¤„ç†ï¼‰ã€ZooKeeperï¼ˆæœåŠ¡æ²»ç†æˆ–å¯æ›¿ä»£æ–¹æ¡ˆå¦‚ etcd/Consulï¼‰ã€RocketMQ ç­‰ã€‚ç†è§£äº‹åŠ¡ã€é”ã€å¹¶å‘å®ç°æœºåˆ¶åŠå…¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„è°ƒä¼˜ã€‚ å¼‚æ­¥æ¶ˆæ¯æ¶æ„ï¼šå¦‚ä½•å¤„ç†å‘¼å«ç»“æœã€ASRå¼‚æ­¥å›è°ƒã€é•¿å°¾é‡è¯•ã€å¤±è´¥æ‰“ç‚¹ã€æ­»ä¿¡é˜Ÿåˆ—è®¾è®¡ã€‚ è®¾è®¡â€œå¹‚ç­‰â€åŠå®¹é”™å¤„ç†ï¼Œå¦‚é‡å¤æ¶ˆæ¯ã€éƒ¨åˆ†å¤±è´¥å¦‚ä½•è¡¥å¿ã€‚ æ•°æ®åº“ä¸æ€§èƒ½ä¼˜åŒ–\nMySQLï¼šåˆ†åº“åˆ†è¡¨ç­–ç•¥ã€è¯»å†™åˆ†ç¦»ã€ç´¢å¼•ä¼˜åŒ–ã€æŸ¥è¯¢æ€§èƒ½è°ƒä¼˜ï¼›å¤§è§„æ¨¡è°ƒç”¨ä¸‹çš„è¿æ¥æ± ã€æ…¢æŸ¥è¯¢åˆ†æã€å½’æ¡£ç­–ç•¥ç­‰ã€‚ NoSQLé€‰å‹ï¼šåœ¨éœ€è¦å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¸Šä¸‹æ–‡æˆ–çŸ­æœŸç¼“å­˜æ—¶ï¼Œä½•æ—¶ä½¿ç”¨Redis/Mongo/Cassandraç­‰ï¼›è€ƒè™‘ä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€å»¶è¿Ÿã€‚ å¯¹å¤§è§„æ¨¡æ—¥å¿—æˆ–é€šè¯è®°å½•ï¼Œå¯å¼•å…¥åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆå¦‚HDFS/S3ï¼‰ã€æœç´¢å¼•æ“ï¼ˆå¦‚Elasticsearchï¼‰ä»¥ä¾¿å¿«é€Ÿæ£€ç´¢ä¸åˆ†æã€‚ RPCä¸åºåˆ—åŒ–\nç†Ÿæ‚‰RPCæ¡†æ¶ï¼ˆå¦‚ gRPCã€Thriftã€Dubbo ç­‰ï¼‰ï¼Œç†è§£é€šä¿¡æ¨¡å‹ã€ç½‘ç»œIOï¼ˆNIO/Nettyï¼‰ã€åºåˆ—åŒ–åè®®ï¼ˆProtobufã€JSONã€Thriftåè®®ï¼‰çš„æ€§èƒ½ã€å…¼å®¹æ€§ä¸æ‰©å±•æ€§ã€‚ æœåŠ¡æ²»ç†ã€ç‰ˆæœ¬ç®¡ç†ã€ç°åº¦å‘å¸ƒåœ¨å¤šç‰ˆæœ¬è¿­ä»£åœºæ™¯ä¸‹çš„æ–¹æ¡ˆã€‚ JVMä¸æ€§èƒ½è°ƒä¼˜\nç†Ÿæ‚‰JVMè°ƒä¼˜æ€è·¯ï¼šGCè°ƒä¼˜ï¼ˆä¸åŒGCç®—æ³•å¯¹å»¶è¿Ÿå’Œååçš„å½±å“ï¼‰ã€å†…å­˜æ³„éœ²åˆ†æã€çº¿ç¨‹æ± ç®¡ç†ã€IOæ¨¡å‹ï¼ˆNIO/AIOï¼‰ã€ç½‘ç»œoffloadç­‰ã€‚ å…³æ³¨å¼‚æ­¥ã€éé˜»å¡IOåœ¨é«˜å¹¶å‘å‘¼å«åœºæ™¯ä¸‹çš„é€‚ç”¨æ€§ï¼šå¦‚å¯¹æ¥ASR/TTSæœåŠ¡æ—¶éœ€å¤„ç†å¤§é‡å¹¶å‘è¿æ¥ã€‚ å¤šçº¿ç¨‹ä¸å¹¶å‘\næ·±å…¥ç†è§£Javaå¤šçº¿ç¨‹ã€å¹¶å‘åŒ…ï¼ˆjava.util.concurrentï¼‰ï¼Œçº¿ç¨‹æ± è®¾è®¡ã€é”ä¸æ— é”ç¼–ç¨‹ï¼ˆCASã€åŸå­ç±»ï¼‰ã€å¹¶å‘å®¹å™¨ã€‚ Springåœ¨å¹¶å‘æ§åˆ¶ä¸Šçš„èƒ½åŠ›ï¼Œå¦‚å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œã€@Asyncã€TaskExecutoré…ç½®ã€çº¿ç¨‹éš”ç¦»ç­–ç•¥ã€‚ 2. SpringåŸç†ä¸æ¡†æ¶èƒ½åŠ›\r#\rSpringæ ¸å¿ƒåŸç†\nBeanç”Ÿå‘½å‘¨æœŸã€ä¾èµ–æ³¨å…¥ã€BeanFactory vs ApplicationContextã€BeanPostProcessorã€AOPåŸç†ï¼ˆåŠ¨æ€ä»£ç†ä¸CGLIBå®ç°ï¼‰ã€äº‹åŠ¡ç®¡ç†åŸç†ï¼ˆSpringäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€äº‹åŠ¡ç®¡ç†å™¨çš„å®ç°ï¼‰ã€‚ äº†è§£Spring Bootè‡ªåŠ¨é…ç½®åŸç†ã€å¦‚ä½•å®šåˆ¶æˆ–æ’é™¤è‡ªåŠ¨é…ç½®ã€é…ç½®ä¼˜å…ˆçº§ã€‚ Spring CloudåŠå¾®æœåŠ¡ç”Ÿæ€\nå¦‚æœç¾å›¢å†…éƒ¨ä½¿ç”¨ç›¸å…³å¾®æœåŠ¡æ²»ç†ã€é…ç½®ä¸­å¿ƒã€æœåŠ¡æ³¨å†Œä¸å‘ç°æ–¹æ¡ˆï¼ˆå¦‚åŸºäºNacosã€Zookeeperã€Eurekaç­‰ï¼‰ï¼Œå¯ç®€å•æåŠå¯¹ç±»ä¼¼æœºåˆ¶çš„ç†è§£ä¸å®è·µç»éªŒã€‚ é…ç½®ä¸­å¿ƒã€åˆ†å¸ƒå¼é…ç½®ç®¡ç†ã€å®‰å…¨è®¤è¯ä¸é‰´æƒï¼ˆOAuth2/JWTæˆ–å†…éƒ¨æ–¹æ¡ˆï¼‰ã€é“¾è·¯è¿½è¸ªï¼ˆå¦‚Sleuth/Zipkinæˆ–å…¶ä»–ï¼‰ã€‚ 3. å¤§æ¨¡å‹ä¸AIå¯¹æ¥\r#\rå¤§æ¨¡å‹è°ƒç”¨ä¸å¯¹è¯ç­–ç•¥\nç†Ÿæ‚‰å¸¸è§å¤§æ¨¡å‹APIè°ƒç”¨æ–¹å¼ï¼šåŒæ­¥/å¼‚æ­¥ã€æµå¼è¿”å›ï¼›å¦‚ä½•å¤„ç†ç½‘ç»œè¶…æ—¶ã€é™çº§ç­–ç•¥ã€å¹¶å‘è¯·æ±‚é™æµã€‚ å¯¹è¯ç®¡ç†ï¼šå¦‚ä½•è®¾è®¡å¯¹è¯çŠ¶æ€æœºæˆ–ç­–ç•¥ï¼Œç»“åˆè§„åˆ™ä¸å¤§æ¨¡å‹ç”Ÿæˆç»“æœã€‚å¦‚ä½•å¤„ç†å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆçŸ­æœŸä¸Šä¸‹æ–‡ç¼“å­˜ã€é•¿ä¼šè¯å†å²å­˜å‚¨ä¸æ£€ç´¢ï¼‰ã€‚ Prompt è®¾è®¡ä¸ä¼˜åŒ–ï¼šé’ˆå¯¹ç”µè¯åœºæ™¯çš„æç¤ºè¯ï¼ˆPromptï¼‰ç­–ç•¥ï¼ŒåŒ…æ‹¬å¤šæ¨¡æ€ï¼ˆå¦‚æœæœ‰ä¿¡å·è´¨é‡/ç”¨æˆ·æ ‡ç­¾ç­‰é¢å¤–ä¿¡æ¯ï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´Promptã€å°‘é‡ç¤ºä¾‹å­¦ä¹ ã€æŒ‡ä»¤å¼Promptã€‚ Latencyä¸æˆæœ¬è€ƒè™‘ï¼šç”µè¯å®æ—¶å¯¹è¯å¯¹å»¶è¿Ÿæ•æ„Ÿï¼Œéœ€åœ¨è®¾è®¡ä¸­è€ƒè™‘æœ¬åœ°è½»é‡åŒ–æ¨¡å‹æˆ–å¤šçº§è°ƒç”¨ç­–ç•¥ï¼ˆå…ˆæœ¬åœ°å°æ¨¡å‹å¿«é€Ÿå“åº”ï¼Œå¿…è¦æ—¶å†è°ƒå¤§æ¨¡å‹ï¼‰ï¼Œæˆ–ç¼“å­˜å¸¸è§é—®é¢˜ç­”æ¡ˆã€‚ ASR/TTSé›†æˆ\nä¸ASR/TTSæœåŠ¡é›†æˆçš„å¸¸è§å®è·µï¼šHTTP/gRPCè°ƒç”¨ã€éŸ³é¢‘æµå¤„ç†ï¼ˆPCM/WAVç­‰æ ¼å¼è½¬æ¢ï¼‰ã€å®æ—¶ä¸ç¦»çº¿æ¨¡å¼ã€è¯­éŸ³è´¨é‡æ£€æµ‹ã€å™ªå£°æŠ‘åˆ¶ã€‚ é”™è¯¯å¤„ç†ï¼šASRè¯†åˆ«é”™è¯¯çš„fallbackæ–¹æ¡ˆï¼Œå¦‚ç¡®è®¤ã€é‡é—®æˆ–è½¬äººå·¥ï¼›TTSå‘éŸ³è´¨é‡ç›‘æ§ã€‚ åè®®å±‚ï¼šMRCPåè®®å¦‚ä½•åœ¨ç³»ç»Ÿä¸­è½åœ°ï¼Œå¦‚ä½•ä¿è¯ä¸FreeSWITCHç­‰å‘¼å«ä¸­å¿ƒè®¾å¤‡çš„ç¨³å®šé€šä¿¡(\rtech.meituan.com)ã€‚ æ•°æ®èƒ½åŠ›ä¸ç›‘æ§\næ„å»ºæ•°æ®å¤§ç›˜ï¼šå®šä¹‰å…³é”®æŒ‡æ ‡ï¼ˆå¦‚è¯†åˆ«å‡†ç¡®ç‡ã€å“åº”å»¶è¿Ÿã€å¯¹è¯æˆåŠŸç‡ã€ç”¨æˆ·æ»¡æ„åº¦ã€è½¬äººå·¥ç‡ã€ROIç­‰ï¼‰ï¼Œå¹¶åŸºäºå®æ—¶ä¸ç¦»çº¿æ•°æ®å»ºç«‹ç›‘æ§ä¸æŠ¥è­¦ã€‚ æ—¥å¿—ä¸æŒ‡æ ‡é‡‡é›†ï¼šè°ƒç”¨é“¾åŸ‹ç‚¹ã€æ—¥å¿—ç»“æ„åŒ–ã€æŒ‡æ ‡ä¸ŠæŠ¥ç³»ç»Ÿï¼ˆå¦‚Prometheusã€Elasticsearch+Kibanaã€Grafanaç­‰ï¼‰ã€‚ A/Bæµ‹è¯•ä¸å®éªŒå¹³å°ï¼šå¯¹ä¸åŒå¯¹è¯ç­–ç•¥ã€Promptç‰ˆæœ¬æˆ–æ¨¡å‹ç‰ˆæœ¬è¿›è¡Œå®éªŒåˆ†æï¼Œè¯„ä¼°æ•ˆæœå¹¶è¿­ä»£ã€‚ å®‰å…¨ä¸åˆè§„\nè¯­éŸ³æ•°æ®éšç§ä¿æŠ¤ï¼šåŠ å¯†ä¼ è¾“ä¸å­˜å‚¨ã€è„±æ•å¤„ç†ã€è®¿é—®æ§åˆ¶ã€å®¡è®¡æ—¥å¿—ã€‚ é£æ§å¯¹æ¥ï¼šç”µè¯åº”ç”¨å¸¸ä¼šæ¶‰åŠè¯ˆéª—æ£€æµ‹ã€é£æ§è§„åˆ™ï¼Œå¯¹æ¥é£æ§ç­–ç•¥æ—¶éœ€è€ƒè™‘å®æ—¶å†³ç­–ä¸æ‰¹é‡å†³ç­–æµç¨‹ã€‚ åˆè§„è¦æ±‚ï¼šæ ¹æ®åœ°åŸŸæ³•å¾‹æ³•è§„ï¼ˆå¦‚ä¸­å›½ç›¸å…³è§„å®šï¼‰å¯¹å½•éŸ³ç•™å­˜ã€ç”¨æˆ·éšç§ä¿éšœã€æ•°æ®å®‰å…¨è¦æ±‚ã€‚ 4. å¾®æœåŠ¡é‡æ„ä¸æ¶æ„æ¼”è¿›ç»éªŒ\r#\rä¸­å¤§å‹ç³»ç»Ÿé‡æ„ç»éªŒ\nå¦‚ä½•è¯„ä¼°æ—§ç³»ç»Ÿç—›ç‚¹ï¼ˆæ€§èƒ½ç“¶é¢ˆã€å¯ç»´æŠ¤æ€§å·®ã€å¯æ‰©å±•æ€§ä¸è¶³ç­‰ï¼‰ï¼Œåˆ¶å®šé‡æ„æ–¹æ¡ˆï¼šåˆ†é˜¶æ®µè¿ç§»ã€åŒå†™æˆ–ç°åº¦æ›¿æ¢ã€å›æ»šç­–ç•¥ã€å…¼å®¹æ€§å¤„ç†ã€‚ ä»£ç è´¨é‡ä¸å·¥ç¨‹åŒ–ï¼šæœåŠ¡æ¨¡å—åŒ–ã€å…¬å…±ç»„ä»¶æç‚¼ã€ç»Ÿä¸€SDK/å·¥å…·é“¾ã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€å‹æµ‹è„šæœ¬ï¼‰ã€CI/CDæµæ°´çº¿ã€‚ å¯è§‚æµ‹æ€§æå‡ï¼šå…¨é“¾è·¯è¿½è¸ªã€æ—¥å¿—è¿½è¸ªã€æŒ‡æ ‡ç›‘æ§ã€å¯è§†åŒ–å¤§ç›˜ã€‚ åœ¨é¢è¯•ä¸­ï¼Œå‡†å¤‡ä¸€åˆ°ä¸¤ä¸ªä½ ä¸»å¯¼æˆ–å‚ä¸è¿‡çš„é‡æ„æ¡ˆä¾‹ï¼Œè¯´æ˜èƒŒæ™¯ã€æŒ‘æˆ˜ã€è§£å†³æ–¹æ¡ˆã€æ”¶ç›Šã€æ•™è®­ã€‚ 5. å›¢é˜Ÿåˆä½œä¸è·¨å›¢é˜Ÿåä½œ\r#\ræ²Ÿé€šèƒ½åŠ›\nç†è§£ä¸šåŠ¡éœ€æ±‚ï¼šä¸äº§å“ã€è¿è¥ã€ç®—æ³•ã€é£æ§å›¢é˜Ÿç­‰å¤šæ–¹äº¤æµï¼Œå¬æ‡‚ä¸šåŠ¡ç—›ç‚¹å¹¶å°†å…¶è½¬åŒ–ä¸ºæŠ€æœ¯æ–¹æ¡ˆï¼› æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡ï¼šæ’°å†™æ¸…æ™°çš„è®¾è®¡æ–‡æ¡£ï¼Œåšå¥½æŠ€æœ¯è¯„å®¡ï¼Œå¹³è¡¡å¯è¡Œæ€§ã€å¯ç»´æŠ¤æ€§ã€æˆæœ¬ã€é£é™©ï¼› è·¯ç”±ä¸åˆ†å±‚å¯¹æ¥ï¼šä¸è·¯ç”±å›¢é˜Ÿå¯¹æ¥ç”µè¯çº¿è·¯ï¼›ä¸ç”¨æˆ·åˆ†å±‚å›¢é˜Ÿå¯¹æ¥ç”¨æˆ·ç”»åƒã€æ ‡ç­¾ï¼›ä¸é£æ§å›¢é˜Ÿå¯¹æ¥å®æ—¶é£æ§ç­–ç•¥ç­‰ã€‚ é¢†å¯¼ä¸å¸¦é¢†\nä½œä¸ºä¸»Rï¼Œéœ€è¦å¸¦é¢†å°å›¢é˜Ÿå®Œæˆæ ¸å¿ƒèƒ½åŠ›æ¨¡å—ï¼Œåˆ¶å®šè®¡åˆ’ã€è·Ÿè¿›è¿›åº¦ã€æŒ‡å¯¼åŒå­¦ã€é£é™©é¢„åˆ¤ä¸ç®¡æ§ï¼Œç¡®ä¿äº¤ä»˜è´¨é‡ä¸æ—¶é—´ï¼› åŸ¹å…»æ–°äººï¼šå¦‚ä½•å¸®åŠ©æ–°äººå¿«é€Ÿä¸Šæ‰‹ã€è®¾è®¡åˆç†çš„æ–‡æ¡£æˆ–ç¤ºä¾‹ï¼›æŠ€æœ¯åˆ†äº«ä¸åŸ¹è®­ã€‚ ä¸‰ã€å¯èƒ½çš„é¢è¯•é¢˜ä¸å›ç­”æ€è·¯\r#\rä»¥ä¸‹ç¤ºä¾‹é¢˜ç›®ä¾›ç»ƒä¹ ï¼Œå¯ç»“åˆè‡ªèº«ç»éªŒå‡†å¤‡å›ç­”ã€‚\n1. åˆ†å¸ƒå¼ç³»ç»Ÿä¸æ¶æ„è®¾è®¡é¢˜\r#\ré¢˜ç›®ç¤ºä¾‹ï¼šè®¾è®¡ä¸€ä¸ªå¤§æ¨¡å‹ç”µè¯å®¢æœç³»ç»Ÿæ¶æ„\néœ€æ±‚è¦ç‚¹ï¼š\næ”¯æŒé«˜å¹¶å‘å‘¼å…¥/å¤–å‘¼ï¼šæ—¥å¸¸é«˜å³°å’Œçªå‘æ´»åŠ¨æ—¶çš„æµé‡æ³¢åŠ¨ï¼› å®æ—¶ASRè¯†åˆ«ä¸TTSåˆæˆï¼›å¤§æ¨¡å‹åœ¨çº¿è°ƒç”¨ï¼Œå“åº”æ—¶å»¶æ§åˆ¶åœ¨å¯æ¥å—çš„èŒƒå›´ï¼› å¯æ’æ‹”æ¨¡å‹ç‰ˆæœ¬ï¼šæ”¯æŒå¤šç§å¤§æ¨¡å‹æˆ–æœ¬åœ°å¤‡é€‰æ–¹æ¡ˆï¼› å¤±è´¥é™çº§ç­–ç•¥ï¼šASR/TTSæˆ–å¤§æ¨¡å‹è°ƒç”¨å¼‚å¸¸æ—¶å¦‚ä½•å¿«é€Ÿé™çº§åˆ°ç®€å•è§„åˆ™æˆ–äººå·¥è½¬æ¥ï¼› æ•°æ®é‡‡é›†ä¸ç›‘æ§ï¼šå®æ—¶æŒ‡æ ‡æ”¶é›†ã€æ—¥å¿—åŸ‹ç‚¹ã€è°ƒç”¨é“¾è¿½è¸ªï¼› å®‰å…¨ä¸åˆè§„ï¼šå½•éŸ³ç•™å­˜ã€éšç§åŠ å¯†ã€é£æ§æ¥å…¥ï¼› å¯æ‰©å±•æ€§ï¼šæ°´å¹³æ‰©å±•æœåŠ¡èŠ‚ç‚¹ã€å¼‚åœ°å¤šæ´»æˆ–å®¹ç¾æ–¹æ¡ˆï¼› è¿ç»´ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²ã€å¥åº·æ£€æŸ¥ã€è“ç»¿/ç°åº¦å‘å¸ƒï¼› å›ç­”æ€è·¯ï¼š\næ•´ä½“æ¶æ„å›¾ï¼šç”»å‡ºå‘¼å«ä¸­å¿ƒè®¾å¤‡åˆ°åç«¯å¾®æœåŠ¡ã€ASR/TTSæœåŠ¡ã€å¤§æ¨¡å‹æœåŠ¡ã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“ã€ç›‘æ§ç³»ç»Ÿçš„è°ƒç”¨æµç¨‹ã€‚ å‘¼å«æ¥å…¥å±‚ï¼šFreeSWITCH/Asterisk è´Ÿè´£ç”µä¿¡æ¥å…¥ï¼Œè½¬å‘éŸ³é¢‘æµåˆ°æ™ºèƒ½è¯­éŸ³æœåŠ¡ï¼›ç”¨MRCPåè®®ä¸ASR/TTSå¯¹æ¥ï¼Œç»†èŠ‚å¯æåŠéŸ³é¢‘æ ¼å¼è½¬æ¢ã€è¯­éŸ³æ–­ç‚¹æ£€æµ‹ç­‰(\rtech.meituan.com)ã€‚ æ™ºèƒ½è¯­éŸ³æœåŠ¡å±‚ï¼šå®ç°ASR/TTSè°ƒç”¨å°è£…ã€å¯¹è¯ç®¡ç†ã€ç­–ç•¥å¼•æ“ã€‚å†…éƒ¨å¯ç”¨Spring Bootå¾®æœåŠ¡ï¼Œå¼‚æ­¥æ¡†æ¶å¤„ç†å¹¶å‘ï¼šå¦‚Netty/NIOå¤„ç†å®æ—¶éŸ³é¢‘æµï¼›çº¿ç¨‹æ± éš”ç¦»ä¸åŒè°ƒç”¨ç±»å‹ã€‚ å¤§æ¨¡å‹è°ƒç”¨å±‚ï¼šå¯ä»¥é€šè¿‡ç»Ÿä¸€çš„æ¨¡å‹è°ƒç”¨ç½‘å…³æˆ–SDKï¼Œæ”¯æŒå¼‚æ­¥æµå¼è¿”å›ï¼›éœ€è€ƒè™‘è°ƒç”¨é™æµã€ç†”æ–­ã€é‡è¯•ã€è¶…æ—¶ç­–ç•¥ï¼›å¯è®¾è®¡å¤šçº§è°ƒç”¨ï¼šå…ˆæœ¬åœ°å°æ¨¡å‹å¿«é€Ÿå“åº”ï¼Œå†å¿…è¦æ—¶è°ƒç”¨å¤§æ¨¡å‹ã€‚ çŠ¶æ€ç®¡ç†ä¸å¯¹è¯ç®¡ç†ï¼šè®¾è®¡ä¼šè¯IDä½“ç³»ï¼Œå°†ç”¨æˆ·é€šè¯çŠ¶æ€ä¿å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚Redisï¼‰æˆ–æ•°æ®åº“ï¼›å¯¹è·¨å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†ï¼ŒåŒ…æ‹¬åŠ¨æ€ä¸Šä¸‹æ–‡è£å‰ªã€é•¿æœŸä¿¡æ¯å­˜å‚¨ä¸æ£€ç´¢ç­‰ã€‚ æ•°æ®ä¸ç›‘æ§ï¼šè°ƒç”¨é“¾åŸ‹ç‚¹ï¼ˆå¦‚ä½¿ç”¨Sleuth/Zipkinæˆ–å†…éƒ¨é“¾è·¯è¿½è¸ªï¼‰ï¼Œæ—¥å¿—ç»“æ„åŒ–è¾“å‡ºï¼›å…³é”®æŒ‡æ ‡ä¸ŠæŠ¥åˆ°Prometheus/Grafanaæˆ–ç¾å›¢å†…éƒ¨ç›‘æ§å¹³å°ï¼›æ­å»ºæ•°æ®å¤§ç›˜ï¼Œåˆ†æASRå‡†ç¡®ç‡ã€å“åº”æ—¶å»¶ã€å¯¹è¯æˆåŠŸç‡ç­‰ã€‚ é™çº§ä¸å®¹é”™ï¼šASR/TTSè¶…æ—¶æˆ–è¯†åˆ«ç‡ä½æ—¶ï¼Œé™çº§åˆ°è§„åˆ™é—®ç­”æˆ–æç¤ºè½¬äººå·¥ï¼›å¤§æ¨¡å‹è°ƒç”¨å¤±è´¥æ—¶ï¼Œfallbackç®€å•FAQæˆ–æç¤ºäººå·¥ï¼›æ¶ˆæ¯é˜Ÿåˆ—ç¼“å†²çªå‘æµé‡ï¼Œé˜²æ­¢ä¸‹æ¸¸æœåŠ¡å‹å®ã€‚ å­˜å‚¨ä¸æœç´¢ï¼šå‘¼å«æ—¥å¿—ã€å½•éŸ³æ–‡ä»¶ã€å¯¹è¯è®°å½•ç­‰å­˜å‚¨ç­–ç•¥ï¼šå®æ—¶ä½¿ç”¨Elasticsearchåšæ£€ç´¢åˆ†æï¼›å½’æ¡£åˆ°åˆ†å¸ƒå¼å­˜å‚¨ç”¨äºç¦»çº¿åˆ†æä¸æ¨¡å‹è®­ç»ƒã€‚ å®‰å…¨åˆè§„ï¼šé€šè¯å½•éŸ³åŠ å¯†å­˜å‚¨ã€è®¿é—®æ§åˆ¶ï¼›æ•°æ®è„±æ•ï¼›ååŒé£æ§å›¢é˜Ÿæ¥å…¥å®æ—¶é£æ§å†³ç­–æœåŠ¡ï¼›æ»¡è¶³æ³•è§„è¦æ±‚çš„å½•éŸ³ä¿å­˜æ—¶é•¿ä¸ç”¨æˆ·éšç§ä¿æŠ¤ã€‚ è¿ç»´ä¸è‡ªåŠ¨åŒ–ï¼šä½¿ç”¨Kubernetesæˆ–å®¹å™¨é›†ç¾¤ï¼Œè‡ªåŠ¨ä¼¸ç¼©ï¼›å¥åº·æ£€æŸ¥ä¸æŠ¥è­¦ï¼›CI/CDæµæ°´çº¿æ”¯æŒè‡ªåŠ¨æ„å»ºã€è‡ªåŠ¨æµ‹è¯•ã€è‡ªåŠ¨éƒ¨ç½²ã€è‡ªåŠ¨å›æ»šã€‚ æ‰©å±•æ€§ä¸å¤šæ´»ï¼šè·¨åœ°åŸŸéƒ¨ç½²å¤šæ´»æ¶æ„ï¼Œè§£å†³ç½‘ç»œæ•…éšœæˆ–å•ç‚¹å®•æœºï¼Œä¿è¯é«˜å¯ç”¨ï¼›è¯»å†™åˆ†ç¦»ã€å¤šä¸»æˆ–ä¸»ä»å¤åˆ¶æ•°æ®åº“ï¼›é…ç½®ä¸­å¿ƒå’ŒæœåŠ¡å‘ç°æ”¯æŒå¤šé›†ç¾¤ç¯å¢ƒã€‚ é¢è¯•æ—¶å»ºè®®ï¼šåœ¨å›ç­”è¿‡ç¨‹ä¸­å¯ç”»ç™½æ¿æˆ–åœ¨çº¸ä¸Šå†™ç®€ç•¥å›¾ï¼Œåˆ†å±‚é˜è¿°ã€‚ç»“åˆè‡ªå·±è¿‡å¾€ç»éªŒï¼Œæè¿°å¦‚ä½•è½åœ°ç±»ä¼¼è®¾è®¡æˆ–ä»¥å¾€é‡åˆ°çš„æŒ‘æˆ˜ä¸ä¼˜åŒ–æ–¹æ¡ˆã€‚\n2. æ•°æ®èƒ½åŠ›ä¸ç›‘æ§é¢˜\r#\ré¢˜ç›®ç¤ºä¾‹ï¼šå¦‚ä½•è®¾è®¡ä¸€å¥—æ•°æ®å¤§ç›˜ï¼Œç”¨äºç›‘æ§å¤§æ¨¡å‹ç”µè¯æœåŠ¡ä½“éªŒï¼Ÿ\nå…³é”®æŒ‡æ ‡ï¼šASRè¯†åˆ«ç‡ã€TTSåˆæˆæˆåŠŸç‡ã€LLMå“åº”æ—¶å»¶ã€å¯¹è¯æˆåŠŸç‡ï¼ˆå¦‚ç”¨æˆ·ç»™å‡ºæ»¡æ„å›ç­”æˆ–å®Œæˆé¢„æœŸåŠ¨ä½œï¼‰ã€è½¬äººå·¥ç‡ã€ç”¨æˆ·æŒ‚æ–­ç‡ã€ä¸šåŠ¡è½¬åŒ–ç‡ï¼ˆå¦‚ç”¨æˆ·è§£å†³é—®é¢˜ã€å®Œæˆäº¤æ˜“ï¼‰ã€é”™è¯¯ç‡ã€ç³»ç»Ÿååé‡ã€èµ„æºä½¿ç”¨ç‡ï¼ˆCPU/GPUï¼‰ã€‚ æ•°æ®é‡‡é›†ï¼šåœ¨å„è°ƒç”¨ç‚¹åŸ‹æ—¥å¿—ä¸åŸ‹ç‚¹ï¼›å®æ—¶é‡‡é›†æµå¼æ•°æ®ï¼ˆå¯ç”¨Kafka/Flinkå®æ—¶å¤„ç†ï¼‰ï¼›ç¦»çº¿æ‰¹é‡å¤„ç†ç”¨äºæ›´æ·±å…¥åˆ†æå’Œæ¨¡å‹è®­ç»ƒã€‚ å¤§ç›˜å®ç°ï¼šå‰ç«¯å¯è§†åŒ–ï¼ˆGrafanaã€å†…éƒ¨BIå·¥å…·ï¼‰ï¼Œåç«¯å­˜å‚¨ï¼šæ—¶åºæ•°æ®åº“ï¼ˆPrometheusã€InfluxDBç­‰ï¼‰+æ—¥å¿—ç´¢å¼•ï¼ˆElasticSearchï¼‰ï¼›å®æ—¶æŠ¥è­¦ï¼šé˜ˆå€¼æŠ¥è­¦ä¸å¼‚å¸¸æ£€æµ‹ï¼ˆåŸºäºç»Ÿè®¡æˆ–MLçš„å¼‚å¸¸æ£€æµ‹ï¼‰ã€‚ A/Bæµ‹è¯•ä¸å®éªŒå¹³å°ï¼šå¯¹æ–°Promptã€æ–°æ¨¡å‹ç‰ˆæœ¬æˆ–ç­–ç•¥æ–¹æ¡ˆè¿›è¡Œå®éªŒï¼Œæ”¶é›†ä¸åŒæµé‡ç»„çš„æ•°æ®ï¼Œè¯„ä¼°æ•ˆæœï¼Œåšæ˜¾è‘—æ€§åˆ†æã€‚ åé¦ˆä¸è¿­ä»£ï¼šç»“åˆå¤§ç›˜æŒ‡æ ‡ä¸æ—¥å¿—åˆ†æç»“æœï¼ŒæŒç»­ä¼˜åŒ–å¯¹è¯ç­–ç•¥æˆ–æ¨¡å‹è°ƒç”¨é€»è¾‘ï¼›ä¸ç®—æ³•å›¢é˜Ÿåˆä½œï¼Œç”¨æ”¶é›†åˆ°çš„æ•°æ®è®­ç»ƒæˆ–å¾®è°ƒæ¨¡å‹ã€‚ 3. ç¼–ç ä¸ç®—æ³•é¢˜\r#\rå¹¶å‘ç¼–ç¨‹ï¼šå¯èƒ½è€ƒå¯Ÿä½¿ç”¨ Java å¹¶å‘åŒ…å®ç°é«˜æ€§èƒ½ã€å¤šçº¿ç¨‹åœºæ™¯ä¸‹çš„ä»»åŠ¡è°ƒåº¦æˆ–é™æµã€‚ä¾‹å¦‚ï¼šç”¨ä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•å®ç°åˆ†å¸ƒå¼é™æµï¼›ä½¿ç”¨çº¿ç¨‹æ± å¤„ç†å¼‚æ­¥ä»»åŠ¡ã€ä¼˜å…ˆé˜Ÿåˆ—å®ç°å¸¦ä¼˜å…ˆçº§çš„ä»»åŠ¡è°ƒåº¦ã€‚ ç®—æ³•é¢˜ï¼šè™½ç„¶åæ¶æ„è§’è‰²ï¼Œä»å¯èƒ½è¯¢é—®å¸¸è§ç®—æ³•é¢˜ï¼ˆå¦‚æŸ¥æ‰¾ã€æ’åºã€å›¾ç®—æ³•ã€åŠ¨æ€è§„åˆ’ï¼‰ï¼Œç›®çš„æ˜¯è€ƒå¯Ÿæ€è·¯ä¸ä»£ç èƒ½åŠ›ã€‚å»ºè®®å¤ä¹ å¸¸è§é¢˜ç›®å¹¶ç†Ÿç»ƒå†™å‡ºæ¸…æ™°å¯è¿è¡Œä»£ç ã€‚ æ•°æ®åº“ç›¸å…³ï¼šSQLæŸ¥è¯¢ä¼˜åŒ–ã€äº‹åŠ¡éš”ç¦»çº§åˆ«åŠå¹¶å‘æ§åˆ¶ï¼Œå¯èƒ½ä»¥é¢˜ç›®å½¢å¼å‡ºç°ã€‚ åºåˆ—åŒ–ä¸ç½‘ç»œï¼šå¦‚è®¾è®¡è‡ªå®šä¹‰åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–é€»è¾‘æ—¶å¦‚ä½•è€ƒè™‘å…¼å®¹æ€§ä¸æ€§èƒ½ã€å¦‚ä½•é˜²æ­¢ååºåˆ—åŒ–æ¼æ´ã€‚ Springåº”ç”¨ï¼šå¯èƒ½è¦æ±‚ç°åœºé˜…è¯»æˆ–åˆ†æä¸€æ®µSpring Booté¡¹ç›®ä»£ç ï¼Œå®šä½bugæˆ–ç†è§£é…ç½®ï¼Œæˆ–è§£é‡ŠSpring AOPã€äº‹åŠ¡ã€IOCåŸç†ã€‚ 4. æ¡ˆä¾‹ä¸ç»éªŒåˆ†äº«é¢˜\r#\ré¡¹ç›®ç»å†ï¼šå‡†å¤‡2-3ä¸ªä¸ä½ å²—ä½é«˜åº¦ç›¸å…³çš„é¡¹ç›®æ¡ˆä¾‹ï¼Œéœ€çªå‡ºï¼š\nä½ åœ¨é¡¹ç›®ä¸­æ‰¿æ‹…çš„è§’è‰²ï¼ˆä¾‹å¦‚ä¸»Ræˆ–æ ¸å¿ƒå¼€å‘è€…ï¼‰ï¼Œå…·ä½“å·¥ä½œå†…å®¹ï¼› æŠ€æœ¯ç—›ç‚¹ä¸æŒ‘æˆ˜ï¼šå¦‚å¦‚ä½•ä¼˜åŒ–æŸä¸ªé«˜å¹¶å‘æœåŠ¡ï¼›å¦‚ä½•è¿›è¡Œç³»ç»Ÿé‡æ„ï¼›å¦‚ä½•è®¾è®¡ç›‘æ§ç³»ç»Ÿï¼›å¦‚ä½•é›†æˆASR/TTSæˆ–å¤–éƒ¨æœåŠ¡ï¼›å¦‚ä½•ä¸AIæˆ–å¤§æ¨¡å‹é›†æˆï¼› è§£å†³æ–¹æ¡ˆï¼šæŠ€æœ¯é€‰å‹ã€æ¶æ„è®¾è®¡ã€å®ç°ç»†èŠ‚ã€æµ‹è¯•ä¸éªŒè¯æ–¹æ³•ï¼› æˆæœä¸é‡åŒ–æŒ‡æ ‡ï¼šå¦‚æ€§èƒ½æå‡å¤šå°‘ï¼›ç³»ç»Ÿå¯ç”¨æ€§æå‡ï¼›æˆæœ¬é™ä½ï¼›ä¸šåŠ¡è½¬åŒ–ç‡æå‡ï¼›ç”¨æˆ·æ»¡æ„åº¦æå‡ç­‰ï¼› ç»éªŒæ•™è®­ï¼šåœ¨è¿‡ç¨‹ä¸­å­¦åˆ°çš„æŠ€æœ¯æˆ–å›¢é˜Ÿåä½œç»éªŒã€é‡åˆ°çš„é—®é¢˜å’Œé¿å…æ–¹æ¡ˆã€‚ å¤±è´¥æˆ–é‡åˆ°çš„éš¾é¢˜ï¼šå¦‚æŸæ¬¡çº¿ä¸Šæ•…éšœå®šä½ä¸æ¢å¤ã€æ€§èƒ½ç“¶é¢ˆæ’æŸ¥ã€ä¾èµ–æœåŠ¡ä¸ç¨³å®šå¦‚ä½•åº”å¯¹ï¼Œå¯¹è¿™äº›æ¡ˆä¾‹è¦æ¸…æ™°æè¿°è¿‡ç¨‹ä¸æ”¶è·ã€‚\n5. é¢†åŸŸçŸ¥è¯†é¢˜\r#\rç”µè¯è¯­éŸ³äº¤äº’åŸºç¡€ï¼šå¯¹å‘¼å«ä¸­å¿ƒå¸¸è§åè®®ä¸æ¶æ„ï¼ˆSIPã€MRCPã€FreeSWITCH/Asteriskï¼‰æœ‰åŸºæœ¬äº†è§£ï¼›ASR/TTSçš„å·¥ä½œæµç¨‹ï¼›è¯­éŸ³ä¿¡å·å¤„ç†åŸºç¡€ï¼ˆå¦‚å¦‚ä½•å¤„ç†é™éŸ³ã€å™ªå£°ï¼‰ï¼›æ„å›¾è¯†åˆ«å’Œå¯¹è¯ç®¡ç†å¸¸è§æ–¹æ³•ï¼ˆåŸºäºè§„åˆ™ vs åŸºäºML/å¤§æ¨¡å‹ï¼‰ï¼›å›è½ä¸å¤šæ¨¡æ€ä¿¡æ¯ï¼ˆç”¨æˆ·æ ‡ç­¾ã€å†å²äº¤äº’æ•°æ®ï¼‰çš„ç»“åˆã€‚\nå‘¼å«ä¸­å¿ƒç³»ç»Ÿï¼šå¤–å‘¼/å‘¼å…¥æµç¨‹ã€è¿è¥å•†çº¿è·¯å¯¹æ¥ã€IVRæµç¨‹ï¼›å¸¸è§å‘¼å«è·¯ç”±ã€æ’é˜Ÿç­–ç•¥ï¼›å®æ—¶ç›‘æ§å‘¼å«è´¨é‡ã€‚\nå¤§æ¨¡å‹åœ¨ç”µè¯åœºæ™¯çš„æŒ‘æˆ˜ï¼š\nå»¶è¿Ÿæ•æ„Ÿï¼šè¯­éŸ³äº¤äº’ç”¨æˆ·å¯¹å“åº”æ—¶å»¶è¾ƒæ•æ„Ÿï¼Œéœ€è¦å®æ—¶æˆ–è¿‘å®æ—¶ï¼› è´¨é‡æ§åˆ¶ï¼šå¤§æ¨¡å‹ç”Ÿæˆå¯èƒ½å‡ºç°â€œè·‘é¢˜â€æˆ–ä¸å‡†ç¡®ï¼Œåº”ç»“åˆè§„åˆ™æˆ–çŸ¥è¯†åº“è¿›è¡Œè¿‡æ»¤ä¸æ ¡æ­£ï¼› ä¸Šä¸‹æ–‡ç®¡ç†ï¼šç”µè¯å¯¹è¯ä¸Šä¸‹æ–‡é•¿åº¦æœ‰é™ï¼Œéœ€è¦åœ¨Promptè®¾è®¡ä¸­æ³¨æ„æˆªæ–­ä¸é‡ç‚¹ä¿ç•™ï¼› èµ„æºæˆæœ¬ï¼šè°ƒç”¨å¤§æ¨¡å‹æˆæœ¬é«˜ï¼Œéœ€è¦åšå¥½è°ƒç”¨é¢‘æ¬¡æ§åˆ¶ã€ç¼“å­˜ã€åŠ¨æ€è°ƒåº¦ï¼› éšç§ä¸åˆè§„ï¼šå¯¹è¯å†…å®¹å¯èƒ½æ¶‰åŠéšç§æˆ–æ•æ„Ÿä¿¡æ¯ï¼Œéœ€è¦è„±æ•å’Œå®‰å…¨å­˜å‚¨ã€‚ 6. ç³»ç»Ÿæ¼”ç»ƒæˆ–ç™½æ¿é¢˜\r#\rè®¾è®¡ç¼“å­˜ç­–ç•¥ï¼šä¾‹å¦‚å¦‚ä½•ç¼“å­˜å¸¸è§é—®ç­”çš„ç»“æœï¼›ç¼“å­˜æ•°æ®å¤±æ•ˆä¸æ›´æ–°ç­–ç•¥ï¼›å¦‚ä½•å¤„ç†åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§ã€‚ è®¾è®¡ä¸€å¥—é™æµç†”æ–­æœºåˆ¶ï¼šç»“åˆHystrixæˆ–è‡ªç ”ï¼Œå¦‚ä½•ç›‘æ§é”™è¯¯ç‡ä¸å»¶è¿Ÿï¼Œè§¦å‘ç†”æ–­ï¼Œæ¢å¤åå¦‚ä½•æ£€æµ‹æ¢å¤æ—¶æœºï¼›åˆ†å¸ƒå¼é™æµå¦‚ä½•å®ç°ï¼ˆå¦‚ä¸€è‡´æ€§å“ˆå¸Œã€æ¼æ¡¶ã€ä»¤ç‰Œæ¡¶ã€Redis+Luaè„šæœ¬ç­‰ï¼‰ã€‚ çº¿ç¨‹æ± è°ƒä¼˜ï¼šå¦‚ä½•æ ¹æ®ä»»åŠ¡ç‰¹æ€§ï¼ˆCPUå¯†é›† vs IOå¯†é›†ï¼‰é€‰å–åˆé€‚çš„çº¿ç¨‹æ± å‚æ•°ï¼Œé˜²æ­¢OOMæˆ–çº¿ç¨‹è¿‡å¤šå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢è¿‡é«˜ã€‚ æ•…éšœå¤„ç†ä¸æ¢å¤ï¼šæ¨¡æ‹ŸASRæœåŠ¡å¤§è§„æ¨¡æ•…éšœæ—¶ï¼Œç³»ç»Ÿå¦‚ä½•å¿«é€Ÿé™çº§ã€ç†”æ–­å¹¶åˆ‡æ¢å¤‡ç”¨æ–¹æ¡ˆï¼›å¦‚ä½•è¿›è¡Œç¾å¤‡æ¼”ç»ƒã€‚ ç›‘æ§ä¸å‘Šè­¦æ–¹æ¡ˆè®¾è®¡ï¼šå¦‚ä½•è®¾ç½®é˜ˆå€¼å‘Šè­¦ä¸å¼‚å¸¸æ£€æµ‹å‘Šè­¦ï¼›å¦‚ä½•å®šä¹‰æŠ¥è­¦ç­–ç•¥ä»¥é¿å…å‘Šè­¦é£æš´ï¼›å¦‚ä½•è¿½è¸ªè·¨æœåŠ¡é“¾è·¯ã€‚ å››ã€é¢è¯•å‡†å¤‡ä¸ç­–ç•¥\r#\ræŠ€æœ¯å‡†å¤‡\nåˆ·ä¸€ä¸‹å¹¶å‘ã€å¤šçº¿ç¨‹ç›¸å…³çŸ¥è¯†ç‚¹å’Œå¸¸è§é¢è¯•é¢˜ï¼›å¤ä¹ JVMè°ƒä¼˜è¦ç‚¹ï¼›ç†Ÿæ‚‰SpringåŸç†ï¼›å›é¡¾MySQLä¼˜åŒ–ä¸ä¸­é—´ä»¶ä½¿ç”¨ç»éªŒã€‚ æ·±å…¥æ€è€ƒç”µè¯è¯­éŸ³åœºæ™¯ä¸­çš„ç³»ç»Ÿæ¶æ„ï¼šè¯»å‡ ç¯‡å…¬å¼€æ–‡ç« ï¼ˆå¦‚MRCPå®è·µï¼‰å¹¶æ•´ç†ç¬”è®°(\rtech.meituan.com)ã€‚ äº†è§£å¤§æ¨¡å‹è°ƒç”¨æ¨¡å¼ï¼šåŒæ­¥ã€å¼‚æ­¥ã€æµå¼è¿”å›ã€Promptè®¾è®¡ã€ç¼“å­˜ç­–ç•¥ã€å®¹é”™ã€é™çº§ã€‚ç»“åˆå»¶è¿Ÿæ•æ„Ÿåœºæ™¯æ€è€ƒä¼˜åŒ–æ–¹æ¡ˆã€‚ å‡†å¤‡é¡¹ç›®ç»éªŒï¼šæ¢³ç†è¿‡å¾€é¡¹ç›®ä¸å²—ä½è¦æ±‚çš„å¥‘åˆç‚¹ï¼Œå°¤å…¶åœ¨åˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€æ¶æ„è®¾è®¡ã€ç›‘æ§ã€AIé›†æˆç­‰æ–¹é¢çš„æ¡ˆä¾‹ã€‚ å¦‚æœæ²¡æœ‰ç”µè¯è¯­éŸ³é¡¹ç›®ç»éªŒï¼Œå¯è¯»ä¸€äº›è¡Œä¸šå®è·µæ–‡ç« ï¼Œè‡ªå·±æ„æ€ä¸€ä¸ªç”µè¯æœºå™¨äººç³»ç»Ÿçš„è®¾è®¡æ–¹æ¡ˆï¼Œå¹¶å¯¹æ¯”æ€è€ƒæ”¹è¿›ç‚¹ã€‚ è½¯æŠ€èƒ½å‡†å¤‡\næ²Ÿé€šä¸è¡¨è¾¾ï¼šé¢è¯•ä¸­è¦æ¡ç†æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ï¼Œèƒ½å¤Ÿç”¨ç®€æ´è¯­è¨€æè¿°å¤æ‚æ¶æ„ï¼›å¯¹é—®é¢˜è¾¹ç•Œå®šä¹‰è¦æ˜ç¡®ï¼Œé¿å…æ³›æ³›è€Œè°ˆã€‚ æé—®ç¯èŠ‚ï¼šå‡†å¤‡é’ˆå¯¹å›¢é˜Ÿã€æŠ€æœ¯æ ˆã€å›¢é˜Ÿæ–‡åŒ–ã€é¡¹ç›®ç—›ç‚¹çš„æœ‰æ·±åº¦çš„é—®é¢˜ï¼Œè¡¨ç°å¯¹å²—ä½çš„å…´è¶£å’Œå¯¹ä¸šåŠ¡çš„ç†è§£ã€‚ æ¡ˆä¾‹åˆ†äº«ï¼šç»ƒä¹ ç”¨STARï¼ˆSituation, Task, Action, Resultï¼‰æ¨¡å‹è®²è¿°é¡¹ç›®ç»éªŒï¼Œçªå‡ºä½ å¯¹ä¸šåŠ¡ä»·å€¼çš„å…³æ³¨å’ŒæŠ€æœ¯å†³ç­–èƒŒåçš„æ€è€ƒã€‚ å›¢é˜Ÿåˆä½œï¼šå‡†å¤‡è¯´æ˜ä½ å¦‚ä½•åœ¨è·¨å›¢é˜Ÿåœºæ™¯ä¸­åä½œï¼ˆå¦‚ä¸äº§å“ã€ç®—æ³•ã€è¿ç»´ã€é£æ§å›¢é˜Ÿé…åˆï¼‰ï¼Œå±•ç¤ºåè°ƒèƒ½åŠ›ä¸å½±å“åŠ›ã€‚ å­¦ä¹ èƒ½åŠ›ï¼šå¤§æ¨¡å‹ä¸AIé¢†åŸŸå˜åŒ–å¿«ï¼Œå¯è°ˆå¦‚ä½•æŒç»­å­¦ä¹ æ–°æŠ€æœ¯ï¼ˆé˜…è¯»è®ºæ–‡ã€å†…éƒ¨åˆ†äº«ã€Hackathonç­‰æ–¹å¼ï¼‰ï¼Œä»¥åŠå°†æ–°æŠ€æœ¯åº”ç”¨äºä¸šåŠ¡çš„æ€è·¯ã€‚ é¢è¯•å½¢å¼ä¸æµç¨‹\né€šå¸¸ä¼šæœ‰æŠ€æœ¯é¢ï¼ˆæ¶æ„è®¾è®¡ã€ç¼–ç é¢˜ã€åŸç†é—®ç­”ï¼‰ã€é¡¹ç›®ç»éªŒé¢ã€ä»¥åŠHRé¢æˆ–å›¢é˜Ÿæ–‡åŒ–é¢ã€‚ æå‰å‡†å¤‡ç¯å¢ƒï¼šå¦‚æœçº¿ä¸Šé¢è¯•ï¼Œæ£€æŸ¥ç½‘ç»œã€IDEã€ç™½æ¿å·¥å…·ï¼›å¦‚æœç°åœºé¢è¯•ï¼Œå¸¦å¥½ç¬”è®°æœ¬ã€ç¬”å’Œçº¸ï¼Œæå‰åˆ°è¾¾ï¼Œå¯¹åœºåœ°æœ‰å¿ƒç†é¢„æœŸã€‚ æ¨¡æ‹Ÿé¢è¯•ï¼šä¸æœ‹å‹æˆ–è‡ªå·±è¿›è¡Œæ¨¡æ‹Ÿé—®ç­”ï¼Œç»ƒä¹ æ—¶é—´æŠŠæ§ï¼Œé¿å…å›ç­”è¿‡é•¿æˆ–é—æ¼é‡ç‚¹ã€‚ ç®€å†æ¢³ç†ï¼šç¡®ä¿ç®€å†ä¸­é¡¹ç›®ç»å†ã€æŠ€æœ¯æ ˆä¸å²—ä½è¦æ±‚é«˜åº¦åŒ¹é…ï¼Œçªå‡ºåˆ†å¸ƒå¼ç³»ç»Ÿã€å¹¶å‘ä¼˜åŒ–ã€SpringåŸç†ã€æ•°æ®åº“ä¼˜åŒ–ã€ä¸­é—´ä»¶ç»éªŒï¼Œä»¥åŠAIæˆ–ç›¸å…³æ¢ç´¢ç»éªŒã€‚ å¤§æ¨¡å‹ç”µè¯æ–¹å‘çš„ç‰¹åˆ«å‡†å¤‡\né˜…è¯»å…¬å¼€èµ„æ–™ï¼šäº†è§£è¡Œä¸šç”µè¯æœºå™¨äººå¸¸è§æ–¹æ¡ˆï¼Œå¦‚ASR/TTSå‚å•†ï¼ˆç§‘å¤§è®¯é£ã€è…¾è®¯äº‘è¯­éŸ³ã€é˜¿é‡Œäº‘è¯­éŸ³æœåŠ¡ç­‰ï¼‰æ¥å…¥æ¨¡å¼å’Œæ€§èƒ½ç‰¹ç‚¹ï¼›MRCPåè®®å®è·µï¼›æ™ºèƒ½å¤–å‘¼/å‘¼å…¥æœºå™¨äººæµç¨‹ã€‚ æ€è€ƒå¤§æ¨¡å‹åœ¨ç”µè¯åœºæ™¯çš„è½åœ°æŒ‘æˆ˜ï¼šå¦‚ä½•ä¿éšœå®æ—¶æ€§ã€å¦‚ä½•åšPromptè£å‰ªã€å¦‚ä½•ç»“åˆä¸šåŠ¡è§„åˆ™åšå®‰å…¨è¿‡æ»¤ã€å¦‚ä½•é™ä½æˆæœ¬ã€å¦‚ä½•åšç°åº¦å’ŒABæµ‹è¯•ã€‚å¯å‡†å¤‡ä¸€ä¸ªç®€çŸ­PPTæˆ–æ€è·¯æ–‡æ¡£ï¼ˆè‡ªç”¨ï¼‰ï¼Œé¢è¯•æ—¶å¯ç”¨äºæ”¯æ’‘é˜è¿°ã€‚ æŒæ¡å¸¸è§å¤§æ¨¡å‹è°ƒç”¨ç»†èŠ‚ï¼šæµå¼è¿”å›å¤„ç†ã€æ–­æµé‡è¿ã€ä¸Šä¸‹æ–‡è¿ç»­æ€§ã€Tokené¢„ç®—ä¸è®¡è´¹ã€ç¼“å­˜å±‚è®¾è®¡ã€é™çº§ç­–ç•¥ã€‚ å…³æ³¨è¡Œä¸šåŠ¨å‘ï¼šæ¯”å¦‚ç¾å›¢è‡ªç ”å¤§æ¨¡å‹è¿›å±•ã€å†…éƒ¨AIå¹³å°èƒ½åŠ›ã€ç›¸å…³è®ºæ–‡æˆ–Tech Blogæ–‡ç« ã€‚å¯ä»¥åœ¨ç¾å›¢æŠ€æœ¯ç¤¾åŒºæˆ–è¿‘æœŸæŠ€æœ¯åˆ†äº«ä¸­å¯»æ‰¾ä¸ç”µè¯AIç›¸å…³çš„æ–‡ç« ï¼Œæ•´ç†è¦ç‚¹å¹¶æ€è€ƒåœ¨ä½ è®¾è®¡ä¸­çš„åº”ç”¨ã€‚ äº”ã€ç¤ºä¾‹é¢è¯•é—®é¢˜ä¸å›ç­”è¦ç‚¹\r#\rä»¥ä¸‹ç»™å‡ºéƒ¨åˆ†ç¤ºä¾‹é—®é¢˜å’Œæ€è·¯è¦ç‚¹ï¼ˆéå®Œæ•´ç­”æ¡ˆï¼Œä»…ä¾›å‚è€ƒæ€è€ƒï¼‰ï¼š\nè¯·è§£é‡ŠJavaåå°„ä¸ºä½•æ€§èƒ½è¾ƒä½ï¼Ÿèƒ½å¦ä¸¾ä¾‹ä½•æ—¶ç”¨åå°„ï¼Œä½•æ—¶é¿å…ï¼Ÿ\nå…³é”®ç‚¹ï¼šåå°„ç»•è¿‡ç¼–è¯‘æœŸä¼˜åŒ–ã€è¿è¡Œæ—¶æ£€æŸ¥ã€åŒ…è£…/æ‹†ç®±ã€JNIè°ƒç”¨å¼€é”€ç­‰ï¼›åœ¨æ¡†æ¶å¯åŠ¨æˆ–å°‘é¢‘è°ƒç”¨æ—¶å¯æ¥å—ï¼Œå¦‚Springæ³¨è§£æ‰«æï¼›åœ¨é«˜é¢‘ä¸šåŠ¡æ ¸å¿ƒè·¯å¾„åº”é¿å…ï¼Œç”¨ä»£ç ç”Ÿæˆæˆ–MethodHandleæ›¿ä»£(\rtech.meituan.com)ã€‚ å¯æMethodHandleå’ŒLambdaMetafactoryæ€§èƒ½æ›´ä¼˜ï¼Œä¸”Springéƒ¨åˆ†åœºæ™¯å·²ä½¿ç”¨è¿™äº›æ‰‹æ®µã€‚ å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘çš„å‘¼å«å¼‚æ­¥ä»»åŠ¡å¤„ç†æ¨¡å—ï¼Ÿ\næè¿°ä¸šåŠ¡æµç¨‹ï¼šæ¥åˆ°å‘¼å«è¯·æ±‚ï¼Œæäº¤å¼‚æ­¥ä»»åŠ¡ï¼ˆå¦‚è®°å½•æ—¥å¿—ã€æ¨é€æ¶ˆæ¯ã€å¼‚æ­¥é€šçŸ¥å¤–éƒ¨ç³»ç»Ÿï¼‰ï¼Œå¤„ç†éœ€ä¿è¯å¹‚ç­‰ï¼› æŠ€æœ¯é€‰å‹ï¼šä½¿ç”¨çº¿ç¨‹æ± æˆ–æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆKafka/RabbitMQ/ç¾å›¢å†…éƒ¨æ¶ˆæ¯ç³»ç»Ÿï¼‰ï¼›ä»»åŠ¡é‡è¯•ä¸å¹‚ç­‰è®¾è®¡ï¼›é˜Ÿåˆ—å®¹é‡ä¸èƒŒå‹ï¼›ç›‘æ§é˜Ÿåˆ—ç§¯å‹ï¼›ä¼˜å…ˆçº§ä»»åŠ¡å¤„ç†ï¼›çº¿ç¨‹æ± å‚æ•°è°ƒä¼˜ï¼›å¼‚å¸¸å‘Šè­¦ã€‚ Springä¸­AOPå¦‚ä½•å®ç°ï¼Ÿæœ‰å“ªäº›ä»£ç†æ–¹å¼ï¼Ÿ\né€šè¿‡åŠ¨æ€ä»£ç†ï¼ˆJDK Proxyï¼‰å’ŒCGLIBå­—èŠ‚ç ç”Ÿæˆï¼›BeanPostProcessoråœ¨å®¹å™¨åˆå§‹åŒ–é˜¶æ®µç”Ÿæˆä»£ç†å¯¹è±¡ï¼›æ³¨æ„æœ€ç»ˆç›®æ ‡å¯¹è±¡ç±»å‹ä¸ä»£ç†ç±»å‹çš„åŒºåˆ«ï¼›åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹AOPè°ƒç”¨å¼€é”€ï¼›å¯è®¨è®ºä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£æˆ–åˆ‡é¢ä¼˜åŒ–æ–¹æ¡ˆã€‚ è¯·è®¾è®¡ä¸€ä¸ªé™æµç†”æ–­ç³»ç»Ÿï¼Œç”¨äºé˜²æ­¢å¤§æ¨¡å‹è°ƒç”¨è¿‡è½½ã€‚\næ€è·¯ï¼šå…¨å±€é™æµä¸åˆ†å¸ƒå¼é™æµç­–ç•¥ï¼›åŸºäºä»¤ç‰Œæ¡¶æˆ–æ¼æ¡¶ç®—æ³•ï¼›ä½¿ç”¨Redisåšåˆ†å¸ƒå¼è®¡æ•°æˆ–ä»¤ç‰Œå‘æ”¾ï¼›ç†”æ–­åŸºäºé”™è¯¯ç‡æˆ–è¶…æ—¶ç‡ï¼Œè§¦å‘åçŸ­æ—¶é—´å†…æ‹’ç»æˆ–é™çº§ï¼›æ¢å¤ç­–ç•¥ï¼šåŠå¼€çŠ¶æ€æ¢æµ‹ï¼›ç›‘æ§æŒ‡æ ‡ï¼šè°ƒç”¨æˆåŠŸç‡ã€å»¶è¿Ÿï¼›ä¸é™çº§é€»è¾‘ç»“åˆï¼ˆå¦‚å›é€€åˆ°æœ¬åœ°å°æ¨¡å‹æˆ–è§„åˆ™ï¼‰ï¼›ç°åº¦å‘å¸ƒæ–°æ¨¡å‹æ—¶æµé‡æ§åˆ¶ã€‚ å¦‚ä½•ç®¡ç†å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ï¼Ÿ\nä½¿ç”¨ä¼šè¯IDå…³è”è¯·æ±‚ï¼›çŸ­æœŸä¸Šä¸‹æ–‡å­˜äºRedisæˆ–å†…å­˜ç¼“å­˜ï¼ŒåŒ…å«æœ€è¿‘å‡ è½®çš„å…³é”®ä¿¡æ¯ï¼›é•¿æœŸä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åå¥½ï¼‰å­˜äºDBï¼›Promptæ‹¼æ¥æ—¶åšè£å‰ªï¼ˆä¿ç•™æœ€ç›¸å…³ç‰‡æ®µï¼‰ï¼›å¯¹è¯ä¸Šä¸‹æ–‡ç‰ˆæœ¬ç®¡ç†ï¼›å¦‚ä½•é˜²æ­¢ä¸Šä¸‹æ–‡æ³„éœ²æˆ–æ»¥ç”¨ï¼›å¹¶å‘åœºæ™¯ä¸­å¦‚ä½•åŒæ­¥æ›´æ–°ä¸Šä¸‹æ–‡ï¼›å¦‚ä½•åšå¹¶è¡Œå¤šæ„å›¾è¯†åˆ«ã€‚ è°ˆè°ˆASRæ¥å…¥å’Œè¯†åˆ«ç»“æœå¤„ç†\nåè®®ä¸æ•°æ®æ ¼å¼ï¼šMRCPåè®®ã€WebSocketæˆ–HTTPæµå¼ï¼›éŸ³é¢‘é¢„å¤„ç†ï¼ˆé™å™ªã€å›å£°æ¶ˆé™¤ç­‰ï¼‰ï¼›ASRè¿”å›ç»“æœçš„å¯ä¿¡åº¦è¯„åˆ†ï¼›è¯†åˆ«ä¸ç¡®å®šæ—¶çš„å¤„ç†ï¼ˆç¡®è®¤ã€é‡é—®ï¼‰ï¼›å¤šè¯­ç§æˆ–æ–¹è¨€åœºæ™¯çš„æŒ‘æˆ˜ã€‚ æ€§èƒ½ï¼šæ‰¹é‡è¯·æ±‚ä¸å¹¶å‘è¯·æ±‚ç®¡ç†ã€è¶…æ—¶è®¾ç½®ã€å¹¶å‘é™åˆ¶ã€è¿æ¥å¤ç”¨ï¼›å¦‚ä½•ç›‘æ§ASRæœåŠ¡è´¨é‡å’Œè°ƒç”¨æˆæœ¬ã€‚ é¡¹ç›®ç»éªŒåˆ†äº«ï¼šè¯·è°ˆä¸€æ¬¡ä½ ä¸»å¯¼çš„é«˜å¹¶å‘ç³»ç»Ÿé‡æ„ç»å†\nè¯´æ˜èƒŒæ™¯ã€ç³»ç»Ÿç—›ç‚¹ã€åˆ†ææ–¹æ³•ï¼ˆå¦‚å‹æµ‹å®šä½ç“¶é¢ˆã€ä»£ç å‰–æã€æ—¥å¿—åˆ†æï¼‰ï¼›æå‡ºæ–¹æ¡ˆï¼ˆå¦‚æ‹†åˆ†æœåŠ¡ã€å¼•å…¥ç¼“å­˜ã€å¼‚æ­¥è§£è€¦ã€åˆ†åº“åˆ†è¡¨ã€ä¼˜åŒ–SQLã€æ”¹è¿›çº¿ç¨‹æ± æ¨¡å‹ï¼‰ï¼›å®æ–½è¿‡ç¨‹ï¼ˆé˜¶æ®µæ€§ç°åº¦ã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€å›æ»šé¢„æ¡ˆï¼‰ï¼›æ•ˆæœï¼ˆæ€§èƒ½æå‡å¤šå°‘ã€æˆæœ¬èŠ‚çœå¤šå°‘ã€ç¨³å®šæ€§æ”¹å–„ï¼‰ï¼›åç»­æŒç»­ä¼˜åŒ–æªæ–½ã€‚ å¦‚ä½•æ„å»ºæ•°æ®ç›‘æ§åŠæŠ¥è­¦ä½“ç³»ï¼Ÿ\nç›‘æ§ç»´åº¦ï¼šä¸šåŠ¡æŒ‡æ ‡ã€ç³»ç»ŸæŒ‡æ ‡ã€æ¨¡å‹æŒ‡æ ‡ï¼›é‡‡é›†æ–¹å¼ï¼šæ—¥å¿—åŸ‹ç‚¹ã€æŒ‡æ ‡ä¸ŠæŠ¥SDKï¼›å®æ—¶ç›‘æ§ä¸ç¦»çº¿åˆ†æç»“åˆï¼›å‘Šè­¦ç­–ç•¥ï¼šé˜ˆå€¼å‘Šè­¦ã€å¼‚å¸¸æ£€æµ‹ï¼ˆåŸºäºå†å²æ•°æ®ï¼‰ï¼›æŠ¥è­¦æ¸ é“ï¼šé‚®ä»¶ã€çŸ­ä¿¡ã€é’‰é’‰/Slackå‘Šè­¦ï¼›å‘Šè­¦å»é‡ä¸åˆ†çº§ï¼›äº‹æ•…å“åº”æµç¨‹ï¼›æ€æ ·åˆ©ç”¨ç›‘æ§è¿›è¡Œå®¹é‡è§„åˆ’å’Œé¢„è­¦ã€‚ å¦‚æœå¤§æ¨¡å‹è°ƒç”¨æˆæœ¬è¿‡é«˜ï¼Œå¦‚ä½•ä¼˜åŒ–æˆæœ¬ï¼Ÿ\næŠ€æœ¯æ–¹æ¡ˆï¼šç¼“å­˜å¸¸è§å¯¹è¯ç»“æœï¼›æœ¬åœ°å°æ¨¡å‹åˆç­›ï¼Œå¤§æ¨¡å‹åªåœ¨å¿…è¦æ—¶è°ƒç”¨ï¼›åŠ¨æ€è´Ÿè½½ç­–ç•¥ã€æµé‡åˆ†å±‚ï¼›å»¶è¿Ÿå®¹å¿åœºæ™¯æ”¹ä¸ºç¦»çº¿å¤„ç†ï¼›æ‰¹é‡å¤„ç†åœºæ™¯åˆå¹¶è¯·æ±‚ï¼›åˆç†é€‰æ‹©æ¨¡å‹ç²¾åº¦ä¸è®¡ç®—èµ„æºï¼›ç»“åˆæˆæœ¬ä¸æ•ˆæœè¡¡é‡ï¼Œå¼•å…¥é™é¢æˆ–ä¼˜å…ˆçº§ç­–ç•¥ã€‚ ä¸šåŠ¡æ–¹æ¡ˆï¼šè®¾ç½®ä¸šåŠ¡ä¼˜å…ˆçº§ã€ç”¨æˆ·åˆ†å±‚ï¼ˆé«˜ä»·å€¼ç”¨æˆ·å¯ç”¨æ›´å¥½æ¨¡å‹ï¼‰ï¼Œæ™®é€šåœºæ™¯ä½¿ç”¨è½»é‡æ–¹æ¡ˆï¼›A/Bæµ‹è¯•ä¸åŒç‰ˆæœ¬å¯¹æˆæœ¬ä¸æ•ˆæœçš„å½±å“ã€‚ è·¨å›¢é˜Ÿåä½œåœºæ™¯\nåœºæ™¯ç¤ºä¾‹ï¼šä¸é£æ§å›¢é˜Ÿå¯¹æ¥å®æ—¶æ¬ºè¯ˆæ£€æµ‹ï¼Œéœ€è¦åœ¨é€šè¯ä¸­åŠ¨æ€æŸ¥è¯¢é£é™©åˆ¤å®šï¼›ä¸è·¯ç”±å›¢é˜Ÿå¯¹æ¥ï¼Œå†³å®šæ‹¨æ‰“æ—¶é—´çª—å£æˆ–é‡æ‹¨ç­–ç•¥ï¼›ä¸ç”¨æˆ·åˆ†å±‚å›¢é˜Ÿå¯¹æ¥ï¼Œè·å–ç”¨æˆ·ç”»åƒä¿¡æ¯ç”¨äºå¯¹è¯ä¸ªæ€§åŒ–ï¼›ä¸æ³•åŠ¡/åˆè§„å›¢é˜Ÿæ²Ÿé€šå½•éŸ³ä¿å­˜ç­–ç•¥ã€‚ è¦ç‚¹ï¼šæ˜ç¡®æ¥å£åè®®ã€æ•°æ®æ ¼å¼ã€è°ƒç”¨æ—¶å»¶ä¸å¯é æ€§è¦æ±‚ï¼›åˆ¶å®šSLAsï¼›é”™è¯¯å’Œé™çº§å¤„ç†æ–¹æ¡ˆï¼›æ–‡æ¡£ä¸æ²Ÿé€šæµç¨‹ï¼›å®šæœŸå¯¹é½éœ€æ±‚ä¸æŠ€æœ¯æ–¹æ¡ˆï¼›æ•æ·å¼€å‘ä¸è¿­ä»£äº¤ä»˜ã€‚ å…­ã€å®è·µæ€§å‡†å¤‡\r#\råŠ¨æ‰‹ç»ƒä¹ \nç¼–å†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„â€œç”µè¯å¯¹è¯æ¨¡æ‹ŸæœåŠ¡â€ï¼šæ¨¡æ‹ŸASR/TTSè°ƒç”¨ï¼ˆå¯ç”¨å‡æ•°æ®æˆ–å¼€æºç®€å•åº“æ¨¡æ‹Ÿï¼‰ï¼Œç”¨Spring Bootå®ç°ä¸€ä¸ªå¯¹è¯ç®¡ç†å¾®æœåŠ¡ï¼›é›†æˆä¸€ä¸ªå…¬å…±å¤§æ¨¡å‹APIï¼ˆå¦‚OpenAIæˆ–æœ¬åœ°æ¨¡æ‹Ÿï¼‰ï¼Œå®ç°å¤šè½®å¯¹è¯é€»è¾‘ï¼›ç”¨Redisä¿å­˜ä¼šè¯çŠ¶æ€ï¼›åŠ å…¥é™æµå’Œç†”æ–­é€»è¾‘ï¼›ç¼–å†™ç®€å•çš„ç›‘æ§æŒ‡æ ‡è¾“å‡ºï¼ˆå¦‚Prometheuså®¢æˆ·ç«¯ï¼‰ã€‚é€šè¿‡è¿™ä¸ªDemoåŠ æ·±ç†è§£ï¼Œä¹Ÿå¯åœ¨é¢è¯•æ—¶ä¸¾ä¾‹è¯´æ˜è‡ªå·±äº²æ‰‹å®è·µè¿‡ç±»ä¼¼æµç¨‹ã€‚ å¦‚æœæ—¶é—´å……è£•ï¼Œå¯å°è¯•æ¥å…¥å¼€æºè¯­éŸ³å¥—ä»¶ï¼ˆå¦‚Kaldiæˆ–ç¬¬ä¸‰æ–¹ASR SDKæ¨¡æ‹Ÿï¼‰ï¼Œç†è§£éŸ³é¢‘å¤„ç†æµç¨‹ã€‚ é˜…è¯»ä¸ç¬”è®°\né˜…è¯»ç¾å›¢æŠ€æœ¯åšå®¢ä¸­ç›¸å…³è¯­éŸ³äº¤äº’å’ŒAIåº”ç”¨æ–‡ç« ï¼ˆå¦‚ MRCP å®è·µæ–‡ç« ï¼‰å¹¶è®°å½•å…³é”®æŠ€æœ¯ç‚¹å’Œæ€è€ƒã€‚ é˜…è¯»å¤§æ¨¡å‹è°ƒç”¨ã€Promptè®¾è®¡å’Œå¤šè½®å¯¹è¯ç®¡ç†çš„å…¬å¼€èµ„æ–™ã€è®ºæ–‡æˆ–åšå®¢ï¼Œæ€»ç»“åœ¨å®æ—¶ç”µè¯åœºæ™¯çš„åº”ç”¨æ³¨æ„äº‹é¡¹ã€‚ å¤ä¹ Springæºç å…³é”®æ¨¡å—ï¼ˆAOPã€Beanç”Ÿå‘½å‘¨æœŸã€äº‹åŠ¡ã€IOCå®¹å™¨ï¼‰ä»¥åŠJavaå¹¶å‘åŸç†ï¼Œç»“åˆå®é™…é¡¹ç›®ç»éªŒå½¢æˆç»“æ„åŒ–æ€è·¯ã€‚ ç®€å†ä¸è‡ªæˆ‘ä»‹ç»\nå°†ç®€å†ä¸­çš„é¡¹ç›®ç»éªŒçªå‡ºä¸å²—ä½è¦æ±‚å¥‘åˆçš„éƒ¨åˆ†ï¼Œå¦‚åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ã€é«˜å¹¶å‘ä¼˜åŒ–ã€SpringåŸç†åº”ç”¨ã€æ•°æ®åº“ä¸ä¸­é—´ä»¶è°ƒä¼˜ã€AIæˆ–è¯­éŸ³ç›¸å…³æ¢ç´¢ã€‚ è‡ªæˆ‘ä»‹ç»ï¼ˆ1-2åˆ†é’Ÿï¼‰è¦æ¶µç›–ä½ çš„æ ¸å¿ƒä¼˜åŠ¿ï¼šæ‰å®è®¡ç®—æœºåŸºç¡€ã€ä¸°å¯Œåˆ†å¸ƒå¼ç³»ç»Ÿç»éªŒã€AIæˆ–è¯­éŸ³æ–¹å‘çš„å…´è¶£/å®è·µã€è‰¯å¥½æ²Ÿé€šå’Œé¢†å¯¼èƒ½åŠ›ã€‚æŠŠè‡ªå·±å®šä½ä¸ºèƒ½å¤Ÿå¿«é€Ÿä¸Šæ‰‹å¹¶æ¨åŠ¨å¤§æ¨¡å‹ç”µè¯ç³»ç»Ÿè½åœ°çš„äººã€‚ å‡†å¤‡é—®é¢˜\né’ˆå¯¹å›¢é˜Ÿä¸å²—ä½ï¼Œå‡†å¤‡é—®é¢˜ï¼šå›¢é˜Ÿå½“å‰åœ¨å¤§æ¨¡å‹ç”µè¯åº”ç”¨ä¸Šæœ€è¿«åˆ‡çš„æŠ€æœ¯æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿç°æœ‰ç³»ç»Ÿæ¶æ„å¦‚ä½•ï¼Ÿä½¿ç”¨å“ªäº›ä¸­é—´ä»¶ä¸AIå¹³å°ï¼Ÿå›¢é˜Ÿåˆä½œæ¨¡å¼ä¸ç ”å‘æµç¨‹ï¼Ÿå¯¹æ–°æˆå‘˜çš„æœŸæœ›ï¼ŸæŠ€æœ¯æ ˆæˆ–å·¥å…·é“¾æœ‰ä½•åå¥½ï¼Ÿæœªæ¥æŠ€æœ¯æ¼”è¿›æ–¹å‘ï¼Ÿ é€šè¿‡æé—®å±•ç°ä½ å¯¹è¯¥æ–¹å‘çš„ç†è§£å’Œçƒ­æƒ…ï¼Œå¹¶ä¸ºåç»­é¢è¯•æ·±å…¥å¯¹è¯æ‰“ä¸‹åŸºç¡€ã€‚ ä¸ƒã€æ€»ç»“ä¸å¿ƒæ€\r#\rå…¨é¢å‡†å¤‡ï¼šæ—¢è¦æŒæ¡åˆ†å¸ƒå¼ã€å¹¶å‘ã€SpringåŸç†ã€æ•°æ®åº“ä¸ä¸­é—´ä»¶ä¼˜åŒ–ç­‰æ ¸å¿ƒåç«¯èƒ½åŠ›ï¼Œä¹Ÿè¦æ·±å…¥äº†è§£ç”µè¯è¯­éŸ³äº¤äº’æµç¨‹ã€å¤§æ¨¡å‹é›†æˆä¸å®æ—¶å¯¹è¯ç®¡ç†çš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠæ•°æ®ç›‘æ§ä¸è¿­ä»£ä¼˜åŒ–æ–¹æ³•ã€‚ ç»“åˆç»éªŒä¸å®è·µï¼šç”¨è‡ªå·±è¿‡å»çš„é¡¹ç›®ç»éªŒè¯´æ˜å…·å¤‡ç±»ä¼¼èƒ½åŠ›ï¼›è‹¥ç¼ºä¹è¯­éŸ³æ–¹å‘ç»éªŒï¼Œå¯é€šè¿‡è‡ªä¸»Demoæˆ–é˜…è¯»è¡Œä¸šå®è·µå¼¥è¡¥ï¼›å±•ç¤ºå¿«é€Ÿå­¦ä¹ ä¸è½åœ°èƒ½åŠ›ã€‚ ç»“æ„åŒ–è¡¨è¾¾ï¼šé¢è¯•æ—¶æ€è·¯è¦æ¸…æ™°ï¼Œå…ˆå®šä¹‰é—®é¢˜èŒƒå›´ï¼Œå†åˆ†å±‚æè¿°æ–¹æ¡ˆï¼Œæœ€åæ€»ç»“åˆ©å¼Šä¸å¯æ”¹è¿›ä¹‹å¤„ï¼›å›ç­”è¦ç»“åˆå…·ä½“ä¾‹å­æˆ–æ•°å­—ï¼Œé¿å…ç©ºæ³›ã€‚ æ²Ÿé€šä¸å›¢é˜Ÿæ„è¯†ï¼šçªå‡ºè·¨å›¢é˜Ÿåä½œç»éªŒã€è‰¯å¥½æ²Ÿé€šå’Œå½±å“åŠ›ï¼›é¢è¯•ä¸­å±•ç¤ºå¯¹å›¢é˜Ÿæ–‡åŒ–çš„å¥‘åˆåº¦å’Œæ¨åŠ¨ä»·å€¼ã€‚ æŒç»­å­¦ä¹ ï¼šå…³æ³¨è¡Œä¸šæœ€æ–°åŠ¨æ€å’ŒæŠ€æœ¯è¶‹åŠ¿ï¼ˆå¦‚æœ€æ–°å¤§æ¨¡å‹ã€å®æ—¶æµå¤„ç†æŠ€æœ¯ã€å¯è§‚æµ‹æ€§å·¥å…·ç­‰ï¼‰ï¼Œå¹¶æ€è€ƒå¦‚ä½•åº”ç”¨åˆ°å¤§æ¨¡å‹ç”µè¯æœåŠ¡ä¸­ã€‚ è‡ªä¿¡ä¸è°¦é€Šï¼šè¯šå®å›ç­”è‡ªå·±ä¸ç†Ÿæ‚‰çš„é¢†åŸŸï¼ŒåŒæ—¶å±•ç¤ºå­¦ä¹ è®¡åˆ’å’Œæ€è·¯ï¼›å¯¹ç†Ÿæ‚‰é¢†åŸŸè‡ªä¿¡é˜è¿°ï¼Œå¯¹ä¸ç†Ÿæ‚‰é¢†åŸŸè¡¨è¾¾å­¦ä¹ å…´è¶£å’Œå¿«é€Ÿä¸Šæ‰‹èƒ½åŠ›ã€‚ ç¥ä½ é¢è¯•é¡ºåˆ©ï¼è‹¥éœ€è¦åœ¨æŸä¸ªæŠ€æœ¯ç‚¹ä¸Šæ·±å…¥å®ç°ç¤ºä¾‹æˆ–ç»ƒä¹ ä»£ç ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥æ²Ÿé€šã€‚\n"},{"id":41,"href":"/docs/study/middleware/oauth2/auth-code/","title":"æˆæƒç æ¨¡å¼","section":"OAuth2","content":"\r1. ç”¨æˆ·æˆæƒä¸é‰´æƒæœºåˆ¶è®¾è®¡è¦ç‚¹\r#\ræˆæƒ vs é‰´æƒ\r#\ræˆæƒï¼ˆAuthorizationï¼‰ï¼šç¡®å®šç”¨æˆ·æˆ–å®¢æˆ·ç«¯æ˜¯å¦æœ‰æƒé™è®¿é—®æŸèµ„æºæˆ–æ‰§è¡ŒæŸæ“ä½œã€‚ é‰´æƒï¼ˆAuthenticationï¼‰ï¼šéªŒè¯ç”¨æˆ·èº«ä»½æ˜¯å¦çœŸå®ã€‚ å¸¸è§æŠ€æœ¯ä¸æ–¹æ¡ˆ\r#\ræŠ€æœ¯ ä½œç”¨ è¯´æ˜ OAuth2 æˆæƒæ¡†æ¶ æ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨ä»£è¡¨ç”¨æˆ·è®¿é—®èµ„æºï¼Œå¸¸ç”¨äºå¼€æ”¾APIå’ŒSSOåœºæ™¯ã€‚ JWT (JSON Web Token) é‰´æƒä»¤ç‰Œ æ— çŠ¶æ€Tokenï¼ŒåŒ…å«ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ï¼Œä¾¿äºåˆ†å¸ƒå¼ç³»ç»Ÿé‰´æƒã€‚ Session é‰´æƒçŠ¶æ€ç®¡ç† æœåŠ¡å™¨ç«¯ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œé€‚åˆå•ä½“æˆ–å°å‹åº”ç”¨ã€‚ Tokenåˆ·æ–° ä¿æŒé‰´æƒçŠ¶æ€ ä½¿ç”¨åˆ·æ–°Tokenè·å–æ–°çš„è®¿é—®Tokenï¼Œå‡å°‘ç”¨æˆ·é‡æ–°ç™»å½•é¢‘ç‡ã€‚ æƒé™æ¨¡å‹ ç»†ç²’åº¦æƒé™æ§åˆ¶ RBACï¼ˆåŸºäºè§’è‰²ï¼‰å’ŒACLï¼ˆåŸºäºè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰æ˜¯å¸¸è§æ¨¡å‹ã€‚ 2. è®¾è®¡å»ºè®®\r#\rè®¤è¯ä½¿ç”¨OAuth2 + JWTï¼š OAuth2æä¾›æ ‡å‡†æˆæƒæµç¨‹ï¼ŒJWTç”¨äºè®¿é—®ä»¤ç‰Œï¼Œæ”¯æŒæ— çŠ¶æ€é‰´æƒå’Œå¾®æœåŠ¡è°ƒç”¨ã€‚\nTokenè®¾è®¡ï¼š\nAccess Tokenï¼šæœ‰æ•ˆæœŸè¾ƒçŸ­ï¼Œæºå¸¦ç”¨æˆ·èº«ä»½åŠæƒé™ã€‚ Refresh Tokenï¼šæœ‰æ•ˆæœŸè¾ƒé•¿ï¼Œç”¨äºè·å–æ–°çš„Access Tokenã€‚ æƒé™æ§åˆ¶ï¼š\nRBACï¼šç”¨æˆ·åˆ†é…è§’è‰²ï¼Œè§’è‰²å¯¹åº”æƒé™ï¼Œç®€å•æ˜“ç»´æŠ¤ã€‚ ACLï¼šå¯¹èµ„æºå’Œç”¨æˆ·çš„è®¿é—®æƒé™åšç»†ç²’åº¦æ§åˆ¶ï¼Œé€‚åˆå¤æ‚åœºæ™¯ã€‚ å®‰å…¨åŠ å›ºï¼š\nHTTPSä¼ è¾“æ‰€æœ‰Tokenã€‚ Tokenç­¾åå’ŒåŠ å¯†ã€‚ å®šæœŸåˆ·æ–°Tokenã€‚ é˜²æ­¢Tokenæ³„éœ²å’Œé‡æ”¾æ”»å‡»ã€‚ 3. OAuth2 æˆæƒç æ¨¡å¼ï¼ˆAuthorization Code Grantï¼‰è¯¦ç»†æ­¥éª¤\r#\ræˆæƒç æ¨¡å¼ä¸»è¦ç”¨äºæœåŠ¡å™¨ç«¯åº”ç”¨ï¼Œæµç¨‹å¦‚ä¸‹ï¼š\nç”¨æˆ·è¯·æ±‚æˆæƒ ç”¨æˆ·åœ¨å®¢æˆ·ç«¯ï¼ˆå¦‚æµè§ˆå™¨ï¼‰è®¿é—®éœ€è¦æˆæƒçš„åŠŸèƒ½ï¼Œå®¢æˆ·ç«¯å°†ç”¨æˆ·é‡å®šå‘åˆ°æˆæƒæœåŠ¡å™¨çš„æˆæƒç«¯ç‚¹ï¼Œé™„å¸¦å®¢æˆ·ç«¯IDã€å›è°ƒåœ°å€ã€è¯·æ±‚æƒé™èŒƒå›´ï¼ˆscopeï¼‰ç­‰å‚æ•°ã€‚\nç”¨æˆ·ç™»å½•å¹¶æˆæƒ æˆæƒæœåŠ¡å™¨è¦æ±‚ç”¨æˆ·ç™»å½•ï¼ˆå¦‚æœæœªç™»å½•ï¼‰ï¼Œå¹¶è¯·æ±‚ç”¨æˆ·åŒæ„å®¢æˆ·ç«¯ç”³è¯·çš„æƒé™èŒƒå›´ã€‚\næˆæƒç è¿”å›å®¢æˆ·ç«¯ ç”¨æˆ·åŒæ„åï¼ŒæˆæƒæœåŠ¡å™¨å°†æˆæƒç ï¼ˆAuthorization Codeï¼‰é€šè¿‡æµè§ˆå™¨é‡å®šå‘å‘é€åˆ°å®¢æˆ·ç«¯é¢„å…ˆæ³¨å†Œçš„å›è°ƒåœ°å€ã€‚\nå®¢æˆ·ç«¯ç”¨æˆæƒç æ¢å–è®¿é—®Token å®¢æˆ·ç«¯åå°ç”¨æˆæƒç å‘æˆæƒæœåŠ¡å™¨çš„Tokenç«¯ç‚¹è¯·æ±‚Access Tokenå’ŒRefresh Tokenã€‚è¯·æ±‚éœ€åŒ…å«å®¢æˆ·ç«¯IDå’Œå¯†é’¥ï¼Œä¿è¯å®‰å…¨ã€‚\næˆæƒæœåŠ¡å™¨é¢å‘Token æˆæƒæœåŠ¡å™¨éªŒè¯æˆæƒç å’Œå®¢æˆ·ç«¯ä¿¡æ¯ï¼Œé¢å‘Access Tokenå’ŒRefresh Tokenç»™å®¢æˆ·ç«¯ã€‚\nå®¢æˆ·ç«¯æºå¸¦Access Tokenè®¿é—®èµ„æºæœåŠ¡å™¨ å®¢æˆ·ç«¯ä½¿ç”¨Access Tokenè¯·æ±‚å—ä¿æŠ¤çš„èµ„æºã€‚èµ„æºæœåŠ¡å™¨éªŒè¯Tokenæœ‰æ•ˆæ€§å¹¶è¿”å›æ•°æ®ã€‚\nAccess Tokenè¿‡æœŸåä½¿ç”¨Refresh Tokenåˆ·æ–° å½“Access Tokenè¿‡æœŸï¼Œå®¢æˆ·ç«¯ç”¨Refresh Tokenå‘æˆæƒæœåŠ¡å™¨è¯·æ±‚æ–°çš„Access Tokenã€‚\næµç¨‹å›¾ç®€è¿°ï¼š\r#\rç”¨æˆ· â†’ å®¢æˆ·ç«¯ â†’ æˆæƒæœåŠ¡å™¨ (è¯·æ±‚æˆæƒç )\rç”¨æˆ·ç™»å½•å¹¶æˆæƒ\ræˆæƒæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ (æˆæƒç )\rå®¢æˆ·ç«¯ â†’ æˆæƒæœåŠ¡å™¨ (æ¢å–Token)\ræˆæƒæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ (Access Token + Refresh Token)\rå®¢æˆ·ç«¯ â†’ èµ„æºæœåŠ¡å™¨ (æºå¸¦Access Tokenè®¿é—®èµ„æº) ä¼˜ç‚¹\r#\ræˆæƒç åœ¨æµè§ˆå™¨ä¼ è¾“ï¼Œé¿å…Tokenæ³„éœ²ã€‚ Access Tokenå’ŒRefresh Tokenåˆ†åˆ«ç®¡ç†ï¼Œå®‰å…¨æ€§é«˜ã€‚ æ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨å®‰å…¨è®¿é—®èµ„æºã€‚ 4. ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨å°† Access Token ç»‘å®šåˆ°ç”¨æˆ· Sessionï¼Œè¯¦ç»†è¯´æ˜ç»‘å®šå’Œå­˜å‚¨æŸ¥æ‰¾æµç¨‹\r#\rä¸€èˆ¬æµç¨‹\r#\rç”¨æˆ·ç™»å½•æˆåŠŸåï¼ŒæœåŠ¡å™¨ç”Ÿæˆ Session ID\næœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ Session IDï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªéšæœºã€éš¾ä»¥çŒœæµ‹çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ UUIDï¼‰ã€‚ Session ID é€šè¿‡ Set-Cookie å‘é€ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ï¼ˆCookie é€šå¸¸è®¾ç½®ä¸º HttpOnlyã€Secureã€SameSiteï¼‰ã€‚ æœåŠ¡å™¨åœ¨ Session å­˜å‚¨ä¸­ï¼ˆå¦‚ Redisï¼‰å»ºç«‹ Session è®°å½•\nä»¥ Session ID ä½œä¸º Keyï¼Œå­˜å‚¨ Session ç›¸å…³æ•°æ®ï¼Œå…¸å‹å†…å®¹åŒ…æ‹¬ï¼š\nç”¨æˆ·IDï¼ˆuser_idï¼‰ Access Tokenï¼ˆJWT æˆ–è‡ªå®šä¹‰ Tokenï¼‰ ç”¨æˆ·æƒé™/è§’è‰²ä¿¡æ¯ ç™»å½•æ—¶é—´ã€è¿‡æœŸæ—¶é—´ç­‰å…ƒæ•°æ® ä¾‹å¦‚ï¼ŒRedis ä¸­çš„é”®å€¼å¯¹ï¼š\nKey: session:\u0026lt;session_id\u0026gt; Value: {\r\u0026#34;user_id\u0026#34;: \u0026#34;12345\u0026#34;,\r\u0026#34;access_token\u0026#34;: \u0026#34;\u0026lt;JWTæˆ–å…¶ä»–token\u0026gt;\u0026#34;,\r\u0026#34;roles\u0026#34;: [\u0026#34;admin\u0026#34;, \u0026#34;user\u0026#34;],\r\u0026#34;expire_at\u0026#34;: \u0026#34;2025-06-30T12:00:00Z\u0026#34;\r} åç»­è¯·æ±‚å®¢æˆ·ç«¯æºå¸¦ Session ID Cookie\næœåŠ¡å™¨é€šè¿‡è¯·æ±‚çš„ Cookie è·å– Session IDã€‚ åˆ©ç”¨ Session ID æŸ¥ Redis è·å–ç”¨æˆ·èº«ä»½å’Œ Access Tokenã€‚ æœåŠ¡å™¨æ ¹æ® Access Token éªŒè¯æƒé™æˆ–ä¸šåŠ¡éœ€æ±‚ã€‚ ç»‘å®šå…³ç³»çš„å­˜å‚¨å’ŒæŸ¥æ‰¾\r#\rå­˜å‚¨ä½ç½®ï¼šé›†ä¸­å¼ Session å­˜å‚¨ï¼ˆRedisã€Memcached æˆ–æ•°æ®åº“ï¼‰ã€‚\næŸ¥æ‰¾æ–¹å¼ï¼š\nHTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ä» Cookie è·å– Session IDã€‚ ä½¿ç”¨ Session ID ä½œä¸º Keyï¼ŒæŸ¥è¯¢å­˜å‚¨è·å–ç”¨æˆ·æ•°æ®å’Œ Access Tokenã€‚ æ•°æ®ç»“æ„ï¼šå…¸å‹å“ˆå¸Œç»“æ„å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¿¡æ¯ï¼Œæ”¯æŒå¿«é€Ÿè¯»å†™å’Œè¿‡æœŸç®¡ç†ã€‚\n5. é˜²æ­¢ç”¨æˆ·ä¼ªé€  Session\r#\rå¦‚ä½•ä¿è¯ Session ä¸è¢«ä¼ªé€ ï¼Ÿ\r#\rSession ID çš„å®‰å…¨è®¾è®¡\nç”Ÿæˆæ–¹å¼éšæœºä¸”ä¸å¯é¢„æµ‹ï¼ˆä½¿ç”¨å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨ï¼‰ã€‚ é•¿åº¦è¶³å¤Ÿï¼Œé¿å…æš´åŠ›ç ´è§£ã€‚ åªé€šè¿‡ Cookie å‘é€ï¼Œä¸”è®¾ç½® HttpOnly å’Œ Secure æ ‡è®°ï¼Œé˜²æ­¢JSè®¿é—®å’ŒåŠ«æŒã€‚ Cookie ä¼ è¾“å®‰å…¨\nä½¿ç”¨ HTTPSï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»æŠ“åŒ…çªƒå– Session IDã€‚ è®¾ç½® SameSite=Strict æˆ– Laxï¼Œå‡å°‘ CSRF é£é™©ã€‚ æœåŠ¡ç«¯éªŒè¯\næœåŠ¡å™¨æ‹’ç»æ— æ•ˆæˆ–ä¸å­˜åœ¨çš„ Session IDã€‚ å¯¹ Session è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå®šæœŸæ¸…ç†ã€‚ äºŒæ¬¡éªŒè¯æœºåˆ¶ï¼ˆå¯é€‰ï¼‰\nç»“åˆç”¨æˆ· IP åœ°å€ã€User-Agent è¿›è¡Œç»‘å®šæ ¡éªŒã€‚ è‹¥å¼‚å¸¸åˆ™å¼ºåˆ¶é‡æ–°ç™»å½•ã€‚ ä½¿ç”¨åŒå› ç´ è®¤è¯æå‡å®‰å…¨æ€§ã€‚ æ”»å‡»æ£€æµ‹å’Œé˜²æŠ¤\nç›‘æ§å¼‚å¸¸ç™»å½•è¡Œä¸ºå’Œè¯·æ±‚é¢‘ç‡ã€‚ è§¦å‘é£æ§ç­–ç•¥ï¼ˆå¦‚é™æµã€éªŒè¯ç ï¼‰ã€‚ ä¸ºä»€ä¹ˆä¸ç›´æ¥å­˜ Access Token åœ¨å®¢æˆ·ç«¯ï¼Ÿ\r#\rå°† Access Token å­˜åœ¨å®¢æˆ·ç«¯ï¼ˆå¦‚ LocalStorageï¼‰å®¹æ˜“è¢« XSS æ”»å‡»çªƒå–ã€‚ å°† Token ä¿å­˜åœ¨æœåŠ¡ç«¯ Session ä¸­ï¼Œé€šè¿‡éš¾ä»¥çŒœæµ‹çš„ Session ID é—´æ¥æ ‡è¯†ç”¨æˆ·ï¼Œæé«˜å®‰å…¨æ€§ã€‚ è¿™æ ·å®¢æˆ·ç«¯åªæœ‰ Session IDï¼Œå•é  Session ID æ— æ³•ä¼ªé€ èº«ä»½ï¼Œå¿…é¡»æŒæœ‰æœ‰æ•ˆçš„ Session è®°å½•ã€‚ æ€»ç»“\r#\ré˜²ä¼ªé€ æªæ–½ å…·ä½“åšæ³• å®‰å…¨éšæœº Session ID ä½¿ç”¨å¼ºéšæœºæ•°ï¼Œé•¿åº¦é•¿ï¼Œä¸æ˜“çŒœæµ‹ å®‰å…¨ Cookie è®¾ç½® è®¾ç½® HttpOnlyã€Secureã€SameSite å±æ€§ HTTPS ä¼ è¾“ ç¡®ä¿æ‰€æœ‰é€šä¿¡åŠ å¯†ï¼Œé˜²æ­¢çªƒå– Session ID æœåŠ¡ç«¯ Session æ ¡éªŒ æ‹’ç»æ— æ•ˆæˆ–è¿‡æœŸ Session å¼‚å¸¸è¡Œä¸ºæ£€æµ‹ ç»‘å®š IP/User-Agentï¼Œé˜²æ­¢ä¼šè¯åŠ«æŒå’ŒCSRF "},{"id":42,"href":"/docs/study/base/algorithm/","title":"ç®—æ³•","section":"åŸºç¡€","content":"\râœ… 20 ä¸ªæœ€å¸¸è§ç®—æ³•é¢˜å‹ + è§£é¢˜æ€è·¯ \u0026amp; æ¨¡æ¿ï¼ˆJavaç‰ˆï¼‰\r#\ré€‚åˆåŠ›æ‰£ 0-200 é¢˜é‡ç‚¹è®­ç»ƒï¼Œä¹Ÿé€‚ç”¨äºé¢è¯•å¿«é€Ÿå‡†å¤‡\nğŸ§© 1. ä¸¤æ•°ä¹‹å’Œï¼ˆå“ˆå¸Œè¡¨ï¼‰\r#\ré¢˜å‹ï¼šæ•°ç»„ + æŸ¥æ‰¾\n// LC 1. Two Sum public int[] twoSum(int[] nums, int target) { Map\u0026lt;Integer, Integer\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; nums.length; i++) { int complement = target - nums[i]; if (map.containsKey(complement)) return new int[]{map.get(complement), i}; map.put(nums[i], i); } return new int[0]; } ğŸ§© 2. ä¸‰æ•°ä¹‹å’Œï¼ˆæ’åº + åŒæŒ‡é’ˆï¼‰\r#\râœ… è§£é¢˜æ€è·¯ï¼ˆæœ€ä½³è§£ï¼‰\r#\r1. å…ˆæ’åºï¼ˆæ’åº + åŒæŒ‡é’ˆçš„å‰æï¼‰\r#\ræ’åºæ˜¯ä¸ºäº†ï¼š\næ–¹ä¾¿è·³è¿‡é‡å¤å…ƒç´  ä½¿å¾—åŒæŒ‡é’ˆèƒ½æ­£ç¡®ç§»åŠ¨ï¼ˆä»ä¸¤ç«¯æ”¶ç¼©ï¼‰ Arrays.sort(nums); 2. å›ºå®šä¸€ä¸ªå…ƒç´ ï¼Œç”¨åŒæŒ‡é’ˆæ‰«å¦å¤–ä¸¤ä¸ª\r#\ræ ¸å¿ƒæ€æƒ³ï¼š\nå¤–å±‚å›ºå®šä¸€ä¸ªæ•° a = nums[i] å†…å±‚ç”¨ä¸¤ä¸ªæŒ‡é’ˆ left å’Œ right æ‰¾å‡º b + c = -a 3. å»é‡é€»è¾‘ï¼ˆå…³é”®ï¼ï¼‰\r#\rå¦‚æœå½“å‰ nums[i] == nums[i - 1]ï¼Œè·³è¿‡ å¦‚æœ nums[left] == nums[left - 1]ï¼Œè·³è¿‡ï¼ˆé¿å…é‡å¤ç»„åˆï¼‰ âœ… ä»£ç æ¨¡æ¿ï¼ˆJavaï¼‰ï¼š\r#\rpublic List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; threeSum(int[] nums) { List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); Arrays.sort(nums); for (int i = 0; i \u0026lt; nums.length - 2; i++) { if (i \u0026gt; 0 \u0026amp;\u0026amp; nums[i] == nums[i - 1]) continue; // è·³è¿‡é‡å¤ int left = i + 1; int right = nums.length - 1; while (left \u0026lt; right) { int sum = nums[i] + nums[left] + nums[right]; if (sum == 0) { res.add(Arrays.asList(nums[i], nums[left], nums[right])); // å»é‡ while (left \u0026lt; right \u0026amp;\u0026amp; nums[left] == nums[left + 1]) left++; while (left \u0026lt; right \u0026amp;\u0026amp; nums[right] == nums[right - 1]) right--; left++; right--; } else if (sum \u0026lt; 0) { left++; // éœ€è¦æ›´å¤§çš„æ•° } else { right--; // éœ€è¦æ›´å°çš„æ•° } } } return res; } ğŸ§  è¿™é¢˜ç”¨åˆ°çš„â€œå¥—è·¯â€ç»„åˆæ˜¯ï¼š\r#\ræ€è·¯ åŸå› æˆ–ä½œç”¨ æ’åº ä¸ºäº†å»é‡ \u0026amp; åŒæŒ‡é’ˆç­–ç•¥æˆç«‹ å›ºå®š + åŒæŒ‡é’ˆ æšä¸¾ aï¼Œæ‰¾ b+c å»é‡é€»è¾‘ é¿å…é‡å¤ç»“æœé¡¹ æ—¶é—´å¤æ‚åº¦ O(n^2)ï¼Œæ¯”æš´åŠ› O(n^3) ä¼˜ âœ… æ€»ç»“å¥—è·¯å¼è§£é¢˜çš„é‡ç‚¹ï¼š\r#\ré¢˜å‹è¯†åˆ« å¸¸ç”¨æŠ€å·§ æ¨¡æ¿ 3æ•°æ±‚å’Œ æ’åº + åŒæŒ‡é’ˆ + å»é‡ Leetcode 15 ä¸¤æ•°ä¹‹å’Œ å“ˆå¸Œè¡¨ Leetcode 1 4æ•°æ±‚å’Œ åŒå±‚å¾ªç¯ + åŒæŒ‡é’ˆ Leetcode 18 æœ‰åºæ•°ç»„æ‰¾å¯¹ åŒæŒ‡é’ˆ ç»å…¸æŒ‡é’ˆç§»åŠ¨æ¨¡å¼ ğŸ§© 3. å››æ•°ä¹‹å’Œï¼ˆå¥—ç”¨ä¸‰æ•°ä¹‹å’Œæ€è·¯ï¼‰\r#\r// LC 18. Four Sum public List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; fourSum(int[] nums, int target) { List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); Arrays.sort(nums); int n = nums.length; for (int i = 0; i \u0026lt; n - 3; i++) { if (i \u0026gt; 0 \u0026amp;\u0026amp; nums[i] == nums[i - 1]) continue; for (int j = i + 1; j \u0026lt; n - 2; j++) { if (j \u0026gt; i + 1 \u0026amp;\u0026amp; nums[j] == nums[j - 1]) continue; int left = j + 1, right = n - 1; while (left \u0026lt; right) { long sum = (long) nums[i] + nums[j] + nums[left] + nums[right]; if (sum == target) { res.add(Arrays.asList(nums[i], nums[j], nums[left], nums[right])); while (left \u0026lt; right \u0026amp;\u0026amp; nums[left] == nums[left + 1]) left++; while (left \u0026lt; right \u0026amp;\u0026amp; nums[right] == nums[right - 1]) right--; left++; right--; } else if (sum \u0026lt; target) left++; else right--; } } } return res; } ğŸ§© 4. åˆå¹¶åŒºé—´ï¼ˆæ’åº + æ‰«æï¼‰\r#\r// LC 56. Merge Intervals public int[][] merge(int[][] intervals) { Arrays.sort(intervals, (a, b) -\u0026gt; a[0] - b[0]); List\u0026lt;int[]\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); for (int[] interval : intervals) { if (res.isEmpty() || res.get(res.size() - 1)[1] \u0026lt; interval[0]) res.add(interval); else res.get(res.size() - 1)[1] = Math.max(res.get(res.size() - 1)[1], interval[1]); } return res.toArray(new int[res.size()][]); } ğŸ§© 5. ç§»åŠ¨é›¶ï¼ˆåŒæŒ‡é’ˆï¼‰\r#\r// LC 283. Move Zeroes public void moveZeroes(int[] nums) { int index = 0; for (int num : nums) if (num != 0) nums[index++] = num; while (index \u0026lt; nums.length) nums[index++] = 0; } ğŸ§© 6. æ»‘åŠ¨çª—å£æœ€å¤§å€¼\r#\r// LC 239. Sliding Window Maximum public int[] maxSlidingWindow(int[] nums, int k) { Deque\u0026lt;Integer\u0026gt; deque = new LinkedList\u0026lt;\u0026gt;(); int[] res = new int[nums.length - k + 1]; for (int i = 0; i \u0026lt; nums.length; i++) { while (!deque.isEmpty() \u0026amp;\u0026amp; deque.peekFirst() \u0026lt; i - k + 1) deque.pollFirst(); while (!deque.isEmpty() \u0026amp;\u0026amp; nums[deque.peekLast()] \u0026lt; nums[i]) deque.pollLast(); deque.offerLast(i); if (i \u0026gt;= k - 1) res[i - k + 1] = nums[deque.peekFirst()]; } return res; } ğŸ§© 7. æœ€é•¿æ— é‡å¤å­ä¸²ï¼ˆæ»‘åŠ¨çª—å£ + å“ˆå¸Œï¼‰\r#\r// LC 3. Longest Substring Without Repeating Characters public int lengthOfLongestSubstring(String s) { Set\u0026lt;Character\u0026gt; set = new HashSet\u0026lt;\u0026gt;(); int left = 0, maxLen = 0; for (int right = 0; right \u0026lt; s.length(); right++) { while (set.contains(s.charAt(right))) set.remove(s.charAt(left++)); set.add(s.charAt(right)); maxLen = Math.max(maxLen, right - left + 1); } return maxLen; } ğŸ§© 8. äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿\r#\rpublic int binarySearch(int[] nums, int target) { int left = 0, right = nums.length - 1; while (left \u0026lt;= right) { int mid = left + (right - left) / 2; if (nums[mid] == target) return mid; else if (nums[mid] \u0026lt; target) left = mid + 1; else right = mid - 1; } return -1; } ğŸ§© 9. åè½¬é“¾è¡¨ï¼ˆè¿­ä»£ï¼‰\r#\rpublic ListNode reverseList(ListNode head) { ListNode prev = null; while (head != null) { ListNode next = head.next; head.next = prev; prev = head; head = next; } return prev; } ğŸ§© 10. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\r#\rpublic ListNode mergeTwoLists(ListNode l1, ListNode l2) { ListNode dummy = new ListNode(-1), cur = dummy; while (l1 != null \u0026amp;\u0026amp; l2 != null) { if (l1.val \u0026lt; l2.val) { cur.next = l1; l1 = l1.next; } else { cur.next = l2; l2 = l2.next; } cur = cur.next; } cur.next = (l1 != null) ? l1 : l2; return dummy.next; } ğŸ§© 11. LRU ç¼“å­˜ï¼ˆLinkedHashMap æˆ– æ‰‹å†™åŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨ï¼‰\r#\r// LC 146. LRU Cache class LRUCache extends LinkedHashMap\u0026lt;Integer, Integer\u0026gt; { private int capacity; public LRUCache(int capacity) { super(capacity, 0.75f, true); // accessOrder=true this.capacity = capacity; } public int get(int key) { return super.getOrDefault(key, -1); } public void put(int key, int value) { super.put(key, value); } protected boolean removeEldestEntry(Map.Entry\u0026lt;Integer, Integer\u0026gt; eldest) { return size() \u0026gt; capacity; } } ğŸ§© 12. æœ€é•¿å›æ–‡å­ä¸²ï¼ˆä¸­å¿ƒæ‰©å±•æ³•ï¼‰\r#\r// LC 5. Longest Palindromic Substring public String longestPalindrome(String s) { int start = 0, maxLen = 0; for (int i = 0; i \u0026lt; s.length(); i++) { int len1 = expand(s, i, i); int len2 = expand(s, i, i + 1); int len = Math.max(len1, len2); if (len \u0026gt; maxLen) { start = i - (len - 1) / 2; maxLen = len; } } return s.substring(start, start + maxLen); } private int expand(String s, int l, int r) { while (l \u0026gt;= 0 \u0026amp;\u0026amp; r \u0026lt; s.length() \u0026amp;\u0026amp; s.charAt(l) == s.charAt(r)) { l--; r++; } return r - l - 1; } ğŸ§© 13. çˆ¬æ¥¼æ¢¯ï¼ˆæ–æ³¢é‚£å¥‘ï¼‰\r#\r// LC 70. Climbing Stairs public int climbStairs(int n) { if (n \u0026lt;= 2) return n; int a = 1, b = 2; for (int i = 3; i \u0026lt;= n; i++) { int tmp = a + b; a = b; b = tmp; } return b; } ğŸ§© 14. æœ€å°è·¯å¾„å’Œï¼ˆåŠ¨æ€è§„åˆ’ï¼‰\r#\r// LC 64. Minimum Path Sum public int minPathSum(int[][] grid) { int m = grid.length, n = grid[0].length; for (int i = 1; i \u0026lt; m; i++) grid[i][0] += grid[i - 1][0]; for (int j = 1; j \u0026lt; n; j++) grid[0][j] += grid[0][j - 1]; for (int i = 1; i \u0026lt; m; i++) for (int j = 1; j \u0026lt; n; j++) grid[i][j] += Math.min(grid[i - 1][j], grid[i][j - 1]); return grid[m - 1][n - 1]; } ğŸ§© 15. å•è¯æ‹†åˆ†ï¼ˆåŠ¨æ€è§„åˆ’ + HashSetï¼‰\r#\r// LC 139. Word Break public boolean wordBreak(String s, List\u0026lt;String\u0026gt; wordDict) { Set\u0026lt;String\u0026gt; wordSet = new HashSet\u0026lt;\u0026gt;(wordDict); boolean[] dp = new boolean[s.length() + 1]; dp[0] = true; for (int i = 1; i \u0026lt;= s.length(); i++) { for (int j = 0; j \u0026lt; i; j++) { if (dp[j] \u0026amp;\u0026amp; wordSet.contains(s.substring(j, i))) { dp[i] = true; break; } } } return dp[s.length()]; } ğŸ§© 16. å²›å±¿æ•°é‡ï¼ˆDFS or BFSï¼‰\r#\r// LC 200. Number of Islands public int numIslands(char[][] grid) { int count = 0; for (int i = 0; i \u0026lt; grid.length; i++) for (int j = 0; j \u0026lt; grid[0].length; j++) if (grid[i][j] == \u0026#39;1\u0026#39;) { dfs(grid, i, j); count++; } return count; } private void dfs(char[][] g, int i, int j) { if (i \u0026lt; 0 || j \u0026lt; 0 || i \u0026gt;= g.length || j \u0026gt;= g[0].length || g[i][j] == \u0026#39;0\u0026#39;) return; g[i][j] = \u0026#39;0\u0026#39;; dfs(g, i - 1, j); dfs(g, i + 1, j); dfs(g, i, j - 1); dfs(g, i, j + 1); } ğŸ§© 17. æ‹¬å·åŒ¹é…ï¼ˆæ ˆï¼‰\r#\r// LC 20. Valid Parentheses public boolean isValid(String s) { Stack\u0026lt;Character\u0026gt; stack = new Stack\u0026lt;\u0026gt;(); for (char c : s.toCharArray()) { if (c == \u0026#39;(\u0026#39;) stack.push(\u0026#39;)\u0026#39;); else if (c == \u0026#39;[\u0026#39;) stack.push(\u0026#39;]\u0026#39;); else if (c == \u0026#39;{\u0026#39;) stack.push(\u0026#39;}\u0026#39;); else if (stack.isEmpty() || stack.pop() != c) return false; } return stack.isEmpty(); } ğŸ§© 18. K ä¸ªä¸€ç»„åè½¬é“¾è¡¨ï¼ˆé€’å½’ï¼‰\r#\r// LC 25. Reverse Nodes in k-Group public ListNode reverseKGroup(ListNode head, int k) { ListNode node = head; for (int i = 0; i \u0026lt; k; i++) { if (node == null) return head; node = node.next; } ListNode newHead = reverse(head, node); head.next = reverseKGroup(node, k); return newHead; } private ListNode reverse(ListNode a, ListNode b) { ListNode prev = null, curr = a; while (curr != b) { ListNode next = curr.next; curr.next = prev; prev = curr; curr = next; } return prev; } ğŸ§© 19. äºŒå‰æ ‘å±‚åºéå†ï¼ˆBFSï¼‰\r#\r// LC 102. Binary Tree Level Order Traversal public List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; levelOrder(TreeNode root) { List\u0026lt;List\u0026lt;Integer\u0026gt;\u0026gt; res = new ArrayList\u0026lt;\u0026gt;(); if (root == null) return res; Queue\u0026lt;TreeNode\u0026gt; q = new LinkedList\u0026lt;\u0026gt;(); q.offer(root); while (!q.isEmpty()) { int size = q.size(); List\u0026lt;Integer\u0026gt; level = new ArrayList\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; size; i++) { TreeNode node = q.poll(); level.add(node.val); if (node.left != null) q.offer(node.left); if (node.right != null) q.offer(node.right); } res.add(level); } return res; } ğŸ§© 20. åˆ¤æ–­å›æ–‡é“¾è¡¨ï¼ˆå¿«æ…¢æŒ‡é’ˆ + é“¾è¡¨åè½¬ï¼‰\r#\r// LC 234. Palindrome Linked List public boolean isPalindrome(ListNode head) { ListNode slow = head, fast = head; while (fast != null \u0026amp;\u0026amp; fast.next != null) { slow = slow.next; fast = fast.next.next; } ListNode second = reverse(slow); ListNode first = head; while (second != null) { if (first.val != second.val) return false; first = first.next; second = second.next; } return true; } private ListNode reverse(ListNode head) { ListNode prev = null; while (head != null) { ListNode next = head.next; head.next = prev; prev = head; head = next; } return prev; } âœ… ä½ å¯ä»¥æ€ä¹ˆç”¨è¿™ä»½èµ„æ–™ï¼Ÿ\r#\råˆ·é¢˜æ—¶å¯¹ç…§æŸ¥é˜…ï¼ˆèƒ½å¥—æ¨¡æ¿å°±å¥—ï¼‰ å»ºç«‹â€œé¢˜å‹ - æ€è·¯ - æ¨¡æ¿â€ä¸‰ä½ä¸€ä½“ä½“ç³» åå¤è®²ç»™è‡ªå·±å¬ï¼ˆè¶Šèƒ½è§£é‡Šï¼Œè¶Šä¼šå†™ï¼‰ å¯ç”¨äºé¢è¯•å‰å¤ä¹ é€Ÿè§ˆ "},{"id":43,"href":"/docs/study/network/rtt/","title":"å¾€è¿”æ—¶é—´ï¼ˆRound Trip Timeï¼‰","section":"ç½‘ç»œ","content":"\rğŸ” ä»€ä¹ˆæ˜¯ RTTï¼Ÿ\r#\rRTTï¼ˆRound Trip Timeï¼‰ï¼šä¸€ä¸ªå®Œæ•´çš„â€œè¯·æ±‚-å“åº”â€å¾€è¿”æ—¶é—´ã€‚ å½“æˆ‘ä»¬è¯´ 2-RTTï¼Œæ„æ€æ˜¯è¿æ¥å»ºç«‹éœ€è¦ 2 æ¬¡å®Œæ•´çš„å¾€è¿”æ¶ˆæ¯äº¤äº’ã€‚ âœ… ä¸€ã€2-RTT è¿æ¥å»ºç«‹æµç¨‹ï¼ˆTCP + TLS 1.2ï¼‰\r#\rè¿™æ˜¯ä¼ ç»Ÿ HTTPS çš„æµç¨‹ï¼šTCP + TLS 1.2ã€‚\nâ±ï¸ æ‰€éœ€ RTTï¼š2 æ¬¡\r#\rğŸ”„ è¿‡ç¨‹ï¼š\r#\rğŸ§© ç¬¬ 1 RTTï¼šTCP ä¸‰æ¬¡æ¡æ‰‹ï¼ˆè¿æ¥å±‚ï¼‰\r#\rå®¢æˆ·ç«¯å‘é€ SYN â†’ è¯·æ±‚å»ºç«‹è¿æ¥ æœåŠ¡ç«¯å›å¤ SYN + ACK å®¢æˆ·ç«¯å›å¤ ACK â†’ TCP è¿æ¥å»ºç«‹ ğŸ§© ç¬¬ 2 RTTï¼šTLS 1.2 æ¡æ‰‹ï¼ˆå®‰å…¨å±‚ï¼‰\r#\rå®¢æˆ·ç«¯å‘é€ ClientHelloï¼ˆåŒ…å«åŠ å¯†å‚æ•°ï¼‰ æœåŠ¡ç«¯è¿”å› ServerHello + è¯ä¹¦ + å…¬é’¥ å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦ã€åå•†å¯†é’¥ï¼Œå‘é€åŠ å¯†çš„ PreMasterSecret æœåŠ¡ç«¯ç¡®è®¤å¯†é’¥ååŒæ–¹å¯å¼€å§‹åŠ å¯†é€šä¿¡ ğŸ‘‰ æ€»å…±ä¸¤æ¬¡ RTT æ‰èƒ½å¼€å§‹ä¼ è¾“åº”ç”¨å±‚æ•°æ®ï¼ˆå¦‚ HTTP è¯·æ±‚ï¼‰\nğŸ“‰ ç¼ºç‚¹ï¼š\r#\ré¦–æ¬¡è®¿é—®æ…¢ï¼ˆä¸¤æ¬¡å¾€è¿”åæ‰å¼€å§‹ä¸šåŠ¡è¯·æ±‚ï¼‰ ç§»åŠ¨ç½‘ç»œç­‰é«˜å»¶è¿Ÿç¯å¢ƒä½“éªŒå·® âœ… äºŒã€1-RTT è¿æ¥å»ºç«‹æµç¨‹ï¼ˆTCP + TLS 1.3ï¼‰\r#\rTLS 1.3 ç®€åŒ–äº†æ¡æ‰‹è¿‡ç¨‹ï¼Œå°†å…³é”®åŠ å¯†å‚æ•°åå•†åˆå¹¶ã€‚\nâ±ï¸ æ‰€éœ€ RTTï¼š1 æ¬¡\r#\rğŸ”„ è¿‡ç¨‹ï¼š\r#\rğŸ§© ç¬¬ 1 RTTï¼šTCP ä¸‰æ¬¡æ¡æ‰‹ + TLS åˆå¹¶\r#\rå®¢æˆ·ç«¯å‘é€ TCP SYN æœåŠ¡ç«¯å›å¤ SYN+ACK å®¢æˆ·ç«¯å‘é€ ACK â†³ åŒæ—¶å‘é€ ClientHelloï¼ˆTLS 1.3 ä¸­å¯å¸¦æ—©æœŸåŠ å¯†å‚æ•°ï¼‰ âœ… æœåŠ¡ç«¯æ”¶åˆ°åï¼Œç›´æ¥è¿”å› ServerHello + Finished\r#\råŒæ–¹ç›´æ¥è¿›å…¥åŠ å¯†é˜¶æ®µï¼Œå®¢æˆ·ç«¯å¯ä»¥ç«‹å³å‘èµ·è¯·æ±‚ï¼ˆå¦‚ HTTPï¼‰ ğŸ‘‰ æ•´ä¸ªè¿‡ç¨‹åªéœ€è¦ 1 ä¸ª RTT å°±èƒ½å¼€å§‹ä¼ è¾“ä¸šåŠ¡æ•°æ®\nğŸ“ˆ ä¼˜ç‚¹ï¼š\r#\ræ›´å¿«è¿æ¥å»ºç«‹ æ›´å¼ºåŠ å¯†æœºåˆ¶ï¼ˆå‰”é™¤ RSAã€éå¯¹ç§°è¯ä¹¦æ¼æ´ï¼‰ âœ… ä¸‰ã€0-RTT è¿æ¥å»ºç«‹æµç¨‹ï¼ˆQUIC + TLS 1.3ï¼‰\r#\r0-RTT æ˜¯åœ¨å¤ç”¨å†å²è¿æ¥çš„åŸºç¡€ä¸Šå®ç°çš„ï¼Œæ˜¯ TLS 1.3 + ä¼šè¯æ¢å¤çš„ä¸€ç§åŠ é€Ÿæ‰‹æ®µã€‚\nâ±ï¸ æ‰€éœ€ RTTï¼š0 æ¬¡ï¼ˆé’ˆå¯¹â€œå·²è¿æ¥è¿‡â€çš„æœåŠ¡å™¨ï¼‰\r#\rğŸ”„ è¿‡ç¨‹ï¼š\r#\rğŸ§© ç¬¬ä¸€æ¬¡è¿æ¥ï¼ˆè¿˜æ˜¯éœ€è¦ 1-RTTï¼‰\r#\ræ­£å¸¸å»ºç«‹è¿æ¥ï¼ˆå¦‚ TLS 1.3ï¼‰ å®¢æˆ·ç«¯ä¿å­˜â€œä¼šè¯ç¥¨æ®â€ï¼ˆsession ticketï¼‰æˆ– 0-RTT å¯†é’¥ ğŸ§© ç¬¬äºŒæ¬¡è¿æ¥ï¼ˆ0-RTTï¼‰\r#\rå®¢æˆ·ç«¯ç›´æ¥å‘é€åŠ å¯†æ•°æ® + ClientHello + 0-RTT å¯†é’¥ï¼ˆæ— éœ€ç­‰å¾…å›åº”ï¼‰ æœåŠ¡ç«¯éªŒè¯å¯†é’¥ï¼Œè‹¥é€šè¿‡ â†’ æ¥å—è¯·æ±‚ å¦åˆ™ â†’ æ‹’ç» 0-RTT æ•°æ®ï¼Œè¦æ±‚é‡æ–°æ¡æ‰‹ ğŸ“‰ ç¼ºç‚¹ï¼š\r#\râš ï¸ æœ‰é‡æ”¾æ”»å‡»é£é™©\nåŒä¸€ä¸ª 0-RTT æ•°æ®åŒ…å¯èƒ½è¢«æ”»å‡»è€…é‡æ”¾å¤šæ¬¡ å› æ­¤ åªé€‚åˆå¹‚ç­‰è¯·æ±‚ï¼ˆå¦‚ GETï¼‰ï¼Œä¸èƒ½ç”¨äºç™»å½•/æ”¯ä»˜ç±» POST\nâœ… ä¼˜ç‚¹ï¼š\r#\ræè‡´é€Ÿåº¦ï¼ˆCDNã€ç§»åŠ¨ç«¯å¸¸è§ï¼‰ HTTP/3ï¼ˆåŸºäº QUICï¼‰åŸç”Ÿæ”¯æŒ 0-RTT ğŸ§  æ€»ç»“å¯¹æ¯”è¡¨ï¼š\r#\rç±»å‹ å¾€è¿”æ¬¡æ•° åè®®ç¤ºä¾‹ æ˜¯å¦æ”¯æŒæ—©æœŸæ•°æ® ä¼˜ç‚¹ ç¼ºç‚¹ 2-RTT 2 æ¬¡ TCP + TLS 1.2 âŒ ä¼ ç»Ÿ HTTPSï¼Œå…¼å®¹å¹¿ æ…¢ã€è¿æ¥å»ºç«‹è€—æ—¶ 1-RTT 1 æ¬¡ TCP + TLS 1.3 âœ… å®‰å…¨+å¿«ï¼Œå¹¿æ³›æ”¯æŒ é¦–æ¬¡è¿æ¥ä»éœ€ 1 æ¬¡å¾€è¿” 0-RTT 0 æ¬¡ QUIC + TLS 1.3 (HTTP/3) âœ… æé€Ÿè¿æ¥ï¼Œç§»åŠ¨ç«¯/ç¼“å­˜åœºæ™¯ä¼˜ç§€ æœ‰é‡æ”¾é£é™©ï¼Œéå¹‚ç­‰æ¥å£ä¸å®‰å…¨ ğŸ¯ å®é™…ä½¿ç”¨å»ºè®®ï¼š\r#\råœºæ™¯ æ¨èç±»å‹ åŸå›  é¦–æ¬¡è®¿é—® Web ç«™ç‚¹ 1-RTT (TLS 1.3) å®‰å…¨ã€å¿«é€Ÿã€æµè§ˆå™¨å…¼å®¹æ€§å¥½ CDN é™æ€èµ„æº/é«˜é¢‘è¯·æ±‚ 0-RTT (QUIC) å¿«é€Ÿå»ºç«‹è¿æ¥ï¼Œå‡å°‘å»¶è¿Ÿ å¾®æœåŠ¡å†…éƒ¨è°ƒç”¨ï¼ˆHTTP/2ï¼‰ 1-RTT æ€§èƒ½å¹³è¡¡ï¼Œé¿å…é‡æ”¾æ”»å‡» å®‰å…¨æ€§è¦æ±‚é«˜çš„æœåŠ¡ ç¦ç”¨ 0-RTT é˜²æ­¢æ•æ„Ÿæ¥å£é­é‡æ”¾æ”»å‡» "},{"id":44,"href":"/docs/study/middleware/kafka/microservices-comm/","title":"å¾®æœåŠ¡é€šä¿¡","section":"Kafka","content":"Kafka æœ¬èº«åœ¨â€œKafka ä¸»é¢˜å†…éƒ¨â€çš„ç”Ÿäº§è€…åˆ°æ¶ˆè´¹è€…ç¯èŠ‚ï¼Œå¯ä»¥é€šè¿‡å¹‚ç­‰ç”Ÿäº§è€… + äº‹åŠ¡æœºåˆ¶å®ç°â€œæ°å¥½ä¸€æ¬¡â€ï¼ˆExactly-Onceï¼‰çš„æ¶ˆæ¯å†™å…¥å’Œæ¶ˆè´¹-offset æäº¤ã€‚ä½†åœ¨å¾®æœåŠ¡é€šä¿¡çš„æ›´å¹¿æ³›åœºæ™¯ä¸­ï¼Œå¾€å¾€æ¶‰åŠå°†æ¶ˆæ¯æ¶ˆè´¹åçš„ç»“æœå†™å…¥å¤–éƒ¨ç³»ç»Ÿï¼ˆå¦‚æ•°æ®åº“ï¼‰æˆ–è°ƒç”¨å…¶ä»–æœåŠ¡ï¼Œè¿™æ—¶è¦è¾¾åˆ°ç«¯åˆ°ç«¯çš„â€œæ°å¥½ä¸€æ¬¡â€åˆ™æ›´å¤æ‚ï¼Œéœ€è¦é…åˆé¢å¤–è®¾è®¡ä¸æ¨¡å¼ã€‚\nKafka å†…éƒ¨çš„ Exactly-Once ä¿è¯\r#\rä½¿ç”¨å¹‚ç­‰ç”Ÿäº§è€…ï¼ˆProducer ID + åˆ†åŒºå†…åºåˆ—å· + æœåŠ¡ç«¯åˆ¤é‡ï¼‰å¯ä¿è¯å•ä¼šè¯ã€å•åˆ†åŒºå†™å…¥ä¸é‡å¤ã€‚ å¼•å…¥äº‹åŠ¡ï¼ˆTransactional ID + Transaction Coordinator + WriteTxnMarker + read_committed æ¶ˆè´¹æ¨¡å¼ + sendOffsetsToTransactionï¼‰ï¼Œå¯å°†â€œæ¶ˆè´¹æ¶ˆæ¯â†’å¤„ç†â†’ç”Ÿäº§æ–°æ¶ˆæ¯â€ä¸â€œæäº¤æ¶ˆè´¹ offsetâ€æ”¾åœ¨åŒä¸€äº‹åŠ¡å†…ï¼Œç¡®ä¿è¦ä¹ˆéƒ½ç”Ÿæ•ˆè¦ä¹ˆéƒ½ä¸ç”Ÿæ•ˆï¼Œä»è€Œåœ¨åŒä¸€ä¸ª Kafka æµç¨‹é“¾ä¸Šå®ç°æ°å¥½ä¸€æ¬¡å¤„ç†ã€‚ å¾®æœåŠ¡é€šä¿¡çš„æŒ‘æˆ˜\r#\rå¤–éƒ¨ç³»ç»Ÿäº‹åŠ¡ä¸å¯è·¨ Kafka äº‹åŠ¡è‡ªåŠ¨åè°ƒï¼šKafka äº‹åŠ¡åªèƒ½ä¿è¯ Kafka å†…éƒ¨çš„å†™å…¥ä¸ offset æäº¤åŸå­æ€§ï¼Œæ— æ³•ç›´æ¥ä¸å¤–éƒ¨æ•°æ®åº“æˆ–å…¶å®ƒæ¶ˆæ¯é˜Ÿåˆ—çš„äº‹åŠ¡åšåˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ã€‚ æœåŠ¡é—´è°ƒç”¨æˆ–æ•°æ®åº“å†™å…¥çš„å¹‚ç­‰æ€§ï¼šè‹¥æœåŠ¡å¤„ç†æ¶ˆæ¯åè¦å†™æ•°æ®åº“æˆ–è°ƒç”¨ä¸‹æ¸¸æœåŠ¡ï¼Œéœ€è¦ä¿è¯è¯¥æ­¥éª¤å¹‚ç­‰æˆ–è€…å¯å›æ»šï¼Œå¦åˆ™å³ä½¿ Kafka ç«¯ä¸é‡å¤ï¼Œå¤–éƒ¨æ“ä½œä»å¯èƒ½å› é‡è¯•å¯¼è‡´é‡å¤æˆ–æ¼å¤„ç†ã€‚ ç½‘ç»œæˆ–è¿›ç¨‹æ•…éšœæ—¶çš„ä¸€è‡´æ€§è¾¹ç•Œï¼šå¤„ç†è¿‡ç¨‹ä¸­è‹¥æ’­å‡ºæ¶ˆæ¯å·²æäº¤ä½†å¤–éƒ¨å†™å…¥å¤±è´¥ï¼Œæˆ–ç›¸åï¼Œéƒ½å¯èƒ½å¯¼è‡´ä¸ä¸€è‡´ã€‚ å¸¸è§è§£å†³æ¨¡å¼\r#\r1. Outbox æ¨¡å¼\r#\r* åœ¨ä¸šåŠ¡æ•°æ®åº“çš„åŒä¸€ä¸ªäº‹åŠ¡å†…ï¼ŒåŒæ—¶å†™å…¥ä¸»ä¸šåŠ¡è¡¨å’Œâ€œoutbox è¡¨â€è®°å½•å¾…å‘é€çš„æ¶ˆæ¯ã€‚äº‹åŠ¡æäº¤åï¼Œç”±ä¸“é—¨çš„è¿›ç¨‹æˆ– Debezium ç­‰ CDC å·¥å…·è¯»å– outbox è¡¨å¹¶å‘ Kafka å‘é€æ¶ˆæ¯ã€‚è¿™æ ·å¯ä¿è¯â€œä¸šåŠ¡å†™å…¥ä¸æ¶ˆæ¯æŠ•é€’â€åœ¨åŒä¸€æ•°æ®åº“äº‹åŠ¡éš”ç¦»ä¸­ï¼Œæ— æ¼å‘ï¼›å‘é€åˆ° Kafka æ—¶å†é€šè¿‡å¹‚ç­‰æˆ–äº‹åŠ¡æ§åˆ¶é¿å…é‡å¤æŠ•é€’ã€‚\r2. Idempotent æ¶ˆè´¹ä¸å¤„ç†\r#\r* ä¸‹æ¸¸æœåŠ¡åœ¨æ¶ˆè´¹ Kafka æ¶ˆæ¯å†™å…¥æ•°æ®åº“æ—¶ï¼Œè®¾è®¡å¹‚ç­‰å†™å…¥ï¼ˆå¦‚åŸºäºä¸šåŠ¡ä¸»é”®åš UPSERTï¼Œæˆ–è®°å½•å·²å¤„ç†æ¶ˆæ¯ ID ä»¥å»é‡ï¼‰ã€‚å³ä¾¿é‡è¯•æ¶ˆè´¹ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´å¤šæ¬¡å‰¯ä½œç”¨ã€‚\r3. äº‹åŠ¡åè°ƒä¸è¡¥å¿ï¼ˆSagaï¼‰\r#\r* å¯¹äºè·¨å¤šä¸ªæœåŠ¡æˆ–ç³»ç»Ÿçš„ä¸šåŠ¡ï¼Œå°†å¤§äº‹åŠ¡æ‹†åˆ†ä¸ºå¤šä¸ªæœ¬åœ°äº‹åŠ¡ï¼Œå¹¶è®¾è®¡è¡¥å¿é€»è¾‘ï¼šå¤±è´¥æ—¶å›æ»šå·²ç”Ÿæ•ˆçš„æ­¥éª¤ã€‚é…åˆå¯é æ¶ˆæ¯ï¼ˆKafka ç”Ÿäº§ï¼‰ä¸å¹‚ç­‰å¤„ç†ï¼Œå¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯æœ€çµ‚ä¸€è‡´æ€§ã€‚\r4. åŒå†™+æ ¡éªŒ\r#\r* æ¶ˆè´¹æ¶ˆæ¯ååŒæ—¶å¾€ Kafka å’Œæ•°æ®åº“å†™å…¥ï¼Œä½†éœ€å¤–éƒ¨æ ¡éªŒæˆ–å¼‚æ­¥è¡¥å¿æ¥å¤„ç†å¯èƒ½çš„å†™å…¥ä¸ä¸€è‡´ï¼Œé€šå¸¸ç»“åˆé‡è¯•ç­–ç•¥ä¸å¹‚ç­‰è®¾è®¡ã€‚\r5. Exactly-Once Semantics (EOS) for Kafka Streams\r#\r* å¦‚æœå¾®æœåŠ¡æœ¬èº«ä½¿ç”¨ Kafka Streamsï¼Œå¹¶ä¸”æµå¤„ç†ç»“æœä¹Ÿå†™å› Kafkaï¼Œå†ç”±å¦ä¸€ä¸ªæœåŠ¡æ¶ˆè´¹å¹¶å†™æ•°æ®åº“ï¼Œå¯åœ¨ Kafka Streams ä¾§åˆ©ç”¨äº‹åŠ¡ä¿è¯æµå†…éƒ¨æ°å¥½ä¸€æ¬¡ã€‚ä½†å†™åˆ°å¤–éƒ¨ DB æ—¶ï¼Œä»éœ€å€ŸåŠ© Outbox æˆ–å¹‚ç­‰å†™å…¥ç­‰æ–¹å¼ã€‚\rå®è·µå»ºè®®\r#\rå°½é‡æŠŠæ ¸å¿ƒä¸šåŠ¡çŠ¶æ€å†™å…¥åŒä¸€æ•°æ®åº“äº‹åŠ¡æ—¶è§¦å‘ outbox æ¶ˆæ¯ï¼Œå†ç”± Kafka è´Ÿè´£åç»­åˆ†å‘ã€‚ æ¶ˆè´¹ç«¯å†™æ•°æ®åº“æ—¶ä½¿ç”¨å¹‚ç­‰æˆ–å­˜åœ¨æ£€æŸ¥ï¼›é¿å…ä¾èµ–å•çº¯ Kafka äº‹åŠ¡å°±è®¤ä¸ºå¤–éƒ¨å†™å…¥ä¹Ÿâ€œæ°å¥½ä¸€æ¬¡â€ã€‚ åœ¨å¯èƒ½çš„åœºæ™¯ä¸‹ï¼Œå°†æ›´å¤šé€»è¾‘ç•™åœ¨ Kafka Streams æˆ– ksqlDB ç­‰æ¡†æ¶å†…ï¼Œå‡å°‘å¤–éƒ¨ç³»ç»Ÿäº¤äº’ï¼Œåˆ©ç”¨å…¶å†…å»ºäº‹åŠ¡èƒ½åŠ›ã€‚ æ˜ç¡® SLAï¼šå¾ˆå¤šç³»ç»Ÿæ¥å—â€œè‡³å°‘ä¸€æ¬¡â€åŠ å¹‚ç­‰å¤„ç†å³å¯ï¼›è‹¥å¿…é¡»ä¸¥æ ¼æ°å¥½ä¸€æ¬¡ï¼Œéœ€è¦ç»“åˆä¸Šè¿°æ¨¡å¼å¹¶æ¥å—å¤æ‚åº¦å’Œæ€§èƒ½æˆæœ¬ã€‚ å¯¹å»¶è¿Ÿã€ååä¸å¯ç”¨æ€§çš„æƒè¡¡ï¼šå‡ºäºé«˜å¯ç”¨ï¼Œå¾€å¾€é¿å…åˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ï¼Œè½¬è€Œç”¨è¡¥å¿æˆ–å¹‚ç­‰è®¾è®¡ã€‚ ç»“è®º\r#\rKafka å¯åœ¨è‡ªèº«èŒƒå›´å†…ï¼ˆâ€œè¯» Kafka â†’ å¤„ç† â†’ å†™ Kafka â†’ æäº¤ offsetâ€ï¼‰åšåˆ° Exactly-Onceï¼Œä½†åœ¨å¾®æœåŠ¡é€šä¿¡ä¸­è‹¥æ¶‰åŠå¤–éƒ¨æ•°æ®åº“æˆ–å…¶å®ƒæœåŠ¡ï¼Œéœ€è¦å€ŸåŠ© Outboxã€å¹‚ç­‰å†™å…¥ã€è¡¥å¿äº‹åŠ¡ï¼ˆSagaï¼‰ç­‰æ¨¡å¼æ¥æ¥è¿‘ç«¯åˆ°ç«¯æ°å¥½ä¸€æ¬¡ã€‚æ— éœ€å¼ºæ±‚è·¨å¤šç³»ç»Ÿçš„åˆ†å¸ƒå¼ä¸¤é˜¶æ®µæäº¤ï¼ˆå¤æ‚ä¸”æ˜“æˆç“¶é¢ˆï¼‰ï¼Œè€Œæ˜¯é€šè¿‡å¯é æ¶ˆæ¯ã€å¹‚ç­‰è®¾è®¡ä¸è¡¥å¿é€»è¾‘ï¼Œå®ç°åœ¨å¸¸è§å¾®æœåŠ¡åœºæ™¯ä¸‹çš„ä¸šåŠ¡æ­£ç¡®æ€§å’Œæœ€ç»ˆä¸€è‡´æ€§ã€‚\n"},{"id":45,"href":"/docs/study/security/replay-attack/","title":"é‡æ”¾æ”»å‡»","section":"å®‰å…¨","content":"é‡æ”¾æ”»å‡»ï¼ˆReplay Attackï¼‰æ˜¯ä¸€ç§ç½‘ç»œæ”»å‡»æ‰‹æ®µï¼Œæ”»å‡»è€…æ‹¦æˆªå¹¶ä¿å­˜åˆæ³•è¯·æ±‚çš„æ•°æ®åŒ…ï¼Œç„¶ååœ¨ç¨åâ€œé‡å‘â€è¿™äº›æ•°æ®åŒ…åˆ°æœåŠ¡å™¨ï¼Œè¯•å›¾æ¬ºéª—ç³»ç»Ÿé‡å¤æ‰§è¡ŒæŸäº›æ“ä½œï¼ˆå¦‚è½¬è´¦ã€ç™»å½•ç­‰ï¼‰ã€‚\nğŸ§¨ ä¸€å¥è¯ç†è§£ï¼š\r#\ræ”»å‡»è€…ä¸æ˜¯ä¼ªé€ è¯·æ±‚ï¼Œè€Œæ˜¯â€œå¤è¯»â€åˆ«äººå‘çš„åˆæ³•è¯·æ±‚æ¥éª—ç³»ç»Ÿé‡å¤æ“ä½œï¼\nğŸ“¦ ä¸¾ä¸ªä¾‹å­ï¼š\r#\rä½ åœ¨ç½‘é“¶å‘é€äº†å¦‚ä¸‹è½¬è´¦è¯·æ±‚ï¼ˆåŠ å¯†ä¼ è¾“ï¼‰ï¼š\nPOST /transfer\r{\r\u0026#34;to\u0026#34;: \u0026#34;Alice\u0026#34;,\r\u0026#34;amount\u0026#34;: 100\r} æ”»å‡»è€…é€šè¿‡æŸç§æ–¹å¼ï¼ˆå¦‚ç½‘ç»œç›‘å¬ï¼‰æ•è·äº†è¿™æ¡è¯·æ±‚ï¼Œç„¶ååœ¨ä½ ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹åŸæ ·é‡æ”¾è¿™æ¡è¯·æ±‚ã€‚\nç»“æœç³»ç»Ÿå†æ¬¡è½¬è´¦äº† 100 å…ƒåˆ° Aliceï¼Œä½ æŸå¤±äº† 200 å…ƒã€‚\nğŸ§  ä¸ºä»€ä¹ˆè¿™æ¡â€œæ—§çš„è¯·æ±‚â€è¿˜ä¼šè¢«æœåŠ¡å™¨æ¥å—ï¼Ÿ\r#\rå› ä¸ºå¾ˆå¤šç³»ç»Ÿï¼š\næ²¡æœ‰è¯†åˆ«è¯·æ±‚æ˜¯å¦é‡å¤ æ²¡å¯¹è¯·æ±‚åŠ æ—¶é—´æˆ³ / å”¯ä¸€æ ‡è¯† åŠ å¯†æ˜¯å¯¹å†…å®¹åŠ å¯†ï¼Œä¸ä»£è¡¨é˜²æ­¢é‡å‘ ğŸ” é‡æ”¾æ”»å‡»å¸¸è§äºå“ªäº›åè®®åœºæ™¯ï¼Ÿ\r#\råœºæ™¯ åŸå›  HTTPSï¼ˆ0-RTT æ¨¡å¼ï¼‰ æ—©æœŸæ•°æ®å¯èƒ½åœ¨æ¡æ‰‹å‰è¢«æ¥å— API æ¥å£ï¼ˆå¦‚æ”¯ä»˜æ¥å£ï¼‰ æ”»å‡»è€…é‡æ”¾æ—§æ¥å£å®ç°é‡å¤æ“ä½œ ç™»å½•è®¤è¯ï¼ˆtokenï¼‰ æ—§ token è¢«æˆªè·åä»å¯ç™»å½• æ™ºèƒ½è®¾å¤‡é€šä¿¡ è®¾å¤‡æ§åˆ¶æŒ‡ä»¤è¢«å¤ç”¨ï¼ˆå¼€é”ã€æ”¯ä»˜ç­‰ï¼‰ ğŸ›¡ï¸ å¦‚ä½•é˜²å¾¡é‡æ”¾æ”»å‡»ï¼Ÿ\r#\râœ… 1. ä½¿ç”¨å”¯ä¸€è¯·æ±‚ IDï¼ˆnonceï¼‰\r#\ræ¯ä¸ªè¯·æ±‚æºå¸¦å”¯ä¸€çš„éšæœºå­—ç¬¦ä¸² æœåŠ¡ç«¯æ ¡éªŒæ˜¯å¦å·²å¤„ç†è¿‡è¯¥ IDï¼ˆå¦‚ Redis å»é‡ï¼‰ âœ… 2. æ·»åŠ æ—¶é—´æˆ³å¹¶è®¾æœ‰æ•ˆæœŸ\r#\rè¯·æ±‚ä¸­æºå¸¦å½“å‰æ—¶é—´ æœåŠ¡å™¨éªŒè¯æ˜¯å¦åœ¨å…è®¸çš„æ—¶é—´çª—å£å†…ï¼ˆå¦‚ 2 åˆ†é’Ÿï¼‰ âœ… 3. ä½¿ç”¨ HMAC ç­¾åè¯·æ±‚å‚æ•°\r#\rå®¢æˆ·ç«¯å¯¹è¯·æ±‚å‚æ•° + æ—¶é—´æˆ³ç”Ÿæˆç­¾å æœåŠ¡ç«¯éªŒè¯ç­¾åæ˜¯å¦æ­£ç¡®ã€æ˜¯å¦è¢«ç¯¡æ”¹ âœ… 4. ä½¿ç”¨ TLS é˜²ä¸­é—´äººç›‘å¬ï¼ˆåŸºç¡€é˜²çº¿ï¼‰\r#\rå¦‚æœæ”»å‡»è€…æ— æ³•æˆªè·åŸå§‹æ•°æ®ï¼Œå°±ä¸èƒ½é‡æ”¾ âœ… 5. å¯¹ 0-RTT è¯·æ±‚åšå¹‚ç­‰æ€§æ ¡éªŒï¼ˆQUIC/TLS 1.3 ç‰¹åˆ«æ³¨æ„ï¼‰\r#\ræ‹’ç»éå¹‚ç­‰ç±»å‹ï¼ˆå¦‚ POST/PUTï¼‰ä½¿ç”¨ 0-RTT æœåŠ¡ç«¯ç¼“å­˜å¹¶éªŒè¯å†å² 0-RTT è¯·æ±‚ ğŸ’¡ è¡¥å……ï¼šå¹‚ç­‰è¯·æ±‚ vs éå¹‚ç­‰è¯·æ±‚\r#\rè¯·æ±‚ç±»å‹ æ˜¯å¦å¹‚ç­‰ è¯´æ˜ GET âœ… å¤šæ¬¡è®¿é—®ç»“æœä¸€æ · POST âŒ å¤šæ¬¡å‘é€å¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ï¼ˆå¦‚è½¬è´¦ï¼‰ PUT âœ… è®¾ç½®æŸå€¼ï¼Œå¤šæ¬¡æ˜¯ä¸€æ ·çš„ DELETE âœ…/âŒ ä¸€èˆ¬å¹‚ç­‰ï¼Œä½†æœ‰ç‰¹æ®Šæƒ…å†µé™¤å¤– ğŸ¯ æ€»ç»“ä¸€å¥è¯ï¼š\r#\ré‡æ”¾æ”»å‡» = é‡å‘æ—§çš„æœ‰æ•ˆè¯·æ±‚ï¼Œæ¬ºéª—ç³»ç»Ÿé‡å¤æ‰§è¡Œæ“ä½œã€‚\né˜²å¾¡å…³é”®åœ¨äºè¯†åˆ«è¯·æ±‚æ˜¯å¦â€œç‹¬ä¸€æ— äºŒã€åœ¨æœ‰æ•ˆæ—¶é—´å†…ã€æœªå¤„ç†è¿‡â€ã€‚\næœ€ä½³å®è·µ\r#\rç”Ÿäº§ç¯å¢ƒä¸­é˜²æ­¢é‡æ”¾æ”»å‡»çš„æœ€ä½³å®è·µä¸»è¦å›´ç»•ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæªæ–½å±•å¼€ï¼Œç›®æ ‡æ˜¯ç¡®ä¿æ¯ä¸ªè¯·æ±‚å”¯ä¸€ä¸”ä¸å¯é‡å¤æ‰§è¡Œï¼ŒåŒæ—¶ä¿è¯å®‰å…¨æ€§å’Œæ€§èƒ½ï¼š\n1. è¯·æ±‚å”¯ä¸€æ€§ï¼ˆä½¿ç”¨ Nonce æˆ–å”¯ä¸€è¯·æ±‚ IDï¼‰\r#\rå®¢æˆ·ç«¯ç”Ÿæˆå”¯ä¸€çš„éšæœºå­—ç¬¦ä¸²ï¼ˆNonceï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚æºå¸¦\næœåŠ¡ç«¯ç»´æŠ¤ä¸€å¼ å·²ä½¿ç”¨ Nonce çš„ç¼“å­˜è¡¨ï¼ˆå¦‚ Redisï¼‰\næ”¶åˆ°è¯·æ±‚æ—¶æ£€æŸ¥ Nonce æ˜¯å¦å·²è¢«å¤„ç†è¿‡ï¼š\næ˜¯ â†’ æ‹’ç»ï¼Œé˜²æ­¢é‡å¤æ‰§è¡Œ å¦ â†’ ç»§ç»­å¤„ç†ï¼Œå¹¶è®°å½• Nonce æ³¨æ„ï¼šç¼“å­˜ Nonce çš„æœ‰æ•ˆæœŸåº”åˆç†ï¼Œé˜²æ­¢ç¼“å­˜çˆ†ç‚¸ã€‚\n2. æ—¶é—´æˆ³å’Œæœ‰æ•ˆæœŸé™åˆ¶\r#\rè¯·æ±‚æºå¸¦æ—¶é—´æˆ³ï¼ˆå¦‚ UNIX æ—¶é—´æˆ³ï¼‰ æœåŠ¡ç«¯éªŒè¯è¯·æ±‚æ—¶é—´ä¸å½“å‰æ—¶é—´å·®æ˜¯å¦åœ¨å…è®¸çª—å£å†…ï¼ˆä¾‹å¦‚ Â±5 åˆ†é’Ÿï¼‰ è¶…æ—¶è¯·æ±‚æ‹’ç»å¤„ç†ï¼Œé¿å…è€è¯·æ±‚è¢«é‡æ”¾ 3. è¯·æ±‚ç­¾åï¼ˆHMAC æˆ–æ•°å­—ç­¾åï¼‰\r#\rå®¢æˆ·ç«¯å¯¹è¯·æ±‚å‚æ•°ï¼ˆåŒ…æ‹¬ Nonceã€æ—¶é—´æˆ³ç­‰ï¼‰è¿›è¡Œç­¾åï¼Œä¿è¯è¯·æ±‚æœªè¢«ç¯¡æ”¹ æœåŠ¡ç«¯ç”¨å…±äº«å¯†é’¥éªŒè¯ç­¾å ç­¾ååŒæ—¶é˜²æ­¢ç¯¡æ”¹å’Œä¿è¯è¯·æ±‚çš„å®Œæ•´æ€§ 4. å¹‚ç­‰æ¥å£è®¾è®¡\r#\rå°½é‡è®¾è®¡å¹‚ç­‰çš„æ¥å£ï¼Œä¿è¯é‡å¤è¯·æ±‚ä¸ä¼šé€ æˆå‰¯ä½œç”¨ï¼ˆå¦‚æ”¯ä»˜æ¥å£å¤šæ¬¡è¯·æ±‚åªæ‰£ä¸€æ¬¡ï¼‰ å¯¹éå¹‚ç­‰æ“ä½œï¼Œé€šè¿‡ä¸Šé¢ Nonce å’Œç­¾åä¸¥æ ¼é™åˆ¶é‡å¤è¯·æ±‚ 5. ä½¿ç”¨å®‰å…¨åè®®ï¼ˆTLS 1.3ï¼‰\r#\ré€šè¿‡åŠ å¯†é˜²æ­¢ä¸­é—´äººæŠ“åŒ…çªƒå¬å’Œç¯¡æ”¹ å‡å°‘æ”»å‡»è€…è·å–è¯·æ±‚å†…å®¹çš„å¯èƒ½ 6. å¯¹ 0-RTT è¯·æ±‚ç‰¹åˆ«é˜²æŠ¤ï¼ˆé’ˆå¯¹ QUIC/TLS 1.3ï¼‰\r#\ré™åˆ¶ 0-RTT åªç”¨åœ¨å¹‚ç­‰æ“ä½œ æœåŠ¡å™¨ç»´æŠ¤å·²æ¥å—çš„ 0-RTT è¯·æ±‚ç¼“å­˜ï¼Œé˜²æ­¢é‡å¤æ‰§è¡Œ å¯¹éå¹‚ç­‰è¯·æ±‚ç¦ç”¨ 0-RTT 7. ç›‘æ§ä¸å‘Šè­¦\r#\rå¯¹å¼‚å¸¸é‡å¤è¯·æ±‚é¢‘ç¹çš„ IP æˆ–ç”¨æˆ·ï¼Œè§¦å‘å‘Šè­¦ ç»“åˆé£æ§ç­–ç•¥é™åˆ¶è¯·æ±‚é€Ÿç‡å’Œè¡Œä¸ºå¼‚å¸¸ 8. å…·ä½“æŠ€æœ¯æ ˆç¤ºä¾‹\r#\ræŠ€æœ¯ æ¨èæ–¹æ¡ˆ ç¼“å­˜ Redisï¼Œæ”¯æŒå¿«é€Ÿå»é‡ç¼“å­˜ Nonce ç­¾åç®—æ³• HMAC-SHA256ï¼ŒRSA æ•°å­—ç­¾å æ—¶é—´åŒæ­¥ NTP ä¿è¯æœåŠ¡å™¨æ—¶é—´å‡†ç¡® é˜²ç«å¢™ \u0026amp; WAF ç›‘æµ‹å¹¶é˜»æ–­å¼‚å¸¸è¯·æ±‚ æ€»ç»“\r#\ré˜²é‡æ”¾æ‰‹æ®µ ä½œç”¨ å®æ–½éš¾åº¦ å¤‡æ³¨ Nonce å”¯ä¸€å€¼ ä¿è¯è¯·æ±‚ä¸å¯é‡å¤æ‰§è¡Œ ä¸­ éœ€ç®¡ç†ç¼“å­˜æœ‰æ•ˆæœŸ æ—¶é—´æˆ³æ ¡éªŒ é™åˆ¶è¯·æ±‚æœ‰æ•ˆæ—¶é—´çª—å£ ä½ é˜²æ­¢æ—§è¯·æ±‚è¢«é‡æ”¾ è¯·æ±‚ç­¾å ä¿è¯è¯·æ±‚å®Œæ•´æ€§ä¸åˆæ³•æ€§ ä¸­ éœ€å®‰å…¨ç®¡ç†å¯†é’¥ å¹‚ç­‰è®¾è®¡ é™ä½é‡å¤è¯·æ±‚é£é™© è®¾è®¡å±‚é¢ å°½é‡è®¾è®¡ä¸šåŠ¡å¹‚ç­‰ 0-RTT é™åˆ¶ é˜²æ­¢æ—©æœŸæ•°æ®é‡æ”¾æ”»å‡» é«˜ ä»…æ”¯æŒå¹‚ç­‰è¯·æ±‚ å®‰å…¨ä¼ è¾“ï¼ˆTLSï¼‰ é˜²æ­¢ä¸­é—´äººæŠ“åŒ… ä½ åŸºç¡€é˜²çº¿ ç›‘æ§å‘Šè­¦ å®æ—¶å‘ç°å¼‚å¸¸è¡Œä¸º ä¸­ é…åˆè‡ªåŠ¨åŒ–é˜²å¾¡ç­–ç•¥ æ¡ˆä¾‹\r#\r1. è¯·æ±‚ä½“è®¾è®¡\r#\rå‡è®¾è¿™æ˜¯å‰ç«¯æˆ–å®¢æˆ·ç«¯å‘å‡ºçš„è¯·æ±‚ JSONï¼š\n{ \u0026#34;userId\u0026#34;: \u0026#34;12345\u0026#34;, \u0026#34;action\u0026#34;: \u0026#34;transfer\u0026#34;, \u0026#34;amount\u0026#34;: 100, \u0026#34;timestamp\u0026#34;: 1687645200, // UNIXæ—¶é—´æˆ³ï¼Œç§’çº§ \u0026#34;nonce\u0026#34;: \u0026#34;a1b2c3d4e5f6\u0026#34;, // å”¯ä¸€è¯·æ±‚IDï¼Œé˜²é‡æ”¾ \u0026#34;signature\u0026#34;: \u0026#34;abcdef1234567890\u0026#34; // è¯·æ±‚ç­¾åï¼Œé˜²ç¯¡æ”¹ } 2. ç­¾åè§„åˆ™\r#\rç­¾å = HMAC_SHA256(secret_key, æ‹¼æ¥æ‰€æœ‰è¯·æ±‚å‚æ•°ï¼ˆé™¤ signatureï¼‰)\nå¸¸è§æ‹¼æ¥æ–¹å¼ï¼ˆå‚æ•°æŒ‰å­—å…¸åºï¼‰ï¼š\naction=transfer\u0026amp;amount=100\u0026amp;nonce=a1b2c3d4e5f6\u0026amp;timestamp=1687645200\u0026amp;userId=12345 3. ä¼ªä»£ç ç¤ºèŒƒ\r#\rimport javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.*; import java.nio.charset.StandardCharsets; public class ReplayProtection { private static final String SECRET_KEY = \u0026#34;YOUR_SECRET_KEY\u0026#34;; // è®¡ç®—ç­¾å public static String generateSignature(Map\u0026lt;String, String\u0026gt; params) throws Exception { // æ’åºå‚æ•°å List\u0026lt;String\u0026gt; keys = new ArrayList\u0026lt;\u0026gt;(params.keySet()); Collections.sort(keys); // æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ’é™¤ signature å­—æ®µ StringBuilder sb = new StringBuilder(); for (String key : keys) { if (key.equals(\u0026#34;signature\u0026#34;)) continue; sb.append(key).append(\u0026#34;=\u0026#34;).append(params.get(key)).append(\u0026#34;\u0026amp;\u0026#34;); } sb.deleteCharAt(sb.length() - 1); // å»æ‰æœ€åçš„\u0026amp; // HMAC-SHA256 è®¡ç®— Mac sha256_HMAC = Mac.getInstance(\u0026#34;HmacSHA256\u0026#34;); SecretKeySpec secret_key = new SecretKeySpec(SECRET_KEY.getBytes(StandardCharsets.UTF_8), \u0026#34;HmacSHA256\u0026#34;); sha256_HMAC.init(secret_key); byte[] hash = sha256_HMAC.doFinal(sb.toString().getBytes(StandardCharsets.UTF_8)); // è½¬16è¿›åˆ¶å­—ç¬¦ä¸² StringBuilder result = new StringBuilder(); for (byte b : hash) { result.append(String.format(\u0026#34;%02x\u0026#34;, b)); } return result.toString(); } // éªŒè¯è¯·æ±‚ public static boolean verifyRequest(Map\u0026lt;String, String\u0026gt; params, Set\u0026lt;String\u0026gt; nonceCache, long allowedTimeWindowSeconds) throws Exception { // 1. éªŒè¯æ—¶é—´æˆ³ long timestamp = Long.parseLong(params.get(\u0026#34;timestamp\u0026#34;)); long now = System.currentTimeMillis() / 1000; if (Math.abs(now - timestamp) \u0026gt; allowedTimeWindowSeconds) { System.out.println(\u0026#34;è¯·æ±‚æ—¶é—´æˆ³è¶…æ—¶\u0026#34;); return false; } // 2. éªŒè¯nonceå”¯ä¸€æ€§ï¼ˆé˜²é‡æ”¾ï¼‰ String nonce = params.get(\u0026#34;nonce\u0026#34;); if (nonceCache.contains(nonce)) { System.out.println(\u0026#34;è¯·æ±‚nonceé‡å¤ï¼Œç–‘ä¼¼é‡æ”¾æ”»å‡»\u0026#34;); return false; } nonceCache.add(nonce); // 3. éªŒè¯ç­¾å String clientSign = params.get(\u0026#34;signature\u0026#34;); String serverSign = generateSignature(params); if (!serverSign.equals(clientSign)) { System.out.println(\u0026#34;ç­¾åæ ¡éªŒå¤±è´¥\u0026#34;); return false; } return true; } public static void main(String[] args) throws Exception { // æ¨¡æ‹Ÿè¯·æ±‚å‚æ•° Map\u0026lt;String, String\u0026gt; requestParams = new HashMap\u0026lt;\u0026gt;(); requestParams.put(\u0026#34;userId\u0026#34;, \u0026#34;12345\u0026#34;); requestParams.put(\u0026#34;action\u0026#34;, \u0026#34;transfer\u0026#34;); requestParams.put(\u0026#34;amount\u0026#34;, \u0026#34;100\u0026#34;); requestParams.put(\u0026#34;timestamp\u0026#34;, String.valueOf(System.currentTimeMillis() / 1000)); requestParams.put(\u0026#34;nonce\u0026#34;, UUID.randomUUID().toString().replace(\u0026#34;-\u0026#34;, \u0026#34;\u0026#34;)); // ç”Ÿæˆç­¾åå¹¶åŠ å…¥è¯·æ±‚å‚æ•° String signature = generateSignature(requestParams); requestParams.put(\u0026#34;signature\u0026#34;, signature); // æ¨¡æ‹ŸæœåŠ¡å™¨ç¼“å­˜nonceï¼ˆå®é™…å¯ç”¨ Redis ç­‰å­˜å‚¨ï¼‰ Set\u0026lt;String\u0026gt; nonceCache = new HashSet\u0026lt;\u0026gt;(); // éªŒè¯è¯·æ±‚ boolean valid = verifyRequest(requestParams, nonceCache, 300); System.out.println(\u0026#34;è¯·æ±‚æ˜¯å¦æœ‰æ•ˆï¼š\u0026#34; + valid); // æ¨¡æ‹Ÿé‡æ”¾è¯·æ±‚ï¼ˆåŒä¸€ä¸ªnonceï¼‰ boolean replay = verifyRequest(requestParams, nonceCache, 300); System.out.println(\u0026#34;é‡æ”¾è¯·æ±‚æ˜¯å¦æœ‰æ•ˆï¼š\u0026#34; + replay); } } 4. è¯´æ˜\r#\rtimestamp é˜²æ­¢æ—§è¯·æ±‚è¢«é‡æ”¾ï¼ŒæœåŠ¡å™¨åªæ¥å—ä¸€å®šæ—¶é—´çª—å£å†…çš„è¯·æ±‚ nonce ä¿è¯è¯·æ±‚å”¯ä¸€ï¼ŒæœåŠ¡ç«¯ç¼“å­˜å·²ç”¨ nonceï¼Œé‡å¤ä½¿ç”¨åˆ¤å®šä¸ºé‡æ”¾æ”»å‡» signature ç”¨ HMAC-SHA256 ç»‘å®šæ‰€æœ‰å‚æ•°ï¼Œé˜²æ­¢ç¯¡æ”¹ nonceCache è¿™é‡Œç”¨ HashSet æ¨¡æ‹Ÿï¼Œç”Ÿäº§ä¸­åº”ç”¨ Redis æˆ–å…¶ä»–åˆ†å¸ƒå¼ç¼“å­˜å¹¶è®¾ç½®è¿‡æœŸ 5. ç”Ÿäº§ä¸­éœ€è¦è€ƒè™‘\r#\rnonce ç¼“å­˜å¤§å°å’Œè¿‡æœŸç­–ç•¥ï¼šé˜²æ­¢å†…å­˜/ç¼“å­˜çˆ†æ»¡ æ—¶é—´åŒæ­¥ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ—¶é—´è¦åŒæ­¥ï¼ˆNTPï¼‰ ç­¾åç®—æ³•å’Œå¯†é’¥å®‰å…¨ï¼šå¯†é’¥è¦å®‰å…¨ç®¡ç†ï¼Œé¿å…æ³„éœ² æ¥å£å¹‚ç­‰è®¾è®¡ï¼šå³ä½¿è¯·æ±‚æœªè¢«é‡æ”¾ï¼Œä¹Ÿè¦ä¿è¯å¤šæ¬¡æ‰§è¡Œä¸å‡ºé”™ å¤±è´¥é‡è¯•å’Œå¹¶å‘æ§åˆ¶ éœ€è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ªåŸºäºSpring Bootçš„æ‹¦æˆªå™¨ç¤ºä¾‹ï¼Œæˆ–è€…å…¶ä»–è¯­è¨€ç‰ˆæœ¬çš„å®ç°å—ï¼Ÿ\nå¾ˆå¥½çš„é—®é¢˜ï¼å…³äºä¸ºä»€ä¹ˆç”¨HMACï¼Œä»¥åŠç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µï¼Œæˆ‘è¯¦ç»†è¯´è¯´ã€‚\nHMAC\r#\r1. ä¸ºä»€ä¹ˆç”¨ HMACï¼Ÿ\r#\rHMACï¼ˆHash-based Message Authentication Codeï¼‰ æ˜¯ä¸€ç§åŸºäºå¯†é’¥çš„æ¶ˆæ¯è®¤è¯ç ç®—æ³•ï¼Œå¸¸ç”¨æ¥ä¿è¯æ¶ˆæ¯çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚å®ƒçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š\né˜²ç¯¡æ”¹æ€§å¼º HMAC ç”¨ä¸€ä¸ªå…±äº«çš„å¯†é’¥å’Œå“ˆå¸Œç®—æ³•ï¼ˆå¦‚ SHA-256ï¼‰ç»“åˆç”Ÿæˆç­¾åï¼Œåªæœ‰çŸ¥é“å¯†é’¥æ‰èƒ½æ­£ç¡®è®¡ç®—å’ŒéªŒè¯ç­¾åï¼Œé˜²æ­¢æ¶ˆæ¯è¢«ç¯¡æ”¹ã€‚\nè®¡ç®—æ•ˆç‡é«˜ ç›¸æ¯”å…¬é’¥ç­¾åï¼ˆRSA/ECDSAï¼‰ï¼ŒHMAC é€Ÿåº¦å¿«ã€æ€§èƒ½å¼€é”€å°ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚\nç®€å•æ˜“ç”¨ åªéœ€å…±äº«å¯†é’¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½èƒ½å¿«é€Ÿå®ç°ï¼Œæ— éœ€å¤æ‚çš„å…¬ç§é’¥ç®¡ç†ã€‚\næŠ—ç¢°æ’å¼º ç»“åˆå“ˆå¸Œç®—æ³•çš„æŠ—ç¢°æ’æ€§ï¼Œä¿è¯ç­¾åå”¯ä¸€ä¸”å®‰å…¨ã€‚\n2. ç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µæ˜¯ç”¨ HMAC å—ï¼Ÿ\r#\rå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸å’Œé‡‘èç³»ç»Ÿéƒ½é‡‡ç”¨ HMAC ä½œä¸ºè¯·æ±‚ç­¾åå’Œé˜²é‡æ”¾çš„æ ¸å¿ƒæ‰‹æ®µã€‚\nåŸå› ï¼š\nä¼˜åŠ¿ è§£é‡Š æ€§èƒ½ä¼˜å¼‚ é€‚åˆæµ·é‡è¯·æ±‚çš„å¿«é€Ÿç­¾åå’ŒéªŒè¯ å®‰å…¨æ€§è¶³å¤Ÿå¼º å¯¹ç§°å¯†é’¥æœºåˆ¶ï¼Œåœ¨å¯†é’¥ç®¡ç†å¾—å½“ä¸‹å®‰å…¨ å®ç°å’Œç»´æŠ¤æˆæœ¬ä½ å‡ ä¹æ‰€æœ‰è¯­è¨€å’Œå¹³å°éƒ½æœ‰æ ‡å‡†å®ç° å®¹æ˜“é›†æˆ é€‚ç”¨äºç§»åŠ¨ç«¯ã€å‰ç«¯ã€æœåŠ¡å™¨ç«¯ç­¾å 3. ä»€ä¹ˆæ—¶å€™ä¸ç”¨ HMACï¼Ÿ\r#\réœ€è¦éå¯¹ç§°ç­¾åï¼ˆå…¬é’¥/ç§é’¥ï¼‰åœºæ™¯ å¦‚ OAuthã€JWTã€æ•°å­—è¯ä¹¦ç­¾åï¼Œä¿è¯ç­¾åè€…èº«ä»½å…¬å¼€éªŒè¯ã€‚\nå¤šæ–¹äº¤äº’ï¼Œä¸èƒ½å…±äº«å¯†é’¥ éœ€è¦å…¬ç§é’¥ä½“ç³»ä¿è¯èº«ä»½ä¸å¯ä¼ªé€ ã€‚\n4. ç”Ÿäº§ä¸­å…¶ä»–å¸¸è§åšæ³•\r#\ræ–¹æ¡ˆ é€‚ç”¨åœºæ™¯ å¤‡æ³¨ HMACï¼ˆSHA-256ç­‰ï¼‰ å†…éƒ¨æœåŠ¡è°ƒç”¨ã€APIç­¾å é«˜æ€§èƒ½ï¼Œç®€å• RSA/ECDSA æ•°å­—ç­¾å è·¨æœåŠ¡æˆ–ç¬¬ä¸‰æ–¹äº¤äº’ èº«ä»½éªŒè¯ï¼Œéå¯¹ç§°æ›´å®‰å…¨ JWT + ç­¾å æ— çŠ¶æ€è®¤è¯ é›†æˆèº«ä»½å’Œæƒé™ï¼Œæ–¹ä¾¿ä¼ é€’ OAuth 2.0 / OpenID ç»Ÿä¸€è®¤è¯æˆæƒ æ ‡å‡†åè®®ï¼Œå¤šæ–¹æˆæƒ 5. æ€»ç»“\r#\rç‰¹ç‚¹ HMAC å…¬é’¥ç­¾åï¼ˆRSA/ECDSAï¼‰ å®‰å…¨æ€§ é«˜ï¼ˆå¯¹ç§°å¯†é’¥ï¼Œå¯†é’¥éœ€å®‰å…¨ï¼‰ æ›´é«˜ï¼ˆéå¯¹ç§°ï¼Œå¯å…¬å¼€éªŒè¯ï¼‰ æ€§èƒ½ å¿« æ…¢ï¼Œè®¡ç®—å¼€é”€å¤§ å®ç°å¤æ‚åº¦ ä½ é«˜ï¼Œéœ€å¯†é’¥ç®¡ç†å’Œåˆ†å‘ å…¸å‹ä½¿ç”¨åœºæ™¯ å†…éƒ¨ API ç­¾åï¼Œé˜²ç¯¡æ”¹ï¼Œé˜²é‡æ”¾ è·¨ç³»ç»Ÿèº«ä»½è®¤è¯ã€ç”µå­ç­¾å å¦‚æœä½ è¦è®¾è®¡çš„ç³»ç»Ÿæ˜¯å…¬å¸å†…éƒ¨æœåŠ¡ã€APIæ¥å£è°ƒç”¨ã€ç§»åŠ¨ç«¯è°ƒç”¨ï¼ŒHMACå‡ ä¹æ˜¯æœ€å®ç”¨ä¸”å¹¿æ³›è®¤å¯çš„æ–¹æ¡ˆã€‚\néœ€è¦ï¼Œæˆ‘å¯ä»¥å¸®ä½ å†™ä¸€ä»½HMACå¯†é’¥ç®¡ç†æœ€ä½³å®è·µæˆ–æ›´è¯¦ç»†çš„å…¬é’¥ç­¾åå¯¹æ¯”åˆ†æã€‚ä½ æ„Ÿå…´è¶£å—ï¼Ÿ\nè¿™æ˜¯ä¸ªéå¸¸å…³é”®ä¸”å®ç”¨çš„é—®é¢˜ï¼æˆ‘å¸®ä½ æ‹†è§£è®²æ¸…æ¥šï¼š\nFAQ\r#\r1. å‰åç«¯éƒ½è¦çŸ¥é“HMACå¯†é’¥å—ï¼Ÿ\r#\rç†æƒ³è®¾è®¡åŸåˆ™ï¼šä¸åº”è¯¥è®©å‰ç«¯çŸ¥é“å®Œæ•´çš„ HMAC æœåŠ¡å™¨å¯†é’¥\r#\rHMACå¯†é’¥æ˜¯â€œå…±äº«å¯†é’¥â€ï¼Œåªè¦æ³„éœ²ï¼Œæ”»å‡»è€…å°±èƒ½ä¼ªé€ ç­¾åã€‚ æ‰€ä»¥ï¼ŒæœåŠ¡å™¨ç«¯å¯†é’¥å¿…é¡»ä¸¥æ ¼ä¿å¯†ï¼Œä¸èƒ½æš´éœ²ç»™å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ã€ç§»åŠ¨ç«¯ï¼‰ã€‚\nå‰ç«¯æ— æ³•æŒæœ‰çœŸæ­£çš„æœåŠ¡å™¨å¯†é’¥ï¼Œä½†éœ€è¦æŸç§æœºåˆ¶ç­¾åè¯·æ±‚ï¼Œé˜²æ­¢ç¯¡æ”¹å’Œé‡æ”¾ã€‚\n2. å‰ç«¯å¦‚ä½•åšç­¾åï¼Ÿ\r#\råšæ³•ä¸€ï¼šå‰ç«¯ä½¿ç”¨å®¢æˆ·ç«¯å¯†é’¥ï¼ˆClient Secretï¼‰ç”Ÿæˆç­¾å é€‚ç”¨äºç§»åŠ¨Appæˆ–å¯ä¿¡å®¢æˆ·ç«¯ã€‚\næœåŠ¡å™¨ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ†é…å”¯ä¸€å¯†é’¥ å‰ç«¯ç”¨è‡ªå·±çš„å¯†é’¥è®¡ç®—ç­¾åï¼Œåç«¯æ ¡éªŒå¯¹åº”å¯†é’¥ å¯†é’¥éšè—åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œé˜²æ­¢æ³„æ¼ï¼ˆä½†æœ‰ä¸€å®šé£é™©ï¼‰ åšæ³•äºŒï¼šå‰ç«¯ä¸ç­¾åï¼ŒæœåŠ¡å™¨ç«¯å¯¹è¯·æ±‚åšç­¾åéªŒè¯ + é˜²é‡æ”¾ç­–ç•¥ é€‚åˆWebå‰ç«¯ã€‚\nå‰ç«¯ä¼ é€’å¿…è¦å‚æ•°ï¼ˆå«nonceã€timestampï¼‰ æœåŠ¡å™¨ç«¯æ ¡éªŒnonceå”¯ä¸€å’Œæ—¶é—´æˆ³æœ‰æ•ˆï¼Œ ç»“åˆèº«ä»½è®¤è¯ï¼ˆTokenã€Sessionï¼‰é™åˆ¶é‡å¤è¯·æ±‚ åšæ³•ä¸‰ï¼šAPI Gateway / ç½‘å…³è´Ÿè´£ç­¾åå’Œæ ¡éªŒ\nç½‘å…³å’Œåç«¯æœåŠ¡å…±äº«å¯†é’¥ å‰ç«¯è¯·æ±‚ç»è¿‡ç½‘å…³ç»Ÿä¸€éªŒè¯ åç«¯æœåŠ¡åªä¿¡ä»»ç½‘å…³è½¬å‘çš„åˆæ³•è¯·æ±‚ 3. å¾®æœåŠ¡ä¸­å¦‚ä½•ç”¨HMACé˜²é‡æ”¾å®Œæˆæ”¯ä»˜æµç¨‹ï¼Ÿ\r#\rå…¸å‹æµç¨‹ç¤ºä¾‹ï¼š\r#\r[å®¢æˆ·ç«¯] â†’ å‘èµ·æ”¯ä»˜è¯·æ±‚ â†’ [APIç½‘å…³] â†’ [æ”¯ä»˜æœåŠ¡] â†’ [æ”¯ä»˜ç½‘å…³] è¯¦ç»†æ­¥éª¤\r#\ræ­¥éª¤ æè¿° 1. å®¢æˆ·ç«¯å‘èµ·æ”¯ä»˜è¯·æ±‚ å‰ç«¯å‘é€æ”¯ä»˜å‚æ•°ï¼ˆé‡‘é¢ã€è®¢å•å·ã€æ—¶é—´æˆ³ã€nonceç­‰ï¼‰åˆ°APIç½‘å…³ 2. APIç½‘å…³ç­¾åè¯·æ±‚ APIç½‘å…³ç”¨è‡ªèº«çš„å¯†é’¥å¯¹è¯·æ±‚å‚æ•°è®¡ç®— HMAC ç­¾åï¼Œé™„åŠ åˆ°è¯·æ±‚å¤´æˆ–å‚æ•°ä¸­ 3. æ”¯ä»˜æœåŠ¡éªŒè¯ç­¾å æ”¯ä»˜æœåŠ¡ä»APIç½‘å…³æ¥æ”¶è¯·æ±‚ï¼Œä½¿ç”¨å…±äº«å¯†é’¥éªŒè¯ç­¾åï¼Œç¡®ä¿è¯·æ±‚æœªè¢«ç¯¡æ”¹ 4. æ”¯ä»˜æœåŠ¡æ ¡éªŒnonce æ£€æŸ¥è¯·æ±‚ä¸­çš„nonceæ˜¯å¦å·²ä½¿ç”¨ï¼Œé˜²æ­¢é‡å¤æ”¯ä»˜è¯·æ±‚ 5. æ”¯ä»˜æœåŠ¡éªŒè¯æ—¶é—´æˆ³ æ—¶é—´æˆ³æ£€æŸ¥ï¼Œé˜²æ­¢è¿‡æœŸè¯·æ±‚ 6. æ”¯ä»˜æ‰§è¡Œ é€šè¿‡éªŒè¯åï¼Œè°ƒç”¨æ”¯ä»˜ç½‘å…³å®Œæˆæ”¯ä»˜ 7. è¿”å›ç»“æœ æ”¯ä»˜æœåŠ¡è¿”å›ç»“æœç»™APIç½‘å…³ï¼ŒAPIç½‘å…³åé¦ˆç»™å®¢æˆ·ç«¯ å…³é”®ç‚¹è¯´æ˜\r#\rHMACå¯†é’¥ä»…å­˜åœ¨äºAPIç½‘å…³å’Œæ”¯ä»˜æœåŠ¡ä¹‹é—´ï¼Œä¸æš´éœ²ç»™å®¢æˆ·ç«¯ å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“å¯†é’¥ï¼Œä¹Ÿä¸ç›´æ¥è®¡ç®—HMACç­¾å APIç½‘å…³æ˜¯å¯ä¿¡ä»£ç†ï¼Œè´Ÿè´£å¯¹è¯·æ±‚ç­¾åå’Œæ ¡éªŒ æ”¯ä»˜æœåŠ¡é€šè¿‡nonceå’Œæ—¶é—´æˆ³ä¿è¯è¯·æ±‚å”¯ä¸€ä¸”åŠæ—¶ å¯¹nonceç¼“å­˜ä¸€èˆ¬å­˜å‚¨åœ¨åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰ä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ æ—¶é—´åŒæ­¥ä¾èµ–NTPï¼Œé˜²æ­¢æ—¶é—´å·®è¿‡å¤§å¯¼è‡´è¯·æ±‚è¢«è¯¯æ‹’ 4. å…¸å‹æ¶æ„å›¾ç¤ºæ„\r#\rå®¢æˆ·ç«¯\r|\r| è¯·æ±‚ï¼ˆæ— HMACç­¾åï¼Œå¸¦æ—¶é—´æˆ³+nonceï¼‰\râ†“\rAPIç½‘å…³ (ç”ŸæˆHMACç­¾å)\r|\r| å¸¦ç­¾åçš„è¯·æ±‚\râ†“\ræ”¯ä»˜æœåŠ¡ (éªŒè¯ç­¾å + é˜²é‡æ”¾)\r|\râ†“\ræ”¯ä»˜ç½‘å…³ 5. æ€»ç»“\r#\rè§’è‰² æ˜¯å¦çŸ¥é“HMACå¯†é’¥ è´Ÿè´£ä»€ä¹ˆ å®¢æˆ·ç«¯ å¦ ç”Ÿæˆè¯·æ±‚å‚æ•°ï¼ˆæ—¶é—´æˆ³ã€nonceï¼‰ APIç½‘å…³ æ˜¯ è®¡ç®—å¹¶æ·»åŠ  HMAC ç­¾å æ”¯ä»˜æœåŠ¡ æ˜¯ éªŒè¯ç­¾åï¼Œæ£€æŸ¥ nonce å’Œæ—¶é—´æˆ³ "},{"id":46,"href":"/docs/study/base/license-comparison/","title":"ä¸»æµè®¸å¯è¯å¯¹æ¯”","section":"åŸºç¡€","content":"\rå¼€æºè®¸å¯è¯å¯¹æ¯”è¡¨\r#\rè®¸å¯è¯åç§° ç±»å‹ ä¸“åˆ©æˆæƒ Copyleft å¼ºåº¦ å•†ä¸šå…¼å®¹æ€§ ä¸ GPL å…¼å®¹æ€§ é€‚ç”¨åœºæ™¯ MIT å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ å°å‹é¡¹ç›®ã€åº“ Apache 2.0 å®½æ¾ âœ… æœ‰ âŒ æ—  âœ… é«˜ âœ… æ˜¯ ä¼ä¸šçº§é¡¹ç›®ã€æ¶‰åŠä¸“åˆ© GPL v3.0 å¼º Copyleft âœ… æœ‰ âœ… å¼º âš ï¸ é™åˆ¶ âœ… æ˜¯ å¼€æºé¡¹ç›®ã€éœ€å¼ºåˆ¶å¼€æº GPL v2.0 å¼º Copyleft âŒ æ—  âœ… å¼º âš ï¸ é™åˆ¶ âŒ å¦ ä¼ ç»Ÿå¼€æºé¡¹ç›® AGPL v3.0 å¼º Copyleft âœ… æœ‰ âœ… æœ€å¼º âš ï¸ é™åˆ¶ âœ… æ˜¯ SaaSã€ç½‘ç»œæœåŠ¡ LGPL v2.1 å¼± Copyleft âŒ æ—  âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ åº“ã€æ’ä»¶ BSD 2-Clause å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ ç³»ç»Ÿçº§ç»„ä»¶ã€å•†ä¸šé›†æˆ BSD 3-Clause å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ å•†ä¸šè½¯ä»¶ã€éœ€ç½²åä¿æŠ¤ Boost 1.0 å®½æ¾ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ C++ åº“ã€å·¥å…·é“¾ CC0 1.0 å…¬å…±é¢†åŸŸ âŒ æ—  âŒ æ—  âœ… é«˜ âœ… æ˜¯ æ•°æ®é›†ã€å†…å®¹å…±äº« EPL 2.0 å¼± Copyleft âœ… æœ‰ âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ ä¼ä¸šè½¯ä»¶ã€æ¨¡å—åŒ–é¡¹ç›® MPL 2.0 å¼± Copyleft âš ï¸ éƒ¨åˆ† âš ï¸ å¼± âœ… é«˜ âœ… æ˜¯ æµè§ˆå™¨ã€æ··åˆæˆæƒé¡¹ç›® "}]